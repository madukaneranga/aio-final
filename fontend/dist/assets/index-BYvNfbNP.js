function kP(r,t){for(var s=0;s<t.length;s++){const i=t[s];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in r)){const o=Object.getOwnPropertyDescriptor(i,a);o&&Object.defineProperty(r,a,o.get?o:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var use=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Cx={exports:{}},mf={},Bx={exports:{}},En={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sN;function _P(){if(sN)return En;sN=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),f=Symbol.iterator;function p(T){return T===null||typeof T!="object"?null:(T=f&&T[f]||T["@@iterator"],typeof T=="function"?T:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,b={};function v(T,U,K){this.props=T,this.context=U,this.refs=b,this.updater=K||m}v.prototype.isReactComponent={},v.prototype.setState=function(T,U){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,U,"setState")},v.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function y(){}y.prototype=v.prototype;function w(T,U,K){this.props=T,this.context=U,this.refs=b,this.updater=K||m}var j=w.prototype=new y;j.constructor=w,g(j,v.prototype),j.isPureReactComponent=!0;var C=Array.isArray,B=Object.prototype.hasOwnProperty,E={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function S(T,U,K){var z,M={},H=null,Y=null;if(U!=null)for(z in U.ref!==void 0&&(Y=U.ref),U.key!==void 0&&(H=""+U.key),U)B.call(U,z)&&!_.hasOwnProperty(z)&&(M[z]=U[z]);var ae=arguments.length-2;if(ae===1)M.children=K;else if(1<ae){for(var oe=Array(ae),be=0;be<ae;be++)oe[be]=arguments[be+2];M.children=oe}if(T&&T.defaultProps)for(z in ae=T.defaultProps,ae)M[z]===void 0&&(M[z]=ae[z]);return{$$typeof:r,type:T,key:H,ref:Y,props:M,_owner:E.current}}function N(T,U){return{$$typeof:r,type:T.type,key:U,ref:T.ref,props:T.props,_owner:T._owner}}function O(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function k(T){var U={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(K){return U[K]})}var I=/\/+/g;function R(T,U){return typeof T=="object"&&T!==null&&T.key!=null?k(""+T.key):U.toString(36)}function Q(T,U,K,z,M){var H=typeof T;(H==="undefined"||H==="boolean")&&(T=null);var Y=!1;if(T===null)Y=!0;else switch(H){case"string":case"number":Y=!0;break;case"object":switch(T.$$typeof){case r:case t:Y=!0}}if(Y)return Y=T,M=M(Y),T=z===""?"."+R(Y,0):z,C(M)?(K="",T!=null&&(K=T.replace(I,"$&/")+"/"),Q(M,U,K,"",function(be){return be})):M!=null&&(O(M)&&(M=N(M,K+(!M.key||Y&&Y.key===M.key?"":(""+M.key).replace(I,"$&/")+"/")+T)),U.push(M)),1;if(Y=0,z=z===""?".":z+":",C(T))for(var ae=0;ae<T.length;ae++){H=T[ae];var oe=z+R(H,ae);Y+=Q(H,U,K,oe,M)}else if(oe=p(T),typeof oe=="function")for(T=oe.call(T),ae=0;!(H=T.next()).done;)H=H.value,oe=z+R(H,ae++),Y+=Q(H,U,K,oe,M);else if(H==="object")throw U=String(T),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Y}function $(T,U,K){if(T==null)return T;var z=[],M=0;return Q(T,z,"","",function(H){return U.call(K,H,M++)}),z}function L(T){if(T._status===-1){var U=T._result;U=U(),U.then(function(K){(T._status===0||T._status===-1)&&(T._status=1,T._result=K)},function(K){(T._status===0||T._status===-1)&&(T._status=2,T._result=K)}),T._status===-1&&(T._status=0,T._result=U)}if(T._status===1)return T._result.default;throw T._result}var F={current:null},G={transition:null},X={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:G,ReactCurrentOwner:E};function q(){throw Error("act(...) is not supported in production builds of React.")}return En.Children={map:$,forEach:function(T,U,K){$(T,function(){U.apply(this,arguments)},K)},count:function(T){var U=0;return $(T,function(){U++}),U},toArray:function(T){return $(T,function(U){return U})||[]},only:function(T){if(!O(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},En.Component=v,En.Fragment=s,En.Profiler=a,En.PureComponent=w,En.StrictMode=i,En.Suspense=u,En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,En.act=q,En.cloneElement=function(T,U,K){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var z=g({},T.props),M=T.key,H=T.ref,Y=T._owner;if(U!=null){if(U.ref!==void 0&&(H=U.ref,Y=E.current),U.key!==void 0&&(M=""+U.key),T.type&&T.type.defaultProps)var ae=T.type.defaultProps;for(oe in U)B.call(U,oe)&&!_.hasOwnProperty(oe)&&(z[oe]=U[oe]===void 0&&ae!==void 0?ae[oe]:U[oe])}var oe=arguments.length-2;if(oe===1)z.children=K;else if(1<oe){ae=Array(oe);for(var be=0;be<oe;be++)ae[be]=arguments[be+2];z.children=ae}return{$$typeof:r,type:T.type,key:M,ref:H,props:z,_owner:Y}},En.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:o,_context:T},T.Consumer=T},En.createElement=S,En.createFactory=function(T){var U=S.bind(null,T);return U.type=T,U},En.createRef=function(){return{current:null}},En.forwardRef=function(T){return{$$typeof:l,render:T}},En.isValidElement=O,En.lazy=function(T){return{$$typeof:A,_payload:{_status:-1,_result:T},_init:L}},En.memo=function(T,U){return{$$typeof:d,type:T,compare:U===void 0?null:U}},En.startTransition=function(T){var U=G.transition;G.transition={};try{T()}finally{G.transition=U}},En.unstable_act=q,En.useCallback=function(T,U){return F.current.useCallback(T,U)},En.useContext=function(T){return F.current.useContext(T)},En.useDebugValue=function(){},En.useDeferredValue=function(T){return F.current.useDeferredValue(T)},En.useEffect=function(T,U){return F.current.useEffect(T,U)},En.useId=function(){return F.current.useId()},En.useImperativeHandle=function(T,U,K){return F.current.useImperativeHandle(T,U,K)},En.useInsertionEffect=function(T,U){return F.current.useInsertionEffect(T,U)},En.useLayoutEffect=function(T,U){return F.current.useLayoutEffect(T,U)},En.useMemo=function(T,U){return F.current.useMemo(T,U)},En.useReducer=function(T,U,K){return F.current.useReducer(T,U,K)},En.useRef=function(T){return F.current.useRef(T)},En.useState=function(T){return F.current.useState(T)},En.useSyncExternalStore=function(T,U,K){return F.current.useSyncExternalStore(T,U,K)},En.useTransition=function(){return F.current.useTransition()},En.version="18.3.1",En}var iN;function u1(){return iN||(iN=1,Bx.exports=_P()),Bx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN;function EP(){if(aN)return mf;aN=1;var r=u1(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(l,u,d){var A,f={},p=null,m=null;d!==void 0&&(p=""+d),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(m=u.ref);for(A in u)i.call(u,A)&&!o.hasOwnProperty(A)&&(f[A]=u[A]);if(l&&l.defaultProps)for(A in u=l.defaultProps,u)f[A]===void 0&&(f[A]=u[A]);return{$$typeof:t,type:l,key:p,ref:m,props:f,_owner:a.current}}return mf.Fragment=s,mf.jsx=c,mf.jsxs=c,mf}var oN;function OP(){return oN||(oN=1,Cx.exports=EP()),Cx.exports}var n=OP(),ee=u1();const Ft=Tp(ee),IP=kP({__proto__:null,default:Ft},[ee]);var Fm={},kx={exports:{}},Wa={},_x={exports:{}},Ex={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN;function PP(){return lN||(lN=1,(function(r){function t(G,X){var q=G.length;G.push(X);e:for(;0<q;){var T=q-1>>>1,U=G[T];if(0<a(U,X))G[T]=X,G[q]=U,q=T;else break e}}function s(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var X=G[0],q=G.pop();if(q!==X){G[0]=q;e:for(var T=0,U=G.length,K=U>>>1;T<K;){var z=2*(T+1)-1,M=G[z],H=z+1,Y=G[H];if(0>a(M,q))H<U&&0>a(Y,M)?(G[T]=Y,G[H]=q,T=H):(G[T]=M,G[z]=q,T=z);else if(H<U&&0>a(Y,q))G[T]=Y,G[H]=q,T=H;else break e}}return X}function a(G,X){var q=G.sortIndex-X.sortIndex;return q!==0?q:G.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,l=c.now();r.unstable_now=function(){return c.now()-l}}var u=[],d=[],A=1,f=null,p=3,m=!1,g=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(G){for(var X=s(d);X!==null;){if(X.callback===null)i(d);else if(X.startTime<=G)i(d),X.sortIndex=X.expirationTime,t(u,X);else break;X=s(d)}}function C(G){if(b=!1,j(G),!g)if(s(u)!==null)g=!0,L(B);else{var X=s(d);X!==null&&F(C,X.startTime-G)}}function B(G,X){g=!1,b&&(b=!1,y(S),S=-1),m=!0;var q=p;try{for(j(X),f=s(u);f!==null&&(!(f.expirationTime>X)||G&&!k());){var T=f.callback;if(typeof T=="function"){f.callback=null,p=f.priorityLevel;var U=T(f.expirationTime<=X);X=r.unstable_now(),typeof U=="function"?f.callback=U:f===s(u)&&i(u),j(X)}else i(u);f=s(u)}if(f!==null)var K=!0;else{var z=s(d);z!==null&&F(C,z.startTime-X),K=!1}return K}finally{f=null,p=q,m=!1}}var E=!1,_=null,S=-1,N=5,O=-1;function k(){return!(r.unstable_now()-O<N)}function I(){if(_!==null){var G=r.unstable_now();O=G;var X=!0;try{X=_(!0,G)}finally{X?R():(E=!1,_=null)}}else E=!1}var R;if(typeof w=="function")R=function(){w(I)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,$=Q.port2;Q.port1.onmessage=I,R=function(){$.postMessage(null)}}else R=function(){v(I,0)};function L(G){_=G,E||(E=!0,R())}function F(G,X){S=v(function(){G(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_continueExecution=function(){g||m||(g=!0,L(B))},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return s(u)},r.unstable_next=function(G){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var q=p;p=X;try{return G()}finally{p=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var q=p;p=G;try{return X()}finally{p=q}},r.unstable_scheduleCallback=function(G,X,q){var T=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?T+q:T):q=T,G){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=q+U,G={id:A++,callback:X,priorityLevel:G,startTime:q,expirationTime:U,sortIndex:-1},q>T?(G.sortIndex=q,t(d,G),s(u)===null&&G===s(d)&&(b?(y(S),S=-1):b=!0,F(C,q-T))):(G.sortIndex=U,t(u,G),g||m||(g=!0,L(B))),G},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(G){var X=p;return function(){var q=p;p=X;try{return G.apply(this,arguments)}finally{p=q}}}})(Ex)),Ex}var cN;function TP(){return cN||(cN=1,_x.exports=PP()),_x.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uN;function FP(){if(uN)return Wa;uN=1;var r=u1(),t=TP();function s(h){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+h,P=1;P<arguments.length;P++)x+="&args[]="+encodeURIComponent(arguments[P]);return"Minified React error #"+h+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function o(h,x){c(h,x),c(h+"Capture",x)}function c(h,x){for(a[h]=x,h=0;h<x.length;h++)i.add(x[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},f={};function p(h){return u.call(f,h)?!0:u.call(A,h)?!1:d.test(h)?f[h]=!0:(A[h]=!0,!1)}function m(h,x,P,W){if(P!==null&&P.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return W?!1:P!==null?!P.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function g(h,x,P,W){if(x===null||typeof x>"u"||m(h,x,P,W))return!0;if(W)return!1;if(P!==null)switch(P.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function b(h,x,P,W,se,ue,Ee){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=W,this.attributeNamespace=se,this.mustUseProperty=P,this.propertyName=h,this.type=x,this.sanitizeURL=ue,this.removeEmptyString=Ee}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){v[h]=new b(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var x=h[0];v[x]=new b(x,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){v[h]=new b(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){v[h]=new b(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){v[h]=new b(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){v[h]=new b(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){v[h]=new b(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){v[h]=new b(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){v[h]=new b(h,5,!1,h.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function w(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var x=h.replace(y,w);v[x]=new b(x,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var x=h.replace(y,w);v[x]=new b(x,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var x=h.replace(y,w);v[x]=new b(x,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){v[h]=new b(h,1,!1,h.toLowerCase(),null,!1,!1)}),v.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){v[h]=new b(h,1,!1,h.toLowerCase(),null,!0,!0)});function j(h,x,P,W){var se=v.hasOwnProperty(x)?v[x]:null;(se!==null?se.type!==0:W||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(g(x,P,se,W)&&(P=null),W||se===null?p(x)&&(P===null?h.removeAttribute(x):h.setAttribute(x,""+P)):se.mustUseProperty?h[se.propertyName]=P===null?se.type===3?!1:"":P:(x=se.attributeName,W=se.attributeNamespace,P===null?h.removeAttribute(x):(se=se.type,P=se===3||se===4&&P===!0?"":""+P,W?h.setAttributeNS(W,x,P):h.setAttribute(x,P))))}var C=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),k=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),G=Symbol.iterator;function X(h){return h===null||typeof h!="object"?null:(h=G&&h[G]||h["@@iterator"],typeof h=="function"?h:null)}var q=Object.assign,T;function U(h){if(T===void 0)try{throw Error()}catch(P){var x=P.stack.trim().match(/\n( *(at )?)/);T=x&&x[1]||""}return`
`+T+h}var K=!1;function z(h,x){if(!h||K)return"";K=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(jt){var W=jt}Reflect.construct(h,[],x)}else{try{x.call()}catch(jt){W=jt}h.call(x.prototype)}else{try{throw Error()}catch(jt){W=jt}h()}}catch(jt){if(jt&&W&&typeof jt.stack=="string"){for(var se=jt.stack.split(`
`),ue=W.stack.split(`
`),Ee=se.length-1,Je=ue.length-1;1<=Ee&&0<=Je&&se[Ee]!==ue[Je];)Je--;for(;1<=Ee&&0<=Je;Ee--,Je--)if(se[Ee]!==ue[Je]){if(Ee!==1||Je!==1)do if(Ee--,Je--,0>Je||se[Ee]!==ue[Je]){var st=`
`+se[Ee].replace(" at new "," at ");return h.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",h.displayName)),st}while(1<=Ee&&0<=Je);break}}}finally{K=!1,Error.prepareStackTrace=P}return(h=h?h.displayName||h.name:"")?U(h):""}function M(h){switch(h.tag){case 5:return U(h.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return h=z(h.type,!1),h;case 11:return h=z(h.type.render,!1),h;case 1:return h=z(h.type,!0),h;default:return""}}function H(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case _:return"Fragment";case E:return"Portal";case N:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case Q:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case k:return(h.displayName||"Context")+".Consumer";case O:return(h._context.displayName||"Context")+".Provider";case I:var x=h.render;return h=h.displayName,h||(h=x.displayName||x.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case $:return x=h.displayName||null,x!==null?x:H(h.type)||"Memo";case L:x=h._payload,h=h._init;try{return H(h(x))}catch{}}return null}function Y(h){var x=h.type;switch(h.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=x.render,h=h.displayName||h.name||"",x.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(x);case 8:return x===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function ae(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function oe(h){var x=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function be(h){var x=oe(h)?"checked":"value",P=Object.getOwnPropertyDescriptor(h.constructor.prototype,x),W=""+h[x];if(!h.hasOwnProperty(x)&&typeof P<"u"&&typeof P.get=="function"&&typeof P.set=="function"){var se=P.get,ue=P.set;return Object.defineProperty(h,x,{configurable:!0,get:function(){return se.call(this)},set:function(Ee){W=""+Ee,ue.call(this,Ee)}}),Object.defineProperty(h,x,{enumerable:P.enumerable}),{getValue:function(){return W},setValue:function(Ee){W=""+Ee},stopTracking:function(){h._valueTracker=null,delete h[x]}}}}function ge(h){h._valueTracker||(h._valueTracker=be(h))}function he(h){if(!h)return!1;var x=h._valueTracker;if(!x)return!0;var P=x.getValue(),W="";return h&&(W=oe(h)?h.checked?"true":"false":h.value),h=W,h!==P?(x.setValue(h),!0):!1}function ke(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Z(h,x){var P=x.checked;return q({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:P??h._wrapperState.initialChecked})}function te(h,x){var P=x.defaultValue==null?"":x.defaultValue,W=x.checked!=null?x.checked:x.defaultChecked;P=ae(x.value!=null?x.value:P),h._wrapperState={initialChecked:W,initialValue:P,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function fe(h,x){x=x.checked,x!=null&&j(h,"checked",x,!1)}function we(h,x){fe(h,x);var P=ae(x.value),W=x.type;if(P!=null)W==="number"?(P===0&&h.value===""||h.value!=P)&&(h.value=""+P):h.value!==""+P&&(h.value=""+P);else if(W==="submit"||W==="reset"){h.removeAttribute("value");return}x.hasOwnProperty("value")?_e(h,x.type,P):x.hasOwnProperty("defaultValue")&&_e(h,x.type,ae(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(h.defaultChecked=!!x.defaultChecked)}function Fe(h,x,P){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var W=x.type;if(!(W!=="submit"&&W!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+h._wrapperState.initialValue,P||x===h.value||(h.value=x),h.defaultValue=x}P=h.name,P!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,P!==""&&(h.name=P)}function _e(h,x,P){(x!=="number"||ke(h.ownerDocument)!==h)&&(P==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+P&&(h.defaultValue=""+P))}var Ce=Array.isArray;function ie(h,x,P,W){if(h=h.options,x){x={};for(var se=0;se<P.length;se++)x["$"+P[se]]=!0;for(P=0;P<h.length;P++)se=x.hasOwnProperty("$"+h[P].value),h[P].selected!==se&&(h[P].selected=se),se&&W&&(h[P].defaultSelected=!0)}else{for(P=""+ae(P),x=null,se=0;se<h.length;se++){if(h[se].value===P){h[se].selected=!0,W&&(h[se].defaultSelected=!0);return}x!==null||h[se].disabled||(x=h[se])}x!==null&&(x.selected=!0)}}function me(h,x){if(x.dangerouslySetInnerHTML!=null)throw Error(s(91));return q({},x,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Be(h,x){var P=x.value;if(P==null){if(P=x.children,x=x.defaultValue,P!=null){if(x!=null)throw Error(s(92));if(Ce(P)){if(1<P.length)throw Error(s(93));P=P[0]}x=P}x==null&&(x=""),P=x}h._wrapperState={initialValue:ae(P)}}function Le(h,x){var P=ae(x.value),W=ae(x.defaultValue);P!=null&&(P=""+P,P!==h.value&&(h.value=P),x.defaultValue==null&&h.defaultValue!==P&&(h.defaultValue=P)),W!=null&&(h.defaultValue=""+W)}function ve(h){var x=h.textContent;x===h._wrapperState.initialValue&&x!==""&&x!==null&&(h.value=x)}function $e(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(h,x){return h==null||h==="http://www.w3.org/1999/xhtml"?$e(x):h==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var Pe,Te=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,P,W,se){MSApp.execUnsafeLocalFunction(function(){return h(x,P,W,se)})}:h})(function(h,x){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=x;else{for(Pe=Pe||document.createElement("div"),Pe.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=Pe.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;x.firstChild;)h.appendChild(x.firstChild)}});function Ye(h,x){if(x){var P=h.firstChild;if(P&&P===h.lastChild&&P.nodeType===3){P.nodeValue=x;return}}h.textContent=x}var He={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},it=["Webkit","ms","Moz","O"];Object.keys(He).forEach(function(h){it.forEach(function(x){x=x+h.charAt(0).toUpperCase()+h.substring(1),He[x]=He[h]})});function It(h,x,P){return x==null||typeof x=="boolean"||x===""?"":P||typeof x!="number"||x===0||He.hasOwnProperty(h)&&He[h]?(""+x).trim():x+"px"}function dt(h,x){h=h.style;for(var P in x)if(x.hasOwnProperty(P)){var W=P.indexOf("--")===0,se=It(P,x[P],W);P==="float"&&(P="cssFloat"),W?h.setProperty(P,se):h[P]=se}}var Pt=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(h,x){if(x){if(Pt[h]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(s(137,h));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(s(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(s(61))}if(x.style!=null&&typeof x.style!="object")throw Error(s(62))}}function tr(h,x){if(h.indexOf("-")===-1)return typeof x.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jt=null;function Et(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var ur=null,vr=null,Wt=null;function Gt(h){if(h=iu(h)){if(typeof ur!="function")throw Error(s(280));var x=h.stateNode;x&&(x=bd(x),ur(h.stateNode,h.type,x))}}function at(h){vr?Wt?Wt.push(h):Wt=[h]:vr=h}function rn(){if(vr){var h=vr,x=Wt;if(Wt=vr=null,Gt(h),x)for(h=0;h<x.length;h++)Gt(x[h])}}function dr(h,x){return h(x)}function et(){}var an=!1;function gr(h,x,P){if(an)return h(x,P);an=!0;try{return dr(h,x,P)}finally{an=!1,(vr!==null||Wt!==null)&&(et(),rn())}}function In(h,x){var P=h.stateNode;if(P===null)return null;var W=bd(P);if(W===null)return null;P=W[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(W=!W.disabled)||(h=h.type,W=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!W;break e;default:h=!1}if(h)return null;if(P&&typeof P!="function")throw Error(s(231,x,typeof P));return P}var ln=!1;if(l)try{var gn={};Object.defineProperty(gn,"passive",{get:function(){ln=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{ln=!1}function Yn(h,x,P,W,se,ue,Ee,Je,st){var jt=Array.prototype.slice.call(arguments,3);try{x.apply(P,jt)}catch(Xt){this.onError(Xt)}}var Gr=!1,Sn=null,ce=!1,Ne=null,Re={onError:function(h){Gr=!0,Sn=h}};function Ve(h,x,P,W,se,ue,Ee,Je,st){Gr=!1,Sn=null,Yn.apply(Re,arguments)}function ye(h,x,P,W,se,ue,Ee,Je,st){if(Ve.apply(this,arguments),Gr){if(Gr){var jt=Sn;Gr=!1,Sn=null}else throw Error(s(198));ce||(ce=!0,Ne=jt)}}function De(h){var x=h,P=h;if(h.alternate)for(;x.return;)x=x.return;else{h=x;do x=h,(x.flags&4098)!==0&&(P=x.return),h=x.return;while(h)}return x.tag===3?P:null}function qe(h){if(h.tag===13){var x=h.memoizedState;if(x===null&&(h=h.alternate,h!==null&&(x=h.memoizedState)),x!==null)return x.dehydrated}return null}function Ze(h){if(De(h)!==h)throw Error(s(188))}function ht(h){var x=h.alternate;if(!x){if(x=De(h),x===null)throw Error(s(188));return x!==h?null:h}for(var P=h,W=x;;){var se=P.return;if(se===null)break;var ue=se.alternate;if(ue===null){if(W=se.return,W!==null){P=W;continue}break}if(se.child===ue.child){for(ue=se.child;ue;){if(ue===P)return Ze(se),h;if(ue===W)return Ze(se),x;ue=ue.sibling}throw Error(s(188))}if(P.return!==W.return)P=se,W=ue;else{for(var Ee=!1,Je=se.child;Je;){if(Je===P){Ee=!0,P=se,W=ue;break}if(Je===W){Ee=!0,W=se,P=ue;break}Je=Je.sibling}if(!Ee){for(Je=ue.child;Je;){if(Je===P){Ee=!0,P=ue,W=se;break}if(Je===W){Ee=!0,W=ue,P=se;break}Je=Je.sibling}if(!Ee)throw Error(s(189))}}if(P.alternate!==W)throw Error(s(190))}if(P.tag!==3)throw Error(s(188));return P.stateNode.current===P?h:x}function ct(h){return h=ht(h),h!==null?gt(h):null}function gt(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var x=gt(h);if(x!==null)return x;h=h.sibling}return null}var ut=t.unstable_scheduleCallback,Ut=t.unstable_cancelCallback,$t=t.unstable_shouldYield,Yt=t.unstable_requestPaint,Vt=t.unstable_now,or=t.unstable_getCurrentPriorityLevel,cr=t.unstable_ImmediatePriority,Fr=t.unstable_UserBlockingPriority,yn=t.unstable_NormalPriority,Lr=t.unstable_LowPriority,xn=t.unstable_IdlePriority,Zr=null,kr=null;function Hr(h){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(Zr,h,void 0,(h.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:bn,Hn=Math.log,pr=Math.LN2;function bn(h){return h>>>=0,h===0?32:31-(Hn(h)/pr|0)|0}var Qt=64,Er=4194304;function Wr(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Dr(h,x){var P=h.pendingLanes;if(P===0)return 0;var W=0,se=h.suspendedLanes,ue=h.pingedLanes,Ee=P&268435455;if(Ee!==0){var Je=Ee&~se;Je!==0?W=Wr(Je):(ue&=Ee,ue!==0&&(W=Wr(ue)))}else Ee=P&~se,Ee!==0?W=Wr(Ee):ue!==0&&(W=Wr(ue));if(W===0)return 0;if(x!==0&&x!==W&&(x&se)===0&&(se=W&-W,ue=x&-x,se>=ue||se===16&&(ue&4194240)!==0))return x;if((W&4)!==0&&(W|=P&16),x=h.entangledLanes,x!==0)for(h=h.entanglements,x&=W;0<x;)P=31-hn(x),se=1<<P,W|=h[P],x&=~se;return W}function nn(h,x){switch(h){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fn(h,x){for(var P=h.suspendedLanes,W=h.pingedLanes,se=h.expirationTimes,ue=h.pendingLanes;0<ue;){var Ee=31-hn(ue),Je=1<<Ee,st=se[Ee];st===-1?((Je&P)===0||(Je&W)!==0)&&(se[Ee]=nn(Je,x)):st<=x&&(h.expiredLanes|=Je),ue&=~Je}}function Dn(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function xi(){var h=Qt;return Qt<<=1,(Qt&4194240)===0&&(Qt=64),h}function Us(h){for(var x=[],P=0;31>P;P++)x.push(h);return x}function Ls(h,x,P){h.pendingLanes|=x,x!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,x=31-hn(x),h[x]=P}function ds(h,x){var P=h.pendingLanes&~x;h.pendingLanes=x,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=x,h.mutableReadLanes&=x,h.entangledLanes&=x,x=h.entanglements;var W=h.eventTimes;for(h=h.expirationTimes;0<P;){var se=31-hn(P),ue=1<<se;x[se]=0,W[se]=-1,h[se]=-1,P&=~ue}}function Cn(h,x){var P=h.entangledLanes|=x;for(h=h.entanglements;P;){var W=31-hn(P),se=1<<W;se&x|h[W]&x&&(h[W]|=x),P&=~se}}var Ur=0;function Pn(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Wn,Bn,Vn,gs,hr,kn=!1,pn=[],sn=null,Mr=null,Pr=null,Ar=new Map,Ln=new Map,ys=[],Ks="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gs(h,x){switch(h){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Ar.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ln.delete(x.pointerId)}}function zn(h,x,P,W,se,ue){return h===null||h.nativeEvent!==ue?(h={blockedOn:x,domEventName:P,eventSystemFlags:W,nativeEvent:ue,targetContainers:[se]},x!==null&&(x=iu(x),x!==null&&Bn(x)),h):(h.eventSystemFlags|=W,x=h.targetContainers,se!==null&&x.indexOf(se)===-1&&x.push(se),h)}function Mn(h,x,P,W,se){switch(x){case"focusin":return sn=zn(sn,h,x,P,W,se),!0;case"dragenter":return Mr=zn(Mr,h,x,P,W,se),!0;case"mouseover":return Pr=zn(Pr,h,x,P,W,se),!0;case"pointerover":var ue=se.pointerId;return Ar.set(ue,zn(Ar.get(ue)||null,h,x,P,W,se)),!0;case"gotpointercapture":return ue=se.pointerId,Ln.set(ue,zn(Ln.get(ue)||null,h,x,P,W,se)),!0}return!1}function si(h){var x=Pl(h.target);if(x!==null){var P=De(x);if(P!==null){if(x=P.tag,x===13){if(x=qe(P),x!==null){h.blockedOn=x,hr(h.priority,function(){Vn(P)});return}}else if(x===3&&P.stateNode.current.memoizedState.isDehydrated){h.blockedOn=P.tag===3?P.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Gi(h){if(h.blockedOn!==null)return!1;for(var x=h.targetContainers;0<x.length;){var P=Ge(h.domEventName,h.eventSystemFlags,x[0],h.nativeEvent);if(P===null){P=h.nativeEvent;var W=new P.constructor(P.type,P);Jt=W,P.target.dispatchEvent(W),Jt=null}else return x=iu(P),x!==null&&Bn(x),h.blockedOn=P,!1;x.shift()}return!0}function Ma(h,x,P){Gi(h)&&P.delete(x)}function Ra(){kn=!1,sn!==null&&Gi(sn)&&(sn=null),Mr!==null&&Gi(Mr)&&(Mr=null),Pr!==null&&Gi(Pr)&&(Pr=null),Ar.forEach(Ma),Ln.forEach(Ma)}function ki(h,x){h.blockedOn===x&&(h.blockedOn=null,kn||(kn=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ra)))}function ii(h){function x(se){return ki(se,h)}if(0<pn.length){ki(pn[0],h);for(var P=1;P<pn.length;P++){var W=pn[P];W.blockedOn===h&&(W.blockedOn=null)}}for(sn!==null&&ki(sn,h),Mr!==null&&ki(Mr,h),Pr!==null&&ki(Pr,h),Ar.forEach(x),Ln.forEach(x),P=0;P<ys.length;P++)W=ys[P],W.blockedOn===h&&(W.blockedOn=null);for(;0<ys.length&&(P=ys[0],P.blockedOn===null);)si(P),P.blockedOn===null&&ys.shift()}var _i=C.ReactCurrentBatchConfig,re=!0;function D(h,x,P,W){var se=Ur,ue=_i.transition;_i.transition=null;try{Ur=1,de(h,x,P,W)}finally{Ur=se,_i.transition=ue}}function Ae(h,x,P,W){var se=Ur,ue=_i.transition;_i.transition=null;try{Ur=4,de(h,x,P,W)}finally{Ur=se,_i.transition=ue}}function de(h,x,P,W){if(re){var se=Ge(h,x,P,W);if(se===null)gd(h,x,W,We,P),Gs(h,W);else if(Mn(se,h,x,P,W))W.stopPropagation();else if(Gs(h,W),x&4&&-1<Ks.indexOf(h)){for(;se!==null;){var ue=iu(se);if(ue!==null&&Wn(ue),ue=Ge(h,x,P,W),ue===null&&gd(h,x,W,We,P),ue===se)break;se=ue}se!==null&&W.stopPropagation()}else gd(h,x,W,null,P)}}var We=null;function Ge(h,x,P,W){if(We=null,h=Et(W),h=Pl(h),h!==null)if(x=De(h),x===null)h=null;else if(P=x.tag,P===13){if(h=qe(x),h!==null)return h;h=null}else if(P===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;h=null}else x!==h&&(h=null);return We=h,null}function _t(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(or()){case cr:return 1;case Fr:return 4;case yn:case Lr:return 16;case xn:return 536870912;default:return 16}default:return 16}}var Nt=null,tt=null,rr=null;function zt(){if(rr)return rr;var h,x=tt,P=x.length,W,se="value"in Nt?Nt.value:Nt.textContent,ue=se.length;for(h=0;h<P&&x[h]===se[h];h++);var Ee=P-h;for(W=1;W<=Ee&&x[P-W]===se[ue-W];W++);return rr=se.slice(h,1<W?1-W:void 0)}function xt(h){var x=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&x===13&&(h=13)):h=x,h===10&&(h=13),32<=h||h===13?h:0}function Lt(){return!0}function ne(){return!1}function xe(h){function x(P,W,se,ue,Ee){this._reactName=P,this._targetInst=se,this.type=W,this.nativeEvent=ue,this.target=Ee,this.currentTarget=null;for(var Je in h)h.hasOwnProperty(Je)&&(P=h[Je],this[Je]=P?P(ue):ue[Je]);return this.isDefaultPrevented=(ue.defaultPrevented!=null?ue.defaultPrevented:ue.returnValue===!1)?Lt:ne,this.isPropagationStopped=ne,this}return q(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var P=this.nativeEvent;P&&(P.preventDefault?P.preventDefault():typeof P.returnValue!="unknown"&&(P.returnValue=!1),this.isDefaultPrevented=Lt)},stopPropagation:function(){var P=this.nativeEvent;P&&(P.stopPropagation?P.stopPropagation():typeof P.cancelBubble!="unknown"&&(P.cancelBubble=!0),this.isPropagationStopped=Lt)},persist:function(){},isPersistent:Lt}),x}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xe=xe(Qe),rt=q({},Qe,{view:0,detail:0}),wt=xe(rt),St,bt,Mt,Cr=q({},rt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cl,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Mt&&(Mt&&h.type==="mousemove"?(St=h.screenX-Mt.screenX,bt=h.screenY-Mt.screenY):bt=St=0,Mt=h),St)},movementY:function(h){return"movementY"in h?h.movementY:bt}}),lr=xe(Cr),Rr=q({},Cr,{dataTransfer:0}),Ht=xe(Rr),ir=q({},rt,{relatedTarget:0}),nr=xe(ir),vn=q({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),cn=xe(vn),wn=q({},Qe,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Qa=xe(wn),eo=q({},Qe,{data:0}),go=xe(eo),yo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ho={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ld(h){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(h):(h=Fi[h])?!!x[h]:!1}function Cl(){return ld}var Bl=q({},rt,{key:function(h){if(h.key){var x=yo[h.key]||h.key;if(x!=="Unidentified")return x}return h.type==="keypress"?(h=xt(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Ho[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cl,charCode:function(h){return h.type==="keypress"?xt(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?xt(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),bi=xe(Bl),Vo=q({},Cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xo=xe(Vo),Wc=q({},rt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cl}),cd=xe(Wc),Wi=q({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),hA=xe(Wi),qc=q({},Cr,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),fA=xe(qc),ai=[9,13,27,32],oa=l&&"CompositionEvent"in window,zo=null;l&&"documentMode"in document&&(zo=document.documentMode);var ud=l&&"TextEvent"in window&&!zo,Ko=l&&(!oa||zo&&8<zo&&11>=zo),dc=" ",qi=!1;function Yi(h,x){switch(h){case"keyup":return ai.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kl(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Xi=!1;function _l(h,x){switch(h){case"compositionend":return kl(x);case"keypress":return x.which!==32?null:(qi=!0,dc);case"textInput":return h=x.data,h===dc&&qi?null:h;default:return null}}function dd(h,x){if(Xi)return h==="compositionend"||!oa&&Yi(h,x)?(h=zt(),rr=tt=Nt=null,Xi=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Ko&&x.locale!=="ko"?null:x.data;default:return null}}var El={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bs(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x==="input"?!!El[h.type]:x==="textarea"}function pA(h,x,P,W){at(W),x=vA(x,"onChange"),0<x.length&&(P=new Xe("onChange","change",null,P,W),h.push({event:P,listeners:x}))}var la=null,ca=null;function Yc(h){pd(h,0)}function Ol(h){var x=xc(h);if(he(x))return h}function Xc(h,x){if(h==="change")return x}var Ac=!1;if(l){var Go;if(l){var Wo="oninput"in document;if(!Wo){var bo=document.createElement("div");bo.setAttribute("oninput","return;"),Wo=typeof bo.oninput=="function"}Go=Wo}else Go=!1;Ac=Go&&(!document.documentMode||9<document.documentMode)}function Jc(){la&&(la.detachEvent("onpropertychange",ua),ca=la=null)}function ua(h){if(h.propertyName==="value"&&Ol(ca)){var x=[];pA(x,ca,h,Et(h)),gr(Yc,x)}}function vo(h,x,P){h==="focusin"?(Jc(),la=x,ca=P,la.attachEvent("onpropertychange",ua)):h==="focusout"&&Jc()}function as(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Ol(ca)}function os(h,x){if(h==="click")return Ol(x)}function Ds(h,x){if(h==="input"||h==="change")return Ol(x)}function Ms(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var oi=typeof Object.is=="function"?Object.is:Ms;function wo(h,x){if(oi(h,x))return!0;if(typeof h!="object"||h===null||typeof x!="object"||x===null)return!1;var P=Object.keys(h),W=Object.keys(x);if(P.length!==W.length)return!1;for(W=0;W<P.length;W++){var se=P[W];if(!u.call(x,se)||!oi(h[se],x[se]))return!1}return!0}function to(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Zc(h,x){var P=to(h);h=0;for(var W;P;){if(P.nodeType===3){if(W=h+P.textContent.length,h<=x&&W>=x)return{node:P,offset:x-h};h=W}e:{for(;P;){if(P.nextSibling){P=P.nextSibling;break e}P=P.parentNode}P=void 0}P=to(P)}}function Hh(h,x){return h&&x?h===x?!0:h&&h.nodeType===3?!1:x&&x.nodeType===3?Hh(h,x.parentNode):"contains"in h?h.contains(x):h.compareDocumentPosition?!!(h.compareDocumentPosition(x)&16):!1:!1}function Vh(){for(var h=window,x=ke();x instanceof h.HTMLIFrameElement;){try{var P=typeof x.contentWindow.location.href=="string"}catch{P=!1}if(P)h=x.contentWindow;else break;x=ke(h.document)}return x}function mA(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x&&(x==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||x==="textarea"||h.contentEditable==="true")}function Zp(h){var x=Vh(),P=h.focusedElem,W=h.selectionRange;if(x!==P&&P&&P.ownerDocument&&Hh(P.ownerDocument.documentElement,P)){if(W!==null&&mA(P)){if(x=W.start,h=W.end,h===void 0&&(h=x),"selectionStart"in P)P.selectionStart=x,P.selectionEnd=Math.min(h,P.value.length);else if(h=(x=P.ownerDocument||document)&&x.defaultView||window,h.getSelection){h=h.getSelection();var se=P.textContent.length,ue=Math.min(W.start,se);W=W.end===void 0?ue:Math.min(W.end,se),!h.extend&&ue>W&&(se=W,W=ue,ue=se),se=Zc(P,ue);var Ee=Zc(P,W);se&&Ee&&(h.rangeCount!==1||h.anchorNode!==se.node||h.anchorOffset!==se.offset||h.focusNode!==Ee.node||h.focusOffset!==Ee.offset)&&(x=x.createRange(),x.setStart(se.node,se.offset),h.removeAllRanges(),ue>W?(h.addRange(x),h.extend(Ee.node,Ee.offset)):(x.setEnd(Ee.node,Ee.offset),h.addRange(x)))}}for(x=[],h=P;h=h.parentNode;)h.nodeType===1&&x.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<x.length;P++)h=x[P],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var em=l&&"documentMode"in document&&11>=document.documentMode,hc=null,gA=null,eu=null,yA=!1;function zh(h,x,P){var W=P.window===P?P.document:P.nodeType===9?P:P.ownerDocument;yA||hc==null||hc!==ke(W)||(W=hc,"selectionStart"in W&&mA(W)?W={start:W.selectionStart,end:W.selectionEnd}:(W=(W.ownerDocument&&W.ownerDocument.defaultView||window).getSelection(),W={anchorNode:W.anchorNode,anchorOffset:W.anchorOffset,focusNode:W.focusNode,focusOffset:W.focusOffset}),eu&&wo(eu,W)||(eu=W,W=vA(gA,"onSelect"),0<W.length&&(x=new Xe("onSelect","select",null,x,P),h.push({event:x,listeners:W}),x.target=hc)))}function Ad(h,x){var P={};return P[h.toLowerCase()]=x.toLowerCase(),P["Webkit"+h]="webkit"+x,P["Moz"+h]="moz"+x,P}var fc={animationend:Ad("Animation","AnimationEnd"),animationiteration:Ad("Animation","AnimationIteration"),animationstart:Ad("Animation","AnimationStart"),transitionend:Ad("Transition","TransitionEnd")},pc={},Kh={};l&&(Kh=document.createElement("div").style,"AnimationEvent"in window||(delete fc.animationend.animation,delete fc.animationiteration.animation,delete fc.animationstart.animation),"TransitionEvent"in window||delete fc.transitionend.transition);function hd(h){if(pc[h])return pc[h];if(!fc[h])return h;var x=fc[h],P;for(P in x)if(x.hasOwnProperty(P)&&P in Kh)return pc[h]=x[P];return h}var Gh=hd("animationend"),Wh=hd("animationiteration"),qh=hd("animationstart"),Yh=hd("transitionend"),Xh=new Map,Jh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(h,x){Xh.set(h,x),o(x,[h])}for(var tu=0;tu<Jh.length;tu++){var Ji=Jh[tu],$a=Ji.toLowerCase(),xA=Ji[0].toUpperCase()+Ji.slice(1);jo($a,"on"+xA)}jo(Gh,"onAnimationEnd"),jo(Wh,"onAnimationIteration"),jo(qh,"onAnimationStart"),jo("dblclick","onDoubleClick"),jo("focusin","onFocus"),jo("focusout","onBlur"),jo(Yh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function fd(h,x,P){var W=h.type||"unknown-event";h.currentTarget=P,ye(W,x,void 0,h),h.currentTarget=null}function pd(h,x){x=(x&4)!==0;for(var P=0;P<h.length;P++){var W=h[P],se=W.event;W=W.listeners;e:{var ue=void 0;if(x)for(var Ee=W.length-1;0<=Ee;Ee--){var Je=W[Ee],st=Je.instance,jt=Je.currentTarget;if(Je=Je.listener,st!==ue&&se.isPropagationStopped())break e;fd(se,Je,jt),ue=st}else for(Ee=0;Ee<W.length;Ee++){if(Je=W[Ee],st=Je.instance,jt=Je.currentTarget,Je=Je.listener,st!==ue&&se.isPropagationStopped())break e;fd(se,Je,jt),ue=st}}}if(ce)throw h=Ne,ce=!1,Ne=null,h}function es(h,x){var P=x[Aa];P===void 0&&(P=x[Aa]=new Set);var W=h+"__bubble";P.has(W)||(md(x,h,2,!1),P.add(W))}function bA(h,x,P){var W=0;x&&(W|=4),md(P,h,W,x)}var ru="_reactListening"+Math.random().toString(36).slice(2);function mc(h){if(!h[ru]){h[ru]=!0,i.forEach(function(P){P!=="selectionchange"&&(tm.has(P)||bA(P,!1,h),bA(P,!0,h))});var x=h.nodeType===9?h:h.ownerDocument;x===null||x[ru]||(x[ru]=!0,bA("selectionchange",!1,x))}}function md(h,x,P,W){switch(_t(x)){case 1:var se=D;break;case 4:se=Ae;break;default:se=de}P=se.bind(null,x,P,h),se=void 0,!ln||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(se=!0),W?se!==void 0?h.addEventListener(x,P,{capture:!0,passive:se}):h.addEventListener(x,P,!0):se!==void 0?h.addEventListener(x,P,{passive:se}):h.addEventListener(x,P,!1)}function gd(h,x,P,W,se){var ue=W;if((x&1)===0&&(x&2)===0&&W!==null)e:for(;;){if(W===null)return;var Ee=W.tag;if(Ee===3||Ee===4){var Je=W.stateNode.containerInfo;if(Je===se||Je.nodeType===8&&Je.parentNode===se)break;if(Ee===4)for(Ee=W.return;Ee!==null;){var st=Ee.tag;if((st===3||st===4)&&(st=Ee.stateNode.containerInfo,st===se||st.nodeType===8&&st.parentNode===se))return;Ee=Ee.return}for(;Je!==null;){if(Ee=Pl(Je),Ee===null)return;if(st=Ee.tag,st===5||st===6){W=ue=Ee;continue e}Je=Je.parentNode}}W=W.return}gr(function(){var jt=ue,Xt=Et(P),er=[];e:{var qt=Xh.get(h);if(qt!==void 0){var mr=Xe,Nr=h;switch(h){case"keypress":if(xt(P)===0)break e;case"keydown":case"keyup":mr=bi;break;case"focusin":Nr="focus",mr=nr;break;case"focusout":Nr="blur",mr=nr;break;case"beforeblur":case"afterblur":mr=nr;break;case"click":if(P.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mr=lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mr=Ht;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mr=cd;break;case Gh:case Wh:case qh:mr=cn;break;case Yh:mr=hA;break;case"scroll":mr=wt;break;case"wheel":mr=fA;break;case"copy":case"cut":case"paste":mr=Qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mr=xo}var _r=(x&4)!==0,ui=!_r&&h==="scroll",pt=_r?qt!==null?qt+"Capture":null:qt;_r=[];for(var lt=jt,yt;lt!==null;){yt=lt;var sr=yt.stateNode;if(yt.tag===5&&sr!==null&&(yt=sr,pt!==null&&(sr=In(lt,pt),sr!=null&&_r.push(yd(lt,sr,yt)))),ui)break;lt=lt.return}0<_r.length&&(qt=new mr(qt,Nr,null,P,Xt),er.push({event:qt,listeners:_r}))}}if((x&7)===0){e:{if(qt=h==="mouseover"||h==="pointerover",mr=h==="mouseout"||h==="pointerout",qt&&P!==Jt&&(Nr=P.relatedTarget||P.fromElement)&&(Pl(Nr)||Nr[Ui]))break e;if((mr||qt)&&(qt=Xt.window===Xt?Xt:(qt=Xt.ownerDocument)?qt.defaultView||qt.parentWindow:window,mr?(Nr=P.relatedTarget||P.toElement,mr=jt,Nr=Nr?Pl(Nr):null,Nr!==null&&(ui=De(Nr),Nr!==ui||Nr.tag!==5&&Nr.tag!==6)&&(Nr=null)):(mr=null,Nr=jt),mr!==Nr)){if(_r=lr,sr="onMouseLeave",pt="onMouseEnter",lt="mouse",(h==="pointerout"||h==="pointerover")&&(_r=xo,sr="onPointerLeave",pt="onPointerEnter",lt="pointer"),ui=mr==null?qt:xc(mr),yt=Nr==null?qt:xc(Nr),qt=new _r(sr,lt+"leave",mr,P,Xt),qt.target=ui,qt.relatedTarget=yt,sr=null,Pl(Xt)===jt&&(_r=new _r(pt,lt+"enter",Nr,P,Xt),_r.target=yt,_r.relatedTarget=ui,sr=_r),ui=sr,mr&&Nr)t:{for(_r=mr,pt=Nr,lt=0,yt=_r;yt;yt=gc(yt))lt++;for(yt=0,sr=pt;sr;sr=gc(sr))yt++;for(;0<lt-yt;)_r=gc(_r),lt--;for(;0<yt-lt;)pt=gc(pt),yt--;for(;lt--;){if(_r===pt||pt!==null&&_r===pt.alternate)break t;_r=gc(_r),pt=gc(pt)}_r=null}else _r=null;mr!==null&&rm(er,qt,mr,_r,!1),Nr!==null&&ui!==null&&rm(er,ui,Nr,_r,!0)}}e:{if(qt=jt?xc(jt):window,mr=qt.nodeName&&qt.nodeName.toLowerCase(),mr==="select"||mr==="input"&&qt.type==="file")var Ir=Xc;else if(Bs(qt))if(Ac)Ir=Ds;else{Ir=as;var Qr=vo}else(mr=qt.nodeName)&&mr.toLowerCase()==="input"&&(qt.type==="checkbox"||qt.type==="radio")&&(Ir=os);if(Ir&&(Ir=Ir(h,jt))){pA(er,Ir,P,Xt);break e}Qr&&Qr(h,qt,jt),h==="focusout"&&(Qr=qt._wrapperState)&&Qr.controlled&&qt.type==="number"&&_e(qt,"number",qt.value)}switch(Qr=jt?xc(jt):window,h){case"focusin":(Bs(Qr)||Qr.contentEditable==="true")&&(hc=Qr,gA=jt,eu=null);break;case"focusout":eu=gA=hc=null;break;case"mousedown":yA=!0;break;case"contextmenu":case"mouseup":case"dragend":yA=!1,zh(er,P,Xt);break;case"selectionchange":if(em)break;case"keydown":case"keyup":zh(er,P,Xt)}var $r;if(oa)e:{switch(h){case"compositionstart":var en="onCompositionStart";break e;case"compositionend":en="onCompositionEnd";break e;case"compositionupdate":en="onCompositionUpdate";break e}en=void 0}else Xi?Yi(h,P)&&(en="onCompositionEnd"):h==="keydown"&&P.keyCode===229&&(en="onCompositionStart");en&&(Ko&&P.locale!=="ko"&&(Xi||en!=="onCompositionStart"?en==="onCompositionEnd"&&Xi&&($r=zt()):(Nt=Xt,tt="value"in Nt?Nt.value:Nt.textContent,Xi=!0)),Qr=vA(jt,en),0<Qr.length&&(en=new go(en,h,null,P,Xt),er.push({event:en,listeners:Qr}),$r?en.data=$r:($r=kl(P),$r!==null&&(en.data=$r)))),($r=ud?_l(h,P):dd(h,P))&&(jt=vA(jt,"onBeforeInput"),0<jt.length&&(Xt=new go("onBeforeInput","beforeinput",null,P,Xt),er.push({event:Xt,listeners:jt}),Xt.data=$r))}pd(er,x)})}function yd(h,x,P){return{instance:h,listener:x,currentTarget:P}}function vA(h,x){for(var P=x+"Capture",W=[];h!==null;){var se=h,ue=se.stateNode;se.tag===5&&ue!==null&&(se=ue,ue=In(h,P),ue!=null&&W.unshift(yd(h,ue,se)),ue=In(h,x),ue!=null&&W.push(yd(h,ue,se))),h=h.return}return W}function gc(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function rm(h,x,P,W,se){for(var ue=x._reactName,Ee=[];P!==null&&P!==W;){var Je=P,st=Je.alternate,jt=Je.stateNode;if(st!==null&&st===W)break;Je.tag===5&&jt!==null&&(Je=jt,se?(st=In(P,ue),st!=null&&Ee.unshift(yd(P,st,Je))):se||(st=In(P,ue),st!=null&&Ee.push(yd(P,st,Je)))),P=P.return}Ee.length!==0&&h.push({event:x,listeners:Ee})}var Ry=/\r\n?/g,Qy=/\u0000|\uFFFD/g;function nm(h){return(typeof h=="string"?h:""+h).replace(Ry,`
`).replace(Qy,"")}function wA(h,x,P){if(x=nm(x),nm(h)!==x&&P)throw Error(s(425))}function nu(){}var xd=null,yc=null;function Zh(h,x){return h==="textarea"||h==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var ef=typeof setTimeout=="function"?setTimeout:void 0,sm=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,$y=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(h){return im.resolve(null).then(h).catch(Hy)}:ef;function Hy(h){setTimeout(function(){throw h})}function tf(h,x){var P=x,W=0;do{var se=P.nextSibling;if(h.removeChild(P),se&&se.nodeType===8)if(P=se.data,P==="/$"){if(W===0){h.removeChild(se),ii(x);return}W--}else P!=="$"&&P!=="$?"&&P!=="$!"||W++;P=se}while(P);ii(x)}function Zi(h){for(;h!=null;h=h.nextSibling){var x=h.nodeType;if(x===1||x===3)break;if(x===8){if(x=h.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return h}function Ha(h){h=h.previousSibling;for(var x=0;h;){if(h.nodeType===8){var P=h.data;if(P==="$"||P==="$!"||P==="$?"){if(x===0)return h;x--}else P==="/$"&&x++}h=h.previousSibling}return null}var da=Math.random().toString(36).slice(2),No="__reactFiber$"+da,su="__reactProps$"+da,Ui="__reactContainer$"+da,Aa="__reactEvents$"+da,Vy="__reactListeners$"+da,zy="__reactHandles$"+da;function Pl(h){var x=h[No];if(x)return x;for(var P=h.parentNode;P;){if(x=P[Ui]||P[No]){if(P=x.alternate,x.child!==null||P!==null&&P.child!==null)for(h=Ha(h);h!==null;){if(P=h[No])return P;h=Ha(h)}return x}h=P,P=h.parentNode}return null}function iu(h){return h=h[No]||h[Ui],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function xc(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(s(33))}function bd(h){return h[su]||null}var rf=[],qo=-1;function ro(h){return{current:h}}function qn(h){0>qo||(h.current=rf[qo],rf[qo]=null,qo--)}function Xn(h,x){qo++,rf[qo]=h.current,h.current=x}var Tl={},Ei=ro(Tl),ha=ro(!1),bc=Tl;function au(h,x){var P=h.type.contextTypes;if(!P)return Tl;var W=h.stateNode;if(W&&W.__reactInternalMemoizedUnmaskedChildContext===x)return W.__reactInternalMemoizedMaskedChildContext;var se={},ue;for(ue in P)se[ue]=x[ue];return W&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=x,h.__reactInternalMemoizedMaskedChildContext=se),se}function fa(h){return h=h.childContextTypes,h!=null}function jA(){qn(ha),qn(Ei)}function am(h,x,P){if(Ei.current!==Tl)throw Error(s(168));Xn(Ei,x),Xn(ha,P)}function nf(h,x,P){var W=h.stateNode;if(x=x.childContextTypes,typeof W.getChildContext!="function")return P;W=W.getChildContext();for(var se in W)if(!(se in x))throw Error(s(108,Y(h)||"Unknown",se));return q({},P,W)}function vc(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Tl,bc=Ei.current,Xn(Ei,h),Xn(ha,ha.current),!0}function om(h,x,P){var W=h.stateNode;if(!W)throw Error(s(169));P?(h=nf(h,x,bc),W.__reactInternalMemoizedMergedChildContext=h,qn(ha),qn(Ei),Xn(Ei,h)):qn(ha),Xn(ha,P)}var Yo=null,vd=!1,V=!1;function J(h){Yo===null?Yo=[h]:Yo.push(h)}function le(h){vd=!0,J(h)}function pe(){if(!V&&Yo!==null){V=!0;var h=0,x=Ur;try{var P=Yo;for(Ur=1;h<P.length;h++){var W=P[h];do W=W(!0);while(W!==null)}Yo=null,vd=!1}catch(se){throw Yo!==null&&(Yo=Yo.slice(h+1)),ut(cr,pe),se}finally{Ur=x,V=!1}}return null}var Se=[],Oe=0,Ie=null,Ue=0,Me=[],ze=0,nt=null,ft=1,Ke="";function ot(h,x){Se[Oe++]=Ue,Se[Oe++]=Ie,Ie=h,Ue=x}function At(h,x,P){Me[ze++]=ft,Me[ze++]=Ke,Me[ze++]=nt,nt=h;var W=ft;h=Ke;var se=32-hn(W)-1;W&=~(1<<se),P+=1;var ue=32-hn(x)+se;if(30<ue){var Ee=se-se%5;ue=(W&(1<<Ee)-1).toString(32),W>>=Ee,se-=Ee,ft=1<<32-hn(x)+se|P<<se|W,Ke=ue+h}else ft=1<<ue|P<<se|W,Ke=h}function Ot(h){h.return!==null&&(ot(h,1),At(h,1,0))}function mt(h){for(;h===Ie;)Ie=Se[--Oe],Se[Oe]=null,Ue=Se[--Oe],Se[Oe]=null;for(;h===nt;)nt=Me[--ze],Me[ze]=null,Ke=Me[--ze],Me[ze]=null,ft=Me[--ze],Me[ze]=null}var Ct=null,kt=null,Tt=!1,Rt=null;function Or(h,x){var P=_o(5,null,null,0);P.elementType="DELETED",P.stateNode=x,P.return=h,x=h.deletions,x===null?(h.deletions=[P],h.flags|=16):x.push(P)}function xr(h,x){switch(h.tag){case 5:var P=h.type;return x=x.nodeType!==1||P.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(h.stateNode=x,Ct=h,kt=Zi(x.firstChild),!0):!1;case 6:return x=h.pendingProps===""||x.nodeType!==3?null:x,x!==null?(h.stateNode=x,Ct=h,kt=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(P=nt!==null?{id:ft,overflow:Ke}:null,h.memoizedState={dehydrated:x,treeContext:P,retryLane:1073741824},P=_o(18,null,null,0),P.stateNode=x,P.return=h,h.child=P,Ct=h,kt=null,!0):!1;default:return!1}}function on(h){return(h.mode&1)!==0&&(h.flags&128)===0}function jr(h){if(Tt){var x=kt;if(x){var P=x;if(!xr(h,x)){if(on(h))throw Error(s(418));x=Zi(P.nextSibling);var W=Ct;x&&xr(h,x)?Or(W,P):(h.flags=h.flags&-4097|2,Tt=!1,Ct=h)}}else{if(on(h))throw Error(s(418));h.flags=h.flags&-4097|2,Tt=!1,Ct=h}}}function _n(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Ct=h}function ks(h){if(h!==Ct)return!1;if(!Tt)return _n(h),Tt=!0,!1;var x;if((x=h.tag!==3)&&!(x=h.tag!==5)&&(x=h.type,x=x!=="head"&&x!=="body"&&!Zh(h.type,h.memoizedProps)),x&&(x=kt)){if(on(h))throw un(),Error(s(418));for(;x;)Or(h,x),x=Zi(x.nextSibling)}if(_n(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));e:{for(h=h.nextSibling,x=0;h;){if(h.nodeType===8){var P=h.data;if(P==="/$"){if(x===0){kt=Zi(h.nextSibling);break e}x--}else P!=="$"&&P!=="$!"&&P!=="$?"||x++}h=h.nextSibling}kt=null}}else kt=Ct?Zi(h.stateNode.nextSibling):null;return!0}function un(){for(var h=kt;h;)h=Zi(h.nextSibling)}function br(){kt=Ct=null,Tt=!1}function ar(h){Rt===null?Rt=[h]:Rt.push(h)}var Rs=C.ReactCurrentBatchConfig;function qr(h,x,P){if(h=P.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(P._owner){if(P=P._owner,P){if(P.tag!==1)throw Error(s(309));var W=P.stateNode}if(!W)throw Error(s(147,h));var se=W,ue=""+h;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===ue?x.ref:(x=function(Ee){var Je=se.refs;Ee===null?delete Je[ue]:Je[ue]=Ee},x._stringRef=ue,x)}if(typeof h!="string")throw Error(s(284));if(!P._owner)throw Error(s(290,h))}return h}function Nn(h,x){throw h=Object.prototype.toString.call(x),Error(s(31,h==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":h))}function ls(h){var x=h._init;return x(h._payload)}function vi(h){function x(pt,lt){if(h){var yt=pt.deletions;yt===null?(pt.deletions=[lt],pt.flags|=16):yt.push(lt)}}function P(pt,lt){if(!h)return null;for(;lt!==null;)x(pt,lt),lt=lt.sibling;return null}function W(pt,lt){for(pt=new Map;lt!==null;)lt.key!==null?pt.set(lt.key,lt):pt.set(lt.index,lt),lt=lt.sibling;return pt}function se(pt,lt){return pt=mu(pt,lt),pt.index=0,pt.sibling=null,pt}function ue(pt,lt,yt){return pt.index=yt,h?(yt=pt.alternate,yt!==null?(yt=yt.index,yt<lt?(pt.flags|=2,lt):yt):(pt.flags|=2,lt)):(pt.flags|=1048576,lt)}function Ee(pt){return h&&pt.alternate===null&&(pt.flags|=2),pt}function Je(pt,lt,yt,sr){return lt===null||lt.tag!==6?(lt=bx(yt,pt.mode,sr),lt.return=pt,lt):(lt=se(lt,yt),lt.return=pt,lt)}function st(pt,lt,yt,sr){var Ir=yt.type;return Ir===_?Xt(pt,lt,yt.props.children,sr,yt.key):lt!==null&&(lt.elementType===Ir||typeof Ir=="object"&&Ir!==null&&Ir.$$typeof===L&&ls(Ir)===lt.type)?(sr=se(lt,yt.props),sr.ref=qr(pt,lt,yt),sr.return=pt,sr):(sr=Bm(yt.type,yt.key,yt.props,null,pt.mode,sr),sr.ref=qr(pt,lt,yt),sr.return=pt,sr)}function jt(pt,lt,yt,sr){return lt===null||lt.tag!==4||lt.stateNode.containerInfo!==yt.containerInfo||lt.stateNode.implementation!==yt.implementation?(lt=vx(yt,pt.mode,sr),lt.return=pt,lt):(lt=se(lt,yt.children||[]),lt.return=pt,lt)}function Xt(pt,lt,yt,sr,Ir){return lt===null||lt.tag!==7?(lt=_d(yt,pt.mode,sr,Ir),lt.return=pt,lt):(lt=se(lt,yt),lt.return=pt,lt)}function er(pt,lt,yt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return lt=bx(""+lt,pt.mode,yt),lt.return=pt,lt;if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case B:return yt=Bm(lt.type,lt.key,lt.props,null,pt.mode,yt),yt.ref=qr(pt,null,lt),yt.return=pt,yt;case E:return lt=vx(lt,pt.mode,yt),lt.return=pt,lt;case L:var sr=lt._init;return er(pt,sr(lt._payload),yt)}if(Ce(lt)||X(lt))return lt=_d(lt,pt.mode,yt,null),lt.return=pt,lt;Nn(pt,lt)}return null}function qt(pt,lt,yt,sr){var Ir=lt!==null?lt.key:null;if(typeof yt=="string"&&yt!==""||typeof yt=="number")return Ir!==null?null:Je(pt,lt,""+yt,sr);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case B:return yt.key===Ir?st(pt,lt,yt,sr):null;case E:return yt.key===Ir?jt(pt,lt,yt,sr):null;case L:return Ir=yt._init,qt(pt,lt,Ir(yt._payload),sr)}if(Ce(yt)||X(yt))return Ir!==null?null:Xt(pt,lt,yt,sr,null);Nn(pt,yt)}return null}function mr(pt,lt,yt,sr,Ir){if(typeof sr=="string"&&sr!==""||typeof sr=="number")return pt=pt.get(yt)||null,Je(lt,pt,""+sr,Ir);if(typeof sr=="object"&&sr!==null){switch(sr.$$typeof){case B:return pt=pt.get(sr.key===null?yt:sr.key)||null,st(lt,pt,sr,Ir);case E:return pt=pt.get(sr.key===null?yt:sr.key)||null,jt(lt,pt,sr,Ir);case L:var Qr=sr._init;return mr(pt,lt,yt,Qr(sr._payload),Ir)}if(Ce(sr)||X(sr))return pt=pt.get(yt)||null,Xt(lt,pt,sr,Ir,null);Nn(lt,sr)}return null}function Nr(pt,lt,yt,sr){for(var Ir=null,Qr=null,$r=lt,en=lt=0,Qi=null;$r!==null&&en<yt.length;en++){$r.index>en?(Qi=$r,$r=null):Qi=$r.sibling;var Kn=qt(pt,$r,yt[en],sr);if(Kn===null){$r===null&&($r=Qi);break}h&&$r&&Kn.alternate===null&&x(pt,$r),lt=ue(Kn,lt,en),Qr===null?Ir=Kn:Qr.sibling=Kn,Qr=Kn,$r=Qi}if(en===yt.length)return P(pt,$r),Tt&&ot(pt,en),Ir;if($r===null){for(;en<yt.length;en++)$r=er(pt,yt[en],sr),$r!==null&&(lt=ue($r,lt,en),Qr===null?Ir=$r:Qr.sibling=$r,Qr=$r);return Tt&&ot(pt,en),Ir}for($r=W(pt,$r);en<yt.length;en++)Qi=mr($r,pt,en,yt[en],sr),Qi!==null&&(h&&Qi.alternate!==null&&$r.delete(Qi.key===null?en:Qi.key),lt=ue(Qi,lt,en),Qr===null?Ir=Qi:Qr.sibling=Qi,Qr=Qi);return h&&$r.forEach(function(gu){return x(pt,gu)}),Tt&&ot(pt,en),Ir}function _r(pt,lt,yt,sr){var Ir=X(yt);if(typeof Ir!="function")throw Error(s(150));if(yt=Ir.call(yt),yt==null)throw Error(s(151));for(var Qr=Ir=null,$r=lt,en=lt=0,Qi=null,Kn=yt.next();$r!==null&&!Kn.done;en++,Kn=yt.next()){$r.index>en?(Qi=$r,$r=null):Qi=$r.sibling;var gu=qt(pt,$r,Kn.value,sr);if(gu===null){$r===null&&($r=Qi);break}h&&$r&&gu.alternate===null&&x(pt,$r),lt=ue(gu,lt,en),Qr===null?Ir=gu:Qr.sibling=gu,Qr=gu,$r=Qi}if(Kn.done)return P(pt,$r),Tt&&ot(pt,en),Ir;if($r===null){for(;!Kn.done;en++,Kn=yt.next())Kn=er(pt,Kn.value,sr),Kn!==null&&(lt=ue(Kn,lt,en),Qr===null?Ir=Kn:Qr.sibling=Kn,Qr=Kn);return Tt&&ot(pt,en),Ir}for($r=W(pt,$r);!Kn.done;en++,Kn=yt.next())Kn=mr($r,pt,en,Kn.value,sr),Kn!==null&&(h&&Kn.alternate!==null&&$r.delete(Kn.key===null?en:Kn.key),lt=ue(Kn,lt,en),Qr===null?Ir=Kn:Qr.sibling=Kn,Qr=Kn);return h&&$r.forEach(function(BP){return x(pt,BP)}),Tt&&ot(pt,en),Ir}function ui(pt,lt,yt,sr){if(typeof yt=="object"&&yt!==null&&yt.type===_&&yt.key===null&&(yt=yt.props.children),typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case B:e:{for(var Ir=yt.key,Qr=lt;Qr!==null;){if(Qr.key===Ir){if(Ir=yt.type,Ir===_){if(Qr.tag===7){P(pt,Qr.sibling),lt=se(Qr,yt.props.children),lt.return=pt,pt=lt;break e}}else if(Qr.elementType===Ir||typeof Ir=="object"&&Ir!==null&&Ir.$$typeof===L&&ls(Ir)===Qr.type){P(pt,Qr.sibling),lt=se(Qr,yt.props),lt.ref=qr(pt,Qr,yt),lt.return=pt,pt=lt;break e}P(pt,Qr);break}else x(pt,Qr);Qr=Qr.sibling}yt.type===_?(lt=_d(yt.props.children,pt.mode,sr,yt.key),lt.return=pt,pt=lt):(sr=Bm(yt.type,yt.key,yt.props,null,pt.mode,sr),sr.ref=qr(pt,lt,yt),sr.return=pt,pt=sr)}return Ee(pt);case E:e:{for(Qr=yt.key;lt!==null;){if(lt.key===Qr)if(lt.tag===4&&lt.stateNode.containerInfo===yt.containerInfo&&lt.stateNode.implementation===yt.implementation){P(pt,lt.sibling),lt=se(lt,yt.children||[]),lt.return=pt,pt=lt;break e}else{P(pt,lt);break}else x(pt,lt);lt=lt.sibling}lt=vx(yt,pt.mode,sr),lt.return=pt,pt=lt}return Ee(pt);case L:return Qr=yt._init,ui(pt,lt,Qr(yt._payload),sr)}if(Ce(yt))return Nr(pt,lt,yt,sr);if(X(yt))return _r(pt,lt,yt,sr);Nn(pt,yt)}return typeof yt=="string"&&yt!==""||typeof yt=="number"?(yt=""+yt,lt!==null&&lt.tag===6?(P(pt,lt.sibling),lt=se(lt,yt),lt.return=pt,pt=lt):(P(pt,lt),lt=bx(yt,pt.mode,sr),lt.return=pt,pt=lt),Ee(pt)):P(pt,lt)}return ui}var Ws=vi(!0),Ns=vi(!1),li=ro(null),wi=null,xs=null,On=null;function Rn(){On=xs=wi=null}function bs(h){var x=li.current;qn(li),h._currentValue=x}function Qn(h,x,P){for(;h!==null;){var W=h.alternate;if((h.childLanes&x)!==x?(h.childLanes|=x,W!==null&&(W.childLanes|=x)):W!==null&&(W.childLanes&x)!==x&&(W.childLanes|=x),h===P)break;h=h.return}}function _s(h,x){wi=h,On=xs=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&x)!==0&&(za=!0),h.firstContext=null)}function Es(h){var x=h._currentValue;if(On!==h)if(h={context:h,memoizedValue:x,next:null},xs===null){if(wi===null)throw Error(s(308));xs=h,wi.dependencies={lanes:0,firstContext:h}}else xs=xs.next=h;return x}var ts=null;function Li(h){ts===null?ts=[h]:ts.push(h)}function Jn(h,x,P,W){var se=x.interleaved;return se===null?(P.next=P,Li(x)):(P.next=se.next,se.next=P),x.interleaved=P,rs(h,W)}function rs(h,x){h.lanes|=x;var P=h.alternate;for(P!==null&&(P.lanes|=x),P=h,h=h.return;h!==null;)h.childLanes|=x,P=h.alternate,P!==null&&(P.childLanes|=x),P=h,h=h.return;return P.tag===3?P.stateNode:null}var qs=!1;function Oi(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pa(h,x){h=h.updateQueue,x.updateQueue===h&&(x.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Qs(h,x){return{eventTime:h,lane:x,tag:0,payload:null,callback:null,next:null}}function $s(h,x,P){var W=h.updateQueue;if(W===null)return null;if(W=W.shared,($n&2)!==0){var se=W.pending;return se===null?x.next=x:(x.next=se.next,se.next=x),W.pending=x,rs(h,P)}return se=W.interleaved,se===null?(x.next=x,Li(W)):(x.next=se.next,se.next=x),W.interleaved=x,rs(h,P)}function Di(h,x,P){if(x=x.updateQueue,x!==null&&(x=x.shared,(P&4194240)!==0)){var W=x.lanes;W&=h.pendingLanes,P|=W,x.lanes=P,Cn(h,P)}}function ns(h,x){var P=h.updateQueue,W=h.alternate;if(W!==null&&(W=W.updateQueue,P===W)){var se=null,ue=null;if(P=P.firstBaseUpdate,P!==null){do{var Ee={eventTime:P.eventTime,lane:P.lane,tag:P.tag,payload:P.payload,callback:P.callback,next:null};ue===null?se=ue=Ee:ue=ue.next=Ee,P=P.next}while(P!==null);ue===null?se=ue=x:ue=ue.next=x}else se=ue=x;P={baseState:W.baseState,firstBaseUpdate:se,lastBaseUpdate:ue,shared:W.shared,effects:W.effects},h.updateQueue=P;return}h=P.lastBaseUpdate,h===null?P.firstBaseUpdate=x:h.next=x,P.lastBaseUpdate=x}function Mi(h,x,P,W){var se=h.updateQueue;qs=!1;var ue=se.firstBaseUpdate,Ee=se.lastBaseUpdate,Je=se.shared.pending;if(Je!==null){se.shared.pending=null;var st=Je,jt=st.next;st.next=null,Ee===null?ue=jt:Ee.next=jt,Ee=st;var Xt=h.alternate;Xt!==null&&(Xt=Xt.updateQueue,Je=Xt.lastBaseUpdate,Je!==Ee&&(Je===null?Xt.firstBaseUpdate=jt:Je.next=jt,Xt.lastBaseUpdate=st))}if(ue!==null){var er=se.baseState;Ee=0,Xt=jt=st=null,Je=ue;do{var qt=Je.lane,mr=Je.eventTime;if((W&qt)===qt){Xt!==null&&(Xt=Xt.next={eventTime:mr,lane:0,tag:Je.tag,payload:Je.payload,callback:Je.callback,next:null});e:{var Nr=h,_r=Je;switch(qt=x,mr=P,_r.tag){case 1:if(Nr=_r.payload,typeof Nr=="function"){er=Nr.call(mr,er,qt);break e}er=Nr;break e;case 3:Nr.flags=Nr.flags&-65537|128;case 0:if(Nr=_r.payload,qt=typeof Nr=="function"?Nr.call(mr,er,qt):Nr,qt==null)break e;er=q({},er,qt);break e;case 2:qs=!0}}Je.callback!==null&&Je.lane!==0&&(h.flags|=64,qt=se.effects,qt===null?se.effects=[Je]:qt.push(Je))}else mr={eventTime:mr,lane:qt,tag:Je.tag,payload:Je.payload,callback:Je.callback,next:null},Xt===null?(jt=Xt=mr,st=er):Xt=Xt.next=mr,Ee|=qt;if(Je=Je.next,Je===null){if(Je=se.shared.pending,Je===null)break;qt=Je,Je=qt.next,qt.next=null,se.lastBaseUpdate=qt,se.shared.pending=null}}while(!0);if(Xt===null&&(st=er),se.baseState=st,se.firstBaseUpdate=jt,se.lastBaseUpdate=Xt,x=se.shared.interleaved,x!==null){se=x;do Ee|=se.lane,se=se.next;while(se!==x)}else ue===null&&(se.shared.lanes=0);Sd|=Ee,h.lanes=Ee,h.memoizedState=er}}function Va(h,x,P){if(h=x.effects,x.effects=null,h!==null)for(x=0;x<h.length;x++){var W=h[x],se=W.callback;if(se!==null){if(W.callback=null,W=P,typeof se!="function")throw Error(s(191,se));se.call(W)}}}var no={},ji=ro(no),Hs=ro(no),Fl=ro(no);function Xo(h){if(h===no)throw Error(s(174));return h}function ou(h,x){switch(Xn(Fl,x),Xn(Hs,h),Xn(ji,no),h=x.nodeType,h){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:je(null,"");break;default:h=h===8?x.parentNode:x,x=h.namespaceURI||null,h=h.tagName,x=je(x,h)}qn(ji),Xn(ji,x)}function So(){qn(ji),qn(Hs),qn(Fl)}function lm(h){Xo(Fl.current);var x=Xo(ji.current),P=je(x,h.type);x!==P&&(Xn(Hs,h),Xn(ji,P))}function sf(h){Hs.current===h&&(qn(ji),qn(Hs))}var As=ro(0);function so(h){for(var x=h;x!==null;){if(x.tag===13){var P=x.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||P.data==="$?"||P.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var af=[];function of(){for(var h=0;h<af.length;h++)af[h]._workInProgressVersionPrimary=null;af.length=0}var NA=C.ReactCurrentDispatcher,SA=C.ReactCurrentBatchConfig,Co=0,vs=null,Ys=null,Vs=null,lu=!1,Jo=!1,cu=0,Ky=0;function ci(){throw Error(s(321))}function CA(h,x){if(x===null)return!1;for(var P=0;P<x.length&&P<h.length;P++)if(!oi(h[P],x[P]))return!1;return!0}function wd(h,x,P,W,se,ue){if(Co=ue,vs=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,NA.current=h===null||h.memoizedState===null?ZI:eP,h=P(W,se),Jo){ue=0;do{if(Jo=!1,cu=0,25<=ue)throw Error(s(301));ue+=1,Vs=Ys=null,x.updateQueue=null,NA.current=tP,h=P(W,se)}while(Jo)}if(NA.current=hm,x=Ys!==null&&Ys.next!==null,Co=0,Vs=Ys=vs=null,lu=!1,x)throw Error(s(300));return h}function Bo(){var h=cu!==0;return cu=0,h}function io(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vs===null?vs.memoizedState=Vs=h:Vs=Vs.next=h,Vs}function Ba(){if(Ys===null){var h=vs.alternate;h=h!==null?h.memoizedState:null}else h=Ys.next;var x=Vs===null?vs.memoizedState:Vs.next;if(x!==null)Vs=x,Ys=h;else{if(h===null)throw Error(s(310));Ys=h,h={memoizedState:Ys.memoizedState,baseState:Ys.baseState,baseQueue:Ys.baseQueue,queue:Ys.queue,next:null},Vs===null?vs.memoizedState=Vs=h:Vs=Vs.next=h}return Vs}function jd(h,x){return typeof x=="function"?x(h):x}function BA(h){var x=Ba(),P=x.queue;if(P===null)throw Error(s(311));P.lastRenderedReducer=h;var W=Ys,se=W.baseQueue,ue=P.pending;if(ue!==null){if(se!==null){var Ee=se.next;se.next=ue.next,ue.next=Ee}W.baseQueue=se=ue,P.pending=null}if(se!==null){ue=se.next,W=W.baseState;var Je=Ee=null,st=null,jt=ue;do{var Xt=jt.lane;if((Co&Xt)===Xt)st!==null&&(st=st.next={lane:0,action:jt.action,hasEagerState:jt.hasEagerState,eagerState:jt.eagerState,next:null}),W=jt.hasEagerState?jt.eagerState:h(W,jt.action);else{var er={lane:Xt,action:jt.action,hasEagerState:jt.hasEagerState,eagerState:jt.eagerState,next:null};st===null?(Je=st=er,Ee=W):st=st.next=er,vs.lanes|=Xt,Sd|=Xt}jt=jt.next}while(jt!==null&&jt!==ue);st===null?Ee=W:st.next=Je,oi(W,x.memoizedState)||(za=!0),x.memoizedState=W,x.baseState=Ee,x.baseQueue=st,P.lastRenderedState=W}if(h=P.interleaved,h!==null){se=h;do ue=se.lane,vs.lanes|=ue,Sd|=ue,se=se.next;while(se!==h)}else se===null&&(P.lanes=0);return[x.memoizedState,P.dispatch]}function Ul(h){var x=Ba(),P=x.queue;if(P===null)throw Error(s(311));P.lastRenderedReducer=h;var W=P.dispatch,se=P.pending,ue=x.memoizedState;if(se!==null){P.pending=null;var Ee=se=se.next;do ue=h(ue,Ee.action),Ee=Ee.next;while(Ee!==se);oi(ue,x.memoizedState)||(za=!0),x.memoizedState=ue,x.baseQueue===null&&(x.baseState=ue),P.lastRenderedState=ue}return[ue,W]}function cm(){}function lf(h,x){var P=vs,W=Ba(),se=x(),ue=!oi(W.memoizedState,se);if(ue&&(W.memoizedState=se,za=!0),W=W.queue,EA(dm.bind(null,P,W,h),[h]),W.getSnapshot!==x||ue||Vs!==null&&Vs.memoizedState.tag&1){if(P.flags|=2048,ka(9,cf.bind(null,P,W,se,x),void 0,null),Ri===null)throw Error(s(349));(Co&30)!==0||um(P,x,se)}return se}function um(h,x,P){h.flags|=16384,h={getSnapshot:x,value:P},x=vs.updateQueue,x===null?(x={lastEffect:null,stores:null},vs.updateQueue=x,x.stores=[h]):(P=x.stores,P===null?x.stores=[h]:P.push(h))}function cf(h,x,P,W){x.value=P,x.getSnapshot=W,uu(x)&&kA(h)}function dm(h,x,P){return P(function(){uu(x)&&kA(h)})}function uu(h){var x=h.getSnapshot;h=h.value;try{var P=x();return!oi(h,P)}catch{return!0}}function kA(h){var x=rs(h,1);x!==null&&nl(x,h,1,-1)}function Nd(h){var x=io();return typeof h=="function"&&(h=h()),x.memoizedState=x.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jd,lastRenderedState:h},x.queue=h,h=h.dispatch=JI.bind(null,vs,h),[x.memoizedState,h]}function ka(h,x,P,W){return h={tag:h,create:x,destroy:P,deps:W,next:null},x=vs.updateQueue,x===null?(x={lastEffect:null,stores:null},vs.updateQueue=x,x.lastEffect=h.next=h):(P=x.lastEffect,P===null?x.lastEffect=h.next=h:(W=P.next,P.next=h,h.next=W,x.lastEffect=h)),h}function Zo(){return Ba().memoizedState}function ao(h,x,P,W){var se=io();vs.flags|=h,se.memoizedState=ka(1|x,P,void 0,W===void 0?null:W)}function wc(h,x,P,W){var se=Ba();W=W===void 0?null:W;var ue=void 0;if(Ys!==null){var Ee=Ys.memoizedState;if(ue=Ee.destroy,W!==null&&CA(W,Ee.deps)){se.memoizedState=ka(x,P,ue,W);return}}vs.flags|=h,se.memoizedState=ka(1|x,P,ue,W)}function _A(h,x){return ao(8390656,8,h,x)}function EA(h,x){return wc(2048,8,h,x)}function Am(h,x){return wc(4,2,h,x)}function OA(h,x){return wc(4,4,h,x)}function IA(h,x){if(typeof x=="function")return h=h(),x(h),function(){x(null)};if(x!=null)return h=h(),x.current=h,function(){x.current=null}}function rj(h,x,P){return P=P!=null?P.concat([h]):null,wc(4,4,IA.bind(null,x,h),P)}function Gy(){}function nj(h,x){var P=Ba();x=x===void 0?null:x;var W=P.memoizedState;return W!==null&&x!==null&&CA(x,W[1])?W[0]:(P.memoizedState=[h,x],h)}function sj(h,x){var P=Ba();x=x===void 0?null:x;var W=P.memoizedState;return W!==null&&x!==null&&CA(x,W[1])?W[0]:(h=h(),P.memoizedState=[h,x],h)}function ij(h,x,P){return(Co&21)===0?(h.baseState&&(h.baseState=!1,za=!0),h.memoizedState=P):(oi(P,x)||(P=xi(),vs.lanes|=P,Sd|=P,h.baseState=!0),x)}function YI(h,x){var P=Ur;Ur=P!==0&&4>P?P:4,h(!0);var W=SA.transition;SA.transition={};try{h(!1),x()}finally{Ur=P,SA.transition=W}}function aj(){return Ba().memoizedState}function XI(h,x,P){var W=fu(h);if(P={lane:W,action:P,hasEagerState:!1,eagerState:null,next:null},oj(h))lj(x,P);else if(P=Jn(h,x,P,W),P!==null){var se=Ea();nl(P,h,W,se),cj(P,x,W)}}function JI(h,x,P){var W=fu(h),se={lane:W,action:P,hasEagerState:!1,eagerState:null,next:null};if(oj(h))lj(x,se);else{var ue=h.alternate;if(h.lanes===0&&(ue===null||ue.lanes===0)&&(ue=x.lastRenderedReducer,ue!==null))try{var Ee=x.lastRenderedState,Je=ue(Ee,P);if(se.hasEagerState=!0,se.eagerState=Je,oi(Je,Ee)){var st=x.interleaved;st===null?(se.next=se,Li(x)):(se.next=st.next,st.next=se),x.interleaved=se;return}}catch{}finally{}P=Jn(h,x,se,W),P!==null&&(se=Ea(),nl(P,h,W,se),cj(P,x,W))}}function oj(h){var x=h.alternate;return h===vs||x!==null&&x===vs}function lj(h,x){Jo=lu=!0;var P=h.pending;P===null?x.next=x:(x.next=P.next,P.next=x),h.pending=x}function cj(h,x,P){if((P&4194240)!==0){var W=x.lanes;W&=h.pendingLanes,P|=W,x.lanes=P,Cn(h,P)}}var hm={readContext:Es,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useInsertionEffect:ci,useLayoutEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useMutableSource:ci,useSyncExternalStore:ci,useId:ci,unstable_isNewReconciler:!1},ZI={readContext:Es,useCallback:function(h,x){return io().memoizedState=[h,x===void 0?null:x],h},useContext:Es,useEffect:_A,useImperativeHandle:function(h,x,P){return P=P!=null?P.concat([h]):null,ao(4194308,4,IA.bind(null,x,h),P)},useLayoutEffect:function(h,x){return ao(4194308,4,h,x)},useInsertionEffect:function(h,x){return ao(4,2,h,x)},useMemo:function(h,x){var P=io();return x=x===void 0?null:x,h=h(),P.memoizedState=[h,x],h},useReducer:function(h,x,P){var W=io();return x=P!==void 0?P(x):x,W.memoizedState=W.baseState=x,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:x},W.queue=h,h=h.dispatch=XI.bind(null,vs,h),[W.memoizedState,h]},useRef:function(h){var x=io();return h={current:h},x.memoizedState=h},useState:Nd,useDebugValue:Gy,useDeferredValue:function(h){return io().memoizedState=h},useTransition:function(){var h=Nd(!1),x=h[0];return h=YI.bind(null,h[1]),io().memoizedState=h,[x,h]},useMutableSource:function(){},useSyncExternalStore:function(h,x,P){var W=vs,se=io();if(Tt){if(P===void 0)throw Error(s(407));P=P()}else{if(P=x(),Ri===null)throw Error(s(349));(Co&30)!==0||um(W,x,P)}se.memoizedState=P;var ue={value:P,getSnapshot:x};return se.queue=ue,_A(dm.bind(null,W,ue,h),[h]),W.flags|=2048,ka(9,cf.bind(null,W,ue,P,x),void 0,null),P},useId:function(){var h=io(),x=Ri.identifierPrefix;if(Tt){var P=Ke,W=ft;P=(W&~(1<<32-hn(W)-1)).toString(32)+P,x=":"+x+"R"+P,P=cu++,0<P&&(x+="H"+P.toString(32)),x+=":"}else P=Ky++,x=":"+x+"r"+P.toString(32)+":";return h.memoizedState=x},unstable_isNewReconciler:!1},eP={readContext:Es,useCallback:nj,useContext:Es,useEffect:EA,useImperativeHandle:rj,useInsertionEffect:Am,useLayoutEffect:OA,useMemo:sj,useReducer:BA,useRef:Zo,useState:function(){return BA(jd)},useDebugValue:Gy,useDeferredValue:function(h){var x=Ba();return ij(x,Ys.memoizedState,h)},useTransition:function(){var h=BA(jd)[0],x=Ba().memoizedState;return[h,x]},useMutableSource:cm,useSyncExternalStore:lf,useId:aj,unstable_isNewReconciler:!1},tP={readContext:Es,useCallback:nj,useContext:Es,useEffect:EA,useImperativeHandle:rj,useInsertionEffect:Am,useLayoutEffect:OA,useMemo:sj,useReducer:Ul,useRef:Zo,useState:function(){return Ul(jd)},useDebugValue:Gy,useDeferredValue:function(h){var x=Ba();return Ys===null?x.memoizedState=h:ij(x,Ys.memoizedState,h)},useTransition:function(){var h=Ul(jd)[0],x=Ba().memoizedState;return[h,x]},useMutableSource:cm,useSyncExternalStore:lf,useId:aj,unstable_isNewReconciler:!1};function el(h,x){if(h&&h.defaultProps){x=q({},x),h=h.defaultProps;for(var P in h)x[P]===void 0&&(x[P]=h[P]);return x}return x}function Wy(h,x,P,W){x=h.memoizedState,P=P(W,x),P=P==null?x:q({},x,P),h.memoizedState=P,h.lanes===0&&(h.updateQueue.baseState=P)}var fm={isMounted:function(h){return(h=h._reactInternals)?De(h)===h:!1},enqueueSetState:function(h,x,P){h=h._reactInternals;var W=Ea(),se=fu(h),ue=Qs(W,se);ue.payload=x,P!=null&&(ue.callback=P),x=$s(h,ue,se),x!==null&&(nl(x,h,se,W),Di(x,h,se))},enqueueReplaceState:function(h,x,P){h=h._reactInternals;var W=Ea(),se=fu(h),ue=Qs(W,se);ue.tag=1,ue.payload=x,P!=null&&(ue.callback=P),x=$s(h,ue,se),x!==null&&(nl(x,h,se,W),Di(x,h,se))},enqueueForceUpdate:function(h,x){h=h._reactInternals;var P=Ea(),W=fu(h),se=Qs(P,W);se.tag=2,x!=null&&(se.callback=x),x=$s(h,se,W),x!==null&&(nl(x,h,W,P),Di(x,h,W))}};function uj(h,x,P,W,se,ue,Ee){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(W,ue,Ee):x.prototype&&x.prototype.isPureReactComponent?!wo(P,W)||!wo(se,ue):!0}function dj(h,x,P){var W=!1,se=Tl,ue=x.contextType;return typeof ue=="object"&&ue!==null?ue=Es(ue):(se=fa(x)?bc:Ei.current,W=x.contextTypes,ue=(W=W!=null)?au(h,se):Tl),x=new x(P,ue),h.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=fm,h.stateNode=x,x._reactInternals=h,W&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=se,h.__reactInternalMemoizedMaskedChildContext=ue),x}function Aj(h,x,P,W){h=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(P,W),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(P,W),x.state!==h&&fm.enqueueReplaceState(x,x.state,null)}function qy(h,x,P,W){var se=h.stateNode;se.props=P,se.state=h.memoizedState,se.refs={},Oi(h);var ue=x.contextType;typeof ue=="object"&&ue!==null?se.context=Es(ue):(ue=fa(x)?bc:Ei.current,se.context=au(h,ue)),se.state=h.memoizedState,ue=x.getDerivedStateFromProps,typeof ue=="function"&&(Wy(h,x,ue,P),se.state=h.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof se.getSnapshotBeforeUpdate=="function"||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(x=se.state,typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount(),x!==se.state&&fm.enqueueReplaceState(se,se.state,null),Mi(h,P,se,W),se.state=h.memoizedState),typeof se.componentDidMount=="function"&&(h.flags|=4194308)}function PA(h,x){try{var P="",W=x;do P+=M(W),W=W.return;while(W);var se=P}catch(ue){se=`
Error generating stack: `+ue.message+`
`+ue.stack}return{value:h,source:x,stack:se,digest:null}}function Yy(h,x,P){return{value:h,source:null,stack:P??null,digest:x??null}}function Xy(h,x){try{console.error(x.value)}catch(P){setTimeout(function(){throw P})}}var rP=typeof WeakMap=="function"?WeakMap:Map;function hj(h,x,P){P=Qs(-1,P),P.tag=3,P.payload={element:null};var W=x.value;return P.callback=function(){vm||(vm=!0,Ax=W),Xy(h,x)},P}function fj(h,x,P){P=Qs(-1,P),P.tag=3;var W=h.type.getDerivedStateFromError;if(typeof W=="function"){var se=x.value;P.payload=function(){return W(se)},P.callback=function(){Xy(h,x)}}var ue=h.stateNode;return ue!==null&&typeof ue.componentDidCatch=="function"&&(P.callback=function(){Xy(h,x),typeof W!="function"&&(Au===null?Au=new Set([this]):Au.add(this));var Ee=x.stack;this.componentDidCatch(x.value,{componentStack:Ee!==null?Ee:""})}),P}function pj(h,x,P){var W=h.pingCache;if(W===null){W=h.pingCache=new rP;var se=new Set;W.set(x,se)}else se=W.get(x),se===void 0&&(se=new Set,W.set(x,se));se.has(P)||(se.add(P),h=mP.bind(null,h,x,P),x.then(h,h))}function mj(h){do{var x;if((x=h.tag===13)&&(x=h.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return h;h=h.return}while(h!==null);return null}function gj(h,x,P,W,se){return(h.mode&1)===0?(h===x?h.flags|=65536:(h.flags|=128,P.flags|=131072,P.flags&=-52805,P.tag===1&&(P.alternate===null?P.tag=17:(x=Qs(-1,1),x.tag=2,$s(P,x,1))),P.lanes|=1),h):(h.flags|=65536,h.lanes=se,h)}var nP=C.ReactCurrentOwner,za=!1;function _a(h,x,P,W){x.child=h===null?Ns(x,null,P,W):Ws(x,h.child,P,W)}function yj(h,x,P,W,se){P=P.render;var ue=x.ref;return _s(x,se),W=wd(h,x,P,W,ue,se),P=Bo(),h!==null&&!za?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~se,jc(h,x,se)):(Tt&&P&&Ot(x),x.flags|=1,_a(h,x,W,se),x.child)}function xj(h,x,P,W,se){if(h===null){var ue=P.type;return typeof ue=="function"&&!xx(ue)&&ue.defaultProps===void 0&&P.compare===null&&P.defaultProps===void 0?(x.tag=15,x.type=ue,bj(h,x,ue,W,se)):(h=Bm(P.type,null,W,x,x.mode,se),h.ref=x.ref,h.return=x,x.child=h)}if(ue=h.child,(h.lanes&se)===0){var Ee=ue.memoizedProps;if(P=P.compare,P=P!==null?P:wo,P(Ee,W)&&h.ref===x.ref)return jc(h,x,se)}return x.flags|=1,h=mu(ue,W),h.ref=x.ref,h.return=x,x.child=h}function bj(h,x,P,W,se){if(h!==null){var ue=h.memoizedProps;if(wo(ue,W)&&h.ref===x.ref)if(za=!1,x.pendingProps=W=ue,(h.lanes&se)!==0)(h.flags&131072)!==0&&(za=!0);else return x.lanes=h.lanes,jc(h,x,se)}return Jy(h,x,P,W,se)}function vj(h,x,P){var W=x.pendingProps,se=W.children,ue=h!==null?h.memoizedState:null;if(W.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xn(FA,oo),oo|=P;else{if((P&1073741824)===0)return h=ue!==null?ue.baseLanes|P:P,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:h,cachePool:null,transitions:null},x.updateQueue=null,Xn(FA,oo),oo|=h,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},W=ue!==null?ue.baseLanes:P,Xn(FA,oo),oo|=W}else ue!==null?(W=ue.baseLanes|P,x.memoizedState=null):W=P,Xn(FA,oo),oo|=W;return _a(h,x,se,P),x.child}function wj(h,x){var P=x.ref;(h===null&&P!==null||h!==null&&h.ref!==P)&&(x.flags|=512,x.flags|=2097152)}function Jy(h,x,P,W,se){var ue=fa(P)?bc:Ei.current;return ue=au(x,ue),_s(x,se),P=wd(h,x,P,W,ue,se),W=Bo(),h!==null&&!za?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~se,jc(h,x,se)):(Tt&&W&&Ot(x),x.flags|=1,_a(h,x,P,se),x.child)}function jj(h,x,P,W,se){if(fa(P)){var ue=!0;vc(x)}else ue=!1;if(_s(x,se),x.stateNode===null)mm(h,x),dj(x,P,W),qy(x,P,W,se),W=!0;else if(h===null){var Ee=x.stateNode,Je=x.memoizedProps;Ee.props=Je;var st=Ee.context,jt=P.contextType;typeof jt=="object"&&jt!==null?jt=Es(jt):(jt=fa(P)?bc:Ei.current,jt=au(x,jt));var Xt=P.getDerivedStateFromProps,er=typeof Xt=="function"||typeof Ee.getSnapshotBeforeUpdate=="function";er||typeof Ee.UNSAFE_componentWillReceiveProps!="function"&&typeof Ee.componentWillReceiveProps!="function"||(Je!==W||st!==jt)&&Aj(x,Ee,W,jt),qs=!1;var qt=x.memoizedState;Ee.state=qt,Mi(x,W,Ee,se),st=x.memoizedState,Je!==W||qt!==st||ha.current||qs?(typeof Xt=="function"&&(Wy(x,P,Xt,W),st=x.memoizedState),(Je=qs||uj(x,P,Je,W,qt,st,jt))?(er||typeof Ee.UNSAFE_componentWillMount!="function"&&typeof Ee.componentWillMount!="function"||(typeof Ee.componentWillMount=="function"&&Ee.componentWillMount(),typeof Ee.UNSAFE_componentWillMount=="function"&&Ee.UNSAFE_componentWillMount()),typeof Ee.componentDidMount=="function"&&(x.flags|=4194308)):(typeof Ee.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=W,x.memoizedState=st),Ee.props=W,Ee.state=st,Ee.context=jt,W=Je):(typeof Ee.componentDidMount=="function"&&(x.flags|=4194308),W=!1)}else{Ee=x.stateNode,pa(h,x),Je=x.memoizedProps,jt=x.type===x.elementType?Je:el(x.type,Je),Ee.props=jt,er=x.pendingProps,qt=Ee.context,st=P.contextType,typeof st=="object"&&st!==null?st=Es(st):(st=fa(P)?bc:Ei.current,st=au(x,st));var mr=P.getDerivedStateFromProps;(Xt=typeof mr=="function"||typeof Ee.getSnapshotBeforeUpdate=="function")||typeof Ee.UNSAFE_componentWillReceiveProps!="function"&&typeof Ee.componentWillReceiveProps!="function"||(Je!==er||qt!==st)&&Aj(x,Ee,W,st),qs=!1,qt=x.memoizedState,Ee.state=qt,Mi(x,W,Ee,se);var Nr=x.memoizedState;Je!==er||qt!==Nr||ha.current||qs?(typeof mr=="function"&&(Wy(x,P,mr,W),Nr=x.memoizedState),(jt=qs||uj(x,P,jt,W,qt,Nr,st)||!1)?(Xt||typeof Ee.UNSAFE_componentWillUpdate!="function"&&typeof Ee.componentWillUpdate!="function"||(typeof Ee.componentWillUpdate=="function"&&Ee.componentWillUpdate(W,Nr,st),typeof Ee.UNSAFE_componentWillUpdate=="function"&&Ee.UNSAFE_componentWillUpdate(W,Nr,st)),typeof Ee.componentDidUpdate=="function"&&(x.flags|=4),typeof Ee.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof Ee.componentDidUpdate!="function"||Je===h.memoizedProps&&qt===h.memoizedState||(x.flags|=4),typeof Ee.getSnapshotBeforeUpdate!="function"||Je===h.memoizedProps&&qt===h.memoizedState||(x.flags|=1024),x.memoizedProps=W,x.memoizedState=Nr),Ee.props=W,Ee.state=Nr,Ee.context=st,W=jt):(typeof Ee.componentDidUpdate!="function"||Je===h.memoizedProps&&qt===h.memoizedState||(x.flags|=4),typeof Ee.getSnapshotBeforeUpdate!="function"||Je===h.memoizedProps&&qt===h.memoizedState||(x.flags|=1024),W=!1)}return Zy(h,x,P,W,ue,se)}function Zy(h,x,P,W,se,ue){wj(h,x);var Ee=(x.flags&128)!==0;if(!W&&!Ee)return se&&om(x,P,!1),jc(h,x,ue);W=x.stateNode,nP.current=x;var Je=Ee&&typeof P.getDerivedStateFromError!="function"?null:W.render();return x.flags|=1,h!==null&&Ee?(x.child=Ws(x,h.child,null,ue),x.child=Ws(x,null,Je,ue)):_a(h,x,Je,ue),x.memoizedState=W.state,se&&om(x,P,!0),x.child}function Nj(h){var x=h.stateNode;x.pendingContext?am(h,x.pendingContext,x.pendingContext!==x.context):x.context&&am(h,x.context,!1),ou(h,x.containerInfo)}function Sj(h,x,P,W,se){return br(),ar(se),x.flags|=256,_a(h,x,P,W),x.child}var ex={dehydrated:null,treeContext:null,retryLane:0};function tx(h){return{baseLanes:h,cachePool:null,transitions:null}}function Cj(h,x,P){var W=x.pendingProps,se=As.current,ue=!1,Ee=(x.flags&128)!==0,Je;if((Je=Ee)||(Je=h!==null&&h.memoizedState===null?!1:(se&2)!==0),Je?(ue=!0,x.flags&=-129):(h===null||h.memoizedState!==null)&&(se|=1),Xn(As,se&1),h===null)return jr(x),h=x.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((x.mode&1)===0?x.lanes=1:h.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(Ee=W.children,h=W.fallback,ue?(W=x.mode,ue=x.child,Ee={mode:"hidden",children:Ee},(W&1)===0&&ue!==null?(ue.childLanes=0,ue.pendingProps=Ee):ue=km(Ee,W,0,null),h=_d(h,W,P,null),ue.return=x,h.return=x,ue.sibling=h,x.child=ue,x.child.memoizedState=tx(P),x.memoizedState=ex,h):rx(x,Ee));if(se=h.memoizedState,se!==null&&(Je=se.dehydrated,Je!==null))return sP(h,x,Ee,W,Je,se,P);if(ue){ue=W.fallback,Ee=x.mode,se=h.child,Je=se.sibling;var st={mode:"hidden",children:W.children};return(Ee&1)===0&&x.child!==se?(W=x.child,W.childLanes=0,W.pendingProps=st,x.deletions=null):(W=mu(se,st),W.subtreeFlags=se.subtreeFlags&14680064),Je!==null?ue=mu(Je,ue):(ue=_d(ue,Ee,P,null),ue.flags|=2),ue.return=x,W.return=x,W.sibling=ue,x.child=W,W=ue,ue=x.child,Ee=h.child.memoizedState,Ee=Ee===null?tx(P):{baseLanes:Ee.baseLanes|P,cachePool:null,transitions:Ee.transitions},ue.memoizedState=Ee,ue.childLanes=h.childLanes&~P,x.memoizedState=ex,W}return ue=h.child,h=ue.sibling,W=mu(ue,{mode:"visible",children:W.children}),(x.mode&1)===0&&(W.lanes=P),W.return=x,W.sibling=null,h!==null&&(P=x.deletions,P===null?(x.deletions=[h],x.flags|=16):P.push(h)),x.child=W,x.memoizedState=null,W}function rx(h,x){return x=km({mode:"visible",children:x},h.mode,0,null),x.return=h,h.child=x}function pm(h,x,P,W){return W!==null&&ar(W),Ws(x,h.child,null,P),h=rx(x,x.pendingProps.children),h.flags|=2,x.memoizedState=null,h}function sP(h,x,P,W,se,ue,Ee){if(P)return x.flags&256?(x.flags&=-257,W=Yy(Error(s(422))),pm(h,x,Ee,W)):x.memoizedState!==null?(x.child=h.child,x.flags|=128,null):(ue=W.fallback,se=x.mode,W=km({mode:"visible",children:W.children},se,0,null),ue=_d(ue,se,Ee,null),ue.flags|=2,W.return=x,ue.return=x,W.sibling=ue,x.child=W,(x.mode&1)!==0&&Ws(x,h.child,null,Ee),x.child.memoizedState=tx(Ee),x.memoizedState=ex,ue);if((x.mode&1)===0)return pm(h,x,Ee,null);if(se.data==="$!"){if(W=se.nextSibling&&se.nextSibling.dataset,W)var Je=W.dgst;return W=Je,ue=Error(s(419)),W=Yy(ue,W,void 0),pm(h,x,Ee,W)}if(Je=(Ee&h.childLanes)!==0,za||Je){if(W=Ri,W!==null){switch(Ee&-Ee){case 4:se=2;break;case 16:se=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:se=32;break;case 536870912:se=268435456;break;default:se=0}se=(se&(W.suspendedLanes|Ee))!==0?0:se,se!==0&&se!==ue.retryLane&&(ue.retryLane=se,rs(h,se),nl(W,h,se,-1))}return yx(),W=Yy(Error(s(421))),pm(h,x,Ee,W)}return se.data==="$?"?(x.flags|=128,x.child=h.child,x=gP.bind(null,h),se._reactRetry=x,null):(h=ue.treeContext,kt=Zi(se.nextSibling),Ct=x,Tt=!0,Rt=null,h!==null&&(Me[ze++]=ft,Me[ze++]=Ke,Me[ze++]=nt,ft=h.id,Ke=h.overflow,nt=x),x=rx(x,W.children),x.flags|=4096,x)}function Bj(h,x,P){h.lanes|=x;var W=h.alternate;W!==null&&(W.lanes|=x),Qn(h.return,x,P)}function nx(h,x,P,W,se){var ue=h.memoizedState;ue===null?h.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:W,tail:P,tailMode:se}:(ue.isBackwards=x,ue.rendering=null,ue.renderingStartTime=0,ue.last=W,ue.tail=P,ue.tailMode=se)}function kj(h,x,P){var W=x.pendingProps,se=W.revealOrder,ue=W.tail;if(_a(h,x,W.children,P),W=As.current,(W&2)!==0)W=W&1|2,x.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=x.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Bj(h,P,x);else if(h.tag===19)Bj(h,P,x);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===x)break e;for(;h.sibling===null;){if(h.return===null||h.return===x)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}W&=1}if(Xn(As,W),(x.mode&1)===0)x.memoizedState=null;else switch(se){case"forwards":for(P=x.child,se=null;P!==null;)h=P.alternate,h!==null&&so(h)===null&&(se=P),P=P.sibling;P=se,P===null?(se=x.child,x.child=null):(se=P.sibling,P.sibling=null),nx(x,!1,se,P,ue);break;case"backwards":for(P=null,se=x.child,x.child=null;se!==null;){if(h=se.alternate,h!==null&&so(h)===null){x.child=se;break}h=se.sibling,se.sibling=P,P=se,se=h}nx(x,!0,P,null,ue);break;case"together":nx(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function mm(h,x){(x.mode&1)===0&&h!==null&&(h.alternate=null,x.alternate=null,x.flags|=2)}function jc(h,x,P){if(h!==null&&(x.dependencies=h.dependencies),Sd|=x.lanes,(P&x.childLanes)===0)return null;if(h!==null&&x.child!==h.child)throw Error(s(153));if(x.child!==null){for(h=x.child,P=mu(h,h.pendingProps),x.child=P,P.return=x;h.sibling!==null;)h=h.sibling,P=P.sibling=mu(h,h.pendingProps),P.return=x;P.sibling=null}return x.child}function iP(h,x,P){switch(x.tag){case 3:Nj(x),br();break;case 5:lm(x);break;case 1:fa(x.type)&&vc(x);break;case 4:ou(x,x.stateNode.containerInfo);break;case 10:var W=x.type._context,se=x.memoizedProps.value;Xn(li,W._currentValue),W._currentValue=se;break;case 13:if(W=x.memoizedState,W!==null)return W.dehydrated!==null?(Xn(As,As.current&1),x.flags|=128,null):(P&x.child.childLanes)!==0?Cj(h,x,P):(Xn(As,As.current&1),h=jc(h,x,P),h!==null?h.sibling:null);Xn(As,As.current&1);break;case 19:if(W=(P&x.childLanes)!==0,(h.flags&128)!==0){if(W)return kj(h,x,P);x.flags|=128}if(se=x.memoizedState,se!==null&&(se.rendering=null,se.tail=null,se.lastEffect=null),Xn(As,As.current),W)break;return null;case 22:case 23:return x.lanes=0,vj(h,x,P)}return jc(h,x,P)}var _j,sx,Ej,Oj;_j=function(h,x){for(var P=x.child;P!==null;){if(P.tag===5||P.tag===6)h.appendChild(P.stateNode);else if(P.tag!==4&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===x)break;for(;P.sibling===null;){if(P.return===null||P.return===x)return;P=P.return}P.sibling.return=P.return,P=P.sibling}},sx=function(){},Ej=function(h,x,P,W){var se=h.memoizedProps;if(se!==W){h=x.stateNode,Xo(ji.current);var ue=null;switch(P){case"input":se=Z(h,se),W=Z(h,W),ue=[];break;case"select":se=q({},se,{value:void 0}),W=q({},W,{value:void 0}),ue=[];break;case"textarea":se=me(h,se),W=me(h,W),ue=[];break;default:typeof se.onClick!="function"&&typeof W.onClick=="function"&&(h.onclick=nu)}vt(P,W);var Ee;P=null;for(jt in se)if(!W.hasOwnProperty(jt)&&se.hasOwnProperty(jt)&&se[jt]!=null)if(jt==="style"){var Je=se[jt];for(Ee in Je)Je.hasOwnProperty(Ee)&&(P||(P={}),P[Ee]="")}else jt!=="dangerouslySetInnerHTML"&&jt!=="children"&&jt!=="suppressContentEditableWarning"&&jt!=="suppressHydrationWarning"&&jt!=="autoFocus"&&(a.hasOwnProperty(jt)?ue||(ue=[]):(ue=ue||[]).push(jt,null));for(jt in W){var st=W[jt];if(Je=se?.[jt],W.hasOwnProperty(jt)&&st!==Je&&(st!=null||Je!=null))if(jt==="style")if(Je){for(Ee in Je)!Je.hasOwnProperty(Ee)||st&&st.hasOwnProperty(Ee)||(P||(P={}),P[Ee]="");for(Ee in st)st.hasOwnProperty(Ee)&&Je[Ee]!==st[Ee]&&(P||(P={}),P[Ee]=st[Ee])}else P||(ue||(ue=[]),ue.push(jt,P)),P=st;else jt==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,Je=Je?Je.__html:void 0,st!=null&&Je!==st&&(ue=ue||[]).push(jt,st)):jt==="children"?typeof st!="string"&&typeof st!="number"||(ue=ue||[]).push(jt,""+st):jt!=="suppressContentEditableWarning"&&jt!=="suppressHydrationWarning"&&(a.hasOwnProperty(jt)?(st!=null&&jt==="onScroll"&&es("scroll",h),ue||Je===st||(ue=[])):(ue=ue||[]).push(jt,st))}P&&(ue=ue||[]).push("style",P);var jt=ue;(x.updateQueue=jt)&&(x.flags|=4)}},Oj=function(h,x,P,W){P!==W&&(x.flags|=4)};function uf(h,x){if(!Tt)switch(h.tailMode){case"hidden":x=h.tail;for(var P=null;x!==null;)x.alternate!==null&&(P=x),x=x.sibling;P===null?h.tail=null:P.sibling=null;break;case"collapsed":P=h.tail;for(var W=null;P!==null;)P.alternate!==null&&(W=P),P=P.sibling;W===null?x||h.tail===null?h.tail=null:h.tail.sibling=null:W.sibling=null}}function ma(h){var x=h.alternate!==null&&h.alternate.child===h.child,P=0,W=0;if(x)for(var se=h.child;se!==null;)P|=se.lanes|se.childLanes,W|=se.subtreeFlags&14680064,W|=se.flags&14680064,se.return=h,se=se.sibling;else for(se=h.child;se!==null;)P|=se.lanes|se.childLanes,W|=se.subtreeFlags,W|=se.flags,se.return=h,se=se.sibling;return h.subtreeFlags|=W,h.childLanes=P,x}function aP(h,x,P){var W=x.pendingProps;switch(mt(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ma(x),null;case 1:return fa(x.type)&&jA(),ma(x),null;case 3:return W=x.stateNode,So(),qn(ha),qn(Ei),of(),W.pendingContext&&(W.context=W.pendingContext,W.pendingContext=null),(h===null||h.child===null)&&(ks(x)?x.flags|=4:h===null||h.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Rt!==null&&(px(Rt),Rt=null))),sx(h,x),ma(x),null;case 5:sf(x);var se=Xo(Fl.current);if(P=x.type,h!==null&&x.stateNode!=null)Ej(h,x,P,W,se),h.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!W){if(x.stateNode===null)throw Error(s(166));return ma(x),null}if(h=Xo(ji.current),ks(x)){W=x.stateNode,P=x.type;var ue=x.memoizedProps;switch(W[No]=x,W[su]=ue,h=(x.mode&1)!==0,P){case"dialog":es("cancel",W),es("close",W);break;case"iframe":case"object":case"embed":es("load",W);break;case"video":case"audio":for(se=0;se<Il.length;se++)es(Il[se],W);break;case"source":es("error",W);break;case"img":case"image":case"link":es("error",W),es("load",W);break;case"details":es("toggle",W);break;case"input":te(W,ue),es("invalid",W);break;case"select":W._wrapperState={wasMultiple:!!ue.multiple},es("invalid",W);break;case"textarea":Be(W,ue),es("invalid",W)}vt(P,ue),se=null;for(var Ee in ue)if(ue.hasOwnProperty(Ee)){var Je=ue[Ee];Ee==="children"?typeof Je=="string"?W.textContent!==Je&&(ue.suppressHydrationWarning!==!0&&wA(W.textContent,Je,h),se=["children",Je]):typeof Je=="number"&&W.textContent!==""+Je&&(ue.suppressHydrationWarning!==!0&&wA(W.textContent,Je,h),se=["children",""+Je]):a.hasOwnProperty(Ee)&&Je!=null&&Ee==="onScroll"&&es("scroll",W)}switch(P){case"input":ge(W),Fe(W,ue,!0);break;case"textarea":ge(W),ve(W);break;case"select":case"option":break;default:typeof ue.onClick=="function"&&(W.onclick=nu)}W=se,x.updateQueue=W,W!==null&&(x.flags|=4)}else{Ee=se.nodeType===9?se:se.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=$e(P)),h==="http://www.w3.org/1999/xhtml"?P==="script"?(h=Ee.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof W.is=="string"?h=Ee.createElement(P,{is:W.is}):(h=Ee.createElement(P),P==="select"&&(Ee=h,W.multiple?Ee.multiple=!0:W.size&&(Ee.size=W.size))):h=Ee.createElementNS(h,P),h[No]=x,h[su]=W,_j(h,x,!1,!1),x.stateNode=h;e:{switch(Ee=tr(P,W),P){case"dialog":es("cancel",h),es("close",h),se=W;break;case"iframe":case"object":case"embed":es("load",h),se=W;break;case"video":case"audio":for(se=0;se<Il.length;se++)es(Il[se],h);se=W;break;case"source":es("error",h),se=W;break;case"img":case"image":case"link":es("error",h),es("load",h),se=W;break;case"details":es("toggle",h),se=W;break;case"input":te(h,W),se=Z(h,W),es("invalid",h);break;case"option":se=W;break;case"select":h._wrapperState={wasMultiple:!!W.multiple},se=q({},W,{value:void 0}),es("invalid",h);break;case"textarea":Be(h,W),se=me(h,W),es("invalid",h);break;default:se=W}vt(P,se),Je=se;for(ue in Je)if(Je.hasOwnProperty(ue)){var st=Je[ue];ue==="style"?dt(h,st):ue==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,st!=null&&Te(h,st)):ue==="children"?typeof st=="string"?(P!=="textarea"||st!=="")&&Ye(h,st):typeof st=="number"&&Ye(h,""+st):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(a.hasOwnProperty(ue)?st!=null&&ue==="onScroll"&&es("scroll",h):st!=null&&j(h,ue,st,Ee))}switch(P){case"input":ge(h),Fe(h,W,!1);break;case"textarea":ge(h),ve(h);break;case"option":W.value!=null&&h.setAttribute("value",""+ae(W.value));break;case"select":h.multiple=!!W.multiple,ue=W.value,ue!=null?ie(h,!!W.multiple,ue,!1):W.defaultValue!=null&&ie(h,!!W.multiple,W.defaultValue,!0);break;default:typeof se.onClick=="function"&&(h.onclick=nu)}switch(P){case"button":case"input":case"select":case"textarea":W=!!W.autoFocus;break e;case"img":W=!0;break e;default:W=!1}}W&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return ma(x),null;case 6:if(h&&x.stateNode!=null)Oj(h,x,h.memoizedProps,W);else{if(typeof W!="string"&&x.stateNode===null)throw Error(s(166));if(P=Xo(Fl.current),Xo(ji.current),ks(x)){if(W=x.stateNode,P=x.memoizedProps,W[No]=x,(ue=W.nodeValue!==P)&&(h=Ct,h!==null))switch(h.tag){case 3:wA(W.nodeValue,P,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&wA(W.nodeValue,P,(h.mode&1)!==0)}ue&&(x.flags|=4)}else W=(P.nodeType===9?P:P.ownerDocument).createTextNode(W),W[No]=x,x.stateNode=W}return ma(x),null;case 13:if(qn(As),W=x.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Tt&&kt!==null&&(x.mode&1)!==0&&(x.flags&128)===0)un(),br(),x.flags|=98560,ue=!1;else if(ue=ks(x),W!==null&&W.dehydrated!==null){if(h===null){if(!ue)throw Error(s(318));if(ue=x.memoizedState,ue=ue!==null?ue.dehydrated:null,!ue)throw Error(s(317));ue[No]=x}else br(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;ma(x),ue=!1}else Rt!==null&&(px(Rt),Rt=null),ue=!0;if(!ue)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=P,x):(W=W!==null,W!==(h!==null&&h.memoizedState!==null)&&W&&(x.child.flags|=8192,(x.mode&1)!==0&&(h===null||(As.current&1)!==0?Ii===0&&(Ii=3):yx())),x.updateQueue!==null&&(x.flags|=4),ma(x),null);case 4:return So(),sx(h,x),h===null&&mc(x.stateNode.containerInfo),ma(x),null;case 10:return bs(x.type._context),ma(x),null;case 17:return fa(x.type)&&jA(),ma(x),null;case 19:if(qn(As),ue=x.memoizedState,ue===null)return ma(x),null;if(W=(x.flags&128)!==0,Ee=ue.rendering,Ee===null)if(W)uf(ue,!1);else{if(Ii!==0||h!==null&&(h.flags&128)!==0)for(h=x.child;h!==null;){if(Ee=so(h),Ee!==null){for(x.flags|=128,uf(ue,!1),W=Ee.updateQueue,W!==null&&(x.updateQueue=W,x.flags|=4),x.subtreeFlags=0,W=P,P=x.child;P!==null;)ue=P,h=W,ue.flags&=14680066,Ee=ue.alternate,Ee===null?(ue.childLanes=0,ue.lanes=h,ue.child=null,ue.subtreeFlags=0,ue.memoizedProps=null,ue.memoizedState=null,ue.updateQueue=null,ue.dependencies=null,ue.stateNode=null):(ue.childLanes=Ee.childLanes,ue.lanes=Ee.lanes,ue.child=Ee.child,ue.subtreeFlags=0,ue.deletions=null,ue.memoizedProps=Ee.memoizedProps,ue.memoizedState=Ee.memoizedState,ue.updateQueue=Ee.updateQueue,ue.type=Ee.type,h=Ee.dependencies,ue.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),P=P.sibling;return Xn(As,As.current&1|2),x.child}h=h.sibling}ue.tail!==null&&Vt()>UA&&(x.flags|=128,W=!0,uf(ue,!1),x.lanes=4194304)}else{if(!W)if(h=so(Ee),h!==null){if(x.flags|=128,W=!0,P=h.updateQueue,P!==null&&(x.updateQueue=P,x.flags|=4),uf(ue,!0),ue.tail===null&&ue.tailMode==="hidden"&&!Ee.alternate&&!Tt)return ma(x),null}else 2*Vt()-ue.renderingStartTime>UA&&P!==1073741824&&(x.flags|=128,W=!0,uf(ue,!1),x.lanes=4194304);ue.isBackwards?(Ee.sibling=x.child,x.child=Ee):(P=ue.last,P!==null?P.sibling=Ee:x.child=Ee,ue.last=Ee)}return ue.tail!==null?(x=ue.tail,ue.rendering=x,ue.tail=x.sibling,ue.renderingStartTime=Vt(),x.sibling=null,P=As.current,Xn(As,W?P&1|2:P&1),x):(ma(x),null);case 22:case 23:return gx(),W=x.memoizedState!==null,h!==null&&h.memoizedState!==null!==W&&(x.flags|=8192),W&&(x.mode&1)!==0?(oo&1073741824)!==0&&(ma(x),x.subtreeFlags&6&&(x.flags|=8192)):ma(x),null;case 24:return null;case 25:return null}throw Error(s(156,x.tag))}function oP(h,x){switch(mt(x),x.tag){case 1:return fa(x.type)&&jA(),h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 3:return So(),qn(ha),qn(Ei),of(),h=x.flags,(h&65536)!==0&&(h&128)===0?(x.flags=h&-65537|128,x):null;case 5:return sf(x),null;case 13:if(qn(As),h=x.memoizedState,h!==null&&h.dehydrated!==null){if(x.alternate===null)throw Error(s(340));br()}return h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 19:return qn(As),null;case 4:return So(),null;case 10:return bs(x.type._context),null;case 22:case 23:return gx(),null;case 24:return null;default:return null}}var gm=!1,ga=!1,lP=typeof WeakSet=="function"?WeakSet:Set,wr=null;function TA(h,x){var P=h.ref;if(P!==null)if(typeof P=="function")try{P(null)}catch(W){Xs(h,x,W)}else P.current=null}function ix(h,x,P){try{P()}catch(W){Xs(h,x,W)}}var Ij=!1;function cP(h,x){if(xd=re,h=Vh(),mA(h)){if("selectionStart"in h)var P={start:h.selectionStart,end:h.selectionEnd};else e:{P=(P=h.ownerDocument)&&P.defaultView||window;var W=P.getSelection&&P.getSelection();if(W&&W.rangeCount!==0){P=W.anchorNode;var se=W.anchorOffset,ue=W.focusNode;W=W.focusOffset;try{P.nodeType,ue.nodeType}catch{P=null;break e}var Ee=0,Je=-1,st=-1,jt=0,Xt=0,er=h,qt=null;t:for(;;){for(var mr;er!==P||se!==0&&er.nodeType!==3||(Je=Ee+se),er!==ue||W!==0&&er.nodeType!==3||(st=Ee+W),er.nodeType===3&&(Ee+=er.nodeValue.length),(mr=er.firstChild)!==null;)qt=er,er=mr;for(;;){if(er===h)break t;if(qt===P&&++jt===se&&(Je=Ee),qt===ue&&++Xt===W&&(st=Ee),(mr=er.nextSibling)!==null)break;er=qt,qt=er.parentNode}er=mr}P=Je===-1||st===-1?null:{start:Je,end:st}}else P=null}P=P||{start:0,end:0}}else P=null;for(yc={focusedElem:h,selectionRange:P},re=!1,wr=x;wr!==null;)if(x=wr,h=x.child,(x.subtreeFlags&1028)!==0&&h!==null)h.return=x,wr=h;else for(;wr!==null;){x=wr;try{var Nr=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Nr!==null){var _r=Nr.memoizedProps,ui=Nr.memoizedState,pt=x.stateNode,lt=pt.getSnapshotBeforeUpdate(x.elementType===x.type?_r:el(x.type,_r),ui);pt.__reactInternalSnapshotBeforeUpdate=lt}break;case 3:var yt=x.stateNode.containerInfo;yt.nodeType===1?yt.textContent="":yt.nodeType===9&&yt.documentElement&&yt.removeChild(yt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(sr){Xs(x,x.return,sr)}if(h=x.sibling,h!==null){h.return=x.return,wr=h;break}wr=x.return}return Nr=Ij,Ij=!1,Nr}function df(h,x,P){var W=x.updateQueue;if(W=W!==null?W.lastEffect:null,W!==null){var se=W=W.next;do{if((se.tag&h)===h){var ue=se.destroy;se.destroy=void 0,ue!==void 0&&ix(x,P,ue)}se=se.next}while(se!==W)}}function ym(h,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var P=x=x.next;do{if((P.tag&h)===h){var W=P.create;P.destroy=W()}P=P.next}while(P!==x)}}function ax(h){var x=h.ref;if(x!==null){var P=h.stateNode;switch(h.tag){case 5:h=P;break;default:h=P}typeof x=="function"?x(h):x.current=h}}function Pj(h){var x=h.alternate;x!==null&&(h.alternate=null,Pj(x)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(x=h.stateNode,x!==null&&(delete x[No],delete x[su],delete x[Aa],delete x[Vy],delete x[zy])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Tj(h){return h.tag===5||h.tag===3||h.tag===4}function Fj(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Tj(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function ox(h,x,P){var W=h.tag;if(W===5||W===6)h=h.stateNode,x?P.nodeType===8?P.parentNode.insertBefore(h,x):P.insertBefore(h,x):(P.nodeType===8?(x=P.parentNode,x.insertBefore(h,P)):(x=P,x.appendChild(h)),P=P._reactRootContainer,P!=null||x.onclick!==null||(x.onclick=nu));else if(W!==4&&(h=h.child,h!==null))for(ox(h,x,P),h=h.sibling;h!==null;)ox(h,x,P),h=h.sibling}function lx(h,x,P){var W=h.tag;if(W===5||W===6)h=h.stateNode,x?P.insertBefore(h,x):P.appendChild(h);else if(W!==4&&(h=h.child,h!==null))for(lx(h,x,P),h=h.sibling;h!==null;)lx(h,x,P),h=h.sibling}var ea=null,tl=!1;function du(h,x,P){for(P=P.child;P!==null;)Uj(h,x,P),P=P.sibling}function Uj(h,x,P){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(Zr,P)}catch{}switch(P.tag){case 5:ga||TA(P,x);case 6:var W=ea,se=tl;ea=null,du(h,x,P),ea=W,tl=se,ea!==null&&(tl?(h=ea,P=P.stateNode,h.nodeType===8?h.parentNode.removeChild(P):h.removeChild(P)):ea.removeChild(P.stateNode));break;case 18:ea!==null&&(tl?(h=ea,P=P.stateNode,h.nodeType===8?tf(h.parentNode,P):h.nodeType===1&&tf(h,P),ii(h)):tf(ea,P.stateNode));break;case 4:W=ea,se=tl,ea=P.stateNode.containerInfo,tl=!0,du(h,x,P),ea=W,tl=se;break;case 0:case 11:case 14:case 15:if(!ga&&(W=P.updateQueue,W!==null&&(W=W.lastEffect,W!==null))){se=W=W.next;do{var ue=se,Ee=ue.destroy;ue=ue.tag,Ee!==void 0&&((ue&2)!==0||(ue&4)!==0)&&ix(P,x,Ee),se=se.next}while(se!==W)}du(h,x,P);break;case 1:if(!ga&&(TA(P,x),W=P.stateNode,typeof W.componentWillUnmount=="function"))try{W.props=P.memoizedProps,W.state=P.memoizedState,W.componentWillUnmount()}catch(Je){Xs(P,x,Je)}du(h,x,P);break;case 21:du(h,x,P);break;case 22:P.mode&1?(ga=(W=ga)||P.memoizedState!==null,du(h,x,P),ga=W):du(h,x,P);break;default:du(h,x,P)}}function Lj(h){var x=h.updateQueue;if(x!==null){h.updateQueue=null;var P=h.stateNode;P===null&&(P=h.stateNode=new lP),x.forEach(function(W){var se=yP.bind(null,h,W);P.has(W)||(P.add(W),W.then(se,se))})}}function rl(h,x){var P=x.deletions;if(P!==null)for(var W=0;W<P.length;W++){var se=P[W];try{var ue=h,Ee=x,Je=Ee;e:for(;Je!==null;){switch(Je.tag){case 5:ea=Je.stateNode,tl=!1;break e;case 3:ea=Je.stateNode.containerInfo,tl=!0;break e;case 4:ea=Je.stateNode.containerInfo,tl=!0;break e}Je=Je.return}if(ea===null)throw Error(s(160));Uj(ue,Ee,se),ea=null,tl=!1;var st=se.alternate;st!==null&&(st.return=null),se.return=null}catch(jt){Xs(se,x,jt)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)Dj(x,h),x=x.sibling}function Dj(h,x){var P=h.alternate,W=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(rl(x,h),Ll(h),W&4){try{df(3,h,h.return),ym(3,h)}catch(_r){Xs(h,h.return,_r)}try{df(5,h,h.return)}catch(_r){Xs(h,h.return,_r)}}break;case 1:rl(x,h),Ll(h),W&512&&P!==null&&TA(P,P.return);break;case 5:if(rl(x,h),Ll(h),W&512&&P!==null&&TA(P,P.return),h.flags&32){var se=h.stateNode;try{Ye(se,"")}catch(_r){Xs(h,h.return,_r)}}if(W&4&&(se=h.stateNode,se!=null)){var ue=h.memoizedProps,Ee=P!==null?P.memoizedProps:ue,Je=h.type,st=h.updateQueue;if(h.updateQueue=null,st!==null)try{Je==="input"&&ue.type==="radio"&&ue.name!=null&&fe(se,ue),tr(Je,Ee);var jt=tr(Je,ue);for(Ee=0;Ee<st.length;Ee+=2){var Xt=st[Ee],er=st[Ee+1];Xt==="style"?dt(se,er):Xt==="dangerouslySetInnerHTML"?Te(se,er):Xt==="children"?Ye(se,er):j(se,Xt,er,jt)}switch(Je){case"input":we(se,ue);break;case"textarea":Le(se,ue);break;case"select":var qt=se._wrapperState.wasMultiple;se._wrapperState.wasMultiple=!!ue.multiple;var mr=ue.value;mr!=null?ie(se,!!ue.multiple,mr,!1):qt!==!!ue.multiple&&(ue.defaultValue!=null?ie(se,!!ue.multiple,ue.defaultValue,!0):ie(se,!!ue.multiple,ue.multiple?[]:"",!1))}se[su]=ue}catch(_r){Xs(h,h.return,_r)}}break;case 6:if(rl(x,h),Ll(h),W&4){if(h.stateNode===null)throw Error(s(162));se=h.stateNode,ue=h.memoizedProps;try{se.nodeValue=ue}catch(_r){Xs(h,h.return,_r)}}break;case 3:if(rl(x,h),Ll(h),W&4&&P!==null&&P.memoizedState.isDehydrated)try{ii(x.containerInfo)}catch(_r){Xs(h,h.return,_r)}break;case 4:rl(x,h),Ll(h);break;case 13:rl(x,h),Ll(h),se=h.child,se.flags&8192&&(ue=se.memoizedState!==null,se.stateNode.isHidden=ue,!ue||se.alternate!==null&&se.alternate.memoizedState!==null||(dx=Vt())),W&4&&Lj(h);break;case 22:if(Xt=P!==null&&P.memoizedState!==null,h.mode&1?(ga=(jt=ga)||Xt,rl(x,h),ga=jt):rl(x,h),Ll(h),W&8192){if(jt=h.memoizedState!==null,(h.stateNode.isHidden=jt)&&!Xt&&(h.mode&1)!==0)for(wr=h,Xt=h.child;Xt!==null;){for(er=wr=Xt;wr!==null;){switch(qt=wr,mr=qt.child,qt.tag){case 0:case 11:case 14:case 15:df(4,qt,qt.return);break;case 1:TA(qt,qt.return);var Nr=qt.stateNode;if(typeof Nr.componentWillUnmount=="function"){W=qt,P=qt.return;try{x=W,Nr.props=x.memoizedProps,Nr.state=x.memoizedState,Nr.componentWillUnmount()}catch(_r){Xs(W,P,_r)}}break;case 5:TA(qt,qt.return);break;case 22:if(qt.memoizedState!==null){Qj(er);continue}}mr!==null?(mr.return=qt,wr=mr):Qj(er)}Xt=Xt.sibling}e:for(Xt=null,er=h;;){if(er.tag===5){if(Xt===null){Xt=er;try{se=er.stateNode,jt?(ue=se.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none"):(Je=er.stateNode,st=er.memoizedProps.style,Ee=st!=null&&st.hasOwnProperty("display")?st.display:null,Je.style.display=It("display",Ee))}catch(_r){Xs(h,h.return,_r)}}}else if(er.tag===6){if(Xt===null)try{er.stateNode.nodeValue=jt?"":er.memoizedProps}catch(_r){Xs(h,h.return,_r)}}else if((er.tag!==22&&er.tag!==23||er.memoizedState===null||er===h)&&er.child!==null){er.child.return=er,er=er.child;continue}if(er===h)break e;for(;er.sibling===null;){if(er.return===null||er.return===h)break e;Xt===er&&(Xt=null),er=er.return}Xt===er&&(Xt=null),er.sibling.return=er.return,er=er.sibling}}break;case 19:rl(x,h),Ll(h),W&4&&Lj(h);break;case 21:break;default:rl(x,h),Ll(h)}}function Ll(h){var x=h.flags;if(x&2){try{e:{for(var P=h.return;P!==null;){if(Tj(P)){var W=P;break e}P=P.return}throw Error(s(160))}switch(W.tag){case 5:var se=W.stateNode;W.flags&32&&(Ye(se,""),W.flags&=-33);var ue=Fj(h);lx(h,ue,se);break;case 3:case 4:var Ee=W.stateNode.containerInfo,Je=Fj(h);ox(h,Je,Ee);break;default:throw Error(s(161))}}catch(st){Xs(h,h.return,st)}h.flags&=-3}x&4096&&(h.flags&=-4097)}function uP(h,x,P){wr=h,Mj(h)}function Mj(h,x,P){for(var W=(h.mode&1)!==0;wr!==null;){var se=wr,ue=se.child;if(se.tag===22&&W){var Ee=se.memoizedState!==null||gm;if(!Ee){var Je=se.alternate,st=Je!==null&&Je.memoizedState!==null||ga;Je=gm;var jt=ga;if(gm=Ee,(ga=st)&&!jt)for(wr=se;wr!==null;)Ee=wr,st=Ee.child,Ee.tag===22&&Ee.memoizedState!==null?$j(se):st!==null?(st.return=Ee,wr=st):$j(se);for(;ue!==null;)wr=ue,Mj(ue),ue=ue.sibling;wr=se,gm=Je,ga=jt}Rj(h)}else(se.subtreeFlags&8772)!==0&&ue!==null?(ue.return=se,wr=ue):Rj(h)}}function Rj(h){for(;wr!==null;){var x=wr;if((x.flags&8772)!==0){var P=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:ga||ym(5,x);break;case 1:var W=x.stateNode;if(x.flags&4&&!ga)if(P===null)W.componentDidMount();else{var se=x.elementType===x.type?P.memoizedProps:el(x.type,P.memoizedProps);W.componentDidUpdate(se,P.memoizedState,W.__reactInternalSnapshotBeforeUpdate)}var ue=x.updateQueue;ue!==null&&Va(x,ue,W);break;case 3:var Ee=x.updateQueue;if(Ee!==null){if(P=null,x.child!==null)switch(x.child.tag){case 5:P=x.child.stateNode;break;case 1:P=x.child.stateNode}Va(x,Ee,P)}break;case 5:var Je=x.stateNode;if(P===null&&x.flags&4){P=Je;var st=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":st.autoFocus&&P.focus();break;case"img":st.src&&(P.src=st.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var jt=x.alternate;if(jt!==null){var Xt=jt.memoizedState;if(Xt!==null){var er=Xt.dehydrated;er!==null&&ii(er)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}ga||x.flags&512&&ax(x)}catch(qt){Xs(x,x.return,qt)}}if(x===h){wr=null;break}if(P=x.sibling,P!==null){P.return=x.return,wr=P;break}wr=x.return}}function Qj(h){for(;wr!==null;){var x=wr;if(x===h){wr=null;break}var P=x.sibling;if(P!==null){P.return=x.return,wr=P;break}wr=x.return}}function $j(h){for(;wr!==null;){var x=wr;try{switch(x.tag){case 0:case 11:case 15:var P=x.return;try{ym(4,x)}catch(st){Xs(x,P,st)}break;case 1:var W=x.stateNode;if(typeof W.componentDidMount=="function"){var se=x.return;try{W.componentDidMount()}catch(st){Xs(x,se,st)}}var ue=x.return;try{ax(x)}catch(st){Xs(x,ue,st)}break;case 5:var Ee=x.return;try{ax(x)}catch(st){Xs(x,Ee,st)}}}catch(st){Xs(x,x.return,st)}if(x===h){wr=null;break}var Je=x.sibling;if(Je!==null){Je.return=x.return,wr=Je;break}wr=x.return}}var dP=Math.ceil,xm=C.ReactCurrentDispatcher,cx=C.ReactCurrentOwner,ko=C.ReactCurrentBatchConfig,$n=0,Ri=null,Ni=null,ta=0,oo=0,FA=ro(0),Ii=0,Af=null,Sd=0,bm=0,ux=0,hf=null,Ka=null,dx=0,UA=1/0,Nc=null,vm=!1,Ax=null,Au=null,wm=!1,hu=null,jm=0,ff=0,hx=null,Nm=-1,Sm=0;function Ea(){return($n&6)!==0?Vt():Nm!==-1?Nm:Nm=Vt()}function fu(h){return(h.mode&1)===0?1:($n&2)!==0&&ta!==0?ta&-ta:Rs.transition!==null?(Sm===0&&(Sm=xi()),Sm):(h=Ur,h!==0||(h=window.event,h=h===void 0?16:_t(h.type)),h)}function nl(h,x,P,W){if(50<ff)throw ff=0,hx=null,Error(s(185));Ls(h,P,W),(($n&2)===0||h!==Ri)&&(h===Ri&&(($n&2)===0&&(bm|=P),Ii===4&&pu(h,ta)),Ga(h,W),P===1&&$n===0&&(x.mode&1)===0&&(UA=Vt()+500,vd&&pe()))}function Ga(h,x){var P=h.callbackNode;fn(h,x);var W=Dr(h,h===Ri?ta:0);if(W===0)P!==null&&Ut(P),h.callbackNode=null,h.callbackPriority=0;else if(x=W&-W,h.callbackPriority!==x){if(P!=null&&Ut(P),x===1)h.tag===0?le(Vj.bind(null,h)):J(Vj.bind(null,h)),$y(function(){($n&6)===0&&pe()}),P=null;else{switch(Pn(W)){case 1:P=cr;break;case 4:P=Fr;break;case 16:P=yn;break;case 536870912:P=xn;break;default:P=yn}P=Jj(P,Hj.bind(null,h))}h.callbackPriority=x,h.callbackNode=P}}function Hj(h,x){if(Nm=-1,Sm=0,($n&6)!==0)throw Error(s(327));var P=h.callbackNode;if(LA()&&h.callbackNode!==P)return null;var W=Dr(h,h===Ri?ta:0);if(W===0)return null;if((W&30)!==0||(W&h.expiredLanes)!==0||x)x=Cm(h,W);else{x=W;var se=$n;$n|=2;var ue=Kj();(Ri!==h||ta!==x)&&(Nc=null,UA=Vt()+500,Bd(h,x));do try{fP();break}catch(Je){zj(h,Je)}while(!0);Rn(),xm.current=ue,$n=se,Ni!==null?x=0:(Ri=null,ta=0,x=Ii)}if(x!==0){if(x===2&&(se=Dn(h),se!==0&&(W=se,x=fx(h,se))),x===1)throw P=Af,Bd(h,0),pu(h,W),Ga(h,Vt()),P;if(x===6)pu(h,W);else{if(se=h.current.alternate,(W&30)===0&&!AP(se)&&(x=Cm(h,W),x===2&&(ue=Dn(h),ue!==0&&(W=ue,x=fx(h,ue))),x===1))throw P=Af,Bd(h,0),pu(h,W),Ga(h,Vt()),P;switch(h.finishedWork=se,h.finishedLanes=W,x){case 0:case 1:throw Error(s(345));case 2:kd(h,Ka,Nc);break;case 3:if(pu(h,W),(W&130023424)===W&&(x=dx+500-Vt(),10<x)){if(Dr(h,0)!==0)break;if(se=h.suspendedLanes,(se&W)!==W){Ea(),h.pingedLanes|=h.suspendedLanes&se;break}h.timeoutHandle=ef(kd.bind(null,h,Ka,Nc),x);break}kd(h,Ka,Nc);break;case 4:if(pu(h,W),(W&4194240)===W)break;for(x=h.eventTimes,se=-1;0<W;){var Ee=31-hn(W);ue=1<<Ee,Ee=x[Ee],Ee>se&&(se=Ee),W&=~ue}if(W=se,W=Vt()-W,W=(120>W?120:480>W?480:1080>W?1080:1920>W?1920:3e3>W?3e3:4320>W?4320:1960*dP(W/1960))-W,10<W){h.timeoutHandle=ef(kd.bind(null,h,Ka,Nc),W);break}kd(h,Ka,Nc);break;case 5:kd(h,Ka,Nc);break;default:throw Error(s(329))}}}return Ga(h,Vt()),h.callbackNode===P?Hj.bind(null,h):null}function fx(h,x){var P=hf;return h.current.memoizedState.isDehydrated&&(Bd(h,x).flags|=256),h=Cm(h,x),h!==2&&(x=Ka,Ka=P,x!==null&&px(x)),h}function px(h){Ka===null?Ka=h:Ka.push.apply(Ka,h)}function AP(h){for(var x=h;;){if(x.flags&16384){var P=x.updateQueue;if(P!==null&&(P=P.stores,P!==null))for(var W=0;W<P.length;W++){var se=P[W],ue=se.getSnapshot;se=se.value;try{if(!oi(ue(),se))return!1}catch{return!1}}}if(P=x.child,x.subtreeFlags&16384&&P!==null)P.return=x,x=P;else{if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function pu(h,x){for(x&=~ux,x&=~bm,h.suspendedLanes|=x,h.pingedLanes&=~x,h=h.expirationTimes;0<x;){var P=31-hn(x),W=1<<P;h[P]=-1,x&=~W}}function Vj(h){if(($n&6)!==0)throw Error(s(327));LA();var x=Dr(h,0);if((x&1)===0)return Ga(h,Vt()),null;var P=Cm(h,x);if(h.tag!==0&&P===2){var W=Dn(h);W!==0&&(x=W,P=fx(h,W))}if(P===1)throw P=Af,Bd(h,0),pu(h,x),Ga(h,Vt()),P;if(P===6)throw Error(s(345));return h.finishedWork=h.current.alternate,h.finishedLanes=x,kd(h,Ka,Nc),Ga(h,Vt()),null}function mx(h,x){var P=$n;$n|=1;try{return h(x)}finally{$n=P,$n===0&&(UA=Vt()+500,vd&&pe())}}function Cd(h){hu!==null&&hu.tag===0&&($n&6)===0&&LA();var x=$n;$n|=1;var P=ko.transition,W=Ur;try{if(ko.transition=null,Ur=1,h)return h()}finally{Ur=W,ko.transition=P,$n=x,($n&6)===0&&pe()}}function gx(){oo=FA.current,qn(FA)}function Bd(h,x){h.finishedWork=null,h.finishedLanes=0;var P=h.timeoutHandle;if(P!==-1&&(h.timeoutHandle=-1,sm(P)),Ni!==null)for(P=Ni.return;P!==null;){var W=P;switch(mt(W),W.tag){case 1:W=W.type.childContextTypes,W!=null&&jA();break;case 3:So(),qn(ha),qn(Ei),of();break;case 5:sf(W);break;case 4:So();break;case 13:qn(As);break;case 19:qn(As);break;case 10:bs(W.type._context);break;case 22:case 23:gx()}P=P.return}if(Ri=h,Ni=h=mu(h.current,null),ta=oo=x,Ii=0,Af=null,ux=bm=Sd=0,Ka=hf=null,ts!==null){for(x=0;x<ts.length;x++)if(P=ts[x],W=P.interleaved,W!==null){P.interleaved=null;var se=W.next,ue=P.pending;if(ue!==null){var Ee=ue.next;ue.next=se,W.next=Ee}P.pending=W}ts=null}return h}function zj(h,x){do{var P=Ni;try{if(Rn(),NA.current=hm,lu){for(var W=vs.memoizedState;W!==null;){var se=W.queue;se!==null&&(se.pending=null),W=W.next}lu=!1}if(Co=0,Vs=Ys=vs=null,Jo=!1,cu=0,cx.current=null,P===null||P.return===null){Ii=1,Af=x,Ni=null;break}e:{var ue=h,Ee=P.return,Je=P,st=x;if(x=ta,Je.flags|=32768,st!==null&&typeof st=="object"&&typeof st.then=="function"){var jt=st,Xt=Je,er=Xt.tag;if((Xt.mode&1)===0&&(er===0||er===11||er===15)){var qt=Xt.alternate;qt?(Xt.updateQueue=qt.updateQueue,Xt.memoizedState=qt.memoizedState,Xt.lanes=qt.lanes):(Xt.updateQueue=null,Xt.memoizedState=null)}var mr=mj(Ee);if(mr!==null){mr.flags&=-257,gj(mr,Ee,Je,ue,x),mr.mode&1&&pj(ue,jt,x),x=mr,st=jt;var Nr=x.updateQueue;if(Nr===null){var _r=new Set;_r.add(st),x.updateQueue=_r}else Nr.add(st);break e}else{if((x&1)===0){pj(ue,jt,x),yx();break e}st=Error(s(426))}}else if(Tt&&Je.mode&1){var ui=mj(Ee);if(ui!==null){(ui.flags&65536)===0&&(ui.flags|=256),gj(ui,Ee,Je,ue,x),ar(PA(st,Je));break e}}ue=st=PA(st,Je),Ii!==4&&(Ii=2),hf===null?hf=[ue]:hf.push(ue),ue=Ee;do{switch(ue.tag){case 3:ue.flags|=65536,x&=-x,ue.lanes|=x;var pt=hj(ue,st,x);ns(ue,pt);break e;case 1:Je=st;var lt=ue.type,yt=ue.stateNode;if((ue.flags&128)===0&&(typeof lt.getDerivedStateFromError=="function"||yt!==null&&typeof yt.componentDidCatch=="function"&&(Au===null||!Au.has(yt)))){ue.flags|=65536,x&=-x,ue.lanes|=x;var sr=fj(ue,Je,x);ns(ue,sr);break e}}ue=ue.return}while(ue!==null)}Wj(P)}catch(Ir){x=Ir,Ni===P&&P!==null&&(Ni=P=P.return);continue}break}while(!0)}function Kj(){var h=xm.current;return xm.current=hm,h===null?hm:h}function yx(){(Ii===0||Ii===3||Ii===2)&&(Ii=4),Ri===null||(Sd&268435455)===0&&(bm&268435455)===0||pu(Ri,ta)}function Cm(h,x){var P=$n;$n|=2;var W=Kj();(Ri!==h||ta!==x)&&(Nc=null,Bd(h,x));do try{hP();break}catch(se){zj(h,se)}while(!0);if(Rn(),$n=P,xm.current=W,Ni!==null)throw Error(s(261));return Ri=null,ta=0,Ii}function hP(){for(;Ni!==null;)Gj(Ni)}function fP(){for(;Ni!==null&&!$t();)Gj(Ni)}function Gj(h){var x=Xj(h.alternate,h,oo);h.memoizedProps=h.pendingProps,x===null?Wj(h):Ni=x,cx.current=null}function Wj(h){var x=h;do{var P=x.alternate;if(h=x.return,(x.flags&32768)===0){if(P=aP(P,x,oo),P!==null){Ni=P;return}}else{if(P=oP(P,x),P!==null){P.flags&=32767,Ni=P;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Ii=6,Ni=null;return}}if(x=x.sibling,x!==null){Ni=x;return}Ni=x=h}while(x!==null);Ii===0&&(Ii=5)}function kd(h,x,P){var W=Ur,se=ko.transition;try{ko.transition=null,Ur=1,pP(h,x,P,W)}finally{ko.transition=se,Ur=W}return null}function pP(h,x,P,W){do LA();while(hu!==null);if(($n&6)!==0)throw Error(s(327));P=h.finishedWork;var se=h.finishedLanes;if(P===null)return null;if(h.finishedWork=null,h.finishedLanes=0,P===h.current)throw Error(s(177));h.callbackNode=null,h.callbackPriority=0;var ue=P.lanes|P.childLanes;if(ds(h,ue),h===Ri&&(Ni=Ri=null,ta=0),(P.subtreeFlags&2064)===0&&(P.flags&2064)===0||wm||(wm=!0,Jj(yn,function(){return LA(),null})),ue=(P.flags&15990)!==0,(P.subtreeFlags&15990)!==0||ue){ue=ko.transition,ko.transition=null;var Ee=Ur;Ur=1;var Je=$n;$n|=4,cx.current=null,cP(h,P),Dj(P,h),Zp(yc),re=!!xd,yc=xd=null,h.current=P,uP(P),Yt(),$n=Je,Ur=Ee,ko.transition=ue}else h.current=P;if(wm&&(wm=!1,hu=h,jm=se),ue=h.pendingLanes,ue===0&&(Au=null),Hr(P.stateNode),Ga(h,Vt()),x!==null)for(W=h.onRecoverableError,P=0;P<x.length;P++)se=x[P],W(se.value,{componentStack:se.stack,digest:se.digest});if(vm)throw vm=!1,h=Ax,Ax=null,h;return(jm&1)!==0&&h.tag!==0&&LA(),ue=h.pendingLanes,(ue&1)!==0?h===hx?ff++:(ff=0,hx=h):ff=0,pe(),null}function LA(){if(hu!==null){var h=Pn(jm),x=ko.transition,P=Ur;try{if(ko.transition=null,Ur=16>h?16:h,hu===null)var W=!1;else{if(h=hu,hu=null,jm=0,($n&6)!==0)throw Error(s(331));var se=$n;for($n|=4,wr=h.current;wr!==null;){var ue=wr,Ee=ue.child;if((wr.flags&16)!==0){var Je=ue.deletions;if(Je!==null){for(var st=0;st<Je.length;st++){var jt=Je[st];for(wr=jt;wr!==null;){var Xt=wr;switch(Xt.tag){case 0:case 11:case 15:df(8,Xt,ue)}var er=Xt.child;if(er!==null)er.return=Xt,wr=er;else for(;wr!==null;){Xt=wr;var qt=Xt.sibling,mr=Xt.return;if(Pj(Xt),Xt===jt){wr=null;break}if(qt!==null){qt.return=mr,wr=qt;break}wr=mr}}}var Nr=ue.alternate;if(Nr!==null){var _r=Nr.child;if(_r!==null){Nr.child=null;do{var ui=_r.sibling;_r.sibling=null,_r=ui}while(_r!==null)}}wr=ue}}if((ue.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=ue,wr=Ee;else e:for(;wr!==null;){if(ue=wr,(ue.flags&2048)!==0)switch(ue.tag){case 0:case 11:case 15:df(9,ue,ue.return)}var pt=ue.sibling;if(pt!==null){pt.return=ue.return,wr=pt;break e}wr=ue.return}}var lt=h.current;for(wr=lt;wr!==null;){Ee=wr;var yt=Ee.child;if((Ee.subtreeFlags&2064)!==0&&yt!==null)yt.return=Ee,wr=yt;else e:for(Ee=lt;wr!==null;){if(Je=wr,(Je.flags&2048)!==0)try{switch(Je.tag){case 0:case 11:case 15:ym(9,Je)}}catch(Ir){Xs(Je,Je.return,Ir)}if(Je===Ee){wr=null;break e}var sr=Je.sibling;if(sr!==null){sr.return=Je.return,wr=sr;break e}wr=Je.return}}if($n=se,pe(),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(Zr,h)}catch{}W=!0}return W}finally{Ur=P,ko.transition=x}}return!1}function qj(h,x,P){x=PA(P,x),x=hj(h,x,1),h=$s(h,x,1),x=Ea(),h!==null&&(Ls(h,1,x),Ga(h,x))}function Xs(h,x,P){if(h.tag===3)qj(h,h,P);else for(;x!==null;){if(x.tag===3){qj(x,h,P);break}else if(x.tag===1){var W=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof W.componentDidCatch=="function"&&(Au===null||!Au.has(W))){h=PA(P,h),h=fj(x,h,1),x=$s(x,h,1),h=Ea(),x!==null&&(Ls(x,1,h),Ga(x,h));break}}x=x.return}}function mP(h,x,P){var W=h.pingCache;W!==null&&W.delete(x),x=Ea(),h.pingedLanes|=h.suspendedLanes&P,Ri===h&&(ta&P)===P&&(Ii===4||Ii===3&&(ta&130023424)===ta&&500>Vt()-dx?Bd(h,0):ux|=P),Ga(h,x)}function Yj(h,x){x===0&&((h.mode&1)===0?x=1:(x=Er,Er<<=1,(Er&130023424)===0&&(Er=4194304)));var P=Ea();h=rs(h,x),h!==null&&(Ls(h,x,P),Ga(h,P))}function gP(h){var x=h.memoizedState,P=0;x!==null&&(P=x.retryLane),Yj(h,P)}function yP(h,x){var P=0;switch(h.tag){case 13:var W=h.stateNode,se=h.memoizedState;se!==null&&(P=se.retryLane);break;case 19:W=h.stateNode;break;default:throw Error(s(314))}W!==null&&W.delete(x),Yj(h,P)}var Xj;Xj=function(h,x,P){if(h!==null)if(h.memoizedProps!==x.pendingProps||ha.current)za=!0;else{if((h.lanes&P)===0&&(x.flags&128)===0)return za=!1,iP(h,x,P);za=(h.flags&131072)!==0}else za=!1,Tt&&(x.flags&1048576)!==0&&At(x,Ue,x.index);switch(x.lanes=0,x.tag){case 2:var W=x.type;mm(h,x),h=x.pendingProps;var se=au(x,Ei.current);_s(x,P),se=wd(null,x,W,h,se,P);var ue=Bo();return x.flags|=1,typeof se=="object"&&se!==null&&typeof se.render=="function"&&se.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,fa(W)?(ue=!0,vc(x)):ue=!1,x.memoizedState=se.state!==null&&se.state!==void 0?se.state:null,Oi(x),se.updater=fm,x.stateNode=se,se._reactInternals=x,qy(x,W,h,P),x=Zy(null,x,W,!0,ue,P)):(x.tag=0,Tt&&ue&&Ot(x),_a(null,x,se,P),x=x.child),x;case 16:W=x.elementType;e:{switch(mm(h,x),h=x.pendingProps,se=W._init,W=se(W._payload),x.type=W,se=x.tag=bP(W),h=el(W,h),se){case 0:x=Jy(null,x,W,h,P);break e;case 1:x=jj(null,x,W,h,P);break e;case 11:x=yj(null,x,W,h,P);break e;case 14:x=xj(null,x,W,el(W.type,h),P);break e}throw Error(s(306,W,""))}return x;case 0:return W=x.type,se=x.pendingProps,se=x.elementType===W?se:el(W,se),Jy(h,x,W,se,P);case 1:return W=x.type,se=x.pendingProps,se=x.elementType===W?se:el(W,se),jj(h,x,W,se,P);case 3:e:{if(Nj(x),h===null)throw Error(s(387));W=x.pendingProps,ue=x.memoizedState,se=ue.element,pa(h,x),Mi(x,W,null,P);var Ee=x.memoizedState;if(W=Ee.element,ue.isDehydrated)if(ue={element:W,isDehydrated:!1,cache:Ee.cache,pendingSuspenseBoundaries:Ee.pendingSuspenseBoundaries,transitions:Ee.transitions},x.updateQueue.baseState=ue,x.memoizedState=ue,x.flags&256){se=PA(Error(s(423)),x),x=Sj(h,x,W,P,se);break e}else if(W!==se){se=PA(Error(s(424)),x),x=Sj(h,x,W,P,se);break e}else for(kt=Zi(x.stateNode.containerInfo.firstChild),Ct=x,Tt=!0,Rt=null,P=Ns(x,null,W,P),x.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if(br(),W===se){x=jc(h,x,P);break e}_a(h,x,W,P)}x=x.child}return x;case 5:return lm(x),h===null&&jr(x),W=x.type,se=x.pendingProps,ue=h!==null?h.memoizedProps:null,Ee=se.children,Zh(W,se)?Ee=null:ue!==null&&Zh(W,ue)&&(x.flags|=32),wj(h,x),_a(h,x,Ee,P),x.child;case 6:return h===null&&jr(x),null;case 13:return Cj(h,x,P);case 4:return ou(x,x.stateNode.containerInfo),W=x.pendingProps,h===null?x.child=Ws(x,null,W,P):_a(h,x,W,P),x.child;case 11:return W=x.type,se=x.pendingProps,se=x.elementType===W?se:el(W,se),yj(h,x,W,se,P);case 7:return _a(h,x,x.pendingProps,P),x.child;case 8:return _a(h,x,x.pendingProps.children,P),x.child;case 12:return _a(h,x,x.pendingProps.children,P),x.child;case 10:e:{if(W=x.type._context,se=x.pendingProps,ue=x.memoizedProps,Ee=se.value,Xn(li,W._currentValue),W._currentValue=Ee,ue!==null)if(oi(ue.value,Ee)){if(ue.children===se.children&&!ha.current){x=jc(h,x,P);break e}}else for(ue=x.child,ue!==null&&(ue.return=x);ue!==null;){var Je=ue.dependencies;if(Je!==null){Ee=ue.child;for(var st=Je.firstContext;st!==null;){if(st.context===W){if(ue.tag===1){st=Qs(-1,P&-P),st.tag=2;var jt=ue.updateQueue;if(jt!==null){jt=jt.shared;var Xt=jt.pending;Xt===null?st.next=st:(st.next=Xt.next,Xt.next=st),jt.pending=st}}ue.lanes|=P,st=ue.alternate,st!==null&&(st.lanes|=P),Qn(ue.return,P,x),Je.lanes|=P;break}st=st.next}}else if(ue.tag===10)Ee=ue.type===x.type?null:ue.child;else if(ue.tag===18){if(Ee=ue.return,Ee===null)throw Error(s(341));Ee.lanes|=P,Je=Ee.alternate,Je!==null&&(Je.lanes|=P),Qn(Ee,P,x),Ee=ue.sibling}else Ee=ue.child;if(Ee!==null)Ee.return=ue;else for(Ee=ue;Ee!==null;){if(Ee===x){Ee=null;break}if(ue=Ee.sibling,ue!==null){ue.return=Ee.return,Ee=ue;break}Ee=Ee.return}ue=Ee}_a(h,x,se.children,P),x=x.child}return x;case 9:return se=x.type,W=x.pendingProps.children,_s(x,P),se=Es(se),W=W(se),x.flags|=1,_a(h,x,W,P),x.child;case 14:return W=x.type,se=el(W,x.pendingProps),se=el(W.type,se),xj(h,x,W,se,P);case 15:return bj(h,x,x.type,x.pendingProps,P);case 17:return W=x.type,se=x.pendingProps,se=x.elementType===W?se:el(W,se),mm(h,x),x.tag=1,fa(W)?(h=!0,vc(x)):h=!1,_s(x,P),dj(x,W,se),qy(x,W,se,P),Zy(null,x,W,!0,h,P);case 19:return kj(h,x,P);case 22:return vj(h,x,P)}throw Error(s(156,x.tag))};function Jj(h,x){return ut(h,x)}function xP(h,x,P,W){this.tag=h,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=W,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _o(h,x,P,W){return new xP(h,x,P,W)}function xx(h){return h=h.prototype,!(!h||!h.isReactComponent)}function bP(h){if(typeof h=="function")return xx(h)?1:0;if(h!=null){if(h=h.$$typeof,h===I)return 11;if(h===$)return 14}return 2}function mu(h,x){var P=h.alternate;return P===null?(P=_o(h.tag,x,h.key,h.mode),P.elementType=h.elementType,P.type=h.type,P.stateNode=h.stateNode,P.alternate=h,h.alternate=P):(P.pendingProps=x,P.type=h.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=h.flags&14680064,P.childLanes=h.childLanes,P.lanes=h.lanes,P.child=h.child,P.memoizedProps=h.memoizedProps,P.memoizedState=h.memoizedState,P.updateQueue=h.updateQueue,x=h.dependencies,P.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},P.sibling=h.sibling,P.index=h.index,P.ref=h.ref,P}function Bm(h,x,P,W,se,ue){var Ee=2;if(W=h,typeof h=="function")xx(h)&&(Ee=1);else if(typeof h=="string")Ee=5;else e:switch(h){case _:return _d(P.children,se,ue,x);case S:Ee=8,se|=8;break;case N:return h=_o(12,P,x,se|2),h.elementType=N,h.lanes=ue,h;case R:return h=_o(13,P,x,se),h.elementType=R,h.lanes=ue,h;case Q:return h=_o(19,P,x,se),h.elementType=Q,h.lanes=ue,h;case F:return km(P,se,ue,x);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case O:Ee=10;break e;case k:Ee=9;break e;case I:Ee=11;break e;case $:Ee=14;break e;case L:Ee=16,W=null;break e}throw Error(s(130,h==null?h:typeof h,""))}return x=_o(Ee,P,x,se),x.elementType=h,x.type=W,x.lanes=ue,x}function _d(h,x,P,W){return h=_o(7,h,W,x),h.lanes=P,h}function km(h,x,P,W){return h=_o(22,h,W,x),h.elementType=F,h.lanes=P,h.stateNode={isHidden:!1},h}function bx(h,x,P){return h=_o(6,h,null,x),h.lanes=P,h}function vx(h,x,P){return x=_o(4,h.children!==null?h.children:[],h.key,x),x.lanes=P,x.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},x}function vP(h,x,P,W,se){this.tag=x,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Us(0),this.expirationTimes=Us(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.identifierPrefix=W,this.onRecoverableError=se,this.mutableSourceEagerHydrationData=null}function wx(h,x,P,W,se,ue,Ee,Je,st){return h=new vP(h,x,P,Je,st),x===1?(x=1,ue===!0&&(x|=8)):x=0,ue=_o(3,null,null,x),h.current=ue,ue.stateNode=h,ue.memoizedState={element:W,isDehydrated:P,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oi(ue),h}function wP(h,x,P){var W=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:W==null?null:""+W,children:h,containerInfo:x,implementation:P}}function Zj(h){if(!h)return Tl;h=h._reactInternals;e:{if(De(h)!==h||h.tag!==1)throw Error(s(170));var x=h;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(fa(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(s(171))}if(h.tag===1){var P=h.type;if(fa(P))return nf(h,P,x)}return x}function eN(h,x,P,W,se,ue,Ee,Je,st){return h=wx(P,W,!0,h,se,ue,Ee,Je,st),h.context=Zj(null),P=h.current,W=Ea(),se=fu(P),ue=Qs(W,se),ue.callback=x??null,$s(P,ue,se),h.current.lanes=se,Ls(h,se,W),Ga(h,W),h}function _m(h,x,P,W){var se=x.current,ue=Ea(),Ee=fu(se);return P=Zj(P),x.context===null?x.context=P:x.pendingContext=P,x=Qs(ue,Ee),x.payload={element:h},W=W===void 0?null:W,W!==null&&(x.callback=W),h=$s(se,x,Ee),h!==null&&(nl(h,se,Ee,ue),Di(h,se,Ee)),Ee}function Em(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function tN(h,x){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var P=h.retryLane;h.retryLane=P!==0&&P<x?P:x}}function jx(h,x){tN(h,x),(h=h.alternate)&&tN(h,x)}function jP(){return null}var rN=typeof reportError=="function"?reportError:function(h){console.error(h)};function Nx(h){this._internalRoot=h}Om.prototype.render=Nx.prototype.render=function(h){var x=this._internalRoot;if(x===null)throw Error(s(409));_m(h,x,null,null)},Om.prototype.unmount=Nx.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var x=h.containerInfo;Cd(function(){_m(null,h,null,null)}),x[Ui]=null}};function Om(h){this._internalRoot=h}Om.prototype.unstable_scheduleHydration=function(h){if(h){var x=gs();h={blockedOn:null,target:h,priority:x};for(var P=0;P<ys.length&&x!==0&&x<ys[P].priority;P++);ys.splice(P,0,h),P===0&&si(h)}};function Sx(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function Im(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function nN(){}function NP(h,x,P,W,se){if(se){if(typeof W=="function"){var ue=W;W=function(){var jt=Em(Ee);ue.call(jt)}}var Ee=eN(x,W,h,0,null,!1,!1,"",nN);return h._reactRootContainer=Ee,h[Ui]=Ee.current,mc(h.nodeType===8?h.parentNode:h),Cd(),Ee}for(;se=h.lastChild;)h.removeChild(se);if(typeof W=="function"){var Je=W;W=function(){var jt=Em(st);Je.call(jt)}}var st=wx(h,0,!1,null,null,!1,!1,"",nN);return h._reactRootContainer=st,h[Ui]=st.current,mc(h.nodeType===8?h.parentNode:h),Cd(function(){_m(x,st,P,W)}),st}function Pm(h,x,P,W,se){var ue=P._reactRootContainer;if(ue){var Ee=ue;if(typeof se=="function"){var Je=se;se=function(){var st=Em(Ee);Je.call(st)}}_m(x,Ee,h,se)}else Ee=NP(P,x,h,se,W);return Em(Ee)}Wn=function(h){switch(h.tag){case 3:var x=h.stateNode;if(x.current.memoizedState.isDehydrated){var P=Wr(x.pendingLanes);P!==0&&(Cn(x,P|1),Ga(x,Vt()),($n&6)===0&&(UA=Vt()+500,pe()))}break;case 13:Cd(function(){var W=rs(h,1);if(W!==null){var se=Ea();nl(W,h,1,se)}}),jx(h,1)}},Bn=function(h){if(h.tag===13){var x=rs(h,134217728);if(x!==null){var P=Ea();nl(x,h,134217728,P)}jx(h,134217728)}},Vn=function(h){if(h.tag===13){var x=fu(h),P=rs(h,x);if(P!==null){var W=Ea();nl(P,h,x,W)}jx(h,x)}},gs=function(){return Ur},hr=function(h,x){var P=Ur;try{return Ur=h,x()}finally{Ur=P}},ur=function(h,x,P){switch(x){case"input":if(we(h,P),x=P.name,P.type==="radio"&&x!=null){for(P=h;P.parentNode;)P=P.parentNode;for(P=P.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<P.length;x++){var W=P[x];if(W!==h&&W.form===h.form){var se=bd(W);if(!se)throw Error(s(90));he(W),we(W,se)}}}break;case"textarea":Le(h,P);break;case"select":x=P.value,x!=null&&ie(h,!!P.multiple,x,!1)}},dr=mx,et=Cd;var SP={usingClientEntryPoint:!1,Events:[iu,xc,bd,at,rn,mx]},pf={findFiberByHostInstance:Pl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CP={bundleType:pf.bundleType,version:pf.version,rendererPackageName:pf.rendererPackageName,rendererConfig:pf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=ct(h),h===null?null:h.stateNode},findFiberByHostInstance:pf.findFiberByHostInstance||jP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tm.isDisabled&&Tm.supportsFiber)try{Zr=Tm.inject(CP),kr=Tm}catch{}}return Wa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SP,Wa.createPortal=function(h,x){var P=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sx(x))throw Error(s(200));return wP(h,x,null,P)},Wa.createRoot=function(h,x){if(!Sx(h))throw Error(s(299));var P=!1,W="",se=rN;return x!=null&&(x.unstable_strictMode===!0&&(P=!0),x.identifierPrefix!==void 0&&(W=x.identifierPrefix),x.onRecoverableError!==void 0&&(se=x.onRecoverableError)),x=wx(h,1,!1,null,null,P,!1,W,se),h[Ui]=x.current,mc(h.nodeType===8?h.parentNode:h),new Nx(x)},Wa.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var x=h._reactInternals;if(x===void 0)throw typeof h.render=="function"?Error(s(188)):(h=Object.keys(h).join(","),Error(s(268,h)));return h=ct(x),h=h===null?null:h.stateNode,h},Wa.flushSync=function(h){return Cd(h)},Wa.hydrate=function(h,x,P){if(!Im(x))throw Error(s(200));return Pm(null,h,x,!0,P)},Wa.hydrateRoot=function(h,x,P){if(!Sx(h))throw Error(s(405));var W=P!=null&&P.hydratedSources||null,se=!1,ue="",Ee=rN;if(P!=null&&(P.unstable_strictMode===!0&&(se=!0),P.identifierPrefix!==void 0&&(ue=P.identifierPrefix),P.onRecoverableError!==void 0&&(Ee=P.onRecoverableError)),x=eN(x,null,h,1,P??null,se,!1,ue,Ee),h[Ui]=x.current,mc(h),W)for(h=0;h<W.length;h++)P=W[h],se=P._getVersion,se=se(P._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[P,se]:x.mutableSourceEagerHydrationData.push(P,se);return new Om(x)},Wa.render=function(h,x,P){if(!Im(x))throw Error(s(200));return Pm(null,h,x,!1,P)},Wa.unmountComponentAtNode=function(h){if(!Im(h))throw Error(s(40));return h._reactRootContainer?(Cd(function(){Pm(null,null,h,!1,function(){h._reactRootContainer=null,h[Ui]=null})}),!0):!1},Wa.unstable_batchedUpdates=mx,Wa.unstable_renderSubtreeIntoContainer=function(h,x,P,W){if(!Im(P))throw Error(s(200));if(h==null||h._reactInternals===void 0)throw Error(s(38));return Pm(h,x,P,!1,W)},Wa.version="18.3.1-next-f1338f8080-20240426",Wa}var dN;function GB(){if(dN)return kx.exports;dN=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),kx.exports=FP(),kx.exports}var AN;function UP(){if(AN)return Fm;AN=1;var r=GB();return Fm.createRoot=r.createRoot,Fm.hydrateRoot=r.hydrateRoot,Fm}var LP=UP(),DP=GB();const MP=Tp(DP);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},up.apply(this,arguments)}var Ou;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ou||(Ou={}));const hN="popstate";function RP(r){r===void 0&&(r={});function t(i,a){let{pathname:o,search:c,hash:l}=i.location;return vv("",{pathname:o,search:c,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(i,a){return typeof a=="string"?a:i0(a)}return $P(t,s,null,r)}function gi(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function WB(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function QP(){return Math.random().toString(36).substr(2,8)}function fN(r,t){return{usr:r.state,key:r.key,idx:t}}function vv(r,t,s,i){return s===void 0&&(s=null),up({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?Eh(t):t,{state:s,key:t&&t.key||i||QP()})}function i0(r){let{pathname:t="/",search:s="",hash:i=""}=r;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Eh(r){let t={};if(r){let s=r.indexOf("#");s>=0&&(t.hash=r.substr(s),r=r.substr(0,s));let i=r.indexOf("?");i>=0&&(t.search=r.substr(i),r=r.substr(0,i)),r&&(t.pathname=r)}return t}function $P(r,t,s,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:o=!1}=i,c=a.history,l=Ou.Pop,u=null,d=A();d==null&&(d=0,c.replaceState(up({},c.state,{idx:d}),""));function A(){return(c.state||{idx:null}).idx}function f(){l=Ou.Pop;let v=A(),y=v==null?null:v-d;d=v,u&&u({action:l,location:b.location,delta:y})}function p(v,y){l=Ou.Push;let w=vv(b.location,v,y);d=A()+1;let j=fN(w,d),C=b.createHref(w);try{c.pushState(j,"",C)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;a.location.assign(C)}o&&u&&u({action:l,location:b.location,delta:1})}function m(v,y){l=Ou.Replace;let w=vv(b.location,v,y);d=A();let j=fN(w,d),C=b.createHref(w);c.replaceState(j,"",C),o&&u&&u({action:l,location:b.location,delta:0})}function g(v){let y=a.location.origin!=="null"?a.location.origin:a.location.href,w=typeof v=="string"?v:i0(v);return w=w.replace(/ $/,"%20"),gi(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let b={get action(){return l},get location(){return r(a,c)},listen(v){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(hN,f),u=v,()=>{a.removeEventListener(hN,f),u=null}},createHref(v){return t(a,v)},createURL:g,encodeLocation(v){let y=g(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(v){return c.go(v)}};return b}var pN;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(pN||(pN={}));function HP(r,t,s){return s===void 0&&(s="/"),VP(r,t,s)}function VP(r,t,s,i){let a=typeof t=="string"?Eh(t):t,o=d1(a.pathname||"/",s);if(o==null)return null;let c=qB(r);zP(c);let l=null;for(let u=0;l==null&&u<c.length;++u){let d=n8(o);l=e8(c[u],d)}return l}function qB(r,t,s,i){t===void 0&&(t=[]),s===void 0&&(s=[]),i===void 0&&(i="");let a=(o,c,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};u.relativePath.startsWith("/")&&(gi(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let d=Lu([i,u.relativePath]),A=s.concat(u);o.children&&o.children.length>0&&(gi(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),qB(o.children,t,A,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:JP(d,o.index),routesMeta:A})};return r.forEach((o,c)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,c);else for(let u of YB(o.path))a(o,c,u)}),t}function YB(r){let t=r.split("/");if(t.length===0)return[];let[s,...i]=t,a=s.endsWith("?"),o=s.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let c=YB(i.join("/")),l=[];return l.push(...c.map(u=>u===""?o:[o,u].join("/"))),a&&l.push(...c),l.map(u=>r.startsWith("/")&&u===""?"/":u)}function zP(r){r.sort((t,s)=>t.score!==s.score?s.score-t.score:ZP(t.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}const KP=/^:[\w-]+$/,GP=3,WP=2,qP=1,YP=10,XP=-2,mN=r=>r==="*";function JP(r,t){let s=r.split("/"),i=s.length;return s.some(mN)&&(i+=XP),t&&(i+=WP),s.filter(a=>!mN(a)).reduce((a,o)=>a+(KP.test(o)?GP:o===""?qP:YP),i)}function ZP(r,t){return r.length===t.length&&r.slice(0,-1).every((i,a)=>i===t[a])?r[r.length-1]-t[t.length-1]:0}function e8(r,t,s){let{routesMeta:i}=r,a={},o="/",c=[];for(let l=0;l<i.length;++l){let u=i[l],d=l===i.length-1,A=o==="/"?t:t.slice(o.length)||"/",f=t8({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},A),p=u.route;if(!f)return null;Object.assign(a,f.params),c.push({params:a,pathname:Lu([o,f.pathname]),pathnameBase:o8(Lu([o,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(o=Lu([o,f.pathnameBase]))}return c}function t8(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[s,i]=r8(r.path,r.caseSensitive,r.end),a=t.match(s);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:i.reduce((d,A,f)=>{let{paramName:p,isOptional:m}=A;if(p==="*"){let b=l[f]||"";c=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const g=l[f];return m&&!g?d[p]=void 0:d[p]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:c,pattern:r}}function r8(r,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),WB(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function n8(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return WB(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function d1(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,i=r.charAt(s);return i&&i!=="/"?null:r.slice(s)||"/"}function s8(r,t){t===void 0&&(t="/");let{pathname:s,search:i="",hash:a=""}=typeof r=="string"?Eh(r):r;return{pathname:s?s.startsWith("/")?s:i8(s,t):t,search:l8(i),hash:c8(a)}}function i8(r,t){let s=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Ox(r,t,s,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function a8(r){return r.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function A1(r,t){let s=a8(r);return t?s.map((i,a)=>a===s.length-1?i.pathname:i.pathnameBase):s.map(i=>i.pathnameBase)}function h1(r,t,s,i){i===void 0&&(i=!1);let a;typeof r=="string"?a=Eh(r):(a=up({},r),gi(!a.pathname||!a.pathname.includes("?"),Ox("?","pathname","search",a)),gi(!a.pathname||!a.pathname.includes("#"),Ox("#","pathname","hash",a)),gi(!a.search||!a.search.includes("#"),Ox("#","search","hash",a)));let o=r===""||a.pathname==="",c=o?"/":a.pathname,l;if(c==null)l=s;else{let f=t.length-1;if(!i&&c.startsWith("..")){let p=c.split("/");for(;p[0]==="..";)p.shift(),f-=1;a.pathname=p.join("/")}l=f>=0?t[f]:"/"}let u=s8(a,l),d=c&&c!=="/"&&c.endsWith("/"),A=(o||c===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(d||A)&&(u.pathname+="/"),u}const Lu=r=>r.join("/").replace(/\/\/+/g,"/"),o8=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),l8=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,c8=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function u8(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const XB=["post","put","patch","delete"];new Set(XB);const d8=["get",...XB];new Set(d8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dp(){return dp=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},dp.apply(this,arguments)}const f1=ee.createContext(null),A8=ee.createContext(null),td=ee.createContext(null),ey=ee.createContext(null),Vc=ee.createContext({outlet:null,matches:[],isDataRoute:!1}),JB=ee.createContext(null);function h8(r,t){let{relative:s}=t===void 0?{}:t;Oh()||gi(!1);let{basename:i,navigator:a}=ee.useContext(td),{hash:o,pathname:c,search:l}=e3(r,{relative:s}),u=c;return i!=="/"&&(u=c==="/"?i:Lu([i,c])),a.createHref({pathname:u,search:l,hash:o})}function Oh(){return ee.useContext(ey)!=null}function bl(){return Oh()||gi(!1),ee.useContext(ey).location}function ZB(r){ee.useContext(td).static||ee.useLayoutEffect(r)}function yi(){let{isDataRoute:r}=ee.useContext(Vc);return r?C8():f8()}function f8(){Oh()||gi(!1);let r=ee.useContext(f1),{basename:t,future:s,navigator:i}=ee.useContext(td),{matches:a}=ee.useContext(Vc),{pathname:o}=bl(),c=JSON.stringify(A1(a,s.v7_relativeSplatPath)),l=ee.useRef(!1);return ZB(()=>{l.current=!0}),ee.useCallback(function(d,A){if(A===void 0&&(A={}),!l.current)return;if(typeof d=="number"){i.go(d);return}let f=h1(d,JSON.parse(c),o,A.relative==="path");r==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Lu([t,f.pathname])),(A.replace?i.replace:i.push)(f,A.state,A)},[t,i,c,o,r])}function ty(){let{matches:r}=ee.useContext(Vc),t=r[r.length-1];return t?t.params:{}}function e3(r,t){let{relative:s}=t===void 0?{}:t,{future:i}=ee.useContext(td),{matches:a}=ee.useContext(Vc),{pathname:o}=bl(),c=JSON.stringify(A1(a,i.v7_relativeSplatPath));return ee.useMemo(()=>h1(r,JSON.parse(c),o,s==="path"),[r,c,o,s])}function p8(r,t){return m8(r,t)}function m8(r,t,s,i){Oh()||gi(!1);let{navigator:a}=ee.useContext(td),{matches:o}=ee.useContext(Vc),c=o[o.length-1],l=c?c.params:{};c&&c.pathname;let u=c?c.pathnameBase:"/";c&&c.route;let d=bl(),A;if(t){var f;let v=typeof t=="string"?Eh(t):t;u==="/"||(f=v.pathname)!=null&&f.startsWith(u)||gi(!1),A=v}else A=d;let p=A.pathname||"/",m=p;if(u!=="/"){let v=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=HP(r,{pathname:m}),b=v8(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Lu([u,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:Lu([u,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,s,i);return t&&b?ee.createElement(ey.Provider,{value:{location:dp({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:Ou.Pop}},b):b}function g8(){let r=S8(),t=u8(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),s=r instanceof Error?r.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unexpected Application Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},t),s?ee.createElement("pre",{style:a},s):null,null)}const y8=ee.createElement(g8,null);class x8 extends ee.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?ee.createElement(Vc.Provider,{value:this.props.routeContext},ee.createElement(JB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b8(r){let{routeContext:t,match:s,children:i}=r,a=ee.useContext(f1);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),ee.createElement(Vc.Provider,{value:t},i)}function v8(r,t,s,i){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),i===void 0&&(i=null),r==null){var o;if(!s)return null;if(s.errors)r=s.matches;else if((o=i)!=null&&o.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)r=s.matches;else return null}let c=r,l=(a=s)==null?void 0:a.errors;if(l!=null){let A=c.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);A>=0||gi(!1),c=c.slice(0,Math.min(c.length,A+1))}let u=!1,d=-1;if(s&&i&&i.v7_partialHydration)for(let A=0;A<c.length;A++){let f=c[A];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=A),f.route.id){let{loaderData:p,errors:m}=s,g=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){u=!0,d>=0?c=c.slice(0,d+1):c=[c[0]];break}}}return c.reduceRight((A,f,p)=>{let m,g=!1,b=null,v=null;s&&(m=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||y8,u&&(d<0&&p===0?(B8("route-fallback"),g=!0,v=null):d===p&&(g=!0,v=f.route.hydrateFallbackElement||null)));let y=t.concat(c.slice(0,p+1)),w=()=>{let j;return m?j=b:g?j=v:f.route.Component?j=ee.createElement(f.route.Component,null):f.route.element?j=f.route.element:j=A,ee.createElement(b8,{match:f,routeContext:{outlet:A,matches:y,isDataRoute:s!=null},children:j})};return s&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?ee.createElement(x8,{location:s.location,revalidation:s.revalidation,component:b,error:m,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var t3=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(t3||{}),r3=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(r3||{});function w8(r){let t=ee.useContext(f1);return t||gi(!1),t}function j8(r){let t=ee.useContext(A8);return t||gi(!1),t}function N8(r){let t=ee.useContext(Vc);return t||gi(!1),t}function n3(r){let t=N8(),s=t.matches[t.matches.length-1];return s.route.id||gi(!1),s.route.id}function S8(){var r;let t=ee.useContext(JB),s=j8(),i=n3();return t!==void 0?t:(r=s.errors)==null?void 0:r[i]}function C8(){let{router:r}=w8(t3.UseNavigateStable),t=n3(r3.UseNavigateStable),s=ee.useRef(!1);return ZB(()=>{s.current=!0}),ee.useCallback(function(a,o){o===void 0&&(o={}),s.current&&(typeof a=="number"?r.navigate(a):r.navigate(a,dp({fromRouteId:t},o)))},[r,t])}const gN={};function B8(r,t,s){gN[r]||(gN[r]=!0)}function k8(r,t){r?.v7_startTransition,r?.v7_relativeSplatPath}function _8(r){let{to:t,replace:s,state:i,relative:a}=r;Oh()||gi(!1);let{future:o,static:c}=ee.useContext(td),{matches:l}=ee.useContext(Vc),{pathname:u}=bl(),d=yi(),A=h1(t,A1(l,o.v7_relativeSplatPath),u,a==="path"),f=JSON.stringify(A);return ee.useEffect(()=>d(JSON.parse(f),{replace:s,state:i,relative:a}),[d,f,a,s,i]),null}function dn(r){gi(!1)}function E8(r){let{basename:t="/",children:s=null,location:i,navigationType:a=Ou.Pop,navigator:o,static:c=!1,future:l}=r;Oh()&&gi(!1);let u=t.replace(/^\/*/,"/"),d=ee.useMemo(()=>({basename:u,navigator:o,static:c,future:dp({v7_relativeSplatPath:!1},l)}),[u,l,o,c]);typeof i=="string"&&(i=Eh(i));let{pathname:A="/",search:f="",hash:p="",state:m=null,key:g="default"}=i,b=ee.useMemo(()=>{let v=d1(A,u);return v==null?null:{location:{pathname:v,search:f,hash:p,state:m,key:g},navigationType:a}},[u,A,f,p,m,g,a]);return b==null?null:ee.createElement(td.Provider,{value:d},ee.createElement(ey.Provider,{children:s,value:b}))}function yN(r){let{children:t,location:s}=r;return p8(wv(t),s)}new Promise(()=>{});function wv(r,t){t===void 0&&(t=[]);let s=[];return ee.Children.forEach(r,(i,a)=>{if(!ee.isValidElement(i))return;let o=[...t,a];if(i.type===ee.Fragment){s.push.apply(s,wv(i.props.children,o));return}i.type!==dn&&gi(!1),!i.props.index||!i.props.children||gi(!1);let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=wv(i.props.children,o)),s.push(c)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jv(){return jv=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},jv.apply(this,arguments)}function O8(r,t){if(r==null)return{};var s={},i=Object.keys(r),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(s[a]=r[a]);return s}function I8(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function P8(r,t){return r.button===0&&(!t||t==="_self")&&!I8(r)}function Nv(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,s)=>{let i=r[s];return t.concat(Array.isArray(i)?i.map(a=>[s,a]):[[s,i]])},[]))}function T8(r,t){let s=Nv(r);return t&&t.forEach((i,a)=>{s.has(a)||t.getAll(a).forEach(o=>{s.append(a,o)})}),s}const F8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],U8="6";try{window.__reactRouterVersion=U8}catch{}const L8="startTransition",xN=IP[L8];function D8(r){let{basename:t,children:s,future:i,window:a}=r,o=ee.useRef();o.current==null&&(o.current=RP({window:a,v5Compat:!0}));let c=o.current,[l,u]=ee.useState({action:c.action,location:c.location}),{v7_startTransition:d}=i||{},A=ee.useCallback(f=>{d&&xN?xN(()=>u(f)):u(f)},[u,d]);return ee.useLayoutEffect(()=>c.listen(A),[c,A]),ee.useEffect(()=>k8(i),[i]),ee.createElement(E8,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:c,future:i})}const M8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zt=ee.forwardRef(function(t,s){let{onClick:i,relative:a,reloadDocument:o,replace:c,state:l,target:u,to:d,preventScrollReset:A,viewTransition:f}=t,p=O8(t,F8),{basename:m}=ee.useContext(td),g,b=!1;if(typeof d=="string"&&R8.test(d)&&(g=d,M8))try{let j=new URL(window.location.href),C=d.startsWith("//")?new URL(j.protocol+d):new URL(d),B=d1(C.pathname,m);C.origin===j.origin&&B!=null?d=B+C.search+C.hash:b=!0}catch{}let v=h8(d,{relative:a}),y=Q8(d,{replace:c,state:l,target:u,preventScrollReset:A,relative:a,viewTransition:f});function w(j){i&&i(j),j.defaultPrevented||y(j)}return ee.createElement("a",jv({},p,{href:g||v,onClick:b||o?i:w,ref:s,target:u}))});var bN;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(bN||(bN={}));var vN;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(vN||(vN={}));function Q8(r,t){let{target:s,replace:i,state:a,preventScrollReset:o,relative:c,viewTransition:l}=t===void 0?{}:t,u=yi(),d=bl(),A=e3(r,{relative:c});return ee.useCallback(f=>{if(P8(f,s)){f.preventDefault();let p=i!==void 0?i:i0(d)===i0(A);u(r,{replace:p,state:a,preventScrollReset:o,relative:c,viewTransition:l})}},[d,u,A,i,a,s,r,o,c,l])}function ry(r){let t=ee.useRef(Nv(r)),s=ee.useRef(!1),i=bl(),a=ee.useMemo(()=>T8(i.search,s.current?null:t.current),[i.search]),o=yi(),c=ee.useCallback((l,u)=>{const d=Nv(typeof l=="function"?l(a):l);s.current=!0,o("?"+d,u)},[o,a]);return[a,c]}const $8=()=>{};var wN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=function(r){const t=[];let s=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?t[s++]=a:a<2048?(t[s++]=a>>6|192,t[s++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),t[s++]=a>>18|240,t[s++]=a>>12&63|128,t[s++]=a>>6&63|128,t[s++]=a&63|128):(t[s++]=a>>12|224,t[s++]=a>>6&63|128,t[s++]=a&63|128)}return t},H8=function(r){const t=[];let s=0,i=0;for(;s<r.length;){const a=r[s++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=r[s++];t[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=r[s++],c=r[s++],l=r[s++],u=((a&7)<<18|(o&63)<<12|(c&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const o=r[s++],c=r[s++];t[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return t.join("")},i3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const o=r[a],c=a+1<r.length,l=c?r[a+1]:0,u=a+2<r.length,d=u?r[a+2]:0,A=o>>2,f=(o&3)<<4|l>>4;let p=(l&15)<<2|d>>6,m=d&63;u||(m=64,c||(p=64)),i.push(s[A],s[f],s[p],s[m])}return i.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(s3(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):H8(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const o=s[r.charAt(a++)],l=a<r.length?s[r.charAt(a)]:0;++a;const d=a<r.length?s[r.charAt(a)]:64;++a;const f=a<r.length?s[r.charAt(a)]:64;if(++a,o==null||l==null||d==null||f==null)throw new V8;const p=o<<2|l>>4;if(i.push(p),d!==64){const m=l<<4&240|d>>2;if(i.push(m),f!==64){const g=d<<6&192|f;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class V8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z8=function(r){const t=s3(r);return i3.encodeByteArray(t,!0)},a0=function(r){return z8(r).replace(/\./g,"")},a3=function(r){try{return i3.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=()=>K8().__FIREBASE_DEFAULTS__,W8=()=>{if(typeof process>"u"||typeof wN>"u")return;const r=wN.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},q8=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&a3(r[1]);return t&&JSON.parse(t)},p1=()=>{try{return $8()||G8()||W8()||q8()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},o3=r=>{var t,s;return(s=(t=p1())===null||t===void 0?void 0:t.emulatorHosts)===null||s===void 0?void 0:s[r]},Y8=r=>{const t=o3(r);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),i]:[t.substring(0,s),i]},l3=()=>{var r;return(r=p1())===null||r===void 0?void 0:r.config},c3=r=>{var t;return(t=p1())===null||t===void 0?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,i)=>{s?this.reject(s):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function u3(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},i=t||"demo-project",a=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},r);return[a0(JSON.stringify(s)),a0(JSON.stringify(c)),""].join(".")}const Gf={};function Z8(){const r={prod:[],emulator:[]};for(const t of Object.keys(Gf))Gf[t]?r.emulator.push(t):r.prod.push(t);return r}function eT(r){let t=document.getElementById(r),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),s=!0),{created:s,element:t}}let jN=!1;function d3(r,t){if(typeof window>"u"||typeof document>"u"||!Ih(window.location.host)||Gf[r]===t||Gf[r]||jN)return;Gf[r]=t;function s(p){return`__firebase__banner__${p}`}const i="__firebase__banner",o=Z8().prod.length>0;function c(){const p=document.getElementById(i);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{jN=!0,c()},p}function A(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=eT(i),m=s("text"),g=document.getElementById(m)||document.createElement("span"),b=s("learnmore"),v=document.getElementById(b)||document.createElement("a"),y=s("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const j=p.element;l(j),A(v,b);const C=d();u(w,y),j.append(w,g,v,C),document.body.appendChild(j)}o?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(La())}function rT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function sT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iT(){const r=La();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function aT(){try{return typeof indexedDB=="object"}catch{return!1}}function oT(){return new Promise((r,t)=>{try{let s=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{var o;t(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(s){t(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="FirebaseError";class zc extends Error{constructor(t,s,i){super(s),this.code=t,this.customData=i,this.name=lT,Object.setPrototypeOf(this,zc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fp.prototype.create)}}class Fp{constructor(t,s,i){this.service=t,this.serviceName=s,this.errors=i}create(t,...s){const i=s[0]||{},a=`${this.service}/${t}`,o=this.errors[t],c=o?cT(o,i):"Error",l=`${this.serviceName}: ${c} (${a}).`;return new zc(a,l,i)}}function cT(r,t){return r.replace(uT,(s,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const uT=/\{\$([^}]+)}/g;function dT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Nh(r,t){if(r===t)return!0;const s=Object.keys(r),i=Object.keys(t);for(const a of s){if(!i.includes(a))return!1;const o=r[a],c=t[a];if(NN(o)&&NN(c)){if(!Nh(o,c))return!1}else if(o!==c)return!1}for(const a of i)if(!s.includes(a))return!1;return!0}function NN(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(r){const t=[];for(const[s,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(s)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Tf(r){const t={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,o]=i.split("=");t[decodeURIComponent(a)]=decodeURIComponent(o)}}),t}function Ff(r){const t=r.indexOf("?");if(!t)return"";const s=r.indexOf("#",t);return r.substring(t,s>0?s:void 0)}function AT(r,t){const s=new hT(r,t);return s.subscribe.bind(s)}class hT{constructor(t,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(s=>{s.next(t)})}error(t){this.forEachObserver(s=>{s.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,s,i){let a;if(t===void 0&&s===void 0&&i===void 0)throw new Error("Missing Observer.");fT(t,["next","error","complete"])?a=t:a={next:t,error:s,complete:i},a.next===void 0&&(a.next=Ix),a.error===void 0&&(a.error=Ix),a.complete===void 0&&(a.complete=Ix);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,t)}sendOne(t,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{s(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fT(r,t){if(typeof r!="object"||r===null)return!1;for(const s of t)if(s in r&&typeof r[s]=="function")return!0;return!1}function Ix(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(r){return r&&r._delegate?r._delegate:r}class Yd{constructor(t,s,i){this.name=t,this.instanceFactory=s,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const i=new X8;if(this.instancesDeferred.set(s,i),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){var s;const i=this.normalizeInstanceIdentifier(t?.identifier),a=(s=t?.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(gT(t))try{this.getOrInitializeService({instanceIdentifier:Pd})}catch{}for(const[s,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(t=Pd){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Pd){return this.instances.has(t)}getOptions(t=Pd){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:s});for(const[o,c]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&c.resolve(a)}return a}onInit(t,s){var i;const a=this.normalizeInstanceIdentifier(s),o=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;o.add(t),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&t(c,a),()=>{o.delete(t)}}invokeOnInitCallbacks(t,s){const i=this.onInitCallbacks.get(s);if(i)for(const a of i)try{a(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mT(t),options:s}),this.instances.set(t,i),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Pd){return this.component?this.component.multipleInstances?t:Pd:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mT(r){return r===Pd?void 0:r}function gT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new pT(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(fs||(fs={}));const xT={debug:fs.DEBUG,verbose:fs.VERBOSE,info:fs.INFO,warn:fs.WARN,error:fs.ERROR,silent:fs.SILENT},bT=fs.INFO,vT={[fs.DEBUG]:"log",[fs.VERBOSE]:"log",[fs.INFO]:"info",[fs.WARN]:"warn",[fs.ERROR]:"error"},wT=(r,t,...s)=>{if(t<r.logLevel)return;const i=new Date().toISOString(),a=vT[t];if(a)console[a](`[${i}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let A3=class{constructor(t){this.name=t,this._logLevel=bT,this._logHandler=wT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in fs))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?xT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,fs.DEBUG,...t),this._logHandler(this,fs.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,fs.VERBOSE,...t),this._logHandler(this,fs.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,fs.INFO,...t),this._logHandler(this,fs.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,fs.WARN,...t),this._logHandler(this,fs.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,fs.ERROR,...t),this._logHandler(this,fs.ERROR,...t)}};const jT=(r,t)=>t.some(s=>r instanceof s);let SN,CN;function NT(){return SN||(SN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ST(){return CN||(CN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h3=new WeakMap,Sv=new WeakMap,f3=new WeakMap,Px=new WeakMap,m1=new WeakMap;function CT(r){const t=new Promise((s,i)=>{const a=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{s(Du(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",o),r.addEventListener("error",c)});return t.then(s=>{s instanceof IDBCursor&&h3.set(s,r)}).catch(()=>{}),m1.set(t,r),t}function BT(r){if(Sv.has(r))return;const t=new Promise((s,i)=>{const a=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{s(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});Sv.set(r,t)}let Cv={get(r,t,s){if(r instanceof IDBTransaction){if(t==="done")return Sv.get(r);if(t==="objectStoreNames")return r.objectStoreNames||f3.get(r);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Du(r[t])},set(r,t,s){return r[t]=s,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function kT(r){Cv=r(Cv)}function _T(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const i=r.call(Tx(this),t,...s);return f3.set(i,t.sort?t.sort():[t]),Du(i)}:ST().includes(r)?function(...t){return r.apply(Tx(this),t),Du(h3.get(this))}:function(...t){return Du(r.apply(Tx(this),t))}}function ET(r){return typeof r=="function"?_T(r):(r instanceof IDBTransaction&&BT(r),jT(r,NT())?new Proxy(r,Cv):r)}function Du(r){if(r instanceof IDBRequest)return CT(r);if(Px.has(r))return Px.get(r);const t=ET(r);return t!==r&&(Px.set(r,t),m1.set(t,r)),t}const Tx=r=>m1.get(r);function OT(r,t,{blocked:s,upgrade:i,blocking:a,terminated:o}={}){const c=indexedDB.open(r,t),l=Du(c);return i&&c.addEventListener("upgradeneeded",u=>{i(Du(c.result),u.oldVersion,u.newVersion,Du(c.transaction),u)}),s&&c.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),a&&u.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const IT=["get","getKey","getAll","getAllKeys","count"],PT=["put","add","delete","clear"],Fx=new Map;function BN(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Fx.get(t))return Fx.get(t);const s=t.replace(/FromIndex$/,""),i=t!==s,a=PT.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!(a||IT.includes(s)))return;const o=async function(c,...l){const u=this.transaction(c,a?"readwrite":"readonly");let d=u.store;return i&&(d=d.index(l.shift())),(await Promise.all([d[s](...l),a&&u.done]))[0]};return Fx.set(t,o),o}kT(r=>({...r,get:(t,s,i)=>BN(t,s)||r.get(t,s,i),has:(t,s)=>!!BN(t,s)||r.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(FT(s)){const i=s.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(s=>s).join(" ")}}function FT(r){const t=r.getComponent();return t?.type==="VERSION"}const Bv="@firebase/app",kN="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new A3("@firebase/app"),UT="@firebase/app-compat",LT="@firebase/analytics-compat",DT="@firebase/analytics",MT="@firebase/app-check-compat",RT="@firebase/app-check",QT="@firebase/auth",$T="@firebase/auth-compat",HT="@firebase/database",VT="@firebase/data-connect",zT="@firebase/database-compat",KT="@firebase/functions",GT="@firebase/functions-compat",WT="@firebase/installations",qT="@firebase/installations-compat",YT="@firebase/messaging",XT="@firebase/messaging-compat",JT="@firebase/performance",ZT="@firebase/performance-compat",eF="@firebase/remote-config",tF="@firebase/remote-config-compat",rF="@firebase/storage",nF="@firebase/storage-compat",sF="@firebase/firestore",iF="@firebase/ai",aF="@firebase/firestore-compat",oF="firebase",lF="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="[DEFAULT]",cF={[Bv]:"fire-core",[UT]:"fire-core-compat",[DT]:"fire-analytics",[LT]:"fire-analytics-compat",[RT]:"fire-app-check",[MT]:"fire-app-check-compat",[QT]:"fire-auth",[$T]:"fire-auth-compat",[HT]:"fire-rtdb",[VT]:"fire-data-connect",[zT]:"fire-rtdb-compat",[KT]:"fire-fn",[GT]:"fire-fn-compat",[WT]:"fire-iid",[qT]:"fire-iid-compat",[YT]:"fire-fcm",[XT]:"fire-fcm-compat",[JT]:"fire-perf",[ZT]:"fire-perf-compat",[eF]:"fire-rc",[tF]:"fire-rc-compat",[rF]:"fire-gcs",[nF]:"fire-gcs-compat",[sF]:"fire-fst",[aF]:"fire-fst-compat",[iF]:"fire-vertex","fire-js":"fire-js",[oF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Map,uF=new Map,_v=new Map;function _N(r,t){try{r.container.addComponent(t)}catch(s){Uc.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,s)}}function Sh(r){const t=r.name;if(_v.has(t))return Uc.debug(`There were multiple attempts to register component ${t}.`),!1;_v.set(t,r);for(const s of o0.values())_N(s,r);for(const s of uF.values())_N(s,r);return!0}function g1(r,t){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(t)}function Uo(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mu=new Fp("app","Firebase",dF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(t,s,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Yd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=lF;function p3(r,t={}){let s=r;typeof t!="object"&&(t={name:t});const i=Object.assign({name:kv,automaticDataCollectionEnabled:!0},t),a=i.name;if(typeof a!="string"||!a)throw Mu.create("bad-app-name",{appName:String(a)});if(s||(s=l3()),!s)throw Mu.create("no-options");const o=o0.get(a);if(o){if(Nh(s,o.options)&&Nh(i,o.config))return o;throw Mu.create("duplicate-app",{appName:a})}const c=new yT(a);for(const u of _v.values())c.addComponent(u);const l=new AF(s,i,c);return o0.set(a,l),l}function m3(r=kv){const t=o0.get(r);if(!t&&r===kv&&l3())return p3();if(!t)throw Mu.create("no-app",{appName:r});return t}function Ru(r,t,s){var i;let a=(i=cF[r])!==null&&i!==void 0?i:r;s&&(a+=`-${s}`);const o=a.match(/\s|\//),c=t.match(/\s|\//);if(o||c){const l=[`Unable to register library "${a}" with version "${t}":`];o&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&l.push("and"),c&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Uc.warn(l.join(" "));return}Sh(new Yd(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF="firebase-heartbeat-database",fF=1,Ap="firebase-heartbeat-store";let Ux=null;function g3(){return Ux||(Ux=OT(hF,fF,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Ap)}catch(s){console.warn(s)}}}}).catch(r=>{throw Mu.create("idb-open",{originalErrorMessage:r.message})})),Ux}async function pF(r){try{const s=(await g3()).transaction(Ap),i=await s.objectStore(Ap).get(y3(r));return await s.done,i}catch(t){if(t instanceof zc)Uc.warn(t.message);else{const s=Mu.create("idb-get",{originalErrorMessage:t?.message});Uc.warn(s.message)}}}async function EN(r,t){try{const i=(await g3()).transaction(Ap,"readwrite");await i.objectStore(Ap).put(t,y3(r)),await i.done}catch(s){if(s instanceof zc)Uc.warn(s.message);else{const i=Mu.create("idb-set",{originalErrorMessage:s?.message});Uc.warn(i.message)}}}function y3(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=1024,gF=30;class yF{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new bF(s),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,s;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ON();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>gF){const c=vF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Uc.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=ON(),{heartbeatsToSend:i,unsentEntries:a}=xF(this._heartbeatsCache.heartbeats),o=a0(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=s,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(s){return Uc.warn(s),""}}}function ON(){return new Date().toISOString().substring(0,10)}function xF(r,t=mF){const s=[];let i=r.slice();for(const a of r){const o=s.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),IN(s)>t){o.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),IN(s)>t){s.pop();break}i=i.slice(1)}return{heartbeatsToSend:s,unsentEntries:i}}class bF{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aT()?oT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await pF(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return EN(this.app,{lastSentHeartbeatDate:(s=t.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return EN(this.app,{lastSentHeartbeatDate:(s=t.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function IN(r){return a0(JSON.stringify({version:2,heartbeats:r})).length}function vF(r){if(r.length===0)return-1;let t=0,s=r[0].date;for(let i=1;i<r.length;i++)r[i].date<s&&(s=r[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(r){Sh(new Yd("platform-logger",t=>new TT(t),"PRIVATE")),Sh(new Yd("heartbeat",t=>new yF(t),"PRIVATE")),Ru(Bv,kN,r),Ru(Bv,kN,"esm2017"),Ru("fire-js","")}wF("");function y1(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s}function x3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jF=x3,b3=new Fp("auth","Firebase",x3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=new A3("@firebase/auth");function NF(r,...t){l0.logLevel<=fs.WARN&&l0.warn(`Auth (${Ph}): ${r}`,...t)}function Ig(r,...t){l0.logLevel<=fs.ERROR&&l0.error(`Auth (${Ph}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(r,...t){throw x1(r,...t)}function ql(r,...t){return x1(r,...t)}function v3(r,t,s){const i=Object.assign(Object.assign({},jF()),{[t]:s});return new Fp("auth","Firebase",i).create(t,{appName:r.name})}function Pc(r){return v3(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function x1(r,...t){if(typeof r!="string"){const s=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(s,...i)}return b3.create(r,...t)}function Yr(r,t,...s){if(!r)throw x1(t,...s)}function Oc(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Ig(t),new Error(t)}function Lc(r,t){r||Oc(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function SF(){return PN()==="http:"||PN()==="https:"}function PN(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SF()||nT()||"connection"in navigator)?navigator.onLine:!0}function BF(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(t,s){this.shortDelay=t,this.longDelay=s,Lc(s>t,"Short delay should be less than long delay!"),this.isMobile=tT()||sT()}get(){return CF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(r,t){Lc(r.emulator,"Emulator should always be set here");const{url:s}=r.emulator;return t?`${s}${t.startsWith("/")?t.slice(1):t}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{static initialize(t,s,i){this.fetchImpl=t,s&&(this.headersImpl=s),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EF=new Lp(3e4,6e4);function rd(r,t){return r.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:r.tenantId}):t}async function nd(r,t,s,i,a={}){return j3(r,a,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const l=Up(Object.assign({key:r.config.apiKey},c)).slice(1),u=await r._getAdditionalHeaders();u["Content-Type"]="application/json",r.languageCode&&(u["X-Firebase-Locale"]=r.languageCode);const d=Object.assign({method:t,headers:u},o);return rT()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&Ih(r.emulatorConfig.host)&&(d.credentials="include"),w3.fetch()(await N3(r,r.config.apiHost,s,l),d)})}async function j3(r,t,s){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},kF),t);try{const a=new IF(r),o=await Promise.race([s(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Um(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const l=o.ok?c.errorMessage:c.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Um(r,"credential-already-in-use",c);if(u==="EMAIL_EXISTS")throw Um(r,"email-already-in-use",c);if(u==="USER_DISABLED")throw Um(r,"user-disabled",c);const A=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw v3(r,A,d);ml(r,A)}}catch(a){if(a instanceof zc)throw a;ml(r,"network-request-failed",{message:String(a)})}}async function Dp(r,t,s,i,a={}){const o=await nd(r,t,s,i,a);return"mfaPendingCredential"in o&&ml(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function N3(r,t,s,i){const a=`${t}${s}?${i}`,o=r,c=o.config.emulator?b1(r.config,a):`${r.config.apiScheme}://${a}`;return _F.includes(s)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function OF(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((s,i)=>{this.timer=setTimeout(()=>i(ql(this.auth,"network-request-failed")),EF.get())})}}function Um(r,t,s){const i={appName:r.name};s.email&&(i.email=s.email),s.phoneNumber&&(i.phoneNumber=s.phoneNumber);const a=ql(r,t,i);return a.customData._tokenResponse=s,a}function TN(r){return r!==void 0&&r.enterprise!==void 0}class PF{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===t)return OF(s.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TF(r,t){return nd(r,"GET","/v2/recaptchaConfig",rd(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FF(r,t){return nd(r,"POST","/v1/accounts:delete",t)}async function c0(r,t){return nd(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function UF(r,t=!1){const s=$o(r),i=await s.getIdToken(t),a=v1(i);Yr(a&&a.exp&&a.auth_time&&a.iat,s.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:i,authTime:Wf(Lx(a.auth_time)),issuedAtTime:Wf(Lx(a.iat)),expirationTime:Wf(Lx(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Lx(r){return Number(r)*1e3}function v1(r){const[t,s,i]=r.split(".");if(t===void 0||s===void 0||i===void 0)return Ig("JWT malformed, contained fewer than 3 sections"),null;try{const a=a3(s);return a?JSON.parse(a):(Ig("Failed to decode base64 JWT payload"),null)}catch(a){return Ig("Caught error parsing JWT payload as JSON",a?.toString()),null}}function FN(r){const t=v1(r);return Yr(t,"internal-error"),Yr(typeof t.exp<"u","internal-error"),Yr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hp(r,t,s=!1){if(s)return t;try{return await t}catch(i){throw i instanceof zc&&LF(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function LF({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var s;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const s=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(t,s){this.createdAt=t,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wf(this.lastLoginAt),this.creationTime=Wf(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0(r){var t;const s=r.auth,i=await r.getIdToken(),a=await hp(r,c0(s,{idToken:i}));Yr(a?.users.length,s,"internal-error");const o=a.users[0];r._notifyReloadListener(o);const c=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?S3(o.providerUserInfo):[],l=RF(r.providerData,c),u=r.isAnonymous,d=!(r.email&&o.passwordHash)&&!l?.length,A=u?d:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Ov(o.createdAt,o.lastLoginAt),isAnonymous:A};Object.assign(r,f)}async function MF(r){const t=$o(r);await u0(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function RF(r,t){return[...r.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function S3(r){return r.map(t=>{var{providerId:s}=t,i=y1(t,["providerId"]);return{providerId:s,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QF(r,t){const s=await j3(r,{},async()=>{const i=Up({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:o}=r.config,c=await N3(r,a,"/v1/token",`key=${o}`),l=await r._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return r.emulatorConfig&&Ih(r.emulatorConfig.host)&&(u.credentials="include"),w3.fetch()(c,u)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function $F(r,t){return nd(r,"POST","/v2/accounts:revokeToken",rd(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Yr(t.idToken,"internal-error"),Yr(typeof t.idToken<"u","internal-error"),Yr(typeof t.refreshToken<"u","internal-error");const s="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):FN(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,s)}updateFromIdToken(t){Yr(t.length!==0,"internal-error");const s=FN(t);this.updateTokensAndExpiration(t,null,s)}async getToken(t,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Yr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,s){const{accessToken:i,refreshToken:a,expiresIn:o}=await QF(t,s);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(t,s,i){this.refreshToken=s||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,s){const{refreshToken:i,accessToken:a,expirationTime:o}=s,c=new Ah;return i&&(Yr(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(Yr(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),o&&(Yr(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ah,this.toJSON())}_performRefresh(){return Oc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(r,t){Yr(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class cl{constructor(t){var{uid:s,auth:i,stsTokenManager:a}=t,o=y1(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ov(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const s=await hp(this,this.stsTokenManager.getToken(this.auth,t));return Yr(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(t){return UF(this,t)}reload(){return MF(this)}_assign(t){this!==t&&(Yr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(s=>Object.assign({},s)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const s=new cl(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(t){Yr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,s=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),s&&await u0(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Uo(this.auth.app))return Promise.reject(Pc(this.auth));const t=await this.getIdToken();return await hp(this,FF(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,s){var i,a,o,c,l,u,d,A;const f=(i=s.displayName)!==null&&i!==void 0?i:void 0,p=(a=s.email)!==null&&a!==void 0?a:void 0,m=(o=s.phoneNumber)!==null&&o!==void 0?o:void 0,g=(c=s.photoURL)!==null&&c!==void 0?c:void 0,b=(l=s.tenantId)!==null&&l!==void 0?l:void 0,v=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=s.createdAt)!==null&&d!==void 0?d:void 0,w=(A=s.lastLoginAt)!==null&&A!==void 0?A:void 0,{uid:j,emailVerified:C,isAnonymous:B,providerData:E,stsTokenManager:_}=s;Yr(j&&_,t,"internal-error");const S=Ah.fromJSON(this.name,_);Yr(typeof j=="string",t,"internal-error"),yu(f,t.name),yu(p,t.name),Yr(typeof C=="boolean",t,"internal-error"),Yr(typeof B=="boolean",t,"internal-error"),yu(m,t.name),yu(g,t.name),yu(b,t.name),yu(v,t.name),yu(y,t.name),yu(w,t.name);const N=new cl({uid:j,auth:t,email:p,emailVerified:C,displayName:f,isAnonymous:B,photoURL:g,phoneNumber:m,tenantId:b,stsTokenManager:S,createdAt:y,lastLoginAt:w});return E&&Array.isArray(E)&&(N.providerData=E.map(O=>Object.assign({},O))),v&&(N._redirectEventId=v),N}static async _fromIdTokenResponse(t,s,i=!1){const a=new Ah;a.updateFromServerResponse(s);const o=new cl({uid:s.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await u0(o),o}static async _fromGetAccountInfoResponse(t,s,i){const a=s.users[0];Yr(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?S3(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,l=new Ah;l.updateFromIdToken(i);const u=new cl({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:c}),d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Ov(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new Map;function Ic(r){Lc(r instanceof Function,"Expected a class definition");let t=UN.get(r);return t?(Lc(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,UN.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,s){this.storage[t]=s}async _get(t){const s=this.storage[t];return s===void 0?null:s}async _remove(t){delete this.storage[t]}_addListener(t,s){}_removeListener(t,s){}}C3.type="NONE";const LN=C3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(r,t,s){return`firebase:${r}:${t}:${s}`}class hh{constructor(t,s,i){this.persistence=t,this.auth=s,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=Pg(this.userKey,a.apiKey,o),this.fullPersistenceKey=Pg("persistence",a.apiKey,o),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const s=await c0(this.auth,{idToken:t}).catch(()=>{});return s?cl._fromGetAccountInfoResponse(this.auth,s,t):null}return cl._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,s,i="authUser"){if(!s.length)return new hh(Ic(LN),t,i);const a=(await Promise.all(s.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=a[0]||Ic(LN);const c=Pg(i,t.config.apiKey,t.name);let l=null;for(const d of s)try{const A=await d._get(c);if(A){let f;if(typeof A=="string"){const p=await c0(t,{idToken:A}).catch(()=>{});if(!p)break;f=await cl._fromGetAccountInfoResponse(t,p,A)}else f=cl._fromJSON(t,A);d!==o&&(l=f),o=d;break}}catch{}const u=a.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new hh(o,t,i):(o=u[0],l&&await o._set(c,l.toJSON()),await Promise.all(s.map(async d=>{if(d!==o)try{await d._remove(c)}catch{}})),new hh(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(E3(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(B3(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(I3(t))return"Blackberry";if(P3(t))return"Webos";if(k3(t))return"Safari";if((t.includes("chrome/")||_3(t))&&!t.includes("edge/"))return"Chrome";if(O3(t))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(s);if(i?.length===2)return i[1]}return"Other"}function B3(r=La()){return/firefox\//i.test(r)}function k3(r=La()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _3(r=La()){return/crios\//i.test(r)}function E3(r=La()){return/iemobile/i.test(r)}function O3(r=La()){return/android/i.test(r)}function I3(r=La()){return/blackberry/i.test(r)}function P3(r=La()){return/webos/i.test(r)}function w1(r=La()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function HF(r=La()){var t;return w1(r)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function VF(){return iT()&&document.documentMode===10}function T3(r=La()){return w1(r)||O3(r)||P3(r)||I3(r)||/windows phone/i.test(r)||E3(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(r,t=[]){let s;switch(r){case"Browser":s=DN(La());break;case"Worker":s=`${DN(La())}-${r}`;break;default:s=r}const i=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${Ph}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,s){const i=o=>new Promise((c,l)=>{try{const u=t(o);c(u)}catch(u){l(u)}});i.onAbort=s,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const s=[];try{for(const i of this.queue)await i(t),i.onAbort&&s.push(i.onAbort)}catch(i){s.reverse();for(const a of s)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(r,t={}){return nd(r,"GET","/v2/passwordPolicy",rd(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=6;class WF{constructor(t){var s,i,a,o;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=c.minPasswordLength)!==null&&s!==void 0?s:GF,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var s,i,a,o,c,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsLowercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNumericCharacter)!==null&&c!==void 0?c:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(t,s){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(s.meetsMinPasswordLength=t.length>=i),a&&(s.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(s,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,s,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(t,s,i,a){this.app=t,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MN(this),this.idTokenSubscription=new MN(this),this.beforeStateQueue=new zF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,s){return s&&(this._popupRedirectResolver=Ic(s)),this._initializationPromise=this.queue(async()=>{var i,a,o;if(!this._deleted&&(this.persistenceManager=await hh.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const s=await c0(this,{idToken:t}),i=await cl._fromGetAccountInfoResponse(this,s,t);await this.directlySetCurrentUser(i)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Uo(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,l=a?._redirectEventId,u=await this.tryRedirectSignIn(t);(!c||c===l)&&u?.user&&(a=u.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Yr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(t){try{await u0(t)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=BF()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Uo(this.app))return Promise.reject(Pc(this));const s=t?$o(t):null;return s&&Yr(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(t,s=!1){if(!this._deleted)return t&&Yr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Uo(this.app)?Promise.reject(Pc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Uo(this.app)?Promise.reject(Pc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ic(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await KF(this),s=new WF(t);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Fp("auth","Firebase",t())}onAuthStateChanged(t,s,i){return this.registerStateListener(this.authStateSubscription,t,s,i)}beforeAuthStateChanged(t,s){return this.beforeStateQueue.pushCallback(t,s)}onIdTokenChanged(t,s,i){return this.registerStateListener(this.idTokenSubscription,t,s,i)}authStateReady(){return new Promise((t,s)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},s)}})}async revokeAccessToken(t){if(this.currentUser){const s=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:s};this.tenantId!=null&&(i.tenantId=this.tenantId),await $F(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,s){const i=await this.getOrInitRedirectPersistenceManager(s);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const s=t&&Ic(t)||this._popupRedirectResolver;Yr(s,this,"argument-error"),this.redirectPersistenceManager=await hh.create(this,[Ic(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var s,i;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(s=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,s,i,a){if(this._deleted)return()=>{};const o=typeof s=="function"?s:s.next.bind(s);let c=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yr(l,this,"internal-error"),l.then(()=>{c||o(this.currentUser)}),typeof s=="function"){const u=t.addObserver(s,i,a);return()=>{c=!0,u()}}else{const u=t.addObserver(s);return()=>{c=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Yr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=F3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(s["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(s["X-Firebase-AppCheck"]=a),s}async _getAppCheckToken(){var t;if(Uo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const s=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return s?.error&&NF(`Error while retrieving App Check token: ${s.error}`),s?.token}}function aA(r){return $o(r)}class MN{constructor(t){this.auth=t,this.observer=null,this.addObserver=AT(s=>this.observer=s)}get next(){return Yr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ny={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YF(r){ny=r}function U3(r){return ny.loadJS(r)}function XF(){return ny.recaptchaEnterpriseScript}function JF(){return ny.gapiScript}function ZF(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class eU{constructor(){this.enterprise=new tU}ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}class tU{ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}const rU="recaptcha-enterprise",L3="NO_RECAPTCHA";class nU{constructor(t){this.type=rU,this.auth=aA(t)}async verify(t="verify",s=!1){async function i(o){if(!s){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,l)=>{TF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new PF(u);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,c(d.siteKey)}}).catch(u=>{l(u)})})}function a(o,c,l){const u=window.grecaptcha;TN(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:t}).then(d=>{c(d)}).catch(()=>{c(L3)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eU().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(l=>{if(!s&&TN(window.grecaptcha))a(l,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let u=XF();u.length!==0&&(u+=l),U3(u).then(()=>{a(l,o,c)}).catch(d=>{c(d)})}}).catch(l=>{c(l)})})}}async function RN(r,t,s,i=!1,a=!1){const o=new nU(r);let c;if(a)c=L3;else try{c=await o.verify(s)}catch{c=await o.verify(s,!0)}const l=Object.assign({},t);if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:c}):Object.assign(l,{captchaResponse:c}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Iv(r,t,s,i,a){var o;if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await RN(r,t,s,s==="getOobCode");return i(r,c)}else return i(r,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await RN(r,t,s,s==="getOobCode");return i(r,l)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(r,t){const s=g1(r,"auth");if(s.isInitialized()){const a=s.getImmediate(),o=s.getOptions();if(Nh(o,t??{}))return a;ml(a,"already-initialized")}return s.initialize({options:t})}function iU(r,t){const s=t?.persistence||[],i=(Array.isArray(s)?s:[s]).map(Ic);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(i,t?.popupRedirectResolver)}function aU(r,t,s){const i=aA(r);Yr(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!1,o=D3(t),{host:c,port:l}=oU(t),u=l===null?"":`:${l}`,d={url:`${o}//${c}${u}/`},A=Object.freeze({host:c,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Yr(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Yr(Nh(d,i.config.emulator)&&Nh(A,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=A,i.settings.appVerificationDisabledForTesting=!0,Ih(c)?(u3(`${o}//${c}${u}`),d3("Auth",!0)):lU()}function D3(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function oU(r){const t=D3(r),s=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!s)return{host:"",port:null};const i=s[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:QN(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:QN(c)}}}function QN(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function lU(){function r(){const t=document.createElement("p"),s=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(t,s){this.providerId=t,this.signInMethod=s}toJSON(){return Oc("not implemented")}_getIdTokenResponse(t){return Oc("not implemented")}_linkToIdToken(t,s){return Oc("not implemented")}_getReauthenticationResolver(t){return Oc("not implemented")}}async function cU(r,t){return nd(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(r,t){return Dp(r,"POST","/v1/accounts:signInWithPassword",rd(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dU(r,t){return Dp(r,"POST","/v1/accounts:signInWithEmailLink",rd(r,t))}async function AU(r,t){return Dp(r,"POST","/v1/accounts:signInWithEmailLink",rd(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends j1{constructor(t,s,i,a=null){super("password",i),this._email=t,this._password=s,this._tenantId=a}static _fromEmailAndPassword(t,s){return new fp(t,s,"password")}static _fromEmailAndCode(t,s,i=null){return new fp(t,s,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Iv(t,s,"signInWithPassword",uU);case"emailLink":return dU(t,{email:this._email,oobCode:this._password});default:ml(t,"internal-error")}}async _linkToIdToken(t,s){switch(this.signInMethod){case"password":const i={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Iv(t,i,"signUpPassword",cU);case"emailLink":return AU(t,{idToken:s,email:this._email,oobCode:this._password});default:ml(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fh(r,t){return Dp(r,"POST","/v1/accounts:signInWithIdp",rd(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU="http://localhost";class Xd extends j1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const s=new Xd(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(s.idToken=t.idToken),t.accessToken&&(s.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(s.nonce=t.nonce),t.pendingToken&&(s.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(s.accessToken=t.oauthToken,s.secret=t.oauthTokenSecret):ml("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a}=s,o=y1(s,["providerId","signInMethod"]);if(!i||!a)return null;const c=new Xd(i,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const s=this.buildRequest();return fh(t,s)}_linkToIdToken(t,s){const i=this.buildRequest();return i.idToken=s,fh(t,i)}_getReauthenticationResolver(t){const s=this.buildRequest();return s.autoCreate=!1,fh(t,s)}buildRequest(){const t={requestUri:hU,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),t.postBody=Up(s)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pU(r){const t=Tf(Ff(r)).link,s=t?Tf(Ff(t)).deep_link_id:null,i=Tf(Ff(r)).deep_link_id;return(i?Tf(Ff(i)).link:null)||i||s||t||r}class N1{constructor(t){var s,i,a,o,c,l;const u=Tf(Ff(t)),d=(s=u.apiKey)!==null&&s!==void 0?s:null,A=(i=u.oobCode)!==null&&i!==void 0?i:null,f=fU((a=u.mode)!==null&&a!==void 0?a:null);Yr(d&&A&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=A,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=u.lang)!==null&&c!==void 0?c:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(t){const s=pU(t);try{return new N1(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this.providerId=Th.PROVIDER_ID}static credential(t,s){return fp._fromEmailAndPassword(t,s)}static credentialWithLink(t,s){const i=N1.parseLink(s);return Yr(i,"argument-error"),fp._fromEmailAndCode(t,i.code,i.tenantId)}}Th.PROVIDER_ID="password";Th.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Th.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends M3{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends Mp{constructor(){super("facebook.com")}static credential(t){return Xd._fromParams({providerId:Cu.PROVIDER_ID,signInMethod:Cu.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cu.credentialFromTaggedObject(t)}static credentialFromError(t){return Cu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cu.credential(t.oauthAccessToken)}catch{return null}}}Cu.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends Mp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,s){return Xd._fromParams({providerId:Bu.PROVIDER_ID,signInMethod:Bu.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:s})}static credentialFromResult(t){return Bu.credentialFromTaggedObject(t)}static credentialFromError(t){return Bu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:s,oauthAccessToken:i}=t;if(!s&&!i)return null;try{return Bu.credential(s,i)}catch{return null}}}Bu.GOOGLE_SIGN_IN_METHOD="google.com";Bu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends Mp{constructor(){super("github.com")}static credential(t){return Xd._fromParams({providerId:ku.PROVIDER_ID,signInMethod:ku.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ku.credentialFromTaggedObject(t)}static credentialFromError(t){return ku.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ku.credential(t.oauthAccessToken)}catch{return null}}}ku.GITHUB_SIGN_IN_METHOD="github.com";ku.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Mp{constructor(){super("twitter.com")}static credential(t,s){return Xd._fromParams({providerId:_u.PROVIDER_ID,signInMethod:_u.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:s})}static credentialFromResult(t){return _u.credentialFromTaggedObject(t)}static credentialFromError(t){return _u.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:s,oauthTokenSecret:i}=t;if(!s||!i)return null;try{return _u.credential(s,i)}catch{return null}}}_u.TWITTER_SIGN_IN_METHOD="twitter.com";_u.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mU(r,t){return Dp(r,"POST","/v1/accounts:signUp",rd(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,s,i,a=!1){const o=await cl._fromIdTokenResponse(t,i,a),c=$N(i);return new Jd({user:o,providerId:c,_tokenResponse:i,operationType:s})}static async _forOperation(t,s,i){await t._updateTokensIfNecessary(i,!0);const a=$N(i);return new Jd({user:t,providerId:a,_tokenResponse:i,operationType:s})}}function $N(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends zc{constructor(t,s,i,a){var o;super(s.code,s.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,d0.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:s.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,s,i,a){return new d0(t,s,i,a)}}function R3(r,t,s,i){return(t==="reauthenticate"?s._getReauthenticationResolver(r):s._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?d0._fromErrorAndOperation(r,o,t,i):o})}async function gU(r,t,s=!1){const i=await hp(r,t._linkToIdToken(r.auth,await r.getIdToken()),s);return Jd._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yU(r,t,s=!1){const{auth:i}=r;if(Uo(i.app))return Promise.reject(Pc(i));const a="reauthenticate";try{const o=await hp(r,R3(i,a,t,r),s);Yr(o.idToken,i,"internal-error");const c=v1(o.idToken);Yr(c,i,"internal-error");const{sub:l}=c;return Yr(r.uid===l,i,"user-mismatch"),Jd._forOperation(r,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&ml(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3(r,t,s=!1){if(Uo(r.app))return Promise.reject(Pc(r));const i="signIn",a=await R3(r,i,t),o=await Jd._fromIdTokenResponse(r,i,a);return s||await r._updateCurrentUser(o.user),o}async function xU(r,t){return Q3(aA(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3(r){const t=aA(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function bU(r,t,s){if(Uo(r.app))return Promise.reject(Pc(r));const i=aA(r),c=await Iv(i,{returnSecureToken:!0,email:t,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mU).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&$3(r),u}),l=await Jd._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(l.user),l}function HN(r,t,s){return Uo(r.app)?Promise.reject(Pc(r)):xU($o(r),Th.credential(t,s)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&$3(r),i})}function vU(r,t,s,i){return $o(r).onIdTokenChanged(t,s,i)}function wU(r,t,s){return $o(r).beforeAuthStateChanged(t,s)}function jU(r){return $o(r).signOut()}const A0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(t,s){this.storageRetriever=t,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(A0,"1"),this.storage.removeItem(A0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,s){return this.storage.setItem(t,JSON.stringify(s)),Promise.resolve()}_get(t){const s=this.storage.getItem(t);return Promise.resolve(s?JSON.parse(s):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=1e3,SU=10;class V3 extends H3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,s)=>this.onStorageEvent(t,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T3(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const s of Object.keys(this.listeners)){const i=this.storage.getItem(s),a=this.localCache[s];i!==a&&t(s,a,i)}}onStorageEvent(t,s=!1){if(!t.key){this.forAllChangedKeys((c,l,u)=>{this.notifyListeners(c,u)});return}const i=t.key;s?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!s&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);VF()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,SU):a()}notifyListeners(t,s){this.localCache[t]=s;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,s,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:s,newValue:i}),!0)})},NU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,s){await super._set(t,s),this.localCache[t]=JSON.stringify(s)}async _get(t){const s=await super._get(t);return this.localCache[t]=JSON.stringify(s),s}async _remove(t){await super._remove(t),delete this.localCache[t]}}V3.type="LOCAL";const CU=V3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3 extends H3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,s){}_removeListener(t,s){}}z3.type="SESSION";const K3=z3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const s=this.receivers.find(a=>a.isListeningto(t));if(s)return s;const i=new sy(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const s=t,{eventId:i,eventType:a,data:o}=s.data,c=this.handlersMap[a];if(!c?.size)return;s.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const l=Array.from(c).map(async d=>d(s.origin,o)),u=await BU(l);s.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:u})}_subscribe(t,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(s)}_unsubscribe(t,s){this.handlersMap[t]&&s&&this.handlersMap[t].delete(s),(!s||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(r="",t=10){let s="";for(let i=0;i<t;i++)s+=Math.floor(Math.random()*10);return r+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,s,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((l,u)=>{const d=S1("",20);a.port1.start();const A=setTimeout(()=>{u(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(A),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(p.data.response);break;default:clearTimeout(A),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:d,data:s},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(){return window}function _U(r){Yl().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(){return typeof Yl().WorkerGlobalScope<"u"&&typeof Yl().importScripts=="function"}async function EU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OU(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function IU(){return G3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="firebaseLocalStorageDb",PU=1,h0="firebaseLocalStorage",q3="fbase_key";class Rp{constructor(t){this.request=t}toPromise(){return new Promise((t,s)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function iy(r,t){return r.transaction([h0],t?"readwrite":"readonly").objectStore(h0)}function TU(){const r=indexedDB.deleteDatabase(W3);return new Rp(r).toPromise()}function Pv(){const r=indexedDB.open(W3,PU);return new Promise((t,s)=>{r.addEventListener("error",()=>{s(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(h0,{keyPath:q3})}catch(a){s(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(h0)?t(i):(i.close(),await TU(),t(await Pv()))})})}async function VN(r,t,s){const i=iy(r,!0).put({[q3]:t,value:s});return new Rp(i).toPromise()}async function FU(r,t){const s=iy(r,!1).get(t),i=await new Rp(s).toPromise();return i===void 0?null:i.value}function zN(r,t){const s=iy(r,!0).delete(t);return new Rp(s).toPromise()}const UU=800,LU=3;class Y3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pv(),this.db)}async _withRetries(t){let s=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(s++>LU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sy._getInstance(IU()),this.receiver._subscribe("keyChanged",async(t,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(t,s)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await EU(),!this.activeServiceWorker)return;this.sender=new kU(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((s=i[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||OU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Pv();return await VN(t,A0,"1"),await zN(t,A0),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,s){return this._withPendingWrite(async()=>(await this._withRetries(i=>VN(i,t,s)),this.localCache[t]=s,this.notifyServiceWorker(t)))}async _get(t){const s=await this._withRetries(i=>FU(i,t));return this.localCache[t]=s,s}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(s=>zN(s,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const o=iy(a,!1).getAll();return new Rp(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const s=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:o}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),s.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),s.push(a));return s}notifyListeners(t,s){this.localCache[t]=s;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y3.type="LOCAL";const DU=Y3;new Lp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(r,t){return t?Ic(t):(Yr(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1 extends j1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return fh(t,this._buildIdpRequest())}_linkToIdToken(t,s){return fh(t,this._buildIdpRequest(s))}_getReauthenticationResolver(t){return fh(t,this._buildIdpRequest())}_buildIdpRequest(t){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(s.idToken=t),s}}function RU(r){return Q3(r.auth,new C1(r),r.bypassAuthState)}function QU(r){const{auth:t,user:s}=r;return Yr(s,t,"internal-error"),yU(s,new C1(r),r.bypassAuthState)}async function $U(r){const{auth:t,user:s}=r;return Yr(s,t,"internal-error"),gU(s,new C1(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(t,s,i,a,o=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(t,s)=>{this.pendingPromise={resolve:t,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:s,sessionId:i,postBody:a,tenantId:o,error:c,type:l}=t;if(c){this.reject(c);return}const u={auth:this.auth,requestUri:s,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return RU;case"linkViaPopup":case"linkViaRedirect":return $U;case"reauthViaPopup":case"reauthViaRedirect":return QU;default:ml(this.auth,"internal-error")}}resolve(t){Lc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Lc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=new Lp(2e3,1e4);class eh extends X3{constructor(t,s,i,a,o){super(t,s,a,o),this.provider=i,this.authWindow=null,this.pollId=null,eh.currentPopupAction&&eh.currentPopupAction.cancel(),eh.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Yr(t,this.auth,"internal-error"),t}async onExecution(){Lc(this.filter.length===1,"Popup operations only handle one event");const t=S1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(ql(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ql(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eh.currentPopupAction=null}pollUserCancellation(){const t=()=>{var s,i;if(!((i=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ql(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,HU.get())};t()}}eh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU="pendingRedirect",Tg=new Map;class zU extends X3{constructor(t,s,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,i),this.eventId=null}async execute(){let t=Tg.get(this.auth._key());if(!t){try{const i=await KU(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(s){t=()=>Promise.reject(s)}Tg.set(this.auth._key(),t)}return this.bypassAuthState||Tg.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const s=await this.auth._redirectUserForId(t.eventId);if(s)return this.user=s,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KU(r,t){const s=qU(t),i=WU(r);if(!await i._isAvailable())return!1;const a=await i._get(s)==="true";return await i._remove(s),a}function GU(r,t){Tg.set(r._key(),t)}function WU(r){return Ic(r._redirectPersistence)}function qU(r){return Pg(VU,r.config.apiKey,r.name)}async function YU(r,t,s=!1){if(Uo(r.app))return Promise.reject(Pc(r));const i=aA(r),a=MU(i,t),c=await new zU(i,a,s).execute();return c&&!s&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=600*1e3;class JU{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let s=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(s=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!ZU(t)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=t,s=!0)),s}sendToConsumer(t,s){var i;if(t.error&&!J3(t)){const a=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";s.onError(ql(this.auth,a))}else s.onAuthEvent(t)}isEventForConsumer(t,s){const i=s.eventId===null||!!t.eventId&&t.eventId===s.eventId;return s.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=XU&&this.cachedEventUids.clear(),this.cachedEventUids.has(KN(t))}saveEventToCache(t){this.cachedEventUids.add(KN(t)),this.lastProcessedEventTime=Date.now()}}function KN(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function J3({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function ZU(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J3(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(r,t={}){return nd(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rL=/^https?/;async function nL(r){if(r.config.emulator)return;const{authorizedDomains:t}=await eL(r);for(const s of t)try{if(sL(s))return}catch{}ml(r,"unauthorized-domain")}function sL(r){const t=Ev(),{protocol:s,hostname:i}=new URL(t);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?s==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):s==="chrome-extension:"&&c.hostname===i}if(!rL.test(s))return!1;if(tL.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new Lp(3e4,6e4);function GN(){const r=Yl().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let s=0;s<r.CP.length;s++)r.CP[s]=null}}function aL(r){return new Promise((t,s)=>{var i,a,o;function c(){GN(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{GN(),s(ql(r,"network-request-failed"))},timeout:iL.get()})}if(!((a=(i=Yl().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((o=Yl().gapi)===null||o===void 0)&&o.load)c();else{const l=ZF("iframefcb");return Yl()[l]=()=>{gapi.load?c():s(ql(r,"network-request-failed"))},U3(`${JF()}?onload=${l}`).catch(u=>s(u))}}).catch(t=>{throw Fg=null,t})}let Fg=null;function oL(r){return Fg=Fg||aL(r),Fg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=new Lp(5e3,15e3),cL="__/auth/iframe",uL="emulator/auth/iframe",dL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hL(r){const t=r.config;Yr(t.authDomain,r,"auth-domain-config-required");const s=t.emulator?b1(t,uL):`https://${r.config.authDomain}/${cL}`,i={apiKey:t.apiKey,appName:r.name,v:Ph},a=AL.get(r.config.apiHost);a&&(i.eid=a);const o=r._getFrameworks();return o.length&&(i.fw=o.join(",")),`${s}?${Up(i).slice(1)}`}async function fL(r){const t=await oL(r),s=Yl().gapi;return Yr(s,r,"internal-error"),t.open({where:document.body,url:hL(r),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dL,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const c=ql(r,"network-request-failed"),l=Yl().setTimeout(()=>{o(c)},lL.get());function u(){Yl().clearTimeout(l),a(i)}i.ping(u).then(u,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mL=500,gL=600,yL="_blank",xL="http://localhost";class WN{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bL(r,t,s,i=mL,a=gL){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},pL),{width:i.toString(),height:a.toString(),top:o,left:c}),d=La().toLowerCase();s&&(l=_3(d)?yL:s),B3(d)&&(t=t||xL,u.scrollbars="yes");const A=Object.entries(u).reduce((p,[m,g])=>`${p}${m}=${g},`,"");if(HF(d)&&l!=="_self")return vL(t||"",l),new WN(null);const f=window.open(t||"",l,A);Yr(f,r,"popup-blocked");try{f.focus()}catch{}return new WN(f)}function vL(r,t){const s=document.createElement("a");s.href=r,s.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL="__/auth/handler",jL="emulator/auth/handler",NL=encodeURIComponent("fac");async function qN(r,t,s,i,a,o){Yr(r.config.authDomain,r,"auth-domain-config-required"),Yr(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:s,redirectUrl:i,v:Ph,eventId:a};if(t instanceof M3){t.setDefaultLanguage(r.languageCode),c.providerId=t.providerId||"",dT(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,f]of Object.entries({}))c[A]=f}if(t instanceof Mp){const A=t.getScopes().filter(f=>f!=="");A.length>0&&(c.scopes=A.join(","))}r.tenantId&&(c.tid=r.tenantId);const l=c;for(const A of Object.keys(l))l[A]===void 0&&delete l[A];const u=await r._getAppCheckToken(),d=u?`#${NL}=${encodeURIComponent(u)}`:"";return`${SL(r)}?${Up(l).slice(1)}${d}`}function SL({config:r}){return r.emulator?b1(r,jL):`https://${r.authDomain}/${wL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="webStorageSupport";class CL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=K3,this._completeRedirectFn=YU,this._overrideRedirectResult=GU}async _openPopup(t,s,i,a){var o;Lc((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await qN(t,s,i,Ev(),a);return bL(t,c,S1())}async _openRedirect(t,s,i,a){await this._originValidation(t);const o=await qN(t,s,i,Ev(),a);return _U(o),new Promise(()=>{})}_initialize(t){const s=t._key();if(this.eventManagers[s]){const{manager:a,promise:o}=this.eventManagers[s];return a?Promise.resolve(a):(Lc(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[s]={promise:i},i.catch(()=>{delete this.eventManagers[s]}),i}async initAndGetManager(t){const s=await fL(t),i=new JU(t);return s.register("authEvent",a=>(Yr(a?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=s,i}_isIframeWebStorageSupported(t,s){this.iframes[t._key()].send(Dx,{type:Dx},a=>{var o;const c=(o=a?.[0])===null||o===void 0?void 0:o[Dx];c!==void 0&&s(!!c),ml(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const s=t._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=nL(t)),this.originValidationPromises[s]}get _shouldInitProactively(){return T3()||k3()||w1()}}const BL=CL;var YN="@firebase/auth",XN="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const s=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,s),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const s=this.internalListeners.get(t);s&&(this.internalListeners.delete(t),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Yr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EL(r){Sh(new Yd("auth",(t,{options:s})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:l}=i.options;Yr(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:c,authDomain:l,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F3(r)},d=new qF(i,a,o,u);return iU(d,s),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,s,i)=>{t.getProvider("auth-internal").initialize()})),Sh(new Yd("auth-internal",t=>{const s=aA(t.getProvider("auth").getImmediate());return(i=>new kL(i))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ru(YN,XN,_L(r)),Ru(YN,XN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=300,IL=c3("authIdTokenMaxAge")||OL;let JN=null;const PL=r=>async t=>{const s=t&&await t.getIdTokenResult(),i=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(i&&i>IL)return;const a=s?.token;JN!==a&&(JN=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function TL(r=m3()){const t=g1(r,"auth");if(t.isInitialized())return t.getImmediate();const s=sU(r,{popupRedirectResolver:BL,persistence:[DU,CU,K3]}),i=c3("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=PL(o.toString());wU(s,c,()=>c(s.currentUser)),vU(s,l=>c(l))}}const a=o3("auth");return a&&aU(s,`http://${a}`),s}function FL(){var r,t;return(t=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:document}YF({loadJS(r){return new Promise((t,s)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=t,i.onerror=a=>{const o=ql("internal-error");o.customData=a,s(o)},i.type="text/javascript",i.charset="UTF-8",FL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EL("Browser");var UL="firebase",LL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ru(UL,LL,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="firebasestorage.googleapis.com",ek="storageBucket",DL=120*1e3,ML=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends zc{constructor(t,s,i=0){super(Mx(t),`Firebase Storage: ${s} (${Mx(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ni.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Mx(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ri;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ri||(ri={}));function Mx(r){return"storage/"+r}function B1(){const r="An unknown error occurred, please check the error payload for server response.";return new ni(ri.UNKNOWN,r)}function RL(r){return new ni(ri.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function QL(r){return new ni(ri.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function $L(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ni(ri.UNAUTHENTICATED,r)}function HL(){return new ni(ri.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function VL(r){return new ni(ri.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function zL(){return new ni(ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KL(){return new ni(ri.CANCELED,"User canceled the upload/download.")}function GL(r){return new ni(ri.INVALID_URL,"Invalid URL '"+r+"'.")}function WL(r){return new ni(ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function qL(){return new ni(ri.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ek+"' property when initializing the app?")}function YL(){return new ni(ri.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function XL(){return new ni(ri.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JL(r){return new ni(ri.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tv(r){return new ni(ri.INVALID_ARGUMENT,r)}function tk(){return new ni(ri.APP_DELETED,"The Firebase app was deleted.")}function ZL(r){return new ni(ri.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qf(r,t){return new ni(ri.INVALID_FORMAT,"String does not match format '"+r+"': "+t)}function gf(r){throw new ni(ri.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t,s){this.bucket=t,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,s){let i;try{i=Ao.makeFromUrl(t,s)}catch{return new Ao(t,"")}if(i.path==="")return i;throw WL(t)}static makeFromUrl(t,s){let i=null;const a="([A-Za-z0-9.\\-_]+)";function o(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const c="(/(.*))?$",l=new RegExp("^gs://"+a+c,"i"),u={bucket:1,path:3};function d(C){C.path_=decodeURIComponent(C.path)}const A="v[A-Za-z0-9_]+",f=s.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${A}/b/${a}/o${p}`,"i"),g={bucket:1,path:3},b=s===Z3?"(?:storage.googleapis.com|storage.cloud.google.com)":s,v="([^?#]*)",y=new RegExp(`^https?://${b}/${a}/${v}`,"i"),j=[{regex:l,indices:u,postModify:o},{regex:m,indices:g,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let C=0;C<j.length;C++){const B=j[C],E=B.regex.exec(t);if(E){const _=E[B.indices.bucket];let S=E[B.indices.path];S||(S=""),i=new Ao(_,S),B.postModify(i);break}}if(i==null)throw GL(t);return i}}class eD{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(r,t,s){let i=1,a=null,o=null,c=!1,l=0;function u(){return l===2}let d=!1;function A(...v){d||(d=!0,t.apply(null,v))}function f(v){a=setTimeout(()=>{a=null,r(m,u())},v)}function p(){o&&clearTimeout(o)}function m(v,...y){if(d){p();return}if(v){p(),A.call(null,v,...y);return}if(u()||c){p(),A.call(null,v,...y);return}i<64&&(i*=2);let j;l===1?(l=2,j=0):j=(i+Math.random())*1e3,f(j)}let g=!1;function b(v){g||(g=!0,p(),!d&&(a!==null?(v||(l=2),clearTimeout(a),f(0)):v||(l=1)))}return f(0),o=setTimeout(()=>{c=!0,b(!0)},s),b}function rD(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(r){return r!==void 0}function sD(r){return typeof r=="object"&&!Array.isArray(r)}function k1(r){return typeof r=="string"||r instanceof String}function ZN(r){return _1()&&r instanceof Blob}function _1(){return typeof Blob<"u"}function e5(r,t,s,i){if(i<t)throw Tv(`Invalid value for '${r}'. Expected ${t} or greater.`);if(i>s)throw Tv(`Invalid value for '${r}'. Expected ${s} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(r,t,s){let i=t;return s==null&&(i=`https://${t}`),`${s}://${i}/v0${r}`}function rk(r){const t=encodeURIComponent;let s="?";for(const i in r)if(r.hasOwnProperty(i)){const a=t(i)+"="+t(r[i]);s=s+a+"&"}return s=s.slice(0,-1),s}var $d;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})($d||($d={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(r,t){const s=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,o=t.indexOf(r)!==-1;return s||a||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(t,s,i,a,o,c,l,u,d,A,f,p=!0,m=!1){this.url_=t,this.method_=s,this.headers_=i,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=A,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,b)=>{this.resolve_=g,this.reject_=b,this.start_()})}start_(){const t=(i,a)=>{if(a){i(!1,new Lm(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const l=o.getErrorCode()===$d.NO_ERROR,u=o.getStatus();if(!l||iD(u,this.additionalRetryCodes_)&&this.retry){const A=o.getErrorCode()===$d.ABORT;i(!1,new Lm(!1,null,A));return}const d=this.successCodes_.indexOf(u)!==-1;i(!0,new Lm(d,o))})},s=(i,a)=>{const o=this.resolve_,c=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());nD(u)?o(u):o()}catch(u){c(u)}else if(l!==null){const u=B1();u.serverResponse=l.getErrorText(),this.errorCallback_?c(this.errorCallback_(l,u)):c(u)}else if(a.canceled){const u=this.appDelete_?tk():KL();c(u)}else{const u=zL();c(u)}};this.canceled_?s(!1,new Lm(!1,null,!0)):this.backoffId_=tD(t,s,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&rD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Lm{constructor(t,s,i){this.wasSuccessCode=t,this.connection=s,this.canceled=!!i}}function oD(r,t){t!==null&&t.length>0&&(r.Authorization="Firebase "+t)}function lD(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function cD(r,t){t&&(r["X-Firebase-GMPID"]=t)}function uD(r,t){t!==null&&(r["X-Firebase-AppCheck"]=t)}function dD(r,t,s,i,a,o,c=!0,l=!1){const u=rk(r.urlParams),d=r.url+u,A=Object.assign({},r.headers);return cD(A,t),oD(A,s),lD(A,o),uD(A,i),new aD(d,r.method,A,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,c,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function hD(...r){const t=AD();if(t!==void 0){const s=new t;for(let i=0;i<r.length;i++)s.append(r[i]);return s.getBlob()}else{if(_1())return new Blob(r);throw new ni(ri.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fD(r,t,s){return r.webkitSlice?r.webkitSlice(t,s):r.mozSlice?r.mozSlice(t,s):r.slice?r.slice(t,s):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(r){if(typeof atob>"u")throw JL("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rx{constructor(t,s){this.data=t,this.contentType=s||null}}function mD(r,t){switch(r){case Vl.RAW:return new Rx(nk(t));case Vl.BASE64:case Vl.BASE64URL:return new Rx(sk(r,t));case Vl.DATA_URL:return new Rx(yD(t),xD(t))}throw B1()}function nk(r){const t=[];for(let s=0;s<r.length;s++){let i=r.charCodeAt(s);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(s<r.length-1&&(r.charCodeAt(s+1)&64512)===56320))t.push(239,191,189);else{const o=i,c=r.charCodeAt(++s);i=65536|(o&1023)<<10|c&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function gD(r){let t;try{t=decodeURIComponent(r)}catch{throw qf(Vl.DATA_URL,"Malformed data URL.")}return nk(t)}function sk(r,t){switch(r){case Vl.BASE64:{const a=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(a||o)throw qf(r,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Vl.BASE64URL:{const a=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(a||o)throw qf(r,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let s;try{s=pD(t)}catch(a){throw a.message.includes("polyfill")?a:qf(r,"Invalid character found")}const i=new Uint8Array(s.length);for(let a=0;a<s.length;a++)i[a]=s.charCodeAt(a);return i}class ik{constructor(t){this.base64=!1,this.contentType=null;const s=t.match(/^data:([^,]+)?,/);if(s===null)throw qf(Vl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=s[1]||null;i!=null&&(this.base64=bD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function yD(r){const t=new ik(r);return t.base64?sk(Vl.BASE64,t.rest):gD(t.rest)}function xD(r){return new ik(r).contentType}function bD(r,t){return r.length>=t.length?r.substring(r.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(t,s){let i=0,a="";ZN(t)?(this.data_=t,i=t.size,a=t.type):t instanceof ArrayBuffer?(s?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(s?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,s){if(ZN(this.data_)){const i=this.data_,a=fD(i,t,s);return a===null?null:new Eu(a)}else{const i=new Uint8Array(this.data_.buffer,t,s-t);return new Eu(i,!0)}}static getBlob(...t){if(_1()){const s=t.map(i=>i instanceof Eu?i.data_:i);return new Eu(hD.apply(null,s))}else{const s=t.map(c=>k1(c)?mD(Vl.RAW,c).data:c.data_);let i=0;s.forEach(c=>{i+=c.byteLength});const a=new Uint8Array(i);let o=0;return s.forEach(c=>{for(let l=0;l<c.length;l++)a[o++]=c[l]}),new Eu(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(r){let t;try{t=JSON.parse(r)}catch{return null}return sD(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(r){if(r.length===0)return null;const t=r.lastIndexOf("/");return t===-1?"":r.slice(0,t)}function wD(r,t){const s=t.split("/").filter(i=>i.length>0).join("/");return r.length===0?s:r+"/"+s}function ok(r){const t=r.lastIndexOf("/",r.length-2);return t===-1?r:r.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(r,t){return t}class Oa{constructor(t,s,i,a){this.server=t,this.local=s||t,this.writable=!!i,this.xform=a||jD}}let Dm=null;function ND(r){return!k1(r)||r.length<2?r:ok(r)}function lk(){if(Dm)return Dm;const r=[];r.push(new Oa("bucket")),r.push(new Oa("generation")),r.push(new Oa("metageneration")),r.push(new Oa("name","fullPath",!0));function t(o,c){return ND(c)}const s=new Oa("name");s.xform=t,r.push(s);function i(o,c){return c!==void 0?Number(c):c}const a=new Oa("size");return a.xform=i,r.push(a),r.push(new Oa("timeCreated")),r.push(new Oa("updated")),r.push(new Oa("md5Hash",null,!0)),r.push(new Oa("cacheControl",null,!0)),r.push(new Oa("contentDisposition",null,!0)),r.push(new Oa("contentEncoding",null,!0)),r.push(new Oa("contentLanguage",null,!0)),r.push(new Oa("contentType",null,!0)),r.push(new Oa("metadata","customMetadata",!0)),Dm=r,Dm}function SD(r,t){function s(){const i=r.bucket,a=r.fullPath,o=new Ao(i,a);return t._makeStorageReference(o)}Object.defineProperty(r,"ref",{get:s})}function CD(r,t,s){const i={};i.type="file";const a=s.length;for(let o=0;o<a;o++){const c=s[o];i[c.local]=c.xform(i,t[c.server])}return SD(i,r),i}function ck(r,t,s){const i=ak(t);return i===null?null:CD(r,i,s)}function BD(r,t,s,i){const a=ak(t);if(a===null||!k1(a.downloadTokens))return null;const o=a.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(d=>{const A=r.bucket,f=r.fullPath,p="/b/"+c(A)+"/o/"+c(f),m=E1(p,s,i),g=rk({alt:"media",token:d});return m+g})[0]}function kD(r,t){const s={},i=t.length;for(let a=0;a<i;a++){const o=t[a];o.writable&&(s[o.server]=r[o.local])}return JSON.stringify(s)}class uk{constructor(t,s,i,a){this.url=t,this.method=s,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(r){if(!r)throw B1()}function _D(r,t){function s(i,a){const o=ck(r,a,t);return dk(o!==null),o}return s}function ED(r,t){function s(i,a){const o=ck(r,a,t);return dk(o!==null),BD(o,a,r.host,r._protocol)}return s}function Ak(r){function t(s,i){let a;return s.getStatus()===401?s.getErrorText().includes("Firebase App Check token is invalid")?a=HL():a=$L():s.getStatus()===402?a=QL(r.bucket):s.getStatus()===403?a=VL(r.path):a=i,a.status=s.getStatus(),a.serverResponse=i.serverResponse,a}return t}function OD(r){const t=Ak(r);function s(i,a){let o=t(i,a);return i.getStatus()===404&&(o=RL(r.path)),o.serverResponse=a.serverResponse,o}return s}function ID(r,t,s){const i=t.fullServerUrl(),a=E1(i,r.host,r._protocol),o="GET",c=r.maxOperationRetryTime,l=new uk(a,o,ED(r,s),c);return l.errorHandler=OD(t),l}function PD(r,t){return r&&r.contentType||t&&t.type()||"application/octet-stream"}function TD(r,t,s){const i=Object.assign({},s);return i.fullPath=r.path,i.size=t.size(),i.contentType||(i.contentType=PD(null,t)),i}function FD(r,t,s,i,a){const o=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function l(){let j="";for(let C=0;C<2;C++)j=j+Math.random().toString().slice(2);return j}const u=l();c["Content-Type"]="multipart/related; boundary="+u;const d=TD(t,i,a),A=kD(d,s),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+A+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",m=Eu.getBlob(f,i,p);if(m===null)throw YL();const g={name:d.fullPath},b=E1(o,r.host,r._protocol),v="POST",y=r.maxUploadRetryTime,w=new uk(b,v,_D(r,s),y);return w.urlParams=g,w.headers=c,w.body=m.uploadData(),w.errorHandler=Ak(t),w}class UD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$d.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$d.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$d.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,s,i,a,o){if(this.sent_)throw gf("cannot .send() more than once");if(Ih(t)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(s,t,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw gf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class LD extends UD{initXhr(){this.xhr_.responseType="text"}}function hk(){return new LD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t,s){this._service=t,s instanceof Ao?this._location=s:this._location=Ao.makeFromUrl(s,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,s){return new Zd(t,s)}get root(){const t=new Ao(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ok(this._location.path)}get storage(){return this._service}get parent(){const t=vD(this._location.path);if(t===null)return null;const s=new Ao(this._location.bucket,t);return new Zd(this._service,s)}_throwIfRoot(t){if(this._location.path==="")throw ZL(t)}}function DD(r,t,s){r._throwIfRoot("uploadBytes");const i=FD(r.storage,r._location,lk(),new Eu(t,!0),s);return r.storage.makeRequestWithTokens(i,hk).then(a=>({metadata:a,ref:r}))}function MD(r){r._throwIfRoot("getDownloadURL");const t=ID(r.storage,r._location,lk());return r.storage.makeRequestWithTokens(t,hk).then(s=>{if(s===null)throw XL();return s})}function RD(r,t){const s=wD(r._location.path,t),i=new Ao(r._location.bucket,s);return new Zd(r.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(r){return/^[A-Za-z]+:\/\//.test(r)}function $D(r,t){return new Zd(r,t)}function fk(r,t){if(r instanceof O1){const s=r;if(s._bucket==null)throw qL();const i=new Zd(s,s._bucket);return t!=null?fk(i,t):i}else return t!==void 0?RD(r,t):r}function HD(r,t){if(t&&QD(t)){if(r instanceof O1)return $D(r,t);throw Tv("To use ref(service, url), the first argument must be a Storage instance.")}else return fk(r,t)}function t5(r,t){const s=t?.[ek];return s==null?null:Ao.makeFromBucketSpec(s,r)}function VD(r,t,s,i={}){r.host=`${t}:${s}`;const a=Ih(t);a&&(u3(`https://${r.host}/b`),d3("Storage",!0)),r._isUsingEmulator=!0,r._protocol=a?"https":"http";const{mockUserToken:o}=i;o&&(r._overrideAuthToken=typeof o=="string"?o:J8(o,r.app.options.projectId))}class O1{constructor(t,s,i,a,o,c=!1){this.app=t,this._authProvider=s,this._appCheckProvider=i,this._url=a,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=Z3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DL,this._maxUploadRetryTime=ML,this._requests=new Set,a!=null?this._bucket=Ao.makeFromBucketSpec(a,this._host):this._bucket=t5(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ao.makeFromBucketSpec(this._url,t):this._bucket=t5(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){e5("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){e5("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const s=await t.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(Uo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Zd(this,t)}_makeRequest(t,s,i,a,o=!0){if(this._deleted)return new eD(tk());{const c=dD(t,this._appId,i,a,s,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,s){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,s,i,a).getPromise()}}const r5="@firebase/storage",n5="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="storage";function ul(r,t,s){return r=$o(r),DD(r,t,s)}function dl(r){return r=$o(r),MD(r)}function Al(r,t){return r=$o(r),HD(r,t)}function zD(r=m3(),t){r=$o(r);const i=g1(r,pk).getImmediate({identifier:t}),a=Y8("storage");return a&&KD(i,...a),i}function KD(r,t,s,i={}){VD(r,t,s,i)}function GD(r,{instanceIdentifier:t}){const s=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new O1(s,i,a,t,Ph)}function WD(){Sh(new Yd(pk,GD,"PUBLIC").setMultipleInstances(!0)),Ru(r5,n5,""),Ru(r5,n5,"esm2017")}WD();const qD={apiKey:"AIzaSyCg8I0ffnAWnoXOf_2nECrwY2CS6RQItUs",authDomain:"all-in-one-98568.firebaseapp.com",projectId:"all-in-one-98568",storageBucket:"all-in-one-98568.firebasestorage.app",messagingSenderId:"86801808333",appId:"1:86801808333:web:7bd536c9fa784b32ed2284"},mk=p3(qD),hl=zD(mk),yf=TL(mk),gk=ee.createContext(),Fn=()=>{const r=ee.useContext(gk);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},YD=({children:r})=>{const[t,s]=ee.useState(null),[i,a]=ee.useState(!0);ee.useEffect(()=>{o()},[]);const o=async()=>{try{const p=await fetch("http://localhost:10000/api/auth/me",{method:"GET",credentials:"include"});if(p.ok){const m=await p.json();s(m.user)}else s(null)}catch(p){console.error("Error fetching user:",p),s(null)}finally{a(!1)}},f={user:t,login:async(p,m)=>{try{try{await HN(yf,p,m)}catch{return{success:!1,error:"Firebase login failed"}}const g=await fetch("http://localhost:10000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:p,password:m})}),b=await g.json();return g.ok?(s(b.user),{success:!0}):{success:!1,error:b.error}}catch{return{success:!1,error:"Network error"}}},register:async p=>{try{await bU(yf,p.email,p.password),await HN(yf,p.email,p.password);const m=await fetch("http://localhost:10000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(p)}),g=await m.json();if(m.ok)return s(g.user),{success:!0};{const b=yf.currentUser;return b&&await b.delete(),{success:!1,error:g.error}}}catch(m){return{success:!1,error:"Registration failed: "+m.message}}},logout:async()=>{try{await fetch("http://localhost:10000/api/auth/logout",{method:"POST",credentials:"include"})}catch(p){console.error("Error during logout:",p)}finally{s(null),jU(yf)}},refreshUser:async()=>{try{const p=await fetch("http://localhost:10000/api/auth/me",{method:"GET",credentials:"include"});if(p.ok){const m=await p.json();s(m.user)}else s(null)}catch(p){console.error("Error refreshing user:",p),s(null)}},switchRole:async()=>{try{const p=await fetch("http://localhost:10000/api/auth/switch-role",{method:"PUT",credentials:"include"});if(p.ok){const m=await p.json();return s(g=>({...g,role:m.role})),{success:!0,role:m.role}}else return{success:!1,error:(await p.json()).error}}catch{return{success:!1,error:"Network error"}}},loading:i};return n.jsx(gk.Provider,{value:f,children:r})},Vr="http://localhost:10000",zr=()=>(localStorage.getItem("token"),{"Content-Type":"application/json"}),Kr=async r=>{let t;try{t=await r.json()}catch{t={success:!1,message:`Server returned invalid response (${r.status})`}}if(!r.ok){let s=t.message||"API request failed";switch(r.status){case 400:s=`Bad Request: ${t.message||"Invalid request parameters"}`;break;case 401:s="Authentication required. Please login again.",window.location.pathname.includes("/login")||(window.location.href="/login");break;case 403:s="Access denied. Admin privileges required.";break;case 404:s=`Resource not found: ${t.message||"The requested item was not found"}`;break;case 429:s="Too many requests. Please try again later.";break;case 500:s="Internal server error. Please contact support if this persists.";break;case 502:case 503:case 504:s="Service temporarily unavailable. Please try again later.";break;default:s=`Request failed (${r.status}): ${t.message||"Unknown error"}`}const i=new Error(s);throw i.status=r.status,i.response=t,i}return t},Pa={getSummary:async()=>{const r=await fetch(`${Vr}/api/wallet/summary`,{credentials:"include",headers:zr()});return Kr(r)},getDetails:async()=>{const r=await fetch(`${Vr}/api/wallet/details`,{credentials:"include",headers:zr()});return Kr(r)},getTransactions:async(r={})=>{const t=new URLSearchParams(r).toString(),s=await fetch(`${Vr}/api/wallet/transactions?${t}`,{credentials:"include",headers:zr()});return Kr(s)},getAnalytics:async(r="month")=>{const t=await fetch(`${Vr}/api/wallet/analytics?period=${r}`,{credentials:"include",headers:zr()});return Kr(t)},requestWithdrawal:async r=>{const t=await fetch(`${Vr}/api/wallet/withdraw`,{method:"POST",credentials:"include",headers:zr(),body:JSON.stringify(r)});return Kr(t)},updateSettings:async r=>{const t=await fetch(`${Vr}/api/wallet/settings`,{method:"PUT",credentials:"include",headers:zr(),body:JSON.stringify(r)});return Kr(t)},getBankDetails:async()=>{const r=await fetch(`${Vr}/api/wallet/bank-details`,{credentials:"include",headers:zr()});return Kr(r)},updateBankDetails:async r=>{const t=await fetch(`${Vr}/api/wallet/bank-details`,{method:"PUT",credentials:"include",headers:zr(),body:JSON.stringify(r)});return Kr(t)},submitBankChangeRequest:async r=>{const t=await fetch(`${Vr}/api/wallet/bank-details/change-request`,{method:"POST",credentials:"include",headers:zr(),body:JSON.stringify(r)});return Kr(t)},getBankChangeRequests:async()=>{const r=await fetch(`${Vr}/api/wallet/bank-details/change-requests`,{credentials:"include",headers:zr()});return Kr(r)},cancelBankChangeRequest:async r=>{const t=await fetch(`${Vr}/api/wallet/bank-details/change-request/${r}`,{method:"DELETE",credentials:"include",headers:zr()});return Kr(t)},getCreditPackages:async()=>{const r=await fetch(`${Vr}/api/wallet/credits/packages`,{credentials:"include",headers:zr()});return Kr(r)},purchaseCredits:async r=>{const t=await fetch(`${Vr}/api/wallet/credits/purchase`,{method:"POST",credentials:"include",headers:zr(),body:JSON.stringify({packageId:r})});return Kr(t)},getCredits:async(r=1,t=10)=>{const s=await fetch(`${Vr}/api/wallet/credits?page=${r}&limit=${t}`,{credentials:"include",headers:zr()});return Kr(s)}},Dt={getPendingWithdrawals:async(r={})=>{const t=new URLSearchParams(r).toString(),s=await fetch(`${Vr}/api/admin/withdrawals/pending?${t}`,{credentials:"include",headers:zr()});return Kr(s)},getAllWithdrawals:async(r={})=>{const t=new URLSearchParams(r).toString(),s=await fetch(`${Vr}/api/admin/withdrawals?${t}`,{credentials:"include",headers:zr()});return Kr(s)},processWithdrawal:async(r,t)=>{const s=await fetch(`${Vr}/api/admin/withdrawals/${r}/process`,{method:"PUT",credentials:"include",headers:zr(),body:JSON.stringify(t)});return Kr(s)},getAnalytics:async(r={})=>{const t=new URLSearchParams(r).toString(),s=await fetch(`${Vr}/api/admin/analytics?${t}`,{credentials:"include",headers:zr()});return Kr(s)},getCollectionData:async(r,t={})=>{const s=new URLSearchParams(t).toString(),i=await fetch(`${Vr}/api/admin/${r}?${s}`,{credentials:"include",headers:zr()});return Kr(i)},getCollectionItem:async(r,t)=>{const s=await fetch(`${Vr}/api/admin/${r}/${t}`,{credentials:"include",headers:zr()});return Kr(s)},createCollectionItem:async(r,t)=>{const s=await fetch(`${Vr}/api/admin/${r}`,{method:"POST",credentials:"include",headers:zr(),body:JSON.stringify(t)});return Kr(s)},updateCollectionItem:async(r,t,s)=>{const i=await fetch(`${Vr}/api/admin/${r}/${t}`,{method:"PUT",credentials:"include",headers:zr(),body:JSON.stringify(s)});return Kr(i)},deleteCollectionItem:async(r,t)=>{const s=await fetch(`${Vr}/api/admin/${r}/${t}`,{method:"DELETE",credentials:"include",headers:zr()});return Kr(s)},toggleItemStatus:async(r,t)=>{const s=await fetch(`${Vr}/api/admin/${r}/${t}/toggle-status`,{method:"PATCH",credentials:"include",headers:zr()});return Kr(s)},bulkOperation:async(r,t,s,i={})=>{const a=await fetch(`${Vr}/api/admin/${r}/bulk`,{method:"POST",credentials:"include",headers:zr(),body:JSON.stringify({ids:s,action:t,data:i})});return Kr(a)},getSystemStats:async()=>{const r=await fetch(`${Vr}/api/admin/system/stats`,{credentials:"include",headers:zr()});return Kr(r)},getAnalyticsDashboard:async(r="30")=>{const t=await fetch(`${Vr}/api/admin/analytics/dashboard?period=${r}`,{credentials:"include",headers:zr()});return Kr(t)},getSystemHealth:async()=>{const r=await fetch(`${Vr}/api/admin/system/health`,{credentials:"include",headers:zr()});return Kr(r)},getActivityLogs:async(r={})=>{const t=new URLSearchParams(r).toString(),s=await fetch(`${Vr}/api/admin/activity-logs?${t}`,{credentials:"include",headers:zr()});return Kr(s)},getAllUsers:(r={})=>Dt.getCollectionData("all-users",r),createUser:r=>Dt.createCollectionItem("all-users",r),updateUser:(r,t)=>Dt.updateCollectionItem("all-users",r,t),deleteUser:r=>Dt.deleteCollectionItem("all-users",r),getAllStores:(r={})=>Dt.getCollectionData("all-stores",r),createStore:r=>Dt.createCollectionItem("all-stores",r),updateStore:(r,t)=>Dt.updateCollectionItem("all-stores",r,t),deleteStore:r=>Dt.deleteCollectionItem("all-stores",r),getAllProducts:(r={})=>Dt.getCollectionData("all-products",r),createProduct:r=>Dt.createCollectionItem("all-products",r),updateProduct:(r,t)=>Dt.updateCollectionItem("all-products",r,t),deleteProduct:r=>Dt.deleteCollectionItem("all-products",r),getAllServices:(r={})=>Dt.getCollectionData("all-services",r),createService:r=>Dt.createCollectionItem("all-services",r),updateService:(r,t)=>Dt.updateCollectionItem("all-services",r,t),deleteService:r=>Dt.deleteCollectionItem("all-services",r),getAllOrders:(r={})=>Dt.getCollectionData("all-orders",r),updateOrder:(r,t)=>Dt.updateCollectionItem("all-orders",r,t),deleteOrder:r=>Dt.deleteCollectionItem("all-orders",r),getAllBookings:(r={})=>Dt.getCollectionData("all-bookings",r),updateBooking:(r,t)=>Dt.updateCollectionItem("all-bookings",r,t),deleteBooking:r=>Dt.deleteCollectionItem("all-bookings",r),getAllChats:(r={})=>Dt.getCollectionData("all-chats",r),deleteChat:r=>Dt.deleteCollectionItem("all-chats",r),getAllChatAnalytics:(r={})=>Dt.getCollectionData("all-chat-analytics",r),getAllCommissions:(r={})=>Dt.getCollectionData("all-commissions",r),updateCommission:(r,t)=>Dt.updateCollectionItem("all-commissions",r,t),getAllContactReveals:(r={})=>Dt.getCollectionData("all-contact-reveals",r),getAllEmailSubscriptions:(r={})=>Dt.getCollectionData("all-email-subscriptions",r),createEmailSubscription:r=>Dt.createCollectionItem("all-email-subscriptions",r),updateEmailSubscription:(r,t)=>Dt.updateCollectionItem("all-email-subscriptions",r,t),deleteEmailSubscription:r=>Dt.deleteCollectionItem("all-email-subscriptions",r),getAllFlashDeals:(r={})=>Dt.getCollectionData("all-flash-deals",r),createFlashDeal:r=>Dt.createCollectionItem("all-flash-deals",r),updateFlashDeal:(r,t)=>Dt.updateCollectionItem("all-flash-deals",r,t),deleteFlashDeal:r=>Dt.deleteCollectionItem("all-flash-deals",r),getAllNotifications:(r={})=>Dt.getCollectionData("all-notifications",r),createNotification:r=>Dt.createCollectionItem("all-notifications",r),updateNotification:(r,t)=>Dt.updateCollectionItem("all-notifications",r,t),deleteNotification:r=>Dt.deleteCollectionItem("all-notifications",r),getAllPackages:(r={})=>Dt.getCollectionData("all-packages",r),createPackage:r=>Dt.createCollectionItem("all-packages",r),updatePackage:(r,t)=>Dt.updateCollectionItem("all-packages",r,t),deletePackage:r=>Dt.deleteCollectionItem("all-packages",r),getAllPlatformSettings:(r={})=>Dt.getCollectionData("all-platform-settings",r),createPlatformSetting:r=>Dt.createCollectionItem("all-platform-settings",r),updatePlatformSetting:(r,t)=>Dt.updateCollectionItem("all-platform-settings",r,t),deletePlatformSetting:r=>Dt.deleteCollectionItem("all-platform-settings",r),getAllPosts:(r={})=>Dt.getCollectionData("all-posts",r),updatePost:(r,t)=>Dt.updateCollectionItem("all-posts",r,t),deletePost:r=>Dt.deleteCollectionItem("all-posts",r),getAllPostComments:(r={})=>Dt.getCollectionData("all-post-comments",r),updatePostComment:(r,t)=>Dt.updateCollectionItem("all-post-comments",r,t),deletePostComment:r=>Dt.deleteCollectionItem("all-post-comments",r),getAllPostLikes:(r={})=>Dt.getCollectionData("all-post-likes",r),deletePostLike:r=>Dt.deleteCollectionItem("all-post-likes",r),getAllReviews:(r={})=>Dt.getCollectionData("all-reviews",r),updateReview:(r,t)=>Dt.updateCollectionItem("all-reviews",r,t),deleteReview:r=>Dt.deleteCollectionItem("all-reviews",r),getAllSearchHistory:(r={})=>Dt.getCollectionData("all-search-history",r),deleteSearchHistory:r=>Dt.deleteCollectionItem("all-search-history",r),getAllSubscriptions:(r={})=>Dt.getCollectionData("all-subscriptions",r),updateSubscription:(r,t)=>Dt.updateCollectionItem("all-subscriptions",r,t),deleteSubscription:r=>Dt.deleteCollectionItem("all-subscriptions",r),getAllTimeSlots:(r={})=>Dt.getCollectionData("all-time-slots",r),createTimeSlot:r=>Dt.createCollectionItem("all-time-slots",r),updateTimeSlot:(r,t)=>Dt.updateCollectionItem("all-time-slots",r,t),deleteTimeSlot:r=>Dt.deleteCollectionItem("all-time-slots",r),getAllCategories:(r={})=>Dt.getCollectionData("all-categories",r),createCategory:r=>Dt.createCollectionItem("all-categories",r),updateCategory:(r,t)=>Dt.updateCollectionItem("all-categories",r,t),deleteCategory:r=>Dt.deleteCollectionItem("all-categories",r),getAllVariants:(r={})=>Dt.getCollectionData("all-variants",r),createVariant:r=>Dt.createCollectionItem("all-variants",r),updateVariant:(r,t)=>Dt.updateCollectionItem("all-variants",r,t),deleteVariant:r=>Dt.deleteCollectionItem("all-variants",r),getAllWallets:(r={})=>Dt.getCollectionData("all-wallets",r),updateWallet:(r,t)=>Dt.updateCollectionItem("all-wallets",r,t),getAllAddons:(r={})=>Dt.getCollectionData("all-addons",r),createAddon:r=>Dt.createCollectionItem("all-addons",r),updateAddon:(r,t)=>Dt.updateCollectionItem("all-addons",r,t),deleteAddon:r=>Dt.deleteCollectionItem("all-addons",r),getAllCommentLikes:(r={})=>Dt.getCollectionData("all-comment-likes",r),deleteCommentLike:r=>Dt.deleteCollectionItem("all-comment-likes",r),getAllCommentReactions:(r={})=>Dt.getCollectionData("all-comment-reactions",r),deleteCommentReaction:r=>Dt.deleteCollectionItem("all-comment-reactions",r),getAllMarketing:(r={})=>Dt.getCollectionData("all-marketing",r),createMarketing:r=>Dt.createCollectionItem("all-marketing",r),updateMarketing:(r,t)=>Dt.updateCollectionItem("all-marketing",r,t),deleteMarketing:r=>Dt.deleteCollectionItem("all-marketing",r),exportCollectionData:async(r,t="csv")=>{const s=await fetch(`${Vr}/api/admin/${r}?limit=10000`,{credentials:"include",headers:zr()}),i=await Kr(s);return t==="csv"?Dt.convertToCSV(i.data.items,r):i.data.items},convertToCSV:(r,t)=>{if(!r||r.length===0)return"";const s=Object.keys(r[0]).filter(a=>a!=="__v").join(","),i=r.map(a=>Object.keys(a).filter(o=>o!=="__v").map(o=>{const c=a[o];return typeof c=="object"&&c!==null?JSON.stringify(c).replace(/"/g,'""'):`"${String(c).replace(/"/g,'""')}"`}).join(","));return[s,...i].join(`
`)},downloadCSV:(r,t)=>{const s=new Blob([r],{type:"text/csv"}),i=window.URL.createObjectURL(s),a=document.createElement("a");a.href=i,a.download=`${t}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i)}},Qx={revealContact:async(r,t=null)=>{const s=await fetch(`${Vr}/api/stores/${r}/reveal-contact`,{method:"POST",credentials:"include",headers:zr(),body:JSON.stringify({recaptchaToken:t})});return Kr(s)},canReveal:async r=>{const t=await fetch(`${Vr}/api/stores/${r}/can-reveal`,{credentials:"include",headers:zr()});return Kr(t)},getMyReveals:async(r=1,t=10)=>{const s=await fetch(`${Vr}/api/my-reveals?page=${r}&limit=${t}`,{credentials:"include",headers:zr()});return Kr(s)},getStoreReveals:async(r,t="month",s=1,i=20)=>{const a=await fetch(`${Vr}/api/stores/${r}/reveals?period=${t}&page=${s}&limit=${i}`,{credentials:"include",headers:zr()});return Kr(a)}},xu={getCart:async()=>{const r=await fetch(`${Vr}/api/cart`,{credentials:"include",headers:zr()});return Kr(r)},addToCart:async r=>{const t=await fetch(`${Vr}/api/cart/add`,{method:"POST",credentials:"include",headers:zr(),body:JSON.stringify(r)});return Kr(t)},updateQuantity:async(r,t)=>{const s=await fetch(`${Vr}/api/cart/update/${r}`,{method:"PUT",credentials:"include",headers:zr(),body:JSON.stringify({quantity:t})});return Kr(s)},removeFromCart:async(r,t=!1)=>{const s=await fetch(`${Vr}/api/cart/remove/${r}?permanent=${t}`,{method:"DELETE",credentials:"include",headers:zr()});return Kr(s)},clearCart:async(r=!1)=>{const t=await fetch(`${Vr}/api/cart/clear?permanent=${r}`,{method:"DELETE",credentials:"include",headers:zr()});return Kr(t)},getCartAnalytics:async(r=30)=>{const t=await fetch(`${Vr}/api/cart/analytics?days=${r}`,{credentials:"include",headers:zr()});return Kr(t)},getCartState:async()=>{const r=await fetch(`${Vr}/api/cart/state`,{credentials:"include",headers:zr()});return Kr(r)}},DA={getWishlist:async()=>{const r=await fetch(`${Vr}/api/wishlist`,{credentials:"include",headers:zr()});return Kr(r)},addToWishlist:async r=>{const t=await fetch(`${Vr}/api/wishlist/add`,{method:"POST",credentials:"include",headers:zr(),body:JSON.stringify(r)});return Kr(t)},removeFromWishlist:async r=>{const t=await fetch(`${Vr}/api/wishlist/remove/${r}`,{method:"DELETE",credentials:"include",headers:zr()});return Kr(t)},updateItemPriority:async(r,t)=>{const s=await fetch(`${Vr}/api/wishlist/priority/${r}`,{method:"PUT",credentials:"include",headers:zr(),body:JSON.stringify({priority:t})});return Kr(s)},updateItemNotes:async(r,t)=>{const s=await fetch(`${Vr}/api/wishlist/notes/${r}`,{method:"PUT",credentials:"include",headers:zr(),body:JSON.stringify({notes:t})});return Kr(s)},moveToCart:async(r,t=1,s=null)=>{const i=await fetch(`${Vr}/api/wishlist/move-to-cart/${r}`,{method:"POST",credentials:"include",headers:zr(),body:JSON.stringify({quantity:t,bookingDetails:s})});return Kr(i)},filterWishlist:async(r={})=>{const t=new URLSearchParams(r).toString(),s=await fetch(`${Vr}/api/wishlist/filter?${t}`,{credentials:"include",headers:zr()});return Kr(s)},shareWishlist:async()=>{const r=await fetch(`${Vr}/api/wishlist/share`,{method:"POST",credentials:"include",headers:zr()});return Kr(r)},removeSharing:async()=>{const r=await fetch(`${Vr}/api/wishlist/share`,{method:"DELETE",credentials:"include",headers:zr()});return Kr(r)},getSharedWishlist:async r=>{const t=await fetch(`${Vr}/api/wishlist/shared/${r}`,{headers:zr()});return Kr(t)}},yk=ee.createContext(),ac=()=>{const r=ee.useContext(yk);if(!r)throw new Error("useCart must be used within a CartProvider");return r},xf=(r,t)=>{const s=o=>{if(!o||Object.keys(o).length===0)return{};const c={};return Object.keys(o).filter(l=>o[l]!==null&&o[l]!==void 0&&o[l]!=="").sort().forEach(l=>{c[l]=o[l]}),c},i=s(r),a=s(t);return JSON.stringify(i)===JSON.stringify(a)},XD=({children:r,showToast:t})=>{const{user:s}=Fn(),[i,a]=ee.useState([]),[o,c]=ee.useState([]),[l,u]=ee.useState(!1),[d,A]=ee.useState(!navigator.onLine),[f,p]=ee.useState(!1);ee.useEffect(()=>{(async()=>{if(!s){const N=localStorage.getItem("order"),O=localStorage.getItem("bookings");N&&a(JSON.parse(N)),O&&c(JSON.parse(O));return}try{u(!0);const N=await xu.getCart();if(N.success){const{items:O}=N.cart,k=O.filter(R=>R.itemType==="product"),I=O.filter(R=>R.itemType==="service");a(k.map(R=>({id:R.itemId._id||R.itemId,title:R.title,price:R.price,image:R.image,quantity:R.quantity,storeId:R.storeId._id||R.storeId,_cartItemId:R._id}))),c(I.map(R=>({id:R.itemId._id||R.itemId,title:R.title,price:R.price,image:R.image,date:R.bookingDetails?.date,time:R.bookingDetails?.time,storeId:R.storeId._id||R.storeId,_cartItemId:R._id})))}}catch(N){console.error("Failed to load cart:",N);const O=localStorage.getItem("order"),k=localStorage.getItem("bookings");O&&a(JSON.parse(O)),k&&c(JSON.parse(k))}finally{u(!1)}})()},[s]),ee.useEffect(()=>{(!s||d)&&localStorage.setItem("order",JSON.stringify(i))},[i,s,d]),ee.useEffect(()=>{(!s||d)&&localStorage.setItem("bookings",JSON.stringify(o))},[o,s,d]),ee.useEffect(()=>{const S=()=>{A(!1),f&&s&&m()},N=()=>{A(!0)};return window.addEventListener("online",S),window.addEventListener("offline",N),()=>{window.removeEventListener("online",S),window.removeEventListener("offline",N)}},[f,s]);const m=async()=>{if(!(!s||d))try{p(!1)}catch(S){console.error("Failed to sync cart:",S)}},g=async(S,N=1,O=null)=>{try{const k={itemType:"product",itemId:S._id,quantity:N,variants:O};if(s&&!d){u(!0);const I=await xu.addToCart(k);if(I.success){const{items:R,cartType:Q}=I.cart,{warnings:$,clearedItems:L,wasTypeSwitch:F}=I;if(Q==="product"){const G=R.filter(X=>X.itemType==="product");a(G.map(X=>({id:X.itemId._id||X.itemId,title:X.title,price:X.price,image:X.image,quantity:X.quantity,storeId:X.storeId._id||X.storeId,_cartItemId:X._id}))),F&&c([])}$&&$.length>0?t&&t($.join(". ")):t&&t("Product added to cart!")}}else{if(o.length>0){if(!window.confirm("You have existing bookings in your cart. Adding a product will clear your bookings. Continue?"))return;c([])}a(I=>I.find(Q=>Q.id===S._id&&xf(Q.variants,O))?I.map(Q=>Q.id===S._id&&xf(Q.variants,O)?{...Q,quantity:Q.quantity+N}:Q):[...I,{id:S._id,title:S.title,price:S.price,image:S.images?.[0],quantity:N,variants:O,storeId:typeof S.storeId=="object"?S.storeId._id:S.storeId||S.storeId}]),p(!0),t&&t("Product added to cart!")}}catch(k){console.error("Failed to add to cart:",k),t&&t("Failed to add product to cart. Please try again.")}finally{u(!1)}},b=async(S,N)=>{try{const O={itemType:"service",itemId:S._id,quantity:1,bookingDetails:N};if(s&&!d){u(!0);const k=await xu.addToCart(O);if(k.success){const{items:I,cartType:R}=k.cart,{warnings:Q,clearedItems:$,wasTypeSwitch:L}=k;if(R==="service"){const F=I.filter(G=>G.itemType==="service");c(F.map(G=>({id:G.itemId._id||G.itemId,title:G.title,price:G.price,image:G.image,date:G.bookingDetails?.date,time:G.bookingDetails?.time,storeId:G.storeId._id||G.storeId,_cartItemId:G._id}))),L&&a([])}Q&&Q.length>0?t&&t(Q.join(". ")):t&&t("Service booked successfully!")}}else{if(i.length>0){if(!window.confirm("You have existing products in your cart. Adding a service will clear your products. Continue?"))return;a([])}c([{id:S._id,title:S.title,price:S.price,image:S.images?.[0],bookingDetails:N,date:N.date,time:N.time,storeId:typeof S.storeId=="object"?S.storeId._id:S.storeId||S.storeId}]),p(!0),t&&t("Service booked successfully!")}}catch(O){console.error("Failed to add booking:",O),t&&t("Failed to book service. Please try again.")}finally{u(!1)}},v=async(S,N=null)=>{try{const O=i.find(k=>k.id===S);if(s&&!d&&O?._cartItemId){u(!0);const k=await xu.removeFromCart(O._cartItemId);if(k.success){const{items:I}=k.cart,R=I.filter(Q=>Q.itemType==="product");a(R.map(Q=>({id:Q.itemId._id||Q.itemId,title:Q.title,price:Q.price,image:Q.image,quantity:Q.quantity,storeId:Q.storeId._id||Q.storeId,_cartItemId:Q._id})))}}else a(k=>k.filter(I=>!(I.id===S&&xf(I.variants,N)))),p(!0)}catch(O){console.error("Failed to remove item:",O),t&&t("Failed to remove item. Please try again.")}finally{u(!1)}},y=async(S,N,O=null)=>{if(N<=0){await v(S,O);return}try{const k=i.find(I=>I.id===S);if(s&&!d&&k?._cartItemId){u(!0);const I=await xu.updateQuantity(k._cartItemId,N);if(I.success){const{items:R}=I.cart,Q=R.filter($=>$.itemType==="product");a(Q.map($=>({id:$.itemId._id||$.itemId,title:$.title,price:$.price,image:$.image,quantity:$.quantity,storeId:$.storeId._id||$.storeId,_cartItemId:$._id})))}else t&&t(I.message||"Failed to update quantity")}else{const I=i.find(R=>R.id===S&&xf(R.variants,O));if(I&&I.itemType==="service"&&N!==1){t&&t("Service bookings cannot have quantity changed");return}a(R=>R.map(Q=>Q.id===S&&xf(Q.variants,O)?{...Q,quantity:N}:Q)),p(!0)}}catch(k){console.error("Failed to update quantity:",k);const I=k.response?.data?.message||"Failed to update quantity. Please try again.";t&&t(I)}finally{u(!1)}},w=async S=>{try{const N=o.find(O=>O.id===S);if(s&&!d&&N?._cartItemId){u(!0);const O=await xu.removeFromCart(N._cartItemId);if(O.success){const{items:k}=O.cart,I=k.filter(R=>R.itemType==="service");c(I.map(R=>({id:R.itemId._id||R.itemId,title:R.title,price:R.price,image:R.image,date:R.bookingDetails?.date,time:R.bookingDetails?.time,storeId:R.storeId._id||R.storeId,_cartItemId:R._id})))}}else c(O=>O.filter(k=>k.id!==S)),p(!0)}catch(N){console.error("Failed to remove booking:",N),t&&t("Failed to remove booking. Please try again.")}finally{u(!1)}},j=async()=>{try{s&&!d&&(u(!0),await xu.clearCart()),a([]),p(!0)}catch(S){console.error("Failed to clear orders:",S),a([])}finally{u(!1)}},C=async()=>{try{s&&!d&&(u(!0),await xu.clearCart()),c([]),p(!0)}catch(S){console.error("Failed to clear bookings:",S),c([])}finally{u(!1)}},B=i.reduce((S,N)=>S+N.price*N.quantity,0),E=o.reduce((S,N)=>S+N.price,0),_={orderItems:i,bookingItems:o,addToOrder:g,removeFromOrder:v,updateQuantity:y,addToBooking:b,removeFromBooking:w,clearOrder:j,clearBookings:C,orderTotal:B,bookingTotal:E,isLoading:l,isOffline:d,syncPending:f,syncCartWithServer:m};return n.jsx(yk.Provider,{value:_,children:r})},xk=ee.createContext(),ay=()=>{const r=ee.useContext(xk);if(!r)throw new Error("useWishlist must be used within a WishlistProvider");return r},JD=({children:r,showToast:t})=>{const{user:s}=Fn(),[i,a]=ee.useState([]),[o,c]=ee.useState(!1),[l,u]=ee.useState(!navigator.onLine),[d,A]=ee.useState(!1);ee.useEffect(()=>{(async()=>{if(!s){const E=localStorage.getItem("wishlist");E&&a(JSON.parse(E));return}try{c(!0);const E=await DA.getWishlist();E.success&&a(E.wishlist.items||[])}catch(E){console.error("Failed to load wishlist:",E);const _=localStorage.getItem("wishlist");_&&a(JSON.parse(_))}finally{c(!1)}})()},[s]),ee.useEffect(()=>{(!s||l)&&localStorage.setItem("wishlist",JSON.stringify(i))},[i,s,l]),ee.useEffect(()=>{const B=()=>{u(!1),d&&s&&f()},E=()=>{u(!0)};return window.addEventListener("online",B),window.addEventListener("offline",E),()=>{window.removeEventListener("online",B),window.removeEventListener("offline",E)}},[d,s]);const f=async()=>{if(!(!s||l))try{A(!1)}catch(B){console.error("Failed to sync wishlist:",B)}},C={wishlistItems:i,isLoading:o,isOffline:l,syncPending:d,addToWishlist:async(B,E="medium",_="")=>{try{const S={itemType:B.type||"product",itemId:B._id,priority:E,notes:_};if(s&&!l){c(!0);const N=await DA.addToWishlist(S);if(N.success)return a(N.wishlist.items||[]),t&&t(`${B.title} added to wishlist!`),!0}else{if(i.find(k=>k.itemId===B._id))return t&&t("Item already in wishlist!"),!1;const O={_id:Date.now().toString(),itemType:B.type||(B.timeSlots?"service":"product"),itemId:B._id,title:B.title,description:B.description||"",price:B.price,image:B.images?.[0]||null,storeId:typeof B.storeId=="object"?B.storeId._id:B.storeId,storeName:typeof B.storeId=="object"?B.storeId.name:"",priority:E,notes:_,isAvailable:!0,addedAt:new Date().toISOString()};return a(k=>[...k,O]),A(!0),t&&t(`${B.title} added to wishlist!`),!0}}catch(S){return console.error("Failed to add to wishlist:",S),S.message?.includes("already in wishlist")?t&&t("Item already in wishlist!"):t&&t("Failed to add item to wishlist. Please try again."),!1}finally{c(!1)}},removeFromWishlist:async B=>{try{const E=i.find(_=>_._id===B||_.itemId===B);if(s&&!l&&!E?._id?.toString().startsWith("temp_")){c(!0);const _=await DA.removeFromWishlist(E._id);_.success&&(a(_.wishlist.items||[]),t&&t("Item removed from wishlist!"))}else a(_=>_.filter(S=>S._id!==B&&S.itemId!==B)),A(!0),t&&t("Item removed from wishlist!")}catch(E){console.error("Failed to remove from wishlist:",E),t&&t("Failed to remove item. Please try again.")}finally{c(!1)}},updateItemPriority:async(B,E)=>{try{const _=i.find(S=>S._id===B);s&&!l&&!_?._id?.toString().startsWith("temp_")?(c(!0),(await DA.updateItemPriority(B,E)).success&&(a(N=>N.map(O=>O._id===B?{...O,priority:E}:O)),t&&t("Priority updated!"))):(a(S=>S.map(N=>N._id===B?{...N,priority:E}:N)),A(!0),t&&t("Priority updated!"))}catch(_){console.error("Failed to update priority:",_),t&&t("Failed to update priority. Please try again.")}finally{c(!1)}},updateItemNotes:async(B,E)=>{try{const _=i.find(S=>S._id===B);s&&!l&&!_?._id?.toString().startsWith("temp_")?(c(!0),(await DA.updateItemNotes(B,E)).success&&(a(N=>N.map(O=>O._id===B?{...O,notes:E}:O)),t&&t("Notes updated!"))):(a(S=>S.map(N=>N._id===B?{...N,notes:E}:N)),A(!0),t&&t("Notes updated!"))}catch(_){console.error("Failed to update notes:",_),t&&t("Failed to update notes. Please try again.")}finally{c(!1)}},moveToCart:async(B,E=1,_=null)=>{try{const S=i.find(N=>N._id===B);if(s&&!l&&!S?._id?.toString().startsWith("temp_")){if(c(!0),(await DA.moveToCart(B,E,_)).success)return a(O=>O.filter(k=>k._id!==B)),t&&t("Item moved to cart!"),!0}else return t&&t("Please login to move items to cart."),!1}catch(S){return console.error("Failed to move to cart:",S),t&&t("Failed to move item to cart. Please try again."),!1}finally{c(!1)}},isInWishlist:B=>i.some(E=>E.itemId===B||E._id===B),getItemsByFilter:(B={})=>{let E=[...i];return B.itemType&&(E=E.filter(_=>_.itemType===B.itemType)),B.priority&&(E=E.filter(_=>_.priority===B.priority)),B.storeId&&(E=E.filter(_=>_.storeId===B.storeId)),E},getStats:()=>({totalItems:i.length,productCount:i.filter(B=>B.itemType==="product").length,serviceCount:i.filter(B=>B.itemType==="service").length,highPriorityCount:i.filter(B=>B.priority==="high").length,totalValue:i.reduce((B,E)=>B+(E.price||0),0)}),syncWishlistWithServer:f};return n.jsx(xk.Provider,{value:C,children:r})},nc=Object.create(null);nc.open="0";nc.close="1";nc.ping="2";nc.pong="3";nc.message="4";nc.upgrade="5";nc.noop="6";const Ug=Object.create(null);Object.keys(nc).forEach(r=>{Ug[nc[r]]=r});const Fv={type:"error",data:"parser error"},bk=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",vk=typeof ArrayBuffer=="function",wk=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,I1=({type:r,data:t},s,i)=>bk&&t instanceof Blob?s?i(t):s5(t,i):vk&&(t instanceof ArrayBuffer||wk(t))?s?i(t):s5(new Blob([t]),i):i(nc[r]+(t||"")),s5=(r,t)=>{const s=new FileReader;return s.onload=function(){const i=s.result.split(",")[1];t("b"+(i||""))},s.readAsDataURL(r)};function i5(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let $x;function ZD(r,t){if(bk&&r.data instanceof Blob)return r.data.arrayBuffer().then(i5).then(t);if(vk&&(r.data instanceof ArrayBuffer||wk(r.data)))return t(i5(r.data));I1(r,!1,s=>{$x||($x=new TextEncoder),t($x.encode(s))})}const a5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<a5.length;r++)Uf[a5.charCodeAt(r)]=r;const eM=r=>{let t=r.length*.75,s=r.length,i,a=0,o,c,l,u;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);const d=new ArrayBuffer(t),A=new Uint8Array(d);for(i=0;i<s;i+=4)o=Uf[r.charCodeAt(i)],c=Uf[r.charCodeAt(i+1)],l=Uf[r.charCodeAt(i+2)],u=Uf[r.charCodeAt(i+3)],A[a++]=o<<2|c>>4,A[a++]=(c&15)<<4|l>>2,A[a++]=(l&3)<<6|u&63;return d},tM=typeof ArrayBuffer=="function",P1=(r,t)=>{if(typeof r!="string")return{type:"message",data:jk(r,t)};const s=r.charAt(0);return s==="b"?{type:"message",data:rM(r.substring(1),t)}:Ug[s]?r.length>1?{type:Ug[s],data:r.substring(1)}:{type:Ug[s]}:Fv},rM=(r,t)=>{if(tM){const s=eM(r);return jk(s,t)}else return{base64:!0,data:r}},jk=(r,t)=>{switch(t){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},Nk="",nM=(r,t)=>{const s=r.length,i=new Array(s);let a=0;r.forEach((o,c)=>{I1(o,!1,l=>{i[c]=l,++a===s&&t(i.join(Nk))})})},sM=(r,t)=>{const s=r.split(Nk),i=[];for(let a=0;a<s.length;a++){const o=P1(s[a],t);if(i.push(o),o.type==="error")break}return i};function iM(){return new TransformStream({transform(r,t){ZD(r,s=>{const i=s.length;let a;if(i<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,i);else if(i<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}r.data&&typeof r.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(s)})}})}let Hx;function Mm(r){return r.reduce((t,s)=>t+s.length,0)}function Rm(r,t){if(r[0].length===t)return r.shift();const s=new Uint8Array(t);let i=0;for(let a=0;a<t;a++)s[a]=r[0][i++],i===r[0].length&&(r.shift(),i=0);return r.length&&i<r[0].length&&(r[0]=r[0].slice(i)),s}function aM(r,t){Hx||(Hx=new TextDecoder);const s=[];let i=0,a=-1,o=!1;return new TransformStream({transform(c,l){for(s.push(c);;){if(i===0){if(Mm(s)<1)break;const u=Rm(s,1);o=(u[0]&128)===128,a=u[0]&127,a<126?i=3:a===126?i=1:i=2}else if(i===1){if(Mm(s)<2)break;const u=Rm(s,2);a=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),i=3}else if(i===2){if(Mm(s)<8)break;const u=Rm(s,8),d=new DataView(u.buffer,u.byteOffset,u.length),A=d.getUint32(0);if(A>Math.pow(2,21)-1){l.enqueue(Fv);break}a=A*Math.pow(2,32)+d.getUint32(4),i=3}else{if(Mm(s)<a)break;const u=Rm(s,a);l.enqueue(P1(o?u:Hx.decode(u),t)),i=0}if(a===0||a>r){l.enqueue(Fv);break}}}})}const Sk=4;function Bi(r){if(r)return oM(r)}function oM(r){for(var t in Bi.prototype)r[t]=Bi.prototype[t];return r}Bi.prototype.on=Bi.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};Bi.prototype.once=function(r,t){function s(){this.off(r,s),t.apply(this,arguments)}return s.fn=t,this.on(r,s),this};Bi.prototype.off=Bi.prototype.removeListener=Bi.prototype.removeAllListeners=Bi.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+r];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var i,a=0;a<s.length;a++)if(i=s[a],i===t||i.fn===t){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+r],this};Bi.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+r],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(s){s=s.slice(0);for(var i=0,a=s.length;i<a;++i)s[i].apply(this,t)}return this};Bi.prototype.emitReserved=Bi.prototype.emit;Bi.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Bi.prototype.hasListeners=function(r){return!!this.listeners(r).length};const oy=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,s)=>s(t,0),To=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),lM="arraybuffer";function Ck(r,...t){return t.reduce((s,i)=>(r.hasOwnProperty(i)&&(s[i]=r[i]),s),{})}const cM=To.setTimeout,uM=To.clearTimeout;function ly(r,t){t.useNativeTimers?(r.setTimeoutFn=cM.bind(To),r.clearTimeoutFn=uM.bind(To)):(r.setTimeoutFn=To.setTimeout.bind(To),r.clearTimeoutFn=To.clearTimeout.bind(To))}const dM=1.33;function AM(r){return typeof r=="string"?hM(r):Math.ceil((r.byteLength||r.size)*dM)}function hM(r){let t=0,s=0;for(let i=0,a=r.length;i<a;i++)t=r.charCodeAt(i),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(i++,s+=4);return s}function Bk(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function fM(r){let t="";for(let s in r)r.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(r[s]));return t}function pM(r){let t={},s=r.split("&");for(let i=0,a=s.length;i<a;i++){let o=s[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class mM extends Error{constructor(t,s,i){super(t),this.description=s,this.context=i,this.type="TransportError"}}class T1 extends Bi{constructor(t){super(),this.writable=!1,ly(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,s,i){return super.emitReserved("error",new mM(t,s,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const s=P1(t,this.socket.binaryType);this.onPacket(s)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,s={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const s=fM(t);return s.length?"?"+s:""}}class gM extends T1{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const s=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||s()})),this.writable||(i++,this.once("drain",function(){--i||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const s=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};sM(t,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,nM(t,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=Bk()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(t,s)}}let kk=!1;try{kk=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const yM=kk;function xM(){}class bM extends gM{constructor(t){if(super(t),typeof location<"u"){const s=location.protocol==="https:";let i=location.port;i||(i=s?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,s){const i=this.request({method:"POST",data:t});i.on("success",s),i.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(s,i)=>{this.onError("xhr poll error",s,i)}),this.pollXhr=t}}class Xl extends Bi{constructor(t,s,i){super(),this.createRequest=t,ly(this,i),this._opts=i,this._method=i.method||"GET",this._uri=s,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const s=Ck(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(s);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&i.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var a;i.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Xl.requestsCount++,Xl.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=xM,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Xl.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Xl.requestsCount=0;Xl.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",o5);else if(typeof addEventListener=="function"){const r="onpagehide"in To?"pagehide":"unload";addEventListener(r,o5,!1)}}function o5(){for(let r in Xl.requests)Xl.requests.hasOwnProperty(r)&&Xl.requests[r].abort()}const vM=(function(){const r=_k({xdomain:!1});return r&&r.responseType!==null})();class wM extends bM{constructor(t){super(t);const s=t&&t.forceBase64;this.supportsBinary=vM&&!s}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Xl(_k,this.uri(),t)}}function _k(r){const t=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||yM))return new XMLHttpRequest}catch{}if(!t)try{return new To[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ek=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class jM extends T1{get name(){return"websocket"}doOpen(){const t=this.uri(),s=this.opts.protocols,i=Ek?{}:Ck(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,s,i)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const i=t[s],a=s===t.length-1;I1(i,this.supportsBinary,o=>{try{this.doWrite(i,o)}catch{}a&&oy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=Bk()),this.supportsBinary||(s.b64=1),this.createUri(t,s)}}const Vx=To.WebSocket||To.MozWebSocket;class NM extends jM{createSocket(t,s,i){return Ek?new Vx(t,s,i):s?new Vx(t,s):new Vx(t)}doWrite(t,s){this.ws.send(s)}}class SM extends T1{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const s=aM(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(s).getReader(),a=iM();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const o=()=>{i.read().then(({done:l,value:u})=>{l||(this.onPacket(u),o())}).catch(l=>{})};o();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const i=t[s],a=s===t.length-1;this._writer.write(i).then(()=>{a&&oy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const CM={websocket:NM,webtransport:SM,polling:wM},BM=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,kM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Uv(r){if(r.length>8e3)throw"URI too long";const t=r,s=r.indexOf("["),i=r.indexOf("]");s!=-1&&i!=-1&&(r=r.substring(0,s)+r.substring(s,i).replace(/:/g,";")+r.substring(i,r.length));let a=BM.exec(r||""),o={},c=14;for(;c--;)o[kM[c]]=a[c]||"";return s!=-1&&i!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=_M(o,o.path),o.queryKey=EM(o,o.query),o}function _M(r,t){const s=/\/{2,9}/g,i=t.replace(s,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function EM(r,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,a,o){a&&(s[a]=o)}),s}const Lv=typeof addEventListener=="function"&&typeof removeEventListener=="function",Lg=[];Lv&&addEventListener("offline",()=>{Lg.forEach(r=>r())},!1);class Qu extends Bi{constructor(t,s){if(super(),this.binaryType=lM,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(s=t,t=null),t){const i=Uv(t);s.hostname=i.host,s.secure=i.protocol==="https"||i.protocol==="wss",s.port=i.port,i.query&&(s.query=i.query)}else s.host&&(s.hostname=Uv(s.host).host);ly(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(i=>{const a=i.prototype.name;this.transports.push(a),this._transportsByName[a]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=pM(this.opts.query)),Lv&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Lg.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const s=Object.assign({},this.opts.query);s.EIO=Sk,s.transport=t,this.id&&(s.sid=this.id);const i=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Qu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(t);s.open(),this.setTransport(s)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",Qu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=t.data,this._onError(s);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let i=0;i<this.writeBuffer.length;i++){const a=this.writeBuffer[i].data;if(a&&(s+=AM(a)),i>0&&s>this._maxPayload)return this.writeBuffer.slice(0,i);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,oy(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,s,i){return this._sendPacket("message",t,s,i),this}send(t,s,i){return this._sendPacket("message",t,s,i),this}_sendPacket(t,s,i,a){if(typeof s=="function"&&(a=s,s=void 0),typeof i=="function"&&(a=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const o={type:t,data:s,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),t()},i=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(Qu.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Lv&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=Lg.indexOf(this._offlineEventListener);i!==-1&&Lg.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,s),this.writeBuffer=[],this._prevBufferLen=0}}}Qu.protocol=Sk;class OM extends Qu{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let s=this.createTransport(t),i=!1;Qu.priorWebsocketSuccess=!1;const a=()=>{i||(s.send([{type:"ping",data:"probe"}]),s.once("packet",f=>{if(!i)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;Qu.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(A(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=s.name,this.emitReserved("upgradeError",p)}}))};function o(){i||(i=!0,A(),s.close(),s=null)}const c=f=>{const p=new Error("probe error: "+f);p.transport=s.name,o(),this.emitReserved("upgradeError",p)};function l(){c("transport closed")}function u(){c("socket closed")}function d(f){s&&f.name!==s.name&&o()}const A=()=>{s.removeListener("open",a),s.removeListener("error",c),s.removeListener("close",l),this.off("close",u),this.off("upgrading",d)};s.once("open",a),s.once("error",c),s.once("close",l),this.once("close",u),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||s.open()},200):s.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const s=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&s.push(t[i]);return s}}let IM=class extends OM{constructor(t,s={}){const i=typeof t=="object"?t:s;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(a=>CM[a]).filter(a=>!!a)),super(t,i)}};function PM(r,t="",s){let i=r;s=s||typeof location<"u"&&location,r==null&&(r=s.protocol+"//"+s.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=s.protocol+r:r=s.host+r),/^(https?|wss?):\/\//.test(r)||(typeof s<"u"?r=s.protocol+"//"+r:r="https://"+r),i=Uv(r)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(s&&s.port===i.port?"":":"+i.port),i}const TM=typeof ArrayBuffer=="function",FM=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Ok=Object.prototype.toString,UM=typeof Blob=="function"||typeof Blob<"u"&&Ok.call(Blob)==="[object BlobConstructor]",LM=typeof File=="function"||typeof File<"u"&&Ok.call(File)==="[object FileConstructor]";function F1(r){return TM&&(r instanceof ArrayBuffer||FM(r))||UM&&r instanceof Blob||LM&&r instanceof File}function Dg(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let s=0,i=r.length;s<i;s++)if(Dg(r[s]))return!0;return!1}if(F1(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Dg(r.toJSON(),!0);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&Dg(r[s]))return!0;return!1}function DM(r){const t=[],s=r.data,i=r;return i.data=Dv(s,t),i.attachments=t.length,{packet:i,buffers:t}}function Dv(r,t){if(!r)return r;if(F1(r)){const s={_placeholder:!0,num:t.length};return t.push(r),s}else if(Array.isArray(r)){const s=new Array(r.length);for(let i=0;i<r.length;i++)s[i]=Dv(r[i],t);return s}else if(typeof r=="object"&&!(r instanceof Date)){const s={};for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=Dv(r[i],t));return s}return r}function MM(r,t){return r.data=Mv(r.data,t),delete r.attachments,r}function Mv(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let s=0;s<r.length;s++)r[s]=Mv(r[s],t);else if(typeof r=="object")for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&(r[s]=Mv(r[s],t));return r}const RM=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],QM=5;var Un;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Un||(Un={}));class $M{constructor(t){this.replacer=t}encode(t){return(t.type===Un.EVENT||t.type===Un.ACK)&&Dg(t)?this.encodeAsBinary({type:t.type===Un.EVENT?Un.BINARY_EVENT:Un.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let s=""+t.type;return(t.type===Un.BINARY_EVENT||t.type===Un.BINARY_ACK)&&(s+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(s+=t.nsp+","),t.id!=null&&(s+=t.id),t.data!=null&&(s+=JSON.stringify(t.data,this.replacer)),s}encodeAsBinary(t){const s=DM(t),i=this.encodeAsString(s.packet),a=s.buffers;return a.unshift(i),a}}function l5(r){return Object.prototype.toString.call(r)==="[object Object]"}class U1 extends Bi{constructor(t){super(),this.reviver=t}add(t){let s;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(t);const i=s.type===Un.BINARY_EVENT;i||s.type===Un.BINARY_ACK?(s.type=i?Un.EVENT:Un.ACK,this.reconstructor=new HM(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(F1(t)||t.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(t),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let s=0;const i={type:Number(t.charAt(0))};if(Un[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Un.BINARY_EVENT||i.type===Un.BINARY_ACK){const o=s+1;for(;t.charAt(++s)!=="-"&&s!=t.length;);const c=t.substring(o,s);if(c!=Number(c)||t.charAt(s)!=="-")throw new Error("Illegal attachments");i.attachments=Number(c)}if(t.charAt(s+1)==="/"){const o=s+1;for(;++s&&!(t.charAt(s)===","||s===t.length););i.nsp=t.substring(o,s)}else i.nsp="/";const a=t.charAt(s+1);if(a!==""&&Number(a)==a){const o=s+1;for(;++s;){const c=t.charAt(s);if(c==null||Number(c)!=c){--s;break}if(s===t.length)break}i.id=Number(t.substring(o,s+1))}if(t.charAt(++s)){const o=this.tryParse(t.substr(s));if(U1.isPayloadValid(i.type,o))i.data=o;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,s){switch(t){case Un.CONNECT:return l5(s);case Un.DISCONNECT:return s===void 0;case Un.CONNECT_ERROR:return typeof s=="string"||l5(s);case Un.EVENT:case Un.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&RM.indexOf(s[0])===-1);case Un.ACK:case Un.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class HM{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const s=MM(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const VM=Object.freeze(Object.defineProperty({__proto__:null,Decoder:U1,Encoder:$M,get PacketType(){return Un},protocol:QM},Symbol.toStringTag,{value:"Module"}));function ll(r,t,s){return r.on(t,s),function(){r.off(t,s)}}const zM=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ik extends Bi{constructor(t,s,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=s,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ll(t,"open",this.onopen.bind(this)),ll(t,"packet",this.onpacket.bind(this)),ll(t,"error",this.onerror.bind(this)),ll(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...s){var i,a,o;if(zM.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(s.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const c={type:Un.EVENT,data:s};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const A=this.ids++,f=s.pop();this._registerAckCallback(A,f),c.id=A}const l=(a=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||a===void 0?void 0:a.writable,u=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!l||(u?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,s){var i;const a=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(a===void 0){this.acks[t]=s;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);s.call(this,new Error("operation has timed out"))},a),c=(...l)=>{this.io.clearTimeoutFn(o),s.apply(this,l)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...s){return new Promise((i,a)=>{const o=(c,l)=>c?a(c):i(l);o.withError=!0,s.push(o),this.emit(t,...s)})}_addToQueue(t){let s;typeof t[t.length-1]=="function"&&(s=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...o)=>i!==this._queue[0]?void 0:(a!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(a)):(this._queue.shift(),s&&s(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!t||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Un.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Un.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Un.EVENT:case Un.BINARY_EVENT:this.onevent(t);break;case Un.ACK:case Un.BINARY_ACK:this.onack(t);break;case Un.DISCONNECT:this.ondisconnect();break;case Un.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const s=t.data||[];t.id!=null&&s.push(this.ack(t.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const i of s)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const s=this;let i=!1;return function(...a){i||(i=!0,s.packet({type:Un.ACK,id:t,data:a}))}}onack(t){const s=this.acks[t.id];typeof s=="function"&&(delete this.acks[t.id],s.withError&&t.data.unshift(null),s.apply(this,t.data))}onconnect(t,s){this.id=t,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Un.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const s=this._anyListeners;for(let i=0;i<s.length;i++)if(t===s[i])return s.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const s=this._anyOutgoingListeners;for(let i=0;i<s.length;i++)if(t===s[i])return s.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const i of s)i.apply(this,t.data)}}}function Fh(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Fh.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*r);r=(Math.floor(t*10)&1)==0?r-s:r+s}return Math.min(r,this.max)|0};Fh.prototype.reset=function(){this.attempts=0};Fh.prototype.setMin=function(r){this.ms=r};Fh.prototype.setMax=function(r){this.max=r};Fh.prototype.setJitter=function(r){this.jitter=r};class Rv extends Bi{constructor(t,s){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(s=t,t=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,ly(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((i=s.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Fh({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=t;const a=s.parser||VM;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var s;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(s=this.backoff)===null||s===void 0||s.setMin(t),this)}randomizationFactor(t){var s;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(s=this.backoff)===null||s===void 0||s.setJitter(t),this)}reconnectionDelayMax(t){var s;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(s=this.backoff)===null||s===void 0||s.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new IM(this.uri,this.opts);const s=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const a=ll(s,"open",function(){i.onopen(),t&&t()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},c=ll(s,"error",o);if(this._timeout!==!1){const l=this._timeout,u=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),s.close()},l);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(a),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ll(t,"ping",this.onping.bind(this)),ll(t,"data",this.ondata.bind(this)),ll(t,"error",this.onerror.bind(this)),ll(t,"close",this.onclose.bind(this)),ll(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(s){this.onclose("parse error",s)}}ondecoded(t){oy(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,s){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new Ik(this,t,s),this.nsps[t]=i),i}_destroy(t){const s=Object.keys(this.nsps);for(const i of s)if(this.nsps[i].active)return;this._close()}_packet(t){const s=this.encoder.encode(t);for(let i=0;i<s.length;i++)this.engine.write(s[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,s){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},s);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const bf={};function ph(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};const s=PM(r,t.path||"/socket.io"),i=s.source,a=s.id,o=s.path,c=bf[a]&&o in bf[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let u;return l?u=new Rv(i,t):(bf[a]||(bf[a]=new Rv(i,t)),u=bf[a]),s.query&&!t.query&&(t.query=s.queryKey),u.socket(s.path,t)}Object.assign(ph,{Manager:Rv,Socket:Ik,io:ph,connect:ph});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Bt=(r,t)=>{const s=ee.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:l="",children:u,...d},A)=>ee.createElement("svg",{ref:A,...KM,width:a,height:a,stroke:i,strokeWidth:c?Number(o)*24/Number(a):o,className:["lucide",`lucide-${GM(r)}`,l].join(" "),...d},[...t.map(([f,p])=>ee.createElement(f,p)),...Array.isArray(u)?u:[u]]));return s.displayName=`${r}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=Bt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=Bt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Bt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=Bt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=Bt("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=Bt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Bt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=Bt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=Bt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=Bt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=Bt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=Bt("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Bt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=Bt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=Bt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=Bt("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Bt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=Bt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=Bt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=Bt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=Bt("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Bt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=Bt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=Bt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Bt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=Bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Bt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=Bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=Bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=Bt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Bt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=Bt("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=Bt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=Bt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=Bt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=Bt("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=Bt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=Bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=Bt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=Bt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Bt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=Bt("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=Bt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=Bt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Bt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=Bt("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=Bt("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=Bt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=Bt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=Bt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=Bt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=Bt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=Bt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=Bt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=Bt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=Bt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=Bt("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=Bt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=Bt("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=Bt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=Bt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=Bt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=Bt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Bt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=Bt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=Bt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=Bt("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=Bt("MemoryStick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=Bt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Bt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=Bt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=Bt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=Bt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=Bt("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=Bt("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=Bt("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=Bt("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Bt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=Bt("Paintbrush",[["path",{d:"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z",key:"m6k5sh"}],["path",{d:"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7",key:"arzq70"}],["path",{d:"M14.5 17.5 4.5 15",key:"s7fvrz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Bt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=Bt("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=Bt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=Bt("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=Bt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=Bt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=Bt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Bt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=Bt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=Bt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Bt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=Bt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=Bt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=Bt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Bt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=Bt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Bt("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=Bt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Bt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=Bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Bt("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=Bt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=Bt("Sliders",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=Bt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Bt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=Bt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=Bt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Bt("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=Bt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Bt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=Bt("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=Bt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=Bt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=Bt("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=Bt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=Bt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Bt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=Bt("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=Bt("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=Bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=Bt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=Bt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=Bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=Bt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Bt("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=Bt("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=Bt("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Bt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=Bt("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=Bt("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=Bt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=Bt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=Bt("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=Bt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Gk={order_update:gR,booking_update:JM,review_update:mn,promotion:Dk,warning:SR,announcement:dR,withdrawal_update:Yu,payment_update:gl,order_reminder:is},Wk=ee.createContext(),DR=({children:r})=>{const{user:t}=Fn(),[s,i]=ee.useState([]),[a,o]=ee.useState(0),[c,l]=ee.useState(null),u=ee.useRef(null),d=async()=>{try{const b=await fetch("http://localhost:10000/api/notifications",{credentials:"include"});if(b.ok){const v=await b.json();i(v.notifications);const y=v.notifications.filter(w=>!w.isRead&&!w.isDeleted).length;o(y)}}catch(b){console.error("Failed to fetch notifications:",b)}};ee.useEffect(()=>{if(t)return d(),u.current=ph("http://localhost:10000",{withCredentials:!0,transports:["websocket"]}),u.current.on("connect",()=>{}),u.current.on("disconnect",()=>{}),u.current.on("new-notification",b=>{i(v=>[b,...v]),o(v=>v+1),l(b),setTimeout(()=>l(null),5e3)}),()=>{u.current?.disconnect()}},[t]);const A=async b=>{try{(await fetch(`http://localhost:10000/api/notifications/${b}/read`,{method:"PATCH",credentials:"include"})).ok&&(i(y=>y.map(w=>w._id===b?{...w,isRead:!0}:w)),o(y=>Math.max(0,y-1)))}catch(v){console.error("Mark read failed",v)}},f=async()=>{try{(await fetch("http://localhost:10000/api/notifications/mark-all-read",{method:"PATCH",credentials:"include"})).ok&&(i(v=>v.map(y=>({...y,isRead:!0}))),o(0))}catch(b){console.error("Mark all read failed",b)}},p=async b=>{try{if((await fetch(`http://localhost:10000/api/notifications/${b}/delete`,{method:"PATCH",credentials:"include"})).ok){i(w=>w.map(j=>j._id===b?{...j,isDeleted:!0}:j));const y=s.find(w=>w._id===b);y&&!y.isRead&&o(w=>Math.max(0,w-1))}}catch(v){console.error("Soft delete failed",v)}},m=()=>{l(null)},g=()=>{c?.link&&(c.link.startsWith("http")?window.open(c.link,"_blank"):window.location.href=c.link),m()};return n.jsxs(n.Fragment,{children:[c&&n.jsx("div",{className:"fixed bottom-6 right-4 z-50 bg-white border border-purple-300 rounded-xl shadow-lg p-4 w-80 max-w-full animate-slide-in cursor-pointer",onClick:g,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"text-purple-600",children:(()=>{const b=Gk[c.type];return b?n.jsx(b,{className:"w-5 h-5"}):null})()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-sm",children:c.title}),n.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:c.body})]}),n.jsx("button",{onClick:b=>{b.stopPropagation(),m()},className:"text-gray-400 hover:text-gray-600 transition-colors",children:""})]})}),n.jsx(Wk.Provider,{value:{notifications:s,unreadCount:a,fetchNotifications:d,markAsRead:A,markAllRead:f,softDelete:p,setNotifications:i,setUnreadCount:o,dismissToast:m},children:r})]})},qk=()=>ee.useContext(Wk),Yk=ee.createContext(),Xk=()=>{const r=ee.useContext(Yk);if(!r)throw new Error("useGlobalChat must be used within a ChatProvider");return r},MR=({children:r})=>{const[t,s]=ee.useState(0),[i,a]=ee.useState(!1),o=ee.useRef(null),c=ee.useRef(null),l="http://localhost:10000",u=ee.useCallback(m=>{if(!m?.id){console.log(" Cannot initialize socket: no user ID");return}if(c.current?.id===m.id&&o.current?.connected){console.log(" Socket already initialized for user:",m.id);return}console.log(" Initializing global chat socket for user:",m.id),c.current=m,o.current&&o.current.disconnect();const g=ph(l,{withCredentials:!0,transports:["websocket","polling"],forceNew:!0});o.current=g,g.on("connect",()=>{console.log(" Global chat socket connected for user:",m.id),a(!0),setTimeout(()=>{d()},200)}),g.on("disconnect",()=>{a(!1)}),g.on("unread-count-updated",b=>{console.log(" Backend unread count event received:",b.unreadCount),s(v=>(console.log(" Updating count:",v,"",b.unreadCount),b.unreadCount||0))}),g.on("new-message",b=>{b.sender._id!==m.id&&(console.log(" New message received from:",b.sender.name),s(v=>{const y=v+1;return console.log(" Temporary increment:",v,"",y,"(waiting for backend)"),y}))}),g.on("messages-marked-read",b=>{console.log(" Messages marked as read, updating global count"),setTimeout(()=>{d()},50)})},[l]),d=async()=>{if(!c.current?.id){console.log(" Cannot fetch unread count: no user");return}try{console.log(" Fetching unread count for user:",c.current.id);const m=await fetch(`${l}/api/chat/unread-count`,{credentials:"include"});if(m.ok){const g=await m.json();console.log(" Fetched unread count:",g.unreadCount),s(g.unreadCount||0)}else console.error(" Failed to fetch unread count - HTTP",m.status)}catch(m){console.error(" Failed to fetch unread count:",m)}},p={globalUnreadCount:t,isConnected:i,initializeSocket:u,updateUnreadCount:m=>{s(m)},decrementUnreadCount:(m,g=1)=>{s(b=>Math.max(0,b-g)),o.current?.connected&&o.current.emit("chat-read-notification",{chatId:m,count:g})},fetchUnreadCount:d,socket:o.current};return n.jsx(Yk.Provider,{value:p,children:r})},Jk=ee.createContext(),RR=()=>{const r=ee.useContext(Jk);if(!r)throw new Error("useImpressionContext must be used within an ImpressionProvider");return r},QR=()=>"session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),$R=()=>{let r=localStorage.getItem("impressionSessionId");return r||(r=QR(),localStorage.setItem("impressionSessionId",r)),r},zx=()=>({width:window.innerWidth,height:window.innerHeight}),Kx=()=>{const r=window.location.pathname,t=window.location.search;return r==="/"?"home":r.includes("/products")?t.includes("category=")?"category":t.includes("search=")?"search":"products":r.includes("/services")?t.includes("category=")?"category":t.includes("search=")?"search":"services":r.includes("/stores")?"stores":r.includes("/store/")?"store_page":r.includes("/wishlist")?"wishlist":"home"},f5=10,p5=3e4,m5=3,HR=({children:r})=>{const{user:t}=Fn(),[s]=ee.useState(()=>$R()),i=ee.useRef([]),a=ee.useRef(null),o=ee.useRef(new Set),[c,l]=ee.useState(navigator.onLine),[u,d]=ee.useState({totalImpressions:0,successfulBatches:0,failedBatches:0});ee.useEffect(()=>{const B=()=>{l(!0),i.current.length>0&&f()},E=()=>{l(!1)};return window.addEventListener("online",B),window.addEventListener("offline",E),()=>{window.removeEventListener("online",B),window.removeEventListener("offline",E)}},[]),ee.useEffect(()=>{o.current.clear()},[s,t?._id]);const A=async(B,E=0)=>{if(B.length===0)return{success:!0};try{const _=await fetch("http://localhost:10000/api/impressions/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({impressions:B})});if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);const S=await _.json();return d(N=>({...N,totalImpressions:N.totalImpressions+S.successful,successfulBatches:N.successfulBatches+1})),{success:!0,result:S}}catch(_){return console.warn("Failed to send impressions:",_),E<m5&&c?(console.log(`Retrying impression batch (${E+1}/${m5})`),await new Promise(S=>setTimeout(S,1e3*(E+1))),A(B,E+1)):(d(S=>({...S,failedBatches:S.failedBatches+1})),{success:!1,error:_})}},f=async()=>{if(i.current.length===0||!c)return;const B=i.current.splice(0,f5);(await A(B)).success||i.current.unshift(...B),a.current&&(clearTimeout(a.current),a.current=null),i.current.length>0&&c&&(a.current=setTimeout(f,p5))},p=B=>{i.current.push(B),i.current.length>=f5&&c?f():c&&(a.current||(a.current=setTimeout(f,p5)))},m=()=>{if(i.current.length>0){if(navigator.sendBeacon){const B=JSON.stringify({impressions:i.current});new Headers({"Content-Type":"application/json"});const E=new Blob([B],{type:"application/json"});navigator.sendBeacon("http://localhost:10000/api/impressions/batch",E)}else try{const B=new XMLHttpRequest;B.open("POST","http://localhost:10000/api/impressions/batch",!1),B.setRequestHeader("Content-Type","application/json"),B.send(JSON.stringify({impressions:i.current}))}catch(B){console.warn("Failed to send final impression batch:",B)}i.current=[]}};ee.useEffect(()=>(window.addEventListener("beforeunload",m),window.addEventListener("pagehide",m),()=>{window.removeEventListener("beforeunload",m),window.removeEventListener("pagehide",m),a.current&&clearTimeout(a.current)}),[]);const C={trackProductImpression:(B,E=null)=>{if(!B||!B._id)return;const _=`product-${B._id}`;if(o.current.has(_))return;o.current.add(_);const S={sessionId:s,itemType:"product",itemId:B._id,userId:t?._id||null,source:E||Kx(),viewportSize:zx()};p(S)},trackServiceImpression:(B,E=null)=>{if(!B||!B._id)return;const _=`service-${B._id}`;if(o.current.has(_))return;o.current.add(_);const S={sessionId:s,itemType:"service",itemId:B._id,userId:t?._id||null,source:E||Kx(),viewportSize:zx()};p(S)},trackStoreImpression:(B,E=null)=>{if(!B||!B._id)return;const _=`store-${B._id}`;if(o.current.has(_))return;o.current.add(_);const S={sessionId:s,itemType:"store",itemId:B._id,userId:t?._id||null,source:E||Kx(),viewportSize:zx()};p(S)},createImpressionObserver:(B,E={})=>{const S={...{threshold:.5,rootMargin:"0px"},...E},N=new IntersectionObserver(O=>{O.forEach(k=>{k.isIntersecting&&(setTimeout(()=>{k.target.offsetParent!==null&&B(k.target)},1e3),N.unobserve(k.target))})},S);return N},flushImpressions:()=>{i.current.length>0&&f()},getSessionStats:()=>({...u,queuedImpressions:i.current.length,trackedItems:o.current.size,sessionId:s,isOnline:c}),sessionId:s,isOnline:c};return n.jsx(Jk.Provider,{value:C,children:r})};let VR=class extends Ft.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("Error caught by boundary:",t,s)}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md",children:[n.jsx(Sa,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),n.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center space-x-2 bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors",children:[n.jsx(sc,{className:"w-5 h-5"}),n.jsx("span",{children:"Refresh Page"})]})]})}):this.props.children}};const zR=({currentRole:r,isTransitioning:t=!1})=>{const s={customer:{icon:sd,title:"Customer Mode",subtitle:"Browse and purchase products",fromText:"Shopping Mode",toText:"Store Management"},store_owner:{icon:ei,title:"Store Owner Mode",subtitle:"Manage your store and products",fromText:"Store Management",toText:"Shopping Mode"}},i=()=>r==="customer"?"store_owner":"customer",a=s[r]||{},o=s[i()]||{},c=a.icon||(()=>null),l=o.icon||(()=>null);return n.jsxs(n.Fragment,{children:[t&&n.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[n.jsxs("div",{className:"absolute inset-0 bg-black",children:[n.jsxs("div",{className:"absolute inset-0 opacity-5",children:[n.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_25%_25%,white_0%,transparent_50%)] animate-pulse"}),n.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_75%_75%,white_0%,transparent_50%)] animate-pulse",style:{animationDelay:"1s"}})]}),n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx("div",{className:"absolute top-1/4 left-1/4 w-px h-32 bg-white/8 rotate-45 animate-fade-in",style:{animationDelay:"0.5s"}}),n.jsx("div",{className:"absolute top-3/4 right-1/4 w-px h-32 bg-white/8 -rotate-45 animate-fade-in",style:{animationDelay:"0.7s"}}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-px bg-white/8 animate-fade-in",style:{animationDelay:"0.9s"}}),n.jsx("div",{className:"absolute top-1/3 right-1/3 w-24 h-px bg-white/6 rotate-90 animate-fade-in",style:{animationDelay:"1.1s"}})]}),n.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(12)].map((u,d)=>n.jsx("div",{className:"absolute w-0.5 h-0.5 bg-white rounded-full opacity-20 animate-float",style:{left:`${20+Math.random()*60}%`,top:`${20+Math.random()*60}%`,animationDelay:`${Math.random()*4}s`,animationDuration:`${4+Math.random()*2}s`}},d))})]}),n.jsxs("div",{className:"relative z-10 text-center",children:[n.jsxs("div",{className:"mb-16 flex items-center justify-center space-x-16",children:[n.jsxs("div",{className:"text-center animate-fade-out",style:{animationDelay:"0.5s"},children:[n.jsxs("div",{className:"relative p-8 mb-6",children:[n.jsx("div",{className:"absolute inset-0 border border-white/15 rounded-full animate-shrink"}),n.jsx(c,{className:"w-10 h-10 text-white/40 relative z-10"})]}),n.jsx("p",{className:"text-white/30 text-sm font-light tracking-wider uppercase",children:a.fromText})]}),n.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(WM,{className:"w-6 h-6 text-white/60 animate-pulse"}),n.jsx("div",{className:"absolute -inset-2 border border-white/10 rounded-full animate-ping opacity-20"})]}),n.jsx("div",{className:"w-20 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"})]}),n.jsxs("div",{className:"text-center animate-fade-in-scale",children:[n.jsxs("div",{className:"relative p-8 mb-6",children:[n.jsx("div",{className:"absolute inset-0 border border-white/30 rounded-full animate-glow-ring"}),n.jsx("div",{className:"absolute inset-2 border border-white/10 rounded-full animate-pulse"}),n.jsx(l,{className:"w-10 h-10 text-white relative z-10"})]}),n.jsx("p",{className:"text-white text-sm font-light tracking-wider uppercase",children:a.toText})]})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h1",{className:"text-6xl md:text-7xl font-thin text-white tracking-[0.2em]",children:n.jsx("span",{className:"inline-block animate-fade-in-up",style:{animationDelay:"0.2s"},children:"SWITCHING"})}),n.jsx("h2",{className:"text-2xl md:text-3xl font-extralight text-white/80 tracking-[0.3em] animate-fade-in-up",style:{animationDelay:"0.4s"},children:"ROLES"})]}),n.jsxs("div",{className:"animate-fade-in-up",style:{animationDelay:"0.6s"},children:[n.jsx("div",{className:"w-24 h-px bg-white/30 mx-auto mb-4"}),n.jsxs("p",{className:"text-white/50 text-base font-light tracking-wide",children:["Transitioning to ",a.toText.toLowerCase()]})]})]}),n.jsx("div",{className:"mt-20 flex justify-center",children:n.jsxs("div",{className:"relative w-48",children:[n.jsx("div",{className:"h-px bg-white/10"}),n.jsx("div",{className:"absolute top-0 left-0 h-px bg-white/40 animate-progress-elegant"})]})})]}),n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute top-12 left-12 w-12 h-12 border-l border-t border-white/15 animate-fade-in"}),n.jsx("div",{className:"absolute top-12 right-12 w-12 h-12 border-r border-t border-white/15 animate-fade-in",style:{animationDelay:"0.3s"}}),n.jsx("div",{className:"absolute bottom-12 left-12 w-12 h-12 border-l border-b border-white/15 animate-fade-in",style:{animationDelay:"0.6s"}}),n.jsx("div",{className:"absolute bottom-12 right-12 w-12 h-12 border-r border-b border-white/15 animate-fade-in",style:{animationDelay:"0.9s"}})]})]}),n.jsx("style",{children:`
        @keyframes fade-in-up {
          from {
            opacity: 0;
            transform: translateY(40px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes fade-in {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes fade-out {
          from {
            opacity: 1;
            transform: scale(1);
          }
          to {
            opacity: 0.2;
            transform: scale(0.9);
          }
        }

        @keyframes fade-in-scale {
          0% {
            opacity: 0;
            transform: scale(0.8);
          }
          50% {
            opacity: 0.3;
            transform: scale(0.95);
          }
          100% {
            opacity: 1;
            transform: scale(1);
          }
        }

        @keyframes shrink {
          from {
            transform: scale(1);
            opacity: 0.3;
          }
          to {
            transform: scale(0.8);
            opacity: 0.1;
          }
        }

        @keyframes glow-ring {
          0%,
          100% {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
            transform: scale(1);
          }
          50% {
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
          }
        }

        @keyframes progress-elegant {
          from {
            width: 0;
            opacity: 0.3;
          }
          to {
            width: 100%;
            opacity: 0.8;
          }
        }

        @keyframes shimmer {
          0%,
          100% {
            opacity: 0.2;
          }
          50% {
            opacity: 0.6;
          }
        }

        @keyframes float {
          0%,
          100% {
            transform: translateY(0px) rotate(0deg);
          }
          50% {
            transform: translateY(-10px) rotate(180deg);
          }
        }

        .animate-fade-in-up {
          animation: fade-in-up 1s ease-out forwards;
          opacity: 0;
        }

        .animate-fade-in {
          animation: fade-in 1.2s ease-out forwards;
          opacity: 0;
        }

        .animate-fade-out {
          animation: fade-out 1.5s ease-out forwards;
        }

        .animate-fade-in-scale {
          animation: fade-in-scale 2s ease-out forwards;
          opacity: 0;
        }

        .animate-shrink {
          animation: shrink 1.5s ease-out forwards;
        }

        .animate-glow-ring {
          animation: glow-ring 2s ease-in-out infinite;
        }

        .animate-progress-elegant {
          animation: progress-elegant 2.5s ease-out forwards;
        }

        .animate-shimmer {
          animation: shimmer 2s ease-in-out infinite;
        }

        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
      `})]})},KR=`
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slideUp {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-20px);
    }
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out;
  }
`,GR=({categories:r=[],isOpen:t,onClose:s,onCategoryClick:i})=>{const[a,o]=ee.useState(null),[c,l]=ee.useState(!1),u=ee.useRef(null),d=ee.useRef(null);ee.useEffect(()=>{const v=()=>{l(window.innerWidth<768)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const A=v=>{!c&&t&&(u.current&&clearTimeout(u.current),o(v))},f=()=>{!c&&t&&(u.current=setTimeout(()=>{s?.(),o(null)},200))},p=()=>{u.current&&clearTimeout(u.current)},m=(v,y)=>{c?(y.preventDefault(),o(a===v._id?null:v._id)):(i?.(v),s?.())},g=(v,y)=>{i?.(v,y),s?.(),o(null)},b=(v,y,w)=>{i?.(v,y,w),s?.(),o(null)};return ee.useEffect(()=>{const v=y=>{c&&d.current&&!d.current.contains(y.target)&&(s?.(),o(null))};if(t&&c)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[t,s,c]),ee.useEffect(()=>{t||(o(null),u.current&&clearTimeout(u.current))},[t]),ee.useEffect(()=>()=>{u.current&&clearTimeout(u.current)},[]),ee.useEffect(()=>{if(typeof document<"u"){const v=document.createElement("style");return v.textContent=KR,document.head.appendChild(v),()=>{v.parentNode&&v.parentNode.removeChild(v)}}},[]),t?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"hidden lg:block fixed top-16 left-0 right-0 z-40 flex justify-center",children:n.jsx("div",{ref:d,className:"mt-2 bg-white backdrop-blur-xl border border-gray-100 shadow-2xl rounded-2xl overflow-hidden transform transition-all duration-300 ease-out",onMouseLeave:f,onMouseEnter:p,style:{maxWidth:"calc(100vw - 40px)",width:"fit-content",minWidth:"900px",maxHeight:"calc(100vh - 80px)",animation:t?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out"},children:n.jsxs("div",{className:"flex min-h-[500px] max-h-full overflow-hidden",children:[n.jsx("div",{className:"w-80 bg-gradient-to-b from-gray-50 to-gray-100/80 border-r border-gray-200",children:n.jsxs("div",{className:"p-2",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider px-4 py-3",children:"Browse Categories"}),r.map(v=>n.jsxs("button",{onMouseEnter:()=>A(v._id),onClick:y=>m(v,y),className:`w-full flex items-center justify-between px-4 py-3.5 mx-2 rounded-xl text-left text-sm font-medium transition-all duration-300 group ${a===v._id?"bg-black text-white shadow-lg transform scale-[1.02]":"text-gray-700 hover:bg-white hover:shadow-md hover:transform hover:scale-[1.01]"}`,children:[n.jsx("span",{className:"flex-1",children:v.name}),n.jsx(Jl,{className:`w-4 h-4 transition-all duration-300 ${a===v._id?"text-white transform rotate-90":"text-gray-400 group-hover:text-gray-600 group-hover:transform group-hover:translate-x-1"}`})]},v._id))]})}),n.jsxs("div",{className:"flex-1 bg-white overflow-y-auto",children:[a&&n.jsx("div",{className:"animate-fadeIn",children:(()=>{const v=r.find(y=>y._id===a);return v?n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex items-center mb-8",children:[n.jsx("div",{className:"w-2 h-8 bg-black rounded-full mr-4"}),n.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:v.name})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-8",children:v.subcategories.map((y,w)=>n.jsxs("div",{className:"group",children:[n.jsx("button",{onClick:()=>g(v,y),className:"text-base font-bold text-gray-900 hover:text-black transition-all duration-300 block text-left mb-4 group-hover:transform group-hover:translate-x-2",children:y.name}),n.jsx("div",{className:"space-y-2 pl-0 group-hover:pl-4 transition-all duration-300",children:y.childCategories.map((j,C)=>n.jsx("button",{onClick:()=>b(v,y,j),className:"block text-sm text-gray-600 hover:text-black hover:font-medium transition-all duration-300 text-left leading-relaxed py-1 hover:transform hover:translate-x-2",children:j},C))})]},w))})]}):null})()}),!a&&n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center mx-auto mb-4",children:n.jsx(Jl,{className:"w-8 h-8 text-gray-400"})}),n.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"Hover over a category to explore"})]})})]})]})})}),n.jsxs("div",{className:"lg:hidden fixed inset-0 z-50",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:s}),n.jsxs("div",{ref:d,className:"absolute left-0 top-0 h-full w-80 bg-white shadow-2xl transform transition-transform duration-300 ease-out flex flex-col",style:{transform:t?"translateX(0)":"translateX(-100%)"},children:[n.jsx("div",{className:"bg-gradient-to-r from-black to-gray-800 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Browse Categories"}),n.jsx("button",{onClick:s,className:"p-2 rounded-xl text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200",children:n.jsx(Ts,{className:"w-6 h-6"})})]})}),n.jsx("div",{className:"overflow-y-auto flex-1 pb-6",style:{maxHeight:"calc(100vh - 120px)"},children:n.jsx("div",{className:"py-4",children:r.map((v,y)=>n.jsxs("div",{className:"mb-2",children:[n.jsxs("button",{onClick:w=>m(v,w),className:`w-full flex items-center justify-between px-6 py-4 text-left font-medium transition-all duration-300 group ${a===v._id?"bg-black text-white shadow-lg":"text-gray-700 hover:bg-gray-50"}`,children:[n.jsx("span",{className:"text-base",children:v.name}),n.jsx(Jl,{className:`w-5 h-5 transition-all duration-300 ${a===v._id?"rotate-90 text-white":"text-gray-400 group-hover:text-gray-600"}`})]}),n.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-out ${a===v._id?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:n.jsx("div",{className:"bg-gradient-to-b from-gray-50 to-gray-100 border-y border-gray-200",children:v.subcategories.map((w,j)=>n.jsxs("div",{className:"px-6 py-3 border-b border-gray-200/50 last:border-b-0",children:[n.jsx("button",{onClick:()=>g(v,w),className:"block w-full text-left text-sm font-semibold text-gray-900 hover:text-black transition-all duration-200 mb-2",children:w.name}),n.jsx("div",{className:"space-y-1 pl-3 border-l-2 border-gray-300",children:w.childCategories.map((C,B)=>n.jsx("button",{onClick:()=>b(v,w,C),className:"block w-full text-left text-xs text-gray-600 hover:text-black hover:font-medium transition-all duration-200 py-1 leading-relaxed",children:C},B))})]},j))})})]},v._id))})})]})]})]}):null},WR=()=>{const{user:r,logout:t,refreshUser:s}=Fn(),{orderItems:i,bookingItems:a}=ac(),{wishlistItems:o}=ay(),{unreadCount:c}=qk(),[l,u]=ee.useState(!1),[d,A]=ee.useState(!1),[f,p]=ee.useState(!1),[m,g]=ee.useState(""),[b,v]=ee.useState(!1),[y,w]=ee.useState([]),[j,C]=ee.useState(!1),B=yi(),{globalUnreadCount:E=0,isConnected:_,initializeSocket:S}=Xk();ee.useEffect(()=>{r?.id&&(console.log(" Header: Initializing chat socket for user:",r.id),S(r))},[r?.id,S]),ee.useEffect(()=>{console.log(" Header: Chat unread count changed:",E,"Connected:",_)},[E,_]),ee.useEffect(()=>{const F=()=>{p(window.scrollY>50)};return window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F)},[]);const N=F=>{const G=F.target.value;g(G)},O=(F,G,X)=>{console.log("Navigate to:",{category:F.name,subcategory:G?.name,childCategory:X})},k=F=>{if(F.preventDefault(),m.trim()){const G=`/products?search=${encodeURIComponent(m)}`;B(G)}};ee.useEffect(()=>{(async()=>{try{const G=await fetch("http://localhost:10000/api/categories");if(!G.ok)throw new Error("Failed to fetch categories");const X=await G.json();w(X)}catch(G){console.error("Error loading categories:",G)}})()},[]);const I=()=>{t(),A(!1),B("/")},R=async()=>{const F=await fetch("http://localhost:10000/api/auth/switch-role",{method:"PUT",credentials:"include"});if(!F.ok){const G=await F.json();throw new Error(G.error||"Failed to switch role")}return s(),F.json()},Q=()=>{v(!0),setTimeout(async()=>{try{(await R()).role==="customer"?B("/"):r?.storeId?B("/dashboard"):B("/create-store")}catch(F){console.error(F.message)}finally{v(!1)}},4e3)},$=i.reduce((F,G)=>F+G.quantity,0)+a.length,L=({onClick:F,isOpen:G})=>n.jsx("button",{onClick:F,className:"p-2 rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Toggle menu",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:G?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})});return n.jsxs(n.Fragment,{children:[n.jsx(zR,{currentRole:r?.role,isTransitioning:b}),n.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${f?"bg-white/95 backdrop-blur-md shadow-lg":"bg-white"}`,children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Zt,{to:"/",className:"text-3xl font-black text-black hover:text-gray-700 transition-colors tracking-tight font-sans",children:"AIO"}),n.jsx(L,{onClick:F=>{F.preventDefault(),F.stopPropagation(),C(!j)},isOpen:j})]}),n.jsx("div",{className:"hidden lg:flex flex-1 justify-center max-w-2xl mx-8",children:n.jsx("form",{onSubmit:k,className:"w-full max-w-lg",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ca,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",value:m,onChange:N,placeholder:"Search products & services...",className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent shadow-sm text-sm"})]})})}),n.jsxs("nav",{className:"hidden lg:flex items-center space-x-6",children:[n.jsx(Zt,{to:"/products",className:"text-gray-600 hover:text-black transition-colors font-medium text-sm",children:"Products"}),n.jsx(Zt,{to:"/services",className:"text-gray-600 hover:text-black transition-colors font-medium text-sm",children:"Services"}),n.jsx(Zt,{to:"/stores",className:"text-gray-600 hover:text-black transition-colors font-medium text-sm",children:"Stores"}),r?.role==="store_owner"&&n.jsx(Zt,{to:"/dashboard",className:"text-gray-600 hover:text-black transition-colors font-medium text-sm",children:"Dashboard"}),r&&n.jsx("button",{onClick:Q,className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${r?.role==="store_owner"?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 shadow-md"}`,children:r?.role==="store_owner"?"Switch to Buying":"Switch to Selling"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[r?.role==="customer"&&n.jsxs(n.Fragment,{children:[n.jsxs(Zt,{to:"/cart",className:"relative p-2.5 text-gray-600 hover:text-black hover:bg-gray-100 rounded-lg transition-all",children:[n.jsx(yl,{className:"w-5 h-5"}),$>0&&n.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-black text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-medium",children:$})]}),n.jsxs(Zt,{to:"/wishlist",className:"relative p-2.5 text-gray-600 hover:text-black hover:bg-gray-100 rounded-lg transition-all",children:[n.jsx(po,{className:"w-5 h-5"}),o&&o.length>0&&n.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-black text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-medium",children:o.length})]})]}),r?.role==="store_owner"&&n.jsx(Zt,{to:"/wallet-dashboard",className:"relative p-2.5 text-gray-600 hover:text-black hover:bg-gray-100 rounded-lg transition-all",children:n.jsx(Yu,{className:"w-5 h-5"})}),r&&n.jsxs(Zt,{to:"/chats",className:"relative p-2.5 text-gray-600 hover:text-black hover:bg-gray-100 rounded-lg transition-all","aria-label":`You have ${E} unread messages`,title:`Chat ${_?"(Connected)":"(Disconnected)"} - ${E} unread`,children:[n.jsx(Ku,{className:"w-5 h-5"}),E>0&&n.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-red-500 text-white text-xs rounded-full min-w-[16px] h-4 flex items-center justify-center px-1 font-medium",children:E>99?"99+":E})]}),r&&n.jsxs(Zt,{to:"/notifications",className:"relative p-2.5 text-gray-600 hover:text-black hover:bg-gray-100 rounded-lg transition-all","aria-label":`You have ${c} unread notifications`,children:[n.jsx(uy,{className:"w-5 h-5"}),c>0&&n.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-medium",children:c})]}),r?n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>A(!d),className:"flex items-center space-x-2 p-2 text-gray-700 hover:text-black transition-colors",children:[n.jsx(ic,{className:"w-6 h-6"}),n.jsx("span",{className:"hidden sm:block font-medium",children:r.name})]}),d&&n.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[n.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[n.jsx("p",{className:"font-medium text-gray-900",children:r.name}),n.jsx("p",{className:"text-sm text-gray-500 capitalize",children:r.role.replace("_"," ")})]}),n.jsx(Zt,{to:"/profile",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>A(!1),children:"Profile Settings"}),r&&n.jsx("button",{onClick:Q,className:`block px-4 py-2  font-medium transition-colors ${r?.role==="store_owner"?"text-black hover:text-gray-700":"bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500 bg-clip-text text-transparent hover:opacity-80 animate-pulse"}`,children:r?.role==="store_owner"?"Switch to Buying":"Switch to Selling"}),r.role==="customer"&&n.jsxs(n.Fragment,{children:[n.jsx(Zt,{to:"/orders",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>A(!1),children:"My Orders"}),n.jsx(Zt,{to:"/bookings",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>A(!1),children:"My Bookings"}),n.jsx(Zt,{to:"/wishlist",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>A(!1),children:"My Wishlist"})]}),r.role==="store_owner"&&n.jsxs(n.Fragment,{children:[n.jsx(Zt,{to:"/dashboard",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>A(!1),children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ei,{className:"w-4 h-4"}),n.jsx("span",{children:"Dashboard"})]})}),n.jsx(Zt,{to:"/sales-analytics",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>A(!1),children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ti,{className:"w-4 h-4"}),n.jsx("span",{children:"Analytics"})]})}),n.jsx(Zt,{to:"/orders",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>A(!1),children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ps,{className:"w-4 h-4"}),n.jsx("span",{children:"Orders"})]})}),n.jsx(Zt,{to:"/bookings",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>A(!1),children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ms,{className:"w-4 h-4"}),n.jsx("span",{children:"Bookings"})]})})]}),n.jsx("hr",{className:"my-2"}),n.jsx("button",{onClick:I,className:"block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100 transition-colors",children:"Sign Out"})]})]}):n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Zt,{to:"/login",className:"text-gray-700 hover:text-black transition-colors font-medium",children:"Sign In"}),n.jsx(Zt,{to:"/register",className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors font-medium",children:"Get Started"})]}),n.jsx("button",{onClick:()=>u(!l),className:"lg:hidden p-2.5 text-gray-600 hover:text-black hover:bg-gray-100 rounded-lg transition-all ml-2","aria-label":"Toggle mobile menu",children:l?n.jsx(Ts,{className:"w-5 h-5"}):n.jsx(hR,{className:"w-5 h-5"})})]})]}),l&&n.jsx("div",{className:"lg:hidden border-t border-gray-100 bg-white",children:n.jsxs("div",{className:"py-4 space-y-4",children:[n.jsx("form",{onSubmit:k,className:"px-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ca,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",value:m,onChange:N,placeholder:"Search products & services...",className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-sm"})]})}),n.jsxs("nav",{className:"px-4 space-y-1",children:[n.jsx(Zt,{to:"/products",className:"flex items-center px-3 py-2.5 text-gray-600 hover:text-black hover:bg-gray-50 rounded-lg transition-colors font-medium",onClick:()=>u(!1),children:"Products"}),n.jsx(Zt,{to:"/services",className:"flex items-center px-3 py-2.5 text-gray-600 hover:text-black hover:bg-gray-50 rounded-lg transition-colors font-medium",onClick:()=>u(!1),children:"Services"}),n.jsx(Zt,{to:"/stores",className:"flex items-center px-3 py-2.5 text-gray-600 hover:text-black hover:bg-gray-50 rounded-lg transition-colors font-medium",onClick:()=>u(!1),children:"Stores"}),r?.role==="store_owner"&&n.jsx(Zt,{to:"/dashboard",className:"flex items-center px-3 py-2.5 text-gray-600 hover:text-black hover:bg-gray-50 rounded-lg transition-colors font-medium",onClick:()=>u(!1),children:"Dashboard"}),r&&n.jsx("button",{onClick:()=>{Q(),u(!1)},className:`w-full text-left px-3 py-2.5 rounded-lg transition-all font-medium ${r?.role==="store_owner"?"text-gray-600 hover:text-black hover:bg-gray-50":"bg-gradient-to-r from-blue-500 to-purple-600 text-white"}`,children:r?.role==="store_owner"?"Switch to Buying":"Switch to Selling"})]})]})})]})}),n.jsx(GR,{categories:y,isOpen:j,onClose:()=>C(!1),onCategoryClick:O})]})},qR=()=>{const[r,t]=ee.useState(""),[s,i]=ee.useState(!1),[a,o]=ee.useState({x:0,y:0}),[c,l]=ee.useState(!1),[u,d]=ee.useState(null);ee.useEffect(()=>{const m=g=>{o({x:g.clientX,y:g.clientY})};return window.addEventListener("mousemove",m),()=>window.removeEventListener("mousemove",m)},[]);const A=async()=>{if(!r){d("Please enter an email.");return}d(null),l(!0);try{const m=await fetch("http://localhost:10000/api/email-subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),g=await m.json();if(!m.ok){d(g.message||"Subscription failed"),l(!1);return}i(!0),l(!1),setTimeout(()=>{i(!1),t("")},2500)}catch{d("Network error. Please try again later."),l(!1)}},f=[{icon:Wu,title:"Bank-Grade Security",desc:"SSL & encrypted transactions"},{icon:Hu,title:"Island-wide Delivery",desc:"Colombo to Jaffna in 24hrs"},{icon:$u,title:"Verified Sellers",desc:"Licensed Sri Lankan businesses"},{icon:Xr,title:"Quality Guaranteed",desc:"100% authentic products"}],p=[{title:"Marketplace",links:["Premium Stores","Featured Products","New Arrivals","Top Sellers"]},{title:"Sellers",links:["Start Selling","Business Account","Seller Resources","Success Stories"]},{title:"Support",links:["Help Center","Live Chat","Returns Policy","Contact Us"]},{title:"Company",links:["About AIO","Careers","Press","Partnerships"]}];return n.jsxs("footer",{className:"relative bg-black text-white overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 opacity-5",children:[n.jsx("div",{className:"absolute inset-0 transition-all duration-1000",style:{background:`radial-gradient(circle 200px at ${a.x}px ${a.y}px, rgba(255,255,255,0.1), transparent 50%)`}}),n.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(45deg, transparent 49%, rgba(255,255,255,0.03) 50%, transparent 51%)",backgroundSize:"20px 20px"}})]}),n.jsx("div",{className:"relative border-b border-white/10",children:n.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:f.map((m,g)=>{const b=m.icon;return n.jsxs("div",{className:"group relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent rounded-xl transform group-hover:scale-105 transition-all duration-500 group-hover:from-white/20"}),n.jsxs("div",{className:"relative p-4 text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 mb-3 rounded-full bg-white/10 group-hover:bg-white/20 transition-all duration-500 group-hover:scale-110",children:n.jsx(b,{className:"w-4 h-4 text-white"})}),n.jsx("h4",{className:"text-sm font-medium mb-1 group-hover:text-white transition-colors duration-300",children:m.title}),n.jsx("p",{className:"text-white/60 font-light text-xs group-hover:text-white/80 transition-colors duration-300",children:m.desc})]})]},g)})})})}),n.jsxs("div",{className:"relative max-w-7xl mx-auto px-6 py-8",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-white/10 via-transparent to-white/10 rounded-2xl opacity-0 group-hover:opacity-100 transition-all duration-700 blur-xl"}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center mr-3 group-hover:scale-110 transition-transform duration-500",children:n.jsx("span",{className:"text-black font-bold text-lg",children:"A"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-light tracking-wider",children:"AIO"}),n.jsx("p",{className:"text-white/60 text-xs font-light",children:"All In One"})]})]}),n.jsx("p",{className:"text-white/80 font-light leading-relaxed mb-6 text-sm",children:"Sri Lanka's premier digital marketplace connecting authentic local businesses with discerning customers."}),n.jsxs("div",{className:"relative",children:[n.jsx("h4",{className:"text-sm font-medium mb-3 tracking-wide",children:"Stay Connected"}),n.jsxs("div",{className:"flex",children:[n.jsx("input",{type:"email",value:r,onChange:m=>t(m.target.value),placeholder:"Enter email",className:"flex-1 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-l-xl border border-white/20 focus:outline-none focus:border-white/40 placeholder-white/50 font-light transition-all duration-300 text-sm"}),n.jsx("button",{onClick:A,disabled:s||c,className:`px-4 py-2 rounded-r-xl font-medium transition-all duration-500 text-sm ${s?"bg-green-500 text-white":"bg-white text-black hover:bg-white/90 hover:scale-105"} ${c?"opacity-50 cursor-not-allowed":""}`,children:s?n.jsx(Xr,{className:"w-4 h-4"}):c?n.jsx("span",{children:"Loading..."}):n.jsx(Qv,{className:"w-4 h-4"})}),u&&n.jsx("p",{className:"mt-1 text-white-400 text-xs",children:u})]})]})]})]})}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:p.map((m,g)=>n.jsxs("div",{className:"group",children:[n.jsx("h4",{className:"text-sm font-medium mb-4 tracking-wide group-hover:text-white transition-colors duration-300",children:m.title}),n.jsx("ul",{className:"space-y-2",children:m.links.map((b,v)=>n.jsx("li",{children:n.jsxs("a",{href:"#",className:"text-white/70 font-light hover:text-white transition-all duration-300 flex items-center group/link text-xs",children:[n.jsx("span",{className:"group-hover/link:translate-x-1 transition-transform duration-300",children:b}),n.jsx(Qv,{className:"w-3 h-3 ml-1 opacity-0 group-hover/link:opacity-100 transition-all duration-300"})]})},v))})]},g))})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6 pt-6 border-t border-white/10",children:[n.jsxs("div",{className:"flex items-center group/contact cursor-pointer",children:[n.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center mr-3 group-hover/contact:bg-white/20 transition-all duration-300",children:n.jsx(vl,{className:"w-3 h-3"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium group-hover/contact:text-white transition-colors text-sm",children:"support@aio.lk"}),n.jsx("p",{className:"text-white/60 text-xs",children:"24/7 Support"})]})]}),n.jsxs("div",{className:"flex items-center group/contact cursor-pointer",children:[n.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center mr-3 group-hover/contact:bg-white/20 transition-all duration-300",children:n.jsx(wl,{className:"w-3 h-3"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium group-hover/contact:text-white transition-colors text-sm",children:"Colombo, Sri Lanka"}),n.jsx("p",{className:"text-white/60 text-xs",children:"Island-wide Service"})]})]})]})]}),n.jsx("div",{className:"relative border-t border-white/10",children:n.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-2 md:space-y-0",children:[n.jsxs("div",{className:"flex flex-col md:flex-row items-center space-y-1 md:space-y-0 md:space-x-6 text-white/60",children:[n.jsxs("p",{className:"font-light text-sm",children:[" ",new Date().getFullYear()," AIO Sri Lanka. All rights reserved."]}),n.jsxs("div",{className:"flex items-center space-x-4 text-xs",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(aa,{className:"w-3 h-3 mr-1"}),"SSL Secured"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(gl,{className:"w-3 h-3 mr-1"}),"Secure Payments"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Fk,{className:"w-3 h-3 mr-1"}),"Licensed Business"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),n.jsx("span",{className:"text-white/60 font-light text-xs",children:"Proudly Sri Lankan"})]})]})})})]})};function YR(){const{pathname:r}=bl();return ee.useEffect(()=>{window.scrollTo(0,0)},[r]),null}function XR(){const[r,t]=ee.useState(!1);ee.useEffect(()=>{const i=()=>{t(window.scrollY>200)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[]);const s=()=>{window.scrollTo({top:0,behavior:"smooth"})};return n.jsx("button",{onClick:s,className:`fixed bottom-5 right-5 flex items-center justify-center
        w-12 h-12 rounded-full border-2 border-white bg-black text-white text-2xl shadow-lg
        transition-all duration-300 hover:scale-110 hover:bg-gray-800
        ${r?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-label":"Scroll to top",children:""})}const Br=r=>(typeof r!="number"&&(r=parseFloat(r)||0),new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR",minimumFractionDigits:2,maximumFractionDigits:2}).format(r)),sa=r=>(typeof r!="number"&&(r=parseFloat(r)||0),r>=1e6?`LKR ${(r/1e6).toFixed(1)}M`:r>=1e3?`LKR ${(r/1e3).toFixed(1)}K`:Br(r)),H1=()=>RR(),Ay=({product:r})=>{const t=ee.useRef(null),{addToOrder:s}=ac(),{user:i}=Fn(),{addToWishlist:a,removeFromWishlist:o,isInWishlist:c,isLoading:l}=ay(),{trackProductImpression:u,createImpressionObserver:d}=H1(),[A,f]=ee.useState(!1),[p,m]=ee.useState(1),g=c(r._id);ee.useEffect(()=>{const B=d(E=>{u(r),typeof gtag<"u"&&gtag("event","view_item",{currency:"LKR",value:r.price,items:[{item_id:r._id,item_name:r.title,category:r.category,price:r.price}]}),typeof clarity<"u"&&clarity("event","product_view",{product_id:r._id,product_name:r.title,category:r.category,price:r.price})},{threshold:.5,rootMargin:"0px"});return t.current&&B.observe(t.current),()=>{t.current&&B.unobserve(t.current)}},[r._id,u,d,r]);const b=()=>{const B=new Date(Date.now()-6048e5);return new Date(r.createdAt)>B},v=()=>r.oldPrice&&r.oldPrice>r.price,y=()=>r.stock<=5&&r.stock>0,w=B=>{if(B.preventDefault(),B.stopPropagation(),i?.role!=="customer"){alert("Only customers can add items to cart");return}const E={...r,storeId:r.storeId?._id||r.storeId};console.log("Added to cart:",{product:r._id,quantity:p}),f(!1),s(E,p)},j=B=>{B.preventDefault(),B.stopPropagation(),f(!0)},C=async B=>{if(B.preventDefault(),B.stopPropagation(),i?.role!=="customer"){alert("Only customers can add items to wishlist");return}try{g?await o(r._id):await a(r)}catch(E){console.error("Wishlist error:",E)}};return n.jsxs(n.Fragment,{children:[n.jsx(Zt,{to:`/product/${r._id}`,className:"block",children:n.jsx("div",{className:"relative w-full",ref:t,children:n.jsxs("div",{className:"group relative bg-white rounded-lg sm:rounded-xl shadow-lg hover:shadow-2xl transition-all duration-500 overflow-hidden border border-gray-200 hover:border-black transform hover:-translate-y-1 sm:hover:-translate-y-2 w-full h-full flex flex-col",children:[n.jsxs("div",{className:"absolute top-2 sm:top-3 left-2 sm:left-3 z-20 flex flex-col gap-1 sm:gap-2",children:[b()&&n.jsx("span",{className:"bg-black text-white text-xs font-bold px-2 sm:px-4 py-1 sm:py-1.5 rounded-full shadow-lg backdrop-blur-sm tracking-wider",children:"NEW"}),v()&&n.jsx("span",{className:"bg-black text-white text-xs font-bold px-2 sm:px-4 py-1 sm:py-1.5 rounded-full shadow-lg backdrop-blur-sm tracking-wider",children:"SALE"}),y()&&n.jsxs("span",{className:"bg-black text-white text-xs font-bold px-2 sm:px-4 py-1 sm:py-1.5 rounded-full shadow-lg backdrop-blur-sm flex items-center gap-1 tracking-wider",children:[n.jsx(Ki,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),n.jsx("span",{className:"hidden sm:inline",children:"LOW STOCK"}),n.jsx("span",{className:"sm:hidden",children:"LOW"})]})]}),n.jsx("div",{className:"absolute top-2 sm:top-3 right-2 sm:right-3 z-20 flex flex-row sm:flex-col gap-1 sm:gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-500 transform translate-x-0 sm:translate-x-4 sm:group-hover:translate-x-0",children:i?.role==="customer"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:C,disabled:l,className:`p-2 sm:p-3 rounded-full backdrop-blur-md transition-all duration-300 shadow-xl disabled:opacity-50 disabled:cursor-not-allowed ${g?"bg-black text-white":"bg-white/95 text-gray-700 hover:bg-black hover:text-white border border-gray-200"}`,children:l?n.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin border border-current border-t-transparent rounded-full"}):n.jsx(po,{className:`w-3 h-3 sm:w-4 sm:h-4 ${g?"fill-current":""}`})}),n.jsx("button",{onClick:j,className:"p-2 sm:p-3 rounded-full bg-white/95 backdrop-blur-md text-gray-700 hover:bg-black hover:text-white transition-all duration-300 shadow-xl border border-gray-200",children:n.jsx(Gn,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})}),n.jsxs("div",{className:"relative h-32 sm:h-36 lg:h-40 overflow-hidden",children:[n.jsx("img",{src:r.images?.[0]||"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",alt:r.title,className:`absolute inset-0 w-full h-full object-cover transition-all duration-700 group-hover:scale-110 ${r.images?.[1]?"group-hover:opacity-0":"group-hover:opacity-60"}`}),r.images?.[1]&&n.jsx("img",{src:r.images[1],alt:`${r.title} hover`,className:"absolute inset-0 w-full h-full object-cover opacity-0 group-hover:opacity-100 transition-all duration-700 group-hover:scale-110"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),n.jsxs("div",{className:"p-2 flex-1 flex flex-col",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1 h-4",children:[n.jsx(Mc,{className:"w-2.5 h-2.5 text-gray-600"}),n.jsx("span",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide truncate",children:r.category})]}),n.jsx("h3",{className:"font-bold text-black mb-2 line-clamp-2 group-hover:text-gray-800 transition-all duration-300 leading-tight text-xs h-8 overflow-hidden font-body",children:r.title}),n.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[n.jsx("span",{className:"text-sm sm:text-base font-black text-black",children:Br(r.price)}),v()&&n.jsx("span",{className:"text-xs sm:text-sm text-gray-400 line-through font-medium",children:Br(r.oldPrice)}),v()&&n.jsxs("span",{className:"text-xs font-bold text-white bg-black px-2 sm:px-3 py-0.5 sm:py-1 rounded-full",children:[Math.round((r.oldPrice-r.price)/r.oldPrice*100),"%"]})]}),(r.rating>0||r.totalOrders>0)&&n.jsxs("div",{className:`grid gap-2 mb-1 ${r.rating>0&&r.totalOrders>0?"grid-cols-2":"grid-cols-1"}`,children:[r.rating>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"flex",children:[...Array(5)].map((B,E)=>n.jsx(mn,{className:`w-2.5 h-2.5 ${E<Math.floor(r.rating)?"fill-black text-black":"fill-gray-300 text-gray-300"}`},E))}),n.jsx("span",{className:"text-xs text-black font-medium",children:r.rating})]}),r.totalOrders>0&&n.jsx("div",{className:`${r.rating>0?"text-right":"text-left"}`,children:n.jsxs("span",{className:"text-xs text-black font-medium",children:[r.totalOrders," sold"]})})]}),n.jsx("div",{className:"flex justify-center mb-1",children:n.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full w-full text-center ${r.stock>5?"text-black bg-gray-100":r.stock>0?"text-white bg-gray-600":"text-white bg-black"}`,children:r.stock>0?`${r.stock} in stock`:"Out of stock"})}),n.jsx("div",{className:"mt-auto pt-1",children:r.stock>0&&n.jsxs("button",{onClick:j,className:"w-full bg-black text-white py-1.5 rounded-lg font-bold transition-all duration-300 hover:bg-gray-800 hover:shadow-xl transform hover:scale-[1.02] text-xs",children:[n.jsx("span",{className:"hidden sm:inline",children:"QUICK VIEW"}),n.jsx("span",{className:"sm:hidden",children:"VIEW"})]})})]})]})})}),A&&n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-xs sm:max-w-md max-h-[90vh] overflow-y-auto border border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>f(!1),className:"absolute top-3 sm:top-4 right-3 sm:right-4 z-10 p-2 bg-white/95 backdrop-blur-md rounded-full hover:bg-black hover:text-white transition-all duration-300 border border-gray-200",children:n.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("div",{className:"h-48 sm:h-64 overflow-hidden rounded-t-xl sm:rounded-t-2xl",children:n.jsx("img",{src:r.images?.[0]||"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",alt:r.title,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Mc,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400"}),n.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-500 uppercase tracking-widest",children:r.category})]}),n.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-black mb-3 sm:mb-4 font-display",children:r.title}),n.jsx("p",{className:"text-gray-600 mb-4 sm:mb-5 leading-relaxed text-sm sm:text-base font-body",children:r.description}),n.jsxs("div",{className:"flex items-baseline gap-2 sm:gap-3 mb-4",children:[n.jsx("span",{className:"text-2xl sm:text-3xl font-black text-black",children:Br(r.price)}),v()&&n.jsx("span",{className:"text-base sm:text-lg text-gray-400 line-through font-medium",children:Br(r.oldPrice)})]}),n.jsxs("div",{className:`grid gap-4 mb-6 p-3 bg-gray-100 rounded-lg grid-cols-${[r.rating>0,!0,r.totalOrders>0].filter(Boolean).length}`,children:[r.rating>0&&n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"block text-lg font-bold text-black",children:r.rating}),n.jsx("span",{className:"text-xs text-gray-700 uppercase tracking-wide",children:"Rating"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"block text-lg font-bold text-black",children:r.stock||0}),n.jsx("span",{className:"text-xs text-gray-700 uppercase tracking-wide",children:"Stock"})]}),r.totalOrders>0&&n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"block text-lg font-bold text-black",children:r.totalOrders}),n.jsx("span",{className:"text-xs text-gray-700 uppercase tracking-wide",children:"Sold"})]})]}),r.rating>0&&n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[n.jsx("div",{className:"flex",children:[...Array(5)].map((B,E)=>n.jsx(mn,{className:`w-5 h-5 ${E<Math.floor(r.rating)?"fill-black text-black":"fill-gray-300 text-gray-300"}`},E))}),n.jsxs("span",{className:"text-base font-medium text-black",children:["(",r.rating,"/5)"]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mb-6 sm:mb-8",children:[n.jsx("span",{className:"text-sm font-bold text-gray-900",children:"QUANTITY:"}),n.jsxs("div",{className:"flex items-center border-2 border-gray-900 rounded-lg w-fit",children:[n.jsx("button",{type:"button",onClick:()=>m(Math.max(1,p-1)),className:"px-3 sm:px-4 py-2 text-gray-900 hover:bg-gray-100 transition-colors font-bold",children:""}),n.jsx("span",{className:"px-4 sm:px-6 py-2 border-x-2 border-gray-900 bg-gray-50 font-bold min-w-[60px] text-center",children:p}),n.jsx("button",{type:"button",onClick:()=>m(Math.min(r.stock,p+1)),className:"px-3 sm:px-4 py-2 text-gray-900 hover:bg-gray-100 transition-colors font-bold",children:"+"})]})]}),n.jsxs("button",{onClick:w,className:"w-full bg-black text-white py-3 sm:py-4 rounded-lg sm:rounded-xl font-bold transition-all duration-300 hover:bg-gray-900 hover:shadow-2xl transform hover:scale-[1.02] flex items-center justify-center gap-2 sm:gap-3 tracking-wide text-sm sm:text-base",children:[n.jsx(yl,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"ADD TO CART"]})]})]})})})]})},hy=({service:r})=>{const t=ee.useRef(null),[s,i]=ee.useState(!1),{addToBooking:a}=ac(),{user:o}=Fn(),{addToWishlist:c,removeFromWishlist:l,isInWishlist:u,isLoading:d}=ay(),{trackServiceImpression:A,createImpressionObserver:f}=H1(),p=u(r._id);ee.useEffect(()=>{const y=f(w=>{A(r),typeof gtag<"u"&&gtag("event","view_item",{currency:"LKR",value:r.price,items:[{item_id:r._id,item_name:r.title,category:r.category,price:r.price}]}),typeof clarity<"u"&&clarity("event","service_view",{service_id:r._id,service_name:r.title,category:r.category,price:r.price,duration:r.duration})},{threshold:.5,rootMargin:"0px"});return t.current&&y.observe(t.current),()=>{t.current&&y.unobserve(t.current)}},[r._id,A,f,r]);const m=()=>{const y=new Date(Date.now()-6048e5);return new Date(r.createdAt)>y},g=async y=>{if(y.preventDefault(),y.stopPropagation(),o?.role!=="customer"){alert("Only customers can add items to wishlist");return}try{p?await l(r._id):await c(r)}catch(w){console.error("Wishlist error:",w)}},b=y=>{y.preventDefault(),y.stopPropagation(),i(!0)},v=y=>{y.preventDefault(),y.stopPropagation(),i(!1),window.location.href=`/service/${r._id}`};return n.jsxs(n.Fragment,{children:[n.jsx(Zt,{to:`/service/${r._id}`,className:"block",children:n.jsx("div",{className:"relative w-full",ref:t,children:n.jsxs("div",{className:"group relative bg-white rounded-lg sm:rounded-xl shadow-lg hover:shadow-2xl transition-all duration-500 overflow-hidden border border-gray-200 hover:border-black transform hover:-translate-y-1 sm:hover:-translate-y-2 w-full h-full flex flex-col",children:[n.jsxs("div",{className:"absolute top-2 sm:top-3 left-2 sm:left-3 z-20 flex flex-col gap-1 sm:gap-2",children:[m()&&n.jsx("span",{className:"bg-black text-white text-xs font-bold px-2 sm:px-4 py-1 sm:py-1.5 rounded-full shadow-lg backdrop-blur-sm tracking-wider",children:"NEW"}),n.jsx("span",{className:"bg-black text-white text-xs font-bold px-2 sm:px-4 py-1 sm:py-1.5 rounded-full shadow-lg backdrop-blur-sm tracking-wider uppercase",children:r.priceType})]}),n.jsx("div",{className:"absolute top-2 sm:top-3 right-2 sm:right-3 z-20 flex flex-row sm:flex-col gap-1 sm:gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-500 transform translate-x-0 sm:translate-x-4 sm:group-hover:translate-x-0",children:o?.role==="customer"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:g,disabled:d,className:`p-2 sm:p-3 rounded-full backdrop-blur-md transition-all duration-300 shadow-xl disabled:opacity-50 disabled:cursor-not-allowed ${p?"bg-black text-white":"bg-white/95 text-black hover:bg-black hover:text-white border border-black"}`,children:d?n.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin border border-current border-t-transparent rounded-full"}):n.jsx(po,{className:`w-3 h-3 sm:w-4 sm:h-4 ${p?"fill-current":""}`})}),n.jsx("button",{onClick:b,className:"p-2 sm:p-3 rounded-full bg-white/95 backdrop-blur-md text-black hover:bg-black hover:text-white transition-all duration-300 shadow-xl border border-black",children:n.jsx(Gn,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})}),n.jsxs("div",{className:"relative h-32 sm:h-36 lg:h-40 overflow-hidden",children:[n.jsx("img",{src:r.images?.[0]||"https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400&h=300&fit=crop",alt:r.title,className:`absolute inset-0 w-full h-full object-cover transition-all duration-700 group-hover:scale-110 ${r.images?.[1]?"group-hover:opacity-0":"group-hover:opacity-60"}`}),r.images?.[1]&&n.jsx("img",{src:r.images[1],alt:`${r.title} hover`,className:"absolute inset-0 w-full h-full object-cover opacity-0 group-hover:opacity-100 transition-all duration-700 group-hover:scale-110"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),n.jsxs("div",{className:"p-2 flex-1 flex flex-col",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1 h-4",children:[n.jsx(Mc,{className:"w-2.5 h-2.5 text-gray-600"}),n.jsx("span",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide truncate",children:r.category})]}),n.jsx("h3",{className:"font-bold text-black mb-2 line-clamp-2 group-hover:text-gray-800 transition-all duration-300 leading-tight text-xs h-8 overflow-hidden font-body",children:r.title}),n.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[n.jsx("span",{className:"text-sm sm:text-base font-black text-black",children:Br(r.price)}),r.priceType==="hourly"&&n.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:"/HOUR"})]}),(r.rating>0||r.totalBookings>0)&&n.jsxs("div",{className:`grid gap-2 mb-1 ${r.rating>0&&r.totalBookings>0?"grid-cols-2":"grid-cols-1"}`,children:[r.rating>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"flex",children:[...Array(5)].map((y,w)=>n.jsx(mn,{className:`w-2.5 h-2.5 ${w<Math.floor(r.rating)?"fill-black text-black":"fill-gray-300 text-gray-300"}`},w))}),n.jsx("span",{className:"text-xs text-black font-medium",children:r.rating})]}),r.totalBookings>0&&n.jsx("div",{className:`${r.rating>0?"text-right":"text-left"}`,children:n.jsxs("span",{className:"text-xs text-black font-medium",children:[r.totalBookings," booked"]})})]}),n.jsx("div",{className:"flex justify-center mb-1",children:n.jsxs("div",{className:"flex items-center gap-1 text-xs font-bold px-2 py-1 rounded-full bg-gray-100 text-black w-full justify-center",children:[n.jsx(is,{className:"w-3 h-3"}),n.jsxs("span",{className:"hidden sm:inline",children:[r.duration," minutes"]}),n.jsxs("span",{className:"sm:hidden",children:[r.duration,"m"]})]})}),n.jsx("div",{className:"mt-auto pt-1",children:o&&n.jsxs("button",{onClick:b,className:"w-full bg-black text-white py-1.5 rounded-lg font-bold transition-all duration-300 hover:bg-gray-800 hover:shadow-xl transform hover:scale-[1.02] text-xs",children:[n.jsx("span",{className:"hidden sm:inline",children:"QUICK VIEW"}),n.jsx("span",{className:"sm:hidden",children:"VIEW"})]})})]})]})})}),s&&n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-xs sm:max-w-md max-h-[90vh] overflow-y-auto border border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>i(!1),className:"absolute top-3 sm:top-4 right-3 sm:right-4 z-10 p-2 bg-white/95 backdrop-blur-md rounded-full hover:bg-black hover:text-white transition-all duration-300 border border-gray-200",children:n.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("div",{className:"h-48 sm:h-64 overflow-hidden rounded-t-xl sm:rounded-t-2xl",children:n.jsx("img",{src:r.images?.[0]||"https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400&h=300&fit=crop",alt:r.title,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Mc,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400"}),n.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-500 uppercase tracking-widest",children:r.category})]}),n.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-black mb-3 sm:mb-4 font-display",children:r.title}),n.jsx("p",{className:"text-gray-600 mb-4 sm:mb-5 leading-relaxed text-sm sm:text-base font-body",children:r.description}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl sm:text-3xl font-black text-black",children:Br(r.price)}),r.priceType==="hourly"&&n.jsx("span",{className:"text-sm font-bold text-gray-500 uppercase tracking-wide",children:"/HOUR"})]}),n.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 px-3 py-2 rounded-full",children:[n.jsx(is,{className:"w-4 h-4 text-black"}),n.jsxs("span",{className:"text-sm font-bold text-black",children:[r.duration," min"]})]})]}),n.jsxs("div",{className:`grid gap-4 mb-6 p-3 bg-gray-100 rounded-lg grid-cols-${[r.rating>0,!0,r.totalBookings>0].filter(Boolean).length}`,children:[r.rating>0&&n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"block text-lg font-bold text-black",children:r.rating}),n.jsx("span",{className:"text-xs text-gray-700 uppercase tracking-wide",children:"Rating"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"block text-lg font-bold text-black",children:r.duration||0}),n.jsx("span",{className:"text-xs text-gray-700 uppercase tracking-wide",children:"Minutes"})]}),r.totalBookings>0&&n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"block text-lg font-bold text-black",children:r.totalBookings}),n.jsx("span",{className:"text-xs text-gray-700 uppercase tracking-wide",children:"Booked"})]})]}),r.rating>0&&n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[n.jsx("div",{className:"flex",children:[...Array(5)].map((y,w)=>n.jsx(mn,{className:`w-5 h-5 ${w<Math.floor(r.rating)?"fill-black text-black":"fill-gray-300 text-gray-300"}`},w))}),n.jsxs("span",{className:"text-base font-medium text-black",children:["(",r.rating,"/5)"]})]}),n.jsxs("button",{onClick:v,className:"w-full bg-black text-white py-3 sm:py-4 rounded-lg sm:rounded-xl font-bold transition-all duration-300 hover:bg-gray-800 hover:shadow-2xl transform hover:scale-[1.02] flex items-center justify-center gap-2 sm:gap-3 tracking-wide text-sm sm:text-base",children:[n.jsx(Gn,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"VIEW SERVICE"]})]})]})})})]})},Zk=({store:r})=>{const t=ee.useRef(null),[s,i]=ee.useState(!1),[a,o]=ee.useState(!1),[c,l]=ee.useState(0),{user:u}=Fn(),{trackStoreImpression:d,createImpressionObserver:A}=H1();ee.useEffect(()=>{(async()=>{try{const v=await(await fetch(`http://localhost:10000/api/stores/${r._id}/item-count`)).json();l(v.count)}catch(b){console.error("Error fetching product count",b),l(0)}})()},[r._id]),ee.useEffect(()=>{const g=A(b=>{d(r)},{threshold:.5,rootMargin:"0px"});return t.current&&g.observe(t.current),()=>{t.current&&g.unobserve(t.current)}},[r._id,d,A]);const f=()=>{const g=new Date(Date.now()-6048e5);return new Date(r.createdAt)>g},p=g=>{g.preventDefault(),g.stopPropagation(),o(!a)},m=g=>{g.preventDefault(),g.stopPropagation(),i(!0)};return n.jsxs(n.Fragment,{children:[n.jsx(Zt,{to:`/store/${r._id}`,className:"block",children:n.jsx("div",{className:"relative w-full",children:n.jsxs("div",{ref:t,className:"group relative bg-white rounded-lg sm:rounded-xl shadow-lg hover:shadow-2xl transition-all duration-500 overflow-hidden border border-gray-100 hover:border-black transform hover:-translate-y-1 sm:hover:-translate-y-2 w-full",children:[n.jsxs("div",{className:"absolute top-2 sm:top-3 left-2 sm:left-3 z-20 flex flex-col gap-1 sm:gap-2",children:[f()&&n.jsx("span",{className:"bg-black text-white text-xs font-bold px-2 sm:px-4 py-1 sm:py-1.5 rounded-full shadow-lg backdrop-blur-sm tracking-wider",children:"NEW"}),n.jsxs("span",{className:"bg-gray-900 text-white text-xs font-bold px-2 sm:px-4 py-1 sm:py-1.5 rounded-full shadow-lg backdrop-blur-sm tracking-wider uppercase flex items-center gap-1",children:[n.jsx(ei,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),n.jsx("span",{className:"hidden sm:inline",children:r.type}),n.jsx("span",{className:"sm:hidden",children:r.type.charAt(0).toUpperCase()})]})]}),n.jsx("div",{className:"absolute top-2 sm:top-3 right-12 sm:right-16 z-20",children:n.jsxs("span",{className:`text-xs font-bold px-2 sm:px-3 py-1 sm:py-1.5 rounded-full shadow-lg backdrop-blur-sm ${r.isActive?"bg-green-600 text-white":"bg-gray-600 text-white"}`,children:[n.jsx("span",{className:"hidden sm:inline",children:r.isActive?"ACTIVE":"INACTIVE"}),n.jsx("span",{className:"sm:hidden",children:""})]})}),n.jsx("div",{className:"absolute top-2 sm:top-3 right-2 sm:right-3 z-20 flex flex-row sm:flex-col gap-1 sm:gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-500 transform translate-x-0 sm:translate-x-4 sm:group-hover:translate-x-0",children:u?.role==="customer"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:p,className:`p-2 sm:p-3 rounded-full backdrop-blur-md transition-all duration-300 shadow-xl ${a?"bg-black text-white":"bg-white/95 text-gray-700 hover:bg-black hover:text-white border border-gray-200"}`,children:n.jsx(po,{className:`w-3 h-3 sm:w-4 sm:h-4 ${a?"fill-current":""}`})}),n.jsx("button",{onClick:m,className:"p-2 sm:p-3 rounded-full bg-white/95 backdrop-blur-md text-gray-700 hover:bg-black hover:text-white transition-all duration-300 shadow-xl border border-gray-200",children:n.jsx(Gn,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})}),n.jsxs("div",{className:"relative h-32 sm:h-36 lg:h-40 overflow-hidden",children:[n.jsx("img",{src:r.heroImages?.[0]||"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",alt:r.name,className:`absolute inset-0 w-full h-full object-cover transition-all duration-700 group-hover:scale-110 ${r.heroImages?.[1]?"group-hover:opacity-0":"group-hover:opacity-60"}`}),r.heroImages?.[1]&&n.jsx("img",{src:r.heroImages[1],alt:`${r.name} hero`,className:"absolute inset-0 w-full h-full object-cover opacity-0 group-hover:opacity-100 transition-all duration-700 group-hover:scale-110"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),n.jsxs("div",{className:"p-2 sm:p-3",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-1.5 line-clamp-2 group-hover:text-black transition-all duration-300 leading-tight text-xs sm:text-sm",children:r.name.length>30?`${r.name.slice(0,30)}...`:r.name}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"flex",children:[...Array(5)].map((g,b)=>n.jsx(mn,{className:`w-3 h-3 ${b<Math.floor(r.rating)?"fill-gray-900 text-gray-900":"fill-gray-300 text-gray-300"}`},b))}),n.jsxs("span",{className:"text-xs text-gray-600 ml-1 font-medium",children:["(",r.rating,")"]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs font-bold px-2 sm:px-3 py-1 sm:py-1.5 rounded-full bg-gray-100 text-black",children:[n.jsx(ti,{className:"w-3 h-3"}),n.jsxs("span",{className:"hidden sm:inline",children:[r.totalSales," SALES"]}),n.jsx("span",{className:"sm:hidden",children:r.totalSales})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[n.jsx(ic,{className:"w-3 h-3"}),n.jsx("span",{className:"font-medium",children:r.ownerId?.name||"Store Owner"})]}),r.location&&n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[n.jsx(wl,{className:"w-3 h-3"}),n.jsx("span",{className:"hidden sm:inline",children:r.location}),n.jsx("span",{className:"sm:hidden",children:""})]})]}),u&&r.isActive&&n.jsxs("button",{onClick:m,className:"w-full bg-black text-white py-1.5 sm:py-2 rounded-lg font-bold transition-all duration-300 hover:bg-gray-900 hover:shadow-2xl transform hover:scale-[1.02] focus:outline-none focus:ring-4 focus:ring-gray-300 tracking-wide text-xs",children:[n.jsx("span",{className:"hidden sm:inline",children:"QUICK VIEW"}),n.jsx("span",{className:"sm:hidden",children:"VIEW"})]})]})]})})}),s&&n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-xs sm:max-w-md max-h-[90vh] overflow-y-auto border border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>i(!1),className:"absolute top-3 sm:top-4 right-3 sm:right-4 z-10 p-2 bg-white/95 backdrop-blur-md rounded-full hover:bg-black hover:text-white transition-all duration-300 border border-gray-200",children:n.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("div",{className:"h-48 sm:h-64 overflow-hidden rounded-t-xl sm:rounded-t-2xl",children:n.jsx("img",{src:r.heroImages?.[0]||"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",alt:r.name,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ei,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400"}),n.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-500 uppercase tracking-widest",children:r.type}),n.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ml-auto ${r.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.isActive?"ACTIVE":"INACTIVE"})]}),n.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-black mb-3 sm:mb-4",children:r.name}),n.jsx("p",{className:"text-gray-600 mb-4 sm:mb-5 leading-relaxed text-sm sm:text-base",children:r.description}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[n.jsx("div",{className:"text-lg sm:text-xl font-bold text-black",children:c||0}),n.jsx("div",{className:"text-xs text-gray-600 font-semibold uppercase tracking-wide",children:"Products"})]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[n.jsx("div",{className:"text-lg sm:text-xl font-bold text-black",children:r.totalSales}),n.jsx("div",{className:"text-xs text-gray-600 font-semibold uppercase tracking-wide",children:"Sales"})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-6 sm:mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex",children:[...Array(5)].map((g,b)=>n.jsx(mn,{className:`w-5 h-5 ${b<Math.floor(r.rating)?"fill-gray-900 text-gray-900":"fill-gray-300 text-gray-300"}`},b))}),n.jsxs("span",{className:"text-base font-medium text-gray-600",children:["(",r.rating,")"]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[n.jsx(ic,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:r.ownerId?.name})]})]}),r.isActive&&n.jsx(Zt,{to:`/store/${r._id}`,children:n.jsxs("button",{className:"w-full bg-black text-white py-3 sm:py-4 rounded-lg sm:rounded-xl font-bold transition-all duration-300 hover:bg-gray-900 hover:shadow-2xl transform hover:scale-[1.02] flex items-center justify-center gap-2 sm:gap-3 tracking-wide text-sm sm:text-base",children:[n.jsx(ei,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"VISIT STORE"]})})]})]})})})]})},JR=({category:r,index:t})=>{const[s,i]=ee.useState(!1),a=()=>{i(!0)},o=r.image&&r.image.length>0?r.image[0]:null,c=["from-purple-600 via-blue-600 to-cyan-600","from-pink-500 via-red-500 to-yellow-500","from-green-500 via-teal-500 to-blue-500","from-indigo-600 via-purple-600 to-pink-600","from-orange-500 via-red-500 to-pink-500","from-emerald-500 via-teal-500 to-cyan-500","from-violet-600 via-purple-600 to-blue-600","from-amber-500 via-orange-500 to-red-500"],l=c[t%c.length];return n.jsx(Zt,{to:`/products?category=${encodeURIComponent(r.name)}`,children:n.jsx("div",{className:"group cursor-pointer flex-none",children:n.jsxs("div",{className:"relative w-72 h-40 rounded-2xl overflow-hidden transition-all duration-500 hover:shadow-2xl hover:shadow-black/20 hover:scale-[1.02] transform",children:[o&&!s?n.jsx("img",{src:o,alt:r.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",onError:a}):n.jsx("div",{className:`w-full h-full bg-gradient-to-br ${l}`}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),n.jsxs("div",{className:"absolute inset-0 flex flex-col justify-between p-6",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full",children:[n.jsx(qu,{className:"w-3 h-3 text-white"}),n.jsx("span",{className:"text-xs text-white font-medium",children:"Popular"})]}),n.jsx("div",{className:"p-2 bg-white/20 backdrop-blur-sm rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-x-2 group-hover:translate-x-0",children:n.jsx(Qv,{className:"w-4 h-4 text-white"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-xl font-bold text-white leading-tight drop-shadow-lg",children:r.name}),n.jsxs("div",{className:"flex items-center space-x-4 text-white/80",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(ti,{className:"w-3 h-3"}),n.jsx("span",{className:"text-xs font-medium",children:"Trending"})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ti,{className:"w-3 h-3"}),n.jsx("span",{className:"text-xs font-medium",children:"1.2k+ items"})]})]})]})]}),n.jsx("div",{className:"absolute inset-0 rounded-2xl ring-2 ring-transparent group-hover:ring-white/30 transition-all duration-300"})]})})})},ZR=({categories:r,title:t="Explore Categories"})=>{const s=ee.useRef(null),i=o=>{const c=s.current;if(!c)return;const l=300,u=c.scrollWidth-c.clientWidth;o==="left"?c.scrollLeft<=0?c.scrollTo({left:u,behavior:"smooth"}):c.scrollBy({left:-l,behavior:"smooth"}):c.scrollLeft>=u?c.scrollTo({left:0,behavior:"smooth"}):c.scrollBy({left:l,behavior:"smooth"})},a=r&&r.length>0?r:[{_id:1,name:"Digital Marketing & SEO",image:["https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop"]},{_id:2,name:"Web Development & Design",image:["https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=600&h=400&fit=crop"]},{_id:3,name:"Graphic Design & Branding",image:["https://images.unsplash.com/photo-1561070791-2526d30994b5?w=600&h=400&fit=crop"]},{_id:4,name:"Business Consulting",image:["https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600&h=400&fit=crop"]},{_id:5,name:"Content Creation & Copywriting",image:["https://images.unsplash.com/photo-1486312338219-ce68e2c6b81d?w=600&h=400&fit=crop"]},{_id:6,name:"Photography & Video",image:["https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=600&h=400&fit=crop"]},{_id:7,name:"E-commerce Solutions",image:["https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=600&h=400&fit=crop"]},{_id:8,name:"Legal & Financial Services",image:["https://images.unsplash.com/photo-1450101499163-c8848c66ca85?w=600&h=400&fit=crop"]}];return n.jsx("section",{className:"py-16 bg-gradient-to-b from-gray-50 to-white",children:n.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("div",{className:"text-center mb-12",children:n.jsx("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-4 leading-tight font-sans",children:t})}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>i("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-white rounded-full shadow-xl border border-gray-100 flex items-center justify-center hover:bg-gray-50 hover:shadow-2xl transition-all duration-300 group",children:n.jsx(oA,{className:"w-6 h-6 text-gray-600 group-hover:text-black transition-colors"})}),n.jsx("button",{onClick:()=>i("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-white rounded-full shadow-xl border border-gray-100 flex items-center justify-center hover:bg-gray-50 hover:shadow-2xl transition-all duration-300 group",children:n.jsx(Jl,{className:"w-6 h-6 text-gray-600 group-hover:text-black transition-colors"})}),n.jsx("div",{className:"mx-16",children:n.jsx("div",{ref:s,className:"flex space-x-6 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitScrollbar:{display:"none"}},children:a.map((o,c)=>n.jsx(JR,{category:o,index:c},o._id))})})]})]})})},e_=({saleStartsInHours:r=0,saleStartsInMinutes:t=0,saleStartsInSeconds:s=4,saleEndsInHours:i=6,saleEndsInMinutes:a=30,saleEndsInSeconds:o=0,saleName:c="MEGA FLASH SALE",saleSubtitle:l="Limited time offers you can't miss",discountText:u="UP TO 80% OFF",buttonText:d="SHOP NOW",timerLabel:A="Sale Starts In:",backgroundColor:f="linear-gradient(135deg, #ff1744, #e91e63, #f50057)",backgroundImage:p=null,textColor:m="#ffffff",accentColor:g="#ffff00",heroImage:b="https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?w=500&h=400&fit=crop&format=png",showHeroImage:v=!0,products:y=[{id:1,image:"https://firebasestorage.googleapis.com/v0/b/all-in-one-98568.firebasestorage.app/o/sales%2Fsale.png?alt=media&token=131461b9-f22b-41fc-b8e8-3d467401d3d7",title:"Top deals",price:"LKR926.18",category:"Electronics"},{id:2,image:"https://firebasestorage.googleapis.com/v0/b/all-in-one-98568.firebasestorage.app/o/sales%2Fsale.png?alt=media&token=131461b9-f22b-41fc-b8e8-3d467401d3d7",title:"Tech essentials",price:"LKR953.86",category:"Gadgets"},{id:3,image:"https://firebasestorage.googleapis.com/v0/b/all-in-one-98568.firebasestorage.app/o/sales%2Fsale.png?alt=media&token=131461b9-f22b-41fc-b8e8-3d467401d3d7",title:"Top deals",price:"LKR14,184.05",category:"Fashion"}],onPage:w=!1})=>{const[j,C]=ee.useState(0),[B,E]=ee.useState({hours:0,minutes:4,seconds:20}),[_,S]=ee.useState(!1);ee.useEffect(()=>{const O=setInterval(()=>{C(k=>(k+1)%y.length)},4e3);return()=>clearInterval(O)},[y.length]),ee.useEffect(()=>{const O=new Date,k=new Date(O.getTime()+r*60*60*1e3+t*60*1e3+s*1e3),I=new Date(k.getTime()+i*60*60*1e3+a*60*1e3+o*1e3),R=()=>{const $=new Date;if($<k){S(!1);const L=k-$,F=Math.floor(L/(1e3*60*60)),G=Math.floor(L%(1e3*60*60)/(1e3*60)),X=Math.floor(L%(1e3*60)/1e3);E({hours:F,minutes:G,seconds:X})}else if($<I){S(!0);const L=I-$,F=Math.floor(L/(1e3*60*60)),G=Math.floor(L%(1e3*60*60)/(1e3*60)),X=Math.floor(L%(1e3*60)/1e3);E({hours:F,minutes:G,seconds:X})}else S(!1),E({hours:0,minutes:0,seconds:0})};R();const Q=setInterval(R,1e3);return()=>clearInterval(Q)},[r,t,s,i,a,o]);const N=p?{backgroundImage:`url(${p})`,backgroundSize:"cover",backgroundPosition:"center"}:{background:f};return n.jsxs("section",{className:"relative overflow-hidden",style:N,children:[n.jsxs("div",{className:"absolute inset-0 opacity-20",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-white rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-10 right-20 w-48 h-48 bg-white rounded-full blur-3xl"}),n.jsx("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-white rounded-full blur-2xl"}),n.jsx("div",{className:"absolute top-5 right-5 w-4 h-4 bg-yellow-300 rotate-45"}),n.jsx("div",{className:"absolute bottom-20 left-20 w-6 h-6 bg-cyan-300 rotate-12"}),n.jsx("div",{className:"absolute top-20 right-1/3 w-3 h-3 bg-pink-300 rounded-full"})]}),n.jsx("div",{className:"max-w-7xl mx-auto relative z-10",children:n.jsxs("div",{className:"flex flex-col lg:flex-row items-stretch min-h-[500px]",children:[n.jsxs("div",{className:"flex-1 flex flex-col justify-center text-center lg:text-left px-4 sm:px-6 lg:px-8 py-12 lg:py-16",style:{color:m},children:[n.jsxs("div",{className:"inline-flex items-center gap-3 bg-black/30 backdrop-blur-sm rounded-full px-4 py-2 mb-6 mx-auto lg:mx-0 w-fit",children:[n.jsx(is,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold text-sm",children:_?"Sale Ends In:":A}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("span",{className:"bg-white text-black px-2 py-1 rounded text-sm font-mono font-bold min-w-[30px]",children:String(B.hours).padStart(2,"0")}),n.jsx("span",{className:"bg-white text-black px-2 py-1 rounded text-sm font-mono font-bold min-w-[30px]",children:String(B.minutes).padStart(2,"0")}),n.jsx("span",{className:"bg-white text-black px-2 py-1 rounded text-sm font-mono font-bold min-w-[30px]",children:String(B.seconds).padStart(2,"0")})]})]}),n.jsx("h1",{className:"text-4xl lg:text-6xl font-black mb-4",children:c}),n.jsxs("div",{className:"text-3xl lg:text-5xl font-black mb-6",style:{color:g},children:[u,n.jsx(Mo,{className:"inline ml-4 w-8 h-8 lg:w-12 lg:h-12"})]}),n.jsx("p",{className:"text-lg lg:text-xl mb-8 opacity-90 max-w-2xl mx-auto lg:mx-0",children:l}),!w&&_&&n.jsx(Zt,{to:"/sale",children:n.jsxs("button",{type:"button",className:"bg-white text-black font-bold text-lg px-8 py-4 rounded-lg hover:bg-gray-100 transition-all duration-300 shadow-xl hover:scale-105 flex items-center gap-3 mx-auto lg:mx-0 w-fit",children:[d,n.jsx(Mo,{className:"w-5 h-5"})]})})]}),v&&n.jsx("div",{className:"hidden lg:block flex-1",children:n.jsx("img",{src:b,alt:"Sale Hero",className:"w-full h-full object-cover"})})]})})]})},e7=({headline:r="Discover Amazing Products",description:t="Experience quality and style like never before",ctaButtonText:s="SHOP NOW",ctaButtonLink:i="/shop",badgeText:a="NEW COLLECTION",showBadge:o=!0,showCtaButton:c=!0,backgroundColor:l="linear-gradient(135deg, #667eea, #764ba2)",backgroundImage:u=null,textColor:d="#ffffff",accentColor:A="#ffff00",buttonBgColor:f="#ffffff",buttonTextColor:p="#000000",heroImage:m="https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?w=500&h=400&fit=crop&format=png",heroImageAlt:g="Hero Image",showHeroImage:b=!0,className:v="",minHeight:y="500px"})=>{const w=u?{backgroundImage:`url(${u})`,backgroundSize:"cover",backgroundPosition:"center"}:{background:l};return n.jsxs("section",{className:`relative overflow-hidden ${v}`,style:{...w,minHeight:y},children:[n.jsxs("div",{className:"absolute inset-0 opacity-20",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-white rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-10 right-20 w-48 h-48 bg-white rounded-full blur-3xl"}),n.jsx("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-white rounded-full blur-2xl"}),n.jsx("div",{className:"absolute top-5 right-5 w-4 h-4 bg-yellow-300 rotate-45"}),n.jsx("div",{className:"absolute bottom-20 left-20 w-6 h-6 bg-cyan-300 rotate-12"}),n.jsx("div",{className:"absolute top-20 right-1/3 w-3 h-3 bg-pink-300 rounded-full"})]}),n.jsx("div",{className:"max-w-7xl mx-auto relative z-10 h-full",children:n.jsxs("div",{className:"flex flex-col lg:flex-row items-stretch h-full",style:{minHeight:y},children:[n.jsxs("div",{className:"flex-1 flex flex-col justify-center text-center lg:text-left px-4 sm:px-6 lg:px-8 py-12 lg:py-16",style:{color:d},children:[o&&a&&n.jsxs("div",{className:"inline-flex items-center gap-2 bg-black/30 backdrop-blur-sm rounded-full px-4 py-2 mb-6 mx-auto lg:mx-0 w-fit",style:{backgroundColor:`${A}20`},children:[n.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:A}}),n.jsx("span",{className:"font-bold text-sm",children:a})]}),n.jsx("h1",{className:"text-4xl lg:text-6xl font-black mb-6 leading-tight",children:r}),n.jsx("p",{className:"text-lg lg:text-xl mb-8 opacity-90 max-w-2xl mx-auto lg:mx-0 leading-relaxed",children:t}),c&&s&&n.jsx("a",{href:i,className:"inline-block",children:n.jsxs("button",{type:"button",className:"font-bold text-lg px-8 py-4 rounded-lg transition-all duration-300 shadow-xl hover:scale-105 flex items-center gap-3 mx-auto lg:mx-0 w-fit hover:shadow-2xl",style:{backgroundColor:f,color:p},onMouseEnter:j=>{j.target.style.filter="brightness(0.9)"},onMouseLeave:j=>{j.target.style.filter="brightness(1)"},children:[s,n.jsx(Mo,{className:"w-5 h-5"})]})})]}),b&&m&&n.jsx("div",{className:"hidden lg:block flex-1",children:n.jsx("img",{src:m,alt:g,className:"w-full h-full object-cover"})})]})})]})},t7=({banners:r=[],autoSlideInterval:t=5e3,showControls:s=!0,showDots:i=!0,pauseOnHover:a=!0,enableSwipe:o=!0,transitionDuration:c=500,className:l=""})=>{const[u,d]=Ft.useState(0),[A,f]=Ft.useState(!1),[p,m]=Ft.useState(!1),g=Ft.useRef(0),b=Ft.useRef(0),v=Ft.useRef(null);Ft.useEffect(()=>{if(!(r.length<=1||A))return v.current=setInterval(()=>{y()},t),()=>{v.current&&clearInterval(v.current)}},[u,r.length,t,A]);const y=()=>{p||(m(!0),d(N=>(N+1)%r.length),setTimeout(()=>m(!1),c))},w=()=>{p||(m(!0),d(N=>(N-1+r.length)%r.length),setTimeout(()=>m(!1),c))},j=N=>{p||N===u||(m(!0),d(N),setTimeout(()=>m(!1),c))},C=N=>{o&&(g.current=N.touches[0].clientX)},B=N=>{o&&(b.current=N.touches[0].clientX)},E=()=>{if(!o)return;const N=g.current-b.current;Math.abs(N)>50&&(N>0?y():w())},_=()=>{a&&f(!0)},S=()=>{a&&f(!1)};return!r||r.length===0?n.jsx("div",{className:"w-full h-[500px] bg-gray-100 flex items-center justify-center",children:n.jsx("p",{className:"text-gray-500 text-lg",children:"No banners to display"})}):n.jsxs("div",{className:`relative w-full overflow-hidden ${l}`,onMouseEnter:_,onMouseLeave:S,onTouchStart:C,onTouchMove:B,onTouchEnd:E,children:[n.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${u*100}%)`,transitionDuration:`${c}ms`},children:r.map((N,O)=>n.jsx("div",{className:"w-full flex-shrink-0",children:n.jsx(e7,{...N})},O))}),s&&r.length>1&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:w,disabled:p,className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full backdrop-blur-sm transition-all duration-300 hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous slide",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("button",{onClick:y,disabled:p,className:"absolute right-4 top-1/2 -translate-y-1/2 z-20 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full backdrop-blur-sm transition-all duration-300 hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next slide",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),i&&r.length>1&&n.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-20 flex gap-3",children:r.map((N,O)=>n.jsx("button",{onClick:()=>j(O),disabled:p,className:`w-3 h-3 rounded-full transition-all duration-300 ${O===u?"bg-white scale-125 shadow-lg":"bg-white/50 hover:bg-white/80 hover:scale-110"} disabled:cursor-not-allowed`,"aria-label":`Go to slide ${O+1}`},O))})]})},r7=()=>{const r=[{headline:"Discover Your Style",description:"Explore our curated collection of premium fashion and accessories that define modern elegance.",badgeText:"NEW COLLECTION",ctaButtonText:"EXPLORE NOW",ctaButtonLink:"/collections",backgroundColor:"linear-gradient(135deg, #667eea, #764ba2)",accentColor:"#ffff00",heroImage:"https://firebasestorage.googleapis.com/v0/b/all-in-one-98568.firebasestorage.app/o/sales%2Fsale.png?alt=media&token=131461b9-f22b-41fc-b8e8-3d467401d3d7",showBadge:!0,showCtaButton:!0},{headline:"Tech Revolution",description:"Experience the latest in technology with our cutting-edge gadgets and innovative solutions.",badgeText:"INNOVATION HUB",ctaButtonText:"DISCOVER TECH",ctaButtonLink:"/tech",backgroundColor:"linear-gradient(135deg, #000428, #004e92)",accentColor:"#00ff88",heroImage:"https://firebasestorage.googleapis.com/v0/b/all-in-one-98568.firebasestorage.app/o/sales%2Fsale.png?alt=media&token=131461b9-f22b-41fc-b8e8-3d467401d3d7",showBadge:!0,showCtaButton:!0},{headline:"Lifestyle Reimagined",description:"Transform your everyday with products designed for the modern lifestyle. Quality meets innovation.",badgeText:"FEATURED",ctaButtonText:"SHOP LIFESTYLE",ctaButtonLink:"/lifestyle",backgroundColor:"linear-gradient(135deg, #ff9a56, #ff6b6b)",accentColor:"#ffffff",buttonBgColor:"#000000",buttonTextColor:"#ffffff",heroImage:"https://firebasestorage.googleapis.com/v0/b/all-in-one-98568.firebasestorage.app/o/sales%2Fsale.png?alt=media&token=131461b9-f22b-41fc-b8e8-3d467401d3d7",showBadge:!0,showCtaButton:!0}];return n.jsx("div",{className:"w-full",children:n.jsx(t7,{banners:r,autoSlideInterval:6e3,showControls:!0,showDots:!0,pauseOnHover:!0,enableSwipe:!0,transitionDuration:500})})},n7=()=>{const[r,t]=ee.useState([]),[s,i]=ee.useState([]),[a,o]=ee.useState([]),[c,l]=ee.useState(!0),[u,d]=ee.useState([]),[A,f]=ee.useState(null),[p,m]=ee.useState(!1),g=ee.useRef(null),b=()=>{g.current?.scrollIntoView({behavior:"smooth",block:"start"}),console.log("Explore button clicked")};ee.useEffect(()=>{v(),j(),y()},[]);const v=async()=>{try{const[_,S,N]=await Promise.all([fetch("http://localhost:10000/api/products"),fetch("http://localhost:10000/api/services"),fetch("http://localhost:10000/api/stores/featured/list")]);if(_.ok)try{const O=await _.json();t(O.slice(0,12))}catch(O){console.error("Error parsing products JSON:",O),t([])}if(S.ok)try{const O=await S.json();i(O.slice(0,8))}catch(O){console.error("Error parsing services JSON:",O),i([])}if(N.ok)try{const O=await N.json();o(O)}catch(O){console.error("Error parsing stores JSON:",O),o([])}}catch(_){console.error("Error fetching featured content:",_),t([]),i([]),o([])}finally{l(!1)}},y=async()=>{try{const _=await fetch("http://localhost:10000/api/flash-deals/current");if(!_.ok){console.error("Failed to fetch flash deal:",_.statusText),m(!1);return}const S=await _.json();S.success&&S.data?(f(S.data),m(!0)):(f(null),m(!1))}catch(_){console.error("Error fetching flash deal:",_),f(null),m(!1)}},w=async _=>{try{await fetch(`http://localhost:10000/api/flash-deals/${_}/click`,{method:"POST"})}catch(S){console.error("Error tracking click:",S)}},j=async()=>{try{const _=await fetch("http://localhost:10000/api/categories");if(!_.ok)throw new Error("Failed to fetch categories");const S=await _.json();d(S)}catch(_){console.error("Error loading categories:",_)}},C=()=>{A&&(w(A._id),window.location.href="/deals")},E=(()=>{if(!A)return null;const{timeRemaining:_,saleStatus:S}=A;return S==="upcoming"?{saleStartsInHours:_.hours,saleStartsInMinutes:_.minutes,saleStartsInSeconds:_.seconds,saleEndsInHours:0,saleEndsInMinutes:0,saleEndsInSeconds:0,timerLabel:A.timerLabel}:{saleStartsInHours:0,saleStartsInMinutes:0,saleStartsInSeconds:0,saleEndsInHours:_.hours,saleEndsInMinutes:_.minutes,saleEndsInSeconds:_.seconds,timerLabel:"Sale Ends In:"}})();return c?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-black"})}):n.jsxs("div",{children:[p&&A&&E?n.jsx("section",{className:"py-0 bg-white",children:n.jsx(e_,{...E,saleName:A.saleName,saleSubtitle:A.saleSubtitle,discountText:A.discountText,buttonText:A.buttonText,backgroundColor:A.backgroundColor,backgroundImage:A.backgroundImage,textColor:A.textColor,accentColor:A.accentColor,heroImage:A.heroImage,showHeroImage:A.showHeroImage,onButtonClick:C})}):n.jsx(r7,{apiEndpoint:"http://localhost:10000/api/products/trending",handlePrimaryButtonClick:b}),n.jsx("section",{className:"py-0",ref:g,children:n.jsx(ZR,{categories:u})}),n.jsx("section",{className:"py-5 bg-gray-50",children:n.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("div",{className:"text-center mb-12",children:n.jsx("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-4 leading-tight font-sans",children:"Featured Products"})}),r.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4",children:r.map(_=>n.jsx(Ay,{product:_},_._id))}),n.jsx("div",{className:"text-center mt-12",children:n.jsxs(Zt,{to:"/products",className:"inline-flex items-center space-x-2 bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition-colors font-medium",children:[n.jsx("span",{children:"View All Products"}),n.jsx(Mo,{className:"w-5 h-5"})]})})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ps,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No products available yet"})]})]})}),n.jsx("section",{className:"py-5 bg-white",children:n.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("div",{className:"text-center mb-12",children:n.jsx("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-4 leading-tight font-sans",children:"Featured Services"})}),s.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4",children:s.map(_=>n.jsx(hy,{service:_},_._id))}),n.jsx("div",{className:"text-center mt-12",children:n.jsxs(Zt,{to:"/services",className:"inline-flex items-center space-x-2 bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition-colors font-medium",children:[n.jsx("span",{children:"View All Services"}),n.jsx(Mo,{className:"w-5 h-5"})]})})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ms,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No services available yet"})]})]})}),n.jsx("section",{className:"py-10 bg-black text-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-black mb-6 leading-tight font-sans",children:"Start Your Business Journey"}),n.jsx("p",{className:"text-xl mb-10 opacity-90 max-w-2xl mx-auto font-body",children:"Join thousands of successful entrepreneurs and start earning today. Create your store in minutes."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsxs(Zt,{to:"/register",className:"bg-white text-black px-8 py-4 rounded-lg font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center space-x-2",children:[n.jsx(ps,{className:"w-5 h-5"}),n.jsx("span",{children:"Sell Products"})]}),n.jsxs(Zt,{to:"/register",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-black transition-colors flex items-center justify-center space-x-2",children:[n.jsx(ms,{className:"w-5 h-5"}),n.jsx("span",{children:"Offer Services"})]})]})]})}),n.jsx("section",{className:"py-5 bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("div",{className:"text-center mb-12",children:n.jsx("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-4 leading-tight font-sans",children:"Premium Stores"})}),a.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:a.map(_=>n.jsx(Zk,{store:_},_._id))}),n.jsx("div",{className:"text-center mt-12",children:n.jsxs(Zt,{to:"/stores",className:"inline-flex items-center space-x-2 bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition-colors font-medium",children:[n.jsx("span",{children:"View All Stores"}),n.jsx(Mo,{className:"w-5 h-5"})]})})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ei,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No stores available yet"})]})]})})]})},cs=({size:r="md",className:t=""})=>{const s={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"};return n.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-black ${s[r]} ${t}`})},V1=({icon:r,title:t,description:s,action:i})=>n.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r&&n.jsx(r,{className:"w-16 h-16 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t}),n.jsx("p",{className:"text-gray-600 text-center mb-6 max-w-md",children:s}),i]}),s7=({stores:r,loading:t,error:s})=>t?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(cs,{size:"xl"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:s}),n.jsx("div",{className:"mb-6",children:n.jsxs("p",{className:"text-gray-600",children:[r.length," store",r.length!==1?"s":""," found"]})}),r.length===0?n.jsx(V1,{icon:ei,title:"No stores found",description:"Try adjusting your search criteria or check back later for new stores."}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(i=>n.jsx(Zk,{store:i},i._id))})]}),i7=()=>{const[r,t]=ee.useState([]),[s,i]=ee.useState(!0),[a,o]=ee.useState(""),[c,l]=ee.useState(""),[u,d]=ee.useState(!1);ee.useEffect(()=>{A({})},[]);const A=async(g={})=>{try{i(!0),o("");const b=typeof g=="object"&&g!==null?g:{};console.log("Valid Filters:",b);const v=await fetch("http://localhost:10000/api/stores/listing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(v.ok){const y=await v.json();t(y)}else o("Failed to fetch stores")}catch(b){console.error("Error fetching stores:",b),o("Network error. Please try again.")}finally{i(!1)}},f=g=>{g?.preventDefault?.(),A({search:c})},p=()=>{l(""),A({})},m=!!c;return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"All Stores"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",value:c,onChange:g=>{l(g.target.value)},placeholder:"Search stores...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsx("button",{type:"button",onClick:f,className:"bg-black text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:"Search"}),n.jsxs("button",{type:"button",onClick:()=>d(!u),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border transition-colors ${m?"bg-black text-white border-black":"bg-white text-gray-700 border-gray-300 hover:border-gray-400"}`,children:[n.jsx(lA,{className:"w-4 h-4"}),n.jsx("span",{children:u?"Hide Filters":"Show Filters"}),m&&n.jsx("span",{className:"bg-white text-black text-xs px-1.5 py-0.5 rounded-full",children:"1"})]})]}),u&&n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Filters"}),m&&n.jsxs("button",{type:"button",onClick:p,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center space-x-1",children:[n.jsx(Ts,{className:"w-4 h-4"}),n.jsx("span",{children:"Clear all"})]})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Search"}),n.jsx("input",{type:"text",value:c,onChange:g=>l(g.target.value),placeholder:"Enter store name, location, or owner...",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})}),n.jsx("button",{type:"button",onClick:f,className:"w-full bg-black text-white py-2 rounded-lg hover:bg-gray-800 transition-colors",children:"Apply Filters"})]})]})]})}),n.jsx(s7,{stores:r,loading:s,error:a})]})},z1=({items:r=[],loading:t=!1,error:s=null,type:i="product"})=>{const a=r||[];return t?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(cs,{size:"xl"})}):n.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:s}),n.jsx("div",{className:"mb-6",children:n.jsxs("p",{className:"text-gray-600",children:[a.length," ",i==="product"?"product":"service",a.length!==1?"s":""," found"]})}),a.length===0?n.jsx(V1,{icon:ps,title:"No items found",description:"Try adjusting your search criteria or check back later for new items."}):n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4",children:[i==="product"&&a.map(o=>n.jsx(Ay,{product:o},o._id)),i==="service"&&a.map(o=>n.jsx(hy,{service:o},o._id))]})]})},a7=({showFilters:r,setShowFilters:t,categorySet:s,filters:i,updateFilter:a,updateFilters:o,clearAllFilters:c})=>{const u=s.find(f=>f.name===i.category)?.subcategories||[],A=(u.find(f=>f.name===i.subcategory)?.childCategories||[]).filter(f=>f&&(f.name||typeof f=="string"));return n.jsxs(n.Fragment,{children:[r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>t(!1)}),n.jsxs("div",{className:`fixed top-0 left-0 h-full w-80 bg-white border-r border-gray-200 shadow-lg transform transition-transform duration-300 z-50
        ${r?"translate-x-0":"-translate-x-full"}`,children:[n.jsxs("div",{className:"p-4 flex justify-between items-center border-b",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Filters"}),n.jsxs("button",{type:"button",onClick:()=>t(!1),className:"text-gray-500 hover:text-gray-700 flex items-center",children:[n.jsx(Ts,{className:"w-5 h-5"}),n.jsx("span",{className:"ml-1",children:"Close"})]})]}),n.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",style:{height:"calc(100% - 120px)"},children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categories"}),n.jsxs("select",{value:i.category,onChange:f=>a("category",f.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",children:[n.jsx("option",{value:"",children:"All Categories"}),s.map(f=>n.jsx("option",{value:f.name,children:f.name},f.name))]}),i.category&&u.length>0&&n.jsxs("select",{value:i.subcategory,onChange:f=>a("subcategory",f.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",children:[n.jsx("option",{value:"",children:"All Subcategories"}),u.map((f,p)=>n.jsx("option",{value:f.name,children:f.name},`subcategory-${i.category}-${p}`))]}),i.subcategory&&A.length>0&&n.jsxs("select",{value:i.childCategory,onChange:f=>a("childCategory",f.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",children:[n.jsx("option",{value:"",children:"All Child Categories"}),A.map((f,p)=>{const m=typeof f=="string"?f:f.name,g=typeof f=="string"?f:f.name||f._id||f;return n.jsx("option",{value:g,children:m},`childcategory-${i.category}-${i.subcategory}-${p}`)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:i.priceRange.min,min:"0",onChange:f=>{const p=f.target.value===""?"":Math.max(0,Number(f.target.value));a("priceRange",{...i.priceRange,min:p})},placeholder:"Min",className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),n.jsx("input",{type:"number",value:i.priceRange.max,min:"0",onChange:f=>{const p=f.target.value===""?"":Math.max(0,Number(f.target.value));a("priceRange",{...i.priceRange,max:p})},placeholder:"Max",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Availability"}),n.jsxs("select",{value:i.stock,onChange:f=>a("stock",f.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"in",children:"In Stock"}),n.jsx("option",{value:"out",children:"Out of Stock"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Rating"}),n.jsx("div",{className:"flex space-x-1 cursor-pointer",children:[1,2,3,4,5].map(f=>n.jsx(mn,{size:24,className:`transition-colors ${f<=i.rating?"text-yellow-400":"text-gray-300"}`,onClick:()=>{const p=f===i.rating?"":f;a("rating",p)}},f))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Options"}),n.jsxs("select",{value:i.shipping,onChange:f=>a("shipping",f.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"free-shiping",children:"Free Shipping"}),n.jsx("option",{value:"paid-shipping",children:"Paid Shipping"}),n.jsx("option",{value:"local-pickup",children:"Local Pickup"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Condition"}),n.jsxs("select",{value:i.condition,onChange:f=>a("condition",f.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"new",children:"New"}),n.jsx("option",{value:"used",children:"Used"}),n.jsx("option",{value:"refurbished",children:"Refurbished"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warranty (Months)"}),n.jsx("input",{type:"number",min:"0",value:i.warrantyMonths,onChange:f=>a("warrantyMonths",f.target.value),placeholder:"e.g., 12",className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter warranty months (e.g., 6 means  6 months)"})]})]}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t bg-white space-y-2",children:n.jsx("button",{type:"button",onClick:c,className:"w-full bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Clear All Filters"})})]})]})},o7=(r,t)=>{const[s,i]=ee.useState(r);return ee.useEffect(()=>{const a=setTimeout(()=>{i(r)},t);return()=>{clearTimeout(a)}},[r,t]),s},l7=(r,t={})=>{const s=ee.useRef(null);return ee.useEffect(()=>{const i=new IntersectionObserver(r,{threshold:.1,rootMargin:"100px",...t}),a=s.current;return a&&i.observe(a),()=>{a&&i.unobserve(a)}},[r,t]),s},c7=()=>{const[r]=ry(),t=bl(),[s,i]=ee.useState([]),[a,o]=ee.useState(!0),[c,l]=ee.useState(!1),[u,d]=ee.useState(""),[A,f]=ee.useState([]),[p,m]=ee.useState(1),[g,b]=ee.useState(0),[v,y]=ee.useState(!0),w=20,[j,C]=ee.useState({search:"",category:"",subcategory:"",childCategory:"",priceRange:{min:"",max:""},stock:"",rating:"",shipping:"",condition:"",warrantyMonths:""}),[B,E]=ee.useState(!1),[_,S]=ee.useState(!1),N=ee.useRef(!1),O=o7(j,_?300:0);(A.find(M=>M.name===j.category)?.subcategories||[]).find(M=>M.name===j.subcategory)?.childCategories,ee.useEffect(()=>{if(N.current)return;const M=r.get("search"),H=r.get("category");console.log("=== INITIALIZING FROM URL ==="),console.log("Current URL:",t.pathname+t.search),console.log("Search from URL:",M),console.log("Category from URL:",H),console.log("All URL params:",Object.fromEntries(r.entries()));const Y={search:M||"",category:H||"",subcategory:"",childCategory:"",priceRange:{min:"",max:""},stock:"",rating:"",shipping:"",condition:"",warrantyMonths:""};console.log("Setting initial filters:",Y),C(Y),N.current=!0,R(Y,1,!1).then(()=>{S(!0)})},[]);const R=async(M={},H=1,Y=!1)=>{try{Y?l(!0):(o(!0),i([])),d(""),console.log("Fetching products with filters:",M,"Page:",H);const ae={search:M.search||"",category:M.category||"",subcategory:M.subcategory||"",childCategory:M.childCategory||"",minPrice:M.priceRange?.min||"",maxPrice:M.priceRange?.max||"",stock:M.stock||"",rating:M.rating||"",shipping:M.shipping||"",condition:M.condition||"",warrantyMonths:M.warrantyMonths||"",page:H,limit:w},oe=await fetch("http://localhost:10000/api/products/listing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(oe.ok){const be=await oe.json();console.log("Products fetched:",be.products.length,"items","Total:",be.total),i(Y?ge=>[...ge,...be.products]:be.products),b(be.total),y(be.products.length===w&&be.hasMore),m(H)}else d("Failed to fetch products"),console.error("API Error:",oe.status,oe.statusText)}catch(ae){console.error("Error fetching products:",ae),d("Network error. Please try again.")}finally{o(!1),l(!1)}},Q=ee.useCallback(()=>{if(!c&&v&&!a){const M=p+1;R(O,M,!0)}},[c,v,a,p,O]),$=l7(ee.useCallback(M=>{const[H]=M;H.isIntersecting&&Q()},[Q]));ee.useEffect(()=>{_&&N.current&&(console.log("Filter changed after initialization:",O),m(1),R(O,1,!1))},[O,_]);const L=async()=>{try{const M=await fetch("http://localhost:10000/api/categories");if(!M.ok)throw new Error("Failed to fetch categories");const H=await M.json();f(H)}catch(M){console.error("Error loading categories:",M)}};ee.useEffect(()=>{L()},[]);const F=ee.useCallback((M,H)=>{C(Y=>{const ae={...Y,[M]:H};return M==="category"?(ae.subcategory="",ae.childCategory=""):M==="subcategory"&&(ae.childCategory=""),ae})},[]),G=ee.useCallback(M=>{C(H=>({...H,...M}))},[]),X=ee.useCallback(()=>{C({search:"",category:"",subcategory:"",childCategory:"",priceRange:{min:"",max:""},stock:"",rating:"",shipping:"",condition:"",warrantyMonths:""})},[]),q=M=>{M?.preventDefault?.(),R(j,1,!1)},T=!!(j.search||j.category||j.subcategory||j.childCategory||j.priceRange.min||j.priceRange.max||j.stock||j.rating||j.shipping||j.condition||j.warrantyMonths),U=[j.search,j.category,j.subcategory,j.childCategory,j.priceRange.min,j.priceRange.max,j.stock,j.rating,j.shipping,j.condition,j.warrantyMonths].filter(Boolean).length,K=s.length>0?1:0,z=s.length;return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Products"}),n.jsxs("div",{className:"space-y-4",children:[(j.subcategory||j.childCategory)&&n.jsx("nav",{"aria-label":"breadcrumb",className:"text-sm text-gray-600 mt-2 select-none",children:n.jsxs("ol",{className:"list-reset flex space-x-2",children:[j.category&&n.jsx("li",{children:A.find(M=>M.name.toString()===j.category)?.name||"Category"}),j.subcategory&&n.jsxs(n.Fragment,{children:[n.jsx("li",{children:""}),n.jsx("li",{children:j.subcategory})]}),j.childCategory&&n.jsxs(n.Fragment,{children:[n.jsx("li",{children:""}),n.jsx("li",{children:j.childCategory})]})]})}),n.jsxs("form",{onSubmit:q,className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",value:j.search,onChange:M=>{F("search",M.target.value),console.log("Search query changed to:",M.target.value)},placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsx("button",{type:"submit",className:"bg-black text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:"Search"})]}),!a&&n.jsxs("div",{className:"flex items-center justify-between py-4 px-6 bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-xl shadow-sm",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[n.jsx(qu,{className:"w-4 h-4 text-amber-500"}),n.jsxs("span",{className:"text-sm font-medium",children:["Showing ",K.toLocaleString(),"-",z.toLocaleString()," of"," ",g.toLocaleString()," results"]})]}),T&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),n.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[U," filter",U!==1?"s":""," applied"]})]})]}),v&&n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[n.jsx("div",{className:"animate-pulse w-2 h-2 bg-green-400 rounded-full"}),n.jsx("span",{children:"More available"})]})]}),n.jsx(a7,{showFilters:B,setShowFilters:E,categorySet:A,filters:j,updateFilter:F,updateFilters:G,clearAllFilters:X})]})]})}),!B&&n.jsxs("button",{onClick:()=>E(!0),className:`\r
            fixed \r
            left-0 \r
            top-1/2 \r
            -translate-y-1/2\r
            z-40 \r
            bg-gradient-to-b from-black via-gray-800 to-white\r
            text-white px-3 py-6 rounded-r-xl shadow-xl \r
            flex flex-col items-center justify-center space-y-2\r
            hover:scale-105 hover:shadow-2xl transition-all duration-300 ease-out\r
            border border-gray-700\r
            writing-mode-vertical\r
            min-h-[120px]\r
          `,children:[n.jsx(lA,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium text-sm transform -rotate-90 whitespace-nowrap",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:"Filters"}),T&&n.jsx("span",{className:"bg-white text-black text-xs font-semibold px-2 py-1 rounded-full shadow-md min-w-[24px] text-center",children:U})]}),s&&n.jsx(z1,{items:s,loading:a,error:u,type:"product"}),!a&&s.length>0&&n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:v?n.jsx("div",{ref:$,className:"flex flex-col items-center justify-center py-12 space-y-6",children:c?n.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-black rounded-full animate-spin"}),n.jsx("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent border-r-gray-400 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 font-medium",children:"Loading more products..."}),n.jsx("p",{className:"text-sm text-gray-400",children:"Finding the perfect items for you"})]})]}):n.jsxs("button",{onClick:Q,className:"group relative overflow-hidden bg-gradient-to-r from-gray-900 to-black text-white px-8 py-4 rounded-full font-semibold text-lg shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-out",children:[n.jsxs("span",{className:"relative z-10 flex items-center space-x-2",children:[n.jsx("span",{children:"Load More Products"}),n.jsx(Qp,{className:"w-5 h-5 group-hover:animate-bounce"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black to-gray-800 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[n.jsx("div",{className:"w-16 h-16 bg-black rounded-full flex items-center justify-center shadow-lg",children:n.jsx(qu,{className:"w-8 h-8 text-white"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"You've seen it all! "}),n.jsx("p",{className:"text-gray-600 max-w-md",children:"That's every product we have matching your criteria. Try adjusting your filters to discover more amazing items."})]})]})}),!a&&s.length===0&&!u&&n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:n.jsxs("div",{className:"text-center space-y-6",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex items-center justify-center mx-auto shadow-lg",children:n.jsx(Ca,{className:"w-12 h-12 text-gray-500"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No products found"}),n.jsx("p",{className:"text-gray-600 max-w-md mx-auto mb-6",children:"We couldn't find any products matching your search criteria. Try adjusting your filters or search terms."}),T&&n.jsxs("button",{onClick:X,className:"inline-flex items-center space-x-2 bg-black text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors",children:[n.jsx(Ts,{className:"w-4 h-4"}),n.jsx("span",{children:"Clear All Filters"})]})]})]})})]})},u7=({showFilters:r,setShowFilters:t,categorySet:s,filters:i,updateFilter:a,updateFilters:o,clearAllFilters:c})=>{const u=s.find(f=>f.name===i.category)?.subcategories||[],A=(u.find(f=>f.name===i.subcategory)?.childCategories||[]).filter(f=>f&&(f.name||typeof f=="string"));return n.jsxs(n.Fragment,{children:[r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>t(!1)}),n.jsxs("div",{className:`fixed top-0 left-0 h-full w-80 bg-white border-r border-gray-200 shadow-lg transform transition-transform duration-300 z-50
        ${r?"translate-x-0":"-translate-x-full"}`,children:[n.jsxs("div",{className:"p-4 flex justify-between items-center border-b",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Filters"}),n.jsxs("button",{type:"button",onClick:()=>t(!1),className:"text-gray-500 hover:text-gray-700 flex items-center",children:[n.jsx(Ts,{className:"w-5 h-5"}),n.jsx("span",{className:"ml-1",children:"Close"})]})]}),n.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",style:{height:"calc(100% - 120px)"},children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categories"}),n.jsxs("select",{value:i.category,onChange:f=>a("category",f.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",children:[n.jsx("option",{value:"",children:"All Categories"}),s.map(f=>n.jsx("option",{value:f.name,children:f.name},f.name))]}),i.category&&u.length>0&&n.jsxs("select",{value:i.subcategory,onChange:f=>a("subcategory",f.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",children:[n.jsx("option",{value:"",children:"All Subcategories"}),u.map((f,p)=>n.jsx("option",{value:f.name,children:f.name},`subcategory-${i.category}-${p}`))]}),i.subcategory&&A.length>0&&n.jsxs("select",{value:i.childCategory,onChange:f=>a("childCategory",f.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",children:[n.jsx("option",{value:"",children:"All Child Categories"}),A.map((f,p)=>{const m=typeof f=="string"?f:f.name,g=typeof f=="string"?f:f.name||f._id||f;return n.jsx("option",{value:g,children:m},`childcategory-${i.category}-${i.subcategory}-${p}`)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:i.priceRange.min,min:"0",onChange:f=>{const p=f.target.value===""?"":Math.max(0,Number(f.target.value));a("priceRange",{...i.priceRange,min:p})},placeholder:"Min",className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),n.jsx("input",{type:"number",value:i.priceRange.max,min:"0",onChange:f=>{const p=f.target.value===""?"":Math.max(0,Number(f.target.value));a("priceRange",{...i.priceRange,max:p})},placeholder:"Max",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Duration"}),n.jsxs("select",{value:i.duration,onChange:f=>a("duration",f.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"30",children:"30 min"}),n.jsx("option",{value:"60",children:"1 hr"}),n.jsx("option",{value:"180",children:"3 hrs"}),n.jsx("option",{value:"360",children:"6 hrs"}),n.jsx("option",{value:"720",children:"12 hrs"}),n.jsx("option",{value:"1440",children:"24 hrs"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Rating"}),n.jsx("div",{className:"flex space-x-1 cursor-pointer",children:[1,2,3,4,5].map(f=>n.jsx(mn,{size:24,className:`transition-colors ${f<=i.rating?"text-yellow-400":"text-gray-300"}`,onClick:()=>{const p=f===i.rating?"":f;a("rating",p)}},f))})]})]}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t bg-white space-y-2",children:n.jsx("button",{type:"button",onClick:c,className:"w-full bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Clear All Filters"})})]})]})},d7=(r,t)=>{const[s,i]=ee.useState(r);return ee.useEffect(()=>{const a=setTimeout(()=>{i(r)},t);return()=>{clearTimeout(a)}},[r,t]),s},A7=(r,t={})=>{const s=ee.useRef(null);return ee.useEffect(()=>{const i=new IntersectionObserver(r,{threshold:.1,rootMargin:"100px",...t}),a=s.current;return a&&i.observe(a),()=>{a&&i.unobserve(a)}},[r,t]),s},h7=()=>{const[r]=ry(),t=bl(),[s,i]=ee.useState([]),[a,o]=ee.useState(!0),[c,l]=ee.useState(!1),[u,d]=ee.useState(""),[A,f]=ee.useState([]),[p,m]=ee.useState(1),[g,b]=ee.useState(0),[v,y]=ee.useState(!0),w=20,[j,C]=ee.useState({search:"",category:"",subcategory:"",childCategory:"",priceRange:{min:"",max:""},rating:"",duration:""}),[B,E]=ee.useState(!1),[_,S]=ee.useState(!1),N=ee.useRef(!1),O=d7(j,_?300:0);(A.find(M=>M.name===j.category)?.subcategories||[]).find(M=>M.name===j.subcategory)?.childCategories,ee.useEffect(()=>{if(N.current)return;const M=r.get("search"),H=r.get("category");console.log("=== INITIALIZING SERVICES FROM URL ==="),console.log("Current URL:",t.pathname+t.search),console.log("Search from URL:",M),console.log("Category from URL:",H),console.log("All URL params:",Object.fromEntries(r.entries()));const Y={search:M||"",category:H||"",subcategory:"",childCategory:"",priceRange:{min:"",max:""},rating:"",duration:""};console.log("Setting initial service filters:",Y),C(Y),N.current=!0,R(Y,1,!1).then(()=>{S(!0)})},[]);const R=async(M={},H=1,Y=!1)=>{try{Y?l(!0):(o(!0),i([])),d(""),console.log("Fetching services with filters:",M,"Page:",H);const ae={search:M.search||"",category:M.category||"",subcategory:M.subcategory||"",childCategory:M.childCategory||"",minPrice:M.priceRange?.min||"",maxPrice:M.priceRange?.max||"",rating:M.rating||"",duration:M.duration||"",page:H,limit:w},oe=await fetch("http://localhost:10000/api/services/listing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(oe.ok){const be=await oe.json();console.log("Services fetched:",be.services.length,"items","Total:",be.total),i(Y?ge=>[...ge,...be.services]:be.services),b(be.total),y(be.services.length===w&&be.hasMore),m(H)}else d("Failed to fetch services"),console.error("API Error:",oe.status,oe.statusText)}catch(ae){console.error("Error fetching services:",ae),d("Network error. Please try again.")}finally{o(!1),l(!1)}},Q=ee.useCallback(()=>{if(!c&&v&&!a){const M=p+1;R(O,M,!0)}},[c,v,a,p,O]),$=A7(ee.useCallback(M=>{const[H]=M;H.isIntersecting&&Q()},[Q]));ee.useEffect(()=>{_&&N.current&&(console.log("Service filter changed after initialization:",O),m(1),R(O,1,!1))},[O,_]);const L=async()=>{try{const M=await fetch("http://localhost:10000/api/categories");if(!M.ok)throw new Error("Failed to fetch categories");const H=await M.json();f(H)}catch(M){console.error("Error loading categories:",M)}};ee.useEffect(()=>{L()},[]);const F=ee.useCallback((M,H)=>{C(Y=>{const ae={...Y,[M]:H};return M==="category"?(ae.subcategory="",ae.childCategory=""):M==="subcategory"&&(ae.childCategory=""),ae})},[]),G=ee.useCallback(M=>{C(H=>({...H,...M}))},[]),X=ee.useCallback(()=>{C({search:"",category:"",subcategory:"",childCategory:"",priceRange:{min:"",max:""},rating:"",duration:""})},[]),q=M=>{M?.preventDefault?.(),R(j,1,!1)},T=!!(j.search||j.category||j.subcategory||j.childCategory||j.priceRange.min||j.priceRange.max||j.rating||j.duration),U=[j.search,j.category,j.subcategory,j.childCategory,j.priceRange.min,j.priceRange.max,j.rating,j.duration].filter(Boolean).length,K=s.length>0?1:0,z=s.length;return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Services"}),n.jsxs("div",{className:"space-y-4",children:[(j.subcategory||j.childCategory)&&n.jsx("nav",{"aria-label":"breadcrumb",className:"text-sm text-gray-600 mt-2 select-none",children:n.jsxs("ol",{className:"list-reset flex space-x-2",children:[j.category&&n.jsx("li",{children:A.find(M=>M.name.toString()===j.category)?.name||"Category"}),j.subcategory&&n.jsxs(n.Fragment,{children:[n.jsx("li",{children:""}),n.jsx("li",{children:j.subcategory})]}),j.childCategory&&n.jsxs(n.Fragment,{children:[n.jsx("li",{children:""}),n.jsx("li",{children:j.childCategory})]})]})}),n.jsxs("form",{onSubmit:q,className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",value:j.search,onChange:M=>{F("search",M.target.value),console.log("Search query changed to:",M.target.value)},placeholder:"Search services...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsx("button",{type:"submit",className:"bg-black text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:"Search"})]}),!a&&n.jsxs("div",{className:"flex items-center justify-between py-4 px-6 bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-xl shadow-sm",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[n.jsx(qu,{className:"w-4 h-4 text-amber-500"}),n.jsxs("span",{className:"text-sm font-medium",children:["Showing ",K.toLocaleString(),"-",z.toLocaleString()," of"," ",g.toLocaleString()," results"]})]}),T&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),n.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[U," filter",U!==1?"s":""," applied"]})]})]}),v&&n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[n.jsx("div",{className:"animate-pulse w-2 h-2 bg-green-400 rounded-full"}),n.jsx("span",{children:"More available"})]})]}),n.jsx(u7,{showFilters:B,setShowFilters:E,categorySet:A,filters:j,updateFilter:F,updateFilters:G,clearAllFilters:X})]})]})}),!B&&n.jsxs("button",{onClick:()=>E(!0),className:`\r
            fixed \r
            left-0 \r
            top-1/2 \r
            -translate-y-1/2\r
            z-40 \r
            bg-gradient-to-b from-black via-gray-800 to-white\r
            text-white px-3 py-6 rounded-r-xl shadow-xl \r
            flex flex-col items-center justify-center space-y-2\r
            hover:scale-105 hover:shadow-2xl transition-all duration-300 ease-out\r
            border border-gray-700\r
            writing-mode-vertical\r
            min-h-[120px]\r
          `,children:[n.jsx(lA,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium text-sm transform -rotate-90 whitespace-nowrap",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:"Filters"}),T&&n.jsx("span",{className:"bg-white text-black text-xs font-semibold px-2 py-1 rounded-full shadow-md min-w-[24px] text-center",children:U})]}),s&&n.jsx(z1,{items:s,loading:a,error:u,type:"service"}),!a&&s.length>0&&n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:v?n.jsx("div",{ref:$,className:"flex flex-col items-center justify-center py-12 space-y-6",children:c?n.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-black rounded-full animate-spin"}),n.jsx("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent border-r-gray-400 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 font-medium",children:"Loading more services..."}),n.jsx("p",{className:"text-sm text-gray-400",children:"Finding the perfect services for you"})]})]}):n.jsxs("button",{onClick:Q,className:"group relative overflow-hidden bg-gradient-to-r from-gray-900 to-black text-white px-8 py-4 rounded-full font-semibold text-lg shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-out",children:[n.jsxs("span",{className:"relative z-10 flex items-center space-x-2",children:[n.jsx("span",{children:"Load More Services"}),n.jsx(Qp,{className:"w-5 h-5 group-hover:animate-bounce"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black to-gray-800 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[n.jsx("div",{className:"w-16 h-16 bg-black rounded-full flex items-center justify-center shadow-lg",children:n.jsx(qu,{className:"w-8 h-8 text-white"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"You've seen it all! "}),n.jsx("p",{className:"text-gray-600 max-w-md",children:"That's every service we have matching your criteria. Try adjusting your filters to discover more amazing services."})]})]})}),!a&&s.length===0&&!u&&n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:n.jsxs("div",{className:"text-center space-y-6",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex items-center justify-center mx-auto shadow-lg",children:n.jsx(Ca,{className:"w-12 h-12 text-gray-500"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No services found"}),n.jsx("p",{className:"text-gray-600 max-w-md mx-auto mb-6",children:"We couldn't find any services matching your search criteria. Try adjusting your filters or search terms."}),T&&n.jsxs("button",{onClick:X,className:"inline-flex items-center space-x-2 bg-black text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors",children:[n.jsx(Ts,{className:"w-4 h-4"}),n.jsx("span",{children:"Clear All Filters"})]})]})]})})]})};function g5(r){return r!==null&&typeof r=="object"&&"constructor"in r&&r.constructor===Object}function K1(r,t){r===void 0&&(r={}),t===void 0&&(t={});const s=["__proto__","constructor","prototype"];Object.keys(t).filter(i=>s.indexOf(i)<0).forEach(i=>{typeof r[i]>"u"?r[i]=t[i]:g5(t[i])&&g5(r[i])&&Object.keys(t[i]).length>0&&K1(r[i],t[i])})}const t_={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Zl(){const r=typeof document<"u"?document:{};return K1(r,t_),r}const f7={document:t_,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(r){return typeof setTimeout>"u"?(r(),null):setTimeout(r,0)},cancelAnimationFrame(r){typeof setTimeout>"u"||clearTimeout(r)}};function Da(){const r=typeof window<"u"?window:{};return K1(r,f7),r}function p7(r){return r===void 0&&(r=""),r.trim().split(" ").filter(t=>!!t.trim())}function m7(r){const t=r;Object.keys(t).forEach(s=>{try{t[s]=null}catch{}try{delete t[s]}catch{}})}function r_(r,t){return t===void 0&&(t=0),setTimeout(r,t)}function g0(){return Date.now()}function g7(r){const t=Da();let s;return t.getComputedStyle&&(s=t.getComputedStyle(r,null)),!s&&r.currentStyle&&(s=r.currentStyle),s||(s=r.style),s}function y7(r,t){t===void 0&&(t="x");const s=Da();let i,a,o;const c=g7(r);return s.WebKitCSSMatrix?(a=c.transform||c.webkitTransform,a.split(",").length>6&&(a=a.split(", ").map(l=>l.replace(",",".")).join(", ")),o=new s.WebKitCSSMatrix(a==="none"?"":a)):(o=c.MozTransform||c.OTransform||c.MsTransform||c.msTransform||c.transform||c.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=o.toString().split(",")),t==="x"&&(s.WebKitCSSMatrix?a=o.m41:i.length===16?a=parseFloat(i[12]):a=parseFloat(i[4])),t==="y"&&(s.WebKitCSSMatrix?a=o.m42:i.length===16?a=parseFloat(i[13]):a=parseFloat(i[5])),a||0}function Qm(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"}function x7(r){return typeof window<"u"&&typeof window.HTMLElement<"u"?r instanceof HTMLElement:r&&(r.nodeType===1||r.nodeType===11)}function uo(){const r=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let s=1;s<arguments.length;s+=1){const i=s<0||arguments.length<=s?void 0:arguments[s];if(i!=null&&!x7(i)){const a=Object.keys(Object(i)).filter(o=>t.indexOf(o)<0);for(let o=0,c=a.length;o<c;o+=1){const l=a[o],u=Object.getOwnPropertyDescriptor(i,l);u!==void 0&&u.enumerable&&(Qm(r[l])&&Qm(i[l])?i[l].__swiper__?r[l]=i[l]:uo(r[l],i[l]):!Qm(r[l])&&Qm(i[l])?(r[l]={},i[l].__swiper__?r[l]=i[l]:uo(r[l],i[l])):r[l]=i[l])}}}return r}function $m(r,t,s){r.style.setProperty(t,s)}function n_(r){let{swiper:t,targetPosition:s,side:i}=r;const a=Da(),o=-t.translate;let c=null,l;const u=t.params.speed;t.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(t.cssModeFrameID);const d=s>o?"next":"prev",A=(p,m)=>d==="next"&&p>=m||d==="prev"&&p<=m,f=()=>{l=new Date().getTime(),c===null&&(c=l);const p=Math.max(Math.min((l-c)/u,1),0),m=.5-Math.cos(p*Math.PI)/2;let g=o+m*(s-o);if(A(g,s)&&(g=s),t.wrapperEl.scrollTo({[i]:g}),A(g,s)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[i]:g})}),a.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=a.requestAnimationFrame(f)};f()}function Kl(r,t){t===void 0&&(t="");const s=Da(),i=[...r.children];return s.HTMLSlotElement&&r instanceof HTMLSlotElement&&i.push(...r.assignedElements()),t?i.filter(a=>a.matches(t)):i}function b7(r,t){const s=[t];for(;s.length>0;){const i=s.shift();if(r===i)return!0;s.push(...i.children,...i.shadowRoot?i.shadowRoot.children:[],...i.assignedElements?i.assignedElements():[])}}function v7(r,t){const s=Da();let i=t.contains(r);return!i&&s.HTMLSlotElement&&t instanceof HTMLSlotElement&&(i=[...t.assignedElements()].includes(r),i||(i=b7(r,t))),i}function y0(r){try{console.warn(r);return}catch{}}function x0(r,t){t===void 0&&(t=[]);const s=document.createElement(r);return s.classList.add(...Array.isArray(t)?t:p7(t)),s}function w7(r,t){const s=[];for(;r.previousElementSibling;){const i=r.previousElementSibling;t?i.matches(t)&&s.push(i):s.push(i),r=i}return s}function j7(r,t){const s=[];for(;r.nextElementSibling;){const i=r.nextElementSibling;t?i.matches(t)&&s.push(i):s.push(i),r=i}return s}function Iu(r,t){return Da().getComputedStyle(r,null).getPropertyValue(t)}function b0(r){let t=r,s;if(t){for(s=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(s+=1);return s}}function s_(r,t){const s=[];let i=r.parentElement;for(;i;)t?i.matches(t)&&s.push(i):s.push(i),i=i.parentElement;return s}function Gv(r,t,s){const i=Da();return r[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(r,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(r,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom"))}function Hi(r){return(Array.isArray(r)?r:[r]).filter(t=>!!t)}function v0(r,t){t===void 0&&(t=""),typeof trustedTypes<"u"?r.innerHTML=trustedTypes.createPolicy("html",{createHTML:s=>s}).createHTML(t):r.innerHTML=t}let Gx;function N7(){const r=Da(),t=Zl();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in r||r.DocumentTouch&&t instanceof r.DocumentTouch)}}function i_(){return Gx||(Gx=N7()),Gx}let Wx;function S7(r){let{userAgent:t}=r===void 0?{}:r;const s=i_(),i=Da(),a=i.navigator.platform,o=t||i.navigator.userAgent,c={ios:!1,android:!1},l=i.screen.width,u=i.screen.height,d=o.match(/(Android);?[\s\/]+([\d.]+)?/);let A=o.match(/(iPad).*OS\s([\d_]+)/);const f=o.match(/(iPod)(.*OS\s([\d_]+))?/),p=!A&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m=a==="Win32";let g=a==="MacIntel";const b=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!A&&g&&s.touch&&b.indexOf(`${l}x${u}`)>=0&&(A=o.match(/(Version)\/([\d.]+)/),A||(A=[0,1,"13_0_0"]),g=!1),d&&!m&&(c.os="android",c.android=!0),(A||p||f)&&(c.os="ios",c.ios=!0),c}function a_(r){return r===void 0&&(r={}),Wx||(Wx=S7(r)),Wx}let qx;function C7(){const r=Da(),t=a_();let s=!1;function i(){const l=r.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}if(i()){const l=String(r.navigator.userAgent);if(l.includes("Version/")){const[u,d]=l.split("Version/")[1].split(" ")[0].split(".").map(A=>Number(A));s=u<16||u===16&&d<2}}const a=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(r.navigator.userAgent),o=i(),c=o||a&&t.ios;return{isSafari:s||o,needPerspectiveFix:s,need3dFix:c,isWebView:a}}function o_(){return qx||(qx=C7()),qx}function B7(r){let{swiper:t,on:s,emit:i}=r;const a=Da();let o=null,c=null;const l=()=>{!t||t.destroyed||!t.initialized||(i("beforeResize"),i("resize"))},u=()=>{!t||t.destroyed||!t.initialized||(o=new ResizeObserver(f=>{c=a.requestAnimationFrame(()=>{const{width:p,height:m}=t;let g=p,b=m;f.forEach(v=>{let{contentBoxSize:y,contentRect:w,target:j}=v;j&&j!==t.el||(g=w?w.width:(y[0]||y).inlineSize,b=w?w.height:(y[0]||y).blockSize)}),(g!==p||b!==m)&&l()})}),o.observe(t.el))},d=()=>{c&&a.cancelAnimationFrame(c),o&&o.unobserve&&t.el&&(o.unobserve(t.el),o=null)},A=()=>{!t||t.destroyed||!t.initialized||i("orientationchange")};s("init",()=>{if(t.params.resizeObserver&&typeof a.ResizeObserver<"u"){u();return}a.addEventListener("resize",l),a.addEventListener("orientationchange",A)}),s("destroy",()=>{d(),a.removeEventListener("resize",l),a.removeEventListener("orientationchange",A)})}function k7(r){let{swiper:t,extendParams:s,on:i,emit:a}=r;const o=[],c=Da(),l=function(A,f){f===void 0&&(f={});const p=c.MutationObserver||c.WebkitMutationObserver,m=new p(g=>{if(t.__preventObserver__)return;if(g.length===1){a("observerUpdate",g[0]);return}const b=function(){a("observerUpdate",g[0])};c.requestAnimationFrame?c.requestAnimationFrame(b):c.setTimeout(b,0)});m.observe(A,{attributes:typeof f.attributes>"u"?!0:f.attributes,childList:t.isElement||(typeof f.childList>"u"?!0:f).childList,characterData:typeof f.characterData>"u"?!0:f.characterData}),o.push(m)},u=()=>{if(t.params.observer){if(t.params.observeParents){const A=s_(t.hostEl);for(let f=0;f<A.length;f+=1)l(A[f])}l(t.hostEl,{childList:t.params.observeSlideChildren}),l(t.wrapperEl,{attributes:!1})}},d=()=>{o.forEach(A=>{A.disconnect()}),o.splice(0,o.length)};s({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",u),i("destroy",d)}var _7={on(r,t,s){const i=this;if(!i.eventsListeners||i.destroyed||typeof t!="function")return i;const a=s?"unshift":"push";return r.split(" ").forEach(o=>{i.eventsListeners[o]||(i.eventsListeners[o]=[]),i.eventsListeners[o][a](t)}),i},once(r,t,s){const i=this;if(!i.eventsListeners||i.destroyed||typeof t!="function")return i;function a(){i.off(r,a),a.__emitterProxy&&delete a.__emitterProxy;for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];t.apply(i,c)}return a.__emitterProxy=t,i.on(r,a,s)},onAny(r,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof r!="function")return s;const i=t?"unshift":"push";return s.eventsAnyListeners.indexOf(r)<0&&s.eventsAnyListeners[i](r),s},offAny(r){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const s=t.eventsAnyListeners.indexOf(r);return s>=0&&t.eventsAnyListeners.splice(s,1),t},off(r,t){const s=this;return!s.eventsListeners||s.destroyed||!s.eventsListeners||r.split(" ").forEach(i=>{typeof t>"u"?s.eventsListeners[i]=[]:s.eventsListeners[i]&&s.eventsListeners[i].forEach((a,o)=>{(a===t||a.__emitterProxy&&a.__emitterProxy===t)&&s.eventsListeners[i].splice(o,1)})}),s},emit(){const r=this;if(!r.eventsListeners||r.destroyed||!r.eventsListeners)return r;let t,s,i;for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return typeof o[0]=="string"||Array.isArray(o[0])?(t=o[0],s=o.slice(1,o.length),i=r):(t=o[0].events,s=o[0].data,i=o[0].context||r),s.unshift(i),(Array.isArray(t)?t:t.split(" ")).forEach(u=>{r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach(d=>{d.apply(i,[u,...s])}),r.eventsListeners&&r.eventsListeners[u]&&r.eventsListeners[u].forEach(d=>{d.apply(i,s)})}),r}};function E7(){const r=this;let t,s;const i=r.el;typeof r.params.width<"u"&&r.params.width!==null?t=r.params.width:t=i.clientWidth,typeof r.params.height<"u"&&r.params.height!==null?s=r.params.height:s=i.clientHeight,!(t===0&&r.isHorizontal()||s===0&&r.isVertical())&&(t=t-parseInt(Iu(i,"padding-left")||0,10)-parseInt(Iu(i,"padding-right")||0,10),s=s-parseInt(Iu(i,"padding-top")||0,10)-parseInt(Iu(i,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(s)&&(s=0),Object.assign(r,{width:t,height:s,size:r.isHorizontal()?t:s}))}function O7(){const r=this;function t(O,k){return parseFloat(O.getPropertyValue(r.getDirectionLabel(k))||0)}const s=r.params,{wrapperEl:i,slidesEl:a,size:o,rtlTranslate:c,wrongRTL:l}=r,u=r.virtual&&s.virtual.enabled,d=u?r.virtual.slides.length:r.slides.length,A=Kl(a,`.${r.params.slideClass}, swiper-slide`),f=u?r.virtual.slides.length:A.length;let p=[];const m=[],g=[];let b=s.slidesOffsetBefore;typeof b=="function"&&(b=s.slidesOffsetBefore.call(r));let v=s.slidesOffsetAfter;typeof v=="function"&&(v=s.slidesOffsetAfter.call(r));const y=r.snapGrid.length,w=r.slidesGrid.length;let j=s.spaceBetween,C=-b,B=0,E=0;if(typeof o>"u")return;typeof j=="string"&&j.indexOf("%")>=0?j=parseFloat(j.replace("%",""))/100*o:typeof j=="string"&&(j=parseFloat(j)),r.virtualSize=-j,A.forEach(O=>{c?O.style.marginLeft="":O.style.marginRight="",O.style.marginBottom="",O.style.marginTop=""}),s.centeredSlides&&s.cssMode&&($m(i,"--swiper-centered-offset-before",""),$m(i,"--swiper-centered-offset-after",""));const _=s.grid&&s.grid.rows>1&&r.grid;_?r.grid.initSlides(A):r.grid&&r.grid.unsetSlides();let S;const N=s.slidesPerView==="auto"&&s.breakpoints&&Object.keys(s.breakpoints).filter(O=>typeof s.breakpoints[O].slidesPerView<"u").length>0;for(let O=0;O<f;O+=1){S=0;let k;if(A[O]&&(k=A[O]),_&&r.grid.updateSlide(O,k,A),!(A[O]&&Iu(k,"display")==="none")){if(s.slidesPerView==="auto"){N&&(A[O].style[r.getDirectionLabel("width")]="");const I=getComputedStyle(k),R=k.style.transform,Q=k.style.webkitTransform;if(R&&(k.style.transform="none"),Q&&(k.style.webkitTransform="none"),s.roundLengths)S=r.isHorizontal()?Gv(k,"width"):Gv(k,"height");else{const $=t(I,"width"),L=t(I,"padding-left"),F=t(I,"padding-right"),G=t(I,"margin-left"),X=t(I,"margin-right"),q=I.getPropertyValue("box-sizing");if(q&&q==="border-box")S=$+G+X;else{const{clientWidth:T,offsetWidth:U}=k;S=$+L+F+G+X+(U-T)}}R&&(k.style.transform=R),Q&&(k.style.webkitTransform=Q),s.roundLengths&&(S=Math.floor(S))}else S=(o-(s.slidesPerView-1)*j)/s.slidesPerView,s.roundLengths&&(S=Math.floor(S)),A[O]&&(A[O].style[r.getDirectionLabel("width")]=`${S}px`);A[O]&&(A[O].swiperSlideSize=S),g.push(S),s.centeredSlides?(C=C+S/2+B/2+j,B===0&&O!==0&&(C=C-o/2-j),O===0&&(C=C-o/2-j),Math.abs(C)<1/1e3&&(C=0),s.roundLengths&&(C=Math.floor(C)),E%s.slidesPerGroup===0&&p.push(C),m.push(C)):(s.roundLengths&&(C=Math.floor(C)),(E-Math.min(r.params.slidesPerGroupSkip,E))%r.params.slidesPerGroup===0&&p.push(C),m.push(C),C=C+S+j),r.virtualSize+=S+j,B=S,E+=1}}if(r.virtualSize=Math.max(r.virtualSize,o)+v,c&&l&&(s.effect==="slide"||s.effect==="coverflow")&&(i.style.width=`${r.virtualSize+j}px`),s.setWrapperSize&&(i.style[r.getDirectionLabel("width")]=`${r.virtualSize+j}px`),_&&r.grid.updateWrapperSize(S,p),!s.centeredSlides){const O=[];for(let k=0;k<p.length;k+=1){let I=p[k];s.roundLengths&&(I=Math.floor(I)),p[k]<=r.virtualSize-o&&O.push(I)}p=O,Math.floor(r.virtualSize-o)-Math.floor(p[p.length-1])>1&&p.push(r.virtualSize-o)}if(u&&s.loop){const O=g[0]+j;if(s.slidesPerGroup>1){const k=Math.ceil((r.virtual.slidesBefore+r.virtual.slidesAfter)/s.slidesPerGroup),I=O*s.slidesPerGroup;for(let R=0;R<k;R+=1)p.push(p[p.length-1]+I)}for(let k=0;k<r.virtual.slidesBefore+r.virtual.slidesAfter;k+=1)s.slidesPerGroup===1&&p.push(p[p.length-1]+O),m.push(m[m.length-1]+O),r.virtualSize+=O}if(p.length===0&&(p=[0]),j!==0){const O=r.isHorizontal()&&c?"marginLeft":r.getDirectionLabel("marginRight");A.filter((k,I)=>!s.cssMode||s.loop?!0:I!==A.length-1).forEach(k=>{k.style[O]=`${j}px`})}if(s.centeredSlides&&s.centeredSlidesBounds){let O=0;g.forEach(I=>{O+=I+(j||0)}),O-=j;const k=O>o?O-o:0;p=p.map(I=>I<=0?-b:I>k?k+v:I)}if(s.centerInsufficientSlides){let O=0;g.forEach(I=>{O+=I+(j||0)}),O-=j;const k=(s.slidesOffsetBefore||0)+(s.slidesOffsetAfter||0);if(O+k<o){const I=(o-O-k)/2;p.forEach((R,Q)=>{p[Q]=R-I}),m.forEach((R,Q)=>{m[Q]=R+I})}}if(Object.assign(r,{slides:A,snapGrid:p,slidesGrid:m,slidesSizesGrid:g}),s.centeredSlides&&s.cssMode&&!s.centeredSlidesBounds){$m(i,"--swiper-centered-offset-before",`${-p[0]}px`),$m(i,"--swiper-centered-offset-after",`${r.size/2-g[g.length-1]/2}px`);const O=-r.snapGrid[0],k=-r.slidesGrid[0];r.snapGrid=r.snapGrid.map(I=>I+O),r.slidesGrid=r.slidesGrid.map(I=>I+k)}if(f!==d&&r.emit("slidesLengthChange"),p.length!==y&&(r.params.watchOverflow&&r.checkOverflow(),r.emit("snapGridLengthChange")),m.length!==w&&r.emit("slidesGridLengthChange"),s.watchSlidesProgress&&r.updateSlidesOffset(),r.emit("slidesUpdated"),!u&&!s.cssMode&&(s.effect==="slide"||s.effect==="fade")){const O=`${s.containerModifierClass}backface-hidden`,k=r.el.classList.contains(O);f<=s.maxBackfaceHiddenSlides?k||r.el.classList.add(O):k&&r.el.classList.remove(O)}}function I7(r){const t=this,s=[],i=t.virtual&&t.params.virtual.enabled;let a=0,o;typeof r=="number"?t.setTransition(r):r===!0&&t.setTransition(t.params.speed);const c=l=>i?t.slides[t.getSlideIndexByData(l)]:t.slides[l];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(l=>{s.push(l)});else for(o=0;o<Math.ceil(t.params.slidesPerView);o+=1){const l=t.activeIndex+o;if(l>t.slides.length&&!i)break;s.push(c(l))}else s.push(c(t.activeIndex));for(o=0;o<s.length;o+=1)if(typeof s[o]<"u"){const l=s[o].offsetHeight;a=l>a?l:a}(a||a===0)&&(t.wrapperEl.style.height=`${a}px`)}function P7(){const r=this,t=r.slides,s=r.isElement?r.isHorizontal()?r.wrapperEl.offsetLeft:r.wrapperEl.offsetTop:0;for(let i=0;i<t.length;i+=1)t[i].swiperSlideOffset=(r.isHorizontal()?t[i].offsetLeft:t[i].offsetTop)-s-r.cssOverflowAdjustment()}const y5=(r,t,s)=>{t&&!r.classList.contains(s)?r.classList.add(s):!t&&r.classList.contains(s)&&r.classList.remove(s)};function T7(r){r===void 0&&(r=this&&this.translate||0);const t=this,s=t.params,{slides:i,rtlTranslate:a,snapGrid:o}=t;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let c=-r;a&&(c=r),t.visibleSlidesIndexes=[],t.visibleSlides=[];let l=s.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*t.size:typeof l=="string"&&(l=parseFloat(l));for(let u=0;u<i.length;u+=1){const d=i[u];let A=d.swiperSlideOffset;s.cssMode&&s.centeredSlides&&(A-=i[0].swiperSlideOffset);const f=(c+(s.centeredSlides?t.minTranslate():0)-A)/(d.swiperSlideSize+l),p=(c-o[0]+(s.centeredSlides?t.minTranslate():0)-A)/(d.swiperSlideSize+l),m=-(c-A),g=m+t.slidesSizesGrid[u],b=m>=0&&m<=t.size-t.slidesSizesGrid[u],v=m>=0&&m<t.size-1||g>1&&g<=t.size||m<=0&&g>=t.size;v&&(t.visibleSlides.push(d),t.visibleSlidesIndexes.push(u)),y5(d,v,s.slideVisibleClass),y5(d,b,s.slideFullyVisibleClass),d.progress=a?-f:f,d.originalProgress=a?-p:p}}function F7(r){const t=this;if(typeof r>"u"){const A=t.rtlTranslate?-1:1;r=t&&t.translate&&t.translate*A||0}const s=t.params,i=t.maxTranslate()-t.minTranslate();let{progress:a,isBeginning:o,isEnd:c,progressLoop:l}=t;const u=o,d=c;if(i===0)a=0,o=!0,c=!0;else{a=(r-t.minTranslate())/i;const A=Math.abs(r-t.minTranslate())<1,f=Math.abs(r-t.maxTranslate())<1;o=A||a<=0,c=f||a>=1,A&&(a=0),f&&(a=1)}if(s.loop){const A=t.getSlideIndexByData(0),f=t.getSlideIndexByData(t.slides.length-1),p=t.slidesGrid[A],m=t.slidesGrid[f],g=t.slidesGrid[t.slidesGrid.length-1],b=Math.abs(r);b>=p?l=(b-p)/g:l=(b+g-m)/g,l>1&&(l-=1)}Object.assign(t,{progress:a,progressLoop:l,isBeginning:o,isEnd:c}),(s.watchSlidesProgress||s.centeredSlides&&s.autoHeight)&&t.updateSlidesProgress(r),o&&!u&&t.emit("reachBeginning toEdge"),c&&!d&&t.emit("reachEnd toEdge"),(u&&!o||d&&!c)&&t.emit("fromEdge"),t.emit("progress",a)}const Yx=(r,t,s)=>{t&&!r.classList.contains(s)?r.classList.add(s):!t&&r.classList.contains(s)&&r.classList.remove(s)};function U7(){const r=this,{slides:t,params:s,slidesEl:i,activeIndex:a}=r,o=r.virtual&&s.virtual.enabled,c=r.grid&&s.grid&&s.grid.rows>1,l=f=>Kl(i,`.${s.slideClass}${f}, swiper-slide${f}`)[0];let u,d,A;if(o)if(s.loop){let f=a-r.virtual.slidesBefore;f<0&&(f=r.virtual.slides.length+f),f>=r.virtual.slides.length&&(f-=r.virtual.slides.length),u=l(`[data-swiper-slide-index="${f}"]`)}else u=l(`[data-swiper-slide-index="${a}"]`);else c?(u=t.find(f=>f.column===a),A=t.find(f=>f.column===a+1),d=t.find(f=>f.column===a-1)):u=t[a];u&&(c||(A=j7(u,`.${s.slideClass}, swiper-slide`)[0],s.loop&&!A&&(A=t[0]),d=w7(u,`.${s.slideClass}, swiper-slide`)[0],s.loop&&!d===0&&(d=t[t.length-1]))),t.forEach(f=>{Yx(f,f===u,s.slideActiveClass),Yx(f,f===A,s.slideNextClass),Yx(f,f===d,s.slidePrevClass)}),r.emitSlidesClasses()}const Qg=(r,t)=>{if(!r||r.destroyed||!r.params)return;const s=()=>r.isElement?"swiper-slide":`.${r.params.slideClass}`,i=t.closest(s());if(i){let a=i.querySelector(`.${r.params.lazyPreloaderClass}`);!a&&r.isElement&&(i.shadowRoot?a=i.shadowRoot.querySelector(`.${r.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(a=i.shadowRoot.querySelector(`.${r.params.lazyPreloaderClass}`),a&&a.remove())})),a&&a.remove()}},Xx=(r,t)=>{if(!r.slides[t])return;const s=r.slides[t].querySelector('[loading="lazy"]');s&&s.removeAttribute("loading")},Wv=r=>{if(!r||r.destroyed||!r.params)return;let t=r.params.lazyPreloadPrevNext;const s=r.slides.length;if(!s||!t||t<0)return;t=Math.min(t,s);const i=r.params.slidesPerView==="auto"?r.slidesPerViewDynamic():Math.ceil(r.params.slidesPerView),a=r.activeIndex;if(r.params.grid&&r.params.grid.rows>1){const c=a,l=[c-t];l.push(...Array.from({length:t}).map((u,d)=>c+i+d)),r.slides.forEach((u,d)=>{l.includes(u.column)&&Xx(r,d)});return}const o=a+i-1;if(r.params.rewind||r.params.loop)for(let c=a-t;c<=o+t;c+=1){const l=(c%s+s)%s;(l<a||l>o)&&Xx(r,l)}else for(let c=Math.max(a-t,0);c<=Math.min(o+t,s-1);c+=1)c!==a&&(c>o||c<a)&&Xx(r,c)};function L7(r){const{slidesGrid:t,params:s}=r,i=r.rtlTranslate?r.translate:-r.translate;let a;for(let o=0;o<t.length;o+=1)typeof t[o+1]<"u"?i>=t[o]&&i<t[o+1]-(t[o+1]-t[o])/2?a=o:i>=t[o]&&i<t[o+1]&&(a=o+1):i>=t[o]&&(a=o);return s.normalizeSlideIndex&&(a<0||typeof a>"u")&&(a=0),a}function D7(r){const t=this,s=t.rtlTranslate?t.translate:-t.translate,{snapGrid:i,params:a,activeIndex:o,realIndex:c,snapIndex:l}=t;let u=r,d;const A=m=>{let g=m-t.virtual.slidesBefore;return g<0&&(g=t.virtual.slides.length+g),g>=t.virtual.slides.length&&(g-=t.virtual.slides.length),g};if(typeof u>"u"&&(u=L7(t)),i.indexOf(s)>=0)d=i.indexOf(s);else{const m=Math.min(a.slidesPerGroupSkip,u);d=m+Math.floor((u-m)/a.slidesPerGroup)}if(d>=i.length&&(d=i.length-1),u===o&&!t.params.loop){d!==l&&(t.snapIndex=d,t.emit("snapIndexChange"));return}if(u===o&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=A(u);return}const f=t.grid&&a.grid&&a.grid.rows>1;let p;if(t.virtual&&a.virtual.enabled&&a.loop)p=A(u);else if(f){const m=t.slides.find(b=>b.column===u);let g=parseInt(m.getAttribute("data-swiper-slide-index"),10);Number.isNaN(g)&&(g=Math.max(t.slides.indexOf(m),0)),p=Math.floor(g/a.grid.rows)}else if(t.slides[u]){const m=t.slides[u].getAttribute("data-swiper-slide-index");m?p=parseInt(m,10):p=u}else p=u;Object.assign(t,{previousSnapIndex:l,snapIndex:d,previousRealIndex:c,realIndex:p,previousIndex:o,activeIndex:u}),t.initialized&&Wv(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(c!==p&&t.emit("realIndexChange"),t.emit("slideChange"))}function M7(r,t){const s=this,i=s.params;let a=r.closest(`.${i.slideClass}, swiper-slide`);!a&&s.isElement&&t&&t.length>1&&t.includes(r)&&[...t.slice(t.indexOf(r)+1,t.length)].forEach(l=>{!a&&l.matches&&l.matches(`.${i.slideClass}, swiper-slide`)&&(a=l)});let o=!1,c;if(a){for(let l=0;l<s.slides.length;l+=1)if(s.slides[l]===a){o=!0,c=l;break}}if(a&&o)s.clickedSlide=a,s.virtual&&s.params.virtual.enabled?s.clickedIndex=parseInt(a.getAttribute("data-swiper-slide-index"),10):s.clickedIndex=c;else{s.clickedSlide=void 0,s.clickedIndex=void 0;return}i.slideToClickedSlide&&s.clickedIndex!==void 0&&s.clickedIndex!==s.activeIndex&&s.slideToClickedSlide()}var R7={updateSize:E7,updateSlides:O7,updateAutoHeight:I7,updateSlidesOffset:P7,updateSlidesProgress:T7,updateProgress:F7,updateSlidesClasses:U7,updateActiveIndex:D7,updateClickedSlide:M7};function Q7(r){r===void 0&&(r=this.isHorizontal()?"x":"y");const t=this,{params:s,rtlTranslate:i,translate:a,wrapperEl:o}=t;if(s.virtualTranslate)return i?-a:a;if(s.cssMode)return a;let c=y7(o,r);return c+=t.cssOverflowAdjustment(),i&&(c=-c),c||0}function $7(r,t){const s=this,{rtlTranslate:i,params:a,wrapperEl:o,progress:c}=s;let l=0,u=0;const d=0;s.isHorizontal()?l=i?-r:r:u=r,a.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),s.previousTranslate=s.translate,s.translate=s.isHorizontal()?l:u,a.cssMode?o[s.isHorizontal()?"scrollLeft":"scrollTop"]=s.isHorizontal()?-l:-u:a.virtualTranslate||(s.isHorizontal()?l-=s.cssOverflowAdjustment():u-=s.cssOverflowAdjustment(),o.style.transform=`translate3d(${l}px, ${u}px, ${d}px)`);let A;const f=s.maxTranslate()-s.minTranslate();f===0?A=0:A=(r-s.minTranslate())/f,A!==c&&s.updateProgress(r),s.emit("setTranslate",s.translate,t)}function H7(){return-this.snapGrid[0]}function V7(){return-this.snapGrid[this.snapGrid.length-1]}function z7(r,t,s,i,a){r===void 0&&(r=0),t===void 0&&(t=this.params.speed),s===void 0&&(s=!0),i===void 0&&(i=!0);const o=this,{params:c,wrapperEl:l}=o;if(o.animating&&c.preventInteractionOnTransition)return!1;const u=o.minTranslate(),d=o.maxTranslate();let A;if(i&&r>u?A=u:i&&r<d?A=d:A=r,o.updateProgress(A),c.cssMode){const f=o.isHorizontal();if(t===0)l[f?"scrollLeft":"scrollTop"]=-A;else{if(!o.support.smoothScroll)return n_({swiper:o,targetPosition:-A,side:f?"left":"top"}),!0;l.scrollTo({[f?"left":"top"]:-A,behavior:"smooth"})}return!0}return t===0?(o.setTransition(0),o.setTranslate(A),s&&(o.emit("beforeTransitionStart",t,a),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(A),s&&(o.emit("beforeTransitionStart",t,a),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(p){!o||o.destroyed||p.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,o.animating=!1,s&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}var K7={getTranslate:Q7,setTranslate:$7,minTranslate:H7,maxTranslate:V7,translateTo:z7};function G7(r,t){const s=this;s.params.cssMode||(s.wrapperEl.style.transitionDuration=`${r}ms`,s.wrapperEl.style.transitionDelay=r===0?"0ms":""),s.emit("setTransition",r,t)}function l_(r){let{swiper:t,runCallbacks:s,direction:i,step:a}=r;const{activeIndex:o,previousIndex:c}=t;let l=i;l||(o>c?l="next":o<c?l="prev":l="reset"),t.emit(`transition${a}`),s&&l==="reset"?t.emit(`slideResetTransition${a}`):s&&o!==c&&(t.emit(`slideChangeTransition${a}`),l==="next"?t.emit(`slideNextTransition${a}`):t.emit(`slidePrevTransition${a}`))}function W7(r,t){r===void 0&&(r=!0);const s=this,{params:i}=s;i.cssMode||(i.autoHeight&&s.updateAutoHeight(),l_({swiper:s,runCallbacks:r,direction:t,step:"Start"}))}function q7(r,t){r===void 0&&(r=!0);const s=this,{params:i}=s;s.animating=!1,!i.cssMode&&(s.setTransition(0),l_({swiper:s,runCallbacks:r,direction:t,step:"End"}))}var Y7={setTransition:G7,transitionStart:W7,transitionEnd:q7};function X7(r,t,s,i,a){r===void 0&&(r=0),s===void 0&&(s=!0),typeof r=="string"&&(r=parseInt(r,10));const o=this;let c=r;c<0&&(c=0);const{params:l,snapGrid:u,slidesGrid:d,previousIndex:A,activeIndex:f,rtlTranslate:p,wrapperEl:m,enabled:g}=o;if(!g&&!i&&!a||o.destroyed||o.animating&&l.preventInteractionOnTransition)return!1;typeof t>"u"&&(t=o.params.speed);const b=Math.min(o.params.slidesPerGroupSkip,c);let v=b+Math.floor((c-b)/o.params.slidesPerGroup);v>=u.length&&(v=u.length-1);const y=-u[v];if(l.normalizeSlideIndex)for(let _=0;_<d.length;_+=1){const S=-Math.floor(y*100),N=Math.floor(d[_]*100),O=Math.floor(d[_+1]*100);typeof d[_+1]<"u"?S>=N&&S<O-(O-N)/2?c=_:S>=N&&S<O&&(c=_+1):S>=N&&(c=_)}if(o.initialized&&c!==f&&(!o.allowSlideNext&&(p?y>o.translate&&y>o.minTranslate():y<o.translate&&y<o.minTranslate())||!o.allowSlidePrev&&y>o.translate&&y>o.maxTranslate()&&(f||0)!==c))return!1;c!==(A||0)&&s&&o.emit("beforeSlideChangeStart"),o.updateProgress(y);let w;c>f?w="next":c<f?w="prev":w="reset";const j=o.virtual&&o.params.virtual.enabled;if(!(j&&a)&&(p&&-y===o.translate||!p&&y===o.translate))return o.updateActiveIndex(c),l.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),l.effect!=="slide"&&o.setTranslate(y),w!=="reset"&&(o.transitionStart(s,w),o.transitionEnd(s,w)),!1;if(l.cssMode){const _=o.isHorizontal(),S=p?y:-y;if(t===0)j&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),j&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{m[_?"scrollLeft":"scrollTop"]=S})):m[_?"scrollLeft":"scrollTop"]=S,j&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1});else{if(!o.support.smoothScroll)return n_({swiper:o,targetPosition:S,side:_?"left":"top"}),!0;m.scrollTo({[_?"left":"top"]:S,behavior:"smooth"})}return!0}const E=o_().isSafari;return j&&!a&&E&&o.isElement&&o.virtual.update(!1,!1,c),o.setTransition(t),o.setTranslate(y),o.updateActiveIndex(c),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,i),o.transitionStart(s,w),t===0?o.transitionEnd(s,w):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(S){!o||o.destroyed||S.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(s,w))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function J7(r,t,s,i){r===void 0&&(r=0),s===void 0&&(s=!0),typeof r=="string"&&(r=parseInt(r,10));const a=this;if(a.destroyed)return;typeof t>"u"&&(t=a.params.speed);const o=a.grid&&a.params.grid&&a.params.grid.rows>1;let c=r;if(a.params.loop)if(a.virtual&&a.params.virtual.enabled)c=c+a.virtual.slidesBefore;else{let l;if(o){const p=c*a.params.grid.rows;l=a.slides.find(m=>m.getAttribute("data-swiper-slide-index")*1===p).column}else l=a.getSlideIndexByData(c);const u=o?Math.ceil(a.slides.length/a.params.grid.rows):a.slides.length,{centeredSlides:d}=a.params;let A=a.params.slidesPerView;A==="auto"?A=a.slidesPerViewDynamic():(A=Math.ceil(parseFloat(a.params.slidesPerView,10)),d&&A%2===0&&(A=A+1));let f=u-l<A;if(d&&(f=f||l<Math.ceil(A/2)),i&&d&&a.params.slidesPerView!=="auto"&&!o&&(f=!1),f){const p=d?l<a.activeIndex?"prev":"next":l-a.activeIndex-1<a.params.slidesPerView?"next":"prev";a.loopFix({direction:p,slideTo:!0,activeSlideIndex:p==="next"?l+1:l-u+1,slideRealIndex:p==="next"?a.realIndex:void 0})}if(o){const p=c*a.params.grid.rows;c=a.slides.find(m=>m.getAttribute("data-swiper-slide-index")*1===p).column}else c=a.getSlideIndexByData(c)}return requestAnimationFrame(()=>{a.slideTo(c,t,s,i)}),a}function Z7(r,t,s){t===void 0&&(t=!0);const i=this,{enabled:a,params:o,animating:c}=i;if(!a||i.destroyed)return i;typeof r>"u"&&(r=i.params.speed);let l=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(l=Math.max(i.slidesPerViewDynamic("current",!0),1));const u=i.activeIndex<o.slidesPerGroupSkip?1:l,d=i.virtual&&o.virtual.enabled;if(o.loop){if(c&&!d&&o.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+u,r,t,s)}),!0}return o.rewind&&i.isEnd?i.slideTo(0,r,t,s):i.slideTo(i.activeIndex+u,r,t,s)}function eQ(r,t,s){t===void 0&&(t=!0);const i=this,{params:a,snapGrid:o,slidesGrid:c,rtlTranslate:l,enabled:u,animating:d}=i;if(!u||i.destroyed)return i;typeof r>"u"&&(r=i.params.speed);const A=i.virtual&&a.virtual.enabled;if(a.loop){if(d&&!A&&a.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const f=l?i.translate:-i.translate;function p(w){return w<0?-Math.floor(Math.abs(w)):Math.floor(w)}const m=p(f),g=o.map(w=>p(w)),b=a.freeMode&&a.freeMode.enabled;let v=o[g.indexOf(m)-1];if(typeof v>"u"&&(a.cssMode||b)){let w;o.forEach((j,C)=>{m>=j&&(w=C)}),typeof w<"u"&&(v=b?o[w]:o[w>0?w-1:w])}let y=0;if(typeof v<"u"&&(y=c.indexOf(v),y<0&&(y=i.activeIndex-1),a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(y=y-i.slidesPerViewDynamic("previous",!0)+1,y=Math.max(y,0))),a.rewind&&i.isBeginning){const w=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(w,r,t,s)}else if(a.loop&&i.activeIndex===0&&a.cssMode)return requestAnimationFrame(()=>{i.slideTo(y,r,t,s)}),!0;return i.slideTo(y,r,t,s)}function tQ(r,t,s){t===void 0&&(t=!0);const i=this;if(!i.destroyed)return typeof r>"u"&&(r=i.params.speed),i.slideTo(i.activeIndex,r,t,s)}function rQ(r,t,s,i){t===void 0&&(t=!0),i===void 0&&(i=.5);const a=this;if(a.destroyed)return;typeof r>"u"&&(r=a.params.speed);let o=a.activeIndex;const c=Math.min(a.params.slidesPerGroupSkip,o),l=c+Math.floor((o-c)/a.params.slidesPerGroup),u=a.rtlTranslate?a.translate:-a.translate;if(u>=a.snapGrid[l]){const d=a.snapGrid[l],A=a.snapGrid[l+1];u-d>(A-d)*i&&(o+=a.params.slidesPerGroup)}else{const d=a.snapGrid[l-1],A=a.snapGrid[l];u-d<=(A-d)*i&&(o-=a.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,a.slidesGrid.length-1),a.slideTo(o,r,t,s)}function nQ(){const r=this;if(r.destroyed)return;const{params:t,slidesEl:s}=r,i=t.slidesPerView==="auto"?r.slidesPerViewDynamic():t.slidesPerView;let a=r.getSlideIndexWhenGrid(r.clickedIndex),o;const c=r.isElement?"swiper-slide":`.${t.slideClass}`,l=r.grid&&r.params.grid&&r.params.grid.rows>1;if(t.loop){if(r.animating)return;o=parseInt(r.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?r.slideToLoop(o):a>(l?(r.slides.length-i)/2-(r.params.grid.rows-1):r.slides.length-i)?(r.loopFix(),a=r.getSlideIndex(Kl(s,`${c}[data-swiper-slide-index="${o}"]`)[0]),r_(()=>{r.slideTo(a)})):r.slideTo(a)}else r.slideTo(a)}var sQ={slideTo:X7,slideToLoop:J7,slideNext:Z7,slidePrev:eQ,slideReset:tQ,slideToClosest:rQ,slideToClickedSlide:nQ};function iQ(r,t){const s=this,{params:i,slidesEl:a}=s;if(!i.loop||s.virtual&&s.params.virtual.enabled)return;const o=()=>{Kl(a,`.${i.slideClass}, swiper-slide`).forEach((m,g)=>{m.setAttribute("data-swiper-slide-index",g)})},c=()=>{const p=Kl(a,`.${i.slideBlankClass}`);p.forEach(m=>{m.remove()}),p.length>0&&(s.recalcSlides(),s.updateSlides())},l=s.grid&&i.grid&&i.grid.rows>1;i.loopAddBlankSlides&&(i.slidesPerGroup>1||l)&&c();const u=i.slidesPerGroup*(l?i.grid.rows:1),d=s.slides.length%u!==0,A=l&&s.slides.length%i.grid.rows!==0,f=p=>{for(let m=0;m<p;m+=1){const g=s.isElement?x0("swiper-slide",[i.slideBlankClass]):x0("div",[i.slideClass,i.slideBlankClass]);s.slidesEl.append(g)}};if(d){if(i.loopAddBlankSlides){const p=u-s.slides.length%u;f(p),s.recalcSlides(),s.updateSlides()}else y0("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else if(A){if(i.loopAddBlankSlides){const p=i.grid.rows-s.slides.length%i.grid.rows;f(p),s.recalcSlides(),s.updateSlides()}else y0("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else o();s.loopFix({slideRealIndex:r,direction:i.centeredSlides?void 0:"next",initial:t})}function aQ(r){let{slideRealIndex:t,slideTo:s=!0,direction:i,setTranslate:a,activeSlideIndex:o,initial:c,byController:l,byMousewheel:u}=r===void 0?{}:r;const d=this;if(!d.params.loop)return;d.emit("beforeLoopFix");const{slides:A,allowSlidePrev:f,allowSlideNext:p,slidesEl:m,params:g}=d,{centeredSlides:b,initialSlide:v}=g;if(d.allowSlidePrev=!0,d.allowSlideNext=!0,d.virtual&&g.virtual.enabled){s&&(!g.centeredSlides&&d.snapIndex===0?d.slideTo(d.virtual.slides.length,0,!1,!0):g.centeredSlides&&d.snapIndex<g.slidesPerView?d.slideTo(d.virtual.slides.length+d.snapIndex,0,!1,!0):d.snapIndex===d.snapGrid.length-1&&d.slideTo(d.virtual.slidesBefore,0,!1,!0)),d.allowSlidePrev=f,d.allowSlideNext=p,d.emit("loopFix");return}let y=g.slidesPerView;y==="auto"?y=d.slidesPerViewDynamic():(y=Math.ceil(parseFloat(g.slidesPerView,10)),b&&y%2===0&&(y=y+1));const w=g.slidesPerGroupAuto?y:g.slidesPerGroup;let j=b?Math.max(w,Math.ceil(y/2)):w;j%w!==0&&(j+=w-j%w),j+=g.loopAdditionalSlides,d.loopedSlides=j;const C=d.grid&&g.grid&&g.grid.rows>1;A.length<y+j||d.params.effect==="cards"&&A.length<y+j*2?y0("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):C&&g.grid.fill==="row"&&y0("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const B=[],E=[],_=C?Math.ceil(A.length/g.grid.rows):A.length,S=c&&_-v<y&&!b;let N=S?v:d.activeIndex;typeof o>"u"?o=d.getSlideIndex(A.find(L=>L.classList.contains(g.slideActiveClass))):N=o;const O=i==="next"||!i,k=i==="prev"||!i;let I=0,R=0;const $=(C?A[o].column:o)+(b&&typeof a>"u"?-y/2+.5:0);if($<j){I=Math.max(j-$,w);for(let L=0;L<j-$;L+=1){const F=L-Math.floor(L/_)*_;if(C){const G=_-F-1;for(let X=A.length-1;X>=0;X-=1)A[X].column===G&&B.push(X)}else B.push(_-F-1)}}else if($+y>_-j){R=Math.max($-(_-j*2),w),S&&(R=Math.max(R,y-_+v+1));for(let L=0;L<R;L+=1){const F=L-Math.floor(L/_)*_;C?A.forEach((G,X)=>{G.column===F&&E.push(X)}):E.push(F)}}if(d.__preventObserver__=!0,requestAnimationFrame(()=>{d.__preventObserver__=!1}),d.params.effect==="cards"&&A.length<y+j*2&&(E.includes(o)&&E.splice(E.indexOf(o),1),B.includes(o)&&B.splice(B.indexOf(o),1)),k&&B.forEach(L=>{A[L].swiperLoopMoveDOM=!0,m.prepend(A[L]),A[L].swiperLoopMoveDOM=!1}),O&&E.forEach(L=>{A[L].swiperLoopMoveDOM=!0,m.append(A[L]),A[L].swiperLoopMoveDOM=!1}),d.recalcSlides(),g.slidesPerView==="auto"?d.updateSlides():C&&(B.length>0&&k||E.length>0&&O)&&d.slides.forEach((L,F)=>{d.grid.updateSlide(F,L,d.slides)}),g.watchSlidesProgress&&d.updateSlidesOffset(),s){if(B.length>0&&k){if(typeof t>"u"){const L=d.slidesGrid[N],G=d.slidesGrid[N+I]-L;u?d.setTranslate(d.translate-G):(d.slideTo(N+Math.ceil(I),0,!1,!0),a&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-G,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-G))}else if(a){const L=C?B.length/g.grid.rows:B.length;d.slideTo(d.activeIndex+L,0,!1,!0),d.touchEventsData.currentTranslate=d.translate}}else if(E.length>0&&O)if(typeof t>"u"){const L=d.slidesGrid[N],G=d.slidesGrid[N-R]-L;u?d.setTranslate(d.translate-G):(d.slideTo(N-R,0,!1,!0),a&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-G,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-G))}else{const L=C?E.length/g.grid.rows:E.length;d.slideTo(d.activeIndex-L,0,!1,!0)}}if(d.allowSlidePrev=f,d.allowSlideNext=p,d.controller&&d.controller.control&&!l){const L={slideRealIndex:t,direction:i,setTranslate:a,activeSlideIndex:o,byController:!0};Array.isArray(d.controller.control)?d.controller.control.forEach(F=>{!F.destroyed&&F.params.loop&&F.loopFix({...L,slideTo:F.params.slidesPerView===g.slidesPerView?s:!1})}):d.controller.control instanceof d.constructor&&d.controller.control.params.loop&&d.controller.control.loopFix({...L,slideTo:d.controller.control.params.slidesPerView===g.slidesPerView?s:!1})}d.emit("loopFix")}function oQ(){const r=this,{params:t,slidesEl:s}=r;if(!t.loop||!s||r.virtual&&r.params.virtual.enabled)return;r.recalcSlides();const i=[];r.slides.forEach(a=>{const o=typeof a.swiperSlideIndex>"u"?a.getAttribute("data-swiper-slide-index")*1:a.swiperSlideIndex;i[o]=a}),r.slides.forEach(a=>{a.removeAttribute("data-swiper-slide-index")}),i.forEach(a=>{s.append(a)}),r.recalcSlides(),r.slideTo(r.realIndex,0)}var lQ={loopCreate:iQ,loopFix:aQ,loopDestroy:oQ};function cQ(r){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const s=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),s.style.cursor="move",s.style.cursor=r?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function uQ(){const r=this;r.params.watchOverflow&&r.isLocked||r.params.cssMode||(r.isElement&&(r.__preventObserver__=!0),r[r.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",r.isElement&&requestAnimationFrame(()=>{r.__preventObserver__=!1}))}var dQ={setGrabCursor:cQ,unsetGrabCursor:uQ};function AQ(r,t){t===void 0&&(t=this);function s(i){if(!i||i===Zl()||i===Da())return null;i.assignedSlot&&(i=i.assignedSlot);const a=i.closest(r);return!a&&!i.getRootNode?null:a||s(i.getRootNode().host)}return s(t)}function x5(r,t,s){const i=Da(),{params:a}=r,o=a.edgeSwipeDetection,c=a.edgeSwipeThreshold;return o&&(s<=c||s>=i.innerWidth-c)?o==="prevent"?(t.preventDefault(),!0):!1:!0}function hQ(r){const t=this,s=Zl();let i=r;i.originalEvent&&(i=i.originalEvent);const a=t.touchEventsData;if(i.type==="pointerdown"){if(a.pointerId!==null&&a.pointerId!==i.pointerId)return;a.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(a.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){x5(t,i,i.targetTouches[0].pageX);return}const{params:o,touches:c,enabled:l}=t;if(!l||!o.simulateTouch&&i.pointerType==="mouse"||t.animating&&o.preventInteractionOnTransition)return;!t.animating&&o.cssMode&&o.loop&&t.loopFix();let u=i.target;if(o.touchEventsTarget==="wrapper"&&!v7(u,t.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||a.isTouched&&a.isMoved)return;const d=!!o.noSwipingClass&&o.noSwipingClass!=="",A=i.composedPath?i.composedPath():i.path;d&&i.target&&i.target.shadowRoot&&A&&(u=A[0]);const f=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,p=!!(i.target&&i.target.shadowRoot);if(o.noSwiping&&(p?AQ(f,u):u.closest(f))){t.allowClick=!0;return}if(o.swipeHandler&&!u.closest(o.swipeHandler))return;c.currentX=i.pageX,c.currentY=i.pageY;const m=c.currentX,g=c.currentY;if(!x5(t,i,m))return;Object.assign(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),c.startX=m,c.startY=g,a.touchStartTime=g0(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(a.allowThresholdMove=!1);let b=!0;u.matches(a.focusableElements)&&(b=!1,u.nodeName==="SELECT"&&(a.isTouched=!1)),s.activeElement&&s.activeElement.matches(a.focusableElements)&&s.activeElement!==u&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!u.matches(a.focusableElements))&&s.activeElement.blur();const v=b&&t.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||v)&&!u.isContentEditable&&i.preventDefault(),o.freeMode&&o.freeMode.enabled&&t.freeMode&&t.animating&&!o.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",i)}function fQ(r){const t=Zl(),s=this,i=s.touchEventsData,{params:a,touches:o,rtlTranslate:c,enabled:l}=s;if(!l||!a.simulateTouch&&r.pointerType==="mouse")return;let u=r;if(u.originalEvent&&(u=u.originalEvent),u.type==="pointermove"&&(i.touchId!==null||u.pointerId!==i.pointerId))return;let d;if(u.type==="touchmove"){if(d=[...u.changedTouches].find(B=>B.identifier===i.touchId),!d||d.identifier!==i.touchId)return}else d=u;if(!i.isTouched){i.startMoving&&i.isScrolling&&s.emit("touchMoveOpposite",u);return}const A=d.pageX,f=d.pageY;if(u.preventedByNestedSwiper){o.startX=A,o.startY=f;return}if(!s.allowTouchMove){u.target.matches(i.focusableElements)||(s.allowClick=!1),i.isTouched&&(Object.assign(o,{startX:A,startY:f,currentX:A,currentY:f}),i.touchStartTime=g0());return}if(a.touchReleaseOnEdges&&!a.loop)if(s.isVertical()){if(f<o.startY&&s.translate<=s.maxTranslate()||f>o.startY&&s.translate>=s.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else{if(c&&(A>o.startX&&-s.translate<=s.maxTranslate()||A<o.startX&&-s.translate>=s.minTranslate()))return;if(!c&&(A<o.startX&&s.translate<=s.maxTranslate()||A>o.startX&&s.translate>=s.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==u.target&&u.pointerType!=="mouse"&&t.activeElement.blur(),t.activeElement&&u.target===t.activeElement&&u.target.matches(i.focusableElements)){i.isMoved=!0,s.allowClick=!1;return}i.allowTouchCallbacks&&s.emit("touchMove",u),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=A,o.currentY=f;const p=o.currentX-o.startX,m=o.currentY-o.startY;if(s.params.threshold&&Math.sqrt(p**2+m**2)<s.params.threshold)return;if(typeof i.isScrolling>"u"){let B;s.isHorizontal()&&o.currentY===o.startY||s.isVertical()&&o.currentX===o.startX?i.isScrolling=!1:p*p+m*m>=25&&(B=Math.atan2(Math.abs(m),Math.abs(p))*180/Math.PI,i.isScrolling=s.isHorizontal()?B>a.touchAngle:90-B>a.touchAngle)}if(i.isScrolling&&s.emit("touchMoveOpposite",u),typeof i.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(i.startMoving=!0),i.isScrolling||u.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;s.allowClick=!1,!a.cssMode&&u.cancelable&&u.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&u.stopPropagation();let g=s.isHorizontal()?p:m,b=s.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;a.oneWayMovement&&(g=Math.abs(g)*(c?1:-1),b=Math.abs(b)*(c?1:-1)),o.diff=g,g*=a.touchRatio,c&&(g=-g,b=-b);const v=s.touchesDirection;s.swipeDirection=g>0?"prev":"next",s.touchesDirection=b>0?"prev":"next";const y=s.params.loop&&!a.cssMode,w=s.touchesDirection==="next"&&s.allowSlideNext||s.touchesDirection==="prev"&&s.allowSlidePrev;if(!i.isMoved){if(y&&w&&s.loopFix({direction:s.swipeDirection}),i.startTranslate=s.getTranslate(),s.setTransition(0),s.animating){const B=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});s.wrapperEl.dispatchEvent(B)}i.allowMomentumBounce=!1,a.grabCursor&&(s.allowSlideNext===!0||s.allowSlidePrev===!0)&&s.setGrabCursor(!0),s.emit("sliderFirstMove",u)}if(new Date().getTime(),a._loopSwapReset!==!1&&i.isMoved&&i.allowThresholdMove&&v!==s.touchesDirection&&y&&w&&Math.abs(g)>=1){Object.assign(o,{startX:A,startY:f,currentX:A,currentY:f,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}s.emit("sliderMove",u),i.isMoved=!0,i.currentTranslate=g+i.startTranslate;let j=!0,C=a.resistanceRatio;if(a.touchReleaseOnEdges&&(C=0),g>0?(y&&w&&i.allowThresholdMove&&i.currentTranslate>(a.centeredSlides?s.minTranslate()-s.slidesSizesGrid[s.activeIndex+1]-(a.slidesPerView!=="auto"&&s.slides.length-a.slidesPerView>=2?s.slidesSizesGrid[s.activeIndex+1]+s.params.spaceBetween:0)-s.params.spaceBetween:s.minTranslate())&&s.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>s.minTranslate()&&(j=!1,a.resistance&&(i.currentTranslate=s.minTranslate()-1+(-s.minTranslate()+i.startTranslate+g)**C))):g<0&&(y&&w&&i.allowThresholdMove&&i.currentTranslate<(a.centeredSlides?s.maxTranslate()+s.slidesSizesGrid[s.slidesSizesGrid.length-1]+s.params.spaceBetween+(a.slidesPerView!=="auto"&&s.slides.length-a.slidesPerView>=2?s.slidesSizesGrid[s.slidesSizesGrid.length-1]+s.params.spaceBetween:0):s.maxTranslate())&&s.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:s.slides.length-(a.slidesPerView==="auto"?s.slidesPerViewDynamic():Math.ceil(parseFloat(a.slidesPerView,10)))}),i.currentTranslate<s.maxTranslate()&&(j=!1,a.resistance&&(i.currentTranslate=s.maxTranslate()+1-(s.maxTranslate()-i.startTranslate-g)**C))),j&&(u.preventedByNestedSwiper=!0),!s.allowSlideNext&&s.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!s.allowSlidePrev&&s.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!s.allowSlidePrev&&!s.allowSlideNext&&(i.currentTranslate=i.startTranslate),a.threshold>0)if(Math.abs(g)>a.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,i.currentTranslate=i.startTranslate,o.diff=s.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{i.currentTranslate=i.startTranslate;return}!a.followFinger||a.cssMode||((a.freeMode&&a.freeMode.enabled&&s.freeMode||a.watchSlidesProgress)&&(s.updateActiveIndex(),s.updateSlidesClasses()),a.freeMode&&a.freeMode.enabled&&s.freeMode&&s.freeMode.onTouchMove(),s.updateProgress(i.currentTranslate),s.setTranslate(i.currentTranslate))}function pQ(r){const t=this,s=t.touchEventsData;let i=r;i.originalEvent&&(i=i.originalEvent);let a;if(i.type==="touchend"||i.type==="touchcancel"){if(a=[...i.changedTouches].find(B=>B.identifier===s.touchId),!a||a.identifier!==s.touchId)return}else{if(s.touchId!==null||i.pointerId!==s.pointerId)return;a=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(t.browser.isSafari||t.browser.isWebView)))return;s.pointerId=null,s.touchId=null;const{params:c,touches:l,rtlTranslate:u,slidesGrid:d,enabled:A}=t;if(!A||!c.simulateTouch&&i.pointerType==="mouse")return;if(s.allowTouchCallbacks&&t.emit("touchEnd",i),s.allowTouchCallbacks=!1,!s.isTouched){s.isMoved&&c.grabCursor&&t.setGrabCursor(!1),s.isMoved=!1,s.startMoving=!1;return}c.grabCursor&&s.isMoved&&s.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const f=g0(),p=f-s.touchStartTime;if(t.allowClick){const B=i.path||i.composedPath&&i.composedPath();t.updateClickedSlide(B&&B[0]||i.target,B),t.emit("tap click",i),p<300&&f-s.lastClickTime<300&&t.emit("doubleTap doubleClick",i)}if(s.lastClickTime=g0(),r_(()=>{t.destroyed||(t.allowClick=!0)}),!s.isTouched||!s.isMoved||!t.swipeDirection||l.diff===0&&!s.loopSwapReset||s.currentTranslate===s.startTranslate&&!s.loopSwapReset){s.isTouched=!1,s.isMoved=!1,s.startMoving=!1;return}s.isTouched=!1,s.isMoved=!1,s.startMoving=!1;let m;if(c.followFinger?m=u?t.translate:-t.translate:m=-s.currentTranslate,c.cssMode)return;if(c.freeMode&&c.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:m});return}const g=m>=-t.maxTranslate()&&!t.params.loop;let b=0,v=t.slidesSizesGrid[0];for(let B=0;B<d.length;B+=B<c.slidesPerGroupSkip?1:c.slidesPerGroup){const E=B<c.slidesPerGroupSkip-1?1:c.slidesPerGroup;typeof d[B+E]<"u"?(g||m>=d[B]&&m<d[B+E])&&(b=B,v=d[B+E]-d[B]):(g||m>=d[B])&&(b=B,v=d[d.length-1]-d[d.length-2])}let y=null,w=null;c.rewind&&(t.isBeginning?w=c.virtual&&c.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(y=0));const j=(m-d[b])/v,C=b<c.slidesPerGroupSkip-1?1:c.slidesPerGroup;if(p>c.longSwipesMs){if(!c.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(j>=c.longSwipesRatio?t.slideTo(c.rewind&&t.isEnd?y:b+C):t.slideTo(b)),t.swipeDirection==="prev"&&(j>1-c.longSwipesRatio?t.slideTo(b+C):w!==null&&j<0&&Math.abs(j)>c.longSwipesRatio?t.slideTo(w):t.slideTo(b))}else{if(!c.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(i.target===t.navigation.nextEl||i.target===t.navigation.prevEl)?i.target===t.navigation.nextEl?t.slideTo(b+C):t.slideTo(b):(t.swipeDirection==="next"&&t.slideTo(y!==null?y:b+C),t.swipeDirection==="prev"&&t.slideTo(w!==null?w:b))}}function b5(){const r=this,{params:t,el:s}=r;if(s&&s.offsetWidth===0)return;t.breakpoints&&r.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:a,snapGrid:o}=r,c=r.virtual&&r.params.virtual.enabled;r.allowSlideNext=!0,r.allowSlidePrev=!0,r.updateSize(),r.updateSlides(),r.updateSlidesClasses();const l=c&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&r.isEnd&&!r.isBeginning&&!r.params.centeredSlides&&!l?r.slideTo(r.slides.length-1,0,!1,!0):r.params.loop&&!c?r.slideToLoop(r.realIndex,0,!1,!0):r.slideTo(r.activeIndex,0,!1,!0),r.autoplay&&r.autoplay.running&&r.autoplay.paused&&(clearTimeout(r.autoplay.resizeTimeout),r.autoplay.resizeTimeout=setTimeout(()=>{r.autoplay&&r.autoplay.running&&r.autoplay.paused&&r.autoplay.resume()},500)),r.allowSlidePrev=a,r.allowSlideNext=i,r.params.watchOverflow&&o!==r.snapGrid&&r.checkOverflow()}function mQ(r){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&r.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(r.stopPropagation(),r.stopImmediatePropagation())))}function gQ(){const r=this,{wrapperEl:t,rtlTranslate:s,enabled:i}=r;if(!i)return;r.previousTranslate=r.translate,r.isHorizontal()?r.translate=-t.scrollLeft:r.translate=-t.scrollTop,r.translate===0&&(r.translate=0),r.updateActiveIndex(),r.updateSlidesClasses();let a;const o=r.maxTranslate()-r.minTranslate();o===0?a=0:a=(r.translate-r.minTranslate())/o,a!==r.progress&&r.updateProgress(s?-r.translate:r.translate),r.emit("setTranslate",r.translate,!1)}function yQ(r){const t=this;Qg(t,r.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function xQ(){const r=this;r.documentTouchHandlerProceeded||(r.documentTouchHandlerProceeded=!0,r.params.touchReleaseOnEdges&&(r.el.style.touchAction="auto"))}const c_=(r,t)=>{const s=Zl(),{params:i,el:a,wrapperEl:o,device:c}=r,l=!!i.nested,u=t==="on"?"addEventListener":"removeEventListener",d=t;!a||typeof a=="string"||(s[u]("touchstart",r.onDocumentTouchStart,{passive:!1,capture:l}),a[u]("touchstart",r.onTouchStart,{passive:!1}),a[u]("pointerdown",r.onTouchStart,{passive:!1}),s[u]("touchmove",r.onTouchMove,{passive:!1,capture:l}),s[u]("pointermove",r.onTouchMove,{passive:!1,capture:l}),s[u]("touchend",r.onTouchEnd,{passive:!0}),s[u]("pointerup",r.onTouchEnd,{passive:!0}),s[u]("pointercancel",r.onTouchEnd,{passive:!0}),s[u]("touchcancel",r.onTouchEnd,{passive:!0}),s[u]("pointerout",r.onTouchEnd,{passive:!0}),s[u]("pointerleave",r.onTouchEnd,{passive:!0}),s[u]("contextmenu",r.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&a[u]("click",r.onClick,!0),i.cssMode&&o[u]("scroll",r.onScroll),i.updateOnWindowResize?r[d](c.ios||c.android?"resize orientationchange observerUpdate":"resize observerUpdate",b5,!0):r[d]("observerUpdate",b5,!0),a[u]("load",r.onLoad,{capture:!0}))};function bQ(){const r=this,{params:t}=r;r.onTouchStart=hQ.bind(r),r.onTouchMove=fQ.bind(r),r.onTouchEnd=pQ.bind(r),r.onDocumentTouchStart=xQ.bind(r),t.cssMode&&(r.onScroll=gQ.bind(r)),r.onClick=mQ.bind(r),r.onLoad=yQ.bind(r),c_(r,"on")}function vQ(){c_(this,"off")}var wQ={attachEvents:bQ,detachEvents:vQ};const v5=(r,t)=>r.grid&&t.grid&&t.grid.rows>1;function jQ(){const r=this,{realIndex:t,initialized:s,params:i,el:a}=r,o=i.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const c=Zl(),l=i.breakpointsBase==="window"||!i.breakpointsBase?i.breakpointsBase:"container",u=["window","container"].includes(i.breakpointsBase)||!i.breakpointsBase?r.el:c.querySelector(i.breakpointsBase),d=r.getBreakpoint(o,l,u);if(!d||r.currentBreakpoint===d)return;const f=(d in o?o[d]:void 0)||r.originalParams,p=v5(r,i),m=v5(r,f),g=r.params.grabCursor,b=f.grabCursor,v=i.enabled;p&&!m?(a.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),r.emitContainerClasses()):!p&&m&&(a.classList.add(`${i.containerModifierClass}grid`),(f.grid.fill&&f.grid.fill==="column"||!f.grid.fill&&i.grid.fill==="column")&&a.classList.add(`${i.containerModifierClass}grid-column`),r.emitContainerClasses()),g&&!b?r.unsetGrabCursor():!g&&b&&r.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(E=>{if(typeof f[E]>"u")return;const _=i[E]&&i[E].enabled,S=f[E]&&f[E].enabled;_&&!S&&r[E].disable(),!_&&S&&r[E].enable()});const y=f.direction&&f.direction!==i.direction,w=i.loop&&(f.slidesPerView!==i.slidesPerView||y),j=i.loop;y&&s&&r.changeDirection(),uo(r.params,f);const C=r.params.enabled,B=r.params.loop;Object.assign(r,{allowTouchMove:r.params.allowTouchMove,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev}),v&&!C?r.disable():!v&&C&&r.enable(),r.currentBreakpoint=d,r.emit("_beforeBreakpoint",f),s&&(w?(r.loopDestroy(),r.loopCreate(t),r.updateSlides()):!j&&B?(r.loopCreate(t),r.updateSlides()):j&&!B&&r.loopDestroy()),r.emit("breakpoint",f)}function NQ(r,t,s){if(t===void 0&&(t="window"),!r||t==="container"&&!s)return;let i=!1;const a=Da(),o=t==="window"?a.innerHeight:s.clientHeight,c=Object.keys(r).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const u=parseFloat(l.substr(1));return{value:o*u,point:l}}return{value:l,point:l}});c.sort((l,u)=>parseInt(l.value,10)-parseInt(u.value,10));for(let l=0;l<c.length;l+=1){const{point:u,value:d}=c[l];t==="window"?a.matchMedia(`(min-width: ${d}px)`).matches&&(i=u):d<=s.clientWidth&&(i=u)}return i||"max"}var SQ={setBreakpoint:jQ,getBreakpoint:NQ};function CQ(r,t){const s=[];return r.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(a=>{i[a]&&s.push(t+a)}):typeof i=="string"&&s.push(t+i)}),s}function BQ(){const r=this,{classNames:t,params:s,rtl:i,el:a,device:o}=r,c=CQ(["initialized",s.direction,{"free-mode":r.params.freeMode&&s.freeMode.enabled},{autoheight:s.autoHeight},{rtl:i},{grid:s.grid&&s.grid.rows>1},{"grid-column":s.grid&&s.grid.rows>1&&s.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":s.cssMode},{centered:s.cssMode&&s.centeredSlides},{"watch-progress":s.watchSlidesProgress}],s.containerModifierClass);t.push(...c),a.classList.add(...t),r.emitContainerClasses()}function kQ(){const r=this,{el:t,classNames:s}=r;!t||typeof t=="string"||(t.classList.remove(...s),r.emitContainerClasses())}var _Q={addClasses:BQ,removeClasses:kQ};function EQ(){const r=this,{isLocked:t,params:s}=r,{slidesOffsetBefore:i}=s;if(i){const a=r.slides.length-1,o=r.slidesGrid[a]+r.slidesSizesGrid[a]+i*2;r.isLocked=r.size>o}else r.isLocked=r.snapGrid.length===1;s.allowSlideNext===!0&&(r.allowSlideNext=!r.isLocked),s.allowSlidePrev===!0&&(r.allowSlidePrev=!r.isLocked),t&&t!==r.isLocked&&(r.isEnd=!1),t!==r.isLocked&&r.emit(r.isLocked?"lock":"unlock")}var OQ={checkOverflow:EQ},qv={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function IQ(r,t){return function(i){i===void 0&&(i={});const a=Object.keys(i)[0],o=i[a];if(typeof o!="object"||o===null){uo(t,i);return}if(r[a]===!0&&(r[a]={enabled:!0}),a==="navigation"&&r[a]&&r[a].enabled&&!r[a].prevEl&&!r[a].nextEl&&(r[a].auto=!0),["pagination","scrollbar"].indexOf(a)>=0&&r[a]&&r[a].enabled&&!r[a].el&&(r[a].auto=!0),!(a in r&&"enabled"in o)){uo(t,i);return}typeof r[a]=="object"&&!("enabled"in r[a])&&(r[a].enabled=!0),r[a]||(r[a]={enabled:!1}),uo(t,i)}}const Jx={eventsEmitter:_7,update:R7,translate:K7,transition:Y7,slide:sQ,loop:lQ,grabCursor:dQ,events:wQ,breakpoints:SQ,checkOverflow:OQ,classes:_Q},Zx={};let G1=class _c{constructor(){let t,s;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.length===1&&a[0].constructor&&Object.prototype.toString.call(a[0]).slice(8,-1)==="Object"?s=a[0]:[t,s]=a,s||(s={}),s=uo({},s),t&&!s.el&&(s.el=t);const c=Zl();if(s.el&&typeof s.el=="string"&&c.querySelectorAll(s.el).length>1){const A=[];return c.querySelectorAll(s.el).forEach(f=>{const p=uo({},s,{el:f});A.push(new _c(p))}),A}const l=this;l.__swiper__=!0,l.support=i_(),l.device=a_({userAgent:s.userAgent}),l.browser=o_(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=[...l.__modules__],s.modules&&Array.isArray(s.modules)&&l.modules.push(...s.modules);const u={};l.modules.forEach(A=>{A({params:s,swiper:l,extendParams:IQ(s,u),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})});const d=uo({},qv,u);return l.params=uo({},d,Zx,s),l.originalParams=uo({},l.params),l.passedParams=uo({},s),l.params&&l.params.on&&Object.keys(l.params.on).forEach(A=>{l.on(A,l.params.on[A])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),Object.assign(l,{enabled:l.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return l.params.direction==="horizontal"},isVertical(){return l.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:s,params:i}=this,a=Kl(s,`.${i.slideClass}, swiper-slide`),o=b0(a[0]);return b0(t)-o}getSlideIndexByData(t){return this.getSlideIndex(this.slides.find(s=>s.getAttribute("data-swiper-slide-index")*1===t))}getSlideIndexWhenGrid(t){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?t=Math.floor(t/this.params.grid.rows):this.params.grid.fill==="row"&&(t=t%Math.ceil(this.slides.length/this.params.grid.rows))),t}recalcSlides(){const t=this,{slidesEl:s,params:i}=t;t.slides=Kl(s,`.${i.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,s){const i=this;t=Math.min(Math.max(t,0),1);const a=i.minTranslate(),c=(i.maxTranslate()-a)*t+a;i.translateTo(c,typeof s>"u"?0:s),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const s=t.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",s.join(" "))}getSlideClasses(t){const s=this;return s.destroyed?"":t.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(s.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const s=[];t.slides.forEach(i=>{const a=t.getSlideClasses(i);s.push({slideEl:i,classNames:a}),t.emit("_slideClass",i,a)}),t.emit("_slideClasses",s)}slidesPerViewDynamic(t,s){t===void 0&&(t="current"),s===void 0&&(s=!1);const i=this,{params:a,slides:o,slidesGrid:c,slidesSizesGrid:l,size:u,activeIndex:d}=i;let A=1;if(typeof a.slidesPerView=="number")return a.slidesPerView;if(a.centeredSlides){let f=o[d]?Math.ceil(o[d].swiperSlideSize):0,p;for(let m=d+1;m<o.length;m+=1)o[m]&&!p&&(f+=Math.ceil(o[m].swiperSlideSize),A+=1,f>u&&(p=!0));for(let m=d-1;m>=0;m-=1)o[m]&&!p&&(f+=o[m].swiperSlideSize,A+=1,f>u&&(p=!0))}else if(t==="current")for(let f=d+1;f<o.length;f+=1)(s?c[f]+l[f]-c[d]<u:c[f]-c[d]<u)&&(A+=1);else for(let f=d-1;f>=0;f-=1)c[d]-c[f]<u&&(A+=1);return A}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:s,params:i}=t;i.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(c=>{c.complete&&Qg(t,c)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function a(){const c=t.rtlTranslate?t.translate*-1:t.translate,l=Math.min(Math.max(c,t.maxTranslate()),t.minTranslate());t.setTranslate(l),t.updateActiveIndex(),t.updateSlidesClasses()}let o;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)a(),i.autoHeight&&t.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&t.isEnd&&!i.centeredSlides){const c=t.virtual&&i.virtual.enabled?t.virtual.slides:t.slides;o=t.slideTo(c.length-1,0,!1,!0)}else o=t.slideTo(t.activeIndex,0,!1,!0);o||a()}i.watchOverflow&&s!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,s){s===void 0&&(s=!0);const i=this,a=i.params.direction;return t||(t=a==="horizontal"?"vertical":"horizontal"),t===a||t!=="horizontal"&&t!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${a}`),i.el.classList.add(`${i.params.containerModifierClass}${t}`),i.emitContainerClasses(),i.params.direction=t,i.slides.forEach(o=>{t==="vertical"?o.style.width="":o.style.height=""}),i.emit("changeDirection"),s&&i.update()),i}changeLanguageDirection(t){const s=this;s.rtl&&t==="rtl"||!s.rtl&&t==="ltr"||(s.rtl=t==="rtl",s.rtlTranslate=s.params.direction==="horizontal"&&s.rtl,s.rtl?(s.el.classList.add(`${s.params.containerModifierClass}rtl`),s.el.dir="rtl"):(s.el.classList.remove(`${s.params.containerModifierClass}rtl`),s.el.dir="ltr"),s.update())}mount(t){const s=this;if(s.mounted)return!0;let i=t||s.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=s,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===s.params.swiperElementNodeName.toUpperCase()&&(s.isElement=!0);const a=()=>`.${(s.params.wrapperClass||"").trim().split(" ").join(".")}`;let c=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(a()):Kl(i,a())[0];return!c&&s.params.createElements&&(c=x0("div",s.params.wrapperClass),i.append(c),Kl(i,`.${s.params.slideClass}`).forEach(l=>{c.append(l)})),Object.assign(s,{el:i,wrapperEl:c,slidesEl:s.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:c,hostEl:s.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Iu(i,"direction")==="rtl",rtlTranslate:s.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Iu(i,"direction")==="rtl"),wrongRTL:Iu(c,"display")==="-webkit-box"}),!0}init(t){const s=this;if(s.initialized||s.mount(t)===!1)return s;s.emit("beforeInit"),s.params.breakpoints&&s.setBreakpoint(),s.addClasses(),s.updateSize(),s.updateSlides(),s.params.watchOverflow&&s.checkOverflow(),s.params.grabCursor&&s.enabled&&s.setGrabCursor(),s.params.loop&&s.virtual&&s.params.virtual.enabled?s.slideTo(s.params.initialSlide+s.virtual.slidesBefore,0,s.params.runCallbacksOnInit,!1,!0):s.slideTo(s.params.initialSlide,0,s.params.runCallbacksOnInit,!1,!0),s.params.loop&&s.loopCreate(void 0,!0),s.attachEvents();const a=[...s.el.querySelectorAll('[loading="lazy"]')];return s.isElement&&a.push(...s.hostEl.querySelectorAll('[loading="lazy"]')),a.forEach(o=>{o.complete?Qg(s,o):o.addEventListener("load",c=>{Qg(s,c.target)})}),Wv(s),s.initialized=!0,Wv(s),s.emit("init"),s.emit("afterInit"),s}destroy(t,s){t===void 0&&(t=!0),s===void 0&&(s=!0);const i=this,{params:a,el:o,wrapperEl:c,slides:l}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),a.loop&&i.loopDestroy(),s&&(i.removeClasses(),o&&typeof o!="string"&&o.removeAttribute("style"),c&&c.removeAttribute("style"),l&&l.length&&l.forEach(u=>{u.classList.remove(a.slideVisibleClass,a.slideFullyVisibleClass,a.slideActiveClass,a.slideNextClass,a.slidePrevClass),u.removeAttribute("style"),u.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(u=>{i.off(u)}),t!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),m7(i)),i.destroyed=!0),null}static extendDefaults(t){uo(Zx,t)}static get extendedDefaults(){return Zx}static get defaults(){return qv}static installModule(t){_c.prototype.__modules__||(_c.prototype.__modules__=[]);const s=_c.prototype.__modules__;typeof t=="function"&&s.indexOf(t)<0&&s.push(t)}static use(t){return Array.isArray(t)?(t.forEach(s=>_c.installModule(s)),_c):(_c.installModule(t),_c)}};Object.keys(Jx).forEach(r=>{Object.keys(Jx[r]).forEach(t=>{G1.prototype[t]=Jx[r][t]})});G1.use([B7,k7]);const u_=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function nA(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"&&!r.__swiper__}function mh(r,t){const s=["__proto__","constructor","prototype"];Object.keys(t).filter(i=>s.indexOf(i)<0).forEach(i=>{typeof r[i]>"u"?r[i]=t[i]:nA(t[i])&&nA(r[i])&&Object.keys(t[i]).length>0?t[i].__swiper__?r[i]=t[i]:mh(r[i],t[i]):r[i]=t[i]})}function d_(r){return r===void 0&&(r={}),r.navigation&&typeof r.navigation.nextEl>"u"&&typeof r.navigation.prevEl>"u"}function A_(r){return r===void 0&&(r={}),r.pagination&&typeof r.pagination.el>"u"}function h_(r){return r===void 0&&(r={}),r.scrollbar&&typeof r.scrollbar.el>"u"}function f_(r){r===void 0&&(r="");const t=r.split(" ").map(i=>i.trim()).filter(i=>!!i),s=[];return t.forEach(i=>{s.indexOf(i)<0&&s.push(i)}),s.join(" ")}function PQ(r){return r===void 0&&(r=""),r?r.includes("swiper-wrapper")?r:`swiper-wrapper ${r}`:"swiper-wrapper"}function TQ(r){let{swiper:t,slides:s,passedParams:i,changedParams:a,nextEl:o,prevEl:c,scrollbarEl:l,paginationEl:u}=r;const d=a.filter(N=>N!=="children"&&N!=="direction"&&N!=="wrapperClass"),{params:A,pagination:f,navigation:p,scrollbar:m,virtual:g,thumbs:b}=t;let v,y,w,j,C,B,E,_;a.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&!i.thumbs.swiper.destroyed&&A.thumbs&&(!A.thumbs.swiper||A.thumbs.swiper.destroyed)&&(v=!0),a.includes("controller")&&i.controller&&i.controller.control&&A.controller&&!A.controller.control&&(y=!0),a.includes("pagination")&&i.pagination&&(i.pagination.el||u)&&(A.pagination||A.pagination===!1)&&f&&!f.el&&(w=!0),a.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||l)&&(A.scrollbar||A.scrollbar===!1)&&m&&!m.el&&(j=!0),a.includes("navigation")&&i.navigation&&(i.navigation.prevEl||c)&&(i.navigation.nextEl||o)&&(A.navigation||A.navigation===!1)&&p&&!p.prevEl&&!p.nextEl&&(C=!0);const S=N=>{t[N]&&(t[N].destroy(),N==="navigation"?(t.isElement&&(t[N].prevEl.remove(),t[N].nextEl.remove()),A[N].prevEl=void 0,A[N].nextEl=void 0,t[N].prevEl=void 0,t[N].nextEl=void 0):(t.isElement&&t[N].el.remove(),A[N].el=void 0,t[N].el=void 0))};a.includes("loop")&&t.isElement&&(A.loop&&!i.loop?B=!0:!A.loop&&i.loop?E=!0:_=!0),d.forEach(N=>{if(nA(A[N])&&nA(i[N]))Object.assign(A[N],i[N]),(N==="navigation"||N==="pagination"||N==="scrollbar")&&"enabled"in i[N]&&!i[N].enabled&&S(N);else{const O=i[N];(O===!0||O===!1)&&(N==="navigation"||N==="pagination"||N==="scrollbar")?O===!1&&S(N):A[N]=i[N]}}),d.includes("controller")&&!y&&t.controller&&t.controller.control&&A.controller&&A.controller.control&&(t.controller.control=A.controller.control),a.includes("children")&&s&&g&&A.virtual.enabled?(g.slides=s,g.update(!0)):a.includes("virtual")&&g&&A.virtual.enabled&&(s&&(g.slides=s),g.update(!0)),a.includes("children")&&s&&A.loop&&(_=!0),v&&b.init()&&b.update(!0),y&&(t.controller.control=A.controller.control),w&&(t.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-pagination"),u.part.add("pagination"),t.el.appendChild(u)),u&&(A.pagination.el=u),f.init(),f.render(),f.update()),j&&(t.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-scrollbar"),l.part.add("scrollbar"),t.el.appendChild(l)),l&&(A.scrollbar.el=l),m.init(),m.updateSize(),m.setTranslate()),C&&(t.isElement&&((!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-next"),v0(o,t.hostEl.constructor.nextButtonSvg),o.part.add("button-next"),t.el.appendChild(o)),(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-button-prev"),v0(c,t.hostEl.constructor.prevButtonSvg),c.part.add("button-prev"),t.el.appendChild(c))),o&&(A.navigation.nextEl=o),c&&(A.navigation.prevEl=c),p.init(),p.update()),a.includes("allowSlideNext")&&(t.allowSlideNext=i.allowSlideNext),a.includes("allowSlidePrev")&&(t.allowSlidePrev=i.allowSlidePrev),a.includes("direction")&&t.changeDirection(i.direction,!1),(B||_)&&t.loopDestroy(),(E||_)&&t.loopCreate(),t.update()}function FQ(r,t){r===void 0&&(r={}),t===void 0&&(t=!0);const s={on:{}},i={},a={};mh(s,qv),s._emitClasses=!0,s.init=!1;const o={},c=u_.map(u=>u.replace(/_/,"")),l=Object.assign({},r);return Object.keys(l).forEach(u=>{typeof r[u]>"u"||(c.indexOf(u)>=0?nA(r[u])?(s[u]={},a[u]={},mh(s[u],r[u]),mh(a[u],r[u])):(s[u]=r[u],a[u]=r[u]):u.search(/on[A-Z]/)===0&&typeof r[u]=="function"?t?i[`${u[2].toLowerCase()}${u.substr(3)}`]=r[u]:s.on[`${u[2].toLowerCase()}${u.substr(3)}`]=r[u]:o[u]=r[u])}),["navigation","pagination","scrollbar"].forEach(u=>{s[u]===!0&&(s[u]={}),s[u]===!1&&delete s[u]}),{params:s,passedParams:a,rest:o,events:i}}function UQ(r,t){let{el:s,nextEl:i,prevEl:a,paginationEl:o,scrollbarEl:c,swiper:l}=r;d_(t)&&i&&a&&(l.params.navigation.nextEl=i,l.originalParams.navigation.nextEl=i,l.params.navigation.prevEl=a,l.originalParams.navigation.prevEl=a),A_(t)&&o&&(l.params.pagination.el=o,l.originalParams.pagination.el=o),h_(t)&&c&&(l.params.scrollbar.el=c,l.originalParams.scrollbar.el=c),l.init(s)}function LQ(r,t,s,i,a){const o=[];if(!t)return o;const c=u=>{o.indexOf(u)<0&&o.push(u)};if(s&&i){const u=i.map(a),d=s.map(a);u.join("")!==d.join("")&&c("children"),i.length!==s.length&&c("children")}return u_.filter(u=>u[0]==="_").map(u=>u.replace(/_/,"")).forEach(u=>{if(u in r&&u in t)if(nA(r[u])&&nA(t[u])){const d=Object.keys(r[u]),A=Object.keys(t[u]);d.length!==A.length?c(u):(d.forEach(f=>{r[u][f]!==t[u][f]&&c(u)}),A.forEach(f=>{r[u][f]!==t[u][f]&&c(u)}))}else r[u]!==t[u]&&c(u)}),o}const DQ=r=>{!r||r.destroyed||!r.params.virtual||r.params.virtual&&!r.params.virtual.enabled||(r.updateSlides(),r.updateProgress(),r.updateSlidesClasses(),r.emit("_virtualUpdated"),r.parallax&&r.params.parallax&&r.params.parallax.enabled&&r.parallax.setTranslate())};function w0(){return w0=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},w0.apply(this,arguments)}function p_(r){return r.type&&r.type.displayName&&r.type.displayName.includes("SwiperSlide")}function m_(r){const t=[];return Ft.Children.toArray(r).forEach(s=>{p_(s)?t.push(s):s.props&&s.props.children&&m_(s.props.children).forEach(i=>t.push(i))}),t}function MQ(r){const t=[],s={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Ft.Children.toArray(r).forEach(i=>{if(p_(i))t.push(i);else if(i.props&&i.props.slot&&s[i.props.slot])s[i.props.slot].push(i);else if(i.props&&i.props.children){const a=m_(i.props.children);a.length>0?a.forEach(o=>t.push(o)):s["container-end"].push(i)}else s["container-end"].push(i)}),{slides:t,slots:s}}function RQ(r,t,s){if(!s)return null;const i=A=>{let f=A;return A<0?f=t.length+A:f>=t.length&&(f=f-t.length),f},a=r.isHorizontal()?{[r.rtlTranslate?"right":"left"]:`${s.offset}px`}:{top:`${s.offset}px`},{from:o,to:c}=s,l=r.params.loop?-t.length:0,u=r.params.loop?t.length*2:t.length,d=[];for(let A=l;A<u;A+=1)A>=o&&A<=c&&d.push(t[i(A)]);return d.map((A,f)=>Ft.cloneElement(A,{swiper:r,style:a,key:A.props.virtualIndex||A.key||`slide-${f}`}))}function Xf(r,t){return typeof window>"u"?ee.useEffect(r,t):ee.useLayoutEffect(r,t)}const w5=ee.createContext(null),QQ=ee.createContext(null),Yv=ee.forwardRef(function(r,t){let{className:s,tag:i="div",wrapperTag:a="div",children:o,onSwiper:c,...l}=r===void 0?{}:r,u=!1;const[d,A]=ee.useState("swiper"),[f,p]=ee.useState(null),[m,g]=ee.useState(!1),b=ee.useRef(!1),v=ee.useRef(null),y=ee.useRef(null),w=ee.useRef(null),j=ee.useRef(null),C=ee.useRef(null),B=ee.useRef(null),E=ee.useRef(null),_=ee.useRef(null),{params:S,passedParams:N,rest:O,events:k}=FQ(l),{slides:I,slots:R}=MQ(o),Q=()=>{g(!m)};Object.assign(S.on,{_containerClasses(X,q){A(q)}});const $=()=>{Object.assign(S.on,k),u=!0;const X={...S};if(delete X.wrapperClass,y.current=new G1(X),y.current.virtual&&y.current.params.virtual.enabled){y.current.virtual.slides=I;const q={cache:!1,slides:I,renderExternal:p,renderExternalUpdate:!1};mh(y.current.params.virtual,q),mh(y.current.originalParams.virtual,q)}};v.current||$(),y.current&&y.current.on("_beforeBreakpoint",Q);const L=()=>{u||!k||!y.current||Object.keys(k).forEach(X=>{y.current.on(X,k[X])})},F=()=>{!k||!y.current||Object.keys(k).forEach(X=>{y.current.off(X,k[X])})};ee.useEffect(()=>()=>{y.current&&y.current.off("_beforeBreakpoint",Q)}),ee.useEffect(()=>{!b.current&&y.current&&(y.current.emitSlidesClasses(),b.current=!0)}),Xf(()=>{if(t&&(t.current=v.current),!!v.current)return y.current.destroyed&&$(),UQ({el:v.current,nextEl:C.current,prevEl:B.current,paginationEl:E.current,scrollbarEl:_.current,swiper:y.current},S),c&&!y.current.destroyed&&c(y.current),()=>{y.current&&!y.current.destroyed&&y.current.destroy(!0,!1)}},[]),Xf(()=>{L();const X=LQ(N,w.current,I,j.current,q=>q.key);return w.current=N,j.current=I,X.length&&y.current&&!y.current.destroyed&&TQ({swiper:y.current,slides:I,passedParams:N,changedParams:X,nextEl:C.current,prevEl:B.current,scrollbarEl:_.current,paginationEl:E.current}),()=>{F()}}),Xf(()=>{DQ(y.current)},[f]);function G(){return S.virtual?RQ(y.current,I,f):I.map((X,q)=>Ft.cloneElement(X,{swiper:y.current,swiperSlideIndex:q}))}return Ft.createElement(i,w0({ref:v,className:f_(`${d}${s?` ${s}`:""}`)},O),Ft.createElement(QQ.Provider,{value:y.current},R["container-start"],Ft.createElement(a,{className:PQ(S.wrapperClass)},R["wrapper-start"],G(),R["wrapper-end"]),d_(S)&&Ft.createElement(Ft.Fragment,null,Ft.createElement("div",{ref:B,className:"swiper-button-prev"}),Ft.createElement("div",{ref:C,className:"swiper-button-next"})),h_(S)&&Ft.createElement("div",{ref:_,className:"swiper-scrollbar"}),A_(S)&&Ft.createElement("div",{ref:E,className:"swiper-pagination"}),R["container-end"]))});Yv.displayName="Swiper";const Xv=ee.forwardRef(function(r,t){let{tag:s="div",children:i,className:a="",swiper:o,zoom:c,lazy:l,virtualIndex:u,swiperSlideIndex:d,...A}=r===void 0?{}:r;const f=ee.useRef(null),[p,m]=ee.useState("swiper-slide"),[g,b]=ee.useState(!1);function v(C,B,E){B===f.current&&m(E)}Xf(()=>{if(typeof d<"u"&&(f.current.swiperSlideIndex=d),t&&(t.current=f.current),!(!f.current||!o)){if(o.destroyed){p!=="swiper-slide"&&m("swiper-slide");return}return o.on("_slideClass",v),()=>{o&&o.off("_slideClass",v)}}}),Xf(()=>{o&&f.current&&!o.destroyed&&m(o.getSlideClasses(f.current))},[o]);const y={isActive:p.indexOf("swiper-slide-active")>=0,isVisible:p.indexOf("swiper-slide-visible")>=0,isPrev:p.indexOf("swiper-slide-prev")>=0,isNext:p.indexOf("swiper-slide-next")>=0},w=()=>typeof i=="function"?i(y):i,j=()=>{b(!0)};return Ft.createElement(s,w0({ref:f,className:f_(`${p}${a?` ${a}`:""}`),"data-swiper-slide-index":u,onLoad:j},A),c&&Ft.createElement(w5.Provider,{value:y},Ft.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof c=="number"?c:void 0},w(),l&&!g&&Ft.createElement("div",{className:"swiper-lazy-preloader"}))),!c&&Ft.createElement(w5.Provider,{value:y},w(),l&&!g&&Ft.createElement("div",{className:"swiper-lazy-preloader"})))});Xv.displayName="SwiperSlide";function g_(r,t,s,i){return r.params.createElements&&Object.keys(i).forEach(a=>{if(!s[a]&&s.auto===!0){let o=Kl(r.el,`.${i[a]}`)[0];o||(o=x0("div",i[a]),o.className=i[a],r.el.append(o)),s[a]=o,t[a]=o}}),s}function j5(r){let{swiper:t,extendParams:s,on:i,emit:a}=r;s({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};function o(g){let b;return g&&typeof g=="string"&&t.isElement&&(b=t.el.querySelector(g)||t.hostEl.querySelector(g),b)?b:(g&&(typeof g=="string"&&(b=[...document.querySelectorAll(g)]),t.params.uniqueNavElements&&typeof g=="string"&&b&&b.length>1&&t.el.querySelectorAll(g).length===1?b=t.el.querySelector(g):b&&b.length===1&&(b=b[0])),g&&!b?g:b)}function c(g,b){const v=t.params.navigation;g=Hi(g),g.forEach(y=>{y&&(y.classList[b?"add":"remove"](...v.disabledClass.split(" ")),y.tagName==="BUTTON"&&(y.disabled=b),t.params.watchOverflow&&t.enabled&&y.classList[t.isLocked?"add":"remove"](v.lockClass))})}function l(){const{nextEl:g,prevEl:b}=t.navigation;if(t.params.loop){c(b,!1),c(g,!1);return}c(b,t.isBeginning&&!t.params.rewind),c(g,t.isEnd&&!t.params.rewind)}function u(g){g.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),a("navigationPrev"))}function d(g){g.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),a("navigationNext"))}function A(){const g=t.params.navigation;if(t.params.navigation=g_(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(g.nextEl||g.prevEl))return;let b=o(g.nextEl),v=o(g.prevEl);Object.assign(t.navigation,{nextEl:b,prevEl:v}),b=Hi(b),v=Hi(v);const y=(w,j)=>{w&&w.addEventListener("click",j==="next"?d:u),!t.enabled&&w&&w.classList.add(...g.lockClass.split(" "))};b.forEach(w=>y(w,"next")),v.forEach(w=>y(w,"prev"))}function f(){let{nextEl:g,prevEl:b}=t.navigation;g=Hi(g),b=Hi(b);const v=(y,w)=>{y.removeEventListener("click",w==="next"?d:u),y.classList.remove(...t.params.navigation.disabledClass.split(" "))};g.forEach(y=>v(y,"next")),b.forEach(y=>v(y,"prev"))}i("init",()=>{t.params.navigation.enabled===!1?m():(A(),l())}),i("toEdge fromEdge lock unlock",()=>{l()}),i("destroy",()=>{f()}),i("enable disable",()=>{let{nextEl:g,prevEl:b}=t.navigation;if(g=Hi(g),b=Hi(b),t.enabled){l();return}[...g,...b].filter(v=>!!v).forEach(v=>v.classList.add(t.params.navigation.lockClass))}),i("click",(g,b)=>{let{nextEl:v,prevEl:y}=t.navigation;v=Hi(v),y=Hi(y);const w=b.target;let j=y.includes(w)||v.includes(w);if(t.isElement&&!j){const C=b.path||b.composedPath&&b.composedPath();C&&(j=C.find(B=>v.includes(B)||y.includes(B)))}if(t.params.navigation.hideOnClick&&!j){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===w||t.pagination.el.contains(w)))return;let C;v.length?C=v[0].classList.contains(t.params.navigation.hiddenClass):y.length&&(C=y[0].classList.contains(t.params.navigation.hiddenClass)),a(C===!0?"navigationShow":"navigationHide"),[...v,...y].filter(B=>!!B).forEach(B=>B.classList.toggle(t.params.navigation.hiddenClass))}});const p=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),A(),l()},m=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),f()};Object.assign(t.navigation,{enable:p,disable:m,update:l,init:A,destroy:f})}function vf(r){return r===void 0&&(r=""),`.${r.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function N5(r){let{swiper:t,extendParams:s,on:i,emit:a}=r;const o="swiper-pagination";s({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:w=>w,formatFractionTotal:w=>w,bulletClass:`${o}-bullet`,bulletActiveClass:`${o}-bullet-active`,modifierClass:`${o}-`,currentClass:`${o}-current`,totalClass:`${o}-total`,hiddenClass:`${o}-hidden`,progressbarFillClass:`${o}-progressbar-fill`,progressbarOppositeClass:`${o}-progressbar-opposite`,clickableClass:`${o}-clickable`,lockClass:`${o}-lock`,horizontalClass:`${o}-horizontal`,verticalClass:`${o}-vertical`,paginationDisabledClass:`${o}-disabled`}}),t.pagination={el:null,bullets:[]};let c,l=0;function u(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function d(w,j){const{bulletActiveClass:C}=t.params.pagination;w&&(w=w[`${j==="prev"?"previous":"next"}ElementSibling`],w&&(w.classList.add(`${C}-${j}`),w=w[`${j==="prev"?"previous":"next"}ElementSibling`],w&&w.classList.add(`${C}-${j}-${j}`)))}function A(w,j,C){if(w=w%C,j=j%C,j===w+1)return"next";if(j===w-1)return"previous"}function f(w){const j=w.target.closest(vf(t.params.pagination.bulletClass));if(!j)return;w.preventDefault();const C=b0(j)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===C)return;const B=A(t.realIndex,C,t.slides.length);B==="next"?t.slideNext():B==="previous"?t.slidePrev():t.slideToLoop(C)}else t.slideTo(C)}function p(){const w=t.rtl,j=t.params.pagination;if(u())return;let C=t.pagination.el;C=Hi(C);let B,E;const _=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,S=t.params.loop?Math.ceil(_/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(E=t.previousRealIndex||0,B=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(B=t.snapIndex,E=t.previousSnapIndex):(E=t.previousIndex||0,B=t.activeIndex||0),j.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const N=t.pagination.bullets;let O,k,I;if(j.dynamicBullets&&(c=Gv(N[0],t.isHorizontal()?"width":"height"),C.forEach(R=>{R.style[t.isHorizontal()?"width":"height"]=`${c*(j.dynamicMainBullets+4)}px`}),j.dynamicMainBullets>1&&E!==void 0&&(l+=B-(E||0),l>j.dynamicMainBullets-1?l=j.dynamicMainBullets-1:l<0&&(l=0)),O=Math.max(B-l,0),k=O+(Math.min(N.length,j.dynamicMainBullets)-1),I=(k+O)/2),N.forEach(R=>{const Q=[...["","-next","-next-next","-prev","-prev-prev","-main"].map($=>`${j.bulletActiveClass}${$}`)].map($=>typeof $=="string"&&$.includes(" ")?$.split(" "):$).flat();R.classList.remove(...Q)}),C.length>1)N.forEach(R=>{const Q=b0(R);Q===B?R.classList.add(...j.bulletActiveClass.split(" ")):t.isElement&&R.setAttribute("part","bullet"),j.dynamicBullets&&(Q>=O&&Q<=k&&R.classList.add(...`${j.bulletActiveClass}-main`.split(" ")),Q===O&&d(R,"prev"),Q===k&&d(R,"next"))});else{const R=N[B];if(R&&R.classList.add(...j.bulletActiveClass.split(" ")),t.isElement&&N.forEach((Q,$)=>{Q.setAttribute("part",$===B?"bullet-active":"bullet")}),j.dynamicBullets){const Q=N[O],$=N[k];for(let L=O;L<=k;L+=1)N[L]&&N[L].classList.add(...`${j.bulletActiveClass}-main`.split(" "));d(Q,"prev"),d($,"next")}}if(j.dynamicBullets){const R=Math.min(N.length,j.dynamicMainBullets+4),Q=(c*R-c)/2-I*c,$=w?"right":"left";N.forEach(L=>{L.style[t.isHorizontal()?$:"top"]=`${Q}px`})}}C.forEach((N,O)=>{if(j.type==="fraction"&&(N.querySelectorAll(vf(j.currentClass)).forEach(k=>{k.textContent=j.formatFractionCurrent(B+1)}),N.querySelectorAll(vf(j.totalClass)).forEach(k=>{k.textContent=j.formatFractionTotal(S)})),j.type==="progressbar"){let k;j.progressbarOpposite?k=t.isHorizontal()?"vertical":"horizontal":k=t.isHorizontal()?"horizontal":"vertical";const I=(B+1)/S;let R=1,Q=1;k==="horizontal"?R=I:Q=I,N.querySelectorAll(vf(j.progressbarFillClass)).forEach($=>{$.style.transform=`translate3d(0,0,0) scaleX(${R}) scaleY(${Q})`,$.style.transitionDuration=`${t.params.speed}ms`})}j.type==="custom"&&j.renderCustom?(v0(N,j.renderCustom(t,B+1,S)),O===0&&a("paginationRender",N)):(O===0&&a("paginationRender",N),a("paginationUpdate",N)),t.params.watchOverflow&&t.enabled&&N.classList[t.isLocked?"add":"remove"](j.lockClass)})}function m(){const w=t.params.pagination;if(u())return;const j=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let C=t.pagination.el;C=Hi(C);let B="";if(w.type==="bullets"){let E=t.params.loop?Math.ceil(j/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&E>j&&(E=j);for(let _=0;_<E;_+=1)w.renderBullet?B+=w.renderBullet.call(t,_,w.bulletClass):B+=`<${w.bulletElement} ${t.isElement?'part="bullet"':""} class="${w.bulletClass}"></${w.bulletElement}>`}w.type==="fraction"&&(w.renderFraction?B=w.renderFraction.call(t,w.currentClass,w.totalClass):B=`<span class="${w.currentClass}"></span> / <span class="${w.totalClass}"></span>`),w.type==="progressbar"&&(w.renderProgressbar?B=w.renderProgressbar.call(t,w.progressbarFillClass):B=`<span class="${w.progressbarFillClass}"></span>`),t.pagination.bullets=[],C.forEach(E=>{w.type!=="custom"&&v0(E,B||""),w.type==="bullets"&&t.pagination.bullets.push(...E.querySelectorAll(vf(w.bulletClass)))}),w.type!=="custom"&&a("paginationRender",C[0])}function g(){t.params.pagination=g_(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const w=t.params.pagination;if(!w.el)return;let j;typeof w.el=="string"&&t.isElement&&(j=t.el.querySelector(w.el)),!j&&typeof w.el=="string"&&(j=[...document.querySelectorAll(w.el)]),j||(j=w.el),!(!j||j.length===0)&&(t.params.uniqueNavElements&&typeof w.el=="string"&&Array.isArray(j)&&j.length>1&&(j=[...t.el.querySelectorAll(w.el)],j.length>1&&(j=j.find(C=>s_(C,".swiper")[0]===t.el))),Array.isArray(j)&&j.length===1&&(j=j[0]),Object.assign(t.pagination,{el:j}),j=Hi(j),j.forEach(C=>{w.type==="bullets"&&w.clickable&&C.classList.add(...(w.clickableClass||"").split(" ")),C.classList.add(w.modifierClass+w.type),C.classList.add(t.isHorizontal()?w.horizontalClass:w.verticalClass),w.type==="bullets"&&w.dynamicBullets&&(C.classList.add(`${w.modifierClass}${w.type}-dynamic`),l=0,w.dynamicMainBullets<1&&(w.dynamicMainBullets=1)),w.type==="progressbar"&&w.progressbarOpposite&&C.classList.add(w.progressbarOppositeClass),w.clickable&&C.addEventListener("click",f),t.enabled||C.classList.add(w.lockClass)}))}function b(){const w=t.params.pagination;if(u())return;let j=t.pagination.el;j&&(j=Hi(j),j.forEach(C=>{C.classList.remove(w.hiddenClass),C.classList.remove(w.modifierClass+w.type),C.classList.remove(t.isHorizontal()?w.horizontalClass:w.verticalClass),w.clickable&&(C.classList.remove(...(w.clickableClass||"").split(" ")),C.removeEventListener("click",f))})),t.pagination.bullets&&t.pagination.bullets.forEach(C=>C.classList.remove(...w.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const w=t.params.pagination;let{el:j}=t.pagination;j=Hi(j),j.forEach(C=>{C.classList.remove(w.horizontalClass,w.verticalClass),C.classList.add(t.isHorizontal()?w.horizontalClass:w.verticalClass)})}),i("init",()=>{t.params.pagination.enabled===!1?y():(g(),m(),p())}),i("activeIndexChange",()=>{typeof t.snapIndex>"u"&&p()}),i("snapIndexChange",()=>{p()}),i("snapGridLengthChange",()=>{m(),p()}),i("destroy",()=>{b()}),i("enable disable",()=>{let{el:w}=t.pagination;w&&(w=Hi(w),w.forEach(j=>j.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),i("lock unlock",()=>{p()}),i("click",(w,j)=>{const C=j.target,B=Hi(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&B&&B.length>0&&!C.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&C===t.navigation.nextEl||t.navigation.prevEl&&C===t.navigation.prevEl))return;const E=B[0].classList.contains(t.params.pagination.hiddenClass);a(E===!0?"paginationShow":"paginationHide"),B.forEach(_=>_.classList.toggle(t.params.pagination.hiddenClass))}});const v=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:w}=t.pagination;w&&(w=Hi(w),w.forEach(j=>j.classList.remove(t.params.pagination.paginationDisabledClass))),g(),m(),p()},y=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:w}=t.pagination;w&&(w=Hi(w),w.forEach(j=>j.classList.add(t.params.pagination.paginationDisabledClass))),b()};Object.assign(t.pagination,{enable:v,disable:y,render:m,update:p,init:g,destroy:b})}function $Q(r){let{swiper:t,extendParams:s,on:i,emit:a,params:o}=r;t.autoplay={running:!1,paused:!1,timeLeft:0},s({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let c,l,u=o&&o.autoplay?o.autoplay.delay:3e3,d=o&&o.autoplay?o.autoplay.delay:3e3,A,f=new Date().getTime(),p,m,g,b,v,y,w;function j(G){!t||t.destroyed||!t.wrapperEl||G.target===t.wrapperEl&&(t.wrapperEl.removeEventListener("transitionend",j),!(w||G.detail&&G.detail.bySwiperTouchMove)&&O())}const C=()=>{if(t.destroyed||!t.autoplay.running)return;t.autoplay.paused?p=!0:p&&(d=A,p=!1);const G=t.autoplay.paused?A:f+d-new Date().getTime();t.autoplay.timeLeft=G,a("autoplayTimeLeft",G,G/u),l=requestAnimationFrame(()=>{C()})},B=()=>{let G;return t.virtual&&t.params.virtual.enabled?G=t.slides.find(q=>q.classList.contains("swiper-slide-active")):G=t.slides[t.activeIndex],G?parseInt(G.getAttribute("data-swiper-autoplay"),10):void 0},E=G=>{if(t.destroyed||!t.autoplay.running)return;cancelAnimationFrame(l),C();let X=typeof G>"u"?t.params.autoplay.delay:G;u=t.params.autoplay.delay,d=t.params.autoplay.delay;const q=B();!Number.isNaN(q)&&q>0&&typeof G>"u"&&(X=q,u=q,d=q),A=X;const T=t.params.speed,U=()=>{!t||t.destroyed||(t.params.autoplay.reverseDirection?!t.isBeginning||t.params.loop||t.params.rewind?(t.slidePrev(T,!0,!0),a("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(t.slides.length-1,T,!0,!0),a("autoplay")):!t.isEnd||t.params.loop||t.params.rewind?(t.slideNext(T,!0,!0),a("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(0,T,!0,!0),a("autoplay")),t.params.cssMode&&(f=new Date().getTime(),requestAnimationFrame(()=>{E()})))};return X>0?(clearTimeout(c),c=setTimeout(()=>{U()},X)):requestAnimationFrame(()=>{U()}),X},_=()=>{f=new Date().getTime(),t.autoplay.running=!0,E(),a("autoplayStart")},S=()=>{t.autoplay.running=!1,clearTimeout(c),cancelAnimationFrame(l),a("autoplayStop")},N=(G,X)=>{if(t.destroyed||!t.autoplay.running)return;clearTimeout(c),G||(y=!0);const q=()=>{a("autoplayPause"),t.params.autoplay.waitForTransition?t.wrapperEl.addEventListener("transitionend",j):O()};if(t.autoplay.paused=!0,X){v&&(A=t.params.autoplay.delay),v=!1,q();return}A=(A||t.params.autoplay.delay)-(new Date().getTime()-f),!(t.isEnd&&A<0&&!t.params.loop)&&(A<0&&(A=0),q())},O=()=>{t.isEnd&&A<0&&!t.params.loop||t.destroyed||!t.autoplay.running||(f=new Date().getTime(),y?(y=!1,E(A)):E(),t.autoplay.paused=!1,a("autoplayResume"))},k=()=>{if(t.destroyed||!t.autoplay.running)return;const G=Zl();G.visibilityState==="hidden"&&(y=!0,N(!0)),G.visibilityState==="visible"&&O()},I=G=>{G.pointerType==="mouse"&&(y=!0,w=!0,!(t.animating||t.autoplay.paused)&&N(!0))},R=G=>{G.pointerType==="mouse"&&(w=!1,t.autoplay.paused&&O())},Q=()=>{t.params.autoplay.pauseOnMouseEnter&&(t.el.addEventListener("pointerenter",I),t.el.addEventListener("pointerleave",R))},$=()=>{t.el&&typeof t.el!="string"&&(t.el.removeEventListener("pointerenter",I),t.el.removeEventListener("pointerleave",R))},L=()=>{Zl().addEventListener("visibilitychange",k)},F=()=>{Zl().removeEventListener("visibilitychange",k)};i("init",()=>{t.params.autoplay.enabled&&(Q(),L(),_())}),i("destroy",()=>{$(),F(),t.autoplay.running&&S()}),i("_freeModeStaticRelease",()=>{(g||y)&&O()}),i("_freeModeNoMomentumRelease",()=>{t.params.autoplay.disableOnInteraction?S():N(!0,!0)}),i("beforeTransitionStart",(G,X,q)=>{t.destroyed||!t.autoplay.running||(q||!t.params.autoplay.disableOnInteraction?N(!0,!0):S())}),i("sliderFirstMove",()=>{if(!(t.destroyed||!t.autoplay.running)){if(t.params.autoplay.disableOnInteraction){S();return}m=!0,g=!1,y=!1,b=setTimeout(()=>{y=!0,g=!0,N(!0)},200)}}),i("touchEnd",()=>{if(!(t.destroyed||!t.autoplay.running||!m)){if(clearTimeout(b),clearTimeout(c),t.params.autoplay.disableOnInteraction){g=!1,m=!1;return}g&&t.params.cssMode&&O(),g=!1,m=!1}}),i("slideChange",()=>{t.destroyed||!t.autoplay.running||(v=!0)}),Object.assign(t.autoplay,{start:_,stop:S,pause:N,resume:O})}function HQ(){return Ft.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-unzoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Ft.createElement("path",{d:"M 14.144531 1.148438 L 9 6.292969 L 9 3 L 8 3 L 8 8 L 13 8 L 13 7 L 9.707031 7 L 14.855469 1.851563 Z M 8 8 L 3 8 L 3 9 L 6.292969 9 L 1.148438 14.144531 L 1.851563 14.855469 L 7 9.707031 L 7 13 L 8 13 Z"}))}function VQ(){return Ft.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-zoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Ft.createElement("path",{d:"M 9 1 L 9 2 L 12.292969 2 L 2 12.292969 L 2 9 L 1 9 L 1 14 L 6 14 L 6 13 L 2.707031 13 L 13 2.707031 L 13 6 L 14 6 L 14 1 Z"}))}const j0=(r,t)=>r===t?.tagName?.toUpperCase?.(),W1=r=>j0("DIV",r)||j0("SPAN",r),N0=r=>j0("IMG",r),S5=r=>r.complete&&r.naturalHeight!==0,$g=r=>j0("SVG",r),y_=({height:r,offset:t,width:s})=>Math.min((window.innerWidth-t*2)/s,(window.innerHeight-t*2)/r),zQ=({containerHeight:r,containerWidth:t,offset:s,targetHeight:i,targetWidth:a})=>{const o=y_({height:i,offset:s,width:a}),c=a>i?a/t:i/r;return o>1?c:o*c},Hd=({containerHeight:r,containerWidth:t,hasScalableSrc:s,offset:i,targetHeight:a,targetWidth:o})=>!r||!t?1:!s&&a&&o?zQ({containerHeight:r,containerWidth:t,offset:i,targetHeight:a,targetWidth:o}):y_({height:r,offset:i,width:t}),KQ=/url(?:\(['"]?)(.*?)(?:['"]?\))/,C5=r=>{if(r){if(N0(r))return r.currentSrc;if(W1(r)){const t=window.getComputedStyle(r).backgroundImage;if(t)return KQ.exec(t)?.[1]}}},GQ=r=>{if(r)return N0(r)?r.alt??void 0:r.getAttribute("aria-label")??void 0},WQ=({containerHeight:r,containerLeft:t,containerTop:s,containerWidth:i,hasScalableSrc:a,offset:o,targetHeight:c,targetWidth:l})=>{const u=Hd({containerHeight:r,containerWidth:i,hasScalableSrc:a,offset:o,targetHeight:c,targetWidth:l});return{top:s,left:t,width:i*u,height:r*u,transform:`translate(0,0) scale(${1/u})`}},Po=({position:r,relativeNum:t})=>{const s=parseFloat(r);return r.endsWith("%")?t*s/100:s},qQ=({containerHeight:r,containerLeft:t,containerTop:s,containerWidth:i,hasScalableSrc:a,objectFit:o,objectPosition:c,offset:l,targetHeight:u,targetWidth:d})=>{if(o==="scale-down"&&(d<=i&&u<=r?o="none":o="contain"),o==="cover"||o==="contain"){const A=i/d,f=r/u,p=o==="cover"?Math.max(A,f):Math.min(A,f),[m="50%",g="50%"]=c.split(" "),b=Po({position:m,relativeNum:i-d*p}),v=Po({position:g,relativeNum:r-u*p}),y=Hd({containerHeight:u*p,containerWidth:d*p,hasScalableSrc:a,offset:l,targetHeight:u,targetWidth:d});return{top:s+v,left:t+b,width:d*p*y,height:u*p*y,transform:`translate(0,0) scale(${1/y})`}}else if(o==="none"){const[A="50%",f="50%"]=c.split(" "),p=Po({position:A,relativeNum:i-d}),m=Po({position:f,relativeNum:r-u}),g=Hd({containerHeight:u,containerWidth:d,hasScalableSrc:a,offset:l,targetHeight:u,targetWidth:d});return{top:s+m,left:t+p,width:d*g,height:u*g,transform:`translate(0,0) scale(${1/g})`}}else if(o==="fill"){const A=i/d,f=r/u,p=Math.max(A,f),m=Hd({containerHeight:u*p,containerWidth:d*p,hasScalableSrc:a,offset:l,targetHeight:u,targetWidth:d});return{width:i*m,height:r*m,transform:`translate(0,0) scale(${1/m})`}}else return{}},YQ=({backgroundPosition:r,backgroundSize:t,containerHeight:s,containerLeft:i,containerTop:a,containerWidth:o,hasScalableSrc:c,offset:l,targetHeight:u,targetWidth:d})=>{if(t==="cover"||t==="contain"){const A=o/d,f=s/u,p=t==="cover"?Math.max(A,f):Math.min(A,f),[m="50%",g="50%"]=r.split(" "),b=Po({position:m,relativeNum:o-d*p}),v=Po({position:g,relativeNum:s-u*p}),y=Hd({containerHeight:u*p,containerWidth:d*p,hasScalableSrc:c,offset:l,targetHeight:u,targetWidth:d});return{top:a+v,left:i+b,width:d*p*y,height:u*p*y,transform:`translate(0,0) scale(${1/y})`}}else if(t==="auto"){const[A="50%",f="50%"]=r.split(" "),p=Po({position:A,relativeNum:o-d}),m=Po({position:f,relativeNum:s-u}),g=Hd({containerHeight:u,containerWidth:d,hasScalableSrc:c,offset:l,targetHeight:u,targetWidth:d});return{top:a+m,left:i+p,width:d*g,height:u*g,transform:`translate(0,0) scale(${1/g})`}}else{const[A="50%",f="50%"]=t.split(" "),p=Po({position:A,relativeNum:o}),m=Po({position:f,relativeNum:s}),g=p/d,b=m/u,v=Math.min(g,b),[y="50%",w="50%"]=r.split(" "),j=Po({position:y,relativeNum:o-d*v}),C=Po({position:w,relativeNum:s-u*v}),B=Hd({containerHeight:u*v,containerWidth:d*v,hasScalableSrc:c,offset:l,targetHeight:u,targetWidth:d});return{top:a+C,left:i+j,width:d*v*B,height:u*v*B,transform:`translate(0,0) scale(${1/B})`}}},XQ=/\.svg$/i,JQ=({hasZoomImg:r,imgSrc:t,isSvg:s,isZoomed:i,loadedImgEl:a,offset:o,shouldRefresh:c,targetEl:l})=>{const u=s||t?.slice?.(0,18)==="data:image/svg+xml"||r||!!(t&&XQ.test(t)),d=l.getBoundingClientRect(),A=window.getComputedStyle(l),f=a!=null&&W1(l),p=a!=null&&!f,m=WQ({containerHeight:d.height,containerLeft:d.left,containerTop:d.top,containerWidth:d.width,hasScalableSrc:u,offset:o,targetHeight:a?.naturalHeight||d.height,targetWidth:a?.naturalWidth||d.width}),g=p?qQ({containerHeight:d.height,containerLeft:d.left,containerTop:d.top,containerWidth:d.width,hasScalableSrc:u,objectFit:A.objectFit,objectPosition:A.objectPosition,offset:o,targetHeight:a?.naturalHeight||d.height,targetWidth:a?.naturalWidth||d.width}):void 0,b=f?YQ({backgroundPosition:A.backgroundPosition,backgroundSize:A.backgroundSize,containerHeight:d.height,containerLeft:d.left,containerTop:d.top,containerWidth:d.width,hasScalableSrc:u,offset:o,targetHeight:a?.naturalHeight||d.height,targetWidth:a?.naturalWidth||d.width}):void 0,v=Object.assign({},m,g,b);if(i){const y=window.innerWidth/2,w=window.innerHeight/2,j=parseFloat(String(v.left||0))+parseFloat(String(v.width||0))/2,C=parseFloat(String(v.top||0))+parseFloat(String(v.height||0))/2,B=y-j,E=w-C;c&&(v.transitionDuration="0.01ms"),v.transform=`translate(${B}px,${E}px) scale(1)`}return v},eb=r=>{if(!r)return{};if($g(r)){const t=r.parentElement,s=r.getBoundingClientRect();if(t){const i=t.getBoundingClientRect();return{height:s.height,left:i.left-s.left,top:i.top-s.top,width:s.width}}else return{height:s.height,left:s.left,width:s.width,top:s.top}}else return{height:r.offsetHeight,left:r.offsetLeft,width:r.offsetWidth,top:r.offsetTop}},ZQ=r=>{const t="-zoom",s=["clip-path","fill","mask","marker-start","marker-mid","marker-end"],i=new Map;if(r.hasAttribute("id")){const a=r.id,o=a+t;i.set(a,o),r.id=o}r.querySelectorAll("[id]").forEach(a=>{const o=a.id,c=o+t;i.set(o,c),a.id=c}),i.forEach((a,o)=>{const c=`url(#${o})`,l=`url(#${a})`,u=s.map(d=>`[${d}="${c}"]`).join(", ");r.querySelectorAll(u).forEach(d=>{s.forEach(A=>{d.getAttribute(A)===c&&d.setAttribute(A,l)})})}),r.querySelectorAll("style").forEach(a=>{i.forEach((o,c)=>{a.textContent&&(a.textContent=a.textContent.replaceAll(`#${c}`,`#${o}`))})})},e$=["img","svg",'[role="img"]',"[data-zoom]"].map(r=>`${r}:not([aria-hidden="true"])`).join(","),B5={overflow:"",width:""};function t$(r){return Ft.createElement(x_,{...r})}class x_ extends Ft.Component{constructor(){super(...arguments),this.state={id:"",isZoomImgLoaded:!1,loadedImgEl:void 0,modalState:"UNLOADED",shouldRefresh:!1,styleGhost:{}},this.refContent=Ft.createRef(),this.refDialog=Ft.createRef(),this.refModalContent=Ft.createRef(),this.refModalImg=Ft.createRef(),this.refWrap=Ft.createRef(),this.imgEl=null,this.isScaling=!1,this.prevBodyAttrs=B5,this.styleModalImg={},this.handleModalStateChange=t=>{const{modalState:s}=this.state;t!=="LOADING"&&s==="LOADING"?(this.loadZoomImg(),window.addEventListener("resize",this.handleResize,{passive:!0}),window.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),window.addEventListener("touchmove",this.handleTouchMove,{passive:!0}),window.addEventListener("touchend",this.handleTouchEnd,{passive:!0}),window.addEventListener("touchcancel",this.handleTouchCancel,{passive:!0}),document.addEventListener("keydown",this.handleKeyDown,!0)):t!=="LOADED"&&s==="LOADED"?window.addEventListener("wheel",this.handleWheel,{passive:!0}):t!=="UNLOADING"&&s==="UNLOADING"?(this.ensureImgTransitionEnd(),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),document.removeEventListener("keydown",this.handleKeyDown,!0)):t!=="UNLOADED"&&s==="UNLOADED"&&(this.bodyScrollEnable(),window.removeEventListener("resize",this.handleResize),this.refModalImg.current?.removeEventListener?.("transitionend",this.handleImgTransitionEnd),this.refDialog.current?.close?.())},this.getDialogContainer=()=>{let t=document.querySelector("[data-rmiz-portal]");return t==null&&(t=document.createElement("div"),t.setAttribute("data-rmiz-portal",""),document.body.appendChild(t)),t},this.setId=()=>{const t=()=>Math.random().toString(16).slice(-4);this.setState({id:t()+t()+t()})},this.setAndTrackImg=()=>{const t=this.refContent.current;t&&(this.imgEl=t.querySelector(e$),this.imgEl?(this.contentNotFoundChangeObserver?.disconnect?.(),this.imgEl.addEventListener("load",this.handleImgLoad),this.imgEl.addEventListener("click",this.handleZoom),this.state.loadedImgEl||this.handleImgLoad(),this.imgElResizeObserver=new ResizeObserver(s=>{const i=s[0];i?.target&&(this.imgEl=i.target,this.setState({styleGhost:eb(this.imgEl)}))}),this.imgElResizeObserver.observe(this.imgEl),this.contentChangeObserver||(this.contentChangeObserver=new MutationObserver(()=>{this.setState({styleGhost:eb(this.imgEl)})}),this.contentChangeObserver.observe(t,{attributes:!0,childList:!0,subtree:!0}))):this.contentNotFoundChangeObserver||(this.contentNotFoundChangeObserver=new MutationObserver(this.setAndTrackImg),this.contentNotFoundChangeObserver.observe(t,{childList:!0,subtree:!0})))},this.handleIfZoomChanged=t=>{const{isZoomed:s}=this.props;!t&&s?this.zoom():t&&!s&&this.unzoom()},this.handleImgLoad=()=>{const t=C5(this.imgEl);if(!t)return;const s=new Image;N0(this.imgEl)&&(s.sizes=this.imgEl.sizes,s.srcset=this.imgEl.srcset,s.crossOrigin=this.imgEl.crossOrigin),s.src=t;const i=()=>{this.setState({loadedImgEl:s,styleGhost:eb(this.imgEl)})};s.decode().then(i).catch(()=>{if(S5(s)){i();return}s.onload=i})},this.handleZoom=()=>{!this.props.isDisabled&&this.hasImage()&&this.props.onZoomChange?.(!0)},this.handleUnzoom=()=>{this.props.isDisabled||this.props.onZoomChange?.(!1)},this.handleBtnUnzoomClick=t=>{t.preventDefault(),t.stopPropagation(),this.handleUnzoom()},this.handleDialogCancel=t=>{t.preventDefault()},this.handleDialogClick=t=>{(t.target===this.refModalContent.current||t.target===this.refModalImg.current)&&(t.stopPropagation(),this.handleUnzoom())},this.handleDialogClose=t=>{t.stopPropagation(),this.handleUnzoom()},this.handleKeyDown=t=>{(t.key==="Escape"||t.keyCode===27)&&(t.preventDefault(),t.stopPropagation(),this.handleUnzoom())},this.handleWheel=t=>{t.ctrlKey||(t.stopPropagation(),queueMicrotask(()=>{this.handleUnzoom()}))},this.handleTouchStart=t=>{if(t.touches.length>1){this.isScaling=!0;return}t.changedTouches.length===1&&t.changedTouches[0]&&(this.touchYStart=t.changedTouches[0].screenY)},this.handleTouchMove=t=>{const s=window.visualViewport?.scale??1;if(this.props.canSwipeToUnzoom&&!this.isScaling&&s<=1&&this.touchYStart!=null&&t.changedTouches[0]){this.touchYEnd=t.changedTouches[0].screenY;const i=Math.max(this.touchYStart,this.touchYEnd),a=Math.min(this.touchYStart,this.touchYEnd);Math.abs(i-a)>this.props.swipeToUnzoomThreshold&&(this.touchYStart=void 0,this.touchYEnd=void 0,this.handleUnzoom())}},this.handleTouchEnd=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleTouchCancel=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleResize=()=>{this.setState({shouldRefresh:!0})},this.hasImage=()=>this.imgEl&&(this.state.loadedImgEl||$g(this.imgEl))&&window.getComputedStyle(this.imgEl).display!=="none",this.zoom=()=>{this.bodyScrollDisable(),this.refDialog.current?.showModal?.(),this.refModalImg.current?.addEventListener?.("transitionend",this.handleImgTransitionEnd),this.setState({modalState:"LOADING"})},this.unzoom=()=>{this.setState({modalState:"UNLOADING"})},this.handleImgTransitionEnd=()=>{clearTimeout(this.timeoutTransitionEnd),this.state.modalState==="LOADING"?this.setState({modalState:"LOADED"}):this.state.modalState==="UNLOADING"&&this.setState({shouldRefresh:!1,modalState:"UNLOADED"})},this.ensureImgTransitionEnd=()=>{if(this.refModalImg.current){const t=window.getComputedStyle(this.refModalImg.current).transitionDuration,s=parseFloat(t);if(s){const i=s*(t.endsWith("ms")?1:1e3)+50;this.timeoutTransitionEnd=setTimeout(this.handleImgTransitionEnd,i)}}},this.bodyScrollDisable=()=>{this.prevBodyAttrs={overflow:document.body.style.overflow,width:document.body.style.width};const t=document.body.clientWidth;document.body.style.overflow="hidden",document.body.style.width=`${t}px`},this.bodyScrollEnable=()=>{document.body.style.width=this.prevBodyAttrs.width,document.body.style.overflow=this.prevBodyAttrs.overflow,this.prevBodyAttrs=B5},this.loadZoomImg=()=>{const{props:{zoomImg:t}}=this,s=t?.src;if(s){const i=new Image;i.sizes=t?.sizes??"",i.srcset=t?.srcSet??"",i.crossOrigin=t?.crossOrigin??void 0,i.src=s;const a=()=>{this.setState({isZoomImgLoaded:!0})};i.decode().then(a).catch(()=>{if(S5(i)){a();return}i.onload=a})}},this.UNSAFE_handleSvg=()=>{const{imgEl:t,refModalImg:s,styleModalImg:i}=this;if($g(t)){const a=t.cloneNode(!0);ZQ(a),a.style.width=`${i.width||0}px`,a.style.height=`${i.height||0}px`,a.addEventListener("click",this.handleUnzoom),s.current?.firstChild?.remove?.(),s.current?.appendChild?.(a)}}}render(){const{handleBtnUnzoomClick:t,handleDialogCancel:s,handleDialogClick:i,handleDialogClose:a,handleUnzoom:o,handleZoom:c,imgEl:l,props:{a11yNameButtonUnzoom:u,a11yNameButtonZoom:d,children:A,classDialog:f,IconUnzoom:p,IconZoom:m,isZoomed:g,wrapElement:b,ZoomContent:v,zoomImg:y,zoomMargin:w},refContent:j,refDialog:C,refModalContent:B,refModalImg:E,refWrap:_,state:{id:S,isZoomImgLoaded:N,loadedImgEl:O,modalState:k,shouldRefresh:I,styleGhost:R}}=this,Q=`rmiz-modal-${S}`,$=`rmiz-modal-img-${S}`,L=W1(l),F=N0(l),G=$g(l),X=GQ(l),q=C5(l),T=F?l.sizes:void 0,U=F?l.srcset:void 0,K=F?l.crossOrigin:void 0,z=!!y?.src,M=this.hasImage(),H=X?`${d}: ${X}`:d,Y=k==="LOADING"||k==="LOADED",ae=M?"found":"not-found",oe=k==="UNLOADED"||k==="UNLOADING"?"hidden":"visible",be={visibility:k==="UNLOADED"?"visible":"hidden"};this.styleModalImg=M?JQ({hasZoomImg:z,imgSrc:q,isSvg:G,isZoomed:g&&Y,loadedImgEl:O,offset:w,shouldRefresh:I,targetEl:l}):{};let ge=null;if(M){const he=F||L?Ft.createElement("img",{alt:X,crossOrigin:K,sizes:T,src:q,srcSet:U,...N&&k==="LOADED"?y:{},"data-rmiz-modal-img":"",height:this.styleModalImg.height||void 0,id:$,ref:E,style:this.styleModalImg,width:this.styleModalImg.width||void 0}):G?Ft.createElement("div",{"data-rmiz-modal-img":!0,ref:E,style:this.styleModalImg}):null,ke=Ft.createElement("button",{"aria-label":u,"data-rmiz-btn-unzoom":"",onClick:t,type:"button"},Ft.createElement(p,null));ge=v?Ft.createElement(v,{buttonUnzoom:ke,modalState:k,img:he,isZoomImgLoaded:N,onUnzoom:o}):Ft.createElement(Ft.Fragment,null,he,ke)}return Ft.createElement(b,{"aria-owns":Q,"data-rmiz":"",ref:_},Ft.createElement(b,{"data-rmiz-content":ae,ref:j,style:be},A),M&&Ft.createElement(b,{"data-rmiz-ghost":"",style:R},Ft.createElement("button",{"aria-label":H,"data-rmiz-btn-zoom":"",onClick:c,type:"button"},Ft.createElement(m,null))),M&&MP.createPortal(Ft.createElement("dialog",{"aria-labelledby":$,"aria-modal":"true",className:f,"data-rmiz-modal":"",id:Q,onClick:i,onClose:a,onCancel:s,ref:C,role:"dialog"},Ft.createElement("div",{"data-rmiz-modal-overlay":oe}),Ft.createElement("div",{"data-rmiz-modal-content":"",ref:B},ge)),this.getDialogContainer()))}componentDidMount(){this.setId(),this.setAndTrackImg(),this.handleImgLoad(),this.UNSAFE_handleSvg()}componentWillUnmount(){this.state.modalState!=="UNLOADED"&&this.bodyScrollEnable(),this.contentChangeObserver?.disconnect?.(),this.contentNotFoundChangeObserver?.disconnect?.(),this.imgElResizeObserver?.disconnect?.(),this.imgEl?.removeEventListener?.("load",this.handleImgLoad),this.imgEl?.removeEventListener?.("click",this.handleZoom),this.refModalImg.current?.removeEventListener?.("transitionend",this.handleImgTransitionEnd),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),window.removeEventListener("resize",this.handleResize),document.removeEventListener("keydown",this.handleKeyDown,!0)}componentDidUpdate(t,s){this.handleModalStateChange(s.modalState),this.UNSAFE_handleSvg(),this.handleIfZoomChanged(t.isZoomed)}}x_.defaultProps={a11yNameButtonUnzoom:"Minimize image",a11yNameButtonZoom:"Expand image",canSwipeToUnzoom:!0,IconUnzoom:HQ,IconZoom:VQ,isDisabled:!1,swipeToUnzoomThreshold:10,wrapElement:"div",zoomMargin:0};function r$(r){const[t,s]=Ft.useState(!1);return Ft.createElement(t$,{...r,isZoomed:t,onZoomChange:s})}const b_=({images:r,title:t})=>{const[s,i]=ee.useState(0),[a,o]=ee.useState(!1);if(!r||r.length===0)return n.jsx("div",{className:"w-full h-96 bg-gray-200 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-gray-500",children:"No images available"})});const c=l=>l?.startsWith("http")?l:`http://localhost:10000${l}`;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:c(r[s]),alt:t,loading:"lazy",className:"hidden md:block w-full h-96 object-cover rounded-lg cursor-zoom-in transition-transform duration-300 group-hover:scale-105",onClick:()=>o(!0)}),n.jsx("div",{className:"md:hidden",children:n.jsx(Yv,{modules:[j5,N5,$Q],spaceBetween:10,slidesPerView:1,navigation:!0,pagination:{clickable:!0},autoplay:{delay:3500,disableOnInteraction:!1},onSlideChange:l=>i(l.activeIndex),className:"w-full h-96 rounded-lg",children:r.map((l,u)=>n.jsx(Xv,{children:n.jsx("img",{src:c(l),alt:`${t} ${u+1}`,loading:"lazy",className:"w-full h-full object-cover rounded-lg"})},u))})})]}),r.length>1&&n.jsx("div",{className:"hidden md:flex space-x-2 overflow-x-auto",children:r.map((l,u)=>n.jsx("button",{onClick:()=>i(u),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${s===u?"border-black ring-2 ring-black ring-opacity-50":"border-gray-200 hover:border-gray-400"}`,children:n.jsx("img",{src:c(l),alt:`${t} ${u+1}`,loading:"lazy",className:"w-full h-full object-cover"})},u))}),a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center",onClick:()=>o(!1),children:n.jsxs("div",{className:"relative w-full max-w-4xl h-[80vh]",onClick:l=>l.stopPropagation(),children:[n.jsx(Yv,{modules:[j5,N5],spaceBetween:30,slidesPerView:1,navigation:!0,pagination:{clickable:!0},initialSlide:s,onSlideChange:l=>i(l.activeIndex),className:"w-full h-full",children:r.map((l,u)=>n.jsx(Xv,{className:"flex items-center justify-center",children:n.jsx(r$,{children:n.jsx("img",{src:c(l),alt:`${t} ${u+1}`,className:"max-h-[80vh] object-contain rounded-lg"})})},u))}),n.jsx("button",{className:"absolute top-5 right-5 text-white text-3xl font-bold z-50 cursor-pointer",onClick:()=>o(!1),children:""})]})})]})},n$=()=>{const{id:r}=ty(),[t,s]=ee.useState(null),[i,a]=ee.useState(null),[o,c]=ee.useState(!0),[l,u]=ee.useState(1),[d,A]=ee.useState(""),[f,p]=ee.useState(""),[m,g]=ee.useState([]),{addToOrder:b}=ac(),{user:v}=Fn(),y=yi();ee.useEffect(()=>{w(),j()},[r]),ee.useEffect(()=>{t&&(t.variants?.colors?.length>0&&A(t.variants.colors[0].name),t.variants?.sizes?.length>0&&p(t.variants.sizes[0].name))},[t]);const w=async()=>{try{const O=await(await fetch(`http://localhost:10000/api/products/${r}`)).json();if(s(O),O.storeId){const I=await(await fetch(`http://localhost:10000/api/stores/${O.storeId}`)).json();a(I.store)}}catch(N){console.error("Error fetching product:",N)}finally{c(!1)}},j=async()=>{try{const N=await fetch(`http://localhost:10000/api/reviews/store/${r}`);if(N.ok){const O=await N.json();g(O||[])}}catch(N){console.error("Error fetching reviews:",N),g([])}},C=()=>t?.variants?{color:d,size:f,price:t.price}:null,B=()=>{const N=t?.variants?.colors?.length>0,O=t?.variants?.sizes?.length>0;return!(N&&!d||O&&!f)},E=()=>{if(!v){y("/login");return}if(v.role!=="customer"){alert("Only customers can add items to cart");return}if(!B()){alert("Please select all product variants");return}const N={...t,storeId:t.storeId?._id||t.storeId,selectedVariants:C()};b(N,l),y("/cart")},_=()=>{if(!v){y("/login");return}if(v.role!=="customer"){alert("Only customers can add items to cart");return}if(!B()){alert("Please select all product variants");return}const N={...t,storeId:t.storeId?._id||t.storeId,selectedVariants:C()};b(N,l),alert("Product added to cart!")},S=N=>{const O=l+N;O>=1&&O<=t.stock&&u(O)};return o?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-black"})}):t?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"mb-6",children:n.jsxs(Zt,{to:"/products",className:"flex items-center space-x-2 text-gray-600 hover:text-black transition-colors",children:[n.jsx(oc,{className:"w-4 h-4"}),n.jsx("span",{children:"Back to Products"})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[n.jsx("div",{children:n.jsx(b_,{images:t.images,title:t.title})}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.title}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4",children:[n.jsx(Mc,{className:"w-4 h-4"}),n.jsx("span",{className:"capitalize",children:t.category}),t.subcategory&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{className:"capitalize",children:t.subcategory})]}),t.childCategory&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{className:"capitalize",children:t.childCategory})]})]}),n.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(mn,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),n.jsxs("span",{className:"text-gray-600",children:[t.rating||0," (",m.length," reviews)"]})]}),n.jsx("span",{className:"text-gray-400",children:"|"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ti,{className:"w-4 h-4 text-gray-600"}),n.jsxs("span",{className:"text-gray-600",children:[t.orders||0," orders"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[n.jsxs("p",{className:"text-4xl font-bold text-black",children:[Br(t.price),n.jsx("span",{className:"text-lg text-gray-500 ml-2",children:t.priceType==="hourly"?"/hour":""})]}),t.oldPrice&&t.oldPrice>t.price&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-2xl text-gray-500 line-through",children:Br(t.oldPrice)}),n.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-semibold",children:[Math.round((t.oldPrice-t.price)/t.oldPrice*100),"% OFF"]})]})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:i?.profileImage?n.jsx("img",{src:i.profileImage,alt:t.storeId.name,className:"w-12 h-12 rounded-full object-cover"}):n.jsx(ei,{className:"w-6 h-6 text-gray-600"})}),n.jsxs("div",{children:[n.jsx(Zt,{to:`/store/${t.storeId._id}`,className:"font-semibold text-black hover:text-gray-700 transition-colors",children:t.storeId.name}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i?.isVerified&&n.jsxs("span",{className:"flex items-center text-green-600 text-xs",children:[n.jsx(Xr,{className:"w-3 h-3 mr-1"}),"Verified"]}),n.jsx("span",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:i?.storeLevel||"Bronze"})]})]})]}),n.jsxs("div",{className:"text-right text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-1 text-yellow-500",children:[n.jsx(mn,{className:"w-4 h-4 fill-current"}),n.jsx("span",{children:i?.rating||0})]}),n.jsxs("p",{className:"text-gray-600",children:[i?.completionRate||0,"% completion"]})]})]}),i?.contactInfo&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(wl,{className:"w-4 h-4"}),n.jsx("span",{children:i.contactInfo.address})]}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-1 text-gray-600",children:[n.jsx(Gu,{className:"w-4 h-4"}),n.jsx("span",{children:i.contactInfo.phone})]}),n.jsxs("div",{className:"flex items-center space-x-1 text-gray-600",children:[n.jsx(vl,{className:"w-4 h-4"}),n.jsx("span",{children:i.contactInfo.email})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Description"}),n.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.description})]}),t.variants&&(t.variants.colors?.length>0||t.variants.sizes?.length>0)&&n.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Product Options"}),t.variants.colors&&t.variants.colors.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Color"}),n.jsx("span",{className:"text-sm text-gray-600 capitalize font-medium",children:d})]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:t.variants.colors.map(N=>n.jsxs("button",{onClick:()=>A(N.name),className:`relative w-14 h-14 rounded-full border-2 transition-all transform hover:scale-110 hover:shadow-lg ${d===N.name?"border-black shadow-xl ring-2 ring-gray-200":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:N.hex},title:N.name,children:[d===N.name&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx(Xa,{className:`w-6 h-6 ${N.hex==="#FFFFFF"||N.hex==="#ffffff"||N.name.toLowerCase()==="white"?"text-gray-800":"text-white"}`})}),n.jsx("span",{className:"sr-only",children:N.name})]},N.name))})]}),t.variants.sizes&&t.variants.sizes.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Size"}),n.jsx("span",{className:"text-sm text-gray-600 uppercase font-medium",children:f})]}),n.jsx("div",{className:"grid grid-cols-4 gap-3",children:t.variants.sizes.map(N=>n.jsxs("button",{onClick:()=>p(N.name),disabled:!N.inStock,className:`relative py-3 px-4 text-sm font-medium rounded-lg border-2 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none ${f===N.name?"border-black bg-black text-white shadow-lg":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:[n.jsx("span",{className:"uppercase",children:N.name}),!N.inStock&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-full h-0.5 bg-red-400 transform rotate-45"})})]},N.name))}),n.jsx("button",{className:"text-sm text-gray-600 hover:text-black underline underline-offset-2 transition-colors mt-2",children:"Size Guide"})]}),(d||f)&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selected:"}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[d&&n.jsxs("span",{className:"capitalize",children:["Color:"," ",n.jsx("span",{className:"font-medium",children:d})]}),f&&n.jsxs("span",{className:"uppercase",children:["Size:"," ",n.jsx("span",{className:"font-medium",children:f})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stock Status"}),n.jsx("span",{className:`text-sm font-medium ${t.stock>0?"text-green-600":"text-red-600"}`,children:t.stock>0?`${t.stock} available`:"Out of stock"})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-black h-2 rounded-full transition-all",style:{width:`${Math.min(t.stock/100*100,100)}%`}})})]}),t.stock>0&&v?.role==="customer"&&n.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quantity"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>S(-1),disabled:l<=1,className:"w-12 h-12 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(dy,{className:"w-5 h-5"})}),n.jsx("span",{className:"text-2xl font-semibold w-12 text-center",children:l}),n.jsx("button",{onClick:()=>S(1),disabled:l>=t.stock,className:"w-12 h-12 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Ua,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsxs("button",{onClick:_,disabled:!B(),className:"flex-1 bg-black text-white py-4 px-6 rounded-lg hover:bg-gray-800 transition-colors flex items-center justify-center space-x-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(yl,{className:"w-5 h-5"}),n.jsx("span",{children:"Add to Cart"})]}),n.jsxs("button",{onClick:E,disabled:!B(),className:"bg-white border-2 border-black text-black py-4 px-6 rounded-lg hover:bg-black hover:text-white transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:["Buy Now - ",Br(t.price)]})]}),!B()&&n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:n.jsx("p",{className:"text-amber-800 text-sm font-medium",children:"Please select all product options before adding to cart"})})]}),t.stock===0&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[n.jsx("p",{className:"text-red-800 font-semibold text-lg",children:"Out of Stock"}),n.jsx("p",{className:"text-red-600",children:"This item is currently unavailable."})]}),v?.role!=="customer"&&v&&n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:[n.jsx("p",{className:"text-yellow-800 font-semibold",children:"Store Owner Account"}),n.jsx("p",{className:"text-yellow-600",children:"Only customers can purchase products."})]})]})]})]}),n.jsx("div",{className:"py-16 bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Customer Reviews"}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"flex items-center",children:[...Array(5)].map((N,O)=>n.jsx(mn,{className:`w-5 h-5 ${O<Math.floor(i.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},O))}),n.jsx("span",{className:"text-lg font-semibold",children:i.rating||0}),n.jsxs("span",{className:"text-gray-600",children:["(",m.length," reviews)"]})]})})]}),m.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(mn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Reviews Yet"}),n.jsx("p",{className:"text-gray-600",children:"Be the first to review this store!"})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Review Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx("div",{children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:i.rating||0}),n.jsx("div",{className:"flex justify-center mb-2",children:[...Array(5)].map((N,O)=>n.jsx(mn,{className:`w-5 h-5 ${O<Math.floor(i.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},O))}),n.jsxs("p",{className:"text-gray-600",children:[m.length," total reviews"]})]})}),n.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(N=>{const O=m.filter(I=>I.rating===N).length,k=m.length>0?O/m.length*100:0;return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm w-8",children:[N,""]}),n.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${k}%`}})}),n.jsx("span",{className:"text-sm text-gray-600 w-8",children:O})]},N)})})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map(N=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:maskCustomerName(N.customerId?.name||"Anonymous")}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx("div",{className:"flex items-center",children:[...Array(5)].map((O,k)=>n.jsx(mn,{className:`w-4 h-4 ${k<N.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},k))}),n.jsx("span",{className:"text-sm text-gray-500",children:new Date(N.createdAt).toLocaleDateString()})]})]}),n.jsxs("div",{className:"text-right",children:[N.orderId&&n.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Product Order"}),N.bookingId&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"product Booking"})]})]}),n.jsx("p",{className:"text-gray-700 mb-4",children:N.comment}),N.response&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-black",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Store Response"}),n.jsx("span",{className:"text-sm text-gray-500",children:new Date(N.response.respondedAt).toLocaleDateString()})]}),n.jsx("p",{className:"text-gray-700",children:N.response.message})]})]},N._id))})]})]})})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Product not found"}),n.jsx(Zt,{to:"/products",className:"text-black hover:text-gray-700",children:"Back to Products"})]})})};var tb={exports:{}},rb,k5;function s$(){if(k5)return rb;k5=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return rb=r,rb}var nb,_5;function i$(){if(_5)return nb;_5=1;var r=s$();function t(){}function s(){}return s.resetWarningCache=t,nb=function(){function i(c,l,u,d,A,f){if(f!==r){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}i.isRequired=i;function a(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:s,resetWarningCache:t};return o.PropTypes=o,o},nb}var E5;function a$(){return E5||(E5=1,tb.exports=i$()()),tb.exports}var o$=a$();const Kt=Tp(o$);function v_(r){var t,s,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(t=0;t<a;t++)r[t]&&(s=v_(r[t]))&&(i&&(i+=" "),i+=s)}else for(s in r)r[s]&&(i&&(i+=" "),i+=s);return i}function fy(){for(var r,t,s=0,i="",a=arguments.length;s<a;s++)(r=arguments[s])&&(t=v_(r))&&(i&&(i+=" "),i+=t);return i}var sb,O5;function l$(){if(O5)return sb;O5=1;const r=(u,d,A,f)=>{if(A==="length"||A==="prototype"||A==="arguments"||A==="caller")return;const p=Object.getOwnPropertyDescriptor(u,A),m=Object.getOwnPropertyDescriptor(d,A);!t(p,m)&&f||Object.defineProperty(u,A,m)},t=function(u,d){return u===void 0||u.configurable||u.writable===d.writable&&u.enumerable===d.enumerable&&u.configurable===d.configurable&&(u.writable||u.value===d.value)},s=(u,d)=>{const A=Object.getPrototypeOf(d);A!==Object.getPrototypeOf(u)&&Object.setPrototypeOf(u,A)},i=(u,d)=>`/* Wrapped ${u}*/
${d}`,a=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),o=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),c=(u,d,A)=>{const f=A===""?"":`with ${A.trim()}() `,p=i.bind(null,f,d.toString());Object.defineProperty(p,"name",o),Object.defineProperty(u,"toString",{...a,value:p})};return sb=(u,d,{ignoreNonConfigurable:A=!1}={})=>{const{name:f}=u;for(const p of Reflect.ownKeys(d))r(u,d,p,A);return s(u,d),c(u,d,f),u},sb}var Lf={exports:{}},ib,I5;function c$(){return I5||(I5=1,ib=()=>{const r={};return r.promise=new Promise((t,s)=>{r.resolve=t,r.reject=s}),r}),ib}var Hm=Lf.exports,P5;function u$(){return P5||(P5=1,(function(r,t){var s=Hm&&Hm.__awaiter||function(c,l,u,d){return new(u||(u=Promise))(function(A,f){function p(b){try{g(d.next(b))}catch(v){f(v)}}function m(b){try{g(d.throw(b))}catch(v){f(v)}}function g(b){b.done?A(b.value):new u(function(v){v(b.value)}).then(p,m)}g((d=d.apply(c,l||[])).next())})},i=Hm&&Hm.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(c$());function o(c,l="maxAge"){let u,d,A;const f=()=>s(this,void 0,void 0,function*(){if(u!==void 0)return;const g=b=>s(this,void 0,void 0,function*(){A=a.default();const v=b[1][l]-Date.now();if(v<=0){c.delete(b[0]),A.resolve();return}return u=b[0],d=setTimeout(()=>{c.delete(b[0]),A&&A.resolve()},v),typeof d.unref=="function"&&d.unref(),A.promise});try{for(const b of c)yield g(b)}catch{}u=void 0}),p=()=>{u=void 0,d!==void 0&&(clearTimeout(d),d=void 0),A!==void 0&&(A.reject(void 0),A=void 0)},m=c.set.bind(c);return c.set=(g,b)=>{c.has(g)&&c.delete(g);const v=m(g,b);return u&&u===g&&p(),f(),v},f(),c}t.default=o,r.exports=o,r.exports.default=o})(Lf,Lf.exports)),Lf.exports}var ab,T5;function d$(){if(T5)return ab;T5=1;const r=l$(),t=u$(),s=new WeakMap,i=new WeakMap,a=(o,{cacheKey:c,cache:l=new Map,maxAge:u}={})=>{typeof u=="number"&&t(l);const d=function(...A){const f=c?c(A):A[0],p=l.get(f);if(p)return p.data;const m=o.apply(this,A);return l.set(f,{data:m,maxAge:u?Date.now()+u:Number.POSITIVE_INFINITY}),m};return r(d,o,{ignoreNonConfigurable:!0}),i.set(d,l),d};return a.decorator=(o={})=>(c,l,u)=>{const d=c[l];if(typeof d!="function")throw new TypeError("The decorated value must be a function");delete u.value,delete u.writable,u.get=function(){if(!s.has(this)){const A=a(d,o);return s.set(this,A),A}return s.get(this)}},a.clear=o=>{const c=i.get(o);if(!c)throw new TypeError("Can't clear a function that was not memoized!");if(typeof c.clear!="function")throw new TypeError("The cache Map can't be cleared!");c.clear()},ab=a,ab}var A$=d$();const w_=Tp(A$);function h$(r){return typeof r=="string"}function f$(r,t,s){return s.indexOf(r)===t}function p$(r){return r.toLowerCase()===r}function F5(r){return r.indexOf(",")===-1?r:r.split(",")}function Jv(r){if(!r)return r;if(r==="C"||r==="posix"||r==="POSIX")return"en-US";if(r.indexOf(".")!==-1){var t=r.split(".")[0],s=t===void 0?"":t;return Jv(s)}if(r.indexOf("@")!==-1){var i=r.split("@")[0],s=i===void 0?"":i;return Jv(s)}if(r.indexOf("-")===-1||!p$(r))return r;var a=r.split("-"),o=a[0],c=a[1],l=c===void 0?"":c;return"".concat(o,"-").concat(l.toUpperCase())}function m$(r){var t=r===void 0?{}:r,s=t.useFallbackLocale,i=s===void 0?!0:s,a=t.fallbackLocale,o=a===void 0?"en-US":a,c=[];if(typeof navigator<"u"){for(var l=navigator.languages||[],u=[],d=0,A=l;d<A.length;d++){var f=A[d];u=u.concat(F5(f))}var p=navigator.language,m=p&&F5(p);c=c.concat(u,m)}return i&&c.push(o),c.filter(h$).map(Jv).filter(f$)}var g$=w_(m$,{cacheKey:JSON.stringify});function y$(r){return g$(r)[0]||null}var j_=w_(y$,{cacheKey:JSON.stringify});function Kc(r,t,s){return function(a,o){o===void 0&&(o=s);var c=r(a)+o;return t(c)}}function $p(r){return function(s){return new Date(r(s).getTime()-1)}}function Hp(r,t){return function(i){return[r(i),t(i)]}}function Fs(r){if(r instanceof Date)return r.getFullYear();if(typeof r=="number")return r;var t=parseInt(r,10);if(typeof r=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(r,"."))}function id(r){if(r instanceof Date)return r.getMonth();throw new Error("Failed to get month from date: ".concat(r,"."))}function py(r){if(r instanceof Date)return r.getDate();throw new Error("Failed to get year from date: ".concat(r,"."))}function Uh(r){var t=Fs(r),s=t+(-t+1)%100,i=new Date;return i.setFullYear(s,0,1),i.setHours(0,0,0,0),i}var x$=Kc(Fs,Uh,-100),N_=Kc(Fs,Uh,100),q1=$p(N_),b$=Kc(Fs,q1,-100),S_=Hp(Uh,q1);function ad(r){var t=Fs(r),s=t+(-t+1)%10,i=new Date;return i.setFullYear(s,0,1),i.setHours(0,0,0,0),i}var C_=Kc(Fs,ad,-10),Y1=Kc(Fs,ad,10),my=$p(Y1),B_=Kc(Fs,my,-10),k_=Hp(ad,my);function Lh(r){var t=Fs(r),s=new Date;return s.setFullYear(t,0,1),s.setHours(0,0,0,0),s}var __=Kc(Fs,Lh,-1),X1=Kc(Fs,Lh,1),gy=$p(X1),E_=Kc(Fs,gy,-1),v$=Hp(Lh,gy);function J1(r,t){return function(i,a){a===void 0&&(a=t);var o=Fs(i),c=id(i)+a,l=new Date;return l.setFullYear(o,c,1),l.setHours(0,0,0,0),r(l)}}function cA(r){var t=Fs(r),s=id(r),i=new Date;return i.setFullYear(t,s,1),i.setHours(0,0,0,0),i}var O_=J1(cA,-1),Z1=J1(cA,1),Vp=$p(Z1),I_=J1(Vp,-1),w$=Hp(cA,Vp);function j$(r,t){return function(i,a){a===void 0&&(a=t);var o=Fs(i),c=id(i),l=py(i)+a,u=new Date;return u.setFullYear(o,c,l),u.setHours(0,0,0,0),r(u)}}function zp(r){var t=Fs(r),s=id(r),i=py(r),a=new Date;return a.setFullYear(t,s,i),a.setHours(0,0,0,0),a}var N$=j$(zp,1),e2=$p(N$),S$=Hp(zp,e2);function P_(r){return py(Vp(r))}var wf,Ss={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},th={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},C$=(wf={},wf[Ss.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],wf[Ss.HEBREW]=["he","he-IL"],wf[Ss.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],wf),t2=[0,1,2,3,4,5,6],ob=new Map;function B$(r){return function(s,i){var a=s||j_();ob.has(a)||ob.set(a,new Map);var o=ob.get(a);return o.has(r)||o.set(r,new Intl.DateTimeFormat(a||void 0,r).format),o.get(r)(i)}}function k$(r){var t=new Date(r);return new Date(t.setHours(12))}function uA(r){return function(t,s){return B$(r)(t,k$(s))}}var _$={day:"numeric"},E$={day:"numeric",month:"long",year:"numeric"},O$={month:"long"},I$={month:"long",year:"numeric"},P$={weekday:"short"},T$={weekday:"long"},F$={year:"numeric"},U$=uA(_$),L$=uA(E$),D$=uA(O$),T_=uA(I$),M$=uA(P$),R$=uA(T$),yy=uA(F$),Q$=t2[0],$$=t2[5],U5=t2[6];function yp(r,t){t===void 0&&(t=Ss.ISO_8601);var s=r.getDay();switch(t){case Ss.ISO_8601:return(s+6)%7;case Ss.ISLAMIC:return(s+1)%7;case Ss.HEBREW:case Ss.GREGORY:return s;default:throw new Error("Unsupported calendar type.")}}function H$(r){var t=Uh(r);return Fs(t)}function V$(r){var t=ad(r);return Fs(t)}function Zv(r,t){t===void 0&&(t=Ss.ISO_8601);var s=Fs(r),i=id(r),a=r.getDate()-yp(r,t);return new Date(s,i,a)}function z$(r,t){t===void 0&&(t=Ss.ISO_8601);var s=t===Ss.GREGORY?Ss.GREGORY:Ss.ISO_8601,i=Zv(r,t),a=Fs(r)+1,o,c;do o=new Date(a,0,s===Ss.ISO_8601?4:1),c=Zv(o,t),a-=1;while(r<c);return Math.round((i.getTime()-c.getTime())/(864e5*7))+1}function Vd(r,t){switch(r){case"century":return Uh(t);case"decade":return ad(t);case"year":return Lh(t);case"month":return cA(t);case"day":return zp(t);default:throw new Error("Invalid rangeType: ".concat(r))}}function K$(r,t){switch(r){case"century":return x$(t);case"decade":return C_(t);case"year":return __(t);case"month":return O_(t);default:throw new Error("Invalid rangeType: ".concat(r))}}function F_(r,t){switch(r){case"century":return N_(t);case"decade":return Y1(t);case"year":return X1(t);case"month":return Z1(t);default:throw new Error("Invalid rangeType: ".concat(r))}}function G$(r,t){switch(r){case"decade":return C_(t,-100);case"year":return __(t,-10);case"month":return O_(t,-12);default:throw new Error("Invalid rangeType: ".concat(r))}}function W$(r,t){switch(r){case"decade":return Y1(t,100);case"year":return X1(t,10);case"month":return Z1(t,12);default:throw new Error("Invalid rangeType: ".concat(r))}}function U_(r,t){switch(r){case"century":return q1(t);case"decade":return my(t);case"year":return gy(t);case"month":return Vp(t);case"day":return e2(t);default:throw new Error("Invalid rangeType: ".concat(r))}}function q$(r,t){switch(r){case"century":return b$(t);case"decade":return B_(t);case"year":return E_(t);case"month":return I_(t);default:throw new Error("Invalid rangeType: ".concat(r))}}function Y$(r,t){switch(r){case"decade":return B_(t,-100);case"year":return E_(t,-10);case"month":return I_(t,-12);default:throw new Error("Invalid rangeType: ".concat(r))}}function L5(r,t){switch(r){case"century":return S_(t);case"decade":return k_(t);case"year":return v$(t);case"month":return w$(t);case"day":return S$(t);default:throw new Error("Invalid rangeType: ".concat(r))}}function X$(r,t,s){var i=[t,s].sort(function(a,o){return a.getTime()-o.getTime()});return[Vd(r,i[0]),U_(r,i[1])]}function L_(r,t,s){return t===void 0&&(t=yy),s.map(function(i){return t(r,i)}).join("  ")}function J$(r,t,s){return L_(r,t,S_(s))}function D_(r,t,s){return L_(r,t,k_(s))}function Z$(r){return r.getDay()===new Date().getDay()}function M_(r,t){t===void 0&&(t=Ss.ISO_8601);var s=r.getDay();switch(t){case Ss.ISLAMIC:case Ss.HEBREW:return s===$$||s===U5;case Ss.ISO_8601:case Ss.GREGORY:return s===U5||s===Q$;default:throw new Error("Unsupported calendar type.")}}var Dl="react-calendar__navigation";function e9(r){var t=r.activeStartDate,s=r.drillUp,i=r.formatMonthYear,a=i===void 0?T_:i,o=r.formatYear,c=o===void 0?yy:o,l=r.locale,u=r.maxDate,d=r.minDate,A=r.navigationAriaLabel,f=A===void 0?"":A,p=r.navigationAriaLive,m=r.navigationLabel,g=r.next2AriaLabel,b=g===void 0?"":g,v=r.next2Label,y=v===void 0?"":v,w=r.nextAriaLabel,j=w===void 0?"":w,C=r.nextLabel,B=C===void 0?"":C,E=r.prev2AriaLabel,_=E===void 0?"":E,S=r.prev2Label,N=S===void 0?"":S,O=r.prevAriaLabel,k=O===void 0?"":O,I=r.prevLabel,R=I===void 0?"":I,Q=r.setActiveStartDate,$=r.showDoubleView,L=r.view,F=r.views,G=F.indexOf(L)>0,X=L!=="century",q=K$(L,t),T=X?G$(L,t):void 0,U=F_(L,t),K=X?W$(L,t):void 0,z=(function(){if(q.getFullYear()<0)return!0;var Z=q$(L,t);return d&&d>=Z})(),M=X&&(function(){if(T.getFullYear()<0)return!0;var Z=Y$(L,t);return d&&d>=Z})(),H=u&&u<U,Y=X&&u&&u<K;function ae(){Q(q,"prev")}function oe(){Q(T,"prev2")}function be(){Q(U,"next")}function ge(){Q(K,"next2")}function he(Z){var te=(function(){switch(L){case"century":return J$(l,c,Z);case"decade":return D_(l,c,Z);case"year":return c(l,Z);case"month":return a(l,Z);default:throw new Error("Invalid view: ".concat(L,"."))}})();return m?m({date:Z,label:te,locale:l||j_()||void 0,view:L}):te}function ke(){var Z="".concat(Dl,"__label");return Ft.createElement("button",{"aria-label":f,"aria-live":p,className:Z,disabled:!G,onClick:s,style:{flexGrow:1},type:"button"},Ft.createElement("span",{className:"".concat(Z,"__labelText ").concat(Z,"__labelText--from")},he(t)),$?Ft.createElement(Ft.Fragment,null,Ft.createElement("span",{className:"".concat(Z,"__divider")},"  "),Ft.createElement("span",{className:"".concat(Z,"__labelText ").concat(Z,"__labelText--to")},he(U))):null)}return Ft.createElement("div",{className:Dl},N!==null&&X?Ft.createElement("button",{"aria-label":_,className:"".concat(Dl,"__arrow ").concat(Dl,"__prev2-button"),disabled:M,onClick:oe,type:"button"},N):null,R!==null&&Ft.createElement("button",{"aria-label":k,className:"".concat(Dl,"__arrow ").concat(Dl,"__prev-button"),disabled:z,onClick:ae,type:"button"},R),ke(),B!==null&&Ft.createElement("button",{"aria-label":j,className:"".concat(Dl,"__arrow ").concat(Dl,"__next-button"),disabled:H,onClick:be,type:"button"},B),y!==null&&X?Ft.createElement("button",{"aria-label":b,className:"".concat(Dl,"__arrow ").concat(Dl,"__next2-button"),disabled:Y,onClick:ge,type:"button"},y):null)}var rh=function(){return rh=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},rh.apply(this,arguments)},t9=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s};function D5(r){return"".concat(r,"%")}function r2(r){var t=r.children,s=r.className,i=r.count,a=r.direction,o=r.offset,c=r.style,l=r.wrap,u=t9(r,["children","className","count","direction","offset","style","wrap"]);return Ft.createElement("div",rh({className:s,style:rh({display:"flex",flexDirection:a,flexWrap:l?"wrap":"nowrap"},c)},u),Ft.Children.map(t,function(d,A){var f=o&&A===0?D5(100*o/i):null;return Ft.cloneElement(d,rh(rh({},d.props),{style:{flexBasis:D5(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:f,marginInlineStart:f,marginInlineEnd:0}}))}))}var lb,M5;function r9(){if(M5)return lb;M5=1;var r=function(){};return lb=r,lb}var n9=r9();const s9=Tp(n9);var MA;function i9(r,t,s){return t&&t>r?t:s&&s<r?s:r}function xp(r,t){return t[0]<=r&&t[1]>=r}function a9(r,t){return r[0]<=t[0]&&r[1]>=t[1]}function R_(r,t){return xp(r[0],t)||xp(r[1],t)}function R5(r,t,s){var i=R_(t,r),a=[];if(i){a.push(s);var o=xp(r[0],t),c=xp(r[1],t);o&&a.push("".concat(s,"Start")),c&&a.push("".concat(s,"End")),o&&c&&a.push("".concat(s,"BothEnds"))}return a}function o9(r){return Array.isArray(r)?r[0]!==null&&r[1]!==null:r!==null}function l9(r){if(!r)throw new Error("args is required");var t=r.value,s=r.date,i=r.hover,a="react-calendar__tile",o=[a];if(!s)return o;var c=new Date,l=(function(){if(Array.isArray(s))return s;var m=r.dateType;if(!m)throw new Error("dateType is required when date is not an array of two dates");return L5(m,s)})();if(xp(c,l)&&o.push("".concat(a,"--now")),!t||!o9(t))return o;var u=(function(){if(Array.isArray(t))return t;var m=r.valueType;if(!m)throw new Error("valueType is required when value is not an array of two dates");return L5(m,t)})();a9(u,l)?o.push("".concat(a,"--active")):R_(u,l)&&o.push("".concat(a,"--hasActive"));var d=R5(u,l,"".concat(a,"--range"));o.push.apply(o,d);var A=Array.isArray(t)?t:[t];if(i&&A.length===1){var f=i>u[0]?[u[0],i]:[i,u[0]],p=R5(f,l,"".concat(a,"--hover"));o.push.apply(o,p)}return o}var c9=(MA={},MA[th.ARABIC]=Ss.ISLAMIC,MA[th.HEBREW]=Ss.HEBREW,MA[th.ISO_8601]=Ss.ISO_8601,MA[th.US]=Ss.GREGORY,MA);function u9(r){return r!==void 0&&r in th}var Q5=!1;function xy(r){if(u9(r)){var t=c9[r];return s9(Q5,'Specifying calendarType="'.concat(r,'" is deprecated. Use calendarType="').concat(t,'" instead.')),Q5=!0,t}return r}function by(r){for(var t=r.className,s=r.count,i=s===void 0?3:s,a=r.dateTransform,o=r.dateType,c=r.end,l=r.hover,u=r.offset,d=r.renderTile,A=r.start,f=r.step,p=f===void 0?1:f,m=r.value,g=r.valueType,b=[],v=A;v<=c;v+=p){var y=a(v);b.push(d({classes:l9({date:y,dateType:o,hover:l,value:m,valueType:g}),date:y}))}return Ft.createElement(r2,{className:t,count:i,offset:u,wrap:!0},b)}function vy(r){var t=r.activeStartDate,s=r.children,i=r.classes,a=r.date,o=r.formatAbbr,c=r.locale,l=r.maxDate,u=r.maxDateTransform,d=r.minDate,A=r.minDateTransform,f=r.onClick,p=r.onMouseOver,m=r.style,g=r.tileClassName,b=r.tileContent,v=r.tileDisabled,y=r.view,w=ee.useMemo(function(){var C={activeStartDate:t,date:a,view:y};return typeof g=="function"?g(C):g},[t,a,g,y]),j=ee.useMemo(function(){var C={activeStartDate:t,date:a,view:y};return typeof b=="function"?b(C):b},[t,a,b,y]);return Ft.createElement("button",{className:fy(i,w),disabled:d&&A(d)>a||l&&u(l)<a||v&&v({activeStartDate:t,date:a,view:y}),onClick:f?function(C){return f(a,C)}:void 0,onFocus:p?function(){return p(a)}:void 0,onMouseOver:p?function(){return p(a)}:void 0,style:m,type:"button"},o?Ft.createElement("abbr",{"aria-label":o(c,a)},s):s,j)}var ew=function(){return ew=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},ew.apply(this,arguments)},d9=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s},$5="react-calendar__century-view__decades__decade";function A9(r){var t=r.classes,s=t===void 0?[]:t,i=r.currentCentury,a=r.formatYear,o=a===void 0?yy:a,c=d9(r,["classes","currentCentury","formatYear"]),l=c.date,u=c.locale,d=[];return s&&d.push.apply(d,s),d.push($5),Uh(l).getFullYear()!==i&&d.push("".concat($5,"--neighboringCentury")),Ft.createElement(vy,ew({},c,{classes:d,maxDateTransform:my,minDateTransform:ad,view:"century"}),D_(u,o,l))}var tw=function(){return tw=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},tw.apply(this,arguments)},H5=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s};function h9(r){var t=r.activeStartDate,s=r.hover,i=r.showNeighboringCentury,a=r.value,o=r.valueType,c=H5(r,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=H$(t),u=l+(i?119:99);return Ft.createElement(by,{className:"react-calendar__century-view__decades",dateTransform:ad,dateType:"decade",end:u,hover:s,renderTile:function(d){var A=d.date,f=H5(d,["date"]);return Ft.createElement(A9,tw({key:A.getTime()},c,f,{activeStartDate:t,currentCentury:l,date:A}))},start:l,step:10,value:a,valueType:o})}var V5=function(r,t,s){if(s||arguments.length===2)for(var i=0,a=t.length,o;i<a;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return r.concat(o||Array.prototype.slice.call(t))},f9=Object.values(Ss),p9=Object.values(th),rw=["century","decade","year","month"],Q_=Kt.oneOf(V5(V5([],f9,!0),p9,!0)),S0=Kt.oneOfType([Kt.string,Kt.arrayOf(Kt.string)]),$_=function(t,s,i){var a=t,o=s,c=a[o];if(!c)return null;if(!(c instanceof Date))return new Error("Invalid prop `".concat(s,"` of type `").concat(typeof c,"` supplied to `").concat(i,"`, expected instance of `Date`."));var l=t.maxDate;return l&&c>l?new Error("Invalid prop `".concat(s,"` of type `").concat(typeof c,"` supplied to `").concat(i,"`, minDate cannot be larger than maxDate.")):null},H_=function(t,s,i){var a=t,o=s,c=a[o];if(!c)return null;if(!(c instanceof Date))return new Error("Invalid prop `".concat(s,"` of type `").concat(typeof c,"` supplied to `").concat(i,"`, expected instance of `Date`."));var l=t.minDate;return l&&c<l?new Error("Invalid prop `".concat(s,"` of type `").concat(typeof c,"` supplied to `").concat(i,"`, maxDate cannot be smaller than minDate.")):null},m9=Kt.oneOfType([Kt.func,Kt.exact({current:Kt.any})]),g9=Kt.arrayOf(Kt.oneOfType([Kt.instanceOf(Date),Kt.oneOf([null])]).isRequired),y9=Kt.oneOfType([Kt.instanceOf(Date),Kt.oneOf([null]),g9]);Kt.arrayOf(Kt.oneOf(rw));var C0=function(t,s,i){var a=t,o=s,c=a[o];return c!==void 0&&(typeof c!="string"||rw.indexOf(c)===-1)?new Error("Invalid prop `".concat(s,"` of value `").concat(c,"` supplied to `").concat(i,"`, expected one of [").concat(rw.map(function(l){return'"'.concat(l,'"')}).join(", "),"].")):null};C0.isRequired=function(t,s,i,a,o){var c=t,l=s,u=c[l];return u?C0(t,s,i):new Error("The prop `".concat(s,"` is marked as required in `").concat(i,"`, but its value is `").concat(u,"`."))};var x9=function(r){return Kt.arrayOf(r)},wy={activeStartDate:Kt.instanceOf(Date).isRequired,hover:Kt.instanceOf(Date),locale:Kt.string,maxDate:H_,minDate:$_,onClick:Kt.func,onMouseOver:Kt.func,tileClassName:Kt.oneOfType([Kt.func,S0]),tileContent:Kt.oneOfType([Kt.func,Kt.node]),value:y9,valueType:Kt.oneOf(["century","decade","year","month","day"]).isRequired};Kt.instanceOf(Date).isRequired,Kt.arrayOf(Kt.string.isRequired).isRequired,Kt.instanceOf(Date).isRequired,Kt.string,Kt.func,Kt.func,Kt.objectOf(Kt.oneOfType([Kt.string,Kt.number])),Kt.oneOfType([Kt.func,S0]),Kt.oneOfType([Kt.func,Kt.node]),Kt.func;var bp=function(){return bp=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},bp.apply(this,arguments)},V_=function(t){function s(){return Ft.createElement(h9,bp({},t))}return Ft.createElement("div",{className:"react-calendar__century-view"},s())};V_.propTypes=bp(bp({},wy),{showNeighboringCentury:Kt.bool});var nw=function(){return nw=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},nw.apply(this,arguments)},b9=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s},z5="react-calendar__decade-view__years__year";function v9(r){var t=r.classes,s=t===void 0?[]:t,i=r.currentDecade,a=r.formatYear,o=a===void 0?yy:a,c=b9(r,["classes","currentDecade","formatYear"]),l=c.date,u=c.locale,d=[];return s&&d.push.apply(d,s),d.push(z5),ad(l).getFullYear()!==i&&d.push("".concat(z5,"--neighboringDecade")),Ft.createElement(vy,nw({},c,{classes:d,maxDateTransform:gy,minDateTransform:Lh,view:"decade"}),o(u,l))}var sw=function(){return sw=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},sw.apply(this,arguments)},K5=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s};function w9(r){var t=r.activeStartDate,s=r.hover,i=r.showNeighboringDecade,a=r.value,o=r.valueType,c=K5(r,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=V$(t),u=l+(i?11:9);return Ft.createElement(by,{className:"react-calendar__decade-view__years",dateTransform:Lh,dateType:"year",end:u,hover:s,renderTile:function(d){var A=d.date,f=K5(d,["date"]);return Ft.createElement(v9,sw({key:A.getTime()},c,f,{activeStartDate:t,currentDecade:l,date:A}))},start:l,value:a,valueType:o})}var vp=function(){return vp=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},vp.apply(this,arguments)},z_=function(t){function s(){return Ft.createElement(w9,vp({},t))}return Ft.createElement("div",{className:"react-calendar__decade-view"},s())};z_.propTypes=vp(vp({},wy),{showNeighboringDecade:Kt.bool});var iw=function(){return iw=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},iw.apply(this,arguments)},j9=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s},G5=function(r,t,s){if(s||arguments.length===2)for(var i=0,a=t.length,o;i<a;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return r.concat(o||Array.prototype.slice.call(t))},N9="react-calendar__year-view__months__month";function S9(r){var t=r.classes,s=t===void 0?[]:t,i=r.formatMonth,a=i===void 0?D$:i,o=r.formatMonthYear,c=o===void 0?T_:o,l=j9(r,["classes","formatMonth","formatMonthYear"]),u=l.date,d=l.locale;return Ft.createElement(vy,iw({},l,{classes:G5(G5([],s,!0),[N9],!1),formatAbbr:c,maxDateTransform:Vp,minDateTransform:cA,view:"year"}),a(d,u))}var aw=function(){return aw=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},aw.apply(this,arguments)},W5=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s};function C9(r){var t=r.activeStartDate,s=r.hover,i=r.value,a=r.valueType,o=W5(r,["activeStartDate","hover","value","valueType"]),c=0,l=11,u=Fs(t);return Ft.createElement(by,{className:"react-calendar__year-view__months",dateTransform:function(d){var A=new Date;return A.setFullYear(u,d,1),cA(A)},dateType:"month",end:l,hover:s,renderTile:function(d){var A=d.date,f=W5(d,["date"]);return Ft.createElement(S9,aw({key:A.getTime()},o,f,{activeStartDate:t,date:A}))},start:c,value:i,valueType:a})}var B0=function(){return B0=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},B0.apply(this,arguments)},K_=function(t){function s(){return Ft.createElement(C9,B0({},t))}return Ft.createElement("div",{className:"react-calendar__year-view"},s())};K_.propTypes=B0({},wy);var ow=function(){return ow=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},ow.apply(this,arguments)},B9=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s},cb="react-calendar__month-view__days__day";function k9(r){var t=r.calendarType,s=r.classes,i=s===void 0?[]:s,a=r.currentMonthIndex,o=r.formatDay,c=o===void 0?U$:o,l=r.formatLongDate,u=l===void 0?L$:l,d=B9(r,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),A=xy(t),f=d.date,p=d.locale,m=[];return i&&m.push.apply(m,i),m.push(cb),M_(f,A)&&m.push("".concat(cb,"--weekend")),f.getMonth()!==a&&m.push("".concat(cb,"--neighboringMonth")),Ft.createElement(vy,ow({},d,{classes:m,formatAbbr:u,maxDateTransform:e2,minDateTransform:zp,view:"month"}),c(p,f))}var lw=function(){return lw=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},lw.apply(this,arguments)},q5=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s};function _9(r){var t=r.activeStartDate,s=r.calendarType,i=r.hover,a=r.showFixedNumberOfWeeks,o=r.showNeighboringMonth,c=r.value,l=r.valueType,u=q5(r,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),d=xy(s),A=Fs(t),f=id(t),p=a||o,m=yp(t,d),g=p?0:m,b=(p?-m:0)+1,v=(function(){if(a)return b+42-1;var y=P_(t);if(o){var w=new Date;w.setFullYear(A,f,y),w.setHours(0,0,0,0);var j=7-yp(w,d)-1;return y+j}return y})();return Ft.createElement(by,{className:"react-calendar__month-view__days",count:7,dateTransform:function(y){var w=new Date;return w.setFullYear(A,f,y),zp(w)},dateType:"day",hover:i,end:v,renderTile:function(y){var w=y.date,j=q5(y,["date"]);return Ft.createElement(k9,lw({key:w.getTime()},u,j,{activeStartDate:t,calendarType:s,currentMonthIndex:f,date:w}))},offset:g,start:b,value:c,valueType:l})}var G_="react-calendar__month-view__weekdays",ub="".concat(G_,"__weekday");function E9(r){for(var t=r.calendarType,s=r.formatShortWeekday,i=s===void 0?M$:s,a=r.formatWeekday,o=a===void 0?R$:a,c=r.locale,l=r.onMouseLeave,u=xy(t),d=new Date,A=cA(d),f=Fs(A),p=id(A),m=[],g=1;g<=7;g+=1){var b=new Date(f,p,g-yp(A,u)),v=o(c,b);m.push(Ft.createElement("div",{key:g,className:fy(ub,Z$(b)&&"".concat(ub,"--current"),M_(b,u)&&"".concat(ub,"--weekend"))},Ft.createElement("abbr",{"aria-label":v,title:v},i(c,b).replace(".",""))))}return Ft.createElement(r2,{className:G_,count:7,onFocus:l,onMouseOver:l},m)}var k0=function(){return k0=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},k0.apply(this,arguments)},Y5=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s},X5="react-calendar__tile";function O9(r){var t=r.onClickWeekNumber,s=r.weekNumber,i=Ft.createElement("span",null,s);if(t){var a=r.date,o=r.onClickWeekNumber,c=r.weekNumber,l=Y5(r,["date","onClickWeekNumber","weekNumber"]);return Ft.createElement("button",k0({},l,{className:X5,onClick:function(u){return o(c,a,u)},type:"button"}),i)}else{r.date,r.onClickWeekNumber,r.weekNumber;var l=Y5(r,["date","onClickWeekNumber","weekNumber"]);return Ft.createElement("div",k0({},l,{className:X5}),i)}}function I9(r){var t=r.activeStartDate,s=r.calendarType,i=r.onClickWeekNumber,a=r.onMouseLeave,o=r.showFixedNumberOfWeeks,c=xy(s),l=(function(){if(o)return 6;var A=P_(t),f=yp(t,c),p=A-(7-f);return 1+Math.ceil(p/7)})(),u=(function(){for(var A=Fs(t),f=id(t),p=py(t),m=[],g=0;g<l;g+=1)m.push(Zv(new Date(A,f,p+g*7),c));return m})(),d=u.map(function(A){return z$(A,c)});return Ft.createElement(r2,{className:"react-calendar__month-view__weekNumbers",count:l,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},d.map(function(A,f){var p=u[f];if(!p)throw new Error("date is not defined");return Ft.createElement(O9,{key:A,date:p,onClickWeekNumber:i,weekNumber:A})}))}var wp=function(){return wp=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},wp.apply(this,arguments)},P9=function(r,t){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(s[i[a]]=r[i[a]]);return s};function T9(r){if(r)for(var t=0,s=Object.entries(C$);t<s.length;t++){var i=s[t],a=i[0],o=i[1];if(o.includes(r))return a}return Ss.ISO_8601}var W_=function(t){var s=t.activeStartDate,i=t.locale,a=t.onMouseLeave,o=t.showFixedNumberOfWeeks,c=t.calendarType,l=c===void 0?T9(i):c,u=t.formatShortWeekday,d=t.formatWeekday,A=t.onClickWeekNumber,f=t.showWeekNumbers,p=P9(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function m(){return Ft.createElement(E9,{calendarType:l,formatShortWeekday:u,formatWeekday:d,locale:i,onMouseLeave:a})}function g(){return f?Ft.createElement(I9,{activeStartDate:s,calendarType:l,onClickWeekNumber:A,onMouseLeave:a,showFixedNumberOfWeeks:o}):null}function b(){return Ft.createElement(_9,wp({calendarType:l},p))}var v="react-calendar__month-view";return Ft.createElement("div",{className:fy(v,f?"".concat(v,"--weekNumbers"):"")},Ft.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},g(),Ft.createElement("div",{style:{flexGrow:1,width:"100%"}},m(),b())))};W_.propTypes=wp(wp({},wy),{calendarType:Q_,formatDay:Kt.func,formatLongDate:Kt.func,formatShortWeekday:Kt.func,formatWeekday:Kt.func,onClickWeekNumber:Kt.func,onMouseLeave:Kt.func,showFixedNumberOfWeeks:Kt.bool,showNeighboringMonth:Kt.bool,showWeekNumbers:Kt.bool});var nh=function(){return nh=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},nh.apply(this,arguments)},Vm="react-calendar",gh=["century","decade","year","month"],F9=["decade","year","month","day"],n2=new Date;n2.setFullYear(1,0,1);n2.setHours(0,0,0,0);var U9=new Date(864e13);function Df(r){return r instanceof Date?r:new Date(r)}function q_(r,t){return gh.slice(gh.indexOf(r),gh.indexOf(t)+1)}function L9(r,t,s){var i=q_(t,s);return i.indexOf(r)!==-1}function s2(r,t,s){return r&&L9(r,t,s)?r:s}function Y_(r){var t=gh.indexOf(r);return F9[t]}function D9(r,t){var s=Array.isArray(r)?r[t]:r;if(!s)return null;var i=Df(s);if(isNaN(i.getTime()))throw new Error("Invalid date: ".concat(r));return i}function X_(r,t){var s=r.value,i=r.minDate,a=r.maxDate,o=r.maxDetail,c=D9(s,t);if(!c)return null;var l=Y_(o),u=(function(){switch(t){case 0:return Vd(l,c);case 1:return U_(l,c);default:throw new Error("Invalid index value: ".concat(t))}})();return i9(u,i,a)}var i2=function(r){return X_(r,0)},J_=function(r){return X_(r,1)},M9=function(r){return[i2,J_].map(function(t){return t(r)})};function Z_(r){var t=r.maxDate,s=r.maxDetail,i=r.minDate,a=r.minDetail,o=r.value,c=r.view,l=s2(c,a,s),u=i2({value:o,minDate:i,maxDate:t,maxDetail:s})||new Date;return Vd(l,u)}function R9(r){var t=r.activeStartDate,s=r.defaultActiveStartDate,i=r.defaultValue,a=r.defaultView,o=r.maxDate,c=r.maxDetail,l=r.minDate,u=r.minDetail,d=r.value,A=r.view,f=s2(A,u,c),p=t||s;return p?Vd(f,p):Z_({maxDate:o,maxDetail:c,minDate:l,minDetail:u,value:d||i,view:A||a})}function db(r){return r&&(!Array.isArray(r)||r.length===1)}function zm(r,t){return r instanceof Date&&t instanceof Date&&r.getTime()===t.getTime()}var eE=ee.forwardRef(function(t,s){var i=t.activeStartDate,a=t.allowPartialRange,o=t.calendarType,c=t.className,l=t.defaultActiveStartDate,u=t.defaultValue,d=t.defaultView,A=t.formatDay,f=t.formatLongDate,p=t.formatMonth,m=t.formatMonthYear,g=t.formatShortWeekday,b=t.formatWeekday,v=t.formatYear,y=t.goToRangeStartOnSelect,w=y===void 0?!0:y,j=t.inputRef,C=t.locale,B=t.maxDate,E=B===void 0?U9:B,_=t.maxDetail,S=_===void 0?"month":_,N=t.minDate,O=N===void 0?n2:N,k=t.minDetail,I=k===void 0?"century":k,R=t.navigationAriaLabel,Q=t.navigationAriaLive,$=t.navigationLabel,L=t.next2AriaLabel,F=t.next2Label,G=t.nextAriaLabel,X=t.nextLabel,q=t.onActiveStartDateChange,T=t.onChange,U=t.onClickDay,K=t.onClickDecade,z=t.onClickMonth,M=t.onClickWeekNumber,H=t.onClickYear,Y=t.onDrillDown,ae=t.onDrillUp,oe=t.onViewChange,be=t.prev2AriaLabel,ge=t.prev2Label,he=t.prevAriaLabel,ke=t.prevLabel,Z=t.returnValue,te=Z===void 0?"start":Z,fe=t.selectRange,we=t.showDoubleView,Fe=t.showFixedNumberOfWeeks,_e=t.showNavigation,Ce=_e===void 0?!0:_e,ie=t.showNeighboringCentury,me=t.showNeighboringDecade,Be=t.showNeighboringMonth,Le=Be===void 0?!0:Be,ve=t.showWeekNumbers,$e=t.tileClassName,je=t.tileContent,Pe=t.tileDisabled,Te=t.value,Ye=t.view,He=ee.useState(l),it=He[0],It=He[1],dt=ee.useState(null),Pt=dt[0],vt=dt[1],tr=ee.useState(Array.isArray(u)?u.map(function(qe){return qe!==null?Df(qe):null}):u!=null?Df(u):null),Jt=tr[0],Et=tr[1],ur=ee.useState(d),vr=ur[0],Wt=ur[1],Gt=i||it||R9({activeStartDate:i,defaultActiveStartDate:l,defaultValue:u,defaultView:d,maxDate:E,maxDetail:S,minDate:O,minDetail:I,value:Te,view:Ye}),at=(function(){var qe=(function(){return fe&&db(Jt)?Jt:Te!==void 0?Te:Jt})();return qe?Array.isArray(qe)?qe.map(function(Ze){return Ze!==null?Df(Ze):null}):qe!==null?Df(qe):null:null})(),rn=Y_(S),dr=s2(Ye||vr,I,S),et=q_(I,S),an=fe?Pt:null,gr=et.indexOf(dr)<et.length-1,In=et.indexOf(dr)>0,ln=ee.useCallback(function(qe){var Ze=(function(){switch(te){case"start":return i2;case"end":return J_;case"range":return M9;default:throw new Error("Invalid returnValue.")}})();return Ze({maxDate:E,maxDetail:S,minDate:O,value:qe})},[E,S,O,te]),gn=ee.useCallback(function(qe,Ze){It(qe);var ht={action:Ze,activeStartDate:qe,value:at,view:dr};q&&!zm(Gt,qe)&&q(ht)},[Gt,q,at,dr]),Yn=ee.useCallback(function(qe,Ze){var ht=(function(){switch(dr){case"century":return K;case"decade":return H;case"year":return z;case"month":return U;default:throw new Error("Invalid view: ".concat(dr,"."))}})();ht&&ht(qe,Ze)},[U,K,z,H,dr]),Gr=ee.useCallback(function(qe,Ze){if(gr){Yn(qe,Ze);var ht=et[et.indexOf(dr)+1];if(!ht)throw new Error("Attempted to drill down from the lowest view.");It(qe),Wt(ht);var ct={action:"drillDown",activeStartDate:qe,value:at,view:ht};q&&!zm(Gt,qe)&&q(ct),oe&&dr!==ht&&oe(ct),Y&&Y(ct)}},[Gt,gr,q,Yn,Y,oe,at,dr,et]),Sn=ee.useCallback(function(){if(In){var qe=et[et.indexOf(dr)-1];if(!qe)throw new Error("Attempted to drill up from the highest view.");var Ze=Vd(qe,Gt);It(Ze),Wt(qe);var ht={action:"drillUp",activeStartDate:Ze,value:at,view:qe};q&&!zm(Gt,Ze)&&q(ht),oe&&dr!==qe&&oe(ht),ae&&ae(ht)}},[Gt,In,q,ae,oe,at,dr,et]),ce=ee.useCallback(function(qe,Ze){var ht=at;Yn(qe,Ze);var ct=fe&&!db(ht),gt;if(fe)if(ct)gt=Vd(rn,qe);else{if(!ht)throw new Error("previousValue is required");if(Array.isArray(ht))throw new Error("previousValue must not be an array");gt=X$(rn,ht,qe)}else gt=ln(qe);var ut=!fe||ct||w?Z_({maxDate:E,maxDetail:S,minDate:O,minDetail:I,value:gt,view:dr}):null;Ze.persist(),It(ut),Et(gt);var Ut={action:"onChange",activeStartDate:ut,value:gt,view:dr};if(q&&!zm(Gt,ut)&&q(Ut),T)if(fe){var $t=db(gt);if(!$t)T(gt||null,Ze);else if(a){if(Array.isArray(gt))throw new Error("value must not be an array");T([gt||null,null],Ze)}}else T(gt||null,Ze)},[Gt,a,ln,w,E,S,O,I,q,T,Yn,fe,at,rn,dr]);function Ne(qe){vt(qe)}function Re(){vt(null)}ee.useImperativeHandle(s,function(){return{activeStartDate:Gt,drillDown:Gr,drillUp:Sn,onChange:ce,setActiveStartDate:gn,value:at,view:dr}},[Gt,Gr,Sn,ce,gn,at,dr]);function Ve(qe){var Ze=qe?F_(dr,Gt):Vd(dr,Gt),ht=gr?Gr:ce,ct={activeStartDate:Ze,hover:an,locale:C,maxDate:E,minDate:O,onClick:ht,onMouseOver:fe?Ne:void 0,tileClassName:$e,tileContent:je,tileDisabled:Pe,value:at,valueType:rn};switch(dr){case"century":return Ft.createElement(V_,nh({formatYear:v,showNeighboringCentury:ie},ct));case"decade":return Ft.createElement(z_,nh({formatYear:v,showNeighboringDecade:me},ct));case"year":return Ft.createElement(K_,nh({formatMonth:p,formatMonthYear:m},ct));case"month":return Ft.createElement(W_,nh({calendarType:o,formatDay:A,formatLongDate:f,formatShortWeekday:g,formatWeekday:b,onClickWeekNumber:M,onMouseLeave:fe?Re:void 0,showFixedNumberOfWeeks:typeof Fe<"u"?Fe:we,showNeighboringMonth:Le,showWeekNumbers:ve},ct));default:throw new Error("Invalid view: ".concat(dr,"."))}}function ye(){return Ce?Ft.createElement(e9,{activeStartDate:Gt,drillUp:Sn,formatMonthYear:m,formatYear:v,locale:C,maxDate:E,minDate:O,navigationAriaLabel:R,navigationAriaLive:Q,navigationLabel:$,next2AriaLabel:L,next2Label:F,nextAriaLabel:G,nextLabel:X,prev2AriaLabel:be,prev2Label:ge,prevAriaLabel:he,prevLabel:ke,setActiveStartDate:gn,showDoubleView:we,view:dr,views:et}):null}var De=Array.isArray(at)?at:[at];return Ft.createElement("div",{className:fy(Vm,fe&&De.length===1&&"".concat(Vm,"--selectRange"),we&&"".concat(Vm,"--doubleView"),c),ref:j},ye(),Ft.createElement("div",{className:"".concat(Vm,"__viewContainer"),onBlur:fe?Re:void 0,onMouseLeave:fe?Re:void 0},Ve(),we?Ve(!0):null))}),J5=Kt.instanceOf(Date),Z5=Kt.oneOfType([Kt.string,Kt.instanceOf(Date)]),e4=Kt.oneOfType([Z5,x9(Z5)]);eE.propTypes={activeStartDate:J5,allowPartialRange:Kt.bool,calendarType:Q_,className:S0,defaultActiveStartDate:J5,defaultValue:e4,defaultView:C0,formatDay:Kt.func,formatLongDate:Kt.func,formatMonth:Kt.func,formatMonthYear:Kt.func,formatShortWeekday:Kt.func,formatWeekday:Kt.func,formatYear:Kt.func,goToRangeStartOnSelect:Kt.bool,inputRef:m9,locale:Kt.string,maxDate:H_,maxDetail:Kt.oneOf(gh),minDate:$_,minDetail:Kt.oneOf(gh),navigationAriaLabel:Kt.string,navigationAriaLive:Kt.oneOf(["off","polite","assertive"]),navigationLabel:Kt.func,next2AriaLabel:Kt.string,next2Label:Kt.node,nextAriaLabel:Kt.string,nextLabel:Kt.node,onActiveStartDateChange:Kt.func,onChange:Kt.func,onClickDay:Kt.func,onClickDecade:Kt.func,onClickMonth:Kt.func,onClickWeekNumber:Kt.func,onClickYear:Kt.func,onDrillDown:Kt.func,onDrillUp:Kt.func,onViewChange:Kt.func,prev2AriaLabel:Kt.string,prev2Label:Kt.node,prevAriaLabel:Kt.string,prevLabel:Kt.node,returnValue:Kt.oneOf(["start","end","range"]),selectRange:Kt.bool,showDoubleView:Kt.bool,showFixedNumberOfWeeks:Kt.bool,showNavigation:Kt.bool,showNeighboringCentury:Kt.bool,showNeighboringDecade:Kt.bool,showNeighboringMonth:Kt.bool,showWeekNumbers:Kt.bool,tileClassName:Kt.oneOfType([Kt.func,S0]),tileContent:Kt.oneOfType([Kt.func,Kt.node]),tileDisabled:Kt.func,value:e4,view:C0};const Q9=r=>{if(r==="Anonymous")return"Anonymous";const t=r.split(" ");return t.length===1?t[0].charAt(0)+"*".repeat(Math.max(0,t[0].length-1)):t[0]+" "+t[1].charAt(0)+"."},t4=(r,t,s,i=0)=>{const a=[],o=new Date(`2000-01-01T${r}:00`),c=new Date(`2000-01-01T${t}:00`),l=new Date(o);for(;l<c;){const u=new Date(l.getTime()+s*6e4);u<=c&&a.push({start:l.toTimeString().slice(0,5),end:u.toTimeString().slice(0,5),label:`${l.toTimeString().slice(0,5)} - ${u.toTimeString().slice(0,5)}`}),l.setMinutes(l.getMinutes()+s+i)}return a},Ab=(r,t)=>{if(!t||t.length===0)return!0;const i=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][r.getDay()];return t.includes(i)},hb=(r,t)=>{if(!t||t.length===0)return!1;const s=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0"),o=`${s}-${i}-${a}`;return t.some(c=>{const l=new Date(c),u=l.getFullYear(),d=String(l.getMonth()+1).padStart(2,"0"),A=String(l.getDate()).padStart(2,"0");return`${u}-${d}-${A}`===o})},RA=r=>{const t=r.getFullYear(),s=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0");return`${t}-${s}-${i}`},$9=()=>{const{id:r}=ty(),[t,s]=ee.useState(null),[i,a]=ee.useState(null),[o,c]=ee.useState(!0),[l,u]=ee.useState(new Date),[d,A]=ee.useState(""),[f,p]=ee.useState(""),[m,g]=ee.useState([]),[b,v]=ee.useState([]),[y,w]=ee.useState([]),[j,C]=ee.useState([]),[B,E]=ee.useState(!1),{addToBooking:_}=ac(),{user:S}=Fn(),N=yi();ee.useEffect(()=>{O(),k()},[r]),ee.useEffect(()=>{t&&i&&l&&Q()},[l,t,i]);const O=async()=>{try{const U=await(await fetch(`http://localhost:10000/api/services/${r}`)).json();if(s(U),U.storeId){console.log("Fetching store details for:",U);const z=await(await fetch(`http://localhost:10000/api/stores/${U.storeId}`)).json();a(z.store)}}catch(T){console.error("Error fetching service:",T)}finally{c(!1)}},k=async()=>{try{const T=await fetch(`http://localhost:10000/api/reviews/store/${r}`);if(T.ok){const U=await T.json();g(U||[])}}catch(T){console.error("Error fetching reviews:",T),g([])}},I=(T,U,K,z)=>{const M=new Date(`2000-01-01T${T}:00`),H=new Date(`2000-01-01T${U}:00`),Y=new Date(`2000-01-01T${K}:00`),ae=new Date(`2000-01-01T${z}:00`);return M<ae&&Y<H},R=(T,U)=>{const K=new Date(T),z=new Date(U);return RA(K)===RA(z)},Q=async()=>{if(!(!t||!i)){E(!0);try{const T=RA(l);let U=[];try{const oe=await fetch(`http://localhost:10000/api/bookings/availability/${t.storeId}?date=${T}`);oe.ok&&(U=(await oe.json()).bookings||[])}catch(oe){console.warn("Could not fetch bookings, assuming no conflicts:",oe),U=[]}const K=i.serviceSettings?.workingHours||{start:"09:00",end:"17:00"},z=i.serviceSettings?.bookingBuffer||0,M=t.duration||60,H=t4(K.start,K.end,M,z);w(H);const Y=H.filter(oe=>!U.some(ge=>{const he=ge.bookingDetails?.date,ke=ge.bookingDetails?.startTime,Z=ge.bookingDetails?.endTime;return!he||!ke||!Z||!R(he,l)?!1:I(oe.start,oe.end,ke,Z)})),ae=U.filter(oe=>oe.bookingDetails?.date&&R(oe.bookingDetails.date,l)).map(oe=>oe.bookingDetails?.startTime).filter(Boolean);v(Y),C(ae)}catch(T){console.error("Error fetching available time slots:",T);const U=i?.serviceSettings?.workingHours||{start:"09:00",end:"17:00"},K=t?.duration||60,z=t4(U.start,U.end,K);w(z),v(z),C([])}finally{E(!1)}}},$=()=>{if(!S){N("/login");return}if(S.role!=="customer"){alert("Only customers can book services");return}if(!d){alert("Please select a time slot");return}const T=b.find(z=>z.start===d);if(!T){alert("Selected time slot is no longer available");return}const U={date:RA(l),time:d,endTime:T.end,duration:t.duration,notes:f};console.log("Booking Details:",U);const K={...t,storeId:t.storeId?._id||t.storeId};_(K,U),N("/booking-summary")},L=({date:T,view:U})=>{if(U!=="month"||!i)return null;const K=i.serviceSettings?.workingDays||["monday","tuesday","wednesday","thursday","friday"],z=i.serviceSettings?.excludedDates||[],M=Ab(T,K),H=hb(T,z);return T<new Date().setHours(0,0,0,0)?null:H||!M?n.jsx("div",{className:"text-xs text-red-500 text-center",children:""}):n.jsx("div",{className:"text-xs text-green-500 text-center",children:""})},F=({date:T,view:U})=>{if(U!=="month"||!i)return"";const K=i.serviceSettings?.workingDays||["monday","tuesday","wednesday","thursday","friday"],z=i.serviceSettings?.excludedDates||[],M=Ab(T,K),H=hb(T,z);return T<new Date().setHours(0,0,0,0)?"react-calendar__tile--past":H||!M?"react-calendar__tile--unavailable":"react-calendar__tile--available"},G=({date:T,view:U})=>{if(U!=="month"||!i)return!1;const K=i.serviceSettings?.workingDays||["monday","tuesday","wednesday","thursday","friday"],z=i.serviceSettings?.excludedDates||[],M=i.serviceSettings?.advanceBookingDays||30,H=Ab(T,K),Y=hb(T,z),ae=T<new Date().setHours(0,0,0,0),oe=T>new Date(Date.now()+M*24*60*60*1e3);return ae||Y||!H||oe},X=T=>{const U=new Date,K=RA(l),z=RA(U);if(K!==z)return!1;const M=new Date,H=M.getHours(),Y=M.getMinutes(),ae=H*60+Y,[oe,be]=T.start.split(":").map(Number);return oe*60+be<=ae},q=T=>X(T)?!1:b.some(U=>U.start===T.start);return o?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-black"})}):t?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("style",{children:`
  .react-calendar__tile--available {
    background-color: #f0fdf4 !important;
    color: #166534 !important;
  }
  .react-calendar__tile--unavailable {
    background-color: #fef2f2 !important;
    color: #dc2626 !important;
  }
  .react-calendar__tile--past {
    background-color: #f3f4f6 !important;
    color: #9ca3af !important;
  }
  .react-calendar__tile--active {
    background-color: #000000 !important;
    color: white !important;
  }
  .react-calendar__tile--active.react-calendar__tile--available {
    background-color: #000000 !important;
    color: white !important;
  }
  .react-calendar__tile:hover {
    background-color: #e5e7eb !important;
  }
  .react-calendar__tile--active:hover {
    background-color: #374151 !important;
  }
`}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"mb-6",children:n.jsxs(Zt,{to:"/services",className:"flex items-center space-x-2 text-gray-600 hover:text-black transition-colors",children:[n.jsx(oc,{className:"w-4 h-4"}),n.jsx("span",{children:"Back to Services"})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx("div",{children:n.jsx(b_,{images:t.images,title:t.title})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.title}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4",children:[n.jsx(Mc,{className:"w-4 h-4"}),n.jsx("span",{className:"capitalize",children:t.category}),t.subcategory&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{className:"capitalize",children:t.subcategory})]}),t.childCategory&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{className:"capitalize",children:t.childCategory})]})]}),n.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(mn,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),n.jsxs("span",{className:"text-gray-600",children:[t.rating||0," (",m.length," reviews)"]})]}),n.jsx("span",{className:"text-gray-400",children:"|"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ti,{className:"w-4 h-4 text-gray-600"}),n.jsxs("span",{className:"text-gray-600",children:[t.bookingCount||0," bookings"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[n.jsxs("p",{className:"text-4xl font-bold text-black",children:[Br(t.price),n.jsx("span",{className:"text-lg text-gray-500 ml-2",children:t.priceType==="hourly"?"/hour":""})]}),t.oldPrice&&t.oldPrice>t.price&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-2xl text-gray-500 line-through",children:Br(t.oldPrice)}),n.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-semibold",children:[Math.round((t.oldPrice-t.price)/t.oldPrice*100),"% OFF"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:i?.profileImage?n.jsx("img",{src:i.profileImage,alt:t.storeId.name,className:"w-12 h-12 rounded-full object-cover"}):n.jsx(ei,{className:"w-6 h-6 text-gray-600"})}),n.jsxs("div",{children:[n.jsx(Zt,{to:`/store/${t.storeId}`,className:"font-semibold text-black hover:text-gray-700 transition-colors",children:t.storeId.name}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i?.isVerified&&n.jsxs("span",{className:"flex items-center text-green-600 text-xs",children:[n.jsx(Xr,{className:"w-3 h-3 mr-1"}),"Verified"]}),n.jsx("span",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:i?.storeLevel||"Bronze"})]})]})]}),n.jsxs("div",{className:"text-right text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-1 text-yellow-500",children:[n.jsx(mn,{className:"w-4 h-4 fill-current"}),n.jsx("span",{children:i?.rating||0})]}),n.jsxs("p",{className:"text-gray-600",children:[i?.completionRate||0,"% completion"]})]})]}),i?.contactInfo&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(wl,{className:"w-4 h-4"}),n.jsx("span",{children:i.contactInfo.address})]}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-1 text-gray-600",children:[n.jsx(Gu,{className:"w-4 h-4"}),n.jsx("span",{children:i.contactInfo.phone})]}),n.jsxs("div",{className:"flex items-center space-x-1 text-gray-600",children:[n.jsx(vl,{className:"w-4 h-4"}),n.jsx("span",{children:i.contactInfo.email})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Description"}),n.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.description})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Service Details"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[n.jsx(is,{className:"w-5 h-5"}),n.jsxs("span",{children:["Duration: ",t.duration," minutes"]})]}),t.bookingSettings&&n.jsxs("div",{className:"space-y-2 text-sm",children:[t.bookingSettings.minAdvanceBookingHours&&n.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[n.jsx(Ki,{className:"w-4 h-4"}),n.jsxs("span",{children:["Book at least"," ",t.bookingSettings.minAdvanceBookingHours," hours in advance"]})]}),t.bookingSettings.maxBookingsPerSlot&&n.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[n.jsx(Ti,{className:"w-4 h-4"}),n.jsxs("span",{children:["Max ",t.bookingSettings.maxBookingsPerSlot," ","booking(s) per time slot"]})]})]})]})]}),i?.serviceSettings&&n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Working Hours"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Hours:"}),n.jsxs("span",{children:[i.serviceSettings.workingHours?.start||"09:00"," -"," ",i.serviceSettings.workingHours?.end||"17:00"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Working Days:"}),n.jsx("span",{className:"capitalize",children:i.serviceSettings.workingDays?.join(", ")||"Mon - Fri"})]}),i.serviceSettings.bookingBuffer>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Buffer Time:"}),n.jsxs("span",{children:[i.serviceSettings.bookingBuffer," minutes"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center space-x-2",children:[n.jsx(ms,{className:"w-5 h-5"}),n.jsx("span",{children:"Book This Service"})]}),n.jsxs("div",{className:"mb-4 flex items-center space-x-4 text-xs",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-green-100"}),n.jsx("span",{className:"text-gray-600",children:"Available"})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-red-100"}),n.jsx("span",{className:"text-gray-600",children:"Booked"})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-100"}),n.jsx("span",{className:"text-gray-600",children:"Past/Unavailable"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Date"}),n.jsx(eE,{onChange:u,value:l,minDate:new Date,maxDate:new Date(Date.now()+(i?.serviceSettings?.advanceBookingDays||30)*24*60*60*1e3),tileContent:L,tileClassName:F,tileDisabled:G,className:"w-full border border-gray-300 rounded-lg"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Time"}),B?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-black"})}):y.length>0?n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:y.map(T=>{const U=q(T),K=j.includes(T.start),z=X(T);return n.jsxs("button",{onClick:()=>U?A(T.start):null,disabled:!U,className:`p-3 text-sm rounded-lg border transition-colors ${d===T.start?"bg-black text-white border-black":U?"bg-white text-gray-700 border-gray-300 hover:border-black":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,children:[n.jsx("div",{className:"font-medium",children:T.label}),K?n.jsx("div",{className:"text-xs text-red-500 mt-1",children:"Booked"}):z?n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Past"}):U?null:n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Unavailable"})]},T.start)})}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(mo,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),n.jsx("p",{children:"No time slots available for this date"}),n.jsx("p",{className:"text-sm",children:"Please select another date"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes (Optional)"}),n.jsx("textarea",{value:f,onChange:T=>p(T.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Any special requirements or notes..."})]}),n.jsxs("button",{onClick:$,disabled:!d,className:`w-full py-3 px-6 rounded-lg transition-colors ${d?"bg-black text-white hover:bg-gray-800":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Book Now - ",Br(t.price)]})]})]})]})]}),n.jsx("div",{className:"py-16 bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Customer Reviews"}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"flex items-center",children:[...Array(5)].map((T,U)=>n.jsx(mn,{className:`w-5 h-5 ${U<Math.floor(i?.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},U))}),n.jsx("span",{className:"text-lg font-semibold",children:i?.rating||0}),n.jsxs("span",{className:"text-gray-600",children:["(",m.length," reviews)"]})]})})]}),m.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(mn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Reviews Yet"}),n.jsx("p",{className:"text-gray-600",children:"Be the first to review this store!"})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Review Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx("div",{children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:i?.rating||0}),n.jsx("div",{className:"flex justify-center mb-2",children:[...Array(5)].map((T,U)=>n.jsx(mn,{className:`w-5 h-5 ${U<Math.floor(i?.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},U))}),n.jsxs("p",{className:"text-gray-600",children:[m.length," total reviews"]})]})}),n.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(T=>{const U=m.filter(z=>z.rating===T).length,K=m.length>0?U/m.length*100:0;return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm w-8",children:[T,""]}),n.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${K}%`}})}),n.jsx("span",{className:"text-sm text-gray-600 w-8",children:U})]},T)})})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map(T=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:Q9(T.customerId?.name||"Anonymous")}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx("div",{className:"flex items-center",children:[...Array(5)].map((U,K)=>n.jsx(mn,{className:`w-4 h-4 ${K<T.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},K))}),n.jsx("span",{className:"text-sm text-gray-500",children:new Date(T.createdAt).toLocaleDateString()})]})]}),n.jsxs("div",{className:"text-right",children:[T.orderId&&n.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Product Order"}),T.bookingId&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Service Booking"})]})]}),n.jsx("p",{className:"text-gray-700 mb-4",children:T.comment}),T.response&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-black",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Store Response"}),n.jsx("span",{className:"text-sm text-gray-500",children:new Date(T.response.respondedAt).toLocaleDateString()})]}),n.jsx("p",{className:"text-gray-700",children:T.response.message})]})]},T._id))})]})]})})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Service not found"}),n.jsx(Zt,{to:"/services",className:"text-black hover:text-gray-700",children:"Back to Services"})]})})},H9=({store:r={},user:t={},reviews:s={},onExploreClick:i,onContactClick:a})=>{const o={name:"Art Of Leather ",description:"Discover extraordinary craftsmanship and timeless elegance in our curated selection of premium products.",themeColor:"#000000ff",stats:[{label:"Sales",value:"1000+"}]},c=[{type:"video",src:"https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4",poster:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80",title:"Luxury Redefined"},{type:"image",src:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80",title:"Crafted Perfection"},{type:"image",src:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80",title:"Timeless Elegance"}],[l,u]=ee.useState(c);ee.useEffect(()=>{if(console.log("Store Hero Images:",r?.heroImages),r?.heroImages.length>0){const O=r.heroImages.map(k=>({type:"image",src:k,title:""}));u(O)}},[r?.heroImages]);const d={...o,...r};({...t});const A=s.length>0?s:Array(127).fill({}),f=O=>{const k=$=>{if($.startsWith("#")){const G=$.slice(1);return[parseInt(G.substr(0,2),16),parseInt(G.substr(2,2),16),parseInt(G.substr(4,2),16)]}if($.startsWith("rgb"))return $.match(/\d+/g).map(Number);const L=document.createElement("div");L.style.color=$,document.body.appendChild(L);const F=getComputedStyle(L).color.match(/\d+/g).map(Number);return document.body.removeChild(L),F},[I,R,Q]=k(O);return(.299*I+.587*R+.114*Q)/255>.5},p=O=>f(O)?"#000000":"#ffffff",g=(()=>{const O=d.themeColor||"#000000",k=f(O);return{primary:O,contrast:p(O),accent:k?`${O}20`:`${O}40`,buttonBg:O,buttonText:p(O),buttonHover:k?"#ffffff":"#000000",buttonHoverText:k?"#000000":"#ffffff",textShadow:k?"0 4px 8px rgba(0,0,0,0.5)":"0 4px 8px rgba(0,0,0,0.8)",buttonShadow:`0 8px 25px ${O}40`,brandGlow:`0 0 40px ${O}60`,cardBackground:k?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.15)",borderColor:`${O}60`}})(),[b,v]=ee.useState(0),[y,w]=ee.useState(!0),[j,C]=ee.useState(!0),[B,E]=ee.useState(0);ee.useEffect(()=>{const O=()=>E(window.scrollY);return window.addEventListener("scroll",O),()=>window.removeEventListener("scroll",O)},[]),ee.useEffect(()=>{if(!y)return;const O=setInterval(()=>{v(k=>(k+1)%l.length)},6e3);return()=>clearInterval(O)},[y,l.length]);const _=()=>{v(O=>(O+1)%l.length)},S=()=>{v(O=>(O-1+l.length)%l.length)},N=()=>{const O=document.querySelector(".hero-video");O&&(j?O.pause():O.play(),C(!j))};return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
          @keyframes fadeInUp {
            from {
              opacity: 0;
              transform: translateY(40px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }
          
          @keyframes fadeInScale {
            from {
              opacity: 0;
              transform: scale(0.9) translateY(30px);
            }
            to {
              opacity: 1;
              transform: scale(1) translateY(0);
            }
          }

          @keyframes slideInRight {
            from {
              opacity: 0;
              transform: translateX(50px);
            }
            to {
              opacity: 1;
              transform: translateX(0);
            }
          }

          @keyframes brandGlow {
            0%, 100% {
              text-shadow: 0 0 20px rgba(0, 0, 0, 0.6), 0 0 40px rgba(0, 0, 0, 0.4), 0 0 60px rgba(0, 0, 0, 0.2);
            }
            50% {
              text-shadow: 0 0 30px rgba(0, 0, 0, 0.8), 0 0 60px rgba(0, 0, 0, 0.6), 0 0 90px rgba(0, 0, 0, 0.4);
            }
          }
          
          .fade-in-up-1 { animation: fadeInUp 1.2s 0.3s forwards; }
          .fade-in-up-2 { animation: fadeInUp 1s 0.6s forwards; }
          .fade-in-up-3 { animation: fadeInUp 1s 0.9s forwards; }
          .fade-in-up-4 { animation: fadeInScale 1.2s 1.2s forwards; }
          .fade-in-up-5 { animation: fadeInUp 1s 1.5s forwards; }
          .slide-in-right { animation: slideInRight 1.2s 0.8s forwards; }
          .brand-glow { animation: brandGlow 3s ease-in-out infinite; }
        `}),n.jsxs("section",{className:"relative min-h-screen overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",style:{background:"radial-gradient(circle at 50% 50%, rgba(0,0,0,0.1) 0%, transparent 70%)"},children:[n.jsx("div",{className:"absolute inset-0",children:l.map((O,k)=>n.jsx("div",{className:`absolute inset-0 transition-all duration-1000 ease-in-out ${k===b?"opacity-100 scale-100":"opacity-0 scale-110"}`,style:{transform:`translateY(${B*.5}px)`},children:O.type==="video"?n.jsx("video",{className:"hero-video w-full h-full object-cover",src:O.src,poster:O.poster,autoPlay:!0,loop:!0,muted:!0,playsInline:!0}):n.jsx("img",{src:O.src,alt:O.title,className:"w-full h-full object-cover"})},k))}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-black/60"}),n.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, rgba(0,0,0,0.2) 0%, transparent 40%, rgba(0,0,0,0.1) 100%)"}}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-black/20"}),n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[[...Array(15)].map((O,k)=>n.jsx("div",{className:"absolute rounded-full animate-pulse",style:{width:Math.floor(4+Math.random()*6)+"px",height:Math.floor(4+Math.random()*6)+"px",backgroundColor:"rgba(0, 0, 0, 0.4)",left:Math.floor(Math.random()*100)+"%",top:Math.floor(Math.random()*100)+"%",animationDelay:Math.floor(Math.random()*5)+"s",animationDuration:Math.floor(4+Math.random()*6)+"s",boxShadow:"0 0 20px rgba(0, 0, 0, 0.6)"}},k)),n.jsx("div",{className:"absolute top-20 left-0 w-32 h-0.5 opacity-30 animate-pulse",style:{backgroundColor:g.primary}}),n.jsx("div",{className:"absolute bottom-32 right-20 w-24 h-0.5 opacity-40 animate-pulse",style:{backgroundColor:g.primary,animationDelay:"2s"}})]}),n.jsx("div",{className:"relative z-10 min-h-screen flex items-center",children:n.jsx("div",{className:"container mx-auto px-6 lg:px-12",children:n.jsx("div",{className:"grid lg:grid-cols-12 gap-8 lg:gap-16 items-center min-h-[80vh]",children:n.jsxs("div",{className:"lg:col-span-8 space-y-8 md:space-y-10 text-white max-w-4xl",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:space-x-4 space-y-4 sm:space-y-0 opacity-0 fade-in-up-1",children:[d.profileImage&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:d.profileImage?d.profileImage:"",alt:d.name+" logo",className:"w-16 h-16 md:w-20 md:h-20 rounded-full object-cover border-4 shadow-lg",style:{borderColor:g.primary}}),d.isVerified&&n.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 rounded-full p-1",children:n.jsx(Xr,{className:"w-4 h-4 text-white"})})]}),!d.profileImage&&n.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center border-4 shadow-lg",style:{borderColor:g.primary,backgroundColor:g.primary},children:n.jsx(ei,{className:"w-8 h-8 md:w-10 md:h-10 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-4xl sm:text-5xl md:text-7xl lg:text-8xl font-bold tracking-tight leading-none text-center sm:text-left",children:n.jsx("span",{className:`block ${d.isPremium?"brand-glow":""}`,style:{color:g.primary,textShadow:g.textShadow},children:d.name})}),d.tagline&&n.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-white/90 mt-2 font-light italic text-center sm:text-left",children:d.tagline})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-3 sm:gap-6 opacity-0 fade-in-up-3",children:[n.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2",children:[n.jsx(mn,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),n.jsx("span",{className:"text-white font-semibold",children:d.rating?.toFixed(1)||"0.0"}),n.jsxs("span",{className:"text-white/70",children:["(",A.length," reviews)"]})]}),n.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2",children:[n.jsx(Ti,{className:"w-5 h-5 text-white"}),n.jsx("span",{className:"text-white font-semibold",children:d.stats?.followersCount?.toLocaleString()||"0"}),n.jsx("span",{className:"text-white/70",children:"followers"})]}),d.isPremium&&n.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 rounded-full px-6 py-2 shadow-lg animate-pulse",children:[n.jsx(zi,{className:"w-5 h-5 text-white animate-bounce"}),n.jsx("span",{className:"text-white font-bold tracking-wide",children:"PREMIUM STORE"})]}),d.category&&n.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2",children:[n.jsx(Mc,{className:"w-5 h-5 text-white"}),n.jsx("span",{className:"text-white font-semibold capitalize",children:d.category})]}),d.location&&n.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2",children:[n.jsx(wl,{className:"w-5 h-5 text-white"}),n.jsx("span",{className:"text-white font-semibold",children:d.location})]}),d.isVerified&&n.jsxs("div",{className:"flex items-center space-x-2 bg-blue-500/20 backdrop-blur-sm rounded-full px-4 py-2",children:[n.jsx(Xr,{className:"w-5 h-5 text-blue-400"}),n.jsx("span",{className:"text-white font-semibold",children:"Verified"})]}),d.establishedYear&&n.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2",children:[n.jsx($u,{className:"w-5 h-5 text-white"}),n.jsxs("span",{className:"text-white font-semibold",children:[new Date().getFullYear()-d.establishedYear,"+ years"]})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 opacity-0 fade-in-up-4",children:[n.jsxs("button",{onClick:i,className:"group px-8 sm:px-10 py-4 sm:py-5 font-bold text-base sm:text-lg rounded-lg relative overflow-hidden transition-all duration-500 hover:scale-105 shadow-2xl w-full sm:w-auto",style:{backgroundColor:g.primary,color:g.contrast,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.4)"},children:[n.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-3",children:[n.jsx(ei,{className:"w-6 h-6"}),n.jsx("span",{className:"tracking-wide",children:d.type==="product"?d.customCTA?.primary||"SHOP NOW":d.customCTA?.primary||"BOOK SERVICE"}),n.jsx(Mo,{className:"w-6 h-6 group-hover:translate-x-2 transition-transform duration-300"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),n.jsx("button",{onClick:a,className:"group px-8 sm:px-10 py-4 sm:py-5 border-3 font-bold text-base sm:text-lg rounded-lg transition-all duration-500 hover:scale-105 bg-white/10 backdrop-blur-sm w-full sm:w-auto",style:{borderColor:g.primary,color:"white",backdropFilter:"blur(10px)"},onMouseEnter:O=>{O.target.style.backgroundColor=g.primary,O.target.style.color=g.contrast,O.target.style.borderColor=g.primary},onMouseLeave:O=>{O.target.style.backgroundColor="rgba(255,255,255,0.1)",O.target.style.color="white",O.target.style.borderColor=g.primary},children:n.jsx("span",{className:"flex items-center justify-center space-x-3",children:n.jsx("span",{className:"tracking-wide",children:d.customCTA?.secondary||"GET IN TOUCH"})})})]}),n.jsxs("div",{className:"hidden md:flex items-center flex-wrap gap-6 text-sm opacity-0 fade-in-up-5",children:[n.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2",children:[n.jsx(Wu,{className:"w-5 h-5 text-green-400"}),n.jsx("span",{className:"text-white font-medium",children:"Secure Shopping"})]}),n.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2",children:[n.jsx(Hu,{className:"w-5 h-5 text-blue-400"}),n.jsx("span",{className:"text-white font-medium",children:"Fast Delivery"})]}),n.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2",children:[n.jsx(Xr,{className:"w-5 h-5 text-yellow-400"}),n.jsx("span",{className:"text-white font-medium",children:"Quality Guaranteed"})]}),d.stats?.totalSales&&n.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2",children:[n.jsx($u,{className:"w-5 h-5 text-purple-400"}),n.jsxs("span",{className:"text-white font-medium",children:[d.stats.totalSales,"+ Happy Customers"]})]})]})]})})})})]}),n.jsx("div",{className:"absolute bottom-4 sm:bottom-8 left-1/2 transform -translate-x-1/2 z-20",children:n.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6 bg-black/20 backdrop-blur-lg rounded-full px-3 sm:px-6 py-2 sm:py-3",children:[n.jsx("div",{className:"flex space-x-2 sm:space-x-3",children:l.map((O,k)=>n.jsx("button",{onClick:()=>v(k),className:`h-3 rounded-full transition-all duration-500 hover:scale-110 ${k===b?"w-8 shadow-lg":"w-3 bg-white/50 hover:bg-white/70"}`,style:{backgroundColor:k===b?g.primary:void 0,boxShadow:k===b?g.brandGlow:void 0}},k))}),n.jsx("div",{className:"w-px h-6 bg-white/30"}),n.jsx("button",{onClick:()=>w(!y),className:"p-3 rounded-full backdrop-blur-sm hover:scale-110 transition-all duration-300 text-white border-2 border-white/30 hover:border-white/50",style:{backgroundColor:g.cardBackground},children:y?n.jsx(zv,{className:"w-5 h-5"}):n.jsx(Kv,{className:"w-5 h-5"})}),l[b]?.type==="video"&&n.jsx("button",{onClick:N,className:"p-3 rounded-full backdrop-blur-sm hover:scale-110 transition-all duration-300 text-white border-2 border-white/30 hover:border-white/50",style:{backgroundColor:g.cardBackground},children:j?n.jsx(zv,{className:"w-5 h-5"}):n.jsx(Kv,{className:"w-5 h-5"})})]})}),n.jsx("button",{onClick:S,className:"absolute left-2 sm:left-6 top-1/2 transform -translate-y-1/2 z-20 p-2 sm:p-4 rounded-full backdrop-blur-lg border-2 border-white/20 hover:border-white/40 transition-all duration-300 text-white opacity-70 hover:opacity-100 hover:scale-110 group shadow-lg",style:{backgroundColor:g.cardBackground},children:n.jsx(oA,{className:"w-5 h-5 sm:w-7 sm:h-7 group-hover:-translate-x-1 transition-transform duration-300"})}),n.jsx("button",{onClick:_,className:"absolute right-2 sm:right-6 top-1/2 transform -translate-y-1/2 z-20 p-2 sm:p-4 rounded-full backdrop-blur-lg border-2 border-white/20 hover:border-white/40 transition-all duration-300 text-white opacity-70 hover:opacity-100 hover:scale-110 group shadow-lg",style:{backgroundColor:g.cardBackground},children:n.jsx(Jl,{className:"w-5 h-5 sm:w-7 sm:h-7 group-hover:translate-x-1 transition-transform duration-300"})})]})]})},r4="http://localhost:10000",n4=async r=>{const t=await r.json();if(!r.ok)throw new Error(t.message||"API request failed");return t},V9=({store:r,onReveal:t})=>{const{user:s}=Fn(),[i,a]=ee.useState(null),[o,c]=ee.useState(null),[l,u]=ee.useState(!1),[d,A]=ee.useState(null),f=async y=>{const w=await fetch(`${r4}/api/wallet/customer/reveals/${y}/eligibility`,{credentials:"include",headers:{"Content-Type":"application/json"}});return n4(w)},p=async y=>{const w=await fetch(`${r4}/api/wallet/customer/reveals/${y}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});return n4(w)};ee.useEffect(()=>{(async()=>{if(!s||!r?._id){s||a({canReveal:!1,reasons:{loginRequired:!0}});return}try{const w=await f(r._id);console.log(" Reveal eligibility response:",w),w.success&&(a({canReveal:w.data.canReveal,reasons:w.data.reasons,hasValidReveal:w.data.hasValidReveal,revealExpiresAt:w.data.revealExpiresAt}),w.data.hasValidReveal&&w.data.contactDetails&&c(w.data.contactDetails))}catch(w){console.error("Failed to check reveal eligibility:",w),a({canReveal:!1,reasons:{error:!0}})}})()},[s,r?._id]);const m=async()=>{if(!s){window.location.href="/login";return}if(!i?.canReveal){if(i?.reasons?.alreadyRevealed){A("You have already revealed this store's contact details today");return}A("Contact details are currently unavailable");return}u(!0),A(null);try{const y=await p(r._id);y.success&&(c(y.data.contactDetails),a(w=>({...w,canReveal:!1,reasons:{...w?.reasons,alreadyRevealed:!0}})),t&&t(y.data))}catch(y){A(y.message)}finally{u(!1)}},b=s?o?i?.hasValidReveal?{disabled:!0,text:"Contact Details Available",icon:Xr,color:"bg-black",description:"Contact details available until "+(i.revealExpiresAt?new Date(i.revealExpiresAt).toLocaleString():"tomorrow")}:{disabled:!0,text:"Already Revealed",icon:Xr,color:"bg-black",description:"Contact details revealed today"}:i?.canReveal?{disabled:!1,text:"View Contact Details",icon:Gn,color:"bg-black hover:bg-gray-800",description:"Click to reveal contact information"}:i?.reasons?.insufficientOwnerCredits?{disabled:!0,text:"Contact Unavailable",icon:Ki,color:"bg-gray-300",description:"Store owner needs to purchase credits"}:i?.reasons?.error?{disabled:!0,text:"Contact Unavailable",icon:Ki,color:"bg-gray-300",description:"Unable to load contact information"}:{disabled:!0,text:"Loading...",icon:Yf,color:"bg-gray-400",description:"Loading contact information"}:{disabled:!1,text:"Login to View Contacts",icon:aa,color:"bg-black hover:bg-gray-800",description:"Click to login and view contact details"},v=b.icon;return n.jsxs("div",{className:"space-y-3",children:[o&&n.jsxs("div",{className:"bg-gray-100 border border-gray-300 rounded-lg p-4 space-y-2",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-2 text-black font-medium",children:[n.jsx(Xr,{className:"w-4 h-4"}),n.jsx("span",{children:"Contact Details Revealed"})]})}),n.jsxs("div",{className:"space-y-1 text-sm",children:[o.email&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Email:"})," ",n.jsx("a",{href:`mailto:${o.email}`,className:"text-black hover:text-gray-600 hover:underline",children:o.email})]}),o.phone&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Phone:"})," ",n.jsx("a",{href:`tel:${o.phone}`,className:"text-black hover:text-gray-600 hover:underline",children:o.phone})]}),o.whatsapp&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"WhatsApp:"})," ",n.jsx("a",{href:`https://wa.me/${o.whatsapp.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"text-black hover:text-gray-600 hover:underline",children:o.whatsapp})]}),o.address&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Address:"})," ",n.jsx("span",{className:"text-gray-700",children:o.address})]})]})]}),n.jsxs("button",{onClick:m,disabled:b.disabled||l,className:`w-full flex items-center justify-center space-x-2 px-4 py-3 rounded-lg text-white font-medium transition-colors ${b.color} disabled:opacity-50 disabled:cursor-not-allowed`,title:b.description,children:[l?n.jsx(Yf,{className:"w-4 h-4 animate-spin"}):n.jsx(v,{className:`w-4 h-4 ${b.icon===Yf?"animate-spin":""}`}),n.jsx("span",{children:l?"Revealing...":b.text})]}),d&&n.jsx("div",{className:"bg-gray-100 border border-gray-300 rounded p-3",children:n.jsxs("div",{className:"flex items-center space-x-2 text-black text-sm",children:[n.jsx(Ki,{className:"w-4 h-4"}),n.jsx("span",{children:d})]})})]})};var tE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s4=Ft.createContext&&Ft.createContext(tE),z9=["attr","size","title"];function K9(r,t){if(r==null)return{};var s=G9(r,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(s[i]=r[i])}return s}function G9(r,t){if(r==null)return{};var s={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(t.indexOf(i)>=0)continue;s[i]=r[i]}return s}function _0(){return _0=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},_0.apply(this,arguments)}function i4(r,t){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),s.push.apply(s,i)}return s}function E0(r){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?i4(Object(s),!0).forEach(function(i){W9(r,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):i4(Object(s)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(s,i))})}return r}function W9(r,t,s){return t=q9(t),t in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function q9(r){var t=Y9(r,"string");return typeof t=="symbol"?t:t+""}function Y9(r,t){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var i=s.call(r,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function rE(r){return r&&r.map((t,s)=>Ft.createElement(t.tag,E0({key:s},t.attr),rE(t.child)))}function Gc(r){return t=>Ft.createElement(X9,_0({attr:E0({},r.attr)},t),rE(r.child))}function X9(r){var t=s=>{var{attr:i,size:a,title:o}=r,c=K9(r,z9),l=a||s.size||"1em",u;return s.className&&(u=s.className),r.className&&(u=(u?u+" ":"")+r.className),Ft.createElement("svg",_0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,i,c,{className:u,style:E0(E0({color:r.color||s.color},s.style),r.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&Ft.createElement("title",null,o),r.children)};return s4!==void 0?Ft.createElement(s4.Consumer,null,s=>t(s)):t(tE)}function J9(r){return Gc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(r)}function Z9(r){return Gc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(r)}function eH(r){return Gc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(r)}function tH(r){return Gc({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"},child:[]}]})(r)}function rH(r){return Gc({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm169.5 338.9c-3.5 8.1-18.1 14-44.8 18.2-1.4 1.9-2.5 9.8-4.3 15.9-1.1 3.7-3.7 5.9-8.1 5.9h-.2c-6.2 0-12.8-2.9-25.8-2.9-17.6 0-23.7 4-37.4 13.7-14.5 10.3-28.4 19.1-49.2 18.2-21 1.6-38.6-11.2-48.5-18.2-13.8-9.7-19.8-13.7-37.4-13.7-12.5 0-20.4 3.1-25.8 3.1-5.4 0-7.5-3.3-8.3-6-1.8-6.1-2.9-14.1-4.3-16-13.8-2.1-44.8-7.5-45.5-21.4-.2-3.6 2.3-6.8 5.9-7.4 46.3-7.6 67.1-55.1 68-57.1 0-.1.1-.2.2-.3 2.5-5 3-9.2 1.6-12.5-3.4-7.9-17.9-10.7-24-13.2-15.8-6.2-18-13.4-17-18.3 1.6-8.5 14.4-13.8 21.9-10.3 5.9 2.8 11.2 4.2 15.7 4.2 3.3 0 5.5-.8 6.6-1.4-1.4-23.9-4.7-58 3.8-77.1C183.1 100 230.7 96 244.7 96c.6 0 6.1-.1 6.7-.1 34.7 0 68 17.8 84.3 54.3 8.5 19.1 5.2 53.1 3.8 77.1 1.1.6 2.9 1.3 5.7 1.4 4.3-.2 9.2-1.6 14.7-4.2 4-1.9 9.6-1.6 13.6 0 6.3 2.3 10.3 6.8 10.4 11.9.1 6.5-5.7 12.1-17.2 16.6-1.4.6-3.1 1.1-4.9 1.7-6.5 2.1-16.4 5.2-19 11.5-1.4 3.3-.8 7.5 1.6 12.5.1.1.1.2.2.3.9 2 21.7 49.5 68 57.1 4 1 7.1 5.5 4.9 10.8z"},child:[]}]})(r)}function nH(r){return Gc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(r)}function sH(r){return Gc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(r)}function iH(r){return Gc({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(r)}function a4(r){return Gc({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(r)}const aH=({store:r={},user:t={},reviews:s=[],onFollowChange:i,followData:a,setFollowData:o})=>{const[c,l]=ee.useState(!1),[u,d]=ee.useState(r.stats?.followersCount||0),[A,f]=ee.useState(!1),[p,m]=ee.useState(!1),g=L=>L>=1e6?`${(L/1e6).toFixed(L%1e6===0?0:1)}M`:L>=1e3?`${(L/1e3).toFixed(L%1e3===0?0:1)}K`:L.toString(),b=async()=>{if(a.isFollowing){m(!0);return}try{f(!0);const L=await fetch(`http://localhost:10000/api/stores/${y._id}/follow`,{method:"POST",credentials:"include"}),F=await L.json();L.ok?(o(G=>({...G,isFollowing:F.isFollowing})),d(F.followersCount),i&&i(F.isFollowing,F.followersCount)):alert(F.error||"Something went wrong")}catch(L){console.error("Follow error:",L),alert("Something went wrong")}finally{f(!1)}},v=async()=>{try{f(!0);const L=await fetch(`http://localhost:10000/api/stores/${y._id}/follow`,{method:"POST",credentials:"include"}),F=await L.json();L.ok?(o(G=>({...G,isFollowing:F.isFollowing})),d(F.followersCount),i&&i(F.isFollowing,F.followersCount)):alert(F.error||"Something went wrong")}catch(L){console.error("Unfollow error:",L),alert("Something went wrong")}finally{f(!1),m(!1)}},y=r,w=s.length>0?s:Array(0).fill({}),C=(L=>{const F=T=>{if(T.startsWith("#")){const z=T.slice(1);return[parseInt(z.substr(0,2),16),parseInt(z.substr(2,2),16),parseInt(z.substr(4,2),16)]}if(T.startsWith("rgb"))return T.match(/\d+/g).map(Number);const U=document.createElement("div");U.style.color=T,document.body.appendChild(U);const K=getComputedStyle(U).color.match(/\d+/g).map(Number);return document.body.removeChild(U),K},[G,X,q]=F(L);return(.299*G+.587*X+.114*q)/255>.5})(y.themeColor),B=L=>{const F=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(L);return F?{r:parseInt(F[1],16),g:parseInt(F[2],16),b:parseInt(F[3],16)}:null},E=async()=>{const L={title:y.name||"Check out this store",text:`Check out ${y.name||"this store"} - ${y.description||""}`,url:window.location.href};try{navigator.share?await navigator.share(L):(await navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))}catch(F){console.error("Error sharing:",F);try{await navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")}catch(G){console.error("Clipboard error:",G)}}},S=(L=>{const F=B(L);return F?{primary:L,light:`rgba(${F.r}, ${F.g}, ${F.b}, 0.1)`,lighter:`rgba(${F.r}, ${F.g}, ${F.b}, 0.05)`,dark:`rgba(${F.r}, ${F.g}, ${F.b}, 0.8)`,medium:`rgba(${F.r}, ${F.g}, ${F.b}, 0.6)`}:{primary:L,light:L+"20",lighter:L+"10",dark:L}})(y.themeColor),N={color:C?"#ffffffff":"#000000ff",backgroundColor:C?"#000000ff":"#ffffffff"},O=L=>`LKR ${(L/1e3).toFixed(0)}K`,I=(()=>{const L={Bronze:{color:"#cd7f32",icon:$u},Silver:{color:"#c0c0c0",icon:$u},Gold:{color:"#ffd700",icon:zi},Premium:{color:y.themeColor,icon:zi}};return L[y.storeLevel]||L.Bronze})(),R=L=>({facebook:{icon:J9,color:"#1877F2",hoverColor:"#166FE5"},instagram:{icon:Z9,color:"#E4405F",hoverColor:"#D93B55"},youtube:{icon:iH,color:"#FF0000",hoverColor:"#E60000"},tiktok:{icon:nH,color:"#000000",hoverColor:"#333333"},linkedin:{icon:eH,color:"#0A66C2",hoverColor:"#0958A5"},pinterest:{icon:tH,color:"#BD081C",hoverColor:"#A8071A"},snapchat:{icon:rH,color:"#FFFC00",hoverColor:"#E6E300",textColor:"#000000"},website:{icon:a4,color:"#6B7280",hoverColor:"#4B5563"},twitter:{icon:sH,color:"#1DA1F2",hoverColor:"#1A91DA"}})[L]||{icon:a4,color:"#6B7280",hoverColor:"#4B5563"},Q=L=>({facebook:"Facebook",instagram:"Instagram",youtube:"YouTube",tiktok:"TikTok",linkedin:"LinkedIn",pinterest:"Pinterest",snapchat:"Snapchat",website:"Website",twitter:"Twitter"})[L]||L.charAt(0).toUpperCase()+L.slice(1),$=y.socialLinks&&typeof y.socialLinks=="object"?Object.entries(y.socialLinks).filter(([L,F])=>F&&typeof F=="string"&&F.trim()!==""&&F.trim()!=="undefined"&&F.trim()!=="null").map(([L,F])=>{const G=R(L);return{icon:G.icon,label:Q(L),url:F.startsWith("http")?F:`https://${F}`,platform:L,color:G.color,hoverColor:G.hoverColor,available:!0}}):[];return n.jsx("div",{className:"py-4 sm:py-8",style:N,children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 sm:gap-6 lg:gap-8",children:[n.jsx("div",{className:"lg:col-span-3",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start space-y-4 sm:space-y-0 sm:space-x-8",children:[n.jsxs("div",{className:"relative group flex-shrink-0 mx-auto sm:mx-0",children:[y.isPremium&&n.jsx("div",{className:"absolute -inset-2 rounded-full opacity-30 group-hover:opacity-50 transition-opacity duration-300 blur-sm",style:{background:`linear-gradient(45deg, ${S.primary}, ${S.medium})`}}),n.jsxs("div",{className:"relative",children:[y.profileImage&&n.jsx("img",{src:y.profileImage,alt:y.name,className:`w-24 h-24 sm:w-20 sm:h-20 rounded-full object-cover shadow-lg ${y.isPremium?"border-3":"border-2 border-gray-200"}`,style:y.isPremium?{borderColor:S.primary}:{}}),n.jsxs("div",{className:"absolute -bottom-1 -right-1 flex space-x-1",children:[y.isVerified&&n.jsx("div",{title:"Verified",className:"w-6 h-6 rounded-full border-2 border-white shadow-sm flex items-center justify-center bg-blue-500",children:n.jsx(Xr,{className:"w-3 h-3 text-white"})}),y.isPremium&&n.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white shadow-sm flex items-center justify-center bg-blue-500",style:{backgroundColor:I.color},children:n.jsx(zi,{className:"w-3 h-3 text-white"})})]})]})]}),n.jsxs("div",{className:"flex-1 space-y-4 text-center sm:text-left",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 mb-2",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-light tracking-wide",style:{color:N.color},children:y.name}),n.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-2",children:[y.isVerified&&n.jsx(Xr,{className:"w-5 h-5",style:{color:S.primary}}),y.isPremium&&n.jsx(zi,{className:"w-5 h-5",style:{color:I.color}}),y.isFeatured&&n.jsx($u,{className:"w-5 h-5 text-yellow-500"})]}),n.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-2 sm:ml-auto",children:[!a.isOwnStore&&n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("button",{onClick:b,disabled:A,className:`flex items-center space-x-2 px-4 py-3 sm:py-2 rounded-full font-medium text-sm transition-all duration-300 min-h-[44px] ${a.isFollowing?"hover:opacity-80":"hover:opacity-90 shadow-md"}`,style:a.isFollowing?{backgroundColor:S.light,color:S.primary,border:`1px solid ${S.primary}`}:{backgroundColor:S.light,color:S.primary},children:[A?n.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):a.isFollowing?n.jsx(OR,{className:"w-4 h-4"}):n.jsx(Kk,{className:"w-4 h-4"}),n.jsx("span",{children:A?"Loading...":a.isFollowing?"Following":"Follow"}),n.jsx("span",{className:"px-2 py-1 text-xs rounded-full font-medium",style:a.isFollowing?{backgroundColor:S.light,color:S.primary}:{backgroundColor:S.light,color:S.primary},children:g(u)})]})}),a.isOwnStore&&n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("span",{className:"flex items-center space-x-1 px-3 py-2 rounded-full text-sm font-medium",style:{backgroundColor:S.light,color:"#000000",border:`1px solid ${S.primary}`},children:[n.jsx(Ti,{className:"w-4 h-4"}),n.jsxs("span",{children:[g(u)," followers"]})]})}),n.jsxs("button",{onClick:E,className:"flex items-center space-x-1 px-3 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all duration-300 text-sm",children:[n.jsx(tA,{className:"w-4 h-4"}),n.jsx("span",{children:"Share"})]})]})]}),n.jsxs("div",{className:"flex items-center flex-wrap gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(mn,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),n.jsx("span",{className:"font-medium",style:{color:C?"#666":"#ccc"},children:y.rating||0}),n.jsxs("span",{className:"text-xs",style:{color:C?"#999":"#666"},children:["(",w.length," reviews)"]})]}),n.jsx("div",{className:"h-3 w-px bg-gray-300"}),n.jsxs("span",{className:"capitalize text-xs font-medium tracking-wider px-2 py-1 rounded-full",style:{color:S.primary,backgroundColor:S.light},children:[y.type," Collection"]}),n.jsxs("span",{className:"text-xs font-medium tracking-wider px-2 py-1 rounded-full",style:{color:I.color,backgroundColor:`${I.color}20`},children:[y.storeLevel," Seller"]}),n.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["Member since"," ",y.createdAt?new Date(y.createdAt).getFullYear():"Unknown"]})]})]}),n.jsx("p",{className:"text-sm sm:text-base leading-relaxed max-w-lg",style:{color:C?"#555":"#bbb"},children:y.description}),y.badges&&y.badges.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:y.badges.map((L,F)=>n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:S.light,color:S.primary},children:L},F))}),n.jsxs("div",{className:"border-l-2 pl-4 py-2",style:{borderColor:S.light},children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"text-sm font-medium",style:{color:N.color},children:y.ownerId?.name||"Store Owner"}),y.ownerId?.verified&&n.jsx(Xr,{className:"w-4 h-4",style:{color:S.primary}})]}),n.jsx("p",{className:"text-xs",style:{color:C?"#777":"#999"},children:"Owner & Founder"})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4 pt-2",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[n.jsx(ti,{className:"w-3 h-3",style:{color:S.primary}}),y.isPremium&&n.jsx(zi,{className:"w-3 h-3",style:{color:I.color}})]}),n.jsx("p",{className:"text-base sm:text-lg font-light tracking-wider",style:{color:N.color},children:O(y.totalSales||0)}),n.jsx("p",{className:"text-xs font-medium tracking-wide",style:{color:S.primary},children:"SALES"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold",style:{color:S.primary},children:(y.stats?.totalOrdersOrBookings||0).toLocaleString()}),n.jsx("p",{className:"text-xs text-gray-500",children:y.type==="product"?"Orders":"Bookings"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold",style:{color:S.primary},children:y.stats.views||0}),n.jsx("p",{className:"text-xs text-gray-500",children:"Views"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold",style:{color:N.color},children:O(y.stats.avgPurchaseAmount||0)}),n.jsx("p",{className:"text-xs text-gray-500",children:"Avg Order"})]})]}),$.length>0&&n.jsx("div",{className:"flex justify-center flex-wrap gap-3 pt-3",children:$.map(L=>{const F=L.icon;return n.jsx("a",{href:L.url,target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 sm:w-10 sm:h-10 rounded-full flex items-center justify-center transition-all duration-300 group transform hover:scale-110 hover:shadow-lg",style:{background:L.platform==="instagram"?"linear-gradient(45deg, #833ab4, #fd1d1d, #fcb045)":L.backgroundColor||L.color,color:L.textColor||"#ffffff"},onMouseEnter:G=>{L.platform!=="instagram"&&(G.target.style.backgroundColor=L.hoverColor),G.target.style.transform="scale(1.1)",G.target.style.boxShadow=`0 8px 25px ${L.backgroundColor||L.color}40`},onMouseLeave:G=>{L.platform!=="instagram"&&(G.target.style.backgroundColor=L.backgroundColor||L.color),G.target.style.transform="scale(1)",G.target.style.boxShadow="none"},title:L.label,children:n.jsx(F,{className:"w-5 h-5"})},L.platform)})})]})]})}),n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:`rounded-2xl p-4 sm:p-5 border shadow-sm ${y.isPremium?"bg-gradient-to-br from-white/90 to-gray-50/80 backdrop-blur-sm":"bg-gradient-to-br from-gray-50/80 to-white/60 backdrop-blur-sm"}`,style:y.isPremium?{borderColor:S.primary+"30",boxShadow:`0 0 20px ${S.primary}10`}:{borderColor:"#e5e7eb50"},children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("h3",{className:"text-sm font-medium mb-3 flex items-center space-x-2",style:{color:N.color},children:[n.jsx("span",{children:"Contact Details"}),n.jsx("div",{className:"w-6 h-px bg-gradient-to-r to-transparent",style:{backgroundColor:S.primary}})]}),n.jsx(V9,{store:y})]}),n.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.serviceSettings?.workingHours&&n.jsxs("div",{children:[n.jsxs("h4",{className:"text-xs font-medium mb-2 flex items-center space-x-1",style:{color:N.color},children:[n.jsx(is,{className:"w-3 h-3",style:{color:S.primary}}),n.jsx("span",{children:"Hours"})]}),n.jsx("div",{className:"text-xs text-gray-600",children:(()=>{const L=y.serviceSettings.workingDays||[],{start:F,end:G}=y.serviceSettings.workingHours;if(L.length===0)return"Closed";const X=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],q={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"},T=L.sort((z,M)=>X.indexOf(z)-X.indexOf(M));if(T.length===5&&["monday","tuesday","wednesday","thursday","friday"].every(z=>T.includes(z)))return n.jsxs("div",{children:[n.jsx("div",{children:"Mon-Fri"}),n.jsxs("div",{children:[F," - ",G]})]});const K=T.map(z=>q[z]).join(", ");return n.jsxs("div",{children:[n.jsx("div",{children:K}),n.jsxs("div",{children:[F," - ",G]})]})})()})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs font-medium mb-2",style:{color:N.color},children:"Performance"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Response:"}),n.jsx("span",{className:"font-medium",style:{color:S.primary},children:y.responseTime>=24?`${Math.floor(y.responseTime/24)} days`:`${y.responseTime||0}h`})]}),r.type==="product"&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Avg. delivery:"}),n.jsxs("span",{className:"font-medium text-green-600",children:[y.shippingInfo?.deliveryDaysMin||0," -"," ",y.shippingInfo?.deliveryDaysMax||0," days"]})]})]})]})]})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-4",children:[n.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Unfollow ",y.name,"?"]}),n.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"You'll stop receiving updates about this store."}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:v,disabled:A,className:"flex-1 bg-red-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-red-600 transition-colors",children:A?"Unfollowing...":"Unfollow"}),n.jsx("button",{onClick:()=>m(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})})})};var Hg={exports:{}};/*! For license information please see browser.umd.js.LICENSE.txt */var oH=Hg.exports,o4;function lH(){return o4||(o4=1,(function(r,t){(function(s,i){r.exports=i()})(typeof self<"u"?self:oH,()=>(()=>{var s={118:o=>{o.exports=function(c){return c!=c}},170:(o,c,l)=>{function u(O){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},u(O)}var d=l(3609),A=l(8995),f=l(7768),p=l(7236),m=new Set(["$and","$or"]),g=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),b=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),v=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),y=new Set(["$arrayElemAt","$first","$last"]),w=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),j=new Set(["$not"]);function C(O,k,I){if(S(O)||O===null)return O;O.$cond!=null?Array.isArray(O.$cond)?O.$cond=O.$cond.map(function(F){return C(F,k,I)}):(O.$cond.if=C(O.$cond.if,k,I),O.$cond.then=C(O.$cond.then,k,I),O.$cond.else=C(O.$cond.else,k,I)):O.$ifNull!=null?O.$ifNull.map(function(F){return C(F,k,I)}):O.$switch!=null&&(Array.isArray(O.$switch.branches)&&(O.$switch.branches=O.$switch.branches.map(function(F){return C(F,k,I)})),"default"in O.$switch&&(O.$switch.default=C(O.$switch.default,k,I)));for(var R=0,Q=Object.keys(O);R<Q.length;R++){var $=Q[R];m.has($)?O[$]=O[$].map(function(F){return C(F,k,I)}):g.has($)?O[$]=_(O[$],k,I):b.has($)?O[$]=E(O[$]):v.has($)?O[$]=B(O[$]):j.has($)&&(O[$]=C(O[$],k,I))}if(O.$in&&(O.$in=(function(F,G,X){var q=F[1];if(!S(q))return F;var T=F[0],U=G.path(q.slice(1));if(U!==null){if(!U.$isMongooseArray)throw new Error("Path must be an array for $in");return[U.$isMongooseDocumentArray?U.$embeddedSchemaType.cast(T):U.caster.cast(T),q]}if(X===!1)return F;if(X==="throw")throw new A("$in")})(O.$in,k,I)),O.$size&&(O.$size=B(O.$size)),O.$round){var L=O.$round;if(!Array.isArray(L)||L.length<1||L.length>2)throw new d("Array",L,"$round");O.$round=L.map(function(F){return B(F)})}return p(O),O}function B(O){if(!N(O))return O;try{return f(O)}catch{throw new d("Number",O)}}function E(O){if(!Array.isArray(O)){if(!N(O))return O;try{return f(O)}catch{throw new d("Number",O)}}return O.map(function(k){if(!N(k))return k;try{return f(k)}catch{throw new d("Number",k)}})}function _(O,k,I){if(!Array.isArray(O)||O.length!==2)throw new Error("Comparison operator must be an array of length 2");O[0]=C(O[0],k,I);var R=O[0];if(N(O[1])){var Q=null,$=null,L=null;if(S(R))Q=R.slice(1),$=k.path(Q);else if(u(R)==="object"&&R!=null)for(var F=0,G=Object.keys(R);F<G.length;F++){var X=G[F];w.has(X)&&S(R[X])?(Q=R[X].slice(1)+"."+X,L=f):y.has(X)&&S(R[X])&&(Q=R[X].slice(1)+"."+X,($=k.path(R[X].slice(1)))!=null&&($.$isMongooseDocumentArray?$=$.$embeddedSchemaType:$.$isMongooseArray&&($=$.caster)))}var q=u(O[1])==="object"&&O[1]!=null&&O[1].$literal!=null;if($!=null)O[1]=q?{$literal:$.cast(O[1].$literal)}:$.cast(O[1]);else if(L!=null)if(q)try{O[1]={$literal:L(O[1].$literal)}}catch{throw new d(L.name.replace(/^cast/,""),O[1],Q+".$literal")}else try{O[1]=L(O[1])}catch{throw new d(L.name.replace(/^cast/,""),O[1],Q)}else{if(Q!=null&&I===!0)return;if(Q!=null&&I==="throw")throw new A(Q)}}else O[1]=C(O[1]);return O}function S(O){return typeof O=="string"&&O[0]==="$"}function N(O){return!(typeof O=="string"&&O[0]==="$"||u(O)==="object"&&O!==null&&Object.keys(O).find(function(k){return k[0]==="$"})&&O.$literal==null)}o.exports=function(O,k,I){if(typeof O=="boolean")return O;if(u(O)!=="object"||O===null)throw new Error("`$expr` must be an object or boolean literal");return C(O,k,I)}},209:(o,c,l)=>{function u(p){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u(p)}var d=l(2403),A=l(5825),f=l(6583);o.exports=d?function(p){return d(p)}:A?function(p){if(!p||u(p)!=="object"&&typeof p!="function")throw new TypeError("getProto: not an object");return A(p)}:f?function(p){return f(p)}:null},241:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}function d(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!g})()}function A(g){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},A(g)}function f(g,b){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,y){return v.__proto__=y,v},f(g,b)}var p=(function(g){function b(){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,b,arguments)}return(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),w&&f(y,w)})(b,g),v=b,Object.defineProperty(v,"prototype",{writable:!1}),v;var v})(l(8879)),m=l(5761);Object.defineProperty(p.prototype,"of",m),o.exports=p},354:o=>{function c(m){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},c(m)}var l=1e3,u=60*l,d=60*u,A=24*d,f=7*A;function p(m,g,b,v){var y=g>=1.5*b;return Math.round(m/b)+" "+v+(y?"s":"")}o.exports=function(m,g){g=g||{};var b,v,y=c(m);if(y==="string"&&m.length>0)return(function(w){if(!((w=String(w)).length>100)){var j=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(w);if(j){var C=parseFloat(j[1]);switch((j[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*C;case"weeks":case"week":case"w":return C*f;case"days":case"day":case"d":return C*A;case"hours":case"hour":case"hrs":case"hr":case"h":return C*d;case"minutes":case"minute":case"mins":case"min":case"m":return C*u;case"seconds":case"second":case"secs":case"sec":case"s":return C*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return C;default:return}}}})(m);if(y==="number"&&isFinite(m))return g.long?(b=m,(v=Math.abs(b))>=A?p(b,v,A,"day"):v>=d?p(b,v,d,"hour"):v>=u?p(b,v,u,"minute"):v>=l?p(b,v,l,"second"):b+" ms"):(function(w){var j=Math.abs(w);return j>=A?Math.round(w/A)+"d":j>=d?Math.round(w/d)+"h":j>=u?Math.round(w/u)+"m":j>=l?Math.round(w/l)+"s":w+"ms"})(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))}},433:(o,c,l)=>{function u(C){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},u(C)}function d(C,B){var E=Object.keys(C);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(C);B&&(_=_.filter(function(S){return Object.getOwnPropertyDescriptor(C,S).enumerable})),E.push.apply(E,_)}return E}function A(C){for(var B=1;B<arguments.length;B++){var E=arguments[B]!=null?arguments[B]:{};B%2?d(Object(E),!0).forEach(function(_){f(C,_,E[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(E)):d(Object(E)).forEach(function(_){Object.defineProperty(C,_,Object.getOwnPropertyDescriptor(E,_))})}return C}function f(C,B,E){return(B=(function(_){var S=(function(N){if(u(N)!="object"||!N)return N;var O=N[Symbol.toPrimitive];if(O!==void 0){var k=O.call(N,"string");if(u(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(N)})(_);return u(S)=="symbol"?S:S+""})(B))in C?Object.defineProperty(C,B,{value:E,enumerable:!0,configurable:!0,writable:!0}):C[B]=E,C}var p=l(3609),m=l(6426),g=l(5413),b=l(4327),v=l(9460);function y(C,B){m.call(this,C,B,"Int32")}y.schemaName="Int32",y.defaultOptions={},y.prototype=Object.create(m.prototype),y.prototype.constructor=y,y._cast=g,y.set=m.set,y.setters=[],y.get=m.get,y._defaultCaster=function(C){if(C!=null&&(typeof C!="number"||C!==(0|C)||C<-2147483648||C>2147483647))throw new Error;return C},y.cast=function(C){return arguments.length===0||(C===!1&&(C=this._defaultCaster),this._cast=C),this._cast},y._checkRequired=function(C){return C!=null},y.checkRequired=m.checkRequired,y.prototype.checkRequired=function(C){return this.constructor._checkRequired(C)},y.prototype.cast=function(C){var B;B=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():y.cast();try{return B(C)}catch(E){throw new p("Int32",C,this.path,E,this)}};var w=A(A({},m.prototype.$conditionalHandlers),{},{$gt:j,$gte:j,$lt:j,$lte:j,$bitsAllClear:v,$bitsAnyClear:v,$bitsAllSet:v,$bitsAnySet:v});function j(C,B){return this.castForQuery(null,C,B)}Object.defineProperty(y.prototype,"$conditionalHandlers",{enumerable:!1,value:w}),y.prototype.castForQuery=function(C,B,E){var _;if(C!=null)return(_=this.$conditionalHandlers[C])?_.call(this,B):this.applySetters(B,E);try{return this.applySetters(B,E)}catch(S){throw S instanceof p&&S.path===this.path&&this.$fullPath!=null&&(S.path=this.$fullPath),S}},y.prototype.toJSONSchema=function(C){var B=this.options.required&&typeof this.options.required!="function";return b("number","int",C?.useBsonType,B)},y.prototype.autoEncryptionType=function(){return"int"},o.exports=y},486:o=>{o.exports=function(c){var l={_id:{auto:!0}};l._id[c.options.typeKey]="ObjectId",c.add(l)}},533:(o,c,l)=>{var u=l(8213),d=l(7352);o.exports=function(A,f){if(typeof A!="string"&&typeof A!="function")throw new u('Invalid ref at path "'+f+'". Got '+d.inspect(A,{depth:0}))}},542:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(l){return!!l&&(c(l)==="object"||typeof l=="function")&&typeof l.then=="function"}},608:(o,c,l)=>{var u=l(5832).hp;o.exports=function(d){return u.isBuffer(d)||Object.prototype.toString.call(d)==="[object Object]"}},622:(o,c,l)=>{function u(g,b){var v=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!v){if(Array.isArray(g)||(v=(function(E,_){if(E){if(typeof E=="string")return d(E,_);var S={}.toString.call(E).slice(8,-1);return S==="Object"&&E.constructor&&(S=E.constructor.name),S==="Map"||S==="Set"?Array.from(E):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?d(E,_):void 0}})(g))||b){v&&(g=v);var y=0,w=function(){};return{s:w,n:function(){return y>=g.length?{done:!0}:{done:!1,value:g[y++]}},e:function(E){throw E},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j,C=!0,B=!1;return{s:function(){v=v.call(g)},n:function(){var E=v.next();return C=E.done,E},e:function(E){B=!0,j=E},f:function(){try{C||v.return==null||v.return()}finally{if(B)throw j}}}}function d(g,b){(b==null||b>g.length)&&(b=g.length);for(var v=0,y=Array(b);v<b;v++)y[v]=g[v];return y}var A=l(4009),f=l(8768),p=l(7930).modelSymbol;function m(g,b){this.path=b,this.getters=[],this.setters=[],this.options=Object.assign({},g)}m.prototype._applyDefaultGetters=function(){if(!(this.getters.length>0||this.setters.length>0)){var g="$"+this.path;this.getters.push(function(){return this.$locals[g]}),this.setters.push(function(b){this.$locals[g]=b})}},m.prototype.clone=function(){var g=new m(this.options,this.path);return g.getters=[].concat(this.getters),g.setters=[].concat(this.setters),g},m.prototype.get=function(g){return this.getters.push(g),this},m.prototype.set=function(g){return this.setters.push(g),this},m.prototype.applyGetters=function(g,b){f.hasUserDefinedProperty(this.options,["ref","refPath"])&&b.$$populatedVirtuals&&b.$$populatedVirtuals.hasOwnProperty(this.path)&&(g=b.$$populatedVirtuals[this.path]);var v,y=g,w=u(this.getters);try{for(w.s();!(v=w.n()).done;)y=v.value.call(b,y,this,b)}catch(j){w.e(j)}finally{w.f()}return y},m.prototype.applySetters=function(g,b){var v,y=g,w=u(this.setters);try{for(w.s();!(v=w.n()).done;)y=v.value.call(b,y,this,b)}catch(j){w.e(j)}finally{w.f()}return y},m.prototype._getModelNamesForPopulate=function(g){if(this.options.refPath)return A(this.options.refPath,g,this.path);var b;return(b=typeof this.options.ref!="function"||this.options.ref[p]?this.options.ref:this.options.ref.call(g,g))==null||Array.isArray(b)?b:[b]},o.exports=m},668:(o,c,l)=>{var u=Array.prototype.slice,d=l(6312),A=Object.keys,f=A?function(m){return A(m)}:l(6544),p=Object.keys;f.shim=function(){if(Object.keys){var m=(function(){var g=Object.keys(arguments);return g&&g.length===arguments.length})(1,2);m||(Object.keys=function(g){return d(g)?p(u.call(g)):p(g)})}else Object.keys=f;return Object.keys||f},o.exports=f},674:(o,c,l)=>{var u=l(3414);o.exports=function(d){return u(d)||d===0?d:d<0?-1:1}},766:(o,c)=>{var l=o.exports={};l.DocumentNotFoundError=null,l.general={},l.general.default="Validator failed for path `{PATH}` with value `{VALUE}`",l.general.required="Path `{PATH}` is required.",l.Number={},l.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).",l.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).",l.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.",l.Date={},l.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).",l.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).",l.String={},l.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.",l.String.match="Path `{PATH}` is invalid ({VALUE}).",l.String.minlength="Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).",l.String.maxlength="Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH})."},783:o=>{o.exports=ReferenceError},791:(o,c,l)=>{function u(f,p){var m=typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(!m){if(Array.isArray(f)||(m=(function(j,C){if(j){if(typeof j=="string")return d(j,C);var B={}.toString.call(j).slice(8,-1);return B==="Object"&&j.constructor&&(B=j.constructor.name),B==="Map"||B==="Set"?Array.from(j):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?d(j,C):void 0}})(f))||p){m&&(f=m);var g=0,b=function(){};return{s:b,n:function(){return g>=f.length?{done:!0}:{done:!1,value:f[g++]}},e:function(j){throw j},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,y=!0,w=!1;return{s:function(){m=m.call(f)},n:function(){var j=m.next();return y=j.done,j},e:function(j){w=!0,v=j},f:function(){try{y||m.return==null||m.return()}finally{if(w)throw v}}}}function d(f,p){(p==null||p>f.length)&&(p=f.length);for(var m=0,g=Array(p);m<p;m++)g[m]=f[m];return g}var A=l(3703);o.exports=function(f,p,m){var g,b=m!=null?Object.keys(A(f.tree,m,{})):Object.keys(f.tree),v=new Set(Object.keys(p));if(v.size>1){g=new Set;var y,w=u(b);try{for(w.s();!(y=w.n()).done;){var j=y.value;v.has(j)&&g.add(j)}}catch(_){w.e(_)}finally{w.f()}var C,B=u(v);try{for(B.s();!(C=B.n()).done;){var E=C.value;g.has(E)||g.add(E)}}catch(_){B.e(_)}finally{B.f()}g=Array.from(g)}else g=Array.from(v);return g}},863:(o,c,l)=>{var u=l(3305),d=l(5549);o.exports=function(A){if(A==null||u(A,"ObjectId"))return A;if(A._id){if(u(A._id,"ObjectId"))return A._id;if(A._id.toString instanceof Function)return new d(A._id.toString())}return A.toString instanceof Function?new d(A.toString()):new d(A)}},953:(o,c,l)=>{var u=l(5484);o.exports=function(){return u()&&!!Symbol.toStringTag}},988:o=>{var c=Object.defineProperty||!1;if(c)try{c({},"a",{value:1})}catch{c=!1}o.exports=c},1007:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}function d(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!g})()}function A(g){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},A(g)}function f(g,b){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,y){return v.__proto__=y,v},f(g,b)}var p=(function(g){function b(){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,b,arguments)}return(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),w&&f(y,w)})(b,g),v=b,Object.defineProperty(v,"prototype",{writable:!1}),v;var v})(l(8879)),m=l(5761);Object.defineProperty(p.prototype,"min",m),Object.defineProperty(p.prototype,"max",m),Object.defineProperty(p.prototype,"enum",m),Object.defineProperty(p.prototype,"populate",m),o.exports=p},1058:(o,c,l)=>{var u=l(2696);o.exports=function(d,A){if(d==null)return null;for(var f=0,p=Object.keys(d);f<p.length;f++){var m=d[p[f]];if(m.schema&&m.schema.discriminatorMapping&&u(m.schema.discriminatorMapping.value,A))return m}return null}},1091:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(l){return l!=null&&c(l)==="object"&&l.$slice==null&&l.$elemMatch==null&&l.$meta==null&&l.$==null}},1129:(o,c,l)=>{function u(b){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},u(b)}function d(){try{var b=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!b})()}function A(b){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},A(b)}function f(b,v){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,w){return y.__proto__=w,y},f(b,v)}var p=l(8213),m=l(7352),g=(function(b){function v(w,j,C,B){var E;(function(S,N){if(!(S instanceof N))throw new TypeError("Cannot call a class as a function")})(this,v);var _=p.messages;return(E=(function(S,N,O){return N=A(N),(function(k,I){if(I&&(u(I)=="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R})(k)})(S,d()?Reflect.construct(N,O||[],A(S).constructor):N.apply(S,O))})(this,v,[_.DocumentNotFoundError!=null?typeof _.DocumentNotFoundError=="function"?_.DocumentNotFoundError(w,j):_.DocumentNotFoundError:'No document found for query "'+m.inspect(w)+'" on model "'+j+'"'])).result=B,E.numAffected=C,E.filter=w,E.query=w,E}return(function(w,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(j&&j.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),j&&f(w,j)})(v,b),y=v,Object.defineProperty(y,"prototype",{writable:!1}),y;var y})(p);Object.defineProperty(g.prototype,"name",{value:"DocumentNotFoundError"}),o.exports=g},1199:o=>{o.exports=function(c,l){var u=Object.keys(c),d=Object.keys(l);if(u.length!==d.length)return!1;for(var A=0;A<u.length;A++){var f=u[A];if(f!==d[A]||c[f]!==l[f])return!1}return!0}},1226:o=>{o.exports=function(c){return c==null?null:Object.keys(c)[0]}},1243:(o,c)=>{c.isMongooseArray=function(l){return Array.isArray(l)&&l.isMongooseArray}},1244:(o,c,l)=>{var u=l(3609);o.exports=function(d,A){if(d==null)return d;if(d._id&&typeof d._id=="string")return d._id;if(d.toString&&d.toString!==Object.prototype.toString&&!Array.isArray(d))return d.toString();throw new u("string",d,A)}},1260:(o,c)=>{var l=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]).concat(["validate"]);c.Ut=l},1313:(o,c,l)=>{var u=l(486);o.exports=function(d,A){return A==null||A._id==null||(d=d.clone(),A._id?d.paths._id||(u(d),d.options._id=!0):(d.remove("_id"),d.options._id=!1)),d}},1344:(o,c,l)=>{o.exports=l(6353).UUID},1347:(o,c)=>{c.isMongooseDocumentArray=function(l){return Array.isArray(l)&&l.isMongooseDocumentArray}},1350:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v,y,w){return(function(j,C){if(!(j instanceof C))throw new TypeError("Cannot call a class as a function")})(this,g),(function(j,C,B){return C=A(C),(function(E,_){if(_&&(u(_)=="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S})(E)})(j,d()?Reflect.construct(C,B||[],A(j).constructor):C.apply(j,B))})(this,g,['Parameter "'+y+'" to '+w+'() must be an object, got "'+v.toString()+'" (type '+u(v)+")"])}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"ObjectParameterError"}),o.exports=p},1417:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,g),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,g,["For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+v.join(`
  `)+`
Use Model.updateOne() to update these arrays instead.`])}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"DivergentArrayError"}),o.exports=p},1464:(o,c,l)=>{var u=l(5807);if(u)try{u([],"length")}catch{u=null}o.exports=u},1469:(o,c,l)=>{function u(N){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},u(N)}function d(N,O){var k=Object.keys(N);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(N);O&&(I=I.filter(function(R){return Object.getOwnPropertyDescriptor(N,R).enumerable})),k.push.apply(k,I)}return k}function A(N,O,k){return(O=(function(I){var R=(function(Q){if(u(Q)!="object"||!Q)return Q;var $=Q[Symbol.toPrimitive];if($!==void 0){var L=$.call(Q,"string");if(u(L)!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Q)})(I);return u(R)=="symbol"?R:R+""})(O))in N?Object.defineProperty(N,O,{value:k,enumerable:!0,configurable:!0,writable:!0}):N[O]=k,N}function f(){var N,O,k=typeof Symbol=="function"?Symbol:{},I=k.iterator||"@@iterator",R=k.toStringTag||"@@toStringTag";function Q(U,K,z,M){var H=K&&K.prototype instanceof L?K:L,Y=Object.create(H.prototype);return p(Y,"_invoke",(function(ae,oe,be){var ge,he,ke,Z=0,te=be||[],fe=!1,we={p:0,n:0,v:N,a:Fe,f:Fe.bind(N,4),d:function(_e,Ce){return ge=_e,he=0,ke=N,we.n=Ce,$}};function Fe(_e,Ce){for(he=_e,ke=Ce,O=0;!fe&&Z&&!ie&&O<te.length;O++){var ie,me=te[O],Be=we.p,Le=me[2];_e>3?(ie=Le===Ce)&&(ke=me[(he=me[4])?5:(he=3,3)],me[4]=me[5]=N):me[0]<=Be&&((ie=_e<2&&Be<me[1])?(he=0,we.v=Ce,we.n=me[1]):Be<Le&&(ie=_e<3||me[0]>Ce||Ce>Le)&&(me[4]=_e,me[5]=Ce,we.n=Le,he=0))}if(ie||_e>1)return $;throw fe=!0,Ce}return function(_e,Ce,ie){if(Z>1)throw TypeError("Generator is already running");for(fe&&Ce===1&&Fe(Ce,ie),he=Ce,ke=ie;(O=he<2?N:ke)||!fe;){ge||(he?he<3?(he>1&&(we.n=-1),Fe(he,ke)):we.n=ke:we.v=ke);try{if(Z=2,ge){if(he||(_e="next"),O=ge[_e]){if(!(O=O.call(ge,ke)))throw TypeError("iterator result is not an object");if(!O.done)return O;ke=O.value,he<2&&(he=0)}else he===1&&(O=ge.return)&&O.call(ge),he<2&&(ke=TypeError("The iterator does not provide a '"+_e+"' method"),he=1);ge=N}else if((O=(fe=we.n<0)?ke:ae.call(oe,we))!==$)break}catch(me){ge=N,he=1,ke=me}finally{Z=1}}return{value:O,done:fe}}})(U,z,M),!0),Y}var $={};function L(){}function F(){}function G(){}O=Object.getPrototypeOf;var X=[][I]?O(O([][I]())):(p(O={},I,function(){return this}),O),q=G.prototype=L.prototype=Object.create(X);function T(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,G):(U.__proto__=G,p(U,R,"GeneratorFunction")),U.prototype=Object.create(q),U}return F.prototype=G,p(q,"constructor",G),p(G,"constructor",F),F.displayName="GeneratorFunction",p(G,R,"GeneratorFunction"),p(q),p(q,R,"Generator"),p(q,I,function(){return this}),p(q,"toString",function(){return"[object Generator]"}),(f=function(){return{w:Q,m:T}})()}function p(N,O,k,I){var R=Object.defineProperty;try{R({},"",{})}catch{R=0}p=function(Q,$,L,F){if($)R?R(Q,$,{value:L,enumerable:!F,configurable:!F,writable:!F}):Q[$]=L;else{var G=function(X,q){p(Q,X,function(T){return this._invoke(X,q,T)})};G("next",0),G("throw",1),G("return",2)}},p(N,O,k,I)}function m(N){return(function(O){if(Array.isArray(O))return v(O)})(N)||(function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)})(N)||b(N)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function g(N,O){var k=typeof Symbol<"u"&&N[Symbol.iterator]||N["@@iterator"];if(!k){if(Array.isArray(N)||(k=b(N))||O){k&&(N=k);var I=0,R=function(){};return{s:R,n:function(){return I>=N.length?{done:!0}:{done:!1,value:N[I++]}},e:function(F){throw F},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Q,$=!0,L=!1;return{s:function(){k=k.call(N)},n:function(){var F=k.next();return $=F.done,F},e:function(F){L=!0,Q=F},f:function(){try{$||k.return==null||k.return()}finally{if(L)throw Q}}}}function b(N,O){if(N){if(typeof N=="string")return v(N,O);var k={}.toString.call(N).slice(8,-1);return k==="Object"&&N.constructor&&(k=N.constructor.name),k==="Map"||k==="Set"?Array.from(N):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?v(N,O):void 0}}function v(N,O){(O==null||O>N.length)&&(O=N.length);for(var k=0,I=Array(O);k<O;k++)I[k]=N[k];return I}var y=l(5022),w=l(8442),j=l(4450),C=l(2068).X,B=l(3703),E=l(8768),_=l(4301),S={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0};o.exports=function(N,O,k,I,R,Q,$){if(!k||!k.instanceOfSchema)throw new Error("You must pass a valid discriminator Schema");if(Q=Q==null||Q,N.schema.discriminatorMapping&&!N.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+O+'" can only be a discriminator of the root model');if(R){var L=B(N.base,"options.applyPluginsToDiscriminators",!1)||!Q;N.base._applyPlugins(k,{skipTopLevel:!L})}else Q||w(k);var F=N.schema.options.discriminatorKey,G=N.schema.path(F);if(G!=null)E.hasUserDefinedProperty(G.options,"select")||(G.options.select=!0),G.options.$skipDiscriminatorCheck=!0;else{var X={};X[F]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},X[F][N.schema.options.typeKey]=String,N.schema.add(X),C({prop:F,prototype:N.prototype,options:N.schema.options})}if(k.path(F)&&k.path(F).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+O+'" cannot have field with name "'+F+'"');var q=O;if((typeof I=="string"&&I.length||I!=null)&&(q=I),(function(T,U){var K=f().m(ae);if(T.encryptionType()!=null||U.encryptionType()!=null){var z,M=g(ae(Y(T),Y(U)));try{for(M.s();!(z=M.n()).done;){var H=z.value;if(T._hasEncryptedField(H)&&U._hasEncryptedField(H))throw new Error("encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=".concat(H));if(T._hasEncryptedField(H)||U._hasEncryptedField(H))throw new Error("encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=".concat(H))}}catch(oe){M.e(oe)}finally{M.f()}}function Y(oe){return[].concat(m(Object.keys(oe.paths)),m(Object.keys(oe.singleNestedPaths)))}function ae(oe,be){var ge,he,ke,Z,te;return f().w(function(fe){for(;;)switch(fe.n){case 0:ge=new Set(oe),he=g(be),fe.p=1,he.s();case 2:if((ke=he.n()).done){fe.n=4;break}if(Z=ke.value,!ge.has(Z)){fe.n=3;break}return fe.n=3,Z;case 3:fe.n=2;break;case 4:fe.n=6;break;case 5:fe.p=5,te=fe.v,he.e(te);case 6:return fe.p=6,he.f(),fe.f(6);case 7:return fe.a(2)}},K,null,[[1,5,6,7]])}})(N.schema,k),(function(T,U){T._baseSchema=U,U.paths._id&&U.paths._id.options&&!U.paths._id.options.auto&&T.remove("_id");for(var K=[],z=0,M=Object.keys(U.paths);z<M.length;z++){var H=M[z];if(T.nested[H])K.push(H);else if(H.indexOf(".")!==-1){var Y,ae="",oe=g(H.split(".").slice(0,-1));try{for(oe.s();!(Y=oe.n()).done;){var be=Y.value;ae+=(ae.length?".":"")+be,(T.paths[ae]instanceof y||T.singleNestedPaths[ae]instanceof y)&&K.push(H)}}catch(je){oe.e(je)}finally{oe.f()}}}T.obj=(function(je){for(var Pe=1;Pe<arguments.length;Pe++){var Te=arguments[Pe]!=null?arguments[Pe]:{};Pe%2?d(Object(Te),!0).forEach(function(Ye){A(je,Ye,Te[Ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(je,Object.getOwnPropertyDescriptors(Te)):d(Object(Te)).forEach(function(Ye){Object.defineProperty(je,Ye,Object.getOwnPropertyDescriptor(Te,Ye))})}return je})({},T.obj),_(T,U),T._gatherChildSchemas();for(var ge=0,he=K;ge<he.length;ge++){var ke=he[ge];delete T.paths[ke]}T.childSchemas.forEach(function(je){je.model.prototype.$__setSchema(je.schema)});var Z={};Z[F]={default:q,select:!0,set:function(je){if(je===q||Array.isArray(q)&&E.deepEqual(je,q))return q;throw new Error(`Can't set discriminator key "`+F+'"')},$skipDiscriminatorCheck:!0},Z[F][T.options.typeKey]=G?G.options[T.options.typeKey]:String,T.add(Z),T.discriminatorMapping={key:F,value:q,isRoot:!1},U.options.collection&&(T.options.collection=U.options.collection);var te=T.options.toJSON,fe=T.options.toObject,we=T.options._id,Fe=T.options.id,_e=Object.keys(T.options);T.options.discriminatorKey=U.options.discriminatorKey;for(var Ce=T._userProvidedOptions,ie=0,me=_e;ie<me.length;ie++){var Be=me[ie];if(!S[Be]&&Be in Ce&&!E.deepEqual(T.options[Be],U.options[Be]))throw new Error("Can't customize discriminator option "+Be+" (can only modify "+Object.keys(S).join(", ")+")")}T.options=j(U.options);for(var Le=0,ve=Object.keys(Ce);Le<ve.length;Le++){var $e=ve[Le];T.options[$e]=Ce[$e]}te&&(T.options.toJSON=te),fe&&(T.options.toObject=fe),we!==void 0&&(T.options._id=we),T.options.id=Fe,Q&&(T.s.hooks=N.schema.s.hooks.merge(T.s.hooks)),R&&(T.plugins=Array.prototype.slice.call(U.plugins)),T.callQueue=U.callQueue.concat(T.callQueue),delete T._requiredpaths})(k,N.schema),N.discriminators||(N.discriminators={}),N.schema.discriminatorMapping||(N.schema.discriminatorMapping={key:F,value:null,isRoot:!0}),N.schema.discriminators||(N.schema.discriminators={}),N.schema.discriminators[O]=k,N.discriminators[O]&&!k.options.overwriteModels&&!$)throw new Error('Discriminator with name "'+O+'" already exists');return k}},1505:o=>{o.exports=function(c,l,u,d,A){var f=l!=null&&l.updatedAt===!1,p=l!=null&&l.createdAt===!1,m=u!=null?u():c.ownerDocument().constructor.base.now();if(!p&&(c.isNew||c.$isSubdocument)&&d&&!c.$__getValue(d)&&c.$__isSelected(d)&&c.$set(d,m,void 0,{overwriteImmutable:!0}),!f&&A&&(c.isNew||c.$isModified())){var g=m;c.isNew&&d!=null&&(g=c.$__getValue(d)),c.$set(A,g)}}},1635:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,g),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,g,["Can't validate() the same doc multiple times in parallel. Document: "+v._doc._id])}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"ParallelValidateError"}),o.exports=p},1679:o=>{typeof Object.create=="function"?o.exports=function(c,l){l&&(c.super_=l,c.prototype=Object.create(l.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:o.exports=function(c,l){if(l){c.super_=l;var u=function(){};u.prototype=l.prototype,c.prototype=new u,c.prototype.constructor=c}}},1697:o=>{o.exports=Math.max},1732:(o,c,l)=>{function u(j){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},u(j)}function d(j,C){var B=Object.keys(j);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(j);C&&(E=E.filter(function(_){return Object.getOwnPropertyDescriptor(j,_).enumerable})),B.push.apply(B,E)}return B}function A(j){for(var C=1;C<arguments.length;C++){var B=arguments[C]!=null?arguments[C]:{};C%2?d(Object(B),!0).forEach(function(E){f(j,E,B[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(B)):d(Object(B)).forEach(function(E){Object.defineProperty(j,E,Object.getOwnPropertyDescriptor(B,E))})}return j}function f(j,C,B){return(C=(function(E){var _=(function(S){if(u(S)!="object"||!S)return S;var N=S[Symbol.toPrimitive];if(N!==void 0){var O=N.call(S,"string");if(u(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(S)})(E);return u(_)=="symbol"?_:_+""})(C))in j?Object.defineProperty(j,C,{value:B,enumerable:!0,configurable:!0,writable:!0}):j[C]=B,j}var p=l(3609),m=l(6426),g=l(3704),b=l(4327);function v(j,C){m.call(this,j,C,"Double")}function y(j){return this.cast(j)}v.schemaName="Double",v.defaultOptions={},v.prototype=Object.create(m.prototype),v.prototype.constructor=v,v._cast=g,v.set=m.set,v.setters=[],v.get=m.get,v._defaultCaster=function(j){if(j!=null&&j._bsontype!=="Double")throw new Error;return j},v.cast=function(j){return arguments.length===0||(j===!1&&(j=this._defaultCaster),this._cast=j),this._cast},v._checkRequired=function(j){return j!=null},v.checkRequired=m.checkRequired,v.prototype.checkRequired=function(j){return this.constructor._checkRequired(j)},v.prototype.cast=function(j){var C;C=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():v.cast();try{return C(j)}catch(B){throw new p("Double",j,this.path,B,this)}};var w=A(A({},m.prototype.$conditionalHandlers),{},{$gt:y,$gte:y,$lt:y,$lte:y});Object.defineProperty(v.prototype,"$conditionalHandlers",{enumerable:!1,value:w}),v.prototype.toJSONSchema=function(j){var C=this.options.required&&typeof this.options.required!="function";return b("number","double",j?.useBsonType,C)},v.prototype.autoEncryptionType=function(){return"double"},o.exports=v},1793:(o,c,l)=>{var u=l(7300),d=l(2789);o.exports=function A(f){if(f==null)return null;var p=Object.keys(f),m=null;if(p.length===1&&p[0]==="_id")m=!f._id;else for(var g=0;g<p.length;++g){var b,v=p[g];if(v!=="_id"&&u(f[v])&&(m=d(f[v])?(b=A(f[v]))!==null&&b!==void 0?b:m:!f[v])!=null)break}return m}},1824:(o,c,l)=>{function u(A){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},u(A)}var d=l(3703);o.exports=function(A,f,p,m,g,b){var v=m,y=v,w=d(g,"timestamps",!0);if(!w||v==null)return m;var j,C,B,E=w!=null&&w.createdAt===!1,_=w!=null&&w.updatedAt===!1;if(b)return m&&m.$set&&(m=m.$set,v.$set={},y=v.$set),_||!p||m[p]||(y[p]=A),E||!f||m[f]||(y[f]=A),v;if(m=m||{},Array.isArray(v))return p==null||v.push({$set:(j={},C=p,B=A,(C=(function(G){var X=(function(q){if(u(q)!="object"||!q)return q;var T=q[Symbol.toPrimitive];if(T!==void 0){var U=T.call(q,"string");if(u(U)!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(q)})(G);return u(X)=="symbol"?X:X+""})(C))in j?Object.defineProperty(j,C,{value:B,enumerable:!0,configurable:!0,writable:!0}):j[C]=B,j)}),v;if(v.$set=v.$set||{},!_&&p&&(!m.$currentDate||!m.$currentDate[p])){var S=!1;if(p.indexOf(".")!==-1)for(var N=p.split("."),O=1;O<N.length;++O){var k=N.slice(-O).join("."),I=N.slice(0,-O).join(".");if(m[I]!=null){m[I][k]=A,S=!0;break}if(m.$set&&m.$set[I]){m.$set[I][k]=A,S=!0;break}}S||(v.$set[p]=A),v.hasOwnProperty(p)&&delete v[p]}if(!E&&f){m[f]&&delete m[f],m.$set&&m.$set[f]&&delete m.$set[f];var R=!1;if(f.indexOf(".")!==-1)for(var Q=f.split("."),$=1;$<Q.length;++$){var L=Q.slice(-$).join("."),F=Q.slice(0,-$).join(".");if(m[F]!=null){m[F][L]=A,R=!0;break}if(m.$set&&m.$set[F]){m.$set[F][L]=A,R=!0;break}}R||(v.$setOnInsert=v.$setOnInsert||{},v.$setOnInsert[f]=A)}return Object.keys(v.$set).length===0&&delete v.$set,v}},1849:(o,c,l)=>{function u(A,f){(f==null||f>A.length)&&(f=A.length);for(var p=0,m=Array(f);p<f;p++)m[p]=A[p];return m}var d=l(8768);o.exports=function(A,f){if(A._doc._id!=null&&f!=null&&f.length!==0){var p,m=String(A._doc._id),g=(function(E,_){var S=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!S){if(Array.isArray(E)||(S=(function(Q,$){if(Q){if(typeof Q=="string")return u(Q,$);var L={}.toString.call(Q).slice(8,-1);return L==="Object"&&Q.constructor&&(L=Q.constructor.name),L==="Map"||L==="Set"?Array.from(Q):L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?u(Q,$):void 0}})(E))||_){S&&(E=S);var N=0,O=function(){};return{s:O,n:function(){return N>=E.length?{done:!0}:{done:!1,value:E[N++]}},e:function(Q){throw Q},f:O}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var k,I=!0,R=!1;return{s:function(){S=S.call(E)},n:function(){var Q=S.next();return I=Q.done,Q},e:function(Q){R=!0,k=Q},f:function(){try{I||S.return==null||S.return()}finally{if(R)throw k}}}})(f);try{for(g.s();!(p=g.n()).done;){var b=p.value;if(!b.isVirtual)for(var v=b.path.split("."),y=0;y<v.length-1;++y){var w=v.slice(0,y+1).join("."),j=v.slice(y+1).join("."),C=A.get(w);if(C!=null&&d.isMongooseDocumentArray(C)){for(var B=0;B<C.length;++B)C[B]&&C[B].populated(j,b._docs[m]==null?void 0:b._docs[m][B],b);break}}}}catch(E){g.e(E)}finally{g.f()}}}},1875:o=>{o.exports=function(c){for(var l,u=Object.keys(c.errors||{}),d=u.length,A=[],f=0;f<d;++f)l=u[f],c!==c.errors[l]&&A.push(l+": "+c.errors[l].message);return A.join(", ")}},1898:(o,c,l)=>{c.saveSubdocs=l(4432),c.sharding=l(2824),c.trackTransaction=l(5889),c.validateBeforeSave=l(9848)},1905:(o,c,l)=>{var u,d=l(3071),A=l(2724)(/^\s*(?:function)?\*/),f=l(953)(),p=l(209),m=d("Object.prototype.toString"),g=d("Function.prototype.toString");o.exports=function(b){if(typeof b!="function")return!1;if(A(g(b)))return!0;if(!f)return m(b)==="[object GeneratorFunction]";if(!p)return!1;if(u===void 0){var v=(function(){if(!f)return!1;try{return Function("return function*() {}")()}catch{}})();u=!!v&&p(v)}return p(b)===u}},2003:(o,c,l)=>{var u=l(3703),d=l(608),A=l(2423);o.exports=function(f){var p=[],m=new WeakMap,g=f.constructor.indexTypes,b=new Map;return(function v(y,w,j){if(!m.has(y)){m.set(y,!0),w=w||"";for(var C=0,B=Object.keys(y.paths);C<B.length;C++){var E=B[C],_=y.paths[E];if(j==null||!j.paths[E]){if(_._duplicateKeyErrorMessage!=null&&(y._duplicateKeyErrorMessagesByPath=y._duplicateKeyErrorMessagesByPath||{},y._duplicateKeyErrorMessagesByPath[E]=_._duplicateKeyErrorMessage),_.$isMongooseDocumentArray||_.$isSingleNested){if(u(_,"options.excludeIndexes")!==!0&&u(_,"schemaOptions.excludeIndexes")!==!0&&u(_,"schema.options.excludeIndexes")!==!0&&v(_.schema,w+E+"."),_.schema.discriminators!=null)for(var S=_.schema.discriminators,N=0,O=Object.keys(S);N<O.length;N++)v(S[O[N]],w+E+".",_.schema);if(_.$isMongooseDocumentArray)continue}var k=_._index||_.caster&&_.caster._index;if(k!==!1&&k!=null){var I={},R=d(k),Q=R?k:{},$=typeof k=="string"?k:!!R&&k.type;if($&&g.indexOf($)!==-1)I[w+E]=$;else if(Q.text)I[w+E]="text",delete Q.text;else{var L;L=k==="descending"||k==="desc"||k!=="ascending"&&k!=="asc"&&Number(k)===-1,I[w+E]=L?-1:1}delete Q.type,"background"in Q||(Q.background=!0),y.options.autoIndex!=null&&(Q._autoIndex=y.options.autoIndex);var F=Q&&Q.name;typeof F=="string"&&b.has(F)?Object.assign(b.get(F),I):(p.push([I,Q]),b.set(F,I))}}}m.delete(y),w?(function(G,X){for(var q=G._indexes,T=q.length,U=0;U<T;++U){for(var K=q[U][0],z=q[U][1],M=Object.keys(K),H=M.length,Y={},ae=0;ae<H;++ae){var oe=M[ae];Y[X+oe]=K[oe]}var be=Object.assign({},z);if(z!=null&&z.partialFilterExpression!=null){be.partialFilterExpression={};for(var ge=z.partialFilterExpression,he=0,ke=Object.keys(ge);he<ke.length;he++){var Z=ke[he];be.partialFilterExpression[X+Z]=ge[Z]}}p.push([Y,be])}})(y,w):(y._indexes.forEach(function(G){var X=G[1];"background"in X||(X.background=!0),A(y,X)}),p=p.concat(y._indexes))}})(f),p}},2064:(o,c,l)=>{var u=l(2273),d=l(9122),A=l(4756),f=l(2481),p=l(9247),m=d(f(),Object);u(m,{getPolyfill:f,implementation:A,shim:p}),o.exports=m},2068:(o,c,l)=>{var u,d=l(4450),A=l(7930).documentSchemaSymbol,f=l(3303)._,p=l(8768),m=l(7930).getSymbol,g=l(7930).scopeSymbol,b=p.isPOJO;c.w=w,c.X=j;var v=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),y=Object.freeze({noDottedPath:!0});function w(C,B,E,_){u=u||l(2400);for(var S=_.typeKey,N=0,O=Object.keys(C);N<O.length;N++){var k=O[N],I=C[k];j({prop:k,subprops:b(I)&&Object.keys(I).length>0&&(!I[S]||S==="type"&&b(I.type)&&I.type.type)?I:null,prototype:B,prefix:E,options:_})}}function j(C){var B=C.prop,E=C.subprops,_=C.prototype,S=C.prefix,N=C.options;u=u||l(2400);var O=(S?S+".":"")+B,k=(S=S||"")?Object.freeze({}):y;E?Object.defineProperty(_,B,{enumerable:!0,configurable:!0,get:function(){var I,R,Q=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[O]){var $=Object.create(u.prototype,(I=this,R={},Object.getOwnPropertyNames(I).forEach(function(L){["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(L)===-1||(R[L]=Object.getOwnPropertyDescriptor(I,L),R[L].enumerable=!1)}),R));S||($.$__[g]=this),$.$__.nestedPath=O,Object.defineProperty($,"schema",{enumerable:!1,configurable:!0,writable:!1,value:_.schema}),Object.defineProperty($,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:_.schema}),Object.defineProperty($,A,{enumerable:!1,configurable:!0,writable:!1,value:_.schema}),Object.defineProperty($,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return d(Q.get(O,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty($,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Q.get(O,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty($,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Q.get(O,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty($,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty($,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(O,null,v)||{}).length===0}}),Object.defineProperty($,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),w(E,$,O,N),this.$__.getters[O]=$}return this.$__.getters[O]},set:function(I){I!=null&&I.$__isNested?I=I.$__get():I instanceof u&&!I.$__isNested&&(I=I.$toObject(f)),(this.$__[g]||this).$set(O,I)}}):Object.defineProperty(_,B,{enumerable:!0,configurable:!0,get:function(){return this[m].call(this.$__[g]||this,O,null,k)},set:function(I){this.$set.call(this.$__[g]||this,O,I)}})}},2069:(o,c,l)=>{function u(f,p,m){return Object.defineProperty(f,"prototype",{writable:!1}),f}var d=l(5761),A=u(function f(p){(function(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")})(this,f),Object.assign(this,p),p!=null&&p.options!=null&&(this.options=Object.assign({},p.options))});Object.defineProperty(A.prototype,"ref",d),Object.defineProperty(A.prototype,"refPath",d),Object.defineProperty(A.prototype,"localField",d),Object.defineProperty(A.prototype,"foreignField",d),Object.defineProperty(A.prototype,"justOne",d),Object.defineProperty(A.prototype,"count",d),Object.defineProperty(A.prototype,"match",d),Object.defineProperty(A.prototype,"options",d),Object.defineProperty(A.prototype,"skip",d),Object.defineProperty(A.prototype,"limit",d),Object.defineProperty(A.prototype,"perDocumentLimit",d),o.exports=A},2073:o=>{o.exports=function c(l){if(!Array.isArray(l))return{min:0,max:0,containsNonArrayItem:!0};if(l.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(l.length===1&&!Array.isArray(l[0]))return{min:1,max:1,containsNonArrayItem:!1};for(var u=c(l[0]),d=1;d<l.length;++d){var A=c(l[d]);A.min<u.min&&(u.min=A.min),A.max>u.max&&(u.max=A.max),u.containsNonArrayItem=u.containsNonArrayItem||A.containsNonArrayItem}return u.min=u.min+1,u.max=u.max+1,u}},2081:(o,c,l)=>{function u(L){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},u(L)}function d(L,F){var G=typeof Symbol<"u"&&L[Symbol.iterator]||L["@@iterator"];if(!G){if(Array.isArray(L)||(G=(function(z,M){if(z){if(typeof z=="string")return A(z,M);var H={}.toString.call(z).slice(8,-1);return H==="Object"&&z.constructor&&(H=z.constructor.name),H==="Map"||H==="Set"?Array.from(z):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?A(z,M):void 0}})(L))||F){G&&(L=G);var X=0,q=function(){};return{s:q,n:function(){return X>=L.length?{done:!0}:{done:!1,value:L[X++]}},e:function(z){throw z},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T,U=!0,K=!1;return{s:function(){G=G.call(L)},n:function(){var z=G.next();return U=z.done,z},e:function(z){K=!0,T=z},f:function(){try{U||G.return==null||G.return()}finally{if(K)throw T}}}}function A(L,F){(F==null||F>L.length)&&(F=L.length);for(var G=0,X=Array(F);G<F;G++)X[G]=L[G];return X}function f(L,F){for(var G=0;G<F.length;G++){var X=F[G];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(L,p(X.key),X)}}function p(L){var F=(function(G){if(u(G)!="object"||!G)return G;var X=G[Symbol.toPrimitive];if(X!==void 0){var q=X.call(G,"string");if(u(q)!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(G)})(L);return u(F)=="symbol"?F:F+""}function m(L,F,G,X){var q=g(w(L.prototype),F,G);return 2&X&&typeof q=="function"?function(T){return q.apply(G,T)}:q}function g(){return g=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(L,F,G){var X=(function(T,U){for(;!{}.hasOwnProperty.call(T,U)&&(T=w(T))!==null;);return T})(L,F);if(X){var q=Object.getOwnPropertyDescriptor(X,F);return q.get?q.get.call(arguments.length<3?L:G):q.value}},g.apply(null,arguments)}function b(L){var F=typeof Map=="function"?new Map:void 0;return b=function(G){if(G===null||!(function(q){try{return Function.toString.call(q).indexOf("[native code]")!==-1}catch{return typeof q=="function"}})(G))return G;if(typeof G!="function")throw new TypeError("Super expression must either be null or a function");if(F!==void 0){if(F.has(G))return F.get(G);F.set(G,X)}function X(){return(function(q,T,U){if(v())return Reflect.construct.apply(null,arguments);var K=[null];K.push.apply(K,T);var z=new(q.bind.apply(q,K));return U&&y(z,U.prototype),z})(G,arguments,w(this).constructor)}return X.prototype=Object.create(G.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),y(X,G)},b(L)}function v(){try{var L=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v=function(){return!!L})()}function y(L,F){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,X){return G.__proto__=X,G},y(L,F)}function w(L){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(F){return F.__proto__||Object.getPrototypeOf(F)},w(L)}var j=l(5022),C=l(8213),B=l(4450),E=l(8768).deepEqual,_=l(8260),S=l(3216),N=l(7352),O=l(2793),k=l(3305),I=l(4473),R=l(7930).populateModelSymbol,Q=(function(L){function F(q,T,U,K){var z;return(function(M,H){if(!(M instanceof H))throw new TypeError("Cannot call a class as a function")})(this,F),_(q)==="Object"&&(q=Object.keys(q).reduce(function(M,H){return M.concat([[H,q[H]]])},[])),(z=(function(M,H,Y){return H=w(H),(function(ae,oe){if(oe&&(u(oe)=="object"||typeof oe=="function"))return oe;if(oe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(be){if(be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be})(ae)})(M,v()?Reflect.construct(H,Y||[],w(M).constructor):H.apply(M,Y))})(this,F,[q])).$__parent=U!=null&&U.$__!=null?U:null,z.$__path=T,z.$__schemaType=K??new j(T),z.$__runDeferred(),z}return(function(q,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(T&&T.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Object.defineProperty(q,"prototype",{writable:!1}),T&&y(q,T)})(F,L),G=F,X=[{key:"$init",value:function(q,T){$(q),m(F,"set",this,3)([q,T]),T!=null&&T.$isSingleNested&&(T.$basePath=this.$__path+"."+q)}},{key:"$__set",value:function(q,T){m(F,"set",this,3)([q,T])}},{key:"get",value:function(q,T){return k(q,"ObjectId")&&(q=q.toString()),(T=T||{}).getters===!1?m(F,"get",this,3)([q]):this.$__schemaType.applyGetters(m(F,"get",this,3)([q]),this.$__parent)}},{key:"set",value:function(q,T){if(k(q,"ObjectId")&&(q=q.toString()),$(q),T=S(T),this.$__schemaType==null)return this.$__deferred=this.$__deferred||[],void this.$__deferred.push({key:q,value:T});var U,K=this.$__parent,z=K!=null&&K.$__&&K.$__.populated?K.$populated(ae.call(this),!0)||K.$populated(this.$__path,!0):null,M=this.get(q);if(z!=null){if(this.$__schemaType.$isSingleNested)throw new C("Cannot manually populate single nested subdoc underneath Map "+'at path "'.concat(this.$__path,'". Try using an array instead of a Map.'));Array.isArray(T)&&this.$__schemaType.$isMongooseArray?T=T.map(function(oe){return oe.$__==null&&(oe=new z.options[R](oe)),oe.$__.wasPopulated={value:oe._doc._id},oe}):T!=null&&(T.$__==null&&(T=new z.options[R](T)),T.$__.wasPopulated={value:T._doc._id})}else try{var H=this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap?{path:ae.call(this)}:null;T=this.$__schemaType.applySetters(T,this.$__parent,!1,this.get(q),H)}catch(oe){if(this.$__parent!=null&&this.$__parent.$__!=null)return void this.$__parent.invalidate(ae.call(this),oe);throw oe}if(m(F,"set",this,3)([q,T]),K!=null&&K.$__!=null&&!E(T,M)){var Y=ae.call(this);K.markModified(Y),(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)&&I(K,Y)}function ae(){return U||(U=this.$__path+"."+q)}}},{key:"clear",value:function(){m(F,"clear",this,3)([]);var q=this.$__parent;q?.markModified(this.$__path)}},{key:"delete",value:function(q){return k(q,"ObjectId")&&(q=q.toString()),this.set(q,void 0),m(F,"delete",this,3)([q])}},{key:"toBSON",value:function(){return new Map(this)}},{key:"toObject",value:function(q){if(q&&q.flattenMaps){var T,U={},K=d(this.keys());try{for(K.s();!(T=K.n()).done;){var z=T.value;U[z]=B(this.get(z),q)}}catch(M){K.e(M)}finally{K.f()}return U}return new Map(this)}},{key:"$toObject",value:function(){return this.constructor.prototype.toObject.apply(this,arguments)}},{key:"toJSON",value:function(q){if(typeof(q&&q.flattenMaps)!="boolean"||q.flattenMaps){var T,U={},K=d(this.keys());try{for(K.s();!(T=K.n()).done;){var z=T.value;U[z]=B(this.get(z),q)}}catch(M){K.e(M)}finally{K.f()}return U}return new Map(this)}},{key:"inspect",value:function(){return new Map(this)}},{key:"$__runDeferred",value:function(){if(this.$__deferred){var q,T=d(this.$__deferred);try{for(T.s();!(q=T.n()).done;){var U=q.value;this.set(U.key,U.value)}}catch(K){T.e(K)}finally{T.f()}this.$__deferred=null}}}],X&&f(G.prototype,X),Object.defineProperty(G,"prototype",{writable:!1}),G;var G,X})(b(Map));function $(L){var F=u(L);if(F!=="string")throw new TypeError("Mongoose maps only support string keys, got ".concat(F));if(L.startsWith("$"))throw new Error('Mongoose maps do not support keys that start with "$", got "'.concat(L,'"'));if(L.includes("."))throw new Error('Mongoose maps do not support keys that contain ".", got "'.concat(L,'"'));if(O.has(L))throw new Error('Mongoose maps do not support reserved key name "'.concat(L,'"'))}N.inspect.custom&&Object.defineProperty(Q.prototype,N.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:Q.prototype.inspect}),Object.defineProperty(Q.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(Q.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(Q.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(Q.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(Q.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0}),Object.defineProperty(Q.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0}),o.exports=Q},2097:(o,c,l)=>{function u(w){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},u(w)}function d(w,j){(j==null||j>w.length)&&(j=w.length);for(var C=0,B=Array(j);C<j;C++)B[C]=w[C];return B}function A(w,j,C){return(j=(function(B){var E=(function(_){if(u(_)!="object"||!_)return _;var S=_[Symbol.toPrimitive];if(S!==void 0){var N=S.call(_,"string");if(u(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)})(B);return u(E)=="symbol"?E:E+""})(j))in w?Object.defineProperty(w,j,{value:C,enumerable:!0,configurable:!0,writable:!0}):w[j]=C,w}var f=l(9166),p=l(1824),m=l(3703),g=l(3696),b=l(1505),v=l(7160),y=new Set(["replaceOne","findOneAndReplace"]);o.exports=function(w,j){var C=w.childSchemas.find(function(R){return!!R.schema.options.timestamps});if(j||C){var B=g(j,"createdAt"),E=g(j,"updatedAt"),_=j!=null&&j.hasOwnProperty("currentTime")?j.currentTime:null,S={};if(w.$timestamps={createdAt:B,updatedAt:E},B&&!w.paths[B]){var N=w.base!=null?w.base.get("timestamps.createdAt.immutable"):null,O=N==null||N;S[B]=A(A({},w.options.typeKey||"type",Date),"immutable",O)}E&&!w.paths[E]&&(S[E]=Date),w.add(S),w.pre("save",function(R){var Q=m(this,"$__.saveOptions.timestamps");if(Q===!1)return R();b(this,Q,_,B,E),R()}),w.methods.initializeTimestamps=function(){var R=_!=null?_():this.constructor.base.now();if(B&&!this.get(B)&&this.$set(B,R),E&&!this.get(E)&&this.$set(E,R),this.$isSubdocument)return this;var Q,$=(function(F,G){var X=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!X){if(Array.isArray(F)||(X=(function(M,H){if(M){if(typeof M=="string")return d(M,H);var Y={}.toString.call(M).slice(8,-1);return Y==="Object"&&M.constructor&&(Y=M.constructor.name),Y==="Map"||Y==="Set"?Array.from(M):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?d(M,H):void 0}})(F))||G){X&&(F=X);var q=0,T=function(){};return{s:T,n:function(){return q>=F.length?{done:!0}:{done:!1,value:F[q++]}},e:function(M){throw M},f:T}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var U,K=!0,z=!1;return{s:function(){X=X.call(F)},n:function(){var M=X.next();return K=M.done,M},e:function(M){z=!0,U=M},f:function(){try{K||X.return==null||X.return()}finally{if(z)throw U}}}})(this.$getAllSubdocs());try{for($.s();!(Q=$.n()).done;){var L=Q.value;L.initializeTimestamps&&L.initializeTimestamps()}}catch(F){$.e(F)}finally{$.f()}return this},I[v.builtInMiddleware]=!0;var k={query:!0,model:!1};w.pre("findOneAndReplace",k,I),w.pre("findOneAndUpdate",k,I),w.pre("replaceOne",k,I),w.pre("update",k,I),w.pre("updateOne",k,I),w.pre("updateMany",k,I)}function I(R){var Q=_!=null?_():this.model.base.now();y.has(this.op)&&this.getUpdate()==null&&this.setUpdate({}),p(Q,B,E,this.getUpdate(),this._mongooseOptions,y.has(this.op)),f(Q,this.getUpdate(),this.model.schema),R()}}},2134:(o,c,l)=>{var u=l(5832).hp;function d(k){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},d(k)}function A(k,I){var R=Object.keys(k);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(k);I&&(Q=Q.filter(function($){return Object.getOwnPropertyDescriptor(k,$).enumerable})),R.push.apply(R,Q)}return R}function f(k){for(var I=1;I<arguments.length;I++){var R=arguments[I]!=null?arguments[I]:{};I%2?A(Object(R),!0).forEach(function(Q){p(k,Q,R[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(R)):A(Object(R)).forEach(function(Q){Object.defineProperty(k,Q,Object.getOwnPropertyDescriptor(R,Q))})}return k}function p(k,I,R){return(I=(function(Q){var $=(function(L){if(d(L)!="object"||!L)return L;var F=L[Symbol.toPrimitive];if(F!==void 0){var G=F.call(L,"string");if(d(G)!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(L)})(Q);return d($)=="symbol"?$:$+""})(I))in k?Object.defineProperty(k,I,{value:R,enumerable:!0,configurable:!0,writable:!0}):k[I]=R,k}var m=l(6365),g=l(6426),b=g.CastError,v=l(8250),y=l(4327),w=l(8768),j=l(9460),C=v.UUID_FORMAT,B=m.Binary;function E(k){var I;return typeof k!="string"&&k!=null?(I=k.toString("hex")).substring(0,8)+"-"+I.substring(8,12)+"-"+I.substring(12,16)+"-"+I.substring(16,20)+"-"+I.substring(20,32):k}function _(k,I){g.call(this,k,I,"UUID"),this.getters.push(function(R){return R!=null&&R.$__!=null?R:u.isBuffer(R)?E(R):R instanceof B?E(R.buffer):w.isPOJO(R)&&R.type==="Buffer"&&Array.isArray(R.data)?E(u.from(R.data)):R})}function S(k){return this.cast(k)}function N(k){var I=this;return k.map(function(R){return I.cast(R)})}_.schemaName="UUID",_.defaultOptions={},_.prototype=Object.create(g.prototype),_.prototype.constructor=_,_._cast=v,_.get=g.get,_.set=g.set,_.setters=[],_.cast=function(k){return arguments.length===0||(k===!1&&(k=this._defaultCaster),this._cast=k),this._cast},_._checkRequired=function(k){return k!=null},_.checkRequired=g.checkRequired,_.prototype.checkRequired=function(k){return u.isBuffer(k)&&(k=E(k)),k!=null&&C.test(k)},_.prototype.cast=function(k,I,R,Q,$){if(w.isNonBuiltinObject(k)&&g._isRef(this,k,I,R))return this._castRef(k,I,R,$);var L;L=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():_.cast();try{return L(k)}catch(F){throw new b(_.schemaName,k,this.path,F,this)}};var O=f(f({},g.prototype.$conditionalHandlers),{},{$bitsAllClear:j,$bitsAnyClear:j,$bitsAllSet:j,$bitsAnySet:j,$all:N,$gt:S,$gte:S,$in:N,$lt:S,$lte:S,$ne:S,$nin:N});Object.defineProperty(_.prototype,"$conditionalHandlers",{enumerable:!1,value:O}),_.prototype.castForQuery=function(k,I,R){var Q;if(k!=null){if(!(Q=this.$conditionalHandlers[k]))throw new Error("Can't use "+k+" with UUID.");return Q.call(this,I,R)}try{return this.applySetters(I,R)}catch($){throw $ instanceof b&&$.path===this.path&&this.$fullPath!=null&&($.path=this.$fullPath),$}},_.prototype.toJSONSchema=function(k){var I=this.options.required&&typeof this.options.required!="function";return y("string","binData",k?.useBsonType,I)},_.prototype.autoEncryptionType=function(){return"binData"},o.exports=_},2151:o=>{o.exports=Math.round},2268:o=>{o.exports=TypeError},2273:(o,c,l)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},u(y)}var d=l(668),A=typeof Symbol=="function"&&u(Symbol("foo"))==="symbol",f=Object.prototype.toString,p=Array.prototype.concat,m=l(6750),g=l(3191)(),b=function(y,w,j,C){if(w in y){if(C===!0){if(y[w]===j)return}else if(typeof(B=C)!="function"||f.call(B)!=="[object Function]"||!C())return}var B;g?m(y,w,j,!0):m(y,w,j)},v=function(y,w){var j=arguments.length>2?arguments[2]:{},C=d(w);A&&(C=p.call(C,Object.getOwnPropertySymbols(w)));for(var B=0;B<C.length;B+=1)b(y,C[B],w[C[B]],j[C[B]])};v.supportsDescriptors=!!g,o.exports=v},2307:(o,c,l)=>{var u=l(5832).hp;function d(S,N){var O=Object.keys(S);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(S);N&&(k=k.filter(function(I){return Object.getOwnPropertyDescriptor(S,I).enumerable})),O.push.apply(O,k)}return O}function A(S){for(var N=1;N<arguments.length;N++){var O=arguments[N]!=null?arguments[N]:{};N%2?d(Object(O),!0).forEach(function(k){f(S,k,O[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(O)):d(Object(O)).forEach(function(k){Object.defineProperty(S,k,Object.getOwnPropertyDescriptor(O,k))})}return S}function f(S,N,O){return(N=(function(k){var I=(function(R){if(p(R)!="object"||!R)return R;var Q=R[Symbol.toPrimitive];if(Q!==void 0){var $=Q.call(R,"string");if(p($)!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(R)})(k);return p(I)=="symbol"?I:I+""})(N))in S?Object.defineProperty(S,N,{value:O,enumerable:!0,configurable:!0,writable:!0}):S[N]=O,S}function p(S){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},p(S)}var m=l(6365),g=l(2945),b=l(6426),v=l(4327),y=l(9460),w=l(8768),j=m.Binary,C=b.CastError;function B(S,N){b.call(this,S,N,"Buffer")}function E(S,N){return this.castForQuery(null,S,N)}B.schemaName="Buffer",B.defaultOptions={},B.prototype=Object.create(b.prototype),B.prototype.constructor=B,B.prototype.OptionsConstructor=g,B._checkRequired=function(S){return!(!S||!S.length)},B.set=b.set,B.setters=[],B.get=b.get,B.checkRequired=b.checkRequired,B.prototype.checkRequired=function(S,N){return b._isRef(this,S,N,!0)?!!S:this.constructor._checkRequired(S)},B.prototype.cast=function(S,N,O,k,I){var R;if(b._isRef(this,S,N,O)){if(S&&S.isMongooseBuffer)return S;if(u.isBuffer(S))return S&&S.isMongooseBuffer||(S=new m(S,[this.path,N]),this.options.subtype!=null&&(S._subtype=this.options.subtype)),S;if(S instanceof j){if(R=new m(S.value(!0),[this.path,N]),typeof S.sub_type!="number")throw new C("Buffer",S,this.path,null,this);return R._subtype=S.sub_type,R}if(S==null||w.isNonBuiltinObject(S))return this._castRef(S,N,O,I)}if(S&&S._id&&(S=S._id),S&&S.isMongooseBuffer)return S;if(u.isBuffer(S))return S&&S.isMongooseBuffer||(S=new m(S,[this.path,N]),this.options.subtype!=null&&(S._subtype=this.options.subtype)),S;if(S instanceof j){if(R=new m(S.value(!0),[this.path,N]),typeof S.sub_type!="number")throw new C("Buffer",S,this.path,null,this);return R._subtype=S.sub_type,R}if(S===null)return S;var Q=p(S);if(Q==="string"||Q==="number"||Array.isArray(S)||Q==="object"&&S.type==="Buffer"&&Array.isArray(S.data))return Q==="number"&&(S=[S]),R=new m(S,[this.path,N]),this.options.subtype!=null&&(R._subtype=this.options.subtype),R;if(w.isPOJO(S)&&(S.$binary instanceof j||typeof S.$binary=="string")){var $=this.cast(u.from(S.$binary,"base64"));if(S.$type!=null)return $._subtype=S.$type,$}throw new C("Buffer",S,this.path,null,this)},B.prototype.subtype=function(S){return this.options.subtype=S,this};var _=A(A({},b.prototype.$conditionalHandlers),{},{$bitsAllClear:y,$bitsAnyClear:y,$bitsAllSet:y,$bitsAnySet:y,$gt:E,$gte:E,$lt:E,$lte:E});Object.defineProperty(B.prototype,"$conditionalHandlers",{enumerable:!1,value:_}),B.prototype.castForQuery=function(S,N,O){var k,I;if(S!=null){if(!(k=this.$conditionalHandlers[S]))throw new Error("Can't use "+S+" with Buffer.");return k.call(this,N)}try{I=this.applySetters(N,O)}catch(R){throw R instanceof C&&R.path===this.path&&this.$fullPath!=null&&(R.path=this.$fullPath),R}return I&&I.toObject({transform:!1,virtuals:!1})},B.prototype.toJSONSchema=function(S){var N=this.options.required&&typeof this.options.required!="function";return v("string","binData",S?.useBsonType,N)},B.prototype.autoEncryptionType=function(){return"binData"},o.exports=B},2345:(o,c,l)=>{function u(_,S){var N=Object.keys(_);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(_);S&&(O=O.filter(function(k){return Object.getOwnPropertyDescriptor(_,k).enumerable})),N.push.apply(N,O)}return N}function d(_){for(var S=1;S<arguments.length;S++){var N=arguments[S]!=null?arguments[S]:{};S%2?u(Object(N),!0).forEach(function(O){A(_,O,N[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(N)):u(Object(N)).forEach(function(O){Object.defineProperty(_,O,Object.getOwnPropertyDescriptor(N,O))})}return _}function A(_,S,N){return(S=(function(O){var k=(function(I){if(f(I)!="object"||!I)return I;var R=I[Symbol.toPrimitive];if(R!==void 0){var Q=R.call(I,"string");if(f(Q)!="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(I)})(O);return f(k)=="symbol"?k:k+""})(S))in _?Object.defineProperty(_,S,{value:N,enumerable:!0,configurable:!0,writable:!0}):_[S]=N,_}function f(_){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},f(_)}var p=l(3672),m=l(3731),g=l(6426),b=l(2477),v=l(4327),y=l(8260),w=l(8768),j=g.CastError;function C(_,S){g.call(this,_,S,"Date")}function B(_){return this.cast(_)}C.schemaName="Date",C.defaultOptions={},C.prototype=Object.create(g.prototype),C.prototype.constructor=C,C.prototype.OptionsConstructor=m,C._cast=b,C.set=g.set,C.setters=[],C.get=g.get,C.cast=function(_){return arguments.length===0||(_===!1&&(_=this._defaultCaster),this._cast=_),this._cast},C._defaultCaster=function(_){if(_!=null&&!(_ instanceof Date))throw new Error;return _},C.prototype.expires=function(_){return y(this._index)!=="Object"&&(this._index={}),this._index.expires=_,w.expires(this._index),this},C._checkRequired=function(_){return _ instanceof Date},C.checkRequired=g.checkRequired,C.prototype.checkRequired=function(_,S){return f(_)==="object"&&g._isRef(this,_,S,!0)?_!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():C.checkRequired())(_)},C.prototype.min=function(_,S){if(this.minValidator&&(this.validators=this.validators.filter(function(k){return k.validator!==this.minValidator},this)),_){var N=S||p.messages.Date.min;typeof N=="string"&&(N=N.replace(/{MIN}/,_===Date.now?"Date.now()":_.toString()));var O=this;this.validators.push({validator:this.minValidator=function(k){var I=_;typeof _=="function"&&_!==Date.now&&(I=I.call(this));var R=I===Date.now?I():O.cast(I);return k===null||k.valueOf()>=R.valueOf()},message:N,type:"min",min:_})}return this},C.prototype.max=function(_,S){if(this.maxValidator&&(this.validators=this.validators.filter(function(k){return k.validator!==this.maxValidator},this)),_){var N=S||p.messages.Date.max;typeof N=="string"&&(N=N.replace(/{MAX}/,_===Date.now?"Date.now()":_.toString()));var O=this;this.validators.push({validator:this.maxValidator=function(k){var I=_;typeof I=="function"&&I!==Date.now&&(I=I.call(this));var R=I===Date.now?I():O.cast(I);return k===null||k.valueOf()<=R.valueOf()},message:N,type:"max",max:_})}return this},C.prototype.cast=function(_){var S;S=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():C.cast();try{return S(_)}catch(N){throw new j("date",_,this.path,N,this)}};var E=d(d({},g.prototype.$conditionalHandlers),{},{$gt:B,$gte:B,$lt:B,$lte:B});Object.defineProperty(C.prototype,"$conditionalHandlers",{enumerable:!1,value:E}),C.prototype.castForQuery=function(_,S,N){if(_==null)try{return this.applySetters(S,N)}catch(k){throw k instanceof j&&k.path===this.path&&this.$fullPath!=null&&(k.path=this.$fullPath),k}var O=this.$conditionalHandlers[_];if(!O)throw new Error("Can't use "+_+" with Date.");return O.call(this,S)},C.prototype.toJSONSchema=function(_){var S=this.options.required&&typeof this.options.required!="function";return v("string","date",_?.useBsonType,S)},C.prototype.autoEncryptionType=function(){return"date"},o.exports=C},2354:(o,c,l)=>{var u=l(6730);o.exports=Function.prototype.bind||u},2400:(o,c,l)=>{var u=l(5832).hp;function d(ce){return(function(Ne){if(Array.isArray(Ne))return j(Ne)})(ce)||(function(Ne){if(typeof Symbol<"u"&&Ne[Symbol.iterator]!=null||Ne["@@iterator"]!=null)return Array.from(Ne)})(ce)||w(ce)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function A(){var ce,Ne,Re=typeof Symbol=="function"?Symbol:{},Ve=Re.iterator||"@@iterator",ye=Re.toStringTag||"@@toStringTag";function De($t,Yt,Vt,or){var cr=Yt&&Yt.prototype instanceof Ze?Yt:Ze,Fr=Object.create(cr.prototype);return f(Fr,"_invoke",(function(yn,Lr,xn){var Zr,kr,Hr,hn=0,Hn=xn||[],pr=!1,bn={p:0,n:0,v:ce,a:Qt,f:Qt.bind(ce,4),d:function(Er,Wr){return Zr=Er,kr=0,Hr=ce,bn.n=Wr,qe}};function Qt(Er,Wr){for(kr=Er,Hr=Wr,Ne=0;!pr&&hn&&!Dr&&Ne<Hn.length;Ne++){var Dr,nn=Hn[Ne],fn=bn.p,Dn=nn[2];Er>3?(Dr=Dn===Wr)&&(Hr=nn[(kr=nn[4])?5:(kr=3,3)],nn[4]=nn[5]=ce):nn[0]<=fn&&((Dr=Er<2&&fn<nn[1])?(kr=0,bn.v=Wr,bn.n=nn[1]):fn<Dn&&(Dr=Er<3||nn[0]>Wr||Wr>Dn)&&(nn[4]=Er,nn[5]=Wr,bn.n=Dn,kr=0))}if(Dr||Er>1)return qe;throw pr=!0,Wr}return function(Er,Wr,Dr){if(hn>1)throw TypeError("Generator is already running");for(pr&&Wr===1&&Qt(Wr,Dr),kr=Wr,Hr=Dr;(Ne=kr<2?ce:Hr)||!pr;){Zr||(kr?kr<3?(kr>1&&(bn.n=-1),Qt(kr,Hr)):bn.n=Hr:bn.v=Hr);try{if(hn=2,Zr){if(kr||(Er="next"),Ne=Zr[Er]){if(!(Ne=Ne.call(Zr,Hr)))throw TypeError("iterator result is not an object");if(!Ne.done)return Ne;Hr=Ne.value,kr<2&&(kr=0)}else kr===1&&(Ne=Zr.return)&&Ne.call(Zr),kr<2&&(Hr=TypeError("The iterator does not provide a '"+Er+"' method"),kr=1);Zr=ce}else if((Ne=(pr=bn.n<0)?Hr:yn.call(Lr,bn))!==qe)break}catch(nn){Zr=ce,kr=1,Hr=nn}finally{hn=1}}return{value:Ne,done:pr}}})($t,Vt,or),!0),Fr}var qe={};function Ze(){}function ht(){}function ct(){}Ne=Object.getPrototypeOf;var gt=[][Ve]?Ne(Ne([][Ve]())):(f(Ne={},Ve,function(){return this}),Ne),ut=ct.prototype=Ze.prototype=Object.create(gt);function Ut($t){return Object.setPrototypeOf?Object.setPrototypeOf($t,ct):($t.__proto__=ct,f($t,ye,"GeneratorFunction")),$t.prototype=Object.create(ut),$t}return ht.prototype=ct,f(ut,"constructor",ct),f(ct,"constructor",ht),ht.displayName="GeneratorFunction",f(ct,ye,"GeneratorFunction"),f(ut),f(ut,ye,"Generator"),f(ut,Ve,function(){return this}),f(ut,"toString",function(){return"[object Generator]"}),(A=function(){return{w:De,m:Ut}})()}function f(ce,Ne,Re,Ve){var ye=Object.defineProperty;try{ye({},"",{})}catch{ye=0}f=function(De,qe,Ze,ht){if(qe)ye?ye(De,qe,{value:Ze,enumerable:!ht,configurable:!ht,writable:!ht}):De[qe]=Ze;else{var ct=function(gt,ut){f(De,gt,function(Ut){return this._invoke(gt,ut,Ut)})};ct("next",0),ct("throw",1),ct("return",2)}},f(ce,Ne,Re,Ve)}function p(ce,Ne,Re,Ve,ye,De,qe){try{var Ze=ce[De](qe),ht=Ze.value}catch(ct){return void Re(ct)}Ze.done?Ne(ht):Promise.resolve(ht).then(Ve,ye)}function m(ce){return function(){var Ne=this,Re=arguments;return new Promise(function(Ve,ye){var De=ce.apply(Ne,Re);function qe(ht){p(De,Ve,ye,qe,Ze,"next",ht)}function Ze(ht){p(De,Ve,ye,qe,Ze,"throw",ht)}qe(void 0)})}}function g(ce,Ne){var Re=Object.keys(ce);if(Object.getOwnPropertySymbols){var Ve=Object.getOwnPropertySymbols(ce);Ne&&(Ve=Ve.filter(function(ye){return Object.getOwnPropertyDescriptor(ce,ye).enumerable})),Re.push.apply(Re,Ve)}return Re}function b(ce){for(var Ne=1;Ne<arguments.length;Ne++){var Re=arguments[Ne]!=null?arguments[Ne]:{};Ne%2?g(Object(Re),!0).forEach(function(Ve){v(ce,Ve,Re[Ve])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(Re)):g(Object(Re)).forEach(function(Ve){Object.defineProperty(ce,Ve,Object.getOwnPropertyDescriptor(Re,Ve))})}return ce}function v(ce,Ne,Re){return(Ne=(function(Ve){var ye=(function(De){if(C(De)!="object"||!De)return De;var qe=De[Symbol.toPrimitive];if(qe!==void 0){var Ze=qe.call(De,"string");if(C(Ze)!="object")return Ze;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(De)})(Ve);return C(ye)=="symbol"?ye:ye+""})(Ne))in ce?Object.defineProperty(ce,Ne,{value:Re,enumerable:!0,configurable:!0,writable:!0}):ce[Ne]=Re,ce}function y(ce,Ne){var Re=typeof Symbol<"u"&&ce[Symbol.iterator]||ce["@@iterator"];if(!Re){if(Array.isArray(ce)||(Re=w(ce))||Ne){Re&&(ce=Re);var Ve=0,ye=function(){};return{s:ye,n:function(){return Ve>=ce.length?{done:!0}:{done:!1,value:ce[Ve++]}},e:function(ht){throw ht},f:ye}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var De,qe=!0,Ze=!1;return{s:function(){Re=Re.call(ce)},n:function(){var ht=Re.next();return qe=ht.done,ht},e:function(ht){Ze=!0,De=ht},f:function(){try{qe||Re.return==null||Re.return()}finally{if(Ze)throw De}}}}function w(ce,Ne){if(ce){if(typeof ce=="string")return j(ce,Ne);var Re={}.toString.call(ce).slice(8,-1);return Re==="Object"&&ce.constructor&&(Re=ce.constructor.name),Re==="Map"||Re==="Set"?Array.from(ce):Re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Re)?j(ce,Ne):void 0}}function j(ce,Ne){(Ne==null||Ne>ce.length)&&(Ne=ce.length);for(var Re=0,Ve=Array(Ne);Re<Ne;Re++)Ve[Re]=ce[Re];return Ve}function C(ce){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne},C(ce)}var B,E,_,S=l(1417),N=l(3550).EventEmitter,O=l(4224),k=l(6365),I=l(3672),R=l(5022),Q=l(6140),$=l(3441),L=l(1350),F=l(1635),G=l(7058),X=l(8995),q=l(6949),T=l(9538),U=l(6814),K=l(5335),z=l(4473),M=l(4450),H=l(2068).w,Y=l(2068).X,ae=l(1226),oe=l(7430).B,be=l(5152),ge=l(791),he=l(2692),ke=l(3216),Z=l(2746),te=l(3305),fe=l(7300),we=l(1793),Fe=l(5188),_e=l(7352).inspect,Ce=l(3303)._,ie=l(1849),me=l(6451),Be=l(5678),Le=l(6223),ve=l(3892),$e=l(8768),je=l(542),Pe=$e.deepEqual,Te=$e.isMongooseObject,Ye=l(7930).arrayAtomicsBackupSymbol,He=l(7930).arrayAtomicsSymbol,it=l(7930).documentArrayParent,It=l(7930).documentIsModified,dt=l(7930).documentModifiedPaths,Pt=l(7930).documentSchemaSymbol,vt=l(7930).getSymbol,tr=l(7930).modelSymbol,Jt=l(7930).populateModelSymbol,Et=l(7930).scopeSymbol,ur=l(7160).schemaMixedSymbol,vr=l(5346),Wt=l(7930).sessionNewDocuments,Gt=$e.specialProperties;function at(ce,Ne,Re,Ve){if(C(Re)==="object"&&Re!=null&&(Re=(Ve=Re).skipId),Ve=Object.assign({},Ve),this.$__schema==null){var ye=$e.isObject(Ne)&&!Ne.instanceOfSchema?new G(Ne):Ne;this.$__setSchema(ye),Ne=Re,Re=Ve,Ve=arguments[4]||{}}if(this.$__=new O,Ve.isNew!=null&&Ve.isNew!==!0&&(this.$isNew=Ve.isNew),Ve.priorDoc!=null&&(this.$__.priorDoc=Ve.priorDoc),Re&&(this.$__.skipId=Re),ce!=null&&C(ce)!=="object")throw new L(ce,"obj","Document");var De=!0;Ve.defaults!==void 0&&(this.$__.defaults=Ve.defaults,De=Ve.defaults);var qe=this.$__schema;typeof Ne=="boolean"||Ne==="throw"?(Ne!==!0&&(this.$__.strictMode=Ne),Ne=void 0):qe.options.strict!==!0&&(this.$__.strictMode=qe.options.strict);var Ze,ht=y(qe.requiredPaths(!0));try{for(ht.s();!(Ze=ht.n()).done;){var ct=Ze.value;this.$__.activePaths.require(ct)}}catch($t){ht.e($t)}finally{ht.f()}var gt=null;$e.isPOJO(Ne)&&Object.keys(Ne).length>0&&(gt=we(Ne),this.$__.selected=Ne,this.$__.exclude=gt);var ut=gt===!1&&Ne?U(Ne):null;if(this._doc==null&&(this.$__buildDoc(ce,Ne,Re,gt,ut,!1),De&&K(this,Ne,gt,ut,!0,null,{skipParentChangeTracking:!0})),ce&&(this.$__original_set?this.$__original_set(ce,void 0,!0,Ve):this.$set(ce,void 0,!0,Ve),ce instanceof at&&(this.$isNew=ce.$isNew)),Ve.willInit&&De?Ve.skipDefaults&&(this.$__.skipDefaults=Ve.skipDefaults):De&&K(this,Ne,gt,ut,!1,Ve.skipDefaults),!this.$__.strictMode&&ce){var Ut=this;Object.keys(this._doc).forEach(function($t){$t in qe.tree||$t in qe.methods||$t in qe.virtuals||$t.startsWith("$")||Y({prop:$t,subprops:null,prototype:Ut})})}(function($t){var Yt=$t.$__schema&&$t.$__schema.callQueue;if(Yt.length){var Vt,or=y(Yt);try{for(or.s();!(Vt=or.n()).done;){var cr=Vt.value;cr[0]!=="pre"&&cr[0]!=="post"&&cr[0]!=="on"&&$t[cr[0]].apply($t,cr[1])}}catch(Fr){or.e(Fr)}finally{or.f()}}})(this)}for(var rn in at.prototype.$isMongooseDocumentPrototype=!0,Object.defineProperty(at.prototype,"isNew",{get:function(){return this.$isNew},set:function(ce){this.$isNew=ce}}),Object.defineProperty(at.prototype,"errors",{get:function(){return this.$errors},set:function(ce){this.$errors=ce}}),at.prototype.$isNew=!0,$e.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(ce){at.prototype[ce]=function(){if(!this.$__.emitter){if(ce==="emit")return;this.$__.emitter=new N,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[ce].apply(this.$__.emitter,arguments)},at.prototype["$".concat(ce)]=at.prototype[ce]}),at.prototype.constructor=at,N.prototype)at[rn]=N.prototype[rn];function dr(ce,Ne,Re){if(ce!=null)for(var Ve=Object.keys(Re.$__schema.paths),ye=Ve.length,De=Ne.indexOf(".")===-1?[Ne]:Ne.split("."),qe=0;qe<ye;++qe){var Ze="",ht=Ve[qe];if(ht.startsWith(Ne+".")){var ct=Re.$__schema.paths[ht],gt=ct.splitPath().slice(De.length),ut=gt.length;if(ct.defaultValue!==void 0)for(var Ut=ce,$t=0;$t<ut&&Ut!=null;++$t){var Yt=gt[$t];if($t===ut-1){if(Ut[Yt]!==void 0)break;try{var Vt=ct.getDefault(Re,!1);Vt!==void 0&&(Ut[Yt]=Vt)}catch(or){Re.invalidate(Ne+"."+Ze,or);break}break}Ze+=(Ze.length?".":"")+Yt,Ut[Yt]=Ut[Yt]||{},Ut=Ut[Yt]}}}}function et(ce,Ne,Re,Ve,ye){ye=ye||"",Ne.$__!=null&&(Ne=Ne._doc);for(var De,qe,Ze,ht=Object.keys(Ne),ct=ht.length,gt=ce.$__.strictMode,ut=ce.$__schema,Ut=0;Ut<ct;++Ut)if(Ze=ht[Ut],!Gt.has(Ze)&&(qe=ye?ye+Ze:Ze,De=ut.path(qe),!ut.$isRootDiscriminator||ce.$__isSelected(qe))){var $t=Ne[Ze];if(!De&&$e.isPOJO($t))Re[Ze]||(Re[Ze]={},gt||Ze in ut.tree||Ze in ut.methods||Ze in ut.virtuals||(ce[Ze]=Re[Ze])),et(ce,$t,Re[Ze],Ve,qe+".");else if(De){if(Re.hasOwnProperty(Ze)&&$t!==void 0&&!Ve.hydratedPopulatedDocs&&delete Re[Ze],$t===null)Re[Ze]=De._castNullish(null);else if($t!==void 0){var Yt=$t.$__==null?null:$t.$__.wasPopulated;if(!De||Yt||Ve.hydratedPopulatedDocs)if(De&&Ve.hydratedPopulatedDocs){var Vt;Re[Ze]=De.cast($t,ce,!0,void 0,{hydratedPopulatedDocs:!0}),Re[Ze]&&Re[Ze].$__&&Re[Ze].$__.wasPopulated?ce.$populated(qe,Re[Ze].$__.wasPopulated.value,Re[Ze].$__.wasPopulated.options):Array.isArray(Re[Ze])&&Re[Ze].length&&(Vt=Re[Ze][0])!==null&&Vt!==void 0&&(Vt=Vt.$__)!==null&&Vt!==void 0&&Vt.wasPopulated&&ce.$populated(qe,Re[Ze].map(function(or){var cr;return or==null||(cr=or.$__)===null||cr===void 0||(cr=cr.wasPopulated)===null||cr===void 0?void 0:cr.value}).filter(function(or){return or!=null}),Re[Ze][0].$__.wasPopulated.options)}else Re[Ze]=$t;else try{Ve&&Ve.setters?Re[Ze]=De.applySetters($t,ce,!1):Re[Ze]=De.cast($t,ce,!0)}catch(or){ce.invalidate(or.path,new T({path:or.path,message:or.message,type:"cast",value:or.value,reason:or}))}}ce.$isModified(qe)||ce.$__.activePaths.init(qe)}else Re[Ze]=$t,gt||ye||(ce[Ze]=$t)}}function an(ce){if(ce==null)return!0;if(C(ce)!=="object"||Array.isArray(ce))return!1;for(var Ne=0,Re=Object.keys(ce);Ne<Re.length;Ne++)if(!an(ce[Re[Ne]]))return!1;return!0}function gr(ce,Ne,Re,Ve){var ye={};(function(hr){var kn=Object.keys(hr.$__.activePaths.getStatePaths("require")),pn=0,sn=kn.length;for(pn=0;pn<sn;++pn){var Mr=kn[pn],Pr=hr.$__schema.path(Mr);if(Pr!=null&&typeof Pr.originalRequiredValue=="function"){hr.$__.cachedRequired=hr.$__.cachedRequired||{};try{hr.$__.cachedRequired[Mr]=Pr.originalRequiredValue.call(hr,hr)}catch(Ar){hr.invalidate(Mr,Ar)}}}})(ce);var De=new Set(Object.keys(ce.$__.activePaths.getStatePaths("require")).filter(function(hr){return!(!ce.$__isSelected(hr)&&!ce.$isModified(hr))&&(ce.$__.cachedRequired==null||!(hr in ce.$__.cachedRequired)||ce.$__.cachedRequired[hr])}));function qe(hr){hr.endsWith(".$*")||De.add(hr)}if(Object.keys(ce.$__.activePaths.getStatePaths("init")).forEach(qe),Object.keys(ce.$__.activePaths.getStatePaths("modify")).forEach(qe),Object.keys(ce.$__.activePaths.getStatePaths("default")).forEach(qe),!Ve){for(var Ze=[],ht=0,ct=Object.keys(ce.$__schema.paths);ht<ct.length;ht++){var gt=ct[ht],ut=ce.$__schema.path(gt);if(ut.$isSingleNested){var Ut=ce.$get(gt);Ut&&Ze.push(Ut)}else if(ut.$isMongooseDocumentArray){var $t=ce.$get(gt);if($t&&$t.length){var Yt,Vt=y($t);try{for(Vt.s();!(Yt=Vt.n()).done;){var or=Yt.value;or&&Ze.push(or)}}catch(hr){Vt.e(hr)}finally{Vt.f()}}}}for(var cr=ce.modifiedPaths(),Fr=0,yn=Ze;Fr<yn.length;Fr++){var Lr=yn[Fr];if(Lr.$basePath){var xn,Zr=Lr.$__pathRelativeToParent(),kr=y(Lr.modifiedPaths());try{for(kr.s();!(xn=kr.n()).done;){var Hr=xn.value;De.delete(Zr+"."+Hr)}}catch(hr){kr.e(hr)}finally{kr.f()}var hn=Lr.$parent();if(hn==null)throw new Error("Cannot validate subdocument that does not have a parent");!ce.$isModified(Zr,null,cr)||hn.$__.activePaths.getStatePaths("modify").hasOwnProperty(Zr)||hn.$isDefault(Zr)||(De.add(Zr),ce.$__.pathsToScopes==null&&(ce.$__.pathsToScopes={}),ce.$__.pathsToScopes[Zr]=Lr.$isDocumentArrayElement?Lr.__parentArray:Lr.$parent(),ye[Zr]={skipSchemaValidators:!0},Lr.$isDocumentArrayElement&&Lr.__index!=null&&(ye[Zr].index=Lr.__index))}}}var Hn,pr=y(De);try{for(pr.s();!(Hn=pr.n()).done;){var bn=Hn.value,Qt=ce.$__schema.path(bn);if(Qt){if(Qt.$isMongooseDocumentArray){var Er,Wr=y(De);try{for(Wr.s();!(Er=Wr.n()).done;){var Dr=Er.value;(Dr==null||Dr.startsWith(Qt.path+"."))&&De.delete(Dr)}}catch(hr){Wr.e(hr)}finally{Wr.f()}}(Qt.caster||Qt.validators.length!==0||Qt.$parentSchemaDocArray)&&(!Qt.$isMongooseArray||Qt.$isMongooseDocumentArray||Qt.$embeddedSchemaType.$isMongooseArray||Qt.validators.length!==0||Qt.$embeddedSchemaType.validators.length!==0)||De.delete(bn)}}}catch(hr){pr.e(hr)}finally{pr.f()}Array.isArray(Ne)?De=(function(hr,kn){var pn,sn=new Set(kn),Mr=new Map([]),Pr=y(kn);try{for(Pr.s();!(pn=Pr.n()).done;){var Ar=pn.value;if(Ar.indexOf(".")!==-1)for(var Ln=Ar.split("."),ys=Ln[0],Ks=1;Ks<Ln.length;++Ks)Mr.set(ys,Ar),ys=ys+"."+Ln[Ks]}}catch(Gi){Pr.e(Gi)}finally{Pr.f()}var Gs,zn=new Set,Mn=y(hr);try{for(Mn.s();!(Gs=Mn.n()).done;){var si=Gs.value;sn.has(si)?zn.add(si):Mr.has(si)&&zn.add(Mr.get(si))}}catch(Gi){Mn.e(Gi)}finally{Mn.f()}return zn})(De,Ne):Array.isArray(Re)&&(De=(function(hr,kn){return kn=new Set(kn),hr=Array.from(hr).filter(function(pn){return!kn.has(pn)}),new Set(hr)})(De,Re)),(function(hr,kn){var pn,sn=y(kn);try{for(sn.s();!(pn=sn.n()).done;){var Mr=pn.value,Pr=hr.$__schema.path(Mr);Pr&&Pr.$isMongooseArray&&(Array.isArray(Pr)||!Pr.$isMongooseDocumentArray||Pr&&Pr.schemaOptions&&Pr.schemaOptions.required)&&(!Pr.$isMongooseArray||Pr.$isMongooseDocumentArray||Pr.$embeddedSchemaType.$isMongooseArray||Pr.$embeddedSchemaType.validators.length!==0)&&In(hr.$__getValue(Mr),kn,Mr)}}catch(Ar){sn.e(Ar)}finally{sn.f()}})(ce,De);var nn,fn={skipArrays:!0},Dn=y(De);try{for(Dn.s();!(nn=Dn.n()).done;){var xi=nn.value;if(ce.$__schema.nested[xi]){var Us=ce.$__getValue(xi);Te(Us)&&(Us=Us.toObject({transform:!1}));var Ls=oe(Us,xi,fn,ce.$__schema);Object.keys(Ls).filter(function(hr){return!ce.$__schema.singleNestedPaths.hasOwnProperty(hr)}).forEach(qe)}}}catch(hr){Dn.e(hr)}finally{Dn.f()}var ds,Cn=y(De);try{for(Cn.s();!(ds=Cn.n()).done;){var Ur=ds.value,Pn=ce.$__schema.path(Ur);if(Pn&&(Pn.$parentSchemaDocArray&&typeof Pn.$parentSchemaDocArray.path=="string"&&De.add(Pn.$parentSchemaDocArray.path),Pn.$isSchemaMap)){var Wn=ce.$__getValue(Ur);if(Wn!=null){var Bn,Vn=y(Wn.keys());try{for(Vn.s();!(Bn=Vn.n()).done;){var gs=Bn.value;De.add(Ur+"."+gs)}}catch(hr){Vn.e(hr)}finally{Vn.f()}}}}}catch(hr){Cn.e(hr)}finally{Cn.f()}return[De=Array.from(De),ye]}function In(ce,Ne,Re){if(ce!=null)for(var Ve=ce.length,ye=0;ye<Ve;++ye)Array.isArray(ce[ye])?In(ce[ye],Ne,Re+"."+ye):Ne.add(Re+"."+ye)}function ln(ce,Ne,Re,Ve){var ye,De,qe,Ze=ce.$__schema,ht=Ze.virtuals,ct=Object.keys(ht),gt=ct.length,ut=gt,Ut=ce._doc,$t=typeof(Ve&&Ve.aliases)!="boolean"||Ve.aliases;Re=Re||{};var Yt=null;if(Array.isArray(Re.virtuals))Yt=new Set(Re.virtuals);else if(Re.virtuals&&Re.virtuals.pathsToSkip){Yt=new Set(ct);for(var Vt=0;Vt<Re.virtuals.pathsToSkip.length;Vt++)Yt.has(Re.virtuals.pathsToSkip[Vt])&&Yt.delete(Re.virtuals.pathsToSkip[Vt])}if(!Ut)return Ne;for(gt=0;gt<ut;++gt)if(ye=ct[gt],(Yt==null||Yt.has(ye))&&($t||!Ze.aliases.hasOwnProperty(ye))){if(De=ye,Re.path!=null){if(!ye.startsWith(Re.path+"."))continue;De=ye.substring(Re.path.length+1)}if(De.indexOf(".")!==-1||De!==ye){var or=De.split(".");if((qe=M(ce.get(ye),Re))!==void 0){var cr=or.length;Ut=Ne;for(var Fr=0;Fr<cr-1;++Fr)Ut[or[Fr]]=Ut[or[Fr]]||{},Ut=Ut[or[Fr]];Ut[or[cr-1]]=qe}}else{if((qe=ht[ye].applyGetters(void 0,ce))===void 0)continue;qe=M(qe,Re),Ne[De]=qe}}return Ne}function gn(ce,Ne){if(je(Ne))throw new Error("`transform` function must be synchronous, but the transform on path `"+ce+"` returned a promise.")}function Yn(ce,Ne,Re){var Ve=ce.$populated(Ne,!0);if(!Ve&&ce.$__.selected){var ye=Ne.split(".")[0];if(ce.$__.selected[ye+".$"])return ye}if(Ve&&$e.isMongooseArray(Re)&&(Ve.options.match||Ve.options.options&&$e.object.hasOwnProperty(Ve.options.options,"limit")||Ve.options.options&&Ve.options.options.skip||Ve.options.select&&(Ve.options.select._id===0||/\s?-_id\s?/.test(Ve.options.select)))){var De=Re[He];if(Object.keys(De).length===0||De.$set||De.$pop)return Ne}}function Gr(ce,Ne,Re,Ve,ye,De){if(De||(De="$set"),Re[De]||(Re[De]={}),Re[De][Ve.path]=ye,ce.$__schema.options.versionKey!==!1&&!(function(qe,Ze){var ht=qe.$__schema.options.skipVersioning;return!!ht&&ht[Ze=Ze.replace(/\.\d+\./,".")]})(ce,Ve.path)&&3&~ce.$__.version&&!ce.$__schema.options.optimisticConcurrency){switch(De){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}De==="$push"||De==="$addToSet"||De==="$pullAll"||De==="$pull"?/\.\d+\.|\.\d+$/.test(Ve.path)?ce.$__.version=3:ce.$__.version=2:/^\$p/.test(De)||Array.isArray(ye)?ce.$__.version=3:/\.\d+\.|\.\d+$/.test(Ve.path)&&(ce.$__.version=1)}}function Sn(ce,Ne,Re,Ve,ye){if(!Re.$set||!Re.$set[Ve.path])if(typeof ye.$__getAtomics!="function"){var De,qe,Ze=ye[He],ht=Object.keys(Ze),ct=ht.length;if(ct===0)return $e.isMongooseObject(ye)?ye=ye.toObject({depopulate:1,_isNested:!0}):ye.valueOf&&(ye=ye.valueOf()),Gr(ce,0,Re,Ve,ye);for(;ct--;)De=Ze[qe=ht[ct]],$e.isMongooseObject(De)?De=De.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(De)?De=De.map(gt):De.valueOf&&(De=De.valueOf()),qe==="$addToSet"&&(De={$each:De}),Gr(ce,0,Re,Ve,De,qe)}else ye.$__getAtomics().forEach(function(ut){var Ut=ut[0],$t=ut[1];Gr(ce,0,Re,Ve,$t,Ut)});function gt(ut){return $e.isMongooseObject(ut)?ut.toObject({depopulate:1,_isNested:!0}):ut}}at.prototype.$__schema,at.prototype.schema,Object.defineProperty(at.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){return this.$__.locals==null&&(this.$__.locals={}),this.$__.locals},set:function(ce){this.$__.locals=ce}}),at.prototype.isNew,Object.defineProperty(at.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0}),at.prototype.id,at.prototype.$errors,Object.defineProperty(at.prototype,"$op",{get:function(){return this.$__.op||null},set:function(ce){this.$__.op=ce}}),at.prototype.$__buildDoc=function(ce,Ne,Re,Ve,ye){for(var De={},qe=Object.keys(this.$__schema.paths).filter(function(Fr){return!Fr.includes("$*")}),Ze=qe.length,ht=0;ht<Ze;++ht){var ct=qe[ht];if(!(ct==="_id"&&(Re||ce&&"_id"in ce)))for(var gt=this.$__schema.paths[ct].splitPath(),ut=gt.length,Ut=ut-1,$t="",Yt=De,Vt=!1,or=0;or<ut;++or){var cr=gt[or];if($t.length?$t+="."+cr:$t=cr,Ve===!0){if($t in Ne)break}else if(Ve===!1&&Ne&&!Vt){if($t in Ne)Vt=!0;else if(!ye[$t])break}or<Ut&&(Yt=Yt[cr]||(Yt[cr]={}))}}this._doc=De},at.prototype.toBSON=function(){return this.toObject(Ce)},at.prototype.init=function(ce,Ne,Re){return typeof Ne=="function"&&(Re=Ne,Ne=null),this.$__init(ce,Ne),Re&&Re(null,this),this},at.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)},at.prototype.$__init=function(ce,Ne){if(this.$isNew=!1,Ne=Ne||{},ce._id!=null&&Ne.populated&&Ne.populated.length){var Re,Ve=String(ce._id),ye=y(Ne.populated);try{for(ye.s();!(Re=ye.n()).done;){var De=Re.value;if(De.isVirtual?this.$populated(De.path,$e.getValue(De.path,ce),De):this.$populated(De.path,De._docs[Ve],De),De._childDocs!=null){var qe,Ze=y(De._childDocs);try{for(Ze.s();!(qe=Ze.n()).done;){var ht=qe.value;ht!=null&&ht.$__!=null&&(ht.$__.parent=this)}}catch(gt){Ze.e(gt)}finally{Ze.f()}De._childDocs=[]}}}catch(gt){ye.e(gt)}finally{ye.f()}}et(this,ce,this._doc,Ne),ie(this,Ne.populated),this.$emit("init",this),this.constructor.emit("init",this);var ct=this.$__.exclude===!1&&this.$__.selected?U(this.$__.selected):null;return K(this,this.$__.selected,this.$__.exclude,ct,!1,this.$__.skipDefaults),this},at.prototype.updateOne=function(ce,Ne,Re){var Ve=this.constructor.updateOne({_id:this._doc._id},ce,Ne),ye=this;return Ve.pre(function(De){ye.constructor._middleware.execPre("updateOne",ye,[ye],De)}),Ve.post(function(De){ye.constructor._middleware.execPost("updateOne",ye,[ye],{},De)}),this.$session()!=null&&("session"in Ve.options||(Ve.options.session=this.$session())),Re!=null?Ve.exec(Re):Ve},at.prototype.replaceOne=function(){var ce=Array.prototype.slice.call(arguments);return ce.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,ce)},at.prototype.$session=function(ce){if(arguments.length===0)return this.$__.session!=null&&this.$__.session.hasEnded?(this.$__.session=null,null):this.$__.session;if(ce!=null&&ce.hasEnded)throw new I("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(ce!=null||this.$__.session!=null){if(this.$__.session=ce,!this.$isSubdocument){var Ne,Re=y(this.$getAllSubdocs());try{for(Re.s();!(Ne=Re.n()).done;)Ne.value.$session(ce)}catch(Ve){Re.e(Ve)}finally{Re.f()}}return ce}},at.prototype.$timestamps=function(ce){return arguments.length===0?this.$__.timestamps!=null?this.$__.timestamps:this.$__schema?this.$__schema.options.timestamps:void 0:(ce!==this.$timestamps()&&(this.$__.timestamps=ce),this)},at.prototype.overwrite=function(ce){for(var Ne=0,Re=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(ce))));Ne<Re.length;Ne++){var Ve=Re[Ne];Ve!=="_id"&&(this.$__schema.options.versionKey&&Ve===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&Ve===this.$__schema.options.discriminatorKey||this.$set(Ve,ce[Ve]))}return this},at.prototype.$set=function(ce,Ne,Re,Ve){var ye=this;$e.isPOJO(Re)&&(Ve=Re,Re=void 0);var De,qe,Ze,ht,ct=Ve&&Ve.merge,gt=Re&&Re!==!0,ut=Re===!0,Ut=0,$t=Ve&&"strict"in Ve,Yt=$t?Ve.strict:this.$__.strictMode;if(gt&&((this.$__.adhocPaths||(this.$__.adhocPaths={}))[ce]=this.$__schema.interpretAsType(ce,Re,this.$__schema.options)),ce==null){var Vt=[Ne,ce];ce=Vt[0],Ne=Vt[1]}else if(typeof ce!="string"){if(ce instanceof at&&(ce=ce.$__isNested?ce.toObject():ce.$__schema===this.$__schema?ln(ce,b({},ce._doc)):ce._doc),ce==null){var or=[Ne,ce];ce=or[0],Ne=or[1]}ht=Ne?Ne+".":"";var cr=(De=ge(this.$__schema,ce)).length,Fr=Ve&&Ve._skipMinimizeTopLevel||!1;if(cr===0&&Fr)return delete Ve._skipMinimizeTopLevel,Ne&&this.$set(Ne,{}),this;Ve=Object.assign({},Ve,{_skipMinimizeTopLevel:!1});for(var yn=0;yn<cr;++yn){Ze=De[yn];var Lr=ht?ht+Ze:Ze;qe=this.$__schema.pathType(Lr);var xn=ce[Ze];if(Re!==!0||ht||xn==null||qe!=="nested"||this._doc[Ze]==null||delete this._doc[Ze],$e.isNonBuiltinObject(xn)&&qe==="nested")this.$set(Lr,xn,ut,Ve),dr(this.$get(Lr),Lr,this);else if(Yt){if(ut&&xn===void 0&&this.$get(Lr)!==void 0)continue;if(qe==="adhocOrUndefined"&&(qe=be(this,Lr,{typeOnly:!0})),qe==="real"||qe==="virtual")this.$set(Lr,xn,ut,Ve);else if(qe==="nested"&&xn instanceof at)this.$set(Lr,xn.toObject({transform:!1}),ut,Ve);else{if(Yt==="throw")throw qe==="nested"?new $(Ze,xn):new X(Ze);qe==="nested"&&xn==null&&this.$set(Lr,xn,ut,Ve)}}else this.$set(Lr,xn,ut,Ve)}for(var Zr={},kr=Object.keys(this.$__schema.tree),Hr=0,hn=kr.length;Hr<hn;++Hr)(Ze=kr[Hr])&&this._doc.hasOwnProperty(Ze)&&(Zr[Ze]=void 0);return this._doc=Object.assign(Zr,this._doc),this}var Hn=this.$__schema.pathType(ce),pr=null;if(Hn==="adhocOrUndefined"&&(pr=ce.indexOf(".")===-1?[ce]:ce.split("."),Hn=be(this,pr,{typeOnly:!0})),Hn==="adhocOrUndefined"&&!$t){pr==null&&(pr=ce.indexOf(".")===-1?[ce]:ce.split("."));var bn=he(this.$__schema,pr);bn!==void 0&&(Yt=bn)}Ne=ke(Ne,!0);var Qt,Er=ye.$__.priorDoc!=null?ye.$__.priorDoc.$__getValue(ce):ut?void 0:ye.$__getValue(ce);if(Hn==="nested"&&Ne){if(C(Ne)==="object"&&Ne!=null){if(Ne.$__!=null&&(Ne=Ne.toObject(Ce)),Ne==null)return this.invalidate(ce,new I.CastError("Object",Ne,ce)),this;var Wr=this.$isModified(ce),Dr=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(ce);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(ce)){var nn=this.$__getValue(ce);this.$__.savedState[ce]=nn;for(var fn=0,Dn=Object.keys(nn||{});fn<Dn.length;fn++){var xi=Dn[fn];this.$__.savedState[ce+"."+xi]=nn[xi]}}if(ct)return this.$set(Ne,ce,ut,Ve);this.$__setValue(ce,null),z(this,ce);var Us=ge(this.$__schema,Ne,ce);this.$__setValue(ce,{});var Ls,ds=y(Us);try{for(ds.s();!(Ls=ds.n()).done;){var Cn=Ls.value;this.$set(ce+"."+Cn,Ne[Cn],ut,b(b({},Ve),{},{_skipMarkModified:!0}))}}catch(Ge){ds.e(Ge)}finally{ds.f()}return Er==null||Wr&&!Dr||!$e.deepEqual(Dr?this.$__.savedState[ce]:Er,Ne)?this.markModified(ce):this.unmarkModified(ce),this}return this.invalidate(ce,new I.CastError("Object",Ne,ce)),this}if(pr==null&&(pr=ce.indexOf(".")===-1?[ce]:ce.split(".")),typeof this.$__schema.aliases[pr[0]]=="string"&&(pr[0]=this.$__schema.aliases[pr[0]]),Hn==="adhocOrUndefined"&&Yt){var Ur;for(Ut=0;Ut<pr.length;++Ut){var Pn=pr.slice(0,Ut+1).join(".");if(Ut+1<pr.length&&this.$__schema.pathType(Pn)==="virtual")return Be.set(ce,Ne,this),this;if((Qt=this.$__schema.path(Pn))!=null){if(Qt instanceof R){Ur=!0;break}if(Qt.$isSchemaMap&&Qt.$__schemaType instanceof R&&Ut<pr.length-1){Ur=!0,Qt=Qt.$__schemaType;break}}}if(Qt==null&&(Qt=be(this,ce)),!Ur&&!Qt){if(Yt==="throw")throw new X(ce);return this}}else{if(Hn==="virtual")return(Qt=this.$__schema.virtualpath(ce)).applySetters(Ne,this),this;Qt=this.$__path(ce)}var Wn,Bn=this._doc,Vn="";for(Ut=0;Ut<pr.length-1;++Ut)Bn=Bn instanceof Map?Bn.get(pr[Ut]):Bn[pr[Ut]],Vn+=(Vn.length!==0?".":"")+pr[Ut],Bn||(this.$set(Vn,{}),this.$__isSelected(Vn)||this.unmarkModified(Vn),Bn=this.$__getValue(Vn));if(pr.length<=1)Wn=ce;else{var gs=pr.length;for(Ut=0;Ut<gs;++Ut){var hr=pr.slice(0,Ut+1).join(".");if(this.$get(hr,null,{getters:!1})===null){Wn=hr;break}}Wn||(Wn=ce)}if(!Qt)return this.$__set(Wn,ce,Ve,ut,pr,Qt,Ne,Er),Hn==="nested"&&Ne==null&&z(this,ce),this;if((Qt.$isSingleNested||Qt.$isMongooseArray)&&(function(Ge,_t){if(Ge.$__.validationError){for(var Nt=0,tt=Object.keys(Ge.$__.validationError.errors);Nt<tt.length;Nt++){var rr=tt[Nt];rr.startsWith(_t+".")&&delete Ge.$__.validationError.errors[rr]}Object.keys(Ge.$__.validationError.errors).length===0&&(Ge.$__.validationError=null)}})(this,ce),Ne!=null&&ct&&Qt.$isSingleNested){Ne instanceof at&&(Ne=Ne.toObject({virtuals:!1,transform:!1}));for(var kn=0,pn=Object.keys(Ne);kn<pn.length;kn++){var sn=pn[kn];this.$set(ce+"."+sn,Ne[sn],ut,Ve)}return this}var Mr=!0;try{var Pr,Ar=(function(){if(Qt.options==null||!(Ne instanceof at))return!1;var Ge=Ne.constructor,_t=typeof Qt.options.ref!="function"||Qt.options.ref[tr]?Qt.options.ref:Qt.options.ref.call(ye,ye),Nt=_t?.modelName||_t;if(Nt!=null&&(Nt===Ge.modelName||Nt===Ge.baseModelName))return!0;var tt=Qt.options.refPath;if(tt==null)return!1;var rr=Ne.get(tt);return rr===Ge.modelName||rr===Ge.baseModelName})(),Ln=!1;if(Ar&&Ne instanceof at&&(!Ne.$__.wasPopulated||$e.deepEqual(Ne.$__.wasPopulated.value,Ne._doc._id))){var ys=Qt&&Qt.$isSingleNested?Qt.cast(Ne,this):Ne._doc._id;this.$populated(ce,ys,v({},Jt,Ne.constructor)),Ne.$__.wasPopulated={value:ys},Ln=!0}var Ks=this.$__schema.options.typeKey;if(Qt.options&&Array.isArray(Qt.options[Ks])&&Qt.options[Ks].length&&Qt.options[Ks][0]&&Qt.options[Ks][0].ref&&(function(Ge,_t){if(!Array.isArray(Ge)||Ge.length===0)return!1;var Nt,tt=y(Ge);try{for(tt.s();!(Nt=tt.n()).done;){var rr=Nt.value;if(!(rr instanceof at)||rr.constructor.modelName==null||rr.constructor.modelName!=_t&&rr.constructor.baseModelName!=_t)return!1}}catch(zt){tt.e(zt)}finally{tt.f()}return!0})(Ne,Qt.options[Ks][0].ref)){Pr=v({},Jt,Ne[0].constructor),this.$populated(ce,Ne.map(function(Ge){return Ge._doc._id}),Pr);var Gs,zn=y(Ne);try{for(zn.s();!(Gs=zn.n()).done;){var Mn=Gs.value;Mn.$__.wasPopulated={value:Mn._doc._id}}}catch(Ge){zn.e(Ge)}finally{zn.f()}Ln=!0}if(!Ar||!Qt.$isSingleNested||!Ne.$__){var si=this;this.$__schema.singleNestedPaths[ce]!=null&&pr.length>1&&(si=vr(this,pr,this.schema)),Ne=Ve!=null&&Ve.overwriteImmutable?Qt.applySetters(Ne,si,!1,Er,{path:ce,overwriteImmutable:!0}):Qt.applySetters(Ne,si,!1,Er,{path:ce})}if(Array.isArray(Ne)&&!Array.isArray(Qt)&&Qt.$isMongooseDocumentArray&&Ne.length!==0&&Ne[0]!=null&&Ne[0].$__!=null&&Ne[0].$__.populated!=null){for(var Gi=Object.keys(Ne[0].$__.populated),Ma=function(){var Ge=ki[Ra];ye.$populated(ce+"."+Ge,Ne.map(function(_t){return _t.$populated(Ge)}),Ne[0].$__.populated[Ge].options)},Ra=0,ki=Gi;Ra<ki.length;Ra++)Ma();Ln=!0}if(!Ln&&this.$__.populated){if(Array.isArray(Ne)&&this.$__.populated[ce])for(var ii=0;ii<Ne.length;++ii)Ne[ii]instanceof at&&Ne.set(ii,Ne[ii]._doc._id,!0);delete this.$__.populated[ce]}Ne!=null&&Qt.$isSingleNested&&(function(Ge,_t,Nt){var tt=_t.schema;if(tt!=null)for(var rr=0,zt=Object.keys(tt.paths);rr<zt.length;rr++){var xt=zt[rr],Lt=tt.paths[xt];if(Lt.$immutableSetter!=null){var ne=Nt?.$__getValue(xt);Lt.$immutableSetter.call(Ge,ne)}}})(Ne,Qt,Er),this.$markValid(ce)}catch(Ge){Ge instanceof I.StrictModeError&&Ge.isImmutableError?this.invalidate(ce,Ge):Ge instanceof I.CastError?(this.invalidate(Ge.path,Ge),Ge.$originalErrorPath&&this.invalidate(ce,new I.CastError(Qt.instance,Ne,ce,Ge.$originalErrorPath))):this.invalidate(ce,new I.CastError(Qt.instance,Ne,ce,Ge)),Mr=!1}if(Mr){var _i,re=null,D=null;if(!ut){var Ae=this.$isSubdocument?this.ownerDocument():this;re=Ae.$__.savedState,D=this.$isSubdocument?this.$__.fullPath+"."+ce:ce,Ae.$__saveInitialState(D)}this.$__set(Wn,ce,Ve,ut,pr,Qt,Ne,Er);var de=!((_i=this.$__.session)===null||_i===void 0||!_i.transaction),We=this.$__.session&&this.$__.session[Wt]&&this.$__.session[Wt].has(this)&&this.$__.session[Wt].get(this).modifiedPaths&&!this.$__.session[Wt].get(this).modifiedPaths.has(D);re!=null&&re.hasOwnProperty(D)&&(!de||We)&&$e.deepEqual(Ne,re[D])&&this.unmarkModified(ce)}return Qt.$isSingleNested&&(this.isDirectModified(ce)||Ne==null)&&z(this,ce),this},at.prototype.set=at.prototype.$set,at.prototype.$__shouldModify=function(ce,Ne,Re,Ve,ye,De,qe,Ze){return!(Re&&Re._skipMarkModified||!this.$isNew&&!(Ne in this.$__.activePaths.getStatePaths("modify"))&&(qe!==void 0||this.$__isSelected(Ne))&&(qe===void 0&&Ne in this.$__.activePaths.getStatePaths("default")||this.$populated(Ne)&&qe instanceof at&&Pe(qe._doc._id,Ze)||Pe(qe,Ze!==void 0?Ze:$e.getValue(Ne,this))&&(Ve||qe==null||!(Ne in this.$__.activePaths.getStatePaths("default"))||!Pe(qe,De.getDefault(this,Ve)))))},at.prototype.$__set=function(ce,Ne,Re,Ve,ye,De,qe,Ze){_=_||l(6547);var ht=this.$__shouldModify(ce,Ne,Re,Ve,ye,De,qe,Ze);ht?(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[Ne]&&(delete this.$__.primitiveAtomics[Ne],Object.keys(this.$__.primitiveAtomics).length===0&&delete this.$__.primitiveAtomics),this.markModified(ce),E||(E=l(7557)),qe&&$e.isMongooseArray(qe)&&(qe._registerAtomic("$set",qe),$e.isMongooseDocumentArray(qe)&&qe.forEach(function(or){or&&or.__parentArray&&(or.__parentArray=qe)}))):Array.isArray(qe)&&Array.isArray(Ze)&&$e.isMongooseArray(qe)&&$e.isMongooseArray(Ze)&&(qe[He]=Ze[He],qe[Ye]=Ze[Ye],$e.isMongooseDocumentArray(qe)&&qe.forEach(function(or){or!=null&&(or.$isNew=!1)}));for(var ct=this._doc,gt=0,ut=ye.length,Ut="";gt<ut;gt++){var $t=gt+1===ut;if(Ut+=Ut?"."+ye[gt]:ye[gt],!Gt.has(ye[gt]))if($t)ct instanceof Map?ct.set(ye[gt],qe):ct.$isSingleNested?(ye[gt]in ct||(ct[ye[gt]]=qe),ct._doc[ye[gt]]=qe,ht&&ct.markModified(ye[gt])):ct[ye[gt]]=qe;else{var Yt=ct instanceof Map,Vt=Yt?ct.get(ye[gt]):ct[ye[gt]];$e.isPOJO(Vt)||Vt&&Vt instanceof _||Vt&&!Array.isArray(Vt)&&Vt.$isSingleNested||Vt&&Array.isArray(Vt)||Vt==null&&(Vt={},Yt?ct.set(ye[gt],Vt):ct[ye[gt]]=Vt),ct=Vt}}},at.prototype.$__getValue=function(ce){if(typeof ce!="string"&&!Array.isArray(ce))throw new TypeError('Invalid `path`. Must be either string or array. Got "'.concat(ce,'" (type ').concat(C(ce),")"));return $e.getValue(ce,this._doc)},at.prototype.$inc=function(ce,Ne){var Re=this;if(Ne==null&&(Ne=1),Array.isArray(ce))return ce.forEach(function(ht){return Re.$inc(ht,Ne)}),this;var Ve=this.$__path(ce);if(Ve==null){if(this.$__.strictMode==="throw")throw new X(ce);if(this.$__.strictMode===!0)return this}else if(Ve.instance!=="Number")return this.invalidate(ce,new I.CastError(Ve.instance,Ne,ce)),this;var ye=this.$__getValue(ce)||0,De=!1,qe=null,Ze=Ne;try{Ne=Ve.cast(Ne),Ze=(qe=Ve.applySetters(ye+Ne,this))-ye,De=!0}catch(ht){this.invalidate(ce,new I.CastError("number",Ne,ce,ht))}return De&&(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[ce]==null?this.$__.primitiveAtomics[ce]={$inc:Ze}:this.$__.primitiveAtomics[ce].$inc+=Ze,this.markModified(ce),this.$__setValue(ce,qe)),this},at.prototype.$__setValue=function(ce,Ne){return $e.setValue(ce,Ne,this._doc),this},at.prototype.get=function(ce,Ne,Re){var Ve;Re==null&&(Re={}),Ne&&(Ve=this.$__schema.interpretAsType(ce,Ne,this.$__schema.options));var ye=Re.noDottedPath,De=ye?this.$__schema.paths[ce]:this.$__path(ce);if(De==null&&(De=this.$__schema.virtualpath(ce))!=null)return De.applyGetters(void 0,this);if(ye){var qe=this._doc[ce];return Ve&&(qe=Ve.cast(qe)),De!=null&&Re.getters!==!1?De.applyGetters(qe,this):qe}if(De!=null&&De.instance==="Mixed"){var Ze=this.$__schema.virtualpath(ce);Ze!=null&&(De=Ze)}var ht=ce.indexOf(".")!==-1,ct=this._doc,gt=ht?ce.split("."):[ce];typeof this.$__schema.aliases[gt[0]]=="string"&&(gt[0]=this.$__schema.aliases[gt[0]]);for(var ut=0,Ut=gt.length;ut<Ut;ut++)ct&&ct._doc&&(ct=ct._doc),ct=ct==null?void 0:ct instanceof Map?ct.get(gt[ut],{getters:!1}):ut===Ut-1?$e.getValue(gt[ut],ct):ct[gt[ut]];if(Ve&&(ct=Ve.cast(ct)),De!=null&&Re.getters!==!1)ct=De.applyGetters(ct,this);else if(this.$__schema.nested[ce]&&Re.virtuals)return ln(this,M(ct)||{},{path:ce});return ct},at.prototype[vt]=at.prototype.get,at.prototype.$get=at.prototype.get,at.prototype.$__path=function(ce){var Ne=this.$__.adhocPaths;return(Ne&&Ne.hasOwnProperty(ce)?Ne[ce]:null)||this.$__schema.path(ce)},at.prototype.markModified=function(ce,Ne){this.$__saveInitialState(ce),this.$__.activePaths.modify(ce),Ne==null||this.$isSubdocument||(this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[ce]=Ne)},at.prototype.$__saveInitialState=function(ce){var Ne=this.$__.savedState,Re=ce;if(Ne!=null){var Ve=Re.indexOf("."),ye=Ve===-1?Re:Re.slice(0,Ve);Ne.hasOwnProperty(ye)||(Ne[ye]=M(this.$__getValue(ye)))}},at.prototype.unmarkModified=function(ce){this.$__.activePaths.init(ce),this.$__.pathsToScopes!=null&&delete this.$__.pathsToScopes[ce]},at.prototype.$ignore=function(ce){this.$__.activePaths.ignore(ce)},at.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))},at.prototype.$isEmpty=function(ce){var Ne={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){var Re=this.$get(ce);return Re==null||C(Re)==="object"&&($e.isPOJO(Re)?an(Re):Object.keys(Re.toObject(Ne)).length===0)}return Object.keys(this.toObject(Ne)).length===0},at.prototype.modifiedPaths=function(ce){ce=ce||{};var Ne=Object.keys(this.$__.activePaths.getStatePaths("modify")),Re=new Set,Ve=0,ye=0,De=Ne.length;for(Ve=0;Ve<De;++Ve){var qe=Ne[Ve],Ze=Le(qe),ht=Ze.length;for(ye=0;ye<ht;++ye)Re.add(Ze[ye]);if(ce.includeChildren){var ct=0,gt=this.$get(qe);if(C(gt)==="object"&&gt!==null){gt._doc&&(gt=gt._doc);var ut=gt.length;if(Array.isArray(gt))for(ct=0;ct<ut;++ct){var Ut=qe+"."+ct;if(!Re.has(Ut)&&(Re.add(Ut),gt[ct]!=null&&gt[ct].$__)){var $t=gt[ct].modifiedPaths(),Yt=0,Vt=$t.length;for(Yt=0;Yt<Vt;++Yt)Re.add(Ut+"."+$t[Yt])}}else{var or=Object.keys(gt),cr=0,Fr=or.length;for(cr=0;cr<Fr;++cr)Re.add(qe+"."+or[cr])}}}}return Array.from(Re)},at.prototype[dt]=at.prototype.modifiedPaths,at.prototype.isModified=function(ce,Ne,Re){var Ve=this;if(ce){var ye=Ne&&Ne.ignoreAtomics,De=this.$__.activePaths.states.modify;if(De==null)return!1;typeof ce=="string"&&(ce=ce.indexOf(" ")===-1?[ce]:ce.split(" "));var qe,Ze=y(ce);try{for(Ze.s();!(qe=Ze.n()).done;)if(De[qe.value]!=null)return!0}catch(ut){Ze.e(ut)}finally{Ze.f()}var ht=Re||this[dt](),ct=ce.some(function(ut){return!!~ht.indexOf(ut)}),gt=Object.keys(De);return ye&&(gt=gt.filter(function(ut){var Ut=Ve.$__getValue(ut);return Ut==null||Ut[He]==null||Ut[He].$set!==void 0})),ct||ce.some(function(ut){return gt.some(function(Ut){return Ut===ut||ut.startsWith(Ut+".")})})}return this.$__.activePaths.some("modify")},at.prototype.$isModified=at.prototype.isModified,at.prototype[It]=at.prototype.isModified,at.prototype.$isDefault=function(ce){var Ne=this;if(ce==null)return this.$__.activePaths.some("default");if(typeof ce=="string"&&ce.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(ce);var Re=ce;return Array.isArray(Re)||(Re=Re.split(" ")),Re.some(function(Ve){return Ne.$__.activePaths.getStatePaths("default").hasOwnProperty(Ve)})},at.prototype.$isDeleted=function(ce){return arguments.length===0?!!this.$__.isDeleted:(this.$__.isDeleted=!!ce,this)},at.prototype.isDirectModified=function(ce){var Ne=this;if(ce==null)return this.$__.activePaths.some("modify");if(typeof ce=="string"&&ce.indexOf(" ")===-1){var Re=this.$__.activePaths.getStatePaths("modify").hasOwnProperty(ce);if(Re||ce.indexOf(".")===-1)return Re;for(var Ve=ce.split("."),ye=0;ye<Ve.length-1;++ye){var De=Ve.slice(0,ye+1).join("."),qe=this.$get(De);if(qe!=null&&qe.$__!=null&&qe.isDirectModified(Ve.slice(ye+1).join(".")))return!0}return!1}var Ze=ce;return typeof Ze=="string"&&(Ze=Ze.split(" ")),Ze.some(function(ht){return Ne.isDirectModified(ht)})},at.prototype.isInit=function(ce){var Ne=this;if(ce==null)return this.$__.activePaths.some("init");if(typeof ce=="string"&&ce.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(ce);var Re=ce;return Array.isArray(Re)||(Re=Re.split(" ")),Re.some(function(Ve){return Ne.$__.activePaths.getStatePaths("init").hasOwnProperty(Ve)})},at.prototype.isSelected=function(ce){var Ne=this;if(this.$__.selected==null)return!0;if(!ce)return!1;if(ce==="_id")return this.$__.selected._id!==0;if(ce.indexOf(" ")!==-1&&(ce=ce.split(" ")),Array.isArray(ce))return ce.some(function(ut){return Ne.$__isSelected(ut)});var Re=Object.keys(this.$__.selected),Ve=null;if(Re.length===1&&Re[0]==="_id")return this.$__.selected._id===0;for(var ye=0,De=Re;ye<De.length;ye++){var qe=De[ye];if(qe!=="_id"&&fe(this.$__.selected[qe])){Ve=!!this.$__.selected[qe];break}}if(Ve===null)return!0;if(ce in this.$__.selected)return Ve;for(var Ze=ce+".",ht=0,ct=Re;ht<ct.length;ht++){var gt=ct[ht];if(gt!=="_id"){if(gt.startsWith(Ze))return Ve||gt!==Ze;if(Ze.startsWith(gt+"."))return Ve}}return!Ve},at.prototype.$__isSelected=at.prototype.isSelected,at.prototype.isDirectSelected=function(ce){var Ne=this;if(this.$__.selected==null)return!0;if(ce==="_id")return this.$__.selected._id!==0;if(ce.indexOf(" ")!==-1&&(ce=ce.split(" ")),Array.isArray(ce))return ce.some(function(Ze){return Ne.isDirectSelected(Ze)});var Re=Object.keys(this.$__.selected),Ve=null;if(Re.length===1&&Re[0]==="_id")return this.$__.selected._id===0;for(var ye=0,De=Re;ye<De.length;ye++){var qe=De[ye];if(qe!=="_id"&&fe(this.$__.selected[qe])){Ve=!!this.$__.selected[qe];break}}return Ve===null||(this.$__.selected.hasOwnProperty(ce)?Ve:!Ve)},at.prototype.validate=(function(){var ce=m(A().m(function Ne(Re,Ve){var ye,De,qe=this,Ze=arguments;return A().w(function(ht){for(;;)switch(ht.n){case 0:if(typeof Re!="function"&&typeof Ve!="function"&&typeof Ze[2]!="function"){ht.n=1;break}throw new I("Document.prototype.validate() no longer accepts a callback");case 1:if(this.$op="validate",Ze.length===1&&(C(Ze[0])!=="object"||Array.isArray(Ze[0])||(Ve=Ze[0],Re=null)),Ve&&typeof Ve.pathsToSkip=="string"&&(ye=Ve.pathsToSkip.indexOf(" ")===-1,Ve.pathsToSkip=ye?[Ve.pathsToSkip]:Ve.pathsToSkip.split(" ")),De=Ve&&Ve._skipParallelValidateCheck,this.$isSubdocument==null){ht.n=2;break}ht.n=4;break;case 2:if(!this.$__.validating||De){ht.n=3;break}throw new F(this);case 3:De||(this.$__.validating=!0);case 4:return ht.a(2,new Promise(function(ct,gt){qe.$__validate(Re,Ve,function(ut){if(qe.$op=null,qe.$__.validating=null,ut!=null)return gt(ut);ct()})}))}},Ne,this)}));return function(Ne,Re){return ce.apply(this,arguments)}})(),at.prototype.$validate=at.prototype.validate,at.prototype.$__validate=function(ce,Ne,Re){var Ve,ye=this;this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!ce?ce=d(this.$__.saveOptions.pathsToSave):typeof ce=="function"?(Re=ce,Ne=null,ce=null):typeof Ne=="function"&&(Re=Ne,Ne=null);var De,qe=Ne&&C(Ne)==="object"&&"validateModifiedOnly"in Ne,Ze=Ne&&Ne.pathsToSkip||null;De=qe?!!Ne.validateModifiedOnly:this.$__schema.options.validateModifiedOnly;var ht=Ne&&Ne.validateAllPaths;if(ht){if(Ze)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(ce)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(qe&&De)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}var ct,gt,ut=this,Ut=function(){var Qt=ye.$__.validationError;if(ye.$__.validationError=null,ye.$__.validating=null,De&&Qt!=null){for(var Er=0,Wr=Object.keys(Qt.errors);Er<Wr.length;Er++){var Dr=Wr[Er];ye.$isModified(Dr)||delete Qt.errors[Dr]}Object.keys(Qt.errors).length===0&&(Qt=void 0)}if(ye.$__.cachedRequired={},ye.$emit("validate",ut),ye.constructor.emit("validate",ut),Qt){for(var nn in Qt.errors)!ye[it]&&Qt.errors[nn]instanceof I.CastError&&ye.invalidate(nn,Qt.errors[nn]);return Qt}};if(ht){var $t,Yt=y(ct=new Set(Object.keys(this.$__schema.paths)));try{for(Yt.s();!($t=Yt.n()).done;){var Vt=$t.value,or=this.$__schema.path(Vt);if(or&&or.$isMongooseArray){var cr=this.$__getValue(Vt);cr&&In(cr,ct,Vt)}}}catch(Qt){Yt.e(Qt)}finally{Yt.f()}ct=d(ct),gt={}}else{var Fr=gr(this,ce,Ze,Ne&&Ne._nestedValidate);ct=De?Fr[0].filter(function(Qt){return ye.$isModified(Qt)}):Fr[0],gt=Fr[1]}if(typeof ce=="string"&&(ce=ce.split(" ")),ct.length===0)return Z(function(){var Qt=Ut();if(Qt)return ut.$__schema.s.hooks.execPost("validate:error",ut,[ut],{error:Qt},function(Er){Re(Er)});Re(null,ut)});var yn={},Lr=0,xn=(Ve=this.$__.saveOptions)===null||Ve===void 0?void 0:Ve.pathsToSave;if(Array.isArray(xn)){xn=new Set(xn);var Zr,kr=y(ct);try{for(kr.s();!(Zr=kr.n()).done;){var Hr=Zr.value;xn.has(Hr)&&pr(Hr)}}catch(Qt){kr.e(Qt)}finally{kr.f()}}else{var hn,Hn=y(ct);try{for(Hn.s();!(hn=Hn.n()).done;)pr(hn.value)}catch(Qt){Hn.e(Qt)}finally{Hn.f()}}function pr(Qt){Qt==null||yn[Qt]||(yn[Qt]=!0,Lr++,Z(function(){var Er=ut.$__schema.path(Qt);if(!Er)return--Lr||bn();if(ut.$isValid(Qt)){if(Er[ur]!=null&&Qt!==Er.path)return--Lr||bn();var Wr,Dr=ut.$__getValue(Qt);(Wr=ut.$populated(Qt))?Dr=Wr:Dr!=null&&Dr.$__!=null&&Dr.$__.wasPopulated&&(Dr=Dr._doc._id);var nn=ut.$__.pathsToScopes!=null&&Qt in ut.$__.pathsToScopes?ut.$__.pathsToScopes[Qt]:ut,fn=b(b({},gt[Qt]),{},{path:Qt,validateAllPaths:ht,_nestedValidate:!0});Er.doValidate(Dr,function(Dn){if(Dn){if((Er.$isSingleNested||Er.$isArraySubdocument||Er.$isMongooseDocumentArray)&&Dn instanceof q)return--Lr||bn();ut.invalidate(Qt,Dn,void 0,!0)}--Lr||bn()},nn,fn)}else--Lr||bn()}))}function bn(){var Qt=Ut();if(Qt)return ut.$__schema.s.hooks.execPost("validate:error",ut,[ut],{error:Qt},function(Er){Re(Er)});Re(null,ut)}},at.prototype.validateSync=function(ce,Ne){var Re,Ve=this,ye=this;arguments.length!==1||C(arguments[0])!=="object"||Array.isArray(arguments[0])||(Ne=arguments[0],ce=null),Re=Ne&&C(Ne)==="object"&&"validateModifiedOnly"in Ne?!!Ne.validateModifiedOnly:this.$__schema.options.validateModifiedOnly;var De,qe,Ze=Ne&&Ne.pathsToSkip,ht=Ne&&Ne.validateAllPaths;if(ht){if(Ze)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(ce)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}if(typeof ce=="string"){var ct=ce.indexOf(" ")===-1;ce=ct?[ce]:ce.split(" ")}else typeof Ze=="string"&&Ze.indexOf(" ")!==-1&&(Ze=Ze.split(" "));if(ht){var gt,ut=y(De=new Set(Object.keys(this.$__schema.paths)));try{for(ut.s();!(gt=ut.n()).done;){var Ut=gt.value,$t=this.$__schema.path(Ut);if($t&&$t.$isMongooseArray){var Yt=this.$__getValue(Ut);Yt&&In(Yt,De,Ut)}}}catch(hn){ut.e(hn)}finally{ut.f()}De=d(De),qe={}}else{var Vt=gr(this,ce,Ze);De=Re?Vt[0].filter(function(hn){return Ve.$isModified(hn)}):Vt[0],qe=Vt[1]}for(var or={},cr=0,Fr=De.length;cr<Fr;++cr){var yn=De[cr];if(!or[yn]){or[yn]=!0;var Lr=ye.$__schema.path(yn);if(Lr&&ye.$isValid(yn)){var xn=ye.$__getValue(yn),Zr=Lr.doValidateSync(xn,ye,{skipSchemaValidators:qe[yn],path:yn,validateModifiedOnly:Re,validateAllPaths:ht});if(Zr){if((Lr.$isSingleNested||Lr.$isArraySubdocument||Lr.$isMongooseDocumentArray)&&Zr instanceof q)continue;ye.invalidate(yn,Zr,void 0,!0)}}}}var kr=ye.$__.validationError;if(ye.$__.validationError=void 0,ye.$emit("validate",ye),ye.constructor.emit("validate",ye),kr)for(var Hr in kr.errors)kr.errors[Hr]instanceof I.CastError&&ye.invalidate(Hr,kr.errors[Hr]);return kr},at.prototype.invalidate=function(ce,Ne,Re,Ve){if(this.$__.validationError||(this.$__.validationError=new q(this)),!this.$__.validationError.errors[ce])return Ne&&typeof Ne!="string"||(Ne=new T({path:ce,message:Ne,type:Ve||"user defined",value:Re})),this.$__.validationError===Ne||this.$__.validationError.addError(ce,Ne),this.$__.validationError},at.prototype.$markValid=function(ce){this.$__.validationError&&this.$__.validationError.errors[ce]&&(delete this.$__.validationError.errors[ce],Object.keys(this.$__.validationError.errors).length===0&&(this.$__.validationError=null))},at.prototype.$isValid=function(ce){var Ne=this;return this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0||ce!=null&&(ce.indexOf(" ")!==-1&&(ce=ce.split(" ")),Array.isArray(ce)?ce.some(function(Re){return Ne.$__.validationError.errors[Re]==null}):this.$__.validationError.errors[ce]==null)},at.prototype.$__reset=function(){var ce,Ne=this.$isSubdocument?null:this.$getAllSubdocs({useCache:!0});if(Ne&&Ne.length>0){var Re,Ve=y(Ne);try{for(Ve.s();!(Re=Ve.n()).done;)Re.value.$__reset()}catch(ye){Ve.e(ye)}finally{Ve.f()}}return this.$__dirty().forEach(function(ye){var De=ye.value;De&&De[He]&&(De[Ye]=De[He],De[He]={})}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,ce=this,this.$__schema.requiredPaths().forEach(function(ye){ce.$__.activePaths.require(ye)}),this},at.prototype.$__undoReset=function(){if(this.$__.backup!=null&&this.$__.backup.activePaths!=null){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;var ce,Ne=y(this.$__dirty());try{for(Ne.s();!(ce=Ne.n()).done;){var Re=ce.value.value;Re&&Re[He]&&Re[Ye]&&(Re[He]=Re[Ye])}}catch(De){Ne.e(De)}finally{Ne.f()}if(!this.$isSubdocument){var Ve,ye=y(this.$getAllSubdocs());try{for(ye.s();!(Ve=ye.n()).done;)Ve.value.$__undoReset()}catch(De){ye.e(De)}finally{ye.f()}}}},at.prototype.$__dirty=function(){var ce=this,Ne=this.$__.activePaths.map("modify",function(ye){return{path:ye,value:ce.$__getValue(ye),schema:ce.$__path(ye)}});Ne=Ne.concat(this.$__.activePaths.map("default",function(ye){if(ye!=="_id"&&ce.$__getValue(ye)!=null)return{path:ye,value:ce.$__getValue(ye),schema:ce.$__path(ye)}}));var Re=new Map(Ne.filter(function(ye){return ye!=null}).map(function(ye){return[ye.path,ye.value]})),Ve=[];return Ne.forEach(function(ye){if(ye){for(var De=null,qe=Le(ye.path),Ze=0;Ze<qe.length-1;Ze++)if(Re.has(qe[Ze])){De=Re.get(qe[Ze]);break}De==null?Ve.push(ye):De!=null&&De[He]!=null&&De.hasAtomics()&&(De[He]={},De[He].$set=De)}}),Ve},at.prototype.$__setSchema=function(ce){H(ce.tree,this,void 0,ce.options);for(var Ne=0,Re=Object.keys(ce.virtuals);Ne<Re.length;Ne++){var Ve=Re[Ne];ce.virtuals[Ve]._applyDefaultGetters()}ce.path("schema")==null&&(this.schema=ce),this.$__schema=ce,this[Pt]=ce},at.prototype.$__getArrayPathsToValidate=function(){return B||(B=l(4878)),this.$__.activePaths.map("init","modify",(function(ce){return this.$__getValue(ce)}).bind(this)).filter(function(ce){return ce&&Array.isArray(ce)&&$e.isMongooseDocumentArray(ce)&&ce.length}).reduce(function(ce,Ne){return ce.concat(Ne)},[]).filter(function(ce){return ce})},at.prototype.$getAllSubdocs=function(ce){var Ne;if(ce!=null&&ce.useCache&&(Ne=this.$__.saveOptions)!==null&&Ne!==void 0&&Ne.__subdocs)return this.$__.saveOptions.__subdocs;B||(B=l(4878)),_=_||l(6547);var Re=[];return(function Ve(ye){var De,qe=[],Ze=y(ye.$__schema.childSchemas);try{for(Ze.s();!(De=Ze.n()).done;){var ht=De.value.model,ct=ye.$__getValue(ht.path);if(ct!=null){if(ct.$__&&qe.push(ct),Array.isArray(ct)){var gt,ut=y(ct);try{for(ut.s();!(gt=ut.n()).done;){var Ut=gt.value;Ut!=null&&Ut.$__&&qe.push(Ut)}}catch(Fr){ut.e(Fr)}finally{ut.f()}}if(ct instanceof Map){var $t,Yt=y(ct.values());try{for(Yt.s();!($t=Yt.n()).done;){var Vt=$t.value;Vt!=null&&Vt.$__&&qe.push(Vt)}}catch(Fr){Yt.e(Fr)}finally{Yt.f()}}}}}catch(Fr){Ze.e(Fr)}finally{Ze.f()}for(var or=0,cr=qe;or<cr.length;or++)Ve(cr[or]);Re.push.apply(Re,qe)})(this),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=Re),Re},at.prototype.$__handleReject=function(ce){this.$listeners("error").length?this.$emit("error",ce):this.constructor.listeners&&this.constructor.listeners("error").length&&this.constructor.emit("error",ce)},at.prototype.$toObject=function(ce,Ne){var Re,Ve,ye,De,qe,Ze,ht,ct,gt,ut,Ut,$t,Yt,Vt,or,cr=this.$__schema._defaultToObjectOptions(Ne),Fr=this.$__hasOnlyPrimitiveValues();(ce=$e.isPOJO(ce)?b({},ce):{})._calledWithOptions=ce._calledWithOptions||b({},ce),or=ce._calledWithOptions.minimize!=null?ce.minimize:((Re=this.$__schemaTypeOptions)===null||Re===void 0?void 0:Re.minimize)!=null?this.$__schemaTypeOptions.minimize:cr!=null&&cr.minimize!=null?cr.minimize:this.$__schema.options.minimize,ce.minimize=or,Fr||(ce._seen=ce._seen||new Map);var yn=(Ve=(ye=(De=ce._calledWithOptions.depopulate)!==null&&De!==void 0?De:cr?.depopulate)!==null&&ye!==void 0?ye:ce.depopulate)!==null&&Ve!==void 0&&Ve;if(yn&&ce._isNested&&this.$__.wasPopulated)return M(this.$__.wasPopulated.value||this._doc._id,ce);if(yn&&(ce.depopulate=!0),cr!=null)for(var Lr=0,xn=Object.keys(cr);Lr<xn.length;Lr++){var Zr=xn[Lr];ce[Zr]==null&&(ce[Zr]=cr[Zr])}ce._isNested=!0,ce.json=Ne,ce.minimize=or;var kr=ce._parentOptions;ce._parentOptions=this.$isSubdocument?ce:null;var Hr,hn=(qe=(Ze=(ht=ce._calledWithOptions.schemaFieldsOnly)!==null&&ht!==void 0?ht:ce.schemaFieldsOnly)!==null&&Ze!==void 0?Ze:cr.schemaFieldsOnly)!==null&&qe!==void 0&&qe;if(Fr&&!ce.flattenObjectIds)Hr=this.$__toObjectShallow(hn);else if(hn){Hr={};for(var Hn=0,pr=Object.keys(this.$__schema.paths);Hn<pr.length;Hn++){var bn=pr[Hn],Qt=this.$__getValue(bn);if(Qt!==void 0){var Er=bn,Wr=Hr;if(bn.indexOf(".")!==-1){var Dr=bn.split(".");Er=Dr[Dr.length-1];for(var nn=0;nn<Dr.length-1;++nn){var fn;Wr[Dr[nn]]=(fn=Wr[Dr[nn]])!==null&&fn!==void 0?fn:{},Wr=Wr[Dr[nn]]}}Wr[Er]=Qt!==null?M(Qt,ce):null}}}else Hr=M(this._doc,ce)||{};var Dn=(ct=(gt=(ut=ce._calledWithOptions.getters)!==null&&ut!==void 0?ut:ce.getters)!==null&&gt!==void 0?gt:cr.getters)!==null&&ct!==void 0&&ct;Dn&&((function(Cn,Ur){var Pn,Wn,Bn=Cn.$__schema,Vn=Object.keys(Bn.paths),gs=Vn.length,hr=Cn._doc;if(!hr)return Ur;for(;gs--;){var kn=(Pn=Vn[gs]).split("."),pn=kn.length,sn=pn-1,Mr=Ur,Pr=void 0;if(hr=Cn._doc,Cn.$__isSelected(Pn))for(var Ar=0;Ar<pn&&(Wn=hr[Pr=kn[Ar]],Mr==null||C(Mr)==="object");++Ar){if(Ar===sn){if(Mr[Pr]=Bn.paths[Pn].applyGetters(Mr[Pr],Cn),Array.isArray(Mr[Pr])&&Bn.paths[Pn].$embeddedSchemaType)for(var Ln=0;Ln<Mr[Pr].length;++Ln)Mr[Pr][Ln]=Bn.paths[Pn].$embeddedSchemaType.applyGetters(Mr[Pr][Ln],Cn)}else{if(Wn==null){Pr in hr&&(Mr[Pr]=Wn);break}Mr=Mr[Pr]||(Mr[Pr]={})}hr=Wn}}})(this,Hr),ce.minimize&&(Hr=me(Hr)||{}));var xi=(Ut=($t=(Yt=ce._calledWithOptions.virtuals)!==null&&Yt!==void 0?Yt:cr.virtuals)!==null&&$t!==void 0?$t:kr?.virtuals)!==null&&Ut!==void 0?Ut:void 0;(xi||Dn&&xi!==!1)&&ln(this,Hr,ce,ce),ce.versionKey===!1&&this.$__schema.options.versionKey&&delete Hr[this.$__schema.options.versionKey];var Us=(Vt=ce._calledWithOptions.transform)===null||Vt===void 0||Vt,Ls=void 0;if(Us===!0?Ls=cr.transform:typeof Us=="function"&&(Ls=Us),Us&&(function(Cn,Ur){var Pn=Cn.$__schema,Wn=Object.keys(Pn.paths||{});if(!Cn._doc)return Ur;for(var Bn=0,Vn=Wn;Bn<Vn.length;Bn++){var gs,hr,kn,pn,sn,Mr=Vn[Bn],Pr=Pn.paths[Mr],Ar=(gs=Pr.options.transform)!==null&&gs!==void 0?gs:(hr=Pr.constructor)===null||hr===void 0||(hr=hr.defaultOptions)===null||hr===void 0?void 0:hr.transform,Ln=(kn=(pn=Pr.$embeddedSchemaType)===null||pn===void 0||(pn=pn.options)===null||pn===void 0?void 0:pn.transform)!==null&&kn!==void 0?kn:(sn=Pr.$embeddedSchemaType)===null||sn===void 0||(sn=sn.constructor)===null||sn===void 0||(sn=sn.defaultOptions)===null||sn===void 0?void 0:sn.transform;if(typeof Ar=="function"){var ys=Cn.$get(Mr);if(ys===void 0)continue;var Ks=Ar.call(Cn,ys);gn(Mr,Ks),$e.setValue(Mr,Ks,Ur)}else if(typeof Ln=="function"){var Gs=Cn.$get(Mr);if(Gs===void 0)continue;for(var zn=[].concat(Gs),Mn=0;Mn<zn.length;++Mn){var si=Ln.call(Cn,zn[Mn]);zn[Mn]=si,gn(Mr,si)}Ur[Mr]=zn}}})(this,Hr),ce.useProjection&&(function(Cn,Ur){var Pn=Cn.$__schema,Wn=Object.keys(Pn.paths||{});if(!Cn._doc)return Ur;var Bn=Cn.$__.selected;if(Bn===void 0&&(Bn={},ve.applyPaths(Bn,Pn)),Bn==null||Object.keys(Bn).length===0)return Ur;for(var Vn=0,gs=Wn;Vn<gs.length;Vn++){var hr=gs[Vn];Bn[hr]==null||Bn[hr]||delete Ur[hr]}})(this,Hr),typeof Ls=="function"){var ds=Ls(this,Hr,ce);ds!==void 0&&(Hr=ds)}return Hr},at.prototype.$__toObjectShallow=function(ce){var Ne={};if(this._doc!=null){var Re,Ve=y(Object.keys(ce?this.$__schema.paths:this._doc));try{for(Ve.s();!(Re=Ve.n()).done;){var ye=Re.value,De=this._doc[ye];De instanceof Date?Ne[ye]=new Date(De):De!==void 0&&(Ne[ye]=De)}}catch(qe){Ve.e(qe)}finally{Ve.f()}}return Ne},at.prototype.toObject=function(ce){return this.$toObject(ce)},at.prototype.toJSON=function(ce){return this.$toObject(ce,!0)},at.prototype.ownerDocument=function(){return this},at.prototype.parent=function(){return this.$isSubdocument||this.$__.wasPopulated?this.$__.parent:this},at.prototype.$parent=at.prototype.parent,at.prototype.inspect=function(ce){var Ne;$e.isPOJO(ce)&&((Ne=ce).minimize=!1);var Re=arguments.length>0?this.toObject(Ne):this.toObject();return Re??"MongooseDocument { "+Re+" }"},_e.custom&&(at.prototype[_e.custom]=at.prototype.inspect),at.prototype.toString=function(){var ce=this.inspect();return typeof ce=="string"?ce:_e(ce)},at.prototype.equals=function(ce){if(!ce)return!1;var Ne=this.$__getValue("_id"),Re=ce.$__!=null?ce.$__getValue("_id"):ce;return Ne||Re?Ne&&Ne.equals?Ne.equals(Re):Ne===Re:Pe(this,ce)},at.prototype.populate=(function(){var ce=m(A().m(function Ne(){var Re,Ve,ye,De,qe,Ze,ht,ct,gt,ut,Ut=arguments;return A().w(function($t){for(;;)switch($t.n){case 0:if(Re={},typeof(Ve=Array.prototype.slice.call(Ut))[Ve.length-1]!="function"){$t.n=1;break}throw new I("Document.prototype.populate() no longer accepts a callback");case 1:if(Ve.length!==0){ye=$e.populate.apply(null,Ve),De=y(ye);try{for(De.s();!(qe=De.n()).done;)Ze=qe.value,Re[Ze.path]=Ze}catch(Yt){De.e(Yt)}finally{De.f()}}return ht=$e.object.vals(Re),ct=this.constructor,this.$__isNested&&(ct=this.$__[Et].constructor,gt=this.$__.nestedPath,ht.forEach(function(Yt){Yt.path=gt+"."+Yt.path})),this.$session()!=null&&(ut=this.$session(),ht.forEach(function(Yt){Yt.options!=null?"session"in Yt.options||(Yt.options.session=ut):Yt.options={session:ut}})),ht.forEach(function(Yt){Yt._localModel=ct}),$t.a(2,ct.populate(this,ht))}},Ne,this)}));return function(){return ce.apply(this,arguments)}})(),at.prototype.$getPopulatedDocs=function(){var ce=[];this.$__.populated!=null&&(ce=ce.concat(Object.keys(this.$__.populated)));var Ne,Re=[],Ve=y(ce);try{for(Ve.s();!(Ne=Ve.n()).done;){var ye=Ne.value,De=this.$get(ye);Array.isArray(De)?Re=Re.concat(De):De instanceof at&&Re.push(De)}}catch(qe){Ve.e(qe)}finally{Ve.f()}return Re},at.prototype.populated=function(ce,Ne,Re){if(Ne==null||Ne===!0){if(!this.$__.populated||typeof ce!="string")return;var Ve=ce.endsWith(".$*")?ce.replace(/\.\$\*$/,""):ce,ye=this.$__.populated[Ve];return ye?Ne===!0?ye:ye.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[ce]={value:Ne,options:Re};for(var De=ce.split("."),qe=0;qe<De.length-1;++qe){var Ze=De.slice(0,qe+1).join("."),ht=this.$get(Ze);if(ht!=null&&ht.$__!=null&&this.$populated(Ze)){var ct=De.slice(qe+1).join(".");ht.$populated(ct,Ne,Re);break}}return Ne},at.prototype.$populated=at.prototype.populated,at.prototype.$assertPopulated=function(ce,Ne){var Re=this;if(Array.isArray(ce))return ce.forEach(function(Ve){return Re.$assertPopulated(Ve,Ne)}),this;if(arguments.length>1&&this.$set(Ne),!this.$populated(ce))throw new I('Expected path "'.concat(ce,'" to be populated'));return this},at.prototype.depopulate=function(ce){var Ne;typeof ce=="string"&&(ce=ce.indexOf(" ")===-1?[ce]:ce.split(" "));var Re=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],Ve=this.$__&&this.$__.populated||{};if(arguments.length===0){var ye,De=y(Re);try{for(De.s();!(ye=De.n()).done;){var qe=ye.value;delete this.$$populatedVirtuals[qe],delete this._doc[qe],delete Ve[qe]}}catch(xn){De.e(xn)}finally{De.f()}for(var Ze=0,ht=Object.keys(Ve);Ze<ht.length;Ze++){var ct=ht[Ze];if(Ne=this.$populated(ct))if(delete Ve[ct],Array.isArray(Ne)){var gt=$e.getValue(ct,this._doc);if(gt.isMongooseArray)for(var ut=gt.__array,Ut=0;Ut<ut.length;++Ut){var $t=ut[Ut];$t!=null&&(ut[Ut]=$t instanceof at?$t._doc._id:$t._id)}else $e.setValue(ct,Ne,this._doc)}else $e.setValue(ct,Ne,this._doc)}return this}var Yt,Vt=y(ce);try{for(Vt.s();!(Yt=Vt.n()).done;){var or=Yt.value;if(Ne=this.$populated(or),delete Ve[or],Re.indexOf(or)!==-1)delete this.$$populatedVirtuals[or],delete this._doc[or];else if(Ne)if(Array.isArray(Ne)){var cr=$e.getValue(or,this._doc);if(cr.isMongooseArray)for(var Fr=cr.__array,yn=0;yn<Fr.length;++yn){var Lr=Fr[yn];Lr!=null&&(Fr[yn]=Lr instanceof at?Lr._doc._id:Lr._id)}else $e.setValue(or,Ne,this._doc)}else $e.setValue(or,Ne,this._doc)}}catch(xn){Vt.e(xn)}finally{Vt.f()}return this},at.prototype.$__fullPath=function(ce){return ce||""},at.prototype.getChanges=function(){var ce=this.$__delta();return ce?ce[1]:{}},at.prototype.$__delta=function(){var ce=this,Ne=this.$__dirty(),Re=this.$__schema.options.optimisticConcurrency;if(Re)if(Array.isArray(Re)){var Ve=new Set(Re);this.modifiedPaths().find(function(or){return Ve.has(or)})&&(this.$__.version=Ne.length?3:1)}else this.$__.version=Ne.length?3:1;if(Ne.length||this.$__.version===3){var ye={},De={},qe=Ne.length,Ze=[],ht=0;for(ye._id=this._doc._id,(ye&&ye._id&&ye._id.$__||null)!=null&&(ye._id=ye._id.toObject({transform:!1,depopulate:!0}));ht<qe;++ht){var ct=Ne[ht],gt=ct.value,ut=Yn(this,ct.path,gt);if(ut)Ze.push(ut);else{if(!this.$populated(ct.path,!0)&&this.$__.selected){var Ut=ct.path.split("."),$t=Ut[0];if(this.$__.selected[$t]&&this.$__.selected[$t].$elemMatch){if(!(Ut.length>1&&Ut[1]==0&&ye[$t]===void 0)){Ze.push(ct.path);continue}ye[$t]=this.$__.selected[$t],Ut[1]="$",ct.path=Ut.join(".")}}if(this.$isDefault(ct.path)&&this.$__.selected&&(ct.path.indexOf(".")===-1&&Fe(this.$__.selected,ct.path)||Le(ct.path).find(function(or){return Fe(ce.$__.isSelected,or)})))continue;if(!Ze.length)if(gt===void 0)Gr(this,0,De,ct,1,"$unset");else if(gt===null)Gr(this,0,De,ct,null);else if($e.isMongooseArray(gt)&&gt.$path()&&gt[He])Sn(this,0,De,ct,gt);else if(gt[k.pathSymbol]&&u.isBuffer(gt))Gr(this,0,De,ct,gt=gt.toObject());else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[ct.path]!=null){var Yt=this.$__.primitiveAtomics[ct.path],Vt=ae(Yt);Gr(this,0,De,ct,Yt[Vt],Vt)}else Gr(this,0,De,ct,gt=M(gt,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}))}}return Ze.length?new S(Ze):(this.$__.version&&this.$__version(ye,De),Object.keys(De).length===0?[ye,null]:[ye,De])}},at.prototype.$clone=function(){var ce=new this.constructor;if(ce.$isNew=this.$isNew,this._doc&&(ce._doc=M(this._doc,{retainDocuments:!0})),this.$__){var Ne,Re=new this.$__.constructor,Ve=y(Object.getOwnPropertyNames(this.$__));try{for(Ve.s();!(Ne=Ve.n()).done;){var ye=Ne.value;ye!=="activePaths"&&(Re[ye]=M(this.$__[ye]))}}catch(De){Ve.e(De)}finally{Ve.f()}Object.assign(Re.activePaths,M(b({},this.$__.activePaths))),ce.$__=Re}return ce},at.prototype.$createModifiedPathsSnapshot=function(){var ce=new WeakMap;if(!this.$isSubdocument){var Ne,Re=y(this.$getAllSubdocs());try{for(Re.s();!(Ne=Re.n()).done;){var Ve=Ne.value;ce.set(Ve,Ve.$__.activePaths.clone())}}catch(ye){Re.e(ye)}finally{Re.f()}}return new Q(ce,this.$__.activePaths.clone(),this.$__.version)},at.prototype.$restoreModifiedPathsSnapshot=function(ce){if(this.$__.activePaths=ce.activePaths.clone(),this.$__.version=ce.version,!this.$isSubdocument){var Ne,Re=y(this.$getAllSubdocs());try{for(Re.s();!(Ne=Re.n()).done;){var Ve=Ne.value;ce.subdocSnapshot.has(Ve)&&(Ve.$__.activePaths=ce.subdocSnapshot.get(Ve))}}catch(ye){Re.e(ye)}finally{Re.f()}}return this},at.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){var ce,Ne=y(this.$getAllSubdocs());try{for(Ne.s();!(ce=Ne.n()).done;)ce.value.$clearModifiedPaths()}catch(Re){Ne.e(Re)}finally{Ne.f()}}return this},at.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every(function(ce){return ce==null||C(ce)!=="object"||$e.isNativeObject(ce)&&!Array.isArray(ce)||te(ce,"ObjectId")||te(ce,"Decimal128")}))},at.VERSION_WHERE=1,at.VERSION_INC=2,at.VERSION_ALL=3,at.ValidationError=q,o.exports=at},2401:o=>{o.exports=Math.floor},2402:(o,c,l)=>{function u(z){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},u(z)}function d(z){return d=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(M){return u(M)}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":u(M)},d(z)}var A,f,p=l(3743).codes,m=p.ERR_AMBIGUOUS_ARGUMENT,g=p.ERR_INVALID_ARG_TYPE,b=p.ERR_INVALID_ARG_VALUE,v=p.ERR_INVALID_RETURN_VALUE,y=p.ERR_MISSING_ARGS,w=l(9068),j=l(7352).inspect,C=l(7352).types,B=C.isPromise,E=C.isRegExp,_=Object.assign?Object.assign:l(6182).assign,S=Object.is?Object.is:l(2064);function N(){var z=l(6193);A=z.isDeepEqual,f=z.isDeepStrictEqual}var O=!1,k=o.exports=$,I={};function R(z){throw z.message instanceof Error?z.message:new w(z)}function Q(z,M,H,Y){if(!H){var ae=!1;if(M===0)ae=!0,Y="No value argument passed to `assert.ok()`";else if(Y instanceof Error)throw Y;var oe=new w({actual:H,expected:!0,message:Y,operator:"==",stackStartFn:z});throw oe.generatedMessage=ae,oe}}function $(){for(var z=arguments.length,M=new Array(z),H=0;H<z;H++)M[H]=arguments[H];Q.apply(void 0,[$,M.length].concat(M))}k.fail=function z(M,H,Y,ae,oe){var be,ge=arguments.length;if(ge===0?be="Failed":ge===1?(Y=M,M=void 0):(O===!1&&(O=!0,({}.emitWarning?{}.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),ge===2&&(ae="!=")),Y instanceof Error)throw Y;var he={actual:M,expected:H,operator:ae===void 0?"fail":ae,stackStartFn:oe||z};Y!==void 0&&(he.message=Y);var ke=new w(he);throw be&&(ke.message=be,ke.generatedMessage=!0),ke},k.AssertionError=w,k.ok=$,k.equal=function z(M,H,Y){if(arguments.length<2)throw new y("actual","expected");M!=H&&R({actual:M,expected:H,message:Y,operator:"==",stackStartFn:z})},k.notEqual=function z(M,H,Y){if(arguments.length<2)throw new y("actual","expected");M==H&&R({actual:M,expected:H,message:Y,operator:"!=",stackStartFn:z})},k.deepEqual=function z(M,H,Y){if(arguments.length<2)throw new y("actual","expected");A===void 0&&N(),A(M,H)||R({actual:M,expected:H,message:Y,operator:"deepEqual",stackStartFn:z})},k.notDeepEqual=function z(M,H,Y){if(arguments.length<2)throw new y("actual","expected");A===void 0&&N(),A(M,H)&&R({actual:M,expected:H,message:Y,operator:"notDeepEqual",stackStartFn:z})},k.deepStrictEqual=function z(M,H,Y){if(arguments.length<2)throw new y("actual","expected");A===void 0&&N(),f(M,H)||R({actual:M,expected:H,message:Y,operator:"deepStrictEqual",stackStartFn:z})},k.notDeepStrictEqual=function z(M,H,Y){if(arguments.length<2)throw new y("actual","expected");A===void 0&&N(),f(M,H)&&R({actual:M,expected:H,message:Y,operator:"notDeepStrictEqual",stackStartFn:z})},k.strictEqual=function z(M,H,Y){if(arguments.length<2)throw new y("actual","expected");S(M,H)||R({actual:M,expected:H,message:Y,operator:"strictEqual",stackStartFn:z})},k.notStrictEqual=function z(M,H,Y){if(arguments.length<2)throw new y("actual","expected");S(M,H)&&R({actual:M,expected:H,message:Y,operator:"notStrictEqual",stackStartFn:z})};var L=function z(M,H,Y){var ae=this;(function(oe,be){if(!(oe instanceof be))throw new TypeError("Cannot call a class as a function")})(this,z),H.forEach(function(oe){oe in M&&(Y!==void 0&&typeof Y[oe]=="string"&&E(M[oe])&&M[oe].test(Y[oe])?ae[oe]=Y[oe]:ae[oe]=M[oe])})};function F(z,M,H,Y){if(typeof M!="function"){if(E(M))return M.test(z);if(arguments.length===2)throw new g("expected",["Function","RegExp"],M);if(d(z)!=="object"||z===null){var ae=new w({actual:z,expected:M,message:H,operator:"deepStrictEqual",stackStartFn:Y});throw ae.operator=Y.name,ae}var oe=Object.keys(M);if(M instanceof Error)oe.push("name","message");else if(oe.length===0)throw new b("error",M,"may not be an empty object");return A===void 0&&N(),oe.forEach(function(be){typeof z[be]=="string"&&E(M[be])&&M[be].test(z[be])||(function(ge,he,ke,Z,te,fe){if(!(ke in ge)||!f(ge[ke],he[ke])){if(!Z){var we=new L(ge,te),Fe=new L(he,te,ge),_e=new w({actual:we,expected:Fe,operator:"deepStrictEqual",stackStartFn:fe});throw _e.actual=ge,_e.expected=he,_e.operator=fe.name,_e}R({actual:ge,expected:he,message:Z,operator:fe.name,stackStartFn:fe})}})(z,M,be,H,oe,Y)}),!0}return M.prototype!==void 0&&z instanceof M||!Error.isPrototypeOf(M)&&M.call({},z)===!0}function G(z){if(typeof z!="function")throw new g("fn","Function",z);try{z()}catch(M){return M}return I}function X(z){return B(z)||z!==null&&d(z)==="object"&&typeof z.then=="function"&&typeof z.catch=="function"}function q(z){return Promise.resolve().then(function(){var M;if(typeof z=="function"){if(!X(M=z()))throw new v("instance of Promise","promiseFn",M)}else{if(!X(z))throw new g("promiseFn",["Function","Promise"],z);M=z}return Promise.resolve().then(function(){return M}).then(function(){return I}).catch(function(H){return H})})}function T(z,M,H,Y){if(typeof H=="string"){if(arguments.length===4)throw new g("error",["Object","Error","Function","RegExp"],H);if(d(M)==="object"&&M!==null){if(M.message===H)throw new m("error/message",'The error message "'.concat(M.message,'" is identical to the message.'))}else if(M===H)throw new m("error/message",'The error "'.concat(M,'" is identical to the message.'));Y=H,H=void 0}else if(H!=null&&d(H)!=="object"&&typeof H!="function")throw new g("error",["Object","Error","Function","RegExp"],H);if(M===I){var ae="";H&&H.name&&(ae+=" (".concat(H.name,")")),ae+=Y?": ".concat(Y):".";var oe=z.name==="rejects"?"rejection":"exception";R({actual:void 0,expected:H,operator:z.name,message:"Missing expected ".concat(oe).concat(ae),stackStartFn:z})}if(H&&!F(M,H,Y,z))throw M}function U(z,M,H,Y){if(M!==I){if(typeof H=="string"&&(Y=H,H=void 0),!H||F(M,H)){var ae=Y?": ".concat(Y):".",oe=z.name==="doesNotReject"?"rejection":"exception";R({actual:M,expected:H,operator:z.name,message:"Got unwanted ".concat(oe).concat(ae,`
`)+'Actual message: "'.concat(M&&M.message,'"'),stackStartFn:z})}throw M}}function K(){for(var z=arguments.length,M=new Array(z),H=0;H<z;H++)M[H]=arguments[H];Q.apply(void 0,[K,M.length].concat(M))}k.throws=function z(M){for(var H=arguments.length,Y=new Array(H>1?H-1:0),ae=1;ae<H;ae++)Y[ae-1]=arguments[ae];T.apply(void 0,[z,G(M)].concat(Y))},k.rejects=function z(M){for(var H=arguments.length,Y=new Array(H>1?H-1:0),ae=1;ae<H;ae++)Y[ae-1]=arguments[ae];return q(M).then(function(oe){return T.apply(void 0,[z,oe].concat(Y))})},k.doesNotThrow=function z(M){for(var H=arguments.length,Y=new Array(H>1?H-1:0),ae=1;ae<H;ae++)Y[ae-1]=arguments[ae];U.apply(void 0,[z,G(M)].concat(Y))},k.doesNotReject=function z(M){for(var H=arguments.length,Y=new Array(H>1?H-1:0),ae=1;ae<H;ae++)Y[ae-1]=arguments[ae];return q(M).then(function(oe){return U.apply(void 0,[z,oe].concat(Y))})},k.ifError=function z(M){if(M!=null){var H="ifError got unwanted exception: ";d(M)==="object"&&typeof M.message=="string"?M.message.length===0&&M.constructor?H+=M.constructor.name:H+=M.message:H+=j(M);var Y=new w({actual:M,expected:null,operator:"ifError",message:H,stackStartFn:z}),ae=M.stack;if(typeof ae=="string"){var oe=ae.split(`
`);oe.shift();for(var be=Y.stack.split(`
`),ge=0;ge<oe.length;ge++){var he=be.indexOf(oe[ge]);if(he!==-1){be=be.slice(0,he);break}}Y.stack="".concat(be.join(`
`),`
`).concat(oe.join(`
`))}throw Y}},k.strict=_(K,k,{equal:k.strictEqual,deepEqual:k.deepStrictEqual,notEqual:k.notStrictEqual,notDeepEqual:k.notDeepStrictEqual}),k.strict.strict=k.strict},2403:o=>{o.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null},2423:o=>{o.exports=function(c,l){var u=c.discriminatorMapping&&c.discriminatorMapping.value;if(u&&!("sparse"in l)){var d=c.options.discriminatorKey;l.partialFilterExpression=l.partialFilterExpression||{},l.partialFilterExpression[d]=u}return l}},2477:(o,c,l)=>{var u=l(2402);o.exports=function(d){return d==null||d===""?null:d instanceof Date?(u.ok(!isNaN(d.valueOf())),d):(u.ok(typeof d!="boolean"),A=d instanceof Number||typeof d=="number"?new Date(d):typeof d=="string"&&!isNaN(Number(d))&&(Number(d)>=275761||Number(d)<-271820)?new Date(Number(d)):typeof d.valueOf=="function"?new Date(d.valueOf()):new Date(d),isNaN(A.valueOf())?void u.ok(!1):A);var A}},2481:(o,c,l)=>{var u=l(4756);o.exports=function(){return typeof Object.is=="function"?Object.is:u}},2486:(o,c)=>{c.read=function(l,u,d,A,f){var p,m,g=8*f-A-1,b=(1<<g)-1,v=b>>1,y=-7,w=d?f-1:0,j=d?-1:1,C=l[u+w];for(w+=j,p=C&(1<<-y)-1,C>>=-y,y+=g;y>0;p=256*p+l[u+w],w+=j,y-=8);for(m=p&(1<<-y)-1,p>>=-y,y+=A;y>0;m=256*m+l[u+w],w+=j,y-=8);if(p===0)p=1-v;else{if(p===b)return m?NaN:1/0*(C?-1:1);m+=Math.pow(2,A),p-=v}return(C?-1:1)*m*Math.pow(2,p-A)},c.write=function(l,u,d,A,f,p){var m,g,b,v=8*p-f-1,y=(1<<v)-1,w=y>>1,j=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=A?0:p-1,B=A?1:-1,E=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(g=isNaN(u)?1:0,m=y):(m=Math.floor(Math.log(u)/Math.LN2),u*(b=Math.pow(2,-m))<1&&(m--,b*=2),(u+=m+w>=1?j/b:j*Math.pow(2,1-w))*b>=2&&(m++,b/=2),m+w>=y?(g=0,m=y):m+w>=1?(g=(u*b-1)*Math.pow(2,f),m+=w):(g=u*Math.pow(2,w-1)*Math.pow(2,f),m=0));f>=8;l[d+C]=255&g,C+=B,g/=256,f-=8);for(m=m<<f|g,v+=f;v>0;l[d+C]=255&m,C+=B,m/=256,v-=8);l[d+C-B]|=128*E}},2497:(o,c,l)=>{var u=l(1243).isMongooseArray;o.exports=function(d){return d!=null&&(u(d)||d.$__!=null||d.isMongooseBuffer||d.$isMongooseMap)}},2555:o=>{o.exports=function(c){if(Array.isArray(c)){if(!c.every(function(l){return typeof l=="number"||typeof l=="string"}))throw new Error("$type array values must be strings or numbers");return c}if(typeof c!="number"&&typeof c!="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return c}},2580:(o,c,l)=>{var u=l(2400),d=l(3550).EventEmitter,A=l(3672),f=l(7058),p=l(5549),m=A.ValidationError,g=l(4957),b=l(608);function v(y,w,j,C,B){if(!(this instanceof v))return new v(y,w,j,C,B);if(b(w)&&!w.instanceOfSchema&&(w=new f(w)),w=this.schema||w,!this.schema&&w.options._id&&(y=y||{})._id===void 0&&(y._id=new p),!w)throw new A.MissingSchemaError;for(var E in this.$__setSchema(w),u.call(this,y,j,C,B),g(this,w,{decorateDoc:!0}),w.methods)this[E]=w.methods[E];for(var _ in w.statics)this[_]=w.statics[_]}v.prototype=Object.create(u.prototype),v.prototype.constructor=v,v.events=new d,v.$emitter=new d,["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(y){v[y]=function(){return v.$emitter[y].apply(v.$emitter,arguments)}}),v.ValidationError=m,o.exports=v},2653:o=>{o.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},2692:o=>{o.exports=function(c,l){if(l.length!==1){for(var u=l[0],d=void 0,A=0;A<l.length-1;++A){var f=c.path(u);f&&f.schema?(d=f.schema.options.strict,c=f.schema,u=f.$isMongooseDocumentArray&&!isNaN(l[A+1])?"":l[A+1]):u+=u.length?"."+l[A+1]:l[A+1]}return d}}},2696:(o,c,l)=>{var u=l(3305);o.exports=function(d,A){return typeof d=="string"&&typeof A=="string"||typeof d=="number"&&typeof A=="number"?d===A:!(!u(d,"ObjectId")||!u(A,"ObjectId"))&&d.toString()===A.toString()}},2724:(o,c,l)=>{var u=l(3071),d=l(9344),A=u("RegExp.prototype.exec"),f=l(2268);o.exports=function(p){if(!d(p))throw new f("`regex` must be a RegExp");return function(m){return A(p,m)!==null}}},2746:o=>{var c=typeof{}.nextTick=="function"?{}.nextTick.bind({env:{}}):function(l){return setTimeout(l,0)};o.exports=function(l){return c(l)}},2789:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(l){if(l==null||c(l)!=="object")return!1;var u=Object.getPrototypeOf(l);return!u||u.constructor.name==="Object"}},2793:o=>{o.exports=new Set(["__proto__","constructor","prototype"])},2822:(o,c,l)=>{o.exports=l(6353).Double},2824:(o,c,l)=>{var u=l(7930).objectIdSymbol,d=l(8768);function A(){var p,m;if(this.$__.shardval){m=(p=Object.keys(this.$__.shardval)).length,this.$where=this.$where||{};for(var g=0;g<m;++g)this.$where[p[g]]=this.$__.shardval[p[g]]}}function f(){var p=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(d.isPOJO(p))for(var m,g=this.$__.shardval={},b=Object.keys(p),v=b.length,y=0;y<v;++y)(m=this.$__getValue(b[y]))==null?g[b[y]]=m:d.isMongooseObject(m)?g[b[y]]=m.toObject({depopulate:!0,_isNested:!0}):m instanceof Date||m[u]?g[b[y]]=m:typeof m.valueOf=="function"?g[b[y]]=m.valueOf():g[b[y]]=m}o.exports=function(p){p.post("init",function(){return f.call(this),this}),p.pre("save",function(m){A.call(this),m()}),p.pre("remove",function(m){A.call(this),m()}),p.post("save",function(){f.call(this)})},o.exports.storeShard=f},2900:(o,c,l)=>{var u=l(8260);o.exports=function(d){if(u(d)!=="TopologyDescription")return!1;var A=Array.from(d.servers.values());return A.length>0&&A.every(function(f){return f.type==="Unknown"})}},2914:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}var d=l(7860),A=["__proto__","constructor","prototype"];function f(m,g,b,v,y,w){for(var j,C=0;C<m.length&&C<g.length;++C)j=m[C],Array.isArray(j)&&Array.isArray(g[C])?f(j,g[C],b,v,y,w):j&&(v?v(j,b,w(g[C])):(j[y]&&(j=j[y]),j[b]=w(g[C])))}function p(m){return m}c.get=function(m,g,b,v){var y;typeof b=="function"&&(b.length<2?(v=b,b=void 0):(y=b,b=void 0)),v||(v=p);var w=typeof m=="string"?d(m):m;if(!Array.isArray(w))throw new TypeError("Invalid `path`. Must be either string or array");for(var j,C=g,B=0;B<w.length;++B){if(j=w[B],typeof w[B]!="string"&&typeof w[B]!="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+u(w[B]));if(Array.isArray(C)&&!/^\d+$/.test(j)){var E=w.slice(B);return[].concat(C).map(function(S){return S?c.get(E,S,b||y,v):v(void 0)})}if(y)C=y(C,j);else{var _=b&&C[b]?C[b]:C;C=_ instanceof Map?_.get(j):_[j]}if(!C)return v(C)}return v(C)},c.has=function(m,g){var b=typeof m=="string"?d(m):m;if(!Array.isArray(b))throw new TypeError("Invalid `path`. Must be either string or array");for(var v=b.length,y=g,w=0;w<v;++w){if(typeof b[w]!="string"&&typeof b[w]!="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+u(b[w]));if(y==null||u(y)!=="object"||!(b[w]in y))return!1;y=y[b[w]]}return!0},c.unset=function(m,g){var b=typeof m=="string"?d(m):m;if(!Array.isArray(b))throw new TypeError("Invalid `path`. Must be either string or array");for(var v=b.length,y=g,w=0;w<v;++w){if(y==null||u(y)!=="object"||!(b[w]in y))return!1;if(typeof b[w]!="string"&&typeof b[w]!="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+u(b[w]));if(A.indexOf(b[w])!==-1)return!1;if(w===v-1)return delete y[b[w]],!0;y=y instanceof Map?y.get(b[w]):y[b[w]]}return!0},c.set=function(m,g,b,v,y,w){var j;typeof v=="function"&&(v.length<2?(y=v,v=void 0):(j=v,v=void 0)),y||(y=p);var C=typeof m=="string"?d(m):m;if(!Array.isArray(C))throw new TypeError("Invalid `path`. Must be either string or array");if(b!=null){for(var B=0;B<C.length;++B){if(typeof C[B]!="string"&&typeof C[B]!="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+u(C[B]));if(A.indexOf(C[B])!==-1)return}for(var E,_=w||/\$/.test(m)&&w!==!1,S=b,N=(B=0,C.length-1);B<N;++B)if((E=C[B])!="$"){if(Array.isArray(S)&&!/^\d+$/.test(E)){var O=C.slice(B);if(!_&&Array.isArray(g))for(var k=0;k<S.length&&k<g.length;++k)c.set(O,g[k],S[k],v||j,y,_);else for(k=0;k<S.length;++k)c.set(O,g,S[k],v||j,y,_);return}if(j)S=j(S,E);else{var I=v&&S[v]?S[v]:S;S=I instanceof Map?I.get(E):I[E]}if(!S)return}else if(B==N-1)break;if(E=C[N],v&&S[v]&&(S=S[v]),Array.isArray(S)&&!/^\d+$/.test(E))if(!_&&Array.isArray(g))f(S,g,E,j,v,y);else for(k=0;k<S.length;++k){var R=S[k];R&&(j?j(R,E,y(g)):(R[v]&&(R=R[v]),R[E]=y(g)))}else j?j(S,E,y(g)):S instanceof Map?S.set(E,y(g)):S[E]=y(g)}},c.stringToParts=d},2945:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}function d(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!g})()}function A(g){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},A(g)}function f(g,b){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,y){return v.__proto__=y,v},f(g,b)}var p=(function(g){function b(){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,b,arguments)}return(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),w&&f(y,w)})(b,g),v=b,Object.defineProperty(v,"prototype",{writable:!1}),v;var v})(l(8879)),m=l(5761);Object.defineProperty(p.prototype,"subtype",m),o.exports=p},3071:(o,c,l)=>{var u=l(6400),d=l(8863),A=d([u("%String.prototype.indexOf%")]);o.exports=function(f,p){var m=u(f,!!p);return typeof m=="function"&&A(f,".prototype.")>-1?d([m]):m}},3091:(o,c,l)=>{function u(k){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},u(k)}function d(k,I){var R=Object.keys(k);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(k);I&&(Q=Q.filter(function($){return Object.getOwnPropertyDescriptor(k,$).enumerable})),R.push.apply(R,Q)}return R}function A(k){for(var I=1;I<arguments.length;I++){var R=arguments[I]!=null?arguments[I]:{};I%2?d(Object(R),!0).forEach(function(Q){f(k,Q,R[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(R)):d(Object(R)).forEach(function(Q){Object.defineProperty(k,Q,Object.getOwnPropertyDescriptor(R,Q))})}return k}function f(k,I,R){return(I=(function(Q){var $=(function(L){if(u(L)!="object"||!L)return L;var F=L[Symbol.toPrimitive];if(F!==void 0){var G=F.call(L,"string");if(u(G)!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(L)})(Q);return u($)=="symbol"?$:$+""})(I))in k?Object.defineProperty(k,I,{value:R,enumerable:!0,configurable:!0,writable:!0}):k[I]=R,k}var p,m=l(4625),g=l(6426),b=l(863),v=l(4327),y=l(8260),w=l(5549),j=l(3305),C=l(8768),B=g.CastError;function E(k,I){var R=typeof k=="string"&&k.length===24&&/^[a-f0-9]+$/i.test(k),Q=I&&I.suppressWarning;!R&&k!==void 0||Q||C.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema."),g.call(this,k,I,"ObjectId")}function _(k){return this.cast(k)}E.schemaName="ObjectId",E.defaultOptions={},E.prototype=Object.create(g.prototype),E.prototype.constructor=E,E.prototype.OptionsConstructor=m,E.get=g.get,E.set=g.set,E.setters=[],E.prototype.auto=function(k){return k&&(this.default(N),this.set(O)),this},E._checkRequired=function(k){return j(k,"ObjectId")},E._cast=b,E.cast=function(k){return arguments.length===0||(k===!1&&(k=this._defaultCaster),this._cast=k),this._cast},E._defaultCaster=function(k){if(!j(k,"ObjectId"))throw new Error(k+" is not an instance of ObjectId");return k},E.checkRequired=g.checkRequired,E.prototype.checkRequired=function(k,I){return g._isRef(this,k,I,!0)?!!k:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():E.checkRequired())(k)},E.prototype.cast=function(k,I,R,Q,$){if(!j(k,"ObjectId")&&g._isRef(this,k,I,R)){if((y(k)||"").toLowerCase()==="objectid")return new w(k.toHexString());if(k==null||C.isNonBuiltinObject(k))return this._castRef(k,I,R,$)}var L;L=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():E.cast();try{return L(k)}catch(F){throw new B("ObjectId",k,this.path,F,this)}};var S=A(A({},g.prototype.$conditionalHandlers),{},{$gt:_,$gte:_,$lt:_,$lte:_});function N(){return new w}function O(k){return p||(p=l(2400)),this instanceof p&&k===void 0?new w:k}Object.defineProperty(E.prototype,"$conditionalHandlers",{enumerable:!1,value:S}),N.$runBeforeSetters=!0,E.prototype.toJSONSchema=function(k){var I=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return v("string","objectId",k?.useBsonType,I)},E.prototype.autoEncryptionType=function(){return"objectId"},o.exports=E},3123:o=>{o.exports=Function.prototype.call},3191:(o,c,l)=>{var u=l(988),d=function(){return!!u};d.hasArrayLengthDefineBug=function(){if(!u)return null;try{return u([],"length",{value:1}).length!==1}catch{return!0}},o.exports=d},3216:(o,c,l)=>{function u(g,b){var v=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);b&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(g,w).enumerable})),v.push.apply(v,y)}return v}function d(g){for(var b=1;b<arguments.length;b++){var v=arguments[b]!=null?arguments[b]:{};b%2?u(Object(v),!0).forEach(function(y){A(g,y,v[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(v)):u(Object(v)).forEach(function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(v,y))})}return g}function A(g,b,v){return(b=(function(y){var w=(function(j){if(f(j)!="object"||!j)return j;var C=j[Symbol.toPrimitive];if(C!==void 0){var B=C.call(j,"string");if(f(B)!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(j)})(y);return f(w)=="symbol"?w:w+""})(b))in g?Object.defineProperty(g,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[b]=v,g}function f(g){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f(g)}var p=l(8768),m=new Set(["__index","__parentArray","_doc"]);o.exports=function(g,b){if(p.isPOJO(g)&&g.$__!=null&&g._doc!=null){if(b){for(var v={},y=0,w=Object.keys(g);y<w.length;y++){var j=w[y];f(j)!=="symbol"&&j[0]!=="$"&&(m.has(j)||(v[j]=g[j]))}return d(d({},g._doc),v)}return g._doc}return g}},3279:o=>{o.exports=Function.prototype.apply},3303:(o,c)=>{c._={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}},3305:o=>{o.exports=function(c,l){return c!=null&&c._bsontype===l}},3318:(o,c,l)=>{function u(j){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},u(j)}function d(j,C){var B=Object.keys(j);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(j);C&&(E=E.filter(function(_){return Object.getOwnPropertyDescriptor(j,_).enumerable})),B.push.apply(B,E)}return B}function A(j){for(var C=1;C<arguments.length;C++){var B=arguments[C]!=null?arguments[C]:{};C%2?d(Object(B),!0).forEach(function(E){f(j,E,B[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(B)):d(Object(B)).forEach(function(E){Object.defineProperty(j,E,Object.getOwnPropertyDescriptor(B,E))})}return j}function f(j,C,B){return(C=(function(E){var _=(function(S){if(u(S)!="object"||!S)return S;var N=S[Symbol.toPrimitive];if(N!==void 0){var O=N.call(S,"string");if(u(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(S)})(E);return u(_)=="symbol"?_:_+""})(C))in j?Object.defineProperty(j,C,{value:B,enumerable:!0,configurable:!0,writable:!0}):j[C]=B,j}var p=l(3609),m=l(6426),g=l(4058),b=l(4327);function v(j,C){m.call(this,j,C,"BigInt")}v.schemaName="BigInt",v.defaultOptions={},v.prototype=Object.create(m.prototype),v.prototype.constructor=v,v._cast=g,v.set=m.set,v.setters=[],v.get=m.get,v.cast=function(j){return arguments.length===0||(j===!1&&(j=this._defaultCaster),this._cast=j),this._cast},v._checkRequired=function(j){return j!=null},v.checkRequired=m.checkRequired,v.prototype.checkRequired=function(j){return this.constructor._checkRequired(j)},v.prototype.cast=function(j){var C;C=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():v.cast();try{return C(j)}catch(B){throw new p("BigInt",j,this.path,B,this)}};var y=A(A({},m.prototype.$conditionalHandlers),{},{$gt:w,$gte:w,$lt:w,$lte:w});function w(j,C){return this.castForQuery(null,j,C)}Object.defineProperty(v.prototype,"$conditionalHandlers",{enumerable:!1,value:y}),v.prototype.castForQuery=function(j,C,B){var E;if(j!=null)return(E=this.$conditionalHandlers[j])?E.call(this,C):this.applySetters(C,B);try{return this.applySetters(C,B)}catch(_){throw _ instanceof p&&_.path===this.path&&this.$fullPath!=null&&(_.path=this.$fullPath),_}},v.prototype._castNullish=function(j){return j===void 0||(typeof this.constructor.cast=="function"?this.constructor.cast():v.cast()),j},v.prototype.toJSONSchema=function(j){var C=this.options.required&&typeof this.options.required!="function";return b("string","long",j?.useBsonType,C)},v.prototype.autoEncryptionType=function(){return"long"},o.exports=v},3381:o=>{function c(){return this._id!=null?this._id.toString():null}o.exports=function(l){return!l.paths.id&&l.paths._id&&l.options.id&&(l.aliases&&l.aliases.id||l.virtual("id").get(c)),l}},3388:o=>{o.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply},3414:o=>{o.exports=Number.isNaN||function(c){return c!=c}},3426:(o,c,l)=>{var u=l(2653),d=typeof globalThis>"u"?l.g:globalThis;o.exports=function(){for(var A=[],f=0;f<u.length;f++)typeof d[u[f]]=="function"&&(A[A.length]=u[f]);return A}},3441:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v,y){var w;(function(C,B){if(!(C instanceof B))throw new TypeError("Cannot call a class as a function")})(this,g);var j=Array.isArray(y)?"array":"primitive value";return(w=(function(C,B,E){return B=A(B),(function(_,S){if(S&&(u(S)=="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N})(_)})(C,d()?Reflect.construct(B,E||[],A(C).constructor):B.apply(C,E))})(this,g,["Tried to set nested object field `"+v+"` to ".concat(j," `")+y+"`"])).path=v,w}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"ObjectExpectedError"}),o.exports=p},3550:o=>{function c(E){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},c(E)}var l,u=(typeof Reflect>"u"?"undefined":c(Reflect))==="object"?Reflect:null,d=u&&typeof u.apply=="function"?u.apply:function(E,_,S){return Function.prototype.apply.call(E,_,S)};l=u&&typeof u.ownKeys=="function"?u.ownKeys:Object.getOwnPropertySymbols?function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:function(E){return Object.getOwnPropertyNames(E)};var A=Number.isNaN||function(E){return E!=E};function f(){f.init.call(this)}o.exports=f,o.exports.once=function(E,_){return new Promise(function(S,N){function O(I){E.removeListener(_,k),N(I)}function k(){typeof E.removeListener=="function"&&E.removeListener("error",O),S([].slice.call(arguments))}B(E,_,k,{once:!0}),_!=="error"&&(function(I,R){typeof I.on=="function"&&B(I,"error",R,{once:!0})})(E,O)})},f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var p=10;function m(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+c(E))}function g(E){return E._maxListeners===void 0?f.defaultMaxListeners:E._maxListeners}function b(E,_,S,N){var O,k,I,R;if(m(S),(k=E._events)===void 0?(k=E._events=Object.create(null),E._eventsCount=0):(k.newListener!==void 0&&(E.emit("newListener",_,S.listener?S.listener:S),k=E._events),I=k[_]),I===void 0)I=k[_]=S,++E._eventsCount;else if(typeof I=="function"?I=k[_]=N?[S,I]:[I,S]:N?I.unshift(S):I.push(S),(O=g(E))>0&&I.length>O&&!I.warned){I.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=E,Q.type=_,Q.count=I.length,R=Q,console&&console.warn&&console.warn(R)}return E}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(E,_,S){var N={fired:!1,wrapFn:void 0,target:E,type:_,listener:S},O=v.bind(N);return O.listener=S,N.wrapFn=O,O}function w(E,_,S){var N=E._events;if(N===void 0)return[];var O=N[_];return O===void 0?[]:typeof O=="function"?S?[O.listener||O]:[O]:S?(function(k){for(var I=new Array(k.length),R=0;R<I.length;++R)I[R]=k[R].listener||k[R];return I})(O):C(O,O.length)}function j(E){var _=this._events;if(_!==void 0){var S=_[E];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}function C(E,_){for(var S=new Array(_),N=0;N<_;++N)S[N]=E[N];return S}function B(E,_,S,N){if(typeof E.on=="function")N.once?E.once(_,S):E.on(_,S);else{if(typeof E.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+c(E));E.addEventListener(_,function O(k){N.once&&E.removeEventListener(_,O),S(k)})}}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(E){if(typeof E!="number"||E<0||A(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");p=E}}),f.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||A(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this},f.prototype.getMaxListeners=function(){return g(this)},f.prototype.emit=function(E){for(var _=[],S=1;S<arguments.length;S++)_.push(arguments[S]);var N=E==="error",O=this._events;if(O!==void 0)N=N&&O.error===void 0;else if(!N)return!1;if(N){var k;if(_.length>0&&(k=_[0]),k instanceof Error)throw k;var I=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw I.context=k,I}var R=O[E];if(R===void 0)return!1;if(typeof R=="function")d(R,this,_);else{var Q=R.length,$=C(R,Q);for(S=0;S<Q;++S)d($[S],this,_)}return!0},f.prototype.addListener=function(E,_){return b(this,E,_,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(E,_){return b(this,E,_,!0)},f.prototype.once=function(E,_){return m(_),this.on(E,y(this,E,_)),this},f.prototype.prependOnceListener=function(E,_){return m(_),this.prependListener(E,y(this,E,_)),this},f.prototype.removeListener=function(E,_){var S,N,O,k,I;if(m(_),(N=this._events)===void 0)return this;if((S=N[E])===void 0)return this;if(S===_||S.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete N[E],N.removeListener&&this.emit("removeListener",E,S.listener||_));else if(typeof S!="function"){for(O=-1,k=S.length-1;k>=0;k--)if(S[k]===_||S[k].listener===_){I=S[k].listener,O=k;break}if(O<0)return this;O===0?S.shift():(function(R,Q){for(;Q+1<R.length;Q++)R[Q]=R[Q+1];R.pop()})(S,O),S.length===1&&(N[E]=S[0]),N.removeListener!==void 0&&this.emit("removeListener",E,I||_)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(E){var _,S,N;if((S=this._events)===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[E]),this;if(arguments.length===0){var O,k=Object.keys(S);for(N=0;N<k.length;++N)(O=k[N])!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(_=S[E])=="function")this.removeListener(E,_);else if(_!==void 0)for(N=_.length-1;N>=0;N--)this.removeListener(E,_[N]);return this},f.prototype.listeners=function(E){return w(this,E,!0)},f.prototype.rawListeners=function(E){return w(this,E,!1)},f.listenerCount=function(E,_){return typeof E.listenerCount=="function"?E.listenerCount(_):j.call(E,_)},f.prototype.listenerCount=j,f.prototype.eventNames=function(){return this._eventsCount>0?l(this._events):[]}},3609:(o,c,l)=>{function u(_){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},u(_)}function d(_,S){for(var N=0;N<S.length;N++){var O=S[N];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,A(O.key),O)}}function A(_){var S=(function(N){if(u(N)!="object"||!N)return N;var O=N[Symbol.toPrimitive];if(O!==void 0){var k=O.call(N,"string");if(u(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(N)})(_);return u(S)=="symbol"?S:S+""}function f(_,S,N){return S=g(S),(function(O,k){if(k&&(u(k)=="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(O)})(_,m()?Reflect.construct(S,N||[],g(_).constructor):S.apply(_,N))}function p(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function m(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m=function(){return!!_})()}function g(_){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},g(_)}function b(_,S){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(N,O){return N.__proto__=O,N},b(_,S)}var v=l(8213),y=l(7352),w=(function(_){function S(k,I,R,Q,$){var L;if((function(G,X){if(!(G instanceof X))throw new TypeError("Cannot call a class as a function")})(this,S),arguments.length>0){var F=C(I);(L=f(this,S,[E(null,k,I,R,B($),F,Q)])).init(k,I,R,Q,$)}else L=f(this,S,[E()]);return p(L)}return(function(k,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(I&&I.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),I&&b(k,I)})(S,_),N=S,(O=[{key:"toJSON",value:function(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}},{key:"init",value:function(k,I,R,Q,$){this.stringValue=j(I),this.messageFormat=B($),this.kind=k,this.value=I,this.path=R,this.reason=Q,this.valueType=C(I)}},{key:"copy",value:function(k){this.messageFormat=k.messageFormat,this.stringValue=k.stringValue,this.kind=k.kind,this.value=k.value,this.path=k.path,this.reason=k.reason,this.message=k.message,this.valueType=k.valueType}},{key:"setModel",value:function(k){this.message=E(k,this.kind,this.value,this.path,this.messageFormat,this.valueType)}}])&&d(N.prototype,O),Object.defineProperty(N,"prototype",{writable:!1}),N;var N,O})(v);function j(_){var S=y.inspect(_);return(S=S.replace(/^'|'$/g,'"')).startsWith('"')||(S='"'+S+'"'),S}function C(_){if(_==null)return""+_;var S=u(_);return S!=="object"||typeof _.constructor!="function"?S:_.constructor.name}function B(_){var S=_&&_._castErrorMessage||null;if(typeof S=="string"||typeof S=="function")return S}function E(_,S,N,O,k,I,R){if(typeof k=="string"){var Q=j(N),$=k.replace("{KIND}",S).replace("{VALUE}",Q).replace("{PATH}",O);return _!=null&&($=$.replace("{MODEL}",_.modelName)),$}if(typeof k=="function")return k(N,O,_,S);var L="Cast to "+S+" failed for value "+j(N)+(I?" (type "+I+")":"")+' at path "'+O+'"';return _!=null&&(L+=' for model "'+_.modelName+'"'),R!=null&&typeof R.constructor=="function"&&R.constructor.name!=="AssertionError"&&R.constructor.name!=="Error"&&(L+=' because of "'+R.constructor.name+'"'),L}Object.defineProperty(w.prototype,"name",{value:"CastError"}),o.exports=w},3622:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(l,u,d){return l==null?l:(l._doc!=null&&(l=l._doc),arguments.length>=3?c(l)!=="object"||d===void 0?void 0:(l instanceof Map?l.set(u,d):l[u]=d,d):u==="$*"?l instanceof Map?Array.from(l.values()):Object.keys(l).map(function(A){return l[A]}):l instanceof Map?l.get(u):l[u])}},3644:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,g),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,g,["Cannot overwrite `"+v+"` model once compiled."])}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"OverwriteModelError"}),o.exports=p},3660:(o,c,l)=>{function u(_,S){var N=Object.keys(_);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(_);S&&(O=O.filter(function(k){return Object.getOwnPropertyDescriptor(_,k).enumerable})),N.push.apply(N,O)}return N}function d(_){for(var S=1;S<arguments.length;S++){var N=arguments[S]!=null?arguments[S]:{};S%2?u(Object(N),!0).forEach(function(O){A(_,O,N[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(N)):u(Object(N)).forEach(function(O){Object.defineProperty(_,O,Object.getOwnPropertyDescriptor(N,O))})}return _}function A(_,S,N){return(S=(function(O){var k=(function(I){if(f(I)!="object"||!I)return I;var R=I[Symbol.toPrimitive];if(R!==void 0){var Q=R.call(I,"string");if(f(Q)!="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(I)})(O);return f(k)=="symbol"?k:k+""})(S))in _?Object.defineProperty(_,S,{value:N,enumerable:!0,configurable:!0,writable:!0}):_[S]=N,_}function f(_){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},f(_)}var p=l(3672),m=l(1007),g=l(6426),b=l(7768),v=l(4327),y=l(9460),w=l(8768),j=g.CastError;function C(_,S){g.call(this,_,S,"Number")}function B(_){return this.cast(_)}C.get=g.get,C.set=g.set,C.setters=[],C._cast=b,C.cast=function(_){return arguments.length===0||(_===!1&&(_=this._defaultCaster),this._cast=_),this._cast},C._defaultCaster=function(_){if(typeof _!="number")throw new Error;return _},C.schemaName="Number",C.defaultOptions={},C.prototype=Object.create(g.prototype),C.prototype.constructor=C,C.prototype.OptionsConstructor=m,C._checkRequired=function(_){return typeof _=="number"||_ instanceof Number},C.checkRequired=g.checkRequired,C.prototype.checkRequired=function(_,S){return f(_)==="object"&&g._isRef(this,_,S,!0)?_!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():C.checkRequired())(_)},C.prototype.min=function(_,S){if(this.minValidator&&(this.validators=this.validators.filter(function(O){return O.validator!==this.minValidator},this)),_!=null){var N=S||p.messages.Number.min;N=N.replace(/{MIN}/,_),this.validators.push({validator:this.minValidator=function(O){return O==null||O>=_},message:N,type:"min",min:_})}return this},C.prototype.max=function(_,S){if(this.maxValidator&&(this.validators=this.validators.filter(function(O){return O.validator!==this.maxValidator},this)),_!=null){var N=S||p.messages.Number.max;N=N.replace(/{MAX}/,_),this.validators.push({validator:this.maxValidator=function(O){return O==null||O<=_},message:N,type:"max",max:_})}return this},C.prototype.enum=function(_,S){return this.enumValidator&&(this.validators=this.validators.filter(function(N){return N.validator!==this.enumValidator},this)),Array.isArray(_)||(w.isPOJO(_)&&_.values!=null?(S=_.message,_=_.values):typeof _=="number"&&(_=Array.prototype.slice.call(arguments),S=null),w.isPOJO(_)&&(_=Object.values(_)),S=S||p.messages.Number.enum),S=S??p.messages.Number.enum,this.enumValidator=function(N){return N==null||_.indexOf(N)!==-1},this.validators.push({validator:this.enumValidator,message:S,type:"enum",enumValues:_}),this},C.prototype.cast=function(_,S,N,O,k){if(typeof _!="number"&&g._isRef(this,_,S,N)&&(_==null||w.isNonBuiltinObject(_)))return this._castRef(_,S,N,k);var I,R=_&&_._id!==void 0?_._id:_;I=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():C.cast();try{return I(R)}catch(Q){throw new j("Number",R,this.path,Q,this)}};var E=d(d({},g.prototype.$conditionalHandlers),{},{$bitsAllClear:y,$bitsAnyClear:y,$bitsAllSet:y,$bitsAnySet:y,$gt:B,$gte:B,$lt:B,$lte:B,$mod:function(_){var S=this;return Array.isArray(_)?_.map(function(N){return S.cast(N)}):[this.cast(_)]}});Object.defineProperty(C.prototype,"$conditionalHandlers",{enumerable:!1,value:E}),C.prototype.castForQuery=function(_,S,N){var O;if(_!=null){if(!(O=this.$conditionalHandlers[_]))throw new j("number",S,this.path,null,this);return O.call(this,S,N)}try{S=this.applySetters(S,N)}catch(k){throw k instanceof j&&k.path===this.path&&this.$fullPath!=null&&(k.path=this.$fullPath),k}return S},C.prototype.toJSONSchema=function(_){var S=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return v("number","number",_?.useBsonType,S)},o.exports=C},3672:(o,c,l)=>{var u=l(8213);o.exports=u,u.messages=l(766),u.Messages=u.messages,u.CastError=l(3609),u.DocumentNotFoundError=l(1129),u.ValidationError=l(6949),u.ValidatorError=l(9538),u.VersionError=l(6996),u.ParallelSaveError=l(3940),u.OverwriteModelError=l(3644),u.MissingSchemaError=l(8063),u.MongooseBulkSaveIncompleteError=l(8517),u.MongooseServerSelectionError=l(7219),u.DivergentArrayError=l(1417),u.StrictModeError=l(8995),u.StrictPopulateError=l(6801)},3696:o=>{o.exports=function(c,l){return c==null?null:typeof c=="boolean"?l:typeof c[l]=="boolean"?c[l]?l:null:l in c?c[l]:l}},3703:o=>{function c(u,d){(d==null||d>u.length)&&(d=u.length);for(var A=0,f=Array(d);A<d;A++)f[A]=u[A];return f}function l(u,d){return u==null?u:u instanceof Map?u.get(d):u[d]}o.exports=function(u,d,A){var f,p=!1;if(typeof d=="string"){if(d.indexOf(".")===-1){var m=l(u,d);return m??A}f=d.split(".")}else if(p=!0,(f=d).length===1){var g=l(u,f[0]);return g??A}var b,v=d,y=u,w=(function(C,B){var E=typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(!E){if(Array.isArray(C)||(E=(function(I,R){if(I){if(typeof I=="string")return c(I,R);var Q={}.toString.call(I).slice(8,-1);return Q==="Object"&&I.constructor&&(Q=I.constructor.name),Q==="Map"||Q==="Set"?Array.from(I):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?c(I,R):void 0}})(C))||B){E&&(C=E);var _=0,S=function(){};return{s:S,n:function(){return _>=C.length?{done:!0}:{done:!1,value:C[_++]}},e:function(I){throw I},f:S}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N,O=!0,k=!1;return{s:function(){E=E.call(C)},n:function(){var I=E.next();return O=I.done,I},e:function(I){k=!0,N=I},f:function(){try{O||E.return==null||E.return()}finally{if(k)throw N}}}})(f);try{for(w.s();!(b=w.n()).done;){var j=b.value;if(y==null)return A;if(!p&&y[v]!=null)return y[v];y=l(y,j),p||(v=v.substr(j.length+1))}}catch(C){w.e(C)}finally{w.f()}return y??A}},3704:(o,c,l)=>{function u(p){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u(p)}var d=l(2402),A=l(6353),f=l(3305);o.exports=function(p){if(p==null||p==="")return null;var m;if(f(p,"Long"))m=p.toNumber();else if(typeof p=="string")try{return A.Double.fromString(p)}catch{d.ok(!1)}else if(u(p)==="object"){var g,b=(g=p.valueOf())!==null&&g!==void 0?g:p.toString();if(typeof b=="string")try{return A.Double.fromString(p)}catch{d.ok(!1)}else m=Number(b)}else m=Number(p);return new A.Double(m)}},3731:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}function d(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!g})()}function A(g){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},A(g)}function f(g,b){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,y){return v.__proto__=y,v},f(g,b)}var p=(function(g){function b(){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,b,arguments)}return(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),w&&f(y,w)})(b,g),v=b,Object.defineProperty(v,"prototype",{writable:!1}),v;var v})(l(8879)),m=l(5761);Object.defineProperty(p.prototype,"min",m),Object.defineProperty(p.prototype,"max",m),Object.defineProperty(p.prototype,"expires",m),o.exports=p},3743:(o,c,l)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},u(y)}function d(y){return d=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(w){return u(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":u(w)},d(y)}function A(y){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},A(y)}function f(y,w){return f=Object.setPrototypeOf||function(j,C){return j.__proto__=C,j},f(y,w)}var p,m,g={};function b(y,w,j){j||(j=Error);var C=(function(B){function E(_,S,N){var O;return(function(k,I){if(!(k instanceof I))throw new TypeError("Cannot call a class as a function")})(this,E),O=(function(k,I){return!I||d(I)!=="object"&&typeof I!="function"?(function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R})(k):I})(this,A(E).call(this,(function(k,I,R){return typeof w=="string"?w:w(k,I,R)})(_,S,N))),O.code=y,O}return(function(_,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(S&&S.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),S&&f(_,S)})(E,B),E})(j);g[y]=C}function v(y,w){if(Array.isArray(y)){var j=y.length;return y=y.map(function(C){return String(C)}),j>2?"one of ".concat(w," ").concat(y.slice(0,j-1).join(", "),", or ")+y[j-1]:j===2?"one of ".concat(w," ").concat(y[0]," or ").concat(y[1]):"of ".concat(w," ").concat(y[0])}return"of ".concat(w," ").concat(String(y))}b("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),b("ERR_INVALID_ARG_TYPE",function(y,w,j){var C,B,E,_,S;if(p===void 0&&(p=l(2402)),p(typeof y=="string","'name' must be a string"),typeof w=="string"&&(B="not ",w.substr(0,4)===B)?(C="must not be",w=w.replace(/^not /,"")):C="must be",(function(O,k,I){return(I===void 0||I>O.length)&&(I=O.length),O.substring(I-9,I)===k})(y," argument"))E="The ".concat(y," ").concat(C," ").concat(v(w,"type"));else{var N=(typeof S!="number"&&(S=0),S+1>(_=y).length||_.indexOf(".",S)===-1?"argument":"property");E='The "'.concat(y,'" ').concat(N," ").concat(C," ").concat(v(w,"type"))}return E+". Received type ".concat(d(j))},TypeError),b("ERR_INVALID_ARG_VALUE",function(y,w){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";m===void 0&&(m=l(7352));var C=m.inspect(w);return C.length>128&&(C="".concat(C.slice(0,128),"...")),"The argument '".concat(y,"' ").concat(j,". Received ").concat(C)},TypeError),b("ERR_INVALID_RETURN_VALUE",function(y,w,j){var C;return C=j&&j.constructor&&j.constructor.name?"instance of ".concat(j.constructor.name):"type ".concat(d(j)),"Expected ".concat(y,' to be returned from the "').concat(w,'"')+" function but got ".concat(C,".")},TypeError),b("ERR_MISSING_ARGS",function(){for(var y=arguments.length,w=new Array(y),j=0;j<y;j++)w[j]=arguments[j];p===void 0&&(p=l(2402)),p(w.length>0,"At least one arg needs to be specified");var C="The ",B=w.length;switch(w=w.map(function(E){return'"'.concat(E,'"')}),B){case 1:C+="".concat(w[0]," argument");break;case 2:C+="".concat(w[0]," and ").concat(w[1]," arguments");break;default:C+=w.slice(0,B-1).join(", "),C+=", and ".concat(w[B-1]," arguments")}return"".concat(C," must be specified")},TypeError),o.exports.codes=g},3777:(o,c,l)=>{var u=l(9809),d=Object.prototype.toString,A=Object.prototype.hasOwnProperty;o.exports=function(f,p,m){if(!u(p))throw new TypeError("iterator must be a function");var g,b;arguments.length>=3&&(g=m),b=f,d.call(b)==="[object Array]"?(function(v,y,w){for(var j=0,C=v.length;j<C;j++)A.call(v,j)&&(w==null?y(v[j],j,v):y.call(w,v[j],j,v))})(f,p,g):typeof f=="string"?(function(v,y,w){for(var j=0,C=v.length;j<C;j++)w==null?y(v.charAt(j),j,v):y.call(w,v.charAt(j),j,v)})(f,p,g):(function(v,y,w){for(var j in v)A.call(v,j)&&(w==null?y(v[j],j,v):y.call(w,v[j],j,v))})(f,p,g)}},3892:(o,c,l)=>{function u(B){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},u(B)}function d(B,E){var _=typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(!_){if(Array.isArray(B)||(_=(function(R,Q){if(R){if(typeof R=="string")return A(R,Q);var $={}.toString.call(R).slice(8,-1);return $==="Object"&&R.constructor&&($=R.constructor.name),$==="Map"||$==="Set"?Array.from(R):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?A(R,Q):void 0}})(B))||E){_&&(B=_);var S=0,N=function(){};return{s:N,n:function(){return S>=B.length?{done:!0}:{done:!1,value:B[S++]}},e:function(R){throw R},f:N}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var O,k=!0,I=!1;return{s:function(){_=_.call(B)},n:function(){var R=_.next();return k=R.done,R},e:function(R){I=!0,O=R},f:function(){try{k||_.return==null||_.return()}finally{if(I)throw O}}}}function A(B,E){(E==null||E>B.length)&&(E=B.length);for(var _=0,S=Array(E);_<E;_++)S[_]=B[_];return S}function f(B,E){var _=Object.keys(B);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(B);E&&(S=S.filter(function(N){return Object.getOwnPropertyDescriptor(B,N).enumerable})),_.push.apply(_,S)}return _}function p(B){for(var E=1;E<arguments.length;E++){var _=arguments[E]!=null?arguments[E]:{};E%2?f(Object(_),!0).forEach(function(S){m(B,S,_[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(_)):f(Object(_)).forEach(function(S){Object.defineProperty(B,S,Object.getOwnPropertyDescriptor(_,S))})}return B}function m(B,E,_){return(E=(function(S){var N=(function(O){if(u(O)!="object"||!O)return O;var k=O[Symbol.toPrimitive];if(k!==void 0){var I=k.call(O,"string");if(u(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)})(S);return u(N)=="symbol"?N:N+""})(E))in B?Object.defineProperty(B,E,{value:_,enumerable:!0,configurable:!0,writable:!0}):B[E]=_,B}var g=l(6948),b=l(3916),v=l(3703),y=l(1058),w=l(7300),j=l(4450),C=l(6665);c.preparePopulationOptionsMQ=function(B,E){var _,S=B._mongooseOptions.populate,N=Object.keys(S).reduce(function(R,Q){return R.concat([S[Q]])},[]);E.lean!=null&&N.filter(function(R){return(R&&R.options&&R.options.lean)==null}).forEach((_=E.lean,function(R){R.options||(R.options={}),_!=null&&Array.isArray(_.virtuals)&&((_=Object.assign({},_)).virtuals=_.virtuals.filter(function(Q){return typeof Q=="string"&&Q.startsWith(R.path+".")}).map(function(Q){return Q.slice(R.path.length+1)})),R.options.lean=_}));var O=B&&B.options&&B.options.session||null;O!=null&&N.forEach(function(R){R.options!=null?"session"in R.options||(R.options.session=O):R.options={session:O}});for(var k=B._fieldsForExec(),I=0;I<N.length;++I)N[I]instanceof g?N[I]=new g(p(p({},N[I]),{},{_queryProjection:k,_localModel:B.model})):(N[I]._queryProjection=k,N[I]._localModel=B.model);return N},c.createModel=function(B,E,_,S,N){B.hooks.execPreSync("createModel",E);var O=B.schema?B.schema.discriminatorMapping:null,k=O&&O.isRoot?O.key:null,I=E[k];if(k&&I&&B.discriminators){var R=B.discriminators[I]||y(B.discriminators,I);if(R){var Q=j(S);return c.applyPaths(Q,R.schema),new R(void 0,Q,!0)}}var $={skipId:!0,isNew:!1,willInit:!0};return N!=null&&"defaults"in N&&($.defaults=N.defaults),new B(void 0,_,$)},c.createModelAndInit=function(B,E,_,S,N,O,k){var I=O?{populated:O}:void 0,R=c.createModel(B,E,_,S,N);try{R.$init(E,I,k)}catch(Q){k(Q,R)}},c.applyPaths=function(B,E,_){var S,N,O=new Set;if(B){N=Object.keys(B);for(var k=[],I=0;I<N.length;++I){var R=N[I];N[I][0]==="-"&&(delete B[R],R==="-_id"?B._id=0:k.push(R.slice(1)))}N=Object.keys(B);for(var Q=0;Q<N.length;++Q)if(N[Q][0]!=="+"){var $=B[N[Q]];if(w($)&&!(N[Q]==="_id"&&N.length>1)&&(!(N[Q]===E.options.discriminatorKey&&N.length>1&&$!=null)||$)){S=!$;break}}for(var L=0,F=k;L<F.length;L++){var G=F[L],X=E.path(G);X&&X.selected&&S===!1?X&&X.selected&&S===!1&&O.add(G):(B[G]=0,S=!0)}}var q=[],T=[],U=[];switch((function fe(we,Fe){if(Fe||(Fe=""),U.indexOf(we)!==-1)return[];U.push(we);var _e=[];return we.eachPath(function(Ce,ie){if(Fe&&(Ce=Fe+"."+Ce),ie.$isSchemaMap||Ce.endsWith(".$*")){var me=B&&"+"+Ce in B;ie.options&&ie.options.select===!1&&!me&&T.push(Ce)}else{var Be=te(Ce,ie);if(Be!=null||Array.isArray(ie)||!ie.$isMongooseArray||ie.$isMongooseDocumentArray||(Be=te(Ce,ie.caster)),Be!=null&&_e.push(Be),ie.schema){var Le=fe(ie.schema,Ce);S===!1&&b(B,Ce,ie.schema,q,Le)}}}),U.pop(),_e})(E),S){case!0:var K,z=d(T);try{for(z.s();!(K=z.n()).done;){var M=K.value;B[M]=0}}catch(fe){z.e(fe)}finally{z.f()}break;case!1:E&&E.paths._id&&E.paths._id.options&&E.paths._id.options.select===!1&&(B._id=0);var H,Y=d(q);try{for(Y.s();!(H=Y.n()).done;){var ae=H.value;O.has(ae)||C(B,ae)||(B[ae]=B[ae]||1)}}catch(fe){Y.e(fe)}finally{Y.f()}break;case void 0:if(B==null)break;for(var oe=0,be=Object.keys(B||{});oe<be.length;oe++){var ge=be[oe];ge.startsWith("+")&&delete B[ge]}var he,ke=d(T);try{for(ke.s();!(he=ke.n()).done;){var Z=he.value;B[Z]==null&&(B[Z]=0)}}catch(fe){ke.e(fe)}finally{ke.f()}}function te(fe,we){if(B!=null&&typeof we.selected=="boolean")if(we.selected===!1&&B[fe])_&&(B[fe]=0);else if(S||!we.selected||fe!==E.options.discriminatorKey||B[fe]==null||B[fe]){if(S!==!1||!we.selected||B[fe]==null||B[fe]){var Fe="+"+fe;if(B&&Fe in B)return delete B[Fe],void(S===!1&&N.length>1&&!~N.indexOf(fe)&&!_?B[fe]=1:S==null&&_&&we.selected===!1&&(B[fe]=0));for(var _e=fe.split("."),Ce="",ie=0;ie<_e.length;++ie)if(Ce+=Ce.length?"."+_e[ie]:_e[ie],T.indexOf(Ce)!==-1)return;if(!S&&we&&we.options&&we.options.$skipDiscriminatorCheck)for(var me="",Be=0;Be<_e.length;++Be){me+=(me.length===0?"":".")+_e[Be];var Le=v(B,me,!1)||v(B,me+".$",!1);if(Le&&u(Le)!=="object")return}return(we.selected?q:T).push(fe),fe}delete B[fe]}else delete B[fe]}}},3900:(o,c,l)=>{var u=l(6400),d=l(6750),A=l(3191)(),f=l(1464),p=l(2268),m=u("%Math.floor%");o.exports=function(g,b){if(typeof g!="function")throw new p("`fn` is not a function");if(typeof b!="number"||b<0||b>4294967295||m(b)!==b)throw new p("`length` must be a positive 32-bit integer");var v=arguments.length>2&&!!arguments[2],y=!0,w=!0;if("length"in g&&f){var j=f(g,"length");j&&!j.configurable&&(y=!1),j&&!j.writable&&(w=!1)}return(y||w||!v)&&(A?d(g,"length",b,!0,!0):d(g,"length",b)),g}},3916:o=>{o.exports=function(c,l,u,d,A){var f=Object.keys(c).reduce(function(m,g){return m||g.startsWith(l+".")},!1),p=l+"."+u.options.discriminatorKey;f||A.length!==1||A[0]!==p||d.splice(d.indexOf(p),1)}},3940:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,g),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,g,["Can't save() the same doc multiple times in parallel. Document: "+v._doc._id])}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"ParallelSaveError"}),o.exports=p},4009:(o,c,l)=>{var u=l(8213),d=l(5188),A=l(3622),f=l(5678),p=l(7352),m=l(8768),g=/(\.\d+$|\.\d+\.)/g;o.exports=function(b,v,y,w,j){if(b==null)return[];if(typeof b=="string"&&j!=null&&d(j,b))throw new u("refPath `"+b+"` must not be excluded in projection, got "+p.inspect(j));if(g.test(y)){var C=y.split(g);if(C[C.length-1]==="")throw new Error("Can't populate individual element in an array");for(var B="",E=b,_=0;_<C.length;_+=2){var S=C[_];if(!E.startsWith(S+".")){if(_===C.length-1){B+=E,E="";break}throw new Error("Could not normalize ref path, chunk "+S+" not in populated path")}B+=E.substring(0,S.length)+C[_+1],E=E.substring(S.length+1)}var N=f.get(B,v,A),O=Array.isArray(N)?N:[N];return m.array.flatten(O)}var k=f.get(b,v,A);return w!=null&&w.virtuals.hasOwnProperty(b)?[w.virtuals[b].applyGetters(void 0,v)]:Array.isArray(k)?k:[k]}},4026:(o,c)=>{c.Collection=function(){throw new Error("Cannot create a collection from browser library")},c.Connection=function(){throw new Error("Cannot create a connection from browser library")},c.BulkWriteResult=function(){}},4058:(o,c,l)=>{var u=l(6353).Long,d=9223372036854775807n,A=-9223372036854775808n,f="Mongoose only supports BigInts between ".concat(A," and ").concat(d," because MongoDB does not support arbitrary precision integers");o.exports=function(p){if(p==null)return p;if(p==="")return null;if(typeof p=="bigint"){if(p>d||p<A)throw new Error(f);return p}if(p instanceof u)return p.toBigInt();if(typeof p=="string"||typeof p=="number"){if((p=BigInt(p))>d||p<A)throw new Error(f);return p}throw new Error('Cannot convert value to BigInt: "'.concat(p,'"'))}},4070:(o,c,l)=>{function u(A,f){(f==null||f>A.length)&&(f=A.length);for(var p=0,m=Array(f);p<f;p++)m[p]=A[p];return m}var d=l(8260);o.exports=function(A){if(d(A)!=="TopologyDescription"||A.servers.size===0)return!1;var f,p=(function(g,b){var v=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!v){if(Array.isArray(g)||(v=(function(E,_){if(E){if(typeof E=="string")return u(E,_);var S={}.toString.call(E).slice(8,-1);return S==="Object"&&E.constructor&&(S=E.constructor.name),S==="Map"||S==="Set"?Array.from(E):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?u(E,_):void 0}})(g))||b){v&&(g=v);var y=0,w=function(){};return{s:w,n:function(){return y>=g.length?{done:!0}:{done:!1,value:g[y++]}},e:function(E){throw E},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j,C=!0,B=!1;return{s:function(){v=v.call(g)},n:function(){var E=v.next();return C=E.done,E},e:function(E){B=!0,j=E},f:function(){try{C||v.return==null||v.return()}finally{if(B)throw j}}}})(A.servers.values());try{for(p.s();!(f=p.n()).done;){var m=f.value;if(m.host.endsWith(".mongodb.net")===!1||m.port!==27017)return!1}}catch(g){p.e(g)}finally{p.f()}return!0}},4183:(o,c,l)=>{var u=l(118);o.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:u}},4224:(o,c,l)=>{var u=l(6511).ctor("require","modify","init","default","ignore");function d(){this.activePaths=new u}o.exports=d,d.prototype.strictMode=!0,d.prototype.fullPath=void 0,d.prototype.selected=void 0,d.prototype.shardval=void 0,d.prototype.saveError=void 0,d.prototype.validationError=void 0,d.prototype.adhocPaths=void 0,d.prototype.removing=void 0,d.prototype.inserting=void 0,d.prototype.saving=void 0,d.prototype.version=void 0,d.prototype._id=void 0,d.prototype.ownerDocument=void 0,d.prototype.populate=void 0,d.prototype.populated=void 0,d.prototype.primitiveAtomics=void 0,d.prototype.wasPopulated=!1,d.prototype.scope=void 0,d.prototype.session=null,d.prototype.pathsToScopes=null,d.prototype.cachedRequired=null},4301:(o,c,l)=>{var u=l(9539),d=l(2793),A=l(3305),f=l(5549),p=l(608);o.exports=function m(g,b,v,y){var w,j=Object.keys(b),C=0,B=j.length;if(v=v||"",!(y=y||new WeakSet).has(b)){for(y.add(b);C<B;)if(w=j[C++],(v||w!=="discriminators"&&w!=="base"&&w!=="_applyDiscriminators"&&w!=="_userProvidedOptions"&&w!=="options"&&w!=="tree")&&!(v==="tree"&&b!=null&&b.instanceOfSchema||d.has(w))){if(g[w]==null)g[w]=b[w];else if(p(b[w])){if(p(g[w])||(g[w]={}),b[w]!=null){if(b[w].$isSingleNested&&g[w].$isMongooseDocumentArray||b[w].$isMongooseDocumentArray&&g[w].$isSingleNested||b[w].$isMongooseDocumentArrayElement&&g[w].$isMongooseDocumentArrayElement)continue;if(b[w].instanceOfSchema){g[w].instanceOfSchema?u(g[w],b[w].clone(),!0):g[w]=b[w].clone();continue}if(A(b[w],"ObjectId")){g[w]=new f(b[w]);continue}}m(g[w],b[w],v?v+"."+w:w,y)}}b!=null&&b.instanceOfSchema&&(g.tree=Object.assign({},b.tree,g.tree))}}},4327:o=>{o.exports=function(c,l,u,d){return u?d?{bsonType:l}:{bsonType:[l,"null"]}:d?{type:c}:{type:[c,"null"]}}},4432:(o,c,l)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},u(y)}function d(y){if(y!=null){var w=y[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],j=0;if(w)return w.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length))return{next:function(){return y&&j>=y.length&&(y=void 0),{value:y&&y[j++],done:!y}}}}throw new TypeError(u(y)+" is not iterable")}function A(){var y,w,j=typeof Symbol=="function"?Symbol:{},C=j.iterator||"@@iterator",B=j.toStringTag||"@@toStringTag";function E(Q,$,L,F){var G=$&&$.prototype instanceof S?$:S,X=Object.create(G.prototype);return f(X,"_invoke",(function(q,T,U){var K,z,M,H=0,Y=U||[],ae=!1,oe={p:0,n:0,v:y,a:be,f:be.bind(y,4),d:function(ge,he){return K=ge,z=0,M=y,oe.n=he,_}};function be(ge,he){for(z=ge,M=he,w=0;!ae&&H&&!ke&&w<Y.length;w++){var ke,Z=Y[w],te=oe.p,fe=Z[2];ge>3?(ke=fe===he)&&(M=Z[(z=Z[4])?5:(z=3,3)],Z[4]=Z[5]=y):Z[0]<=te&&((ke=ge<2&&te<Z[1])?(z=0,oe.v=he,oe.n=Z[1]):te<fe&&(ke=ge<3||Z[0]>he||he>fe)&&(Z[4]=ge,Z[5]=he,oe.n=fe,z=0))}if(ke||ge>1)return _;throw ae=!0,he}return function(ge,he,ke){if(H>1)throw TypeError("Generator is already running");for(ae&&he===1&&be(he,ke),z=he,M=ke;(w=z<2?y:M)||!ae;){K||(z?z<3?(z>1&&(oe.n=-1),be(z,M)):oe.n=M:oe.v=M);try{if(H=2,K){if(z||(ge="next"),w=K[ge]){if(!(w=w.call(K,M)))throw TypeError("iterator result is not an object");if(!w.done)return w;M=w.value,z<2&&(z=0)}else z===1&&(w=K.return)&&w.call(K),z<2&&(M=TypeError("The iterator does not provide a '"+ge+"' method"),z=1);K=y}else if((w=(ae=oe.n<0)?M:q.call(T,oe))!==_)break}catch(Z){K=y,z=1,M=Z}finally{H=1}}return{value:w,done:ae}}})(Q,L,F),!0),X}var _={};function S(){}function N(){}function O(){}w=Object.getPrototypeOf;var k=[][C]?w(w([][C]())):(f(w={},C,function(){return this}),w),I=O.prototype=S.prototype=Object.create(k);function R(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,O):(Q.__proto__=O,f(Q,B,"GeneratorFunction")),Q.prototype=Object.create(I),Q}return N.prototype=O,f(I,"constructor",O),f(O,"constructor",N),N.displayName="GeneratorFunction",f(O,B,"GeneratorFunction"),f(I),f(I,B,"Generator"),f(I,C,function(){return this}),f(I,"toString",function(){return"[object Generator]"}),(A=function(){return{w:E,m:R}})()}function f(y,w,j,C){var B=Object.defineProperty;try{B({},"",{})}catch{B=0}f=function(E,_,S,N){if(_)B?B(E,_,{value:S,enumerable:!N,configurable:!N,writable:!N}):E[_]=S;else{var O=function(k,I){f(E,k,function(R){return this._invoke(k,I,R)})};O("next",0),O("throw",1),O("return",2)}},f(y,w,j,C)}function p(y,w){var j=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(!j){if(Array.isArray(y)||(j=(function(N,O){if(N){if(typeof N=="string")return m(N,O);var k={}.toString.call(N).slice(8,-1);return k==="Object"&&N.constructor&&(k=N.constructor.name),k==="Map"||k==="Set"?Array.from(N):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?m(N,O):void 0}})(y))||w){j&&(y=j);var C=0,B=function(){};return{s:B,n:function(){return C>=y.length?{done:!0}:{done:!1,value:y[C++]}},e:function(N){throw N},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E,_=!0,S=!1;return{s:function(){j=j.call(y)},n:function(){var N=j.next();return _=N.done,N},e:function(N){S=!0,E=N},f:function(){try{_||j.return==null||j.return()}finally{if(S)throw E}}}}function m(y,w){(w==null||w>y.length)&&(w=y.length);for(var j=0,C=Array(w);j<w;j++)C[j]=y[j];return C}function g(y,w,j,C,B,E,_){try{var S=y[E](_),N=S.value}catch(O){return void j(O)}S.done?w(N):Promise.resolve(N).then(C,B)}function b(y){return function(){var w=this,j=arguments;return new Promise(function(C,B){var E=y.apply(w,j);function _(N){g(E,C,B,_,S,"next",N)}function S(N){g(E,C,B,_,S,"throw",N)}_(void 0)})}}var v=l(5782);o.exports=function(y){var w=!0;y.s.hooks.pre("save",!1,function(j){if(this.$isSubdocument)j();else{var C=this,B=this.$getAllSubdocs({useCache:!0});B.length?v(B,function(E,_){E.$__schema.s.hooks.execPre("save",E,function(S){_(S)})},function(E){if(C.$__.saveOptions&&(C.$__.saveOptions.__subdocs=null),E)return C.$__schema.s.hooks.execPost("save:error",C,[C],{error:E},function(_){j(_)});j()}):j()}},null,w),y.s.hooks.post("save",(function(){var j=b(A().m(function C(){var B,E,_,S,N,O;return A().w(function(k){for(;;)switch(k.n){case 0:if((B=this.$__.removedSubdocs)&&B.length){k.n=1;break}return k.a(2);case 1:E=[],_=p(B),k.p=2,N=A().m(function I(){var R;return A().w(function(Q){for(;;)switch(Q.n){case 0:R=S.value,E.push(new Promise(function($,L){R.$__schema.s.hooks.execPost("deleteOne",R,[R],function(F){if(F)return L(F);$()})}));case 1:return Q.a(2)}},I)}),_.s();case 3:if((S=_.n()).done){k.n=5;break}return k.d(d(N()),4);case 4:k.n=3;break;case 5:k.n=7;break;case 6:k.p=6,O=k.v,_.e(O);case 7:return k.p=7,_.f(),k.f(7);case 8:return this.$__.removedSubdocs=null,k.n=9,Promise.all(E);case 9:return k.a(2)}},C,this,[[2,6,7,8]])}));return function(){return j.apply(this,arguments)}})()),y.s.hooks.post("save",(function(){var j=b(A().m(function C(){var B,E,_,S,N,O,k,I,R=this;return A().w(function(Q){for(;;)switch(Q.n){case 0:if(!this.$isSubdocument){Q.n=1;break}return Q.a(2);case 1:if(B=this,(E=this.$getAllSubdocs({useCache:!0})).length){Q.n=2;break}return Q.a(2);case 2:_=[],S=p(E),Q.p=3,O=A().m(function $(){var L;return A().w(function(F){for(;;)switch(F.n){case 0:L=N.value,_.push(new Promise(function(G,X){L.$__schema.s.hooks.execPost("save",L,[L],function(q){if(q)return X(q);G()})}));case 1:return F.a(2)}},$)}),S.s();case 4:if((N=S.n()).done){Q.n=6;break}return Q.d(d(O()),5);case 5:Q.n=4;break;case 6:Q.n=8;break;case 7:Q.p=7,k=Q.v,S.e(k);case 8:return Q.p=8,S.f(),Q.f(8);case 9:return Q.p=9,Q.n=10,Promise.all(_);case 10:Q.n=12;break;case 11:return Q.p=11,I=Q.v,Q.n=12,new Promise(function($,L){R.$__schema.s.hooks.execPost("save:error",B,[B],{error:I},function(F){if(F)return L(F);$()})});case 12:return Q.a(2)}},C,this,[[9,11],[3,7,8,9]])}));return function(){return j.apply(this,arguments)}})(),null,w)}},4450:(o,c,l)=>{function u(_){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},u(_)}var d=l(9639),A=l(5549),f=l(2793),p=l(2497),m=l(9696),g=l(3305),b=l(1243).isMongooseArray,v=l(608),y=l(2789),w=l(7930),j=l(7291).trustedSymbol,C=l(6353);function B(_,S,N){if(_==null)return _;if(g(_,"Double"))return new C.Double(_.value);if(typeof _=="number"||typeof _=="string"||typeof _=="boolean"||typeof _=="bigint")return _;if(Array.isArray(_))return(function(Q,$){var L=0,F=Q.length,G=new Array(F);for(L=0;L<F;++L)G[L]=B(Q[L],$,!0);return G})(b(_)?_.__array:_,S);if(p(_)){if(S&&S.retainDocuments&&_.$__!=null){var O=_.$clone();return _.__index!=null&&(O.__index=_.__index),_.__parentArray!=null&&(O.__parentArray=_.__parentArray),O.$__parent=_.$__parent,O}return y(_)&&_.$__!=null&&_._doc!=null?_._doc:S&&S.json&&typeof _.toJSON=="function"?_.toJSON(S):_.toObject(S)}var k,I,R=_.constructor;if(R)switch(m(R)){case"Object":return E(_,S,N);case"Date":return new R(+_);case"RegExp":return k=_,(I=new RegExp(k.source,k.flags)).lastIndex!==k.lastIndex&&(I.lastIndex=k.lastIndex),I}return g(_,"ObjectId")?S&&S.flattenObjectIds?_.toJSON():new A(_.id):g(_,"Decimal128")?S&&S.flattenDecimals?_.toJSON():d.fromString(_.toString()):!R&&v(_)?E(_,S,N):u(_)==="object"&&_[w.schemaTypeSymbol]?_.clone():S&&S.bson&&typeof _.toBSON=="function"?_:typeof _.valueOf=="function"?_.valueOf():E(_,S,N)}function E(_,S,N){var O,k=S&&S.minimize,I=S&&S.omitUndefined,R=S&&S._seen,Q={};if(R&&R.has(_))return R.get(_);R&&R.set(_,Q),j in _&&S?.copyTrustedSymbol!==!1&&(Q[j]=_[j]);for(var $=Object.keys(_),L=$.length,F=0;F<L;++F){var G=$[F];if(!f.has(G)){var X=B(_[G],S,!1);k!==!1&&!I||X!==void 0?k===!0&&X===void 0||(O||(O=!0),Q[G]=X):delete Q[G]}}return k&&!N?O&&Q:Q}o.exports=B},4473:o=>{function c(l,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(d.has(l))throw new Error("Infinite subdocument loop: subdoc with _id "+l._id+" is a parent of itself");var A=l.$parent(),f=l.$__pathRelativeToParent(void 0,!1)+"."+u;A.$__.activePaths.clearPath(f),A.$isSubdocument&&c(A,f,d)}o.exports=function(l,u,d){var A=(d=d||{}).skipDocArrays,f=0;if(!l)return f;for(var p=0,m=Object.keys(l.$__.activePaths.getStatePaths("modify"));p<m.length;p++){var g=m[p];if(A){var b=l.$__schema.path(g);if(b&&b.$isMongooseDocumentArray)continue}g.startsWith(u+".")&&(l.$__.activePaths.clearPath(g),++f,l.$isSubdocument&&c(l,g))}return f}},4561:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}function d(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!g})()}function A(g){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},A(g)}function f(g,b){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,y){return v.__proto__=y,v},f(g,b)}var p=(function(g){function b(){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,b,arguments)}return(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),w&&f(y,w)})(b,g),v=b,Object.defineProperty(v,"prototype",{writable:!1}),v;var v})(l(8879)),m=l(5761);Object.defineProperty(p.prototype,"excludeIndexes",m),Object.defineProperty(p.prototype,"_id",m),o.exports=p},4592:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}function d(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!g})()}function A(g){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},A(g)}function f(g,b){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,y){return v.__proto__=y,v},f(g,b)}var p=(function(g){function b(){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,b,arguments)}return(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),w&&f(y,w)})(b,g),v=b,Object.defineProperty(v,"prototype",{writable:!1}),v;var v})(l(8879)),m=l(5761);Object.defineProperty(p.prototype,"enum",m),Object.defineProperty(p.prototype,"of",m),Object.defineProperty(p.prototype,"castNonArrays",m),o.exports=p},4625:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}function d(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!g})()}function A(g){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},A(g)}function f(g,b){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,y){return v.__proto__=y,v},f(g,b)}var p=(function(g){function b(){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,b,arguments)}return(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),w&&f(y,w)})(b,g),v=b,Object.defineProperty(v,"prototype",{writable:!1}),v;var v})(l(8879)),m=l(5761);Object.defineProperty(p.prototype,"auto",m),Object.defineProperty(p.prototype,"populate",m),o.exports=p},4756:o=>{var c=function(l){return l!=l};o.exports=function(l,u){return l===0&&u===0?1/l==1/u:l===u||!(!c(l)||!c(u))}},4829:(o,c,l)=>{o.exports=l(8533)},4859:(o,c,l)=>{var u=l(5832).hp;function d(N,O){var k=typeof Symbol<"u"&&N[Symbol.iterator]||N["@@iterator"];if(!k){if(Array.isArray(N)||(k=(function(F,G){if(F){if(typeof F=="string")return A(F,G);var X={}.toString.call(F).slice(8,-1);return X==="Object"&&F.constructor&&(X=F.constructor.name),X==="Map"||X==="Set"?Array.from(F):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?A(F,G):void 0}})(N))||O){k&&(N=k);var I=0,R=function(){};return{s:R,n:function(){return I>=N.length?{done:!0}:{done:!1,value:N[I++]}},e:function(F){throw F},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Q,$=!0,L=!1;return{s:function(){k=k.call(N)},n:function(){var F=k.next();return $=F.done,F},e:function(F){L=!0,Q=F},f:function(){try{$||k.return==null||k.return()}finally{if(L)throw Q}}}}function A(N,O){(O==null||O>N.length)&&(O=N.length);for(var k=0,I=Array(O);k<O;k++)I[k]=N[k];return I}var f=l(8920),p=l(2400),m=l(863),g=l(1058),b=l(3303)._,v=l(8768),y=l(3305),w=l(7930).arrayParentSymbol,j=l(7930).arrayPathSymbol,C=l(7930).arraySchemaSymbol,B=l(7930).documentArrayParent,E=Array.prototype.toString,_={toBSON:function(){return this.toObject(b)},toString:function(){return E.call(this.__array.map(function(N){return N!=null&&N.$__!=null?N.toString():N}))},getArrayParent:function(){return this[w]},_cast:function(N,O,k){if(this[C]==null)return N;var I=this[C].casterConstructor;if((I.$isMongooseDocumentArray?v.isMongooseDocumentArray(N):N instanceof I)||N&&N.constructor&&N.constructor.baseCasterConstructor===I)return N[B]&&N.__parentArray||(N[B]=this[w],N.__parentArray=this),N.$setIndex(O),N;if(N==null)return null;if((u.isBuffer(N)||y(N,"ObjectId")||!v.isObject(N))&&(N={_id:N}),N&&I.discriminators&&I.schema&&I.schema.options&&I.schema.options.discriminatorKey)if(typeof N[I.schema.options.discriminatorKey]=="string"&&I.discriminators[N[I.schema.options.discriminatorKey]])I=I.discriminators[N[I.schema.options.discriminatorKey]];else{var R=g(I.discriminators,N[I.schema.options.discriminatorKey]);R&&(I=R)}if(I.$isMongooseDocumentArray)return I.cast(N,this,void 0,void 0,O);var Q=new I(N,this,k,void 0,O);return Q.isNew=!0,Q},id:function(N){var O,k,I;try{O=m(N).toString()}catch{O=null}var R,Q=d(this);try{for(Q.s();!(R=Q.n()).done;){var $=R.value;if($&&(I=$.get("_id"))!=null){if(I instanceof p){if(k||(k=String(N)),k==I._id)return $}else if(y(N,"ObjectId")||y(I,"ObjectId")){if(O==I)return $}else if(N==I||v.deepEqual(N,I))return $}}}catch(L){Q.e(L)}finally{Q.f()}return null},toObject:function(N){return[].concat(this.map(function(O){return O==null?null:typeof O.toObject!="function"?O:O.toObject(N)}))},$toObject:function(){return this.constructor.prototype.toObject.apply(this,arguments)},push:function(){var N=f.push.apply(this,arguments);return S(this),N},pull:function(){var N=f.pull.apply(this,arguments);return S(this),N},shift:function(){var N=f.shift.apply(this,arguments);return S(this),N},splice:function(){var N=f.splice.apply(this,arguments);return S(this),N},inspect:function(){return this.toObject()},create:function(N){var O=this[C].casterConstructor;if(N&&O.discriminators&&O.schema&&O.schema.options&&O.schema.options.discriminatorKey)if(typeof N[O.schema.options.discriminatorKey]=="string"&&O.discriminators[N[O.schema.options.discriminatorKey]])O=O.discriminators[N[O.schema.options.discriminatorKey]];else{var k=g(O.discriminators,N[O.schema.options.discriminatorKey]);k&&(O=k)}return new O(N,this)},notify:function(N){var O=this;return function k(I,R){for(var Q=(R=R||O).length;Q--;)R[Q]!=null&&(N==="save"&&(I=O[Q]),v.isMongooseArray(R[Q])?k(I,R[Q]):R[Q]&&R[Q].emit(N,I))}},set:function(N,O,k){var I=this.__array;if(k)return I[N]=O,this;var R=_._cast.call(this,O,N);return _._markModified.call(this,N),I[N]=R,this},_markModified:function(N,O){var k,I=this[w];if(I){if(k=this[j],arguments.length&&(k=O!=null?k+"."+N.__index+"."+O:k+"."+N),k!=null&&k.endsWith(".$"))return this;I.markModified(k,arguments.length!==0?N:I)}return this}};function S(N){var O=N[w];if(O&&O.$__.populated!=null){var k,I=d(Object.keys(O.$__.populated).filter(function(Q){return Q.startsWith(N[j]+".")}));try{var R=function(){var Q=k.value,$=Q.slice((N[j]+".").length);if(!Array.isArray(O.$__.populated[Q].value))return 1;O.$__.populated[Q].value=N.map(function(L){return L.$populated($)})};for(I.s();!(k=I.n()).done;)R()}catch(Q){I.e(Q)}finally{I.f()}}}o.exports=_},4878:(o,c,l)=>{function u(j){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},u(j)}function d(j,C,B){return(C=(function(E){var _=(function(S){if(u(S)!="object"||!S)return S;var N=S[Symbol.toPrimitive];if(N!==void 0){var O=N.call(S,"string");if(u(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(S)})(E);return u(_)=="symbol"?_:_+""})(C))in j?Object.defineProperty(j,C,{value:B,enumerable:!0,configurable:!0,writable:!0}):j[C]=B,j}var A=l(8920),f=l(4859),p=l(7930).arrayAtomicsSymbol,m=l(7930).arrayAtomicsBackupSymbol,g=l(7930).arrayParentSymbol,b=l(7930).arrayPathSymbol,v=l(7930).arraySchemaSymbol,y=Array.prototype.push,w=/^\d+$/;o.exports=function(j,C,B,E){var _=[],S=d(d(d(d(d({},p,{}),m,void 0),b,C),v,void 0),g,void 0);if(Array.isArray(j)&&(j[b]===C&&j[g]===B&&(S[p]=Object.assign({},j[p])),j.forEach(function(O){y.call(_,O)})),S[b]=C,S.__array=_,B&&B.$__)for(S[g]=B,S[v]=B.$__schema.path(C);S[v]!=null&&S[v].$isMongooseArray&&!S[v].$isMongooseDocumentArray;)S[v]=S[v].casterConstructor;var N=new Proxy(_,{get:function(O,k){return k==="isMongooseArray"||k==="isMongooseArrayProxy"||k==="isMongooseDocumentArray"||k==="isMongooseDocumentArrayProxy"||(S.hasOwnProperty(k)?S[k]:f.hasOwnProperty(k)?f[k]:E&&E.virtuals&&E.virtuals.hasOwnProperty(k)?E.virtuals[k].applyGetters(void 0,O):A.hasOwnProperty(k)?A[k]:_[k])},set:function(O,k,I){return typeof k=="string"&&w.test(k)?f.set.call(N,k,I,!1):S.hasOwnProperty(k)?S[k]=I:E&&E.virtuals&&E.virtuals.hasOwnProperty(k)?E.virtuals[k].applySetters(I,O):_[k]=I,!0}});return N}},4957:(o,c,l)=>{function u(v){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},u(v)}function d(v,y){var w=Object.keys(v);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(v);y&&(j=j.filter(function(C){return Object.getOwnPropertyDescriptor(v,C).enumerable})),w.push.apply(w,j)}return w}function A(v){for(var y=1;y<arguments.length;y++){var w=arguments[y]!=null?arguments[y]:{};y%2?d(Object(w),!0).forEach(function(j){f(v,j,w[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(w)):d(Object(w)).forEach(function(j){Object.defineProperty(v,j,Object.getOwnPropertyDescriptor(w,j))})}return v}function f(v,y,w){return(y=(function(j){var C=(function(B){if(u(B)!="object"||!B)return B;var E=B[Symbol.toPrimitive];if(E!==void 0){var _=E.call(B,"string");if(u(_)!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)})(j);return u(C)=="symbol"?C:C+""})(y))in v?Object.defineProperty(v,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):v[y]=w,v}var p=l(7160),m=l(5268);o.exports=b,b.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];var g=new Set(b.middlewareFunctions.flatMap(function(v){return[v,"$__".concat(v)]}));function b(v,y,w){var j={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},C=(w=w||{}).decorateDoc?v:v.prototype;v.$appliedHooks=!0;for(var B=0,E=Object.keys(y.paths);B<E.length;B++){var _=E[B],S=y.paths[_],N=null;if(S.$isSingleNested)N=S.caster;else{if(!S.$isMongooseDocumentArray)continue;N=S.Constructor}if(!N.$appliedHooks&&(b(N,S.schema,A(A({},w),{},{isChildSchema:!0})),N.discriminators!=null))for(var O=0,k=Object.keys(N.discriminators);O<k.length;O++){var I=k[O];b(N.discriminators[I],N.discriminators[I].schema,w)}}var R=y.s.hooks.filter(function(z){return z.name==="updateOne"||z.name==="deleteOne"?!!z.document:z.name==="remove"||z.name==="init"?z.document==null||!!z.document:z.query==null&&z.document==null||z.document!==!1}).filter(function(z){return!y.methods[z.name]||!z.fn[p.builtInMiddleware]});v._middleware=R,C.$__originalValidate=C.$__originalValidate||C.$__validate;for(var Q=0,$=w&&w.isChildSchema?["save","validate","deleteOne"]:["save","validate"];Q<$.length;Q++){var L=$[Q],F=L==="validate"?"$__originalValidate":"$__".concat(L),G=R.createWrapper(L,C[F],null,j);C["$__".concat(L)]=G}C.$__init=R.createWrapperSync("init",C.$__init,null,j);for(var X=Object.keys(y.methods),q=Object.assign({},j,{checkForPromise:!0}),T=function(){var z=K[U];if(g.has(z)||!R.hasHooks(z))return 0;var M=C[z];C[z]=function(){var H=this,Y=Array.prototype.slice.call(arguments),ae=Y.slice(-1).pop(),oe=typeof ae=="function"?Y.slice(0,Y.length-1):Y;return m(ae,function(be){return H["$__".concat(z)].apply(H,oe.concat([be]))},v.events)},C["$__".concat(z)]=R.createWrapper(z,M,null,q)},U=0,K=X;U<K.length;U++)T()}},5022:(o,c,l)=>{var u=l(6426),d=l(7160),A=l(608),f=l(8768);function p(m,g){if(g&&g.default){var b=g.default;Array.isArray(b)&&b.length===0?g.default=Array:!g.shared&&A(b)&&Object.keys(b).length===0&&(g.default=function(){return{}})}u.call(this,m,g,"Mixed"),this[d.schemaMixedSymbol]=!0}p.schemaName="Mixed",p.defaultOptions={},p.prototype=Object.create(u.prototype),p.prototype.constructor=p,p.get=u.get,p.set=u.set,p.setters=[],p.prototype.cast=function(m){return m instanceof Error?f.errorToPOJO(m):m},p.prototype.castForQuery=function(m,g){return g},o.exports=p},5098:(o,c,l)=>{function u(L,F){var G=Object.keys(L);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(L);F&&(X=X.filter(function(q){return Object.getOwnPropertyDescriptor(L,q).enumerable})),G.push.apply(G,X)}return G}function d(L){for(var F=1;F<arguments.length;F++){var G=arguments[F]!=null?arguments[F]:{};F%2?u(Object(G),!0).forEach(function(X){A(L,X,G[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(G)):u(Object(G)).forEach(function(X){Object.defineProperty(L,X,Object.getOwnPropertyDescriptor(G,X))})}return L}function A(L,F,G){return(F=(function(X){var q=(function(T){if(f(T)!="object"||!T)return T;var U=T[Symbol.toPrimitive];if(U!==void 0){var K=U.call(T,"string");if(f(K)!="object")return K;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(T)})(X);return f(q)=="symbol"?q:q+""})(F))in L?Object.defineProperty(L,F,{value:G,enumerable:!0,configurable:!0,writable:!0}):L[F]=G,L}function f(L){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},f(L)}var p,m=l(3609),g=l(3550).EventEmitter,b=l(3441),v=l(7494),y=l(6426),w=l(5335),j=l(8499),C=l(5558).G,B=l(4327),E=l(1469),_=l(9604),S=l(7910),N=l(1313),O=l(3303)._,k=l(1793),I=l(8768),R=l(5537);function Q(L,F,G){if(L.options.timeseries)throw new R(F,"timeseries");var X=Q.defaultOptions&&Q.defaultOptions._id;X!=null&&((G=G||{})._id=X),L=N(L,G),this.caster=$(L,null,G),this.caster.path=F,this.caster.prototype.$basePath=F,this.schema=L,this.$isSingleNested=!0,this.base=L.base,y.call(this,F,G,"Embedded")}function $(L,F,G){p||(p=l(9380));var X=function(z,M,H){this.$__parent=H,p.apply(this,arguments),H!=null&&this.$session(H.$session())};L._preCompile();var q=F!=null?F.prototype:p.prototype;for(var T in(X.prototype=Object.create(q)).$__setSchema(L),X.prototype.constructor=X,X.prototype.$__schemaTypeOptions=G,X.$__required=G?.required,X.base=L.base,X.schema=L,X.$isSingleNested=!0,X.events=new g,X.prototype.toBSON=function(){return this.toObject(O)},L.methods)X.prototype[T]=L.methods[T];for(var U in L.statics)X[U]=L.statics[U];for(var K in g.prototype)X[K]=g.prototype[K];return X}o.exports=Q,Q.prototype=Object.create(y.prototype),Q.prototype.constructor=Q,Q.prototype.OptionsConstructor=v,Q.prototype.$conditionalHandlers.$geoWithin=function(L,F){return{$geometry:this.castForQuery(null,L.$geometry,F)}},Q.prototype.$conditionalHandlers.$near=Q.prototype.$conditionalHandlers.$nearSphere=_.cast$near,Q.prototype.$conditionalHandlers.$within=Q.prototype.$conditionalHandlers.$geoWithin=_.cast$within,Q.prototype.$conditionalHandlers.$geoIntersects=_.cast$geoIntersects,Q.prototype.$conditionalHandlers.$minDistance=C,Q.prototype.$conditionalHandlers.$maxDistance=C,Q.prototype.$conditionalHandlers.$exists=j,Q.prototype.cast=function(L,F,G,X,q){if(L&&L.$isSingleNested&&L.parent===F)return L;if(L!=null&&(f(L)!=="object"||Array.isArray(L)))throw new b(this.path,L);var T,U=this.schema.path(this.schema.options.discriminatorKey),K=U==null?null:U.getDefault(F),z=S(this.caster,L,K),M=F&&F.$__&&F.$__.selected,H=this.path,Y=M==null?null:Object.keys(M).reduce(function(oe,be){return be.startsWith(H+".")&&((oe=oe||{})[be.substring(H.length+1)]=M[be]),oe},null);if(!G)return q=Object.assign({},q,{priorDoc:X}),Object.keys(L).length===0?new z({},Y,F,void 0,q):new z(L,Y,F,void 0,q);delete(T=new z(void 0,Y,F,!1,{defaults:!1})).$__.defaults,T.$init(L);var ae=k(Y);return w(T,Y,ae),T},Q.prototype.castForQuery=function(L,F,G,X){var q;if(L!=null){if(!(q=this.$conditionalHandlers[L]))throw new Error("Can't use "+L);return q.call(this,F)}if(F==null)return F;var T=S(this.caster,F);if(F instanceof T)return F;this.options.runSetters&&(F=this._applySetters(F,G));var U=X!=null&&X.strict!=null?X.strict:void 0;try{F=new T(F,U)}catch(K){throw K instanceof m?K:new m("Embedded",F,this.path,K,this)}return F},Q.prototype.doValidate=function(L,F,G,X){var q=S(this.caster,L);if(!L||L instanceof q||(L=new q(L,null,G!=null&&G.$__!=null?G:null)),X&&X.skipSchemaValidators)return L?L.validate().then(function(){return F(null)},function(T){return F(T)}):F(null);y.prototype.doValidate.call(this,L,function(T){return T?F(T):L?void L.validate().then(function(){return F(null)},function(U){return F(U)}):F(null)},G,X)},Q.prototype.doValidateSync=function(L,F,G){if(!G||!G.skipSchemaValidators){var X=y.prototype.doValidateSync.call(this,L,F);if(X)return X}if(L)return L.validateSync()},Q.prototype.discriminator=function(L,F,G){G=G||{};var X=I.isPOJO(G)?G.value:G,q=typeof G.clone!="boolean"||G.clone;return F.instanceOfSchema&&q&&(F=F.clone()),F=E(this.caster,L,F,X,null,null,G.overwriteExisting),this.caster.discriminators[L]=$(F,this.caster),this.caster.discriminators[L]},Q.defaultOptions={},Q.set=y.set,Q.setters=[],Q.get=y.get,Q.prototype.toJSON=function(){return{path:this.path,options:this.options}},Q.prototype.clone=function(){var L=new this.constructor(this.schema,this.path,d(d({},this.options),{},{_skipApplyDiscriminators:!0}));return L.validators=this.validators.slice(),this.requiredValidator!==void 0&&(L.requiredValidator=this.requiredValidator),L.caster.discriminators=Object.assign({},this.caster.discriminators),L._appliedDiscriminators=this._appliedDiscriminators,L},Q.prototype.toJSONSchema=function(L){var F=this.options.required&&typeof this.options.required!="function";return d(d({},this.schema.toJSONSchema(L)),B("object","object",L?.useBsonType,F))}},5110:o=>{var c=new Set(["$ref","$id","$db"]);o.exports=function(l){return l[0]==="$"&&!c.has(l)}},5152:(o,c,l)=>{var u=l(3703),d=l(7425);o.exports=function A(f,p,m){for(var g=(m=m||{}).typeOnly,b=Array.isArray(p)?p:p.indexOf(".")===-1?[p]:p.split("."),v=null,y="adhocOrUndefined",w=d(f.schema,f.get(f.schema.options.discriminatorKey))||f.schema,j=0;j<b.length;++j){var C=b.slice(0,j+1).join(".");if((v=w.path(C))!=null){if(v.instance==="Mixed")return g?"real":v;if(y=w.pathType(C),(v.$isSingleNested||v.$isMongooseDocumentArrayElement)&&v.schema.discriminators!=null){var B=v.schema.discriminators,E=f.get(C+"."+u(v,"schema.options.discriminatorKey"));if(E==null||B[E]==null)continue;var _=b.slice(j+1).join(".");return A(f.get(C),_,m)}}else y="adhocOrUndefined"}return g?y:v}},5188:(o,c,l)=>{var u=l(7300);o.exports=function(d,A){if(d==null)return!1;if(A==="_id")return d._id===0;for(var f=null,p=0,m=Object.keys(d);p<m.length;p++){var g=m[p];if(u(d[g])){f=d[A]===1?"inclusive":"exclusive";break}}return f==="inclusive"?d[A]!==1:f==="exclusive"&&d[A]===0}},5268:(o,c,l)=>{var u=l(2746),d=Symbol("mongoose#emitted");o.exports=function(A,f,p,m){if(typeof A=="function")try{return f(function(g){if(g==null)A.apply(this,arguments);else{p!=null&&p.listeners!=null&&p.listeners("error").length>0&&!g[d]&&(g[d]=!0,p.emit("error",g));try{A(g)}catch(b){return u(function(){throw b})}}})}catch(g){return p!=null&&p.listeners!=null&&p.listeners("error").length>0&&!g[d]&&(g[d]=!0,p.emit("error",g)),A(g)}return new(m=m||l.g.Promise)(function(g,b){f(function(v,y){return v!=null?(p!=null&&p.listeners!=null&&p.listeners("error").length>0&&!v[d]&&(v[d]=!0,p.emit("error",v)),b(v)):arguments.length>2?g(Array.prototype.slice.call(arguments,1)):void g(y)})})}},5289:o=>{o.exports=function(c){switch(c){case"p":c="primary";break;case"pp":c="primaryPreferred";break;case"s":c="secondary";break;case"sp":c="secondaryPreferred";break;case"n":c="nearest"}return c}},5335:(o,c,l)=>{var u=l(1091);function d(A,f,p){A.$__.activePaths.default(f),!p&&A.$isSubdocument&&A.$isSingleNested&&A.$parent()!=null&&A.$parent().$__.activePaths.default(A.$__pathRelativeToParent(f))}o.exports=function(A,f,p,m,g,b,v){for(var y=Object.keys(A.$__schema.paths),w=y.length,j=v&&v.skipParentChangeTracking,C=0;C<w;++C){var B=void 0,E="",_=y[C];if(_!=="_id"||!A.$__.skipId){var S=A.$__schema.paths[_],N=S.splitPath(),O=N.length;if(N[O-1]!=="$*")for(var k=!1,I=A._doc,R=0;R<O&&I!=null;++R){var Q=N[R];if(E+=(E.length?".":"")+Q,p===!0){if(E in f)break}else if(p===!1&&f&&!k){var $=S.$isSingleNested||S.$isMongooseDocumentArray;if(E in f&&!u(f[E])||R===O-1&&$&&m!=null&&m[E])k=!0;else if(m!=null&&!m[E])break}if(R===O-1){if(I[Q]!==void 0)break;if(g!=null){if(typeof S.defaultValue=="function"){if(!S.defaultValue.$runBeforeSetters&&g||S.defaultValue.$runBeforeSetters&&!g)break}else if(!g)continue}if(b&&b[E])break;if(f&&p!==null){if(p===!0){if(_ in f)continue;try{B=S.getDefault(A,!1)}catch(L){A.invalidate(_,L);break}B!==void 0&&(I[Q]=B,d(A,_,j))}else if(k){try{B=S.getDefault(A,!1)}catch(L){A.invalidate(_,L);break}B!==void 0&&(I[Q]=B,d(A,_,j))}}else{try{B=S.getDefault(A,!1)}catch(L){A.invalidate(_,L);break}B!==void 0&&(I[Q]=B,d(A,_,j))}}else I=I[Q]}}}}},5346:o=>{o.exports=function(c,l,u){for(var d=l[0],A=u,f=c,p=0;p<l.length-1;++p){var m=A.path(d);if(m&&m.schema){var g=f.get(d);if(A=m.schema,d=l[p+1],Array.isArray(g)&&!isNaN(d)&&(g=g[d],d=""),g==null)break;f=g}else d+=d.length?"."+l[p+1]:l[p+1]}return f}},5413:(o,c,l)=>{var u=l(3305),d=l(2402);o.exports=function(A){if(A==null)return A;if(A==="")return null;var f=u(A,"Long")?A.toNumber():Number(A);if(f===(0|f)&&f>=-2147483648&&f<=2147483647)return f;d.ok(!1)}},5477:(o,c,l)=>{var u=l(2354),d=l(3279),A=l(3123),f=l(3388);o.exports=f||u.call(A,d)},5484:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(c(Symbol.iterator)==="symbol")return!0;var l={},u=Symbol("test"),d=Object(u);if(typeof u=="string"||Object.prototype.toString.call(u)!=="[object Symbol]"||Object.prototype.toString.call(d)!=="[object Symbol]")return!1;for(var A in l[u]=42,l)return!1;if(typeof Object.keys=="function"&&Object.keys(l).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(l).length!==0)return!1;var f=Object.getOwnPropertySymbols(l);if(f.length!==1||f[0]!==u||!Object.prototype.propertyIsEnumerable.call(l,u))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var p=Object.getOwnPropertyDescriptor(l,u);if(p.value!==42||p.enumerable!==!0)return!1}return!0}},5497:(o,c,l)=>{var u=l(8260);o.exports=function(d){if(u(d)!=="TopologyDescription")return!1;var A=Array.from(d.servers.values());return A.length>0&&A.every(function(f){return f.error&&f.error.message.indexOf("Client network socket disconnected before secure TLS connection was established")!==-1})}},5510:(o,c,l)=>{function u(f){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},u(f)}var d=typeof Symbol<"u"&&Symbol,A=l(5484);o.exports=function(){return typeof d=="function"&&typeof Symbol=="function"&&u(d("foo"))==="symbol"&&u(Symbol("bar"))==="symbol"&&A()}},5537:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v,y){return(function(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")})(this,g),(function(w,j,C){return j=A(j),(function(B,E){if(E&&(u(E)=="object"||typeof E=="function"))return E;if(E!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _})(B)})(w,d()?Reflect.construct(j,C||[],A(w).constructor):j.apply(w,C))})(this,g,['Cannot create use schema for property "'.concat(v,'" because the schema has the ').concat(y," option enabled.")])}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"InvalidSchemaOptionError"}),o.exports=p},5549:(o,c,l)=>{var u=l(6353).ObjectId,d=l(7930).objectIdSymbol;Object.defineProperty(u.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}),u.prototype.hasOwnProperty("valueOf")||(u.prototype.valueOf=function(){return this.toString()}),u.prototype[d]=!0,o.exports=u},5558:(o,c,l)=>{var u=l(3660);function d(A){return u.cast()(A)}c.G=d,c.p=function A(f,p){f.forEach(function(m,g){Array.isArray(m)?A(m,p):f[g]=d.call(p,m)})}},5678:(o,c,l)=>{o.exports=l(2914)},5761:o=>{o.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})},5782:o=>{function c(l,u){(u==null||u>l.length)&&(u=l.length);for(var d=0,A=Array(u);d<u;d++)A[d]=l[d];return A}o.exports=function(l,u,d){if(l.length===0)return d();var A,f=l.length,p=null,m=(function(g,b){var v=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!v){if(Array.isArray(g)||(v=(function(E,_){if(E){if(typeof E=="string")return c(E,_);var S={}.toString.call(E).slice(8,-1);return S==="Object"&&E.constructor&&(S=E.constructor.name),S==="Map"||S==="Set"?Array.from(E):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?c(E,_):void 0}})(g))||b){v&&(g=v);var y=0,w=function(){};return{s:w,n:function(){return y>=g.length?{done:!0}:{done:!1,value:g[y++]}},e:function(E){throw E},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j,C=!0,B=!1;return{s:function(){v=v.call(g)},n:function(){var E=v.next();return C=E.done,E},e:function(E){B=!0,j=E},f:function(){try{C||v.return==null||v.return()}finally{if(B)throw j}}}})(l);try{for(m.s();!(A=m.n()).done;)u(A.value,function(g){if(p==null)return g!=null?d(p=g):--f<=0?d():void 0})}catch(g){m.e(g)}finally{m.f()}}},5804:(o,c,l)=>{var u=l(2354),d=l(3279),A=l(5477);o.exports=function(){return A(u,d,arguments)}},5807:o=>{o.exports=Object.getOwnPropertyDescriptor},5825:(o,c,l)=>{var u=l(8093);o.exports=u.getPrototypeOf||null},5832:(o,c,l)=>{function u(Z){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},u(Z)}var d=l(6775),A=l(2486),f=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;c.hp=g,c.IS=50;var p=2147483647;function m(Z){if(Z>p)throw new RangeError('The value "'+Z+'" is invalid for option "size"');var te=new Uint8Array(Z);return Object.setPrototypeOf(te,g.prototype),te}function g(Z,te,fe){if(typeof Z=="number"){if(typeof te=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(Z)}return b(Z,te,fe)}function b(Z,te,fe){if(typeof Z=="string")return(function(_e,Ce){if(typeof Ce=="string"&&Ce!==""||(Ce="utf8"),!g.isEncoding(Ce))throw new TypeError("Unknown encoding: "+Ce);var ie=0|B(_e,Ce),me=m(ie),Be=me.write(_e,Ce);return Be!==ie&&(me=me.slice(0,Be)),me})(Z,te);if(ArrayBuffer.isView(Z))return(function(_e){if(ge(_e,Uint8Array)){var Ce=new Uint8Array(_e);return j(Ce.buffer,Ce.byteOffset,Ce.byteLength)}return w(_e)})(Z);if(Z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(Z));if(ge(Z,ArrayBuffer)||Z&&ge(Z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(Z,SharedArrayBuffer)||Z&&ge(Z.buffer,SharedArrayBuffer)))return j(Z,te,fe);if(typeof Z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var we=Z.valueOf&&Z.valueOf();if(we!=null&&we!==Z)return g.from(we,te,fe);var Fe=(function(_e){if(g.isBuffer(_e)){var Ce=0|C(_e.length),ie=m(Ce);return ie.length===0||_e.copy(ie,0,0,Ce),ie}return _e.length!==void 0?typeof _e.length!="number"||he(_e.length)?m(0):w(_e):_e.type==="Buffer"&&Array.isArray(_e.data)?w(_e.data):void 0})(Z);if(Fe)return Fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Z[Symbol.toPrimitive]=="function")return g.from(Z[Symbol.toPrimitive]("string"),te,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(Z))}function v(Z){if(typeof Z!="number")throw new TypeError('"size" argument must be of type number');if(Z<0)throw new RangeError('The value "'+Z+'" is invalid for option "size"')}function y(Z){return v(Z),m(Z<0?0:0|C(Z))}function w(Z){for(var te=Z.length<0?0:0|C(Z.length),fe=m(te),we=0;we<te;we+=1)fe[we]=255&Z[we];return fe}function j(Z,te,fe){if(te<0||Z.byteLength<te)throw new RangeError('"offset" is outside of buffer bounds');if(Z.byteLength<te+(fe||0))throw new RangeError('"length" is outside of buffer bounds');var we;return we=te===void 0&&fe===void 0?new Uint8Array(Z):fe===void 0?new Uint8Array(Z,te):new Uint8Array(Z,te,fe),Object.setPrototypeOf(we,g.prototype),we}function C(Z){if(Z>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|Z}function B(Z,te){if(g.isBuffer(Z))return Z.length;if(ArrayBuffer.isView(Z)||ge(Z,ArrayBuffer))return Z.byteLength;if(typeof Z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(Z));var fe=Z.length,we=arguments.length>2&&arguments[2]===!0;if(!we&&fe===0)return 0;for(var Fe=!1;;)switch(te){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return ae(Z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*fe;case"hex":return fe>>>1;case"base64":return oe(Z).length;default:if(Fe)return we?-1:ae(Z).length;te=(""+te).toLowerCase(),Fe=!0}}function E(Z,te,fe){var we=!1;if((te===void 0||te<0)&&(te=0),te>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0)<=(te>>>=0))return"";for(Z||(Z="utf8");;)switch(Z){case"hex":return q(this,te,fe);case"utf8":case"utf-8":return L(this,te,fe);case"ascii":return G(this,te,fe);case"latin1":case"binary":return X(this,te,fe);case"base64":return $(this,te,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,te,fe);default:if(we)throw new TypeError("Unknown encoding: "+Z);Z=(Z+"").toLowerCase(),we=!0}}function _(Z,te,fe){var we=Z[te];Z[te]=Z[fe],Z[fe]=we}function S(Z,te,fe,we,Fe){if(Z.length===0)return-1;if(typeof fe=="string"?(we=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),he(fe=+fe)&&(fe=Fe?0:Z.length-1),fe<0&&(fe=Z.length+fe),fe>=Z.length){if(Fe)return-1;fe=Z.length-1}else if(fe<0){if(!Fe)return-1;fe=0}if(typeof te=="string"&&(te=g.from(te,we)),g.isBuffer(te))return te.length===0?-1:N(Z,te,fe,we,Fe);if(typeof te=="number")return te&=255,typeof Uint8Array.prototype.indexOf=="function"?Fe?Uint8Array.prototype.indexOf.call(Z,te,fe):Uint8Array.prototype.lastIndexOf.call(Z,te,fe):N(Z,[te],fe,we,Fe);throw new TypeError("val must be string, number or Buffer")}function N(Z,te,fe,we,Fe){var _e,Ce=1,ie=Z.length,me=te.length;if(we!==void 0&&((we=String(we).toLowerCase())==="ucs2"||we==="ucs-2"||we==="utf16le"||we==="utf-16le")){if(Z.length<2||te.length<2)return-1;Ce=2,ie/=2,me/=2,fe/=2}function Be(je,Pe){return Ce===1?je[Pe]:je.readUInt16BE(Pe*Ce)}if(Fe){var Le=-1;for(_e=fe;_e<ie;_e++)if(Be(Z,_e)===Be(te,Le===-1?0:_e-Le)){if(Le===-1&&(Le=_e),_e-Le+1===me)return Le*Ce}else Le!==-1&&(_e-=_e-Le),Le=-1}else for(fe+me>ie&&(fe=ie-me),_e=fe;_e>=0;_e--){for(var ve=!0,$e=0;$e<me;$e++)if(Be(Z,_e+$e)!==Be(te,$e)){ve=!1;break}if(ve)return _e}return-1}function O(Z,te,fe,we){fe=Number(fe)||0;var Fe=Z.length-fe;we?(we=Number(we))>Fe&&(we=Fe):we=Fe;var _e=te.length;we>_e/2&&(we=_e/2);for(var Ce=0;Ce<we;++Ce){var ie=parseInt(te.substr(2*Ce,2),16);if(he(ie))return Ce;Z[fe+Ce]=ie}return Ce}function k(Z,te,fe,we){return be(ae(te,Z.length-fe),Z,fe,we)}function I(Z,te,fe,we){return be((function(Fe){for(var _e=[],Ce=0;Ce<Fe.length;++Ce)_e.push(255&Fe.charCodeAt(Ce));return _e})(te),Z,fe,we)}function R(Z,te,fe,we){return be(oe(te),Z,fe,we)}function Q(Z,te,fe,we){return be((function(Fe,_e){for(var Ce,ie,me,Be=[],Le=0;Le<Fe.length&&!((_e-=2)<0);++Le)ie=(Ce=Fe.charCodeAt(Le))>>8,me=Ce%256,Be.push(me),Be.push(ie);return Be})(te,Z.length-fe),Z,fe,we)}function $(Z,te,fe){return te===0&&fe===Z.length?d.fromByteArray(Z):d.fromByteArray(Z.slice(te,fe))}function L(Z,te,fe){fe=Math.min(Z.length,fe);for(var we=[],Fe=te;Fe<fe;){var _e,Ce,ie,me,Be=Z[Fe],Le=null,ve=Be>239?4:Be>223?3:Be>191?2:1;if(Fe+ve<=fe)switch(ve){case 1:Be<128&&(Le=Be);break;case 2:(192&(_e=Z[Fe+1]))==128&&(me=(31&Be)<<6|63&_e)>127&&(Le=me);break;case 3:_e=Z[Fe+1],Ce=Z[Fe+2],(192&_e)==128&&(192&Ce)==128&&(me=(15&Be)<<12|(63&_e)<<6|63&Ce)>2047&&(me<55296||me>57343)&&(Le=me);break;case 4:_e=Z[Fe+1],Ce=Z[Fe+2],ie=Z[Fe+3],(192&_e)==128&&(192&Ce)==128&&(192&ie)==128&&(me=(15&Be)<<18|(63&_e)<<12|(63&Ce)<<6|63&ie)>65535&&me<1114112&&(Le=me)}Le===null?(Le=65533,ve=1):Le>65535&&(Le-=65536,we.push(Le>>>10&1023|55296),Le=56320|1023&Le),we.push(Le),Fe+=ve}return(function($e){var je=$e.length;if(je<=F)return String.fromCharCode.apply(String,$e);for(var Pe="",Te=0;Te<je;)Pe+=String.fromCharCode.apply(String,$e.slice(Te,Te+=F));return Pe})(we)}g.TYPED_ARRAY_SUPPORT=(function(){try{var Z=new Uint8Array(1),te={foo:function(){return 42}};return Object.setPrototypeOf(te,Uint8Array.prototype),Object.setPrototypeOf(Z,te),Z.foo()===42}catch{return!1}})(),g.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=function(Z,te,fe){return b(Z,te,fe)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(Z,te,fe){return(function(we,Fe,_e){return v(we),we<=0?m(we):Fe!==void 0?typeof _e=="string"?m(we).fill(Fe,_e):m(we).fill(Fe):m(we)})(Z,te,fe)},g.allocUnsafe=function(Z){return y(Z)},g.allocUnsafeSlow=function(Z){return y(Z)},g.isBuffer=function(Z){return Z!=null&&Z._isBuffer===!0&&Z!==g.prototype},g.compare=function(Z,te){if(ge(Z,Uint8Array)&&(Z=g.from(Z,Z.offset,Z.byteLength)),ge(te,Uint8Array)&&(te=g.from(te,te.offset,te.byteLength)),!g.isBuffer(Z)||!g.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Z===te)return 0;for(var fe=Z.length,we=te.length,Fe=0,_e=Math.min(fe,we);Fe<_e;++Fe)if(Z[Fe]!==te[Fe]){fe=Z[Fe],we=te[Fe];break}return fe<we?-1:we<fe?1:0},g.isEncoding=function(Z){switch(String(Z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(Z,te){if(!Array.isArray(Z))throw new TypeError('"list" argument must be an Array of Buffers');if(Z.length===0)return g.alloc(0);var fe;if(te===void 0)for(te=0,fe=0;fe<Z.length;++fe)te+=Z[fe].length;var we=g.allocUnsafe(te),Fe=0;for(fe=0;fe<Z.length;++fe){var _e=Z[fe];if(ge(_e,Uint8Array))Fe+_e.length>we.length?g.from(_e).copy(we,Fe):Uint8Array.prototype.set.call(we,_e,Fe);else{if(!g.isBuffer(_e))throw new TypeError('"list" argument must be an Array of Buffers');_e.copy(we,Fe)}Fe+=_e.length}return we},g.byteLength=B,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var Z=this.length;if(Z%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var te=0;te<Z;te+=2)_(this,te,te+1);return this},g.prototype.swap32=function(){var Z=this.length;if(Z%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var te=0;te<Z;te+=4)_(this,te,te+3),_(this,te+1,te+2);return this},g.prototype.swap64=function(){var Z=this.length;if(Z%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var te=0;te<Z;te+=8)_(this,te,te+7),_(this,te+1,te+6),_(this,te+2,te+5),_(this,te+3,te+4);return this},g.prototype.toString=function(){var Z=this.length;return Z===0?"":arguments.length===0?L(this,0,Z):E.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(Z){if(!g.isBuffer(Z))throw new TypeError("Argument must be a Buffer");return this===Z||g.compare(this,Z)===0},g.prototype.inspect=function(){var Z="",te=c.IS;return Z=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(Z+=" ... "),"<Buffer "+Z+">"},f&&(g.prototype[f]=g.prototype.inspect),g.prototype.compare=function(Z,te,fe,we,Fe){if(ge(Z,Uint8Array)&&(Z=g.from(Z,Z.offset,Z.byteLength)),!g.isBuffer(Z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(Z));if(te===void 0&&(te=0),fe===void 0&&(fe=Z?Z.length:0),we===void 0&&(we=0),Fe===void 0&&(Fe=this.length),te<0||fe>Z.length||we<0||Fe>this.length)throw new RangeError("out of range index");if(we>=Fe&&te>=fe)return 0;if(we>=Fe)return-1;if(te>=fe)return 1;if(this===Z)return 0;for(var _e=(Fe>>>=0)-(we>>>=0),Ce=(fe>>>=0)-(te>>>=0),ie=Math.min(_e,Ce),me=this.slice(we,Fe),Be=Z.slice(te,fe),Le=0;Le<ie;++Le)if(me[Le]!==Be[Le]){_e=me[Le],Ce=Be[Le];break}return _e<Ce?-1:Ce<_e?1:0},g.prototype.includes=function(Z,te,fe){return this.indexOf(Z,te,fe)!==-1},g.prototype.indexOf=function(Z,te,fe){return S(this,Z,te,fe,!0)},g.prototype.lastIndexOf=function(Z,te,fe){return S(this,Z,te,fe,!1)},g.prototype.write=function(Z,te,fe,we){if(te===void 0)we="utf8",fe=this.length,te=0;else if(fe===void 0&&typeof te=="string")we=te,fe=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(fe)?(fe>>>=0,we===void 0&&(we="utf8")):(we=fe,fe=void 0)}var Fe=this.length-te;if((fe===void 0||fe>Fe)&&(fe=Fe),Z.length>0&&(fe<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");we||(we="utf8");for(var _e=!1;;)switch(we){case"hex":return O(this,Z,te,fe);case"utf8":case"utf-8":return k(this,Z,te,fe);case"ascii":case"latin1":case"binary":return I(this,Z,te,fe);case"base64":return R(this,Z,te,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,Z,te,fe);default:if(_e)throw new TypeError("Unknown encoding: "+we);we=(""+we).toLowerCase(),_e=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;function G(Z,te,fe){var we="";fe=Math.min(Z.length,fe);for(var Fe=te;Fe<fe;++Fe)we+=String.fromCharCode(127&Z[Fe]);return we}function X(Z,te,fe){var we="";fe=Math.min(Z.length,fe);for(var Fe=te;Fe<fe;++Fe)we+=String.fromCharCode(Z[Fe]);return we}function q(Z,te,fe){var we=Z.length;(!te||te<0)&&(te=0),(!fe||fe<0||fe>we)&&(fe=we);for(var Fe="",_e=te;_e<fe;++_e)Fe+=ke[Z[_e]];return Fe}function T(Z,te,fe){for(var we=Z.slice(te,fe),Fe="",_e=0;_e<we.length-1;_e+=2)Fe+=String.fromCharCode(we[_e]+256*we[_e+1]);return Fe}function U(Z,te,fe){if(Z%1!=0||Z<0)throw new RangeError("offset is not uint");if(Z+te>fe)throw new RangeError("Trying to access beyond buffer length")}function K(Z,te,fe,we,Fe,_e){if(!g.isBuffer(Z))throw new TypeError('"buffer" argument must be a Buffer instance');if(te>Fe||te<_e)throw new RangeError('"value" argument is out of bounds');if(fe+we>Z.length)throw new RangeError("Index out of range")}function z(Z,te,fe,we,Fe,_e){if(fe+we>Z.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function M(Z,te,fe,we,Fe){return te=+te,fe>>>=0,Fe||z(Z,0,fe,4),A.write(Z,te,fe,we,23,4),fe+4}function H(Z,te,fe,we,Fe){return te=+te,fe>>>=0,Fe||z(Z,0,fe,8),A.write(Z,te,fe,we,52,8),fe+8}g.prototype.slice=function(Z,te){var fe=this.length;(Z=~~Z)<0?(Z+=fe)<0&&(Z=0):Z>fe&&(Z=fe),(te=te===void 0?fe:~~te)<0?(te+=fe)<0&&(te=0):te>fe&&(te=fe),te<Z&&(te=Z);var we=this.subarray(Z,te);return Object.setPrototypeOf(we,g.prototype),we},g.prototype.readUintLE=g.prototype.readUIntLE=function(Z,te,fe){Z>>>=0,te>>>=0,fe||U(Z,te,this.length);for(var we=this[Z],Fe=1,_e=0;++_e<te&&(Fe*=256);)we+=this[Z+_e]*Fe;return we},g.prototype.readUintBE=g.prototype.readUIntBE=function(Z,te,fe){Z>>>=0,te>>>=0,fe||U(Z,te,this.length);for(var we=this[Z+--te],Fe=1;te>0&&(Fe*=256);)we+=this[Z+--te]*Fe;return we},g.prototype.readUint8=g.prototype.readUInt8=function(Z,te){return Z>>>=0,te||U(Z,1,this.length),this[Z]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(Z,te){return Z>>>=0,te||U(Z,2,this.length),this[Z]|this[Z+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(Z,te){return Z>>>=0,te||U(Z,2,this.length),this[Z]<<8|this[Z+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(Z,te){return Z>>>=0,te||U(Z,4,this.length),(this[Z]|this[Z+1]<<8|this[Z+2]<<16)+16777216*this[Z+3]},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(Z,te){return Z>>>=0,te||U(Z,4,this.length),16777216*this[Z]+(this[Z+1]<<16|this[Z+2]<<8|this[Z+3])},g.prototype.readIntLE=function(Z,te,fe){Z>>>=0,te>>>=0,fe||U(Z,te,this.length);for(var we=this[Z],Fe=1,_e=0;++_e<te&&(Fe*=256);)we+=this[Z+_e]*Fe;return we>=(Fe*=128)&&(we-=Math.pow(2,8*te)),we},g.prototype.readIntBE=function(Z,te,fe){Z>>>=0,te>>>=0,fe||U(Z,te,this.length);for(var we=te,Fe=1,_e=this[Z+--we];we>0&&(Fe*=256);)_e+=this[Z+--we]*Fe;return _e>=(Fe*=128)&&(_e-=Math.pow(2,8*te)),_e},g.prototype.readInt8=function(Z,te){return Z>>>=0,te||U(Z,1,this.length),128&this[Z]?-1*(255-this[Z]+1):this[Z]},g.prototype.readInt16LE=function(Z,te){Z>>>=0,te||U(Z,2,this.length);var fe=this[Z]|this[Z+1]<<8;return 32768&fe?4294901760|fe:fe},g.prototype.readInt16BE=function(Z,te){Z>>>=0,te||U(Z,2,this.length);var fe=this[Z+1]|this[Z]<<8;return 32768&fe?4294901760|fe:fe},g.prototype.readInt32LE=function(Z,te){return Z>>>=0,te||U(Z,4,this.length),this[Z]|this[Z+1]<<8|this[Z+2]<<16|this[Z+3]<<24},g.prototype.readInt32BE=function(Z,te){return Z>>>=0,te||U(Z,4,this.length),this[Z]<<24|this[Z+1]<<16|this[Z+2]<<8|this[Z+3]},g.prototype.readFloatLE=function(Z,te){return Z>>>=0,te||U(Z,4,this.length),A.read(this,Z,!0,23,4)},g.prototype.readFloatBE=function(Z,te){return Z>>>=0,te||U(Z,4,this.length),A.read(this,Z,!1,23,4)},g.prototype.readDoubleLE=function(Z,te){return Z>>>=0,te||U(Z,8,this.length),A.read(this,Z,!0,52,8)},g.prototype.readDoubleBE=function(Z,te){return Z>>>=0,te||U(Z,8,this.length),A.read(this,Z,!1,52,8)},g.prototype.writeUintLE=g.prototype.writeUIntLE=function(Z,te,fe,we){Z=+Z,te>>>=0,fe>>>=0,we||K(this,Z,te,fe,Math.pow(2,8*fe)-1,0);var Fe=1,_e=0;for(this[te]=255&Z;++_e<fe&&(Fe*=256);)this[te+_e]=Z/Fe&255;return te+fe},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(Z,te,fe,we){Z=+Z,te>>>=0,fe>>>=0,we||K(this,Z,te,fe,Math.pow(2,8*fe)-1,0);var Fe=fe-1,_e=1;for(this[te+Fe]=255&Z;--Fe>=0&&(_e*=256);)this[te+Fe]=Z/_e&255;return te+fe},g.prototype.writeUint8=g.prototype.writeUInt8=function(Z,te,fe){return Z=+Z,te>>>=0,fe||K(this,Z,te,1,255,0),this[te]=255&Z,te+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(Z,te,fe){return Z=+Z,te>>>=0,fe||K(this,Z,te,2,65535,0),this[te]=255&Z,this[te+1]=Z>>>8,te+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(Z,te,fe){return Z=+Z,te>>>=0,fe||K(this,Z,te,2,65535,0),this[te]=Z>>>8,this[te+1]=255&Z,te+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(Z,te,fe){return Z=+Z,te>>>=0,fe||K(this,Z,te,4,4294967295,0),this[te+3]=Z>>>24,this[te+2]=Z>>>16,this[te+1]=Z>>>8,this[te]=255&Z,te+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(Z,te,fe){return Z=+Z,te>>>=0,fe||K(this,Z,te,4,4294967295,0),this[te]=Z>>>24,this[te+1]=Z>>>16,this[te+2]=Z>>>8,this[te+3]=255&Z,te+4},g.prototype.writeIntLE=function(Z,te,fe,we){if(Z=+Z,te>>>=0,!we){var Fe=Math.pow(2,8*fe-1);K(this,Z,te,fe,Fe-1,-Fe)}var _e=0,Ce=1,ie=0;for(this[te]=255&Z;++_e<fe&&(Ce*=256);)Z<0&&ie===0&&this[te+_e-1]!==0&&(ie=1),this[te+_e]=(Z/Ce|0)-ie&255;return te+fe},g.prototype.writeIntBE=function(Z,te,fe,we){if(Z=+Z,te>>>=0,!we){var Fe=Math.pow(2,8*fe-1);K(this,Z,te,fe,Fe-1,-Fe)}var _e=fe-1,Ce=1,ie=0;for(this[te+_e]=255&Z;--_e>=0&&(Ce*=256);)Z<0&&ie===0&&this[te+_e+1]!==0&&(ie=1),this[te+_e]=(Z/Ce|0)-ie&255;return te+fe},g.prototype.writeInt8=function(Z,te,fe){return Z=+Z,te>>>=0,fe||K(this,Z,te,1,127,-128),Z<0&&(Z=255+Z+1),this[te]=255&Z,te+1},g.prototype.writeInt16LE=function(Z,te,fe){return Z=+Z,te>>>=0,fe||K(this,Z,te,2,32767,-32768),this[te]=255&Z,this[te+1]=Z>>>8,te+2},g.prototype.writeInt16BE=function(Z,te,fe){return Z=+Z,te>>>=0,fe||K(this,Z,te,2,32767,-32768),this[te]=Z>>>8,this[te+1]=255&Z,te+2},g.prototype.writeInt32LE=function(Z,te,fe){return Z=+Z,te>>>=0,fe||K(this,Z,te,4,2147483647,-2147483648),this[te]=255&Z,this[te+1]=Z>>>8,this[te+2]=Z>>>16,this[te+3]=Z>>>24,te+4},g.prototype.writeInt32BE=function(Z,te,fe){return Z=+Z,te>>>=0,fe||K(this,Z,te,4,2147483647,-2147483648),Z<0&&(Z=4294967295+Z+1),this[te]=Z>>>24,this[te+1]=Z>>>16,this[te+2]=Z>>>8,this[te+3]=255&Z,te+4},g.prototype.writeFloatLE=function(Z,te,fe){return M(this,Z,te,!0,fe)},g.prototype.writeFloatBE=function(Z,te,fe){return M(this,Z,te,!1,fe)},g.prototype.writeDoubleLE=function(Z,te,fe){return H(this,Z,te,!0,fe)},g.prototype.writeDoubleBE=function(Z,te,fe){return H(this,Z,te,!1,fe)},g.prototype.copy=function(Z,te,fe,we){if(!g.isBuffer(Z))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),we||we===0||(we=this.length),te>=Z.length&&(te=Z.length),te||(te=0),we>0&&we<fe&&(we=fe),we===fe||Z.length===0||this.length===0)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(we<0)throw new RangeError("sourceEnd out of bounds");we>this.length&&(we=this.length),Z.length-te<we-fe&&(we=Z.length-te+fe);var Fe=we-fe;return this===Z&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(te,fe,we):Uint8Array.prototype.set.call(Z,this.subarray(fe,we),te),Fe},g.prototype.fill=function(Z,te,fe,we){if(typeof Z=="string"){if(typeof te=="string"?(we=te,te=0,fe=this.length):typeof fe=="string"&&(we=fe,fe=this.length),we!==void 0&&typeof we!="string")throw new TypeError("encoding must be a string");if(typeof we=="string"&&!g.isEncoding(we))throw new TypeError("Unknown encoding: "+we);if(Z.length===1){var Fe=Z.charCodeAt(0);(we==="utf8"&&Fe<128||we==="latin1")&&(Z=Fe)}}else typeof Z=="number"?Z&=255:typeof Z=="boolean"&&(Z=Number(Z));if(te<0||this.length<te||this.length<fe)throw new RangeError("Out of range index");if(fe<=te)return this;var _e;if(te>>>=0,fe=fe===void 0?this.length:fe>>>0,Z||(Z=0),typeof Z=="number")for(_e=te;_e<fe;++_e)this[_e]=Z;else{var Ce=g.isBuffer(Z)?Z:g.from(Z,we),ie=Ce.length;if(ie===0)throw new TypeError('The value "'+Z+'" is invalid for argument "value"');for(_e=0;_e<fe-te;++_e)this[_e+te]=Ce[_e%ie]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function ae(Z,te){var fe;te=te||1/0;for(var we=Z.length,Fe=null,_e=[],Ce=0;Ce<we;++Ce){if((fe=Z.charCodeAt(Ce))>55295&&fe<57344){if(!Fe){if(fe>56319){(te-=3)>-1&&_e.push(239,191,189);continue}if(Ce+1===we){(te-=3)>-1&&_e.push(239,191,189);continue}Fe=fe;continue}if(fe<56320){(te-=3)>-1&&_e.push(239,191,189),Fe=fe;continue}fe=65536+(Fe-55296<<10|fe-56320)}else Fe&&(te-=3)>-1&&_e.push(239,191,189);if(Fe=null,fe<128){if((te-=1)<0)break;_e.push(fe)}else if(fe<2048){if((te-=2)<0)break;_e.push(fe>>6|192,63&fe|128)}else if(fe<65536){if((te-=3)<0)break;_e.push(fe>>12|224,fe>>6&63|128,63&fe|128)}else{if(!(fe<1114112))throw new Error("Invalid code point");if((te-=4)<0)break;_e.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,63&fe|128)}}return _e}function oe(Z){return d.toByteArray((function(te){if((te=(te=te.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;te.length%4!=0;)te+="=";return te})(Z))}function be(Z,te,fe,we){for(var Fe=0;Fe<we&&!(Fe+fe>=te.length||Fe>=Z.length);++Fe)te[Fe+fe]=Z[Fe];return Fe}function ge(Z,te){return Z instanceof te||Z!=null&&Z.constructor!=null&&Z.constructor.name!=null&&Z.constructor.name===te.name}function he(Z){return Z!=Z}var ke=(function(){for(var Z="0123456789abcdef",te=new Array(256),fe=0;fe<16;++fe)for(var we=16*fe,Fe=0;Fe<16;++Fe)te[we+Fe]=Z[fe]+Z[Fe];return te})()},5889:(o,c,l)=>{function u(b,v){var y=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!y){if(Array.isArray(b)||(y=d(b))||v){y&&(b=y);var w=0,j=function(){};return{s:j,n:function(){return w>=b.length?{done:!0}:{done:!1,value:b[w++]}},e:function(_){throw _},f:j}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C,B=!0,E=!1;return{s:function(){y=y.call(b)},n:function(){var _=y.next();return B=_.done,_},e:function(_){E=!0,C=_},f:function(){try{B||y.return==null||y.return()}finally{if(E)throw C}}}}function d(b,v){if(b){if(typeof b=="string")return A(b,v);var y={}.toString.call(b).slice(8,-1);return y==="Object"&&b.constructor&&(y=b.constructor.name),y==="Map"||y==="Set"?Array.from(b):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?A(b,v):void 0}}function A(b,v){(v==null||v>b.length)&&(v=b.length);for(var y=0,w=Array(v);y<v;y++)w[y]=b[y];return w}var f=l(7930).arrayAtomicsSymbol,p=l(7930).sessionNewDocuments,m=l(8768);function g(b,v){return b=b||{},v.$pullAll!=null&&(b.$pullAll=(b.$pullAll||[]).concat(v.$pullAll)),v.$push!=null&&(b.$push=b.$push||{},b.$push.$each=(b.$push.$each||[]).concat(v.$push.$each)),v.$addToSet!=null&&(b.$addToSet=(b.$addToSet||[]).concat(v.$addToSet)),v.$set!=null&&(b.$set=Array.isArray(v.$set)?(function(w){if(Array.isArray(w))return A(w)})(y=v.$set)||(function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)})(y)||d(y)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})():Object.assign({},v.$set)),b;var y}o.exports=function(b){b.pre("save",function(){var v=this.$session();if(v!=null&&v.transaction!=null&&v[p]!=null&&!v[p].has(this)){var y={};this.isNew&&(y.isNew=!0),this.$__schema.options.versionKey&&(y.versionKey=this.get(this.$__schema.options.versionKey)),y.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),y.atomics=(function(w,j){var C=new Map;j=j||new Map;var B,E=u(Object.keys(w.$__.activePaths.init).concat(Object.keys(w.$__.activePaths.modify)));try{for(E.s();!(B=E.n()).done;){var _=B.value,S=w.$__getValue(_);if(S!=null&&Array.isArray(S)&&m.isMongooseDocumentArray(S)&&S.length&&S[f]!=null&&Object.keys(S[f]).length!==0){var N=j.get(_)||{};C.set(_,g(N,S[f]))}}}catch(L){E.e(L)}finally{E.f()}var O,k=u(w.$__dirty());try{for(k.s();!(O=k.n()).done;){var I=O.value,R=I.path,Q=I.value;if(Q!=null&&Q[f]!=null&&Object.keys(Q[f]).length!==0){var $=j.get(R)||{};C.set(R,g($,Q[f]))}}}catch(L){k.e(L)}finally{k.f()}return C})(this),v[p].set(this,y)}})}},5899:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}var d=l(953)(),A=l(3071)("Object.prototype.toString"),f=function(g){return!(d&&g&&u(g)==="object"&&Symbol.toStringTag in g)&&A(g)==="[object Arguments]"},p=function(g){return!!f(g)||g!==null&&u(g)==="object"&&"length"in g&&typeof g.length=="number"&&g.length>=0&&A(g)!=="[object Array]"&&"callee"in g&&A(g.callee)==="[object Function]"},m=(function(){return f(arguments)})();f.isLegacyArguments=p,o.exports=m?f:p},5994:(o,c,l)=>{var u=Function.prototype.call,d=Object.prototype.hasOwnProperty,A=l(2354);o.exports=A.call(u,d)},6062:(o,c,l)=>{var u=l(9122),d=l(2273),A=l(118),f=l(4183),p=l(7878),m=u(f(),Number);d(m,{getPolyfill:f,implementation:A,shim:p}),o.exports=m},6140:o=>{function c(l,u,d){return Object.defineProperty(l,"prototype",{writable:!1}),l}o.exports=c(function l(u,d,A){(function(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")})(this,l),this.subdocSnapshot=u,this.activePaths=d,this.version=A})},6155:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(l){for(var u=Object.keys(l),d=!0,A=0,f=u.length;A<f;++A)if(c(l[u[A]])==="object"&&l[u[A]]!==null){d=!1;break}return d}},6182:o=>{function c(l,u){if(l==null)throw new TypeError("Cannot convert first argument to object");for(var d=Object(l),A=1;A<arguments.length;A++){var f=arguments[A];if(f!=null)for(var p=Object.keys(Object(f)),m=0,g=p.length;m<g;m++){var b=p[m],v=Object.getOwnPropertyDescriptor(f,b);v!==void 0&&v.enumerable&&(d[b]=f[b])}}return d}o.exports={assign:c,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:c})}}},6193:(o,c,l)=>{function u(he){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ke){return typeof ke}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke},u(he)}function d(he,ke){return(function(Z){if(Array.isArray(Z))return Z})(he)||(function(Z,te){var fe=[],we=!0,Fe=!1,_e=void 0;try{for(var Ce,ie=Z[Symbol.iterator]();!(we=(Ce=ie.next()).done)&&(fe.push(Ce.value),!te||fe.length!==te);we=!0);}catch(me){Fe=!0,_e=me}finally{try{we||ie.return==null||ie.return()}finally{if(Fe)throw _e}}return fe})(he,ke)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")})()}function A(he){return A=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(ke){return u(ke)}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":u(ke)},A(he)}var f=/a/g.flags!==void 0,p=function(he){var ke=[];return he.forEach(function(Z){return ke.push(Z)}),ke},m=function(he){var ke=[];return he.forEach(function(Z,te){return ke.push([te,Z])}),ke},g=Object.is?Object.is:l(2064),b=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},v=Number.isNaN?Number.isNaN:l(6062);function y(he){return he.call.bind(he)}var w=y(Object.prototype.hasOwnProperty),j=y(Object.prototype.propertyIsEnumerable),C=y(Object.prototype.toString),B=l(7352).types,E=B.isAnyArrayBuffer,_=B.isArrayBufferView,S=B.isDate,N=B.isMap,O=B.isRegExp,k=B.isSet,I=B.isNativeError,R=B.isBoxedPrimitive,Q=B.isNumberObject,$=B.isStringObject,L=B.isBooleanObject,F=B.isBigIntObject,G=B.isSymbolObject,X=B.isFloat32Array,q=B.isFloat64Array;function T(he){if(he.length===0||he.length>10)return!0;for(var ke=0;ke<he.length;ke++){var Z=he.charCodeAt(ke);if(Z<48||Z>57)return!0}return he.length===10&&he>=Math.pow(2,32)}function U(he){return Object.keys(he).filter(T).concat(b(he).filter(Object.prototype.propertyIsEnumerable.bind(he)))}function K(he,ke){if(he===ke)return 0;for(var Z=he.length,te=ke.length,fe=0,we=Math.min(Z,te);fe<we;++fe)if(he[fe]!==ke[fe]){Z=he[fe],te=ke[fe];break}return Z<te?-1:te<Z?1:0}function z(he,ke,Z,te){if(he===ke)return he!==0||!Z||g(he,ke);if(Z){if(A(he)!=="object")return typeof he=="number"&&v(he)&&v(ke);if(A(ke)!=="object"||he===null||ke===null||Object.getPrototypeOf(he)!==Object.getPrototypeOf(ke))return!1}else{if(he===null||A(he)!=="object")return(ke===null||A(ke)!=="object")&&he==ke;if(ke===null||A(ke)!=="object")return!1}var fe,we,Fe,_e,Ce=C(he);if(Ce!==C(ke))return!1;if(Array.isArray(he)){if(he.length!==ke.length)return!1;var ie=U(he),me=U(ke);return ie.length===me.length&&H(he,ke,Z,te,1,ie)}if(Ce==="[object Object]"&&(!N(he)&&N(ke)||!k(he)&&k(ke)))return!1;if(S(he)){if(!S(ke)||Date.prototype.getTime.call(he)!==Date.prototype.getTime.call(ke))return!1}else if(O(he)){if(!O(ke)||(Fe=he,_e=ke,!(f?Fe.source===_e.source&&Fe.flags===_e.flags:RegExp.prototype.toString.call(Fe)===RegExp.prototype.toString.call(_e))))return!1}else if(I(he)||he instanceof Error){if(he.message!==ke.message||he.name!==ke.name)return!1}else{if(_(he)){if(Z||!X(he)&&!q(he)){if(!(function(ve,$e){return ve.byteLength===$e.byteLength&&K(new Uint8Array(ve.buffer,ve.byteOffset,ve.byteLength),new Uint8Array($e.buffer,$e.byteOffset,$e.byteLength))===0})(he,ke))return!1}else if(!(function(ve,$e){if(ve.byteLength!==$e.byteLength)return!1;for(var je=0;je<ve.byteLength;je++)if(ve[je]!==$e[je])return!1;return!0})(he,ke))return!1;var Be=U(he),Le=U(ke);return Be.length===Le.length&&H(he,ke,Z,te,0,Be)}if(k(he))return!(!k(ke)||he.size!==ke.size)&&H(he,ke,Z,te,2);if(N(he))return!(!N(ke)||he.size!==ke.size)&&H(he,ke,Z,te,3);if(E(he)){if(we=ke,(fe=he).byteLength!==we.byteLength||K(new Uint8Array(fe),new Uint8Array(we))!==0)return!1}else if(R(he)&&!(function(ve,$e){return Q(ve)?Q($e)&&g(Number.prototype.valueOf.call(ve),Number.prototype.valueOf.call($e)):$(ve)?$($e)&&String.prototype.valueOf.call(ve)===String.prototype.valueOf.call($e):L(ve)?L($e)&&Boolean.prototype.valueOf.call(ve)===Boolean.prototype.valueOf.call($e):F(ve)?F($e)&&BigInt.prototype.valueOf.call(ve)===BigInt.prototype.valueOf.call($e):G($e)&&Symbol.prototype.valueOf.call(ve)===Symbol.prototype.valueOf.call($e)})(he,ke))return!1}return H(he,ke,Z,te,0)}function M(he,ke){return ke.filter(function(Z){return j(he,Z)})}function H(he,ke,Z,te,fe,we){if(arguments.length===5){we=Object.keys(he);var Fe=Object.keys(ke);if(we.length!==Fe.length)return!1}for(var _e=0;_e<we.length;_e++)if(!w(ke,we[_e]))return!1;if(Z&&arguments.length===5){var Ce=b(he);if(Ce.length!==0){var ie=0;for(_e=0;_e<Ce.length;_e++){var me=Ce[_e];if(j(he,me)){if(!j(ke,me))return!1;we.push(me),ie++}else if(j(ke,me))return!1}var Be=b(ke);if(Ce.length!==Be.length&&M(ke,Be).length!==ie)return!1}else{var Le=b(ke);if(Le.length!==0&&M(ke,Le).length!==0)return!1}}if(we.length===0&&(fe===0||fe===1&&he.length===0||he.size===0))return!0;if(te===void 0)te={val1:new Map,val2:new Map,position:0};else{var ve=te.val1.get(he);if(ve!==void 0){var $e=te.val2.get(ke);if($e!==void 0)return ve===$e}te.position++}te.val1.set(he,te.position),te.val2.set(ke,te.position);var je=(function(Pe,Te,Ye,He,it,It){var dt=0;if(It===2){if(!(function(Jt,Et,ur,vr){for(var Wt=null,Gt=p(Jt),at=0;at<Gt.length;at++){var rn=Gt[at];if(A(rn)==="object"&&rn!==null)Wt===null&&(Wt=new Set),Wt.add(rn);else if(!Et.has(rn)){if(ur||!oe(Jt,Et,rn))return!1;Wt===null&&(Wt=new Set),Wt.add(rn)}}if(Wt!==null){for(var dr=p(Et),et=0;et<dr.length;et++){var an=dr[et];if(A(an)==="object"&&an!==null){if(!Y(Wt,an,ur,vr))return!1}else if(!ur&&!Jt.has(an)&&!Y(Wt,an,ur,vr))return!1}return Wt.size===0}return!0})(Pe,Te,Ye,it))return!1}else if(It===3){if(!(function(Jt,Et,ur,vr){for(var Wt=null,Gt=m(Jt),at=0;at<Gt.length;at++){var rn=d(Gt[at],2),dr=rn[0],et=rn[1];if(A(dr)==="object"&&dr!==null)Wt===null&&(Wt=new Set),Wt.add(dr);else{var an=Et.get(dr);if(an===void 0&&!Et.has(dr)||!z(et,an,ur,vr)){if(ur||!be(Jt,Et,dr,et,vr))return!1;Wt===null&&(Wt=new Set),Wt.add(dr)}}}if(Wt!==null){for(var gr=m(Et),In=0;In<gr.length;In++){var ln=d(gr[In],2),gn=(dr=ln[0],ln[1]);if(A(dr)==="object"&&dr!==null){if(!ge(Wt,Jt,dr,gn,ur,vr))return!1}else if(!(ur||Jt.has(dr)&&z(Jt.get(dr),gn,!1,vr)||ge(Wt,Jt,dr,gn,!1,vr)))return!1}return Wt.size===0}return!0})(Pe,Te,Ye,it))return!1}else if(It===1)for(;dt<Pe.length;dt++){if(!w(Pe,dt)){if(w(Te,dt))return!1;for(var Pt=Object.keys(Pe);dt<Pt.length;dt++){var vt=Pt[dt];if(!w(Te,vt)||!z(Pe[vt],Te[vt],Ye,it))return!1}return Pt.length===Object.keys(Te).length}if(!w(Te,dt)||!z(Pe[dt],Te[dt],Ye,it))return!1}for(dt=0;dt<He.length;dt++){var tr=He[dt];if(!z(Pe[tr],Te[tr],Ye,it))return!1}return!0})(he,ke,Z,we,te,fe);return te.val1.delete(he),te.val2.delete(ke),je}function Y(he,ke,Z,te){for(var fe=p(he),we=0;we<fe.length;we++){var Fe=fe[we];if(z(ke,Fe,Z,te))return he.delete(Fe),!0}return!1}function ae(he){switch(A(he)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":he=+he;case"number":if(v(he))return!1}return!0}function oe(he,ke,Z){var te=ae(Z);return te??(ke.has(te)&&!he.has(te))}function be(he,ke,Z,te,fe){var we=ae(Z);if(we!=null)return we;var Fe=ke.get(we);return!(Fe===void 0&&!ke.has(we)||!z(te,Fe,!1,fe))&&!he.has(we)&&z(te,Fe,!1,fe)}function ge(he,ke,Z,te,fe,we){for(var Fe=p(he),_e=0;_e<Fe.length;_e++){var Ce=Fe[_e];if(z(Z,Ce,fe,we)&&z(te,ke.get(Ce),fe,we))return he.delete(Ce),!0}return!1}o.exports={isDeepEqual:function(he,ke){return z(he,ke,!1)},isDeepStrictEqual:function(he,ke){return z(he,ke,!0)}}},6223:o=>{var c=/\./g;o.exports=function(l){if(l.indexOf(".")===-1)return[l];for(var u=l.split(c),d=u.length,A=new Array(d),f="",p=0;p<d;++p)f+=f.length!==0?"."+u[p]:u[p],A[p]=f;return A}},6312:o=>{function c(u){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},c(u)}var l=Object.prototype.toString;o.exports=function(u){var d=l.call(u),A=d==="[object Arguments]";return A||(A=d!=="[object Array]"&&u!==null&&c(u)==="object"&&typeof u.length=="number"&&u.length>=0&&l.call(u.callee)==="[object Function]"),A}},6353:(o,c,l)=>{l.r(c),l.d(c,{BSON:()=>_i,BSONError:()=>he,BSONOffsetError:()=>te,BSONRegExp:()=>Yt,BSONRuntimeError:()=>Z,BSONSymbol:()=>Vt,BSONType:()=>ge,BSONValue:()=>$e,BSONVersionError:()=>ke,Binary:()=>He,Code:()=>vt,DBRef:()=>Jt,Decimal128:()=>ye,Double:()=>De,EJSON:()=>Ln,Int32:()=>qe,Long:()=>et,MaxKey:()=>Ze,MinKey:()=>ht,ObjectId:()=>ut,Timestamp:()=>cr,UUID:()=>Pt,calculateObjectSize:()=>ki,deserialize:()=>Ra,deserializeStream:()=>ii,onDemand:()=>Gs,serialize:()=>Gi,serializeWithBufferAndIndex:()=>Ma,setInternalBufferSize:()=>si});var u=l(5832).hp;const d=(()=>{const re=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return D=>re.call(D)})();function A(re){return d(re)==="Uint8Array"}function f(re){return typeof re=="object"&&re!=null&&Symbol.toStringTag in re&&(re[Symbol.toStringTag]==="ArrayBuffer"||re[Symbol.toStringTag]==="SharedArrayBuffer")}function p(re){return re instanceof RegExp||Object.prototype.toString.call(re)==="[object RegExp]"}function m(re){return typeof re=="object"&&re!=null&&Symbol.toStringTag in re&&re[Symbol.toStringTag]==="Map"}function g(re){return re instanceof Date||Object.prototype.toString.call(re)==="[object Date]"}function b(re,D){return JSON.stringify(re,(Ae,de)=>typeof de=="bigint"?{$numberLong:`${de}`}:m(de)?Object.fromEntries(de):de)}const v=6,y=Symbol.for("@@mdb.bson.version"),w=2147483647,j=-2147483648,C=Math.pow(2,63)-1,B=-Math.pow(2,63),E=Math.pow(2,53),_=-Math.pow(2,53),S=1,N=2,O=3,k=4,I=5,R=6,Q=7,$=8,L=9,F=10,G=11,X=12,q=13,T=14,U=15,K=16,z=17,M=18,H=19,Y=255,ae=127,oe=0,be=4,ge=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class he extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(D,Ae){super(D,Ae)}static isBSONError(D){return D!=null&&typeof D=="object"&&"bsonError"in D&&D.bsonError===!0&&"name"in D&&"message"in D&&"stack"in D}}class ke extends he{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${v}.x.x`)}}class Z extends he{get name(){return"BSONRuntimeError"}constructor(D){super(D)}}class te extends he{get name(){return"BSONOffsetError"}constructor(D,Ae,de){super(`${D}. offset: ${Ae}`,de),this.offset=Ae}}let fe,we;function Fe(re,D,Ae,de){if(de){fe??=new TextDecoder("utf8",{fatal:!0});try{return fe.decode(re.subarray(D,Ae))}catch(We){throw new he("Invalid UTF-8 string in BSON document",{cause:We})}}return we??=new TextDecoder("utf8",{fatal:!1}),we.decode(re.subarray(D,Ae))}function _e(re,D,Ae){if(re.length===0)return"";const de=Ae-D;if(de===0)return"";if(de>20)return null;if(de===1&&re[D]<128)return String.fromCharCode(re[D]);if(de===2&&re[D]<128&&re[D+1]<128)return String.fromCharCode(re[D])+String.fromCharCode(re[D+1]);if(de===3&&re[D]<128&&re[D+1]<128&&re[D+2]<128)return String.fromCharCode(re[D])+String.fromCharCode(re[D+1])+String.fromCharCode(re[D+2]);const We=[];for(let Ge=D;Ge<Ae;Ge++){const _t=re[Ge];if(_t>127)return null;We.push(_t)}return String.fromCharCode(...We)}const Ce={toLocalBufferType(re){if(u.isBuffer(re))return re;if(ArrayBuffer.isView(re))return u.from(re.buffer,re.byteOffset,re.byteLength);const D=re?.[Symbol.toStringTag]??Object.prototype.toString.call(re);if(D==="ArrayBuffer"||D==="SharedArrayBuffer"||D==="[object ArrayBuffer]"||D==="[object SharedArrayBuffer]")return u.from(re);throw new he("Cannot create Buffer from the passed potentialBuffer.")},allocate:re=>u.alloc(re),allocateUnsafe:re=>u.allocUnsafe(re),equals:(re,D)=>Ce.toLocalBufferType(re).equals(D),fromNumberArray:re=>u.from(re),fromBase64:re=>u.from(re,"base64"),toBase64:re=>Ce.toLocalBufferType(re).toString("base64"),fromISO88591:re=>u.from(re,"binary"),toISO88591:re=>Ce.toLocalBufferType(re).toString("binary"),fromHex:re=>u.from(re,"hex"),toHex:re=>Ce.toLocalBufferType(re).toString("hex"),toUTF8(re,D,Ae,de){const We=Ae-D<=20?_e(re,D,Ae):null;if(We!=null)return We;const Ge=Ce.toLocalBufferType(re).toString("utf8",D,Ae);if(de){for(let _t=0;_t<Ge.length;_t++)if(Ge.charCodeAt(_t)===65533){Fe(re,D,Ae,!0);break}}return Ge},utf8ByteLength:re=>u.byteLength(re,"utf8"),encodeUTF8Into(re,D,Ae){const de=(function(We,Ge,_t){if(Ge.length===0)return 0;if(Ge.length>25||We.length-_t<Ge.length)return null;for(let Nt=0,tt=_t;Nt<Ge.length;Nt++,tt++){const rr=Ge.charCodeAt(Nt);if(rr>127)return null;We[tt]=rr}return Ge.length})(re,D,Ae);return de??Ce.toLocalBufferType(re).write(D,Ae,void 0,"utf8")},randomBytes:function(re){return Ce.fromNumberArray(Array.from({length:re},()=>Math.floor(256*Math.random())))},swap32:re=>Ce.toLocalBufferType(re).swap32()};function ie(re){if(re<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${re}`);return Le.fromNumberArray(Array.from({length:re},()=>Math.floor(256*Math.random())))}const me=(()=>{const{crypto:re}=globalThis;if(re!=null&&typeof re.getRandomValues=="function")return D=>re.getRandomValues(Le.allocate(D));if((function(){const{navigator:D}=globalThis;return typeof D=="object"&&D.product==="ReactNative"})()){const{console:D}=globalThis;D?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return ie})(),Be=/(\d|[a-f])/i,Le={toLocalBufferType(re){const D=re?.[Symbol.toStringTag]??Object.prototype.toString.call(re);if(D==="Uint8Array")return re;if(ArrayBuffer.isView(re))return new Uint8Array(re.buffer.slice(re.byteOffset,re.byteOffset+re.byteLength));if(D==="ArrayBuffer"||D==="SharedArrayBuffer"||D==="[object ArrayBuffer]"||D==="[object SharedArrayBuffer]")return new Uint8Array(re);throw new he("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(re){if(typeof re!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(re)}`);return new Uint8Array(re)},allocateUnsafe:re=>Le.allocate(re),equals(re,D){if(re.byteLength!==D.byteLength)return!1;for(let Ae=0;Ae<re.byteLength;Ae++)if(re[Ae]!==D[Ae])return!1;return!0},fromNumberArray:re=>Uint8Array.from(re),fromBase64:re=>Uint8Array.from(atob(re),D=>D.charCodeAt(0)),toBase64:re=>btoa(Le.toISO88591(re)),fromISO88591:re=>Uint8Array.from(re,D=>255&D.charCodeAt(0)),toISO88591:re=>Array.from(Uint16Array.from(re),D=>String.fromCharCode(D)).join(""),fromHex(re){const D=re.length%2==0?re:re.slice(0,re.length-1),Ae=[];for(let de=0;de<D.length;de+=2){const We=D[de],Ge=D[de+1];if(!Be.test(We)||!Be.test(Ge))break;const _t=Number.parseInt(`${We}${Ge}`,16);Ae.push(_t)}return Uint8Array.from(Ae)},toHex:re=>Array.from(re,D=>D.toString(16).padStart(2,"0")).join(""),toUTF8(re,D,Ae,de){const We=Ae-D<=20?_e(re,D,Ae):null;return We??Fe(re,D,Ae,de)},utf8ByteLength:re=>new TextEncoder().encode(re).byteLength,encodeUTF8Into(re,D,Ae){const de=new TextEncoder().encode(D);return re.set(de,Ae),de.byteLength},randomBytes:me,swap32(re){if(re.length%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let D=0;D<re.length;D+=4){const Ae=re[D],de=re[D+1],We=re[D+2],Ge=re[D+3];re[D]=Ge,re[D+1]=We,re[D+2]=de,re[D+3]=Ae}return re}},ve=typeof u=="function"&&u.prototype?._isBuffer!==!0?Ce:Le;class $e{get[y](){return v}[Symbol.for("nodejs.util.inspect.custom")](D,Ae,de){return this.inspect(D,Ae,de)}}const je=new Float64Array(1),Pe=new Uint8Array(je.buffer,0,8);je[0]=-1;const Te=Pe[7]===0,Ye={isBigEndian:Te,getNonnegativeInt32LE(re,D){if(re[D+3]>127)throw new RangeError(`Size cannot be negative at offset: ${D}`);return re[D]|re[D+1]<<8|re[D+2]<<16|re[D+3]<<24},getInt32LE:(re,D)=>re[D]|re[D+1]<<8|re[D+2]<<16|re[D+3]<<24,getUint32LE:(re,D)=>re[D]+256*re[D+1]+65536*re[D+2]+16777216*re[D+3],getUint32BE:(re,D)=>re[D+3]+256*re[D+2]+65536*re[D+1]+16777216*re[D],getBigInt64LE(re,D){const Ae=BigInt(re[D+4]+256*re[D+5]+65536*re[D+6]+(re[D+7]<<24)),de=BigInt(re[D]+256*re[D+1]+65536*re[D+2]+16777216*re[D+3]);return(Ae<<BigInt(32))+de},getFloat64LE:Te?(re,D)=>(Pe[7]=re[D],Pe[6]=re[D+1],Pe[5]=re[D+2],Pe[4]=re[D+3],Pe[3]=re[D+4],Pe[2]=re[D+5],Pe[1]=re[D+6],Pe[0]=re[D+7],je[0]):(re,D)=>(Pe[0]=re[D],Pe[1]=re[D+1],Pe[2]=re[D+2],Pe[3]=re[D+3],Pe[4]=re[D+4],Pe[5]=re[D+5],Pe[6]=re[D+6],Pe[7]=re[D+7],je[0]),setInt32BE:(re,D,Ae)=>(re[D+3]=Ae,Ae>>>=8,re[D+2]=Ae,Ae>>>=8,re[D+1]=Ae,Ae>>>=8,re[D]=Ae,4),setInt32LE:(re,D,Ae)=>(re[D]=Ae,Ae>>>=8,re[D+1]=Ae,Ae>>>=8,re[D+2]=Ae,Ae>>>=8,re[D+3]=Ae,4),setBigInt64LE(re,D,Ae){const de=BigInt(4294967295);let We=Number(Ae&de);re[D]=We,We>>=8,re[D+1]=We,We>>=8,re[D+2]=We,We>>=8,re[D+3]=We;let Ge=Number(Ae>>BigInt(32)&de);return re[D+4]=Ge,Ge>>=8,re[D+5]=Ge,Ge>>=8,re[D+6]=Ge,Ge>>=8,re[D+7]=Ge,8},setFloat64LE:Te?(re,D,Ae)=>(je[0]=Ae,re[D]=Pe[7],re[D+1]=Pe[6],re[D+2]=Pe[5],re[D+3]=Pe[4],re[D+4]=Pe[3],re[D+5]=Pe[2],re[D+6]=Pe[1],re[D+7]=Pe[0],8):(re,D,Ae)=>(je[0]=Ae,re[D]=Pe[0],re[D+1]=Pe[1],re[D+2]=Pe[2],re[D+3]=Pe[3],re[D+4]=Pe[4],re[D+5]=Pe[5],re[D+6]=Pe[6],re[D+7]=Pe[7],8)};class He extends $e{get _bsontype(){return"Binary"}constructor(D,Ae){if(super(),D!=null&&typeof D=="string"&&!ArrayBuffer.isView(D)&&!f(D)&&!Array.isArray(D))throw new he("Binary can only be constructed from Uint8Array or number[]");this.sub_type=Ae??He.BSON_BINARY_SUBTYPE_DEFAULT,D==null?(this.buffer=ve.allocate(He.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(D)?ve.fromNumberArray(D):ve.toLocalBufferType(D),this.position=this.buffer.byteLength)}put(D){if(typeof D=="string"&&D.length!==1)throw new he("only accepts single character String");if(typeof D!="number"&&D.length!==1)throw new he("only accepts single character Uint8Array or Array");let Ae;if(Ae=typeof D=="string"?D.charCodeAt(0):typeof D=="number"?D:D[0],Ae<0||Ae>255)throw new he("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=Ae;else{const de=ve.allocate(He.BUFFER_SIZE+this.buffer.length);de.set(this.buffer,0),this.buffer=de,this.buffer[this.position++]=Ae}}write(D,Ae){if(Ae=typeof Ae=="number"?Ae:this.position,this.buffer.byteLength<Ae+D.length){const de=ve.allocate(this.buffer.byteLength+D.length);de.set(this.buffer,0),this.buffer=de}if(ArrayBuffer.isView(D))this.buffer.set(ve.toLocalBufferType(D),Ae),this.position=Ae+D.byteLength>this.position?Ae+D.length:this.position;else if(typeof D=="string")throw new he("input cannot be string")}read(D,Ae){const de=D+(Ae=Ae&&Ae>0?Ae:this.position);return this.buffer.subarray(D,de>this.position?this.position:de)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return ve.toBase64(this.buffer.subarray(0,this.position))}toString(D){return D==="hex"?ve.toHex(this.buffer.subarray(0,this.position)):D==="base64"?ve.toBase64(this.buffer.subarray(0,this.position)):ve.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(D){D=D||{},this.sub_type===He.SUBTYPE_VECTOR&&it(this);const Ae=ve.toBase64(this.buffer),de=Number(this.sub_type).toString(16);return D.legacy?{$binary:Ae,$type:de.length===1?"0"+de:de}:{$binary:{base64:Ae,subType:de.length===1?"0"+de:de}}}toUUID(){if(this.sub_type===He.SUBTYPE_UUID)return new Pt(this.buffer.subarray(0,this.position));throw new he(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${He.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(D,Ae){return new He(ve.fromHex(D),Ae)}static createFromBase64(D,Ae){return new He(ve.fromBase64(D),Ae)}static fromExtendedJSON(D,Ae){let de,We;if(Ae=Ae||{},"$binary"in D?Ae.legacy&&typeof D.$binary=="string"&&"$type"in D?(We=D.$type?parseInt(D.$type,16):0,de=ve.fromBase64(D.$binary)):typeof D.$binary!="string"&&(We=D.$binary.subType?parseInt(D.$binary.subType,16):0,de=ve.fromBase64(D.$binary.base64)):"$uuid"in D&&(We=4,de=Pt.bytesFromString(D.$uuid)),!de)throw new he(`Unexpected Binary Extended JSON format ${JSON.stringify(D)}`);return We===be?new Pt(de):new He(de,We)}inspect(D,Ae,de){return de??=b,`Binary.createFromBase64(${de(ve.toBase64(this.buffer.subarray(0,this.position)),Ae)}, ${de(this.sub_type,Ae)})`}toInt8Array(){if(this.sub_type!==He.SUBTYPE_VECTOR)throw new he("Binary sub_type is not Vector");if(this.buffer[0]!==He.VECTOR_TYPE.Int8)throw new he("Binary datatype field is not Int8");return it(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==He.SUBTYPE_VECTOR)throw new he("Binary sub_type is not Vector");if(this.buffer[0]!==He.VECTOR_TYPE.Float32)throw new he("Binary datatype field is not Float32");it(this);const D=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return Ye.isBigEndian&&ve.swap32(D),new Float32Array(D.buffer)}toPackedBits(){if(this.sub_type!==He.SUBTYPE_VECTOR)throw new he("Binary sub_type is not Vector");if(this.buffer[0]!==He.VECTOR_TYPE.PackedBit)throw new he("Binary datatype field is not packed bit");return it(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==He.SUBTYPE_VECTOR)throw new he("Binary sub_type is not Vector");if(this.buffer[0]!==He.VECTOR_TYPE.PackedBit)throw new he("Binary datatype field is not packed bit");it(this);const D=8*(this.length()-2)-this.buffer[1],Ae=new Int8Array(D);for(let de=0;de<Ae.length;de++){const We=de/8|0,Ge=this.buffer[We+2]>>7-de%8&1;Ae[de]=Ge}return Ae}static fromInt8Array(D){const Ae=ve.allocate(D.byteLength+2);Ae[0]=He.VECTOR_TYPE.Int8,Ae[1]=0;const de=new Uint8Array(D.buffer,D.byteOffset,D.byteLength);Ae.set(de,2);const We=new this(Ae,this.SUBTYPE_VECTOR);return it(We),We}static fromFloat32Array(D){const Ae=ve.allocate(D.byteLength+2);Ae[0]=He.VECTOR_TYPE.Float32,Ae[1]=0;const de=new Uint8Array(D.buffer,D.byteOffset,D.byteLength);Ae.set(de,2),Ye.isBigEndian&&ve.swap32(new Uint8Array(Ae.buffer,2));const We=new this(Ae,this.SUBTYPE_VECTOR);return it(We),We}static fromPackedBits(D,Ae=0){const de=ve.allocate(D.byteLength+2);de[0]=He.VECTOR_TYPE.PackedBit,de[1]=Ae,de.set(D,2);const We=new this(de,this.SUBTYPE_VECTOR);return it(We),We}static fromBits(D){const Ae=D.length+7>>>3,de=new Uint8Array(Ae+2);de[0]=He.VECTOR_TYPE.PackedBit;const We=D.length%8;de[1]=We===0?0:8-We;for(let Ge=0;Ge<D.length;Ge++){const _t=Ge>>>3,Nt=D[Ge];if(Nt!==0&&Nt!==1)throw new he(`Invalid bit value at ${Ge}: must be 0 or 1, found ${D[Ge]}`);if(Nt===0)continue;const tt=7-Ge%8;de[_t+2]|=Nt<<tt}return new this(de,He.SUBTYPE_VECTOR)}}function it(re){if(re.sub_type!==He.SUBTYPE_VECTOR)return;const D=re.position,Ae=re.buffer[0],de=re.buffer[1];if((Ae===He.VECTOR_TYPE.Float32||Ae===He.VECTOR_TYPE.Int8)&&de!==0)throw new he("Invalid Vector: padding must be zero for int8 and float32 vectors");if(Ae===He.VECTOR_TYPE.Float32&&D!==0&&D-2!=0&&(D-2)%4!=0)throw new he("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(Ae===He.VECTOR_TYPE.PackedBit&&de!==0&&D===2)throw new he("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(Ae===He.VECTOR_TYPE.PackedBit&&de>7)throw new he(`Invalid Vector: padding must be a value between 0 and 7. found: ${de}`)}He.BSON_BINARY_SUBTYPE_DEFAULT=0,He.BUFFER_SIZE=256,He.SUBTYPE_DEFAULT=0,He.SUBTYPE_FUNCTION=1,He.SUBTYPE_BYTE_ARRAY=2,He.SUBTYPE_UUID_OLD=3,He.SUBTYPE_UUID=4,He.SUBTYPE_MD5=5,He.SUBTYPE_ENCRYPTED=6,He.SUBTYPE_COLUMN=7,He.SUBTYPE_SENSITIVE=8,He.SUBTYPE_VECTOR=9,He.SUBTYPE_USER_DEFINED=128,He.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});const It=/^[0-9A-F]{32}$/i,dt=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class Pt extends He{constructor(D){let Ae;if(D==null)Ae=Pt.generate();else if(D instanceof Pt)Ae=ve.toLocalBufferType(new Uint8Array(D.buffer));else if(ArrayBuffer.isView(D)&&D.byteLength===16)Ae=ve.toLocalBufferType(D);else{if(typeof D!="string")throw new he("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");Ae=Pt.bytesFromString(D)}super(Ae,be)}get id(){return this.buffer}set id(D){this.buffer=D}toHexString(D=!0){return D?[ve.toHex(this.buffer.subarray(0,4)),ve.toHex(this.buffer.subarray(4,6)),ve.toHex(this.buffer.subarray(6,8)),ve.toHex(this.buffer.subarray(8,10)),ve.toHex(this.buffer.subarray(10,16))].join("-"):ve.toHex(this.buffer)}toString(D){return D==="hex"?ve.toHex(this.id):D==="base64"?ve.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(D){if(!D)return!1;if(D instanceof Pt)return ve.equals(D.id,this.id);try{return ve.equals(new Pt(D).id,this.id)}catch{return!1}}toBinary(){return new He(this.id,He.SUBTYPE_UUID)}static generate(){const D=ve.randomBytes(16);return D[6]=15&D[6]|64,D[8]=63&D[8]|128,D}static isValid(D){return!!D&&(typeof D=="string"?Pt.isValidUUIDString(D):A(D)?D.byteLength===16:D._bsontype==="Binary"&&D.sub_type===this.SUBTYPE_UUID&&D.buffer.byteLength===16)}static createFromHexString(D){const Ae=Pt.bytesFromString(D);return new Pt(Ae)}static createFromBase64(D){return new Pt(ve.fromBase64(D))}static bytesFromString(D){if(!Pt.isValidUUIDString(D))throw new he("UUID string representation must be 32 hex digits or canonical hyphenated representation");return ve.fromHex(D.replace(/-/g,""))}static isValidUUIDString(D){return It.test(D)||dt.test(D)}inspect(D,Ae,de){return de??=b,`new UUID(${de(this.toHexString(),Ae)})`}}class vt extends $e{get _bsontype(){return"Code"}constructor(D,Ae){super(),this.code=D.toString(),this.scope=Ae??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(D){return new vt(D.$code,D.$scope)}inspect(D,Ae,de){de??=b;let We=de(this.code,Ae);const Ge=We.includes(`
`);return this.scope!=null&&(We+=`,${Ge?`
`:" "}${de(this.scope,Ae)}`),`new Code(${Ge?`
`:""}${We}${Ge&&this.scope===null?`
`:""})`}}function tr(re){return re!=null&&typeof re=="object"&&"$id"in re&&re.$id!=null&&"$ref"in re&&typeof re.$ref=="string"&&(!("$db"in re)||"$db"in re&&typeof re.$db=="string")}class Jt extends $e{get _bsontype(){return"DBRef"}constructor(D,Ae,de,We){super();const Ge=D.split(".");Ge.length===2&&(de=Ge.shift(),D=Ge.shift()),this.collection=D,this.oid=Ae,this.db=de,this.fields=We||{}}get namespace(){return this.collection}set namespace(D){this.collection=D}toJSON(){const D=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(D.$db=this.db),D}toExtendedJSON(D){D=D||{};let Ae={$ref:this.collection,$id:this.oid};return D.legacy||(this.db&&(Ae.$db=this.db),Ae=Object.assign(Ae,this.fields)),Ae}static fromExtendedJSON(D){const Ae=Object.assign({},D);return delete Ae.$ref,delete Ae.$id,delete Ae.$db,new Jt(D.$ref,D.$id,D.$db,Ae)}inspect(D,Ae,de){de??=b;const We=[de(this.namespace,Ae),de(this.oid,Ae),...this.db?[de(this.db,Ae)]:[],...Object.keys(this.fields).length>0?[de(this.fields,Ae)]:[]];return We[1]=de===b?`new ObjectId(${We[1]})`:We[1],`new DBRef(${We.join(", ")})`}}function Et(re){if(re==="")return re;let D=0;const Ae=re[D]==="-",de=re[D]==="+";(de||Ae)&&(D+=1);let We=!1;for(;D<re.length&&re[D]==="0";++D)We=!0;return We?`${Ae?"-":""}${re.length===D?"0":re.slice(D)}`:de?re.slice(1):re}let ur;try{ur=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}const vr=4294967296,Wt=18446744073709552e3,Gt=Wt/2,at={},rn={},dr=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class et extends $e{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(D=0,Ae,de){super();const We=typeof Ae=="boolean"?Ae:!!de,Ge=typeof Ae=="number"?Ae:0,_t=typeof D=="string"?et.fromString(D,We):typeof D=="bigint"?et.fromBigInt(D,We):{low:0|D,high:0|Ge,unsigned:We};this.low=_t.low,this.high=_t.high,this.unsigned=_t.unsigned}static fromBits(D,Ae,de){return new et(D,Ae,de)}static fromInt(D,Ae){let de,We,Ge;return Ae?(Ge=0<=(D>>>=0)&&D<256)&&(We=rn[D],We)?We:(de=et.fromBits(D,(0|D)<0?-1:0,!0),Ge&&(rn[D]=de),de):(Ge=-128<=(D|=0)&&D<128)&&(We=at[D],We)?We:(de=et.fromBits(D,D<0?-1:0,!1),Ge&&(at[D]=de),de)}static fromNumber(D,Ae){if(isNaN(D))return Ae?et.UZERO:et.ZERO;if(Ae){if(D<0)return et.UZERO;if(D>=Wt)return et.MAX_UNSIGNED_VALUE}else{if(D<=-9223372036854776e3)return et.MIN_VALUE;if(D+1>=Gt)return et.MAX_VALUE}return D<0?et.fromNumber(-D,Ae).neg():et.fromBits(D%vr|0,D/vr|0,Ae)}static fromBigInt(D,Ae){const de=BigInt(4294967295),We=BigInt(32);return new et(Number(D&de),Number(D>>We&de),Ae)}static _fromString(D,Ae,de){if(D.length===0)throw new he("empty string");if(de<2||36<de)throw new he("radix");let We;if((We=D.indexOf("-"))>0)throw new he("interior hyphen");if(We===0)return et._fromString(D.substring(1),Ae,de).neg();const Ge=et.fromNumber(Math.pow(de,8));let _t=et.ZERO;for(let Nt=0;Nt<D.length;Nt+=8){const tt=Math.min(8,D.length-Nt),rr=parseInt(D.substring(Nt,Nt+tt),de);if(tt<8){const zt=et.fromNumber(Math.pow(de,tt));_t=_t.mul(zt).add(et.fromNumber(rr))}else _t=_t.mul(Ge),_t=_t.add(et.fromNumber(rr))}return _t.unsigned=Ae,_t}static fromStringStrict(D,Ae,de){let We=!1;if(typeof Ae=="number"?(de=Ae,Ae=!1):We=!!Ae,de??=10,D.trim()!==D)throw new he(`Input: '${D}' contains leading and/or trailing whitespace`);if(!(function(Nt,tt){const rr="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,tt=tt??10);return!new RegExp(`[^-+${rr}]`,"i").test(Nt)&&Nt})(D,de))throw new he(`Input: '${D}' contains invalid characters for radix: ${de}`);const Ge=Et(D),_t=et._fromString(Ge,We,de);if(_t.toString(de).toLowerCase()!==Ge.toLowerCase())throw new he(`Input: ${D} is not representable as ${_t.unsigned?"an unsigned":"a signed"} 64-bit Long ${de!=null?`with radix: ${de}`:""}`);return _t}static fromString(D,Ae,de){let We=!1;return typeof Ae=="number"?(de=Ae,Ae=!1):We=!!Ae,de??=10,D==="NaN"&&de<24||(D==="Infinity"||D==="+Infinity"||D==="-Infinity")&&de<35?et.ZERO:et._fromString(D,We,de)}static fromBytes(D,Ae,de){return de?et.fromBytesLE(D,Ae):et.fromBytesBE(D,Ae)}static fromBytesLE(D,Ae){return new et(D[0]|D[1]<<8|D[2]<<16|D[3]<<24,D[4]|D[5]<<8|D[6]<<16|D[7]<<24,Ae)}static fromBytesBE(D,Ae){return new et(D[4]<<24|D[5]<<16|D[6]<<8|D[7],D[0]<<24|D[1]<<16|D[2]<<8|D[3],Ae)}static isLong(D){return D!=null&&typeof D=="object"&&"__isLong__"in D&&D.__isLong__===!0}static fromValue(D,Ae){return typeof D=="number"?et.fromNumber(D,Ae):typeof D=="string"?et.fromString(D,Ae):et.fromBits(D.low,D.high,typeof Ae=="boolean"?Ae:D.unsigned)}add(D){et.isLong(D)||(D=et.fromValue(D));const Ae=this.high>>>16,de=65535&this.high,We=this.low>>>16,Ge=65535&this.low,_t=D.high>>>16,Nt=65535&D.high,tt=D.low>>>16;let rr=0,zt=0,xt=0,Lt=0;return Lt+=Ge+(65535&D.low),xt+=Lt>>>16,Lt&=65535,xt+=We+tt,zt+=xt>>>16,xt&=65535,zt+=de+Nt,rr+=zt>>>16,zt&=65535,rr+=Ae+_t,rr&=65535,et.fromBits(xt<<16|Lt,rr<<16|zt,this.unsigned)}and(D){return et.isLong(D)||(D=et.fromValue(D)),et.fromBits(this.low&D.low,this.high&D.high,this.unsigned)}compare(D){if(et.isLong(D)||(D=et.fromValue(D)),this.eq(D))return 0;const Ae=this.isNegative(),de=D.isNegative();return Ae&&!de?-1:!Ae&&de?1:this.unsigned?D.high>>>0>this.high>>>0||D.high===this.high&&D.low>>>0>this.low>>>0?-1:1:this.sub(D).isNegative()?-1:1}comp(D){return this.compare(D)}divide(D){if(et.isLong(D)||(D=et.fromValue(D)),D.isZero())throw new he("division by zero");if(ur){if(!this.unsigned&&this.high===-2147483648&&D.low===-1&&D.high===-1)return this;const Ge=(this.unsigned?ur.div_u:ur.div_s)(this.low,this.high,D.low,D.high);return et.fromBits(Ge,ur.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?et.UZERO:et.ZERO;let Ae,de,We;if(this.unsigned){if(D.unsigned||(D=D.toUnsigned()),D.gt(this))return et.UZERO;if(D.gt(this.shru(1)))return et.UONE;We=et.UZERO}else{if(this.eq(et.MIN_VALUE))return D.eq(et.ONE)||D.eq(et.NEG_ONE)?et.MIN_VALUE:D.eq(et.MIN_VALUE)?et.ONE:(Ae=this.shr(1).div(D).shl(1),Ae.eq(et.ZERO)?D.isNegative()?et.ONE:et.NEG_ONE:(de=this.sub(D.mul(Ae)),We=Ae.add(de.div(D)),We));if(D.eq(et.MIN_VALUE))return this.unsigned?et.UZERO:et.ZERO;if(this.isNegative())return D.isNegative()?this.neg().div(D.neg()):this.neg().div(D).neg();if(D.isNegative())return this.div(D.neg()).neg();We=et.ZERO}for(de=this;de.gte(D);){Ae=Math.max(1,Math.floor(de.toNumber()/D.toNumber()));const Ge=Math.ceil(Math.log(Ae)/Math.LN2),_t=Ge<=48?1:Math.pow(2,Ge-48);let Nt=et.fromNumber(Ae),tt=Nt.mul(D);for(;tt.isNegative()||tt.gt(de);)Ae-=_t,Nt=et.fromNumber(Ae,this.unsigned),tt=Nt.mul(D);Nt.isZero()&&(Nt=et.ONE),We=We.add(Nt),de=de.sub(tt)}return We}div(D){return this.divide(D)}equals(D){return et.isLong(D)||(D=et.fromValue(D)),(this.unsigned===D.unsigned||this.high>>>31!=1||D.high>>>31!=1)&&this.high===D.high&&this.low===D.low}eq(D){return this.equals(D)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(et.MIN_VALUE)?64:this.neg().getNumBitsAbs();const D=this.high!==0?this.high:this.low;let Ae;for(Ae=31;Ae>0&&!(D&1<<Ae);Ae--);return this.high!==0?Ae+33:Ae+1}greaterThan(D){return this.comp(D)>0}gt(D){return this.greaterThan(D)}greaterThanOrEqual(D){return this.comp(D)>=0}gte(D){return this.greaterThanOrEqual(D)}ge(D){return this.greaterThanOrEqual(D)}isEven(){return!(1&this.low)}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return!(1&~this.low)}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(D){return this.comp(D)<0}lt(D){return this.lessThan(D)}lessThanOrEqual(D){return this.comp(D)<=0}lte(D){return this.lessThanOrEqual(D)}modulo(D){if(et.isLong(D)||(D=et.fromValue(D)),ur){const Ae=(this.unsigned?ur.rem_u:ur.rem_s)(this.low,this.high,D.low,D.high);return et.fromBits(Ae,ur.get_high(),this.unsigned)}return this.sub(this.div(D).mul(D))}mod(D){return this.modulo(D)}rem(D){return this.modulo(D)}multiply(D){if(this.isZero())return et.ZERO;if(et.isLong(D)||(D=et.fromValue(D)),ur){const xe=ur.mul(this.low,this.high,D.low,D.high);return et.fromBits(xe,ur.get_high(),this.unsigned)}if(D.isZero())return et.ZERO;if(this.eq(et.MIN_VALUE))return D.isOdd()?et.MIN_VALUE:et.ZERO;if(D.eq(et.MIN_VALUE))return this.isOdd()?et.MIN_VALUE:et.ZERO;if(this.isNegative())return D.isNegative()?this.neg().mul(D.neg()):this.neg().mul(D).neg();if(D.isNegative())return this.mul(D.neg()).neg();if(this.lt(et.TWO_PWR_24)&&D.lt(et.TWO_PWR_24))return et.fromNumber(this.toNumber()*D.toNumber(),this.unsigned);const Ae=this.high>>>16,de=65535&this.high,We=this.low>>>16,Ge=65535&this.low,_t=D.high>>>16,Nt=65535&D.high,tt=D.low>>>16,rr=65535&D.low;let zt=0,xt=0,Lt=0,ne=0;return ne+=Ge*rr,Lt+=ne>>>16,ne&=65535,Lt+=We*rr,xt+=Lt>>>16,Lt&=65535,Lt+=Ge*tt,xt+=Lt>>>16,Lt&=65535,xt+=de*rr,zt+=xt>>>16,xt&=65535,xt+=We*tt,zt+=xt>>>16,xt&=65535,xt+=Ge*Nt,zt+=xt>>>16,xt&=65535,zt+=Ae*rr+de*tt+We*Nt+Ge*_t,zt&=65535,et.fromBits(Lt<<16|ne,zt<<16|xt,this.unsigned)}mul(D){return this.multiply(D)}negate(){return!this.unsigned&&this.eq(et.MIN_VALUE)?et.MIN_VALUE:this.not().add(et.ONE)}neg(){return this.negate()}not(){return et.fromBits(~this.low,~this.high,this.unsigned)}notEquals(D){return!this.equals(D)}neq(D){return this.notEquals(D)}ne(D){return this.notEquals(D)}or(D){return et.isLong(D)||(D=et.fromValue(D)),et.fromBits(this.low|D.low,this.high|D.high,this.unsigned)}shiftLeft(D){return et.isLong(D)&&(D=D.toInt()),(D&=63)==0?this:D<32?et.fromBits(this.low<<D,this.high<<D|this.low>>>32-D,this.unsigned):et.fromBits(0,this.low<<D-32,this.unsigned)}shl(D){return this.shiftLeft(D)}shiftRight(D){return et.isLong(D)&&(D=D.toInt()),(D&=63)==0?this:D<32?et.fromBits(this.low>>>D|this.high<<32-D,this.high>>D,this.unsigned):et.fromBits(this.high>>D-32,this.high>=0?0:-1,this.unsigned)}shr(D){return this.shiftRight(D)}shiftRightUnsigned(D){if(et.isLong(D)&&(D=D.toInt()),(D&=63)==0)return this;{const Ae=this.high;if(D<32){const de=this.low;return et.fromBits(de>>>D|Ae<<32-D,Ae>>>D,this.unsigned)}return D===32?et.fromBits(Ae,0,this.unsigned):et.fromBits(Ae>>>D-32,0,this.unsigned)}}shr_u(D){return this.shiftRightUnsigned(D)}shru(D){return this.shiftRightUnsigned(D)}subtract(D){return et.isLong(D)||(D=et.fromValue(D)),this.add(D.neg())}sub(D){return this.subtract(D)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*vr+(this.low>>>0):this.high*vr+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(D){return D?this.toBytesLE():this.toBytesBE()}toBytesLE(){const D=this.high,Ae=this.low;return[255&Ae,Ae>>>8&255,Ae>>>16&255,Ae>>>24,255&D,D>>>8&255,D>>>16&255,D>>>24]}toBytesBE(){const D=this.high,Ae=this.low;return[D>>>24,D>>>16&255,D>>>8&255,255&D,Ae>>>24,Ae>>>16&255,Ae>>>8&255,255&Ae]}toSigned(){return this.unsigned?et.fromBits(this.low,this.high,!1):this}toString(D){if((D=D||10)<2||36<D)throw new he("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(et.MIN_VALUE)){const Ge=et.fromNumber(D),_t=this.div(Ge),Nt=_t.mul(Ge).sub(this);return _t.toString(D)+Nt.toInt().toString(D)}return"-"+this.neg().toString(D)}const Ae=et.fromNumber(Math.pow(D,6),this.unsigned);let de=this,We="";for(;;){const Ge=de.div(Ae);let _t=(de.sub(Ge.mul(Ae)).toInt()>>>0).toString(D);if(de=Ge,de.isZero())return _t+We;for(;_t.length<6;)_t="0"+_t;We=""+_t+We}}toUnsigned(){return this.unsigned?this:et.fromBits(this.low,this.high,!0)}xor(D){return et.isLong(D)||(D=et.fromValue(D)),et.fromBits(this.low^D.low,this.high^D.high,this.unsigned)}eqz(){return this.isZero()}le(D){return this.lessThanOrEqual(D)}toExtendedJSON(D){return D&&D.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(D,Ae){const{useBigInt64:de=!1,relaxed:We=!0}={...Ae};if(D.$numberLong.length>20)throw new he("$numberLong string is too long");if(!dr.test(D.$numberLong))throw new he(`$numberLong string "${D.$numberLong}" is in an invalid format`);if(de){const _t=BigInt(D.$numberLong);return BigInt.asIntN(64,_t)}const Ge=et.fromString(D.$numberLong);return We?Ge.toNumber():Ge}inspect(D,Ae,de){return de??=b,`new Long(${de(this.toString(),Ae)}${this.unsigned?`, ${de(this.unsigned,Ae)}`:""})`}}et.TWO_PWR_24=et.fromInt(16777216),et.MAX_UNSIGNED_VALUE=et.fromBits(-1,-1,!0),et.ZERO=et.fromInt(0),et.UZERO=et.fromInt(0,!0),et.ONE=et.fromInt(1),et.UONE=et.fromInt(1,!0),et.NEG_ONE=et.fromInt(-1),et.MAX_VALUE=et.fromBits(-1,2147483647,!1),et.MIN_VALUE=et.fromBits(0,-2147483648,!1);const an=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,gr=/^(\+|-)?(Infinity|inf)$/i,In=/^(\+|-)?NaN$/i,ln=6111,gn=-6176,Yn=ve.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Gr=ve.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Sn=ve.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),ce=/^([-+])?(\d+)?$/;function Ne(re){return!isNaN(parseInt(re,10))}function Re(re){const D=et.fromNumber(1e9);let Ae=et.fromNumber(0);if(!(re.parts[0]||re.parts[1]||re.parts[2]||re.parts[3]))return{quotient:re,rem:Ae};for(let de=0;de<=3;de++)Ae=Ae.shiftLeft(32),Ae=Ae.add(new et(re.parts[de],0)),re.parts[de]=Ae.div(D).low,Ae=Ae.modulo(D);return{quotient:re,rem:Ae}}function Ve(re,D){throw new he(`"${re}" is not a valid Decimal128 string - ${D}`)}class ye extends $e{get _bsontype(){return"Decimal128"}constructor(D){if(super(),typeof D=="string")this.bytes=ye.fromString(D).bytes;else{if(!(D instanceof Uint8Array||A(D)))throw new he("Decimal128 must take a Buffer or string");if(D.byteLength!==16)throw new he("Decimal128 must take a Buffer of 16 bytes");this.bytes=D}}static fromString(D){return ye._fromString(D,{allowRounding:!1})}static fromStringWithRounding(D){return ye._fromString(D,{allowRounding:!0})}static _fromString(D,Ae){let de=!1,We=!1,Ge=!1,_t=!1,Nt=0,tt=0,rr=0,zt=0,xt=0;const Lt=[0];let ne=0,xe=0,Qe=0,Xe=0,rt=new et(0,0),wt=new et(0,0),St=0,bt=0;if(D.length>=7e3)throw new he(D+" not a valid Decimal128 string");const Mt=D.match(an),Cr=D.match(gr),lr=D.match(In);if(!Mt&&!Cr&&!lr||D.length===0)throw new he(D+" not a valid Decimal128 string");if(Mt){const nr=Mt[2],vn=Mt[4],cn=Mt[5],wn=Mt[6];vn&&wn===void 0&&Ve(D,"missing exponent power"),vn&&nr===void 0&&Ve(D,"missing exponent base"),vn===void 0&&(cn||wn)&&Ve(D,"missing e before exponent")}if(D[bt]!=="+"&&D[bt]!=="-"||(We=!0,de=D[bt++]==="-"),!Ne(D[bt])&&D[bt]!=="."){if(D[bt]==="i"||D[bt]==="I")return new ye(de?Gr:Sn);if(D[bt]==="N")return new ye(Yn)}for(;Ne(D[bt])||D[bt]===".";)D[bt]!=="."?(ne<34&&(D[bt]!=="0"||_t)&&(_t||(xt=tt),_t=!0,Lt[xe++]=parseInt(D[bt],10),ne+=1),_t&&(rr+=1),Ge&&(zt+=1),tt+=1,bt+=1):(Ge&&Ve(D,"contains multiple periods"),Ge=!0,bt+=1);if(Ge&&!tt)throw new he(D+" not a valid Decimal128 string");if(D[bt]==="e"||D[bt]==="E"){const nr=D.substr(++bt).match(ce);if(!nr||!nr[2])return new ye(Yn);Xe=parseInt(nr[0],10),bt+=nr[0].length}if(D[bt])return new ye(Yn);if(ne){if(Qe=ne-1,Nt=rr,Nt!==1)for(;D[xt+Nt-1+Number(We)+Number(Ge)]==="0";)Nt-=1}else Lt[0]=0,rr=1,ne=1,Nt=0;for(Xe<=zt&&zt>Xe+16384?Xe=gn:Xe-=zt;Xe>ln;){if(Qe+=1,Qe>=34){if(Nt===0){Xe=ln;break}Ve(D,"overflow")}Xe-=1}if(Ae.allowRounding){for(;Xe<gn||ne<rr;){if(Qe===0&&Nt<ne){Xe=gn,Nt=0;break}if(ne<rr?rr-=1:Qe-=1,Xe<ln)Xe+=1;else{if(Lt.join("").match(/^0+$/)){Xe=ln;break}Ve(D,"overflow")}}if(Qe+1<Nt){let nr=tt;Ge&&(xt+=1,nr+=1),We&&(xt+=1,nr+=1);const vn=parseInt(D[xt+Qe+1],10);let cn=0;if(vn>=5&&(cn=1,vn===5)){cn=Lt[Qe]%2==1?1:0;for(let wn=xt+Qe+2;wn<nr;wn++)if(parseInt(D[wn],10)){cn=1;break}}if(cn){let wn=Qe;for(;wn>=0&&++Lt[wn]>9;wn--)if(Lt[wn]=0,wn===0){if(!(Xe<ln))return new ye(de?Gr:Sn);Xe+=1,Lt[wn]=1}}}}else{for(;Xe<gn||ne<rr;){if(Qe===0){if(Nt===0){Xe=gn;break}Ve(D,"exponent underflow")}ne<rr?(D[rr-1+Number(We)+Number(Ge)]!=="0"&&Nt!==0&&Ve(D,"inexact rounding"),rr-=1):(Lt[Qe]!==0&&Ve(D,"inexact rounding"),Qe-=1),Xe<ln?Xe+=1:Ve(D,"overflow")}Qe+1<Nt&&(Ge&&(xt+=1),We&&(xt+=1),parseInt(D[xt+Qe+1],10)!==0&&Ve(D,"inexact rounding"))}if(rt=et.fromNumber(0),wt=et.fromNumber(0),Nt===0)rt=et.fromNumber(0),wt=et.fromNumber(0);else if(Qe<17){let nr=0;for(wt=et.fromNumber(Lt[nr++]),rt=new et(0,0);nr<=Qe;nr++)wt=wt.multiply(et.fromNumber(10)),wt=wt.add(et.fromNumber(Lt[nr]))}else{let nr=0;for(rt=et.fromNumber(Lt[nr++]);nr<=Qe-17;nr++)rt=rt.multiply(et.fromNumber(10)),rt=rt.add(et.fromNumber(Lt[nr]));for(wt=et.fromNumber(Lt[nr++]);nr<=Qe;nr++)wt=wt.multiply(et.fromNumber(10)),wt=wt.add(et.fromNumber(Lt[nr]))}const Rr=(function(nr,vn){if(!nr&&!vn)return{high:et.fromNumber(0),low:et.fromNumber(0)};const cn=nr.shiftRightUnsigned(32),wn=new et(nr.getLowBits(),0),Qa=vn.shiftRightUnsigned(32),eo=new et(vn.getLowBits(),0);let go=cn.multiply(Qa),yo=cn.multiply(eo);const Ho=wn.multiply(Qa);let Fi=wn.multiply(eo);return go=go.add(yo.shiftRightUnsigned(32)),yo=new et(yo.getLowBits(),0).add(Ho).add(Fi.shiftRightUnsigned(32)),go=go.add(yo.shiftRightUnsigned(32)),Fi=yo.shiftLeft(32).add(new et(Fi.getLowBits(),0)),{high:go,low:Fi}})(rt,et.fromString("100000000000000000"));Rr.low=Rr.low.add(wt),(function(nr,vn){const cn=nr.high>>>0,wn=vn.high>>>0;return cn<wn||cn===wn&&nr.low>>>0<vn.low>>>0})(Rr.low,wt)&&(Rr.high=Rr.high.add(et.fromNumber(1))),St=Xe+6176;const Ht={low:et.fromNumber(0),high:et.fromNumber(0)};Rr.high.shiftRightUnsigned(49).and(et.fromNumber(1)).equals(et.fromNumber(1))?(Ht.high=Ht.high.or(et.fromNumber(3).shiftLeft(61)),Ht.high=Ht.high.or(et.fromNumber(St).and(et.fromNumber(16383).shiftLeft(47))),Ht.high=Ht.high.or(Rr.high.and(et.fromNumber(0x7fffffffffff)))):(Ht.high=Ht.high.or(et.fromNumber(16383&St).shiftLeft(49)),Ht.high=Ht.high.or(Rr.high.and(et.fromNumber(562949953421311)))),Ht.low=Rr.low,de&&(Ht.high=Ht.high.or(et.fromString("9223372036854775808")));const ir=ve.allocateUnsafe(16);return bt=0,ir[bt++]=255&Ht.low.low,ir[bt++]=Ht.low.low>>8&255,ir[bt++]=Ht.low.low>>16&255,ir[bt++]=Ht.low.low>>24&255,ir[bt++]=255&Ht.low.high,ir[bt++]=Ht.low.high>>8&255,ir[bt++]=Ht.low.high>>16&255,ir[bt++]=Ht.low.high>>24&255,ir[bt++]=255&Ht.high.low,ir[bt++]=Ht.high.low>>8&255,ir[bt++]=Ht.high.low>>16&255,ir[bt++]=Ht.high.low>>24&255,ir[bt++]=255&Ht.high.high,ir[bt++]=Ht.high.high>>8&255,ir[bt++]=Ht.high.high>>16&255,ir[bt++]=Ht.high.high>>24&255,new ye(ir)}toString(){let D,Ae=0;const de=new Array(36);for(let St=0;St<de.length;St++)de[St]=0;let We,Ge,_t,Nt=0,tt=!1,rr={parts:[0,0,0,0]};const zt=[];Nt=0;const xt=this.bytes,Lt=xt[Nt++]|xt[Nt++]<<8|xt[Nt++]<<16|xt[Nt++]<<24,ne=xt[Nt++]|xt[Nt++]<<8|xt[Nt++]<<16|xt[Nt++]<<24,xe=xt[Nt++]|xt[Nt++]<<8|xt[Nt++]<<16|xt[Nt++]<<24,Qe=xt[Nt++]|xt[Nt++]<<8|xt[Nt++]<<16|xt[Nt++]<<24;Nt=0,(new et(Lt,ne),new et(xe,Qe)).lessThan(et.ZERO)&&zt.push("-");const Xe=Qe>>26&31;if(Xe>>3==3){if(Xe===30)return zt.join("")+"Infinity";if(Xe===31)return"NaN";D=Qe>>15&16383,We=8+(Qe>>14&1)}else We=Qe>>14&7,D=Qe>>17&16383;const rt=D-6176;if(rr.parts[0]=(16383&Qe)+((15&We)<<14),rr.parts[1]=xe,rr.parts[2]=ne,rr.parts[3]=Lt,rr.parts[0]===0&&rr.parts[1]===0&&rr.parts[2]===0&&rr.parts[3]===0)tt=!0;else for(_t=3;_t>=0;_t--){let St=0;const bt=Re(rr);if(rr=bt.quotient,St=bt.rem.low,St)for(Ge=8;Ge>=0;Ge--)de[9*_t+Ge]=St%10,St=Math.floor(St/10)}if(tt)Ae=1,de[Nt]=0;else for(Ae=36;!de[Nt];)Ae-=1,Nt+=1;const wt=Ae-1+rt;if(wt>=34||wt<=-7||rt>0){if(Ae>34)return zt.push("0"),rt>0?zt.push(`E+${rt}`):rt<0&&zt.push(`E${rt}`),zt.join("");zt.push(`${de[Nt++]}`),Ae-=1,Ae&&zt.push(".");for(let St=0;St<Ae;St++)zt.push(`${de[Nt++]}`);zt.push("E"),wt>0?zt.push(`+${wt}`):zt.push(`${wt}`)}else if(rt>=0)for(let St=0;St<Ae;St++)zt.push(`${de[Nt++]}`);else{let St=Ae+rt;if(St>0)for(let bt=0;bt<St;bt++)zt.push(`${de[Nt++]}`);else zt.push("0");for(zt.push(".");St++<0;)zt.push("0");for(let bt=0;bt<Ae-Math.max(St-1,0);bt++)zt.push(`${de[Nt++]}`)}return zt.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(D){return ye.fromString(D.$numberDecimal)}inspect(D,Ae,de){return de??=b,`new Decimal128(${de(this.toString(),Ae)})`}}class De extends $e{get _bsontype(){return"Double"}constructor(D){super(),D instanceof Number&&(D=D.valueOf()),this.value=+D}static fromString(D){const Ae=Number(D);if(D==="NaN")return new De(NaN);if(D==="Infinity")return new De(1/0);if(D==="-Infinity")return new De(-1/0);if(!Number.isFinite(Ae))throw new he(`Input: ${D} is not representable as a Double`);if(D.trim()!==D)throw new he(`Input: '${D}' contains whitespace`);if(D==="")throw new he("Input is an empty string");if(/[^-0-9.+eE]/.test(D))throw new he(`Input: '${D}' is not in decimal or exponential notation`);return new De(Ae)}valueOf(){return this.value}toJSON(){return this.value}toString(D){return this.value.toString(D)}toExtendedJSON(D){return D&&(D.legacy||D.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(D,Ae){const de=parseFloat(D.$numberDouble);return Ae&&Ae.relaxed?de:new De(de)}inspect(D,Ae,de){return de??=b,`new Double(${de(this.value,Ae)})`}}class qe extends $e{get _bsontype(){return"Int32"}constructor(D){super(),D instanceof Number&&(D=D.valueOf()),this.value=0|+D}static fromString(D){const Ae=Et(D),de=Number(D);if(w<de)throw new he(`Input: '${D}' is larger than the maximum value for Int32`);if(j>de)throw new he(`Input: '${D}' is smaller than the minimum value for Int32`);if(!Number.isSafeInteger(de))throw new he(`Input: '${D}' is not a safe integer`);if(de.toString()!==Ae)throw new he(`Input: '${D}' is not a valid Int32 string`);return new qe(de)}valueOf(){return this.value}toString(D){return this.value.toString(D)}toJSON(){return this.value}toExtendedJSON(D){return D&&(D.relaxed||D.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(D,Ae){return Ae&&Ae.relaxed?parseInt(D.$numberInt,10):new qe(D.$numberInt)}inspect(D,Ae,de){return de??=b,`new Int32(${de(this.value,Ae)})`}}class Ze extends $e{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new Ze}inspect(){return"new MaxKey()"}}class ht extends $e{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new ht}inspect(){return"new MinKey()"}}let ct=null;const gt=new WeakMap;class ut extends $e{get _bsontype(){return"ObjectId"}constructor(D){let Ae;if(super(),typeof D=="object"&&D&&"id"in D){if(typeof D.id!="string"&&!ArrayBuffer.isView(D.id))throw new he("Argument passed in must have an id that is of type string or Buffer");Ae="toHexString"in D&&typeof D.toHexString=="function"?ve.fromHex(D.toHexString()):D.id}else Ae=D;if(Ae==null||typeof Ae=="number")this.buffer=ut.generate(typeof Ae=="number"?Ae:void 0);else if(ArrayBuffer.isView(Ae)&&Ae.byteLength===12)this.buffer=ve.toLocalBufferType(Ae);else{if(typeof Ae!="string")throw new he("Argument passed in does not match the accepted types");if(!ut.validateHexString(Ae))throw new he("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");this.buffer=ve.fromHex(Ae),ut.cacheHexString&&gt.set(this,Ae)}}get id(){return this.buffer}set id(D){this.buffer=D,ut.cacheHexString&&gt.set(this,ve.toHex(D))}static validateHexString(D){if(D?.length!==24)return!1;for(let Ae=0;Ae<24;Ae++){const de=D.charCodeAt(Ae);if(!(de>=48&&de<=57||de>=97&&de<=102||de>=65&&de<=70))return!1}return!0}toHexString(){if(ut.cacheHexString){const Ae=gt.get(this);if(Ae)return Ae}const D=ve.toHex(this.id);return ut.cacheHexString&&gt.set(this,D),D}static getInc(){return ut.index=(ut.index+1)%16777215}static generate(D){typeof D!="number"&&(D=Math.floor(Date.now()/1e3));const Ae=ut.getInc(),de=ve.allocateUnsafe(12);return Ye.setInt32BE(de,0,D),ct===null&&(ct=ve.randomBytes(5)),de[4]=ct[0],de[5]=ct[1],de[6]=ct[2],de[7]=ct[3],de[8]=ct[4],de[11]=255&Ae,de[10]=Ae>>8&255,de[9]=Ae>>16&255,de}toString(D){return D==="base64"?ve.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}static is(D){return D!=null&&typeof D=="object"&&"_bsontype"in D&&D._bsontype==="ObjectId"}equals(D){if(D==null)return!1;if(ut.is(D))return this.buffer[11]===D.buffer[11]&&ve.equals(this.buffer,D.buffer);if(typeof D=="string")return D.toLowerCase()===this.toHexString();if(typeof D=="object"&&typeof D.toHexString=="function"){const Ae=D.toHexString(),de=this.toHexString();return typeof Ae=="string"&&Ae.toLowerCase()===de}return!1}getTimestamp(){const D=new Date,Ae=Ye.getUint32BE(this.buffer,0);return D.setTime(1e3*Math.floor(Ae)),D}static createPk(){return new ut}serializeInto(D,Ae){return D[Ae]=this.buffer[0],D[Ae+1]=this.buffer[1],D[Ae+2]=this.buffer[2],D[Ae+3]=this.buffer[3],D[Ae+4]=this.buffer[4],D[Ae+5]=this.buffer[5],D[Ae+6]=this.buffer[6],D[Ae+7]=this.buffer[7],D[Ae+8]=this.buffer[8],D[Ae+9]=this.buffer[9],D[Ae+10]=this.buffer[10],D[Ae+11]=this.buffer[11],12}static createFromTime(D){const Ae=ve.allocate(12);for(let de=11;de>=4;de--)Ae[de]=0;return Ye.setInt32BE(Ae,0,D),new ut(Ae)}static createFromHexString(D){if(D?.length!==24)throw new he("hex string must be 24 characters");return new ut(ve.fromHex(D))}static createFromBase64(D){if(D?.length!==16)throw new he("base64 string must be 16 characters");return new ut(ve.fromBase64(D))}static isValid(D){if(D==null)return!1;if(typeof D=="string")return ut.validateHexString(D);try{return new ut(D),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(D){return new ut(D.$oid)}isCached(){return ut.cacheHexString&&gt.has(this)}inspect(D,Ae,de){return de??=b,`new ObjectId(${de(this.toHexString(),Ae)})`}}function Ut(re,D,Ae){let de=5;if(Array.isArray(re))for(let We=0;We<re.length;We++)de+=$t(We.toString(),re[We],D,!0,Ae);else{typeof re?.toBSON=="function"&&(re=re.toBSON());for(const We of Object.keys(re))de+=$t(We,re[We],D,!1,Ae)}return de}function $t(re,D,Ae=!1,de=!1,We=!1){switch(typeof D?.toBSON=="function"&&(D=D.toBSON()),typeof D){case"string":return 1+ve.utf8ByteLength(re)+1+4+ve.utf8ByteLength(D)+1;case"number":return Math.floor(D)===D&&D>=_&&D<=E&&D>=j&&D<=w?(re!=null?ve.utf8ByteLength(re)+1:0)+5:(re!=null?ve.utf8ByteLength(re)+1:0)+9;case"undefined":return de||!We?(re!=null?ve.utf8ByteLength(re)+1:0)+1:0;case"boolean":return(re!=null?ve.utf8ByteLength(re)+1:0)+2;case"object":if(D!=null&&typeof D._bsontype=="string"&&D[y]!==v)throw new ke;if(D==null||D._bsontype==="MinKey"||D._bsontype==="MaxKey")return(re!=null?ve.utf8ByteLength(re)+1:0)+1;if(D._bsontype==="ObjectId")return(re!=null?ve.utf8ByteLength(re)+1:0)+13;if(D instanceof Date||g(D))return(re!=null?ve.utf8ByteLength(re)+1:0)+9;if(ArrayBuffer.isView(D)||D instanceof ArrayBuffer||f(D))return(re!=null?ve.utf8ByteLength(re)+1:0)+6+D.byteLength;if(D._bsontype==="Long"||D._bsontype==="Double"||D._bsontype==="Timestamp")return(re!=null?ve.utf8ByteLength(re)+1:0)+9;if(D._bsontype==="Decimal128")return(re!=null?ve.utf8ByteLength(re)+1:0)+17;if(D._bsontype==="Code")return D.scope!=null&&Object.keys(D.scope).length>0?(re!=null?ve.utf8ByteLength(re)+1:0)+1+4+4+ve.utf8ByteLength(D.code.toString())+1+Ut(D.scope,Ae,We):(re!=null?ve.utf8ByteLength(re)+1:0)+1+4+ve.utf8ByteLength(D.code.toString())+1;if(D._bsontype==="Binary"){const Ge=D;return Ge.sub_type===He.SUBTYPE_BYTE_ARRAY?(re!=null?ve.utf8ByteLength(re)+1:0)+(Ge.position+1+4+1+4):(re!=null?ve.utf8ByteLength(re)+1:0)+(Ge.position+1+4+1)}if(D._bsontype==="Symbol")return(re!=null?ve.utf8ByteLength(re)+1:0)+ve.utf8ByteLength(D.value)+4+1+1;if(D._bsontype==="DBRef"){const Ge=Object.assign({$ref:D.collection,$id:D.oid},D.fields);return D.db!=null&&(Ge.$db=D.db),(re!=null?ve.utf8ByteLength(re)+1:0)+1+Ut(Ge,Ae,We)}return D instanceof RegExp||p(D)?(re!=null?ve.utf8ByteLength(re)+1:0)+1+ve.utf8ByteLength(D.source)+1+(D.global?1:0)+(D.ignoreCase?1:0)+(D.multiline?1:0)+1:D._bsontype==="BSONRegExp"?(re!=null?ve.utf8ByteLength(re)+1:0)+1+ve.utf8ByteLength(D.pattern)+1+ve.utf8ByteLength(D.options)+1:(re!=null?ve.utf8ByteLength(re)+1:0)+Ut(D,Ae,We)+1;case"function":return Ae?(re!=null?ve.utf8ByteLength(re)+1:0)+1+4+ve.utf8ByteLength(D.toString())+1:0;case"bigint":return(re!=null?ve.utf8ByteLength(re)+1:0)+9;case"symbol":return 0;default:throw new he("Unrecognized JS type: "+typeof D)}}ut.index=Math.floor(16777215*Math.random());class Yt extends $e{get _bsontype(){return"BSONRegExp"}constructor(D,Ae){if(super(),this.pattern=D,this.options=(Ae??"").split("").sort().join(""),this.pattern.indexOf("\0")!==-1)throw new he(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new he(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let de=0;de<this.options.length;de++)if(this.options[de]!=="i"&&this.options[de]!=="m"&&this.options[de]!=="x"&&this.options[de]!=="l"&&this.options[de]!=="s"&&this.options[de]!=="u")throw new he(`The regular expression option [${this.options[de]}] is not supported`)}static parseOptions(D){return D?D.split("").sort().join(""):""}toExtendedJSON(D){return(D=D||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(D){if("$regex"in D){if(typeof D.$regex=="string")return new Yt(D.$regex,Yt.parseOptions(D.$options));if(D.$regex._bsontype==="BSONRegExp")return D}if("$regularExpression"in D)return new Yt(D.$regularExpression.pattern,Yt.parseOptions(D.$regularExpression.options));throw new he(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(D)}`)}inspect(D,Ae,de){const We=(function(Ge){if(Ge!=null&&typeof Ge=="object"&&"stylize"in Ge&&typeof Ge.stylize=="function")return Ge.stylize})(Ae)??(Ge=>Ge);return de??=b,`new BSONRegExp(${We(de(this.pattern),"regexp")}, ${We(de(this.options),"regexp")})`}}class Vt extends $e{get _bsontype(){return"BSONSymbol"}constructor(D){super(),this.value=D}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(D){return new Vt(D.$symbol)}inspect(D,Ae,de){return de??=b,`new BSONSymbol(${de(this.value,Ae)})`}}const or=et;class cr extends or{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(D){if(D==null)super(0,0,!0);else if(typeof D=="bigint")super(D,!0);else if(et.isLong(D))super(D.low,D.high,!0);else{if(typeof D!="object"||!("t"in D)||!("i"in D))throw new he("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }");{if(typeof D.t!="number"&&(typeof D.t!="object"||D.t._bsontype!=="Int32"))throw new he("Timestamp constructed from { t, i } must provide t as a number");if(typeof D.i!="number"&&(typeof D.i!="object"||D.i._bsontype!=="Int32"))throw new he("Timestamp constructed from { t, i } must provide i as a number");const Ae=Number(D.t),de=Number(D.i);if(Ae<0||Number.isNaN(Ae))throw new he("Timestamp constructed from { t, i } must provide a positive t");if(de<0||Number.isNaN(de))throw new he("Timestamp constructed from { t, i } must provide a positive i");if(Ae>4294967295)throw new he("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(de>4294967295)throw new he("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(de,Ae,!0)}}}toJSON(){return{$timestamp:this.toString()}}static fromInt(D){return new cr(et.fromInt(D,!0))}static fromNumber(D){return new cr(et.fromNumber(D,!0))}static fromBits(D,Ae){return new cr({i:D,t:Ae})}static fromString(D,Ae){return new cr(et.fromString(D,!0,Ae))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(D){const Ae=et.isLong(D.$timestamp.i)?D.$timestamp.i.getLowBitsUnsigned():D.$timestamp.i,de=et.isLong(D.$timestamp.t)?D.$timestamp.t.getLowBitsUnsigned():D.$timestamp.t;return new cr({t:de,i:Ae})}inspect(D,Ae,de){return de??=b,`new Timestamp({ t: ${de(this.t,Ae)}, i: ${de(this.i,Ae)} })`}}cr.MAX_VALUE=et.MAX_UNSIGNED_VALUE;const Fr=et.fromNumber(E),yn=et.fromNumber(_);function Lr(re,D,Ae){const de=(D=D??{})&&D.index?D.index:0,We=Ye.getInt32LE(re,de);if(We<5)throw new he(`bson size must be >= 5, is ${We}`);if(D.allowObjectSmallerThanBufferSize&&re.length<We)throw new he(`buffer length ${re.length} must be >= bson size ${We}`);if(!D.allowObjectSmallerThanBufferSize&&re.length!==We)throw new he(`buffer length ${re.length} must === bson size ${We}`);if(We+de>re.byteLength)throw new he(`(bson size ${We} + options.index ${de} must be <= buffer length ${re.byteLength})`);if(re[de+We-1]!==0)throw new he("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return Zr(re,de,D,Ae)}const xn=/^\$ref$|^\$id$|^\$db$/;function Zr(re,D,Ae,de=!1){const We=Ae.fieldsAsRaw==null?null:Ae.fieldsAsRaw,Ge=Ae.raw!=null&&Ae.raw,_t=typeof Ae.bsonRegExp=="boolean"&&Ae.bsonRegExp,Nt=Ae.promoteBuffers??!1,tt=Ae.promoteLongs??!0,rr=Ae.promoteValues??!0,zt=Ae.useBigInt64??!1;if(zt&&!rr)throw new he("Must either request bigint or Long for int64 deserialization");if(zt&&!tt)throw new he("Must either request bigint or Long for int64 deserialization");let xt,Lt,ne=!0;const xe=(Ae.validation==null?{utf8:!0}:Ae.validation).utf8;if(typeof xe=="boolean")xt=xe;else{ne=!1;const bt=Object.keys(xe).map(function(Mt){return xe[Mt]});if(bt.length===0)throw new he("UTF-8 validation setting cannot be empty");if(typeof bt[0]!="boolean")throw new he("Invalid UTF-8 validation option, must specify boolean values");if(xt=bt[0],!bt.every(Mt=>Mt===xt))throw new he("Invalid UTF-8 validation option - keys must be all true or all false")}if(!ne){Lt=new Set;for(const bt of Object.keys(xe))Lt.add(bt)}const Qe=D;if(re.length<5)throw new he("corrupt bson message < 5 bytes long");const Xe=Ye.getInt32LE(re,D);if(D+=4,Xe<5||Xe>re.length)throw new he("corrupt bson message");const rt=de?[]:{};let wt=0,St=!de&&null;for(;;){const bt=re[D++];if(bt===0)break;let Mt=D;for(;re[Mt]!==0&&Mt<re.length;)Mt++;if(Mt>=re.byteLength)throw new he("Bad BSON Document: illegal CString");const Cr=de?wt++:ve.toUTF8(re,D,Mt,!1);let lr,Rr=!0;if(Rr=ne||Lt?.has(Cr)?xt:!xt,St!==!1&&Cr[0]==="$"&&(St=xn.test(Cr)),D=Mt+1,bt===N){const Ht=Ye.getInt32LE(re,D);if(D+=4,Ht<=0||Ht>re.length-D||re[D+Ht-1]!==0)throw new he("bad string length in bson");lr=ve.toUTF8(re,D,D+Ht-1,Rr),D+=Ht}else if(bt===Q){const Ht=ve.allocateUnsafe(12);for(let ir=0;ir<12;ir++)Ht[ir]=re[D+ir];lr=new ut(Ht),D+=12}else if(bt===K&&rr===!1)lr=new qe(Ye.getInt32LE(re,D)),D+=4;else if(bt===K)lr=Ye.getInt32LE(re,D),D+=4;else if(bt===S)lr=Ye.getFloat64LE(re,D),D+=8,rr===!1&&(lr=new De(lr));else if(bt===L){const Ht=Ye.getInt32LE(re,D),ir=Ye.getInt32LE(re,D+4);D+=8,lr=new Date(new et(Ht,ir).toNumber())}else if(bt===$){if(re[D]!==0&&re[D]!==1)throw new he("illegal boolean type value");lr=re[D++]===1}else if(bt===O){const Ht=D,ir=Ye.getInt32LE(re,D);if(ir<=0||ir>re.length-D)throw new he("bad embedded document length in bson");if(Ge)lr=re.subarray(D,D+ir);else{let nr=Ae;ne||(nr={...Ae,validation:{utf8:Rr}}),lr=Zr(re,Ht,nr,!1)}D+=ir}else if(bt===k){const Ht=D,ir=Ye.getInt32LE(re,D);let nr=Ae;const vn=D+ir;if(We&&We[Cr]&&(nr={...Ae,raw:!0}),ne||(nr={...nr,validation:{utf8:Rr}}),lr=Zr(re,Ht,nr,!0),re[(D+=ir)-1]!==0)throw new he("invalid array terminator byte");if(D!==vn)throw new he("corrupted array bson")}else if(bt===R)lr=void 0;else if(bt===F)lr=null;else if(bt===M)if(zt)lr=Ye.getBigInt64LE(re,D),D+=8;else{const Ht=Ye.getInt32LE(re,D),ir=Ye.getInt32LE(re,D+4);D+=8;const nr=new et(Ht,ir);lr=tt&&rr===!0&&nr.lessThanOrEqual(Fr)&&nr.greaterThanOrEqual(yn)?nr.toNumber():nr}else if(bt===H){const Ht=ve.allocateUnsafe(16);for(let ir=0;ir<16;ir++)Ht[ir]=re[D+ir];D+=16,lr=new ye(Ht)}else if(bt===I){let Ht=Ye.getInt32LE(re,D);D+=4;const ir=Ht,nr=re[D++];if(Ht<0)throw new he("Negative binary type element size found");if(Ht>re.byteLength)throw new he("Binary type size larger than document size");if(nr===He.SUBTYPE_BYTE_ARRAY){if(Ht=Ye.getInt32LE(re,D),D+=4,Ht<0)throw new he("Negative binary type element size found for subtype 0x02");if(Ht>ir-4)throw new he("Binary type with subtype 0x02 contains too long binary size");if(Ht<ir-4)throw new he("Binary type with subtype 0x02 contains too short binary size")}Nt&&rr?lr=ve.toLocalBufferType(re.subarray(D,D+Ht)):(lr=new He(re.subarray(D,D+Ht),nr),nr===be&&Pt.isValid(lr)&&(lr=lr.toUUID())),D+=Ht}else if(bt===G&&_t===!1){for(Mt=D;re[Mt]!==0&&Mt<re.length;)Mt++;if(Mt>=re.length)throw new he("Bad BSON Document: illegal CString");const Ht=ve.toUTF8(re,D,Mt,!1);for(Mt=D=Mt+1;re[Mt]!==0&&Mt<re.length;)Mt++;if(Mt>=re.length)throw new he("Bad BSON Document: illegal CString");const ir=ve.toUTF8(re,D,Mt,!1);D=Mt+1;const nr=new Array(ir.length);for(Mt=0;Mt<ir.length;Mt++)switch(ir[Mt]){case"m":nr[Mt]="m";break;case"s":nr[Mt]="g";break;case"i":nr[Mt]="i"}lr=new RegExp(Ht,nr.join(""))}else if(bt===G&&_t===!0){for(Mt=D;re[Mt]!==0&&Mt<re.length;)Mt++;if(Mt>=re.length)throw new he("Bad BSON Document: illegal CString");const Ht=ve.toUTF8(re,D,Mt,!1);for(Mt=D=Mt+1;re[Mt]!==0&&Mt<re.length;)Mt++;if(Mt>=re.length)throw new he("Bad BSON Document: illegal CString");const ir=ve.toUTF8(re,D,Mt,!1);D=Mt+1,lr=new Yt(Ht,ir)}else if(bt===T){const Ht=Ye.getInt32LE(re,D);if(D+=4,Ht<=0||Ht>re.length-D||re[D+Ht-1]!==0)throw new he("bad string length in bson");const ir=ve.toUTF8(re,D,D+Ht-1,Rr);lr=rr?ir:new Vt(ir),D+=Ht}else if(bt===z)lr=new cr({i:Ye.getUint32LE(re,D),t:Ye.getUint32LE(re,D+4)}),D+=8;else if(bt===Y)lr=new ht;else if(bt===ae)lr=new Ze;else if(bt===q){const Ht=Ye.getInt32LE(re,D);if(D+=4,Ht<=0||Ht>re.length-D||re[D+Ht-1]!==0)throw new he("bad string length in bson");const ir=ve.toUTF8(re,D,D+Ht-1,Rr);lr=new vt(ir),D+=Ht}else if(bt===U){const Ht=Ye.getInt32LE(re,D);if(D+=4,Ht<13)throw new he("code_w_scope total size shorter minimum expected length");const ir=Ye.getInt32LE(re,D);if(D+=4,ir<=0||ir>re.length-D||re[D+ir-1]!==0)throw new he("bad string length in bson");const nr=ve.toUTF8(re,D,D+ir-1,Rr),vn=D+=ir,cn=Ye.getInt32LE(re,D),wn=Zr(re,vn,Ae,!1);if(D+=cn,Ht<8+cn+ir)throw new he("code_w_scope total size is too short, truncating scope");if(Ht>8+cn+ir)throw new he("code_w_scope total size is too long, clips outer document");lr=new vt(nr,wn)}else{if(bt!==X)throw new he(`Detected unknown BSON type ${bt.toString(16)} for fieldname "${Cr}"`);{const Ht=Ye.getInt32LE(re,D);if(D+=4,Ht<=0||Ht>re.length-D||re[D+Ht-1]!==0)throw new he("bad string length in bson");const ir=ve.toUTF8(re,D,D+Ht-1,Rr);D+=Ht;const nr=ve.allocateUnsafe(12);for(let cn=0;cn<12;cn++)nr[cn]=re[D+cn];const vn=new ut(nr);D+=12,lr=new Jt(ir,vn)}}Cr==="__proto__"?Object.defineProperty(rt,Cr,{value:lr,writable:!0,enumerable:!0,configurable:!0}):rt[Cr]=lr}if(Xe!==D-Qe)throw de?new he("corrupt array bson"):new he("corrupt object bson");if(!St)return rt;if(tr(rt)){const bt=Object.assign({},rt);return delete bt.$ref,delete bt.$id,delete bt.$db,new Jt(rt.$ref,rt.$id,rt.$db,bt)}return rt}const kr=/\x00/,Hr=new Set(["$db","$ref","$id","$clusterTime"]);function hn(re,D,Ae,de){re[de++]=N,re[(de=de+ve.encodeUTF8Into(re,D,de)+1)-1]=0;const We=ve.encodeUTF8Into(re,Ae,de+4);return Ye.setInt32LE(re,de,We+1),de=de+4+We,re[de++]=0,de}function Hn(re,D,Ae,de){const We=!Object.is(Ae,-0)&&Number.isSafeInteger(Ae)&&Ae<=w&&Ae>=j?K:S;return re[de++]=We,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0,de+(We===K?Ye.setInt32LE(re,de,Ae):Ye.setFloat64LE(re,de,Ae))}function pr(re,D,Ae,de){return re[de++]=M,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0,de+Ye.setBigInt64LE(re,de,Ae)}function bn(re,D,Ae,de){return re[de++]=F,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0,de}function Qt(re,D,Ae,de){return re[de++]=$,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0,re[de++]=Ae?1:0,de}function Er(re,D,Ae,de){re[de++]=L,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;const We=et.fromNumber(Ae.getTime()),Ge=We.getLowBits(),_t=We.getHighBits();return(de+=Ye.setInt32LE(re,de,Ge))+Ye.setInt32LE(re,de,_t)}function Wr(re,D,Ae,de){if(re[de++]=G,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0,Ae.source&&Ae.source.match(kr)!=null)throw new he("value "+Ae.source+" must not contain null bytes");return de+=ve.encodeUTF8Into(re,Ae.source,de),re[de++]=0,Ae.ignoreCase&&(re[de++]=105),Ae.global&&(re[de++]=115),Ae.multiline&&(re[de++]=109),re[de++]=0,de}function Dr(re,D,Ae,de){if(re[de++]=G,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0,Ae.pattern.match(kr)!=null)throw new he("pattern "+Ae.pattern+" must not contain null bytes");de+=ve.encodeUTF8Into(re,Ae.pattern,de),re[de++]=0;const We=Ae.options.split("").sort().join("");return de+=ve.encodeUTF8Into(re,We,de),re[de++]=0,de}function nn(re,D,Ae,de){return Ae===null?re[de++]=F:Ae._bsontype==="MinKey"?re[de++]=Y:re[de++]=ae,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0,de}function fn(re,D,Ae,de){return re[de++]=Q,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0,de+Ae.serializeInto(re,de)}function Dn(re,D,Ae,de){re[de++]=I,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;const We=Ae.length;if(de+=Ye.setInt32LE(re,de,We),re[de++]=oe,We<=16)for(let Ge=0;Ge<We;Ge++)re[de+Ge]=Ae[Ge];else re.set(Ae,de);return de+We}function xi(re,D,Ae,de,We,Ge,_t,Nt,tt){if(tt.has(Ae))throw new he("Cannot convert circular structure to BSON");tt.add(Ae),re[de++]=Array.isArray(Ae)?k:O,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;const rr=gs(re,Ae,We,de,Ge+1,_t,Nt,tt);return tt.delete(Ae),rr}function Us(re,D,Ae,de){re[de++]=H,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;for(let We=0;We<16;We++)re[de+We]=Ae.bytes[We];return de+16}function Ls(re,D,Ae,de){re[de++]=Ae._bsontype==="Long"?M:z,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;const We=Ae.getLowBits(),Ge=Ae.getHighBits();return(de+=Ye.setInt32LE(re,de,We))+Ye.setInt32LE(re,de,Ge)}function ds(re,D,Ae,de){return Ae=Ae.valueOf(),re[de++]=K,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0,de+Ye.setInt32LE(re,de,Ae)}function Cn(re,D,Ae,de){return re[de++]=S,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0,de+Ye.setFloat64LE(re,de,Ae.value)}function Ur(re,D,Ae,de){re[de++]=q,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;const We=Ae.toString(),Ge=ve.encodeUTF8Into(re,We,de+4)+1;return Ye.setInt32LE(re,de,Ge),de=de+4+Ge-1,re[de++]=0,de}function Pn(re,D,Ae,de,We=!1,Ge=0,_t=!1,Nt=!0,tt){if(Ae.scope&&typeof Ae.scope=="object"){re[de++]=U,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;let rr=de;const zt=Ae.code;de+=4;const xt=ve.encodeUTF8Into(re,zt,de+4)+1;Ye.setInt32LE(re,de,xt),re[de+4+xt-1]=0,de=de+xt+4;const Lt=gs(re,Ae.scope,We,de,Ge+1,_t,Nt,tt);de=Lt-1;const ne=Lt-rr;rr+=Ye.setInt32LE(re,rr,ne),re[de++]=0}else{re[de++]=q,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;const rr=Ae.code.toString(),zt=ve.encodeUTF8Into(re,rr,de+4)+1;Ye.setInt32LE(re,de,zt),de=de+4+zt-1,re[de++]=0}return de}function Wn(re,D,Ae,de){re[de++]=I,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;const We=Ae.buffer;let Ge=Ae.position;if(Ae.sub_type===He.SUBTYPE_BYTE_ARRAY&&(Ge+=4),de+=Ye.setInt32LE(re,de,Ge),re[de++]=Ae.sub_type,Ae.sub_type===He.SUBTYPE_BYTE_ARRAY&&(Ge-=4,de+=Ye.setInt32LE(re,de,Ge)),Ae.sub_type===He.SUBTYPE_VECTOR&&it(Ae),Ge<=16)for(let _t=0;_t<Ge;_t++)re[de+_t]=We[_t];else re.set(We,de);return de+Ae.position}function Bn(re,D,Ae,de){re[de++]=T,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;const We=ve.encodeUTF8Into(re,Ae.value,de+4)+1;return Ye.setInt32LE(re,de,We),de=de+4+We-1,re[de++]=0,de}function Vn(re,D,Ae,de,We,Ge,_t){re[de++]=O,de+=ve.encodeUTF8Into(re,D,de),re[de++]=0;let Nt=de,tt={$ref:Ae.collection||Ae.namespace,$id:Ae.oid};Ae.db!=null&&(tt.$db=Ae.db),tt=Object.assign(tt,Ae.fields);const rr=gs(re,tt,!1,de,We+1,Ge,!0,_t),zt=rr-Nt;return Nt+=Ye.setInt32LE(re,de,zt),rr}function gs(re,D,Ae,de,We,Ge,_t,Nt){if(Nt==null){if(D==null)return re[0]=5,re[1]=0,re[2]=0,re[3]=0,re[4]=0,5;if(Array.isArray(D))throw new he("serialize does not support an array as the root input");if(typeof D!="object")throw new he("serialize does not support non-object as the root input");if("_bsontype"in D&&typeof D._bsontype=="string")throw new he("BSON types cannot be serialized as a document");if(g(D)||p(D)||A(D)||f(D))throw new he("date, regexp, typedarray, and arraybuffer cannot be BSON documents");Nt=new Set}Nt.add(D);let tt=de+4;if(Array.isArray(D))for(let zt=0;zt<D.length;zt++){const xt=`${zt}`;let Lt=D[zt];typeof Lt?.toBSON=="function"&&(Lt=Lt.toBSON());const ne=typeof Lt;if(Lt===void 0)tt=bn(re,xt,0,tt);else if(Lt===null)tt=bn(re,xt,0,tt);else if(ne==="string")tt=hn(re,xt,Lt,tt);else if(ne==="number")tt=Hn(re,xt,Lt,tt);else if(ne==="bigint")tt=pr(re,xt,Lt,tt);else if(ne==="boolean")tt=Qt(re,xt,Lt,tt);else if(ne==="object"&&Lt._bsontype==null)tt=Lt instanceof Date||g(Lt)?Er(re,xt,Lt,tt):Lt instanceof Uint8Array||A(Lt)?Dn(re,xt,Lt,tt):Lt instanceof RegExp||p(Lt)?Wr(re,xt,Lt,tt):xi(re,xt,Lt,tt,Ae,We,Ge,_t,Nt);else if(ne==="object"){if(Lt[y]!==v)throw new ke;if(Lt._bsontype==="ObjectId")tt=fn(re,xt,Lt,tt);else if(Lt._bsontype==="Decimal128")tt=Us(re,xt,Lt,tt);else if(Lt._bsontype==="Long"||Lt._bsontype==="Timestamp")tt=Ls(re,xt,Lt,tt);else if(Lt._bsontype==="Double")tt=Cn(re,xt,Lt,tt);else if(Lt._bsontype==="Code")tt=Pn(re,xt,Lt,tt,Ae,We,Ge,_t,Nt);else if(Lt._bsontype==="Binary")tt=Wn(re,xt,Lt,tt);else if(Lt._bsontype==="BSONSymbol")tt=Bn(re,xt,Lt,tt);else if(Lt._bsontype==="DBRef")tt=Vn(re,xt,Lt,tt,We,Ge,Nt);else if(Lt._bsontype==="BSONRegExp")tt=Dr(re,xt,Lt,tt);else if(Lt._bsontype==="Int32")tt=ds(re,xt,Lt,tt);else if(Lt._bsontype==="MinKey"||Lt._bsontype==="MaxKey")tt=nn(re,xt,Lt,tt);else if(Lt._bsontype!==void 0)throw new he(`Unrecognized or invalid _bsontype: ${String(Lt._bsontype)}`)}else ne==="function"&&Ge&&(tt=Ur(re,xt,Lt,tt))}else if(D instanceof Map||m(D)){const zt=D.entries();let xt=!1;for(;!xt;){const Lt=zt.next();if(xt=!!Lt.done,xt)continue;const ne=Lt.value?Lt.value[0]:void 0;let xe=Lt.value?Lt.value[1]:void 0;typeof xe?.toBSON=="function"&&(xe=xe.toBSON());const Qe=typeof xe;if(typeof ne=="string"&&!Hr.has(ne)){if(ne.match(kr)!=null)throw new he("key "+ne+" must not contain null bytes");if(Ae){if(ne[0]==="$")throw new he("key "+ne+" must not start with '$'");if(ne.includes("."))throw new he("key "+ne+" must not contain '.'")}}if(xe===void 0)_t===!1&&(tt=bn(re,ne,0,tt));else if(xe===null)tt=bn(re,ne,0,tt);else if(Qe==="string")tt=hn(re,ne,xe,tt);else if(Qe==="number")tt=Hn(re,ne,xe,tt);else if(Qe==="bigint")tt=pr(re,ne,xe,tt);else if(Qe==="boolean")tt=Qt(re,ne,xe,tt);else if(Qe==="object"&&xe._bsontype==null)tt=xe instanceof Date||g(xe)?Er(re,ne,xe,tt):xe instanceof Uint8Array||A(xe)?Dn(re,ne,xe,tt):xe instanceof RegExp||p(xe)?Wr(re,ne,xe,tt):xi(re,ne,xe,tt,Ae,We,Ge,_t,Nt);else if(Qe==="object"){if(xe[y]!==v)throw new ke;if(xe._bsontype==="ObjectId")tt=fn(re,ne,xe,tt);else if(xe._bsontype==="Decimal128")tt=Us(re,ne,xe,tt);else if(xe._bsontype==="Long"||xe._bsontype==="Timestamp")tt=Ls(re,ne,xe,tt);else if(xe._bsontype==="Double")tt=Cn(re,ne,xe,tt);else if(xe._bsontype==="Code")tt=Pn(re,ne,xe,tt,Ae,We,Ge,_t,Nt);else if(xe._bsontype==="Binary")tt=Wn(re,ne,xe,tt);else if(xe._bsontype==="BSONSymbol")tt=Bn(re,ne,xe,tt);else if(xe._bsontype==="DBRef")tt=Vn(re,ne,xe,tt,We,Ge,Nt);else if(xe._bsontype==="BSONRegExp")tt=Dr(re,ne,xe,tt);else if(xe._bsontype==="Int32")tt=ds(re,ne,xe,tt);else if(xe._bsontype==="MinKey"||xe._bsontype==="MaxKey")tt=nn(re,ne,xe,tt);else if(xe._bsontype!==void 0)throw new he(`Unrecognized or invalid _bsontype: ${String(xe._bsontype)}`)}else Qe==="function"&&Ge&&(tt=Ur(re,ne,xe,tt))}}else{if(typeof D?.toBSON=="function"&&(D=D.toBSON())!=null&&typeof D!="object")throw new he("toBSON function did not return an object");for(const zt of Object.keys(D)){let xt=D[zt];typeof xt?.toBSON=="function"&&(xt=xt.toBSON());const Lt=typeof xt;if(typeof zt=="string"&&!Hr.has(zt)){if(zt.match(kr)!=null)throw new he("key "+zt+" must not contain null bytes");if(Ae){if(zt[0]==="$")throw new he("key "+zt+" must not start with '$'");if(zt.includes("."))throw new he("key "+zt+" must not contain '.'")}}if(xt===void 0)_t===!1&&(tt=bn(re,zt,0,tt));else if(xt===null)tt=bn(re,zt,0,tt);else if(Lt==="string")tt=hn(re,zt,xt,tt);else if(Lt==="number")tt=Hn(re,zt,xt,tt);else if(Lt==="bigint")tt=pr(re,zt,xt,tt);else if(Lt==="boolean")tt=Qt(re,zt,xt,tt);else if(Lt==="object"&&xt._bsontype==null)tt=xt instanceof Date||g(xt)?Er(re,zt,xt,tt):xt instanceof Uint8Array||A(xt)?Dn(re,zt,xt,tt):xt instanceof RegExp||p(xt)?Wr(re,zt,xt,tt):xi(re,zt,xt,tt,Ae,We,Ge,_t,Nt);else if(Lt==="object"){if(xt[y]!==v)throw new ke;if(xt._bsontype==="ObjectId")tt=fn(re,zt,xt,tt);else if(xt._bsontype==="Decimal128")tt=Us(re,zt,xt,tt);else if(xt._bsontype==="Long"||xt._bsontype==="Timestamp")tt=Ls(re,zt,xt,tt);else if(xt._bsontype==="Double")tt=Cn(re,zt,xt,tt);else if(xt._bsontype==="Code")tt=Pn(re,zt,xt,tt,Ae,We,Ge,_t,Nt);else if(xt._bsontype==="Binary")tt=Wn(re,zt,xt,tt);else if(xt._bsontype==="BSONSymbol")tt=Bn(re,zt,xt,tt);else if(xt._bsontype==="DBRef")tt=Vn(re,zt,xt,tt,We,Ge,Nt);else if(xt._bsontype==="BSONRegExp")tt=Dr(re,zt,xt,tt);else if(xt._bsontype==="Int32")tt=ds(re,zt,xt,tt);else if(xt._bsontype==="MinKey"||xt._bsontype==="MaxKey")tt=nn(re,zt,xt,tt);else if(xt._bsontype!==void 0)throw new he(`Unrecognized or invalid _bsontype: ${String(xt._bsontype)}`)}else Lt==="function"&&Ge&&(tt=Ur(re,zt,xt,tt))}}Nt.delete(D),re[tt++]=0;const rr=tt-de;return de+=Ye.setInt32LE(re,de,rr),tt}const hr={$oid:ut,$binary:He,$uuid:He,$symbol:Vt,$numberInt:qe,$numberDecimal:ye,$numberDouble:De,$numberLong:et,$minKey:ht,$maxKey:Ze,$regex:Yt,$regularExpression:Yt,$timestamp:cr};function kn(re,D={}){if(typeof re=="number"){const de=re<=w&&re>=j,We=re<=C&&re>=B;if(D.relaxed||D.legacy)return re;if(Number.isInteger(re)&&!Object.is(re,-0)){if(de)return new qe(re);if(We)return D.useBigInt64?BigInt(re):et.fromNumber(re)}return new De(re)}if(re==null||typeof re!="object")return re;if(re.$undefined)return null;const Ae=Object.keys(re).filter(de=>de.startsWith("$")&&re[de]!=null);for(let de=0;de<Ae.length;de++){const We=hr[Ae[de]];if(We)return We.fromExtendedJSON(re,D)}if(re.$date!=null){const de=re.$date,We=new Date;if(D.legacy)if(typeof de=="number")We.setTime(de);else if(typeof de=="string")We.setTime(Date.parse(de));else{if(typeof de!="bigint")throw new Z("Unrecognized type for EJSON date: "+typeof de);We.setTime(Number(de))}else if(typeof de=="string")We.setTime(Date.parse(de));else if(et.isLong(de))We.setTime(de.toNumber());else if(typeof de=="number"&&D.relaxed)We.setTime(de);else{if(typeof de!="bigint")throw new Z("Unrecognized type for EJSON date: "+typeof de);We.setTime(Number(de))}return We}if(re.$code!=null){const de=Object.assign({},re);return re.$scope&&(de.$scope=kn(re.$scope)),vt.fromExtendedJSON(re)}if(tr(re)||re.$dbPointer){const de=re.$ref?re:re.$dbPointer;if(de instanceof Jt)return de;const We=Object.keys(de).filter(_t=>_t.startsWith("$"));let Ge=!0;if(We.forEach(_t=>{["$ref","$id","$db"].indexOf(_t)===-1&&(Ge=!1)}),Ge)return Jt.fromExtendedJSON(de)}return re}function pn(re){const D=re.toISOString();return re.getUTCMilliseconds()!==0?D:D.slice(0,-5)+"Z"}function sn(re,D){if(re instanceof Map||m(re)){const Ae=Object.create(null);for(const[de,We]of re){if(typeof de!="string")throw new he("Can only serialize maps with string keys");Ae[de]=We}return sn(Ae,D)}if((typeof re=="object"||typeof re=="function")&&re!==null){const Ae=D.seenObjects.findIndex(de=>de.obj===re);if(Ae!==-1){const de=D.seenObjects.map(zt=>zt.propertyName),We=de.slice(0,Ae).map(zt=>`${zt} -> `).join(""),Ge=de[Ae],_t=" -> "+de.slice(Ae+1,de.length-1).map(zt=>`${zt} -> `).join(""),Nt=de[de.length-1],tt=" ".repeat(We.length+Ge.length/2),rr="-".repeat(_t.length+(Ge.length+Nt.length)/2-1);throw new he(`Converting circular structure to EJSON:
    ${We}${Ge}${_t}${Nt}
    ${tt}\\${rr}/`)}D.seenObjects[D.seenObjects.length-1].obj=re}if(Array.isArray(re))return(function(Ae,de){return Ae.map((We,Ge)=>{de.seenObjects.push({propertyName:`index ${Ge}`,obj:null});try{return sn(We,de)}finally{de.seenObjects.pop()}})})(re,D);if(re===void 0)return null;if(re instanceof Date||g(re)){const Ae=re.getTime(),de=Ae>-1&&Ae<2534023188e5;return D.legacy?D.relaxed&&de?{$date:re.getTime()}:{$date:pn(re)}:D.relaxed&&de?{$date:pn(re)}:{$date:{$numberLong:re.getTime().toString()}}}if(!(typeof re!="number"||D.relaxed&&isFinite(re))){if(Number.isInteger(re)&&!Object.is(re,-0)){if(re>=j&&re<=w)return{$numberInt:re.toString()};if(re>=B&&re<=C)return{$numberLong:re.toString()}}return{$numberDouble:Object.is(re,-0)?"-0.0":re.toString()}}if(typeof re=="bigint")return D.relaxed?Number(BigInt.asIntN(64,re)):{$numberLong:BigInt.asIntN(64,re).toString()};if(re instanceof RegExp||p(re)){let Ae=re.flags;if(Ae===void 0){const de=re.toString().match(/[gimuy]*$/);de&&(Ae=de[0])}return new Yt(re.source,Ae).toExtendedJSON(D)}return re!=null&&typeof re=="object"?(function(Ae,de){if(Ae==null||typeof Ae!="object")throw new he("not an object instance");const We=Ae._bsontype;if(We===void 0){const Ge={};for(const _t of Object.keys(Ae)){de.seenObjects.push({propertyName:_t,obj:null});try{const Nt=sn(Ae[_t],de);_t==="__proto__"?Object.defineProperty(Ge,_t,{value:Nt,writable:!0,enumerable:!0,configurable:!0}):Ge[_t]=Nt}finally{de.seenObjects.pop()}}return Ge}if(Ae!=null&&typeof Ae=="object"&&typeof Ae._bsontype=="string"&&Ae[y]!==v)throw new ke;if((function(Ge){return Ge!=null&&typeof Ge=="object"&&"_bsontype"in Ge&&typeof Ge._bsontype=="string"})(Ae)){let Ge=Ae;if(typeof Ge.toExtendedJSON!="function"){const _t=Mr[Ae._bsontype];if(!_t)throw new he("Unrecognized or invalid _bsontype: "+Ae._bsontype);Ge=_t(Ge)}return We==="Code"&&Ge.scope?Ge=new vt(Ge.code,sn(Ge.scope,de)):We==="DBRef"&&Ge.oid&&(Ge=new Jt(sn(Ge.collection,de),sn(Ge.oid,de),sn(Ge.db,de),sn(Ge.fields,de))),Ge.toExtendedJSON(de)}throw new he("_bsontype must be a string, but was: "+typeof We)})(re,D):re}const Mr={Binary:re=>new He(re.value(),re.sub_type),Code:re=>new vt(re.code,re.scope),DBRef:re=>new Jt(re.collection||re.namespace,re.oid,re.db,re.fields),Decimal128:re=>new ye(re.bytes),Double:re=>new De(re.value),Int32:re=>new qe(re.value),Long:re=>et.fromBits(re.low!=null?re.low:re.low_,re.low!=null?re.high:re.high_,re.low!=null?re.unsigned:re.unsigned_),MaxKey:()=>new Ze,MinKey:()=>new ht,ObjectId:re=>new ut(re),BSONRegExp:re=>new Yt(re.pattern,re.options),BSONSymbol:re=>new Vt(re.value),Timestamp:re=>cr.fromBits(re.low,re.high)};function Pr(re,D){const Ae={useBigInt64:D?.useBigInt64??!1,relaxed:D?.relaxed??!0,legacy:D?.legacy??!1};return JSON.parse(re,(de,We)=>{if(de.indexOf("\0")!==-1)throw new he(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(de)}`);return kn(We,Ae)})}function Ar(re,D,Ae,de){Ae!=null&&typeof Ae=="object"&&(de=Ae,Ae=0),D==null||typeof D!="object"||Array.isArray(D)||(de=D,D=void 0,Ae=0);const We=sn(re,Object.assign({relaxed:!0,legacy:!1},de,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(We,D,Ae)}const Ln=Object.create(null);Ln.parse=Pr,Ln.stringify=Ar,Ln.serialize=function(re,D){return D=D||{},JSON.parse(Ar(re,D))},Ln.deserialize=function(re,D){return D=D||{},Pr(JSON.stringify(re),D)},Object.freeze(Ln);function ys(re,D){try{return Ye.getNonnegativeInt32LE(re,D)}catch(Ae){throw new te("BSON size cannot be negative",D,{cause:Ae})}}function Ks(re,D){let Ae=D;for(;re[Ae]!==0;Ae++);if(Ae===re.length-1)throw new te("Null terminator not found",D);return Ae}const Gs=Object.create(null);Gs.parseToElements=function(re,D=0){if(D??=0,re.length<5)throw new te(`Input must be at least 5 bytes, got ${re.length} bytes`,D);const Ae=ys(re,D);if(Ae>re.length-D)throw new te(`Parsed documentSize (${Ae} bytes) does not match input length (${re.length} bytes)`,D);if(re[D+Ae-1]!==0)throw new te("BSON documents must end in 0x00",D+Ae);const de=[];let We=D+4;for(;We<=Ae+D;){const Ge=re[We];if(We+=1,Ge===0){if(We-D!==Ae)throw new te("Invalid 0x00 type byte",We);break}const _t=We,Nt=Ks(re,We)-_t;let tt;if(We+=Nt+1,Ge===1||Ge===18||Ge===9||Ge===17)tt=8;else if(Ge===16)tt=4;else if(Ge===7)tt=12;else if(Ge===19)tt=16;else if(Ge===8)tt=1;else if(Ge===10||Ge===6||Ge===127||Ge===255)tt=0;else if(Ge===11)tt=Ks(re,Ks(re,We)+1)+1-We;else if(Ge===3||Ge===4||Ge===15)tt=ys(re,We);else{if(Ge!==2&&Ge!==5&&Ge!==12&&Ge!==13&&Ge!==14)throw new te(`Invalid 0x${Ge.toString(16).padStart(2,"0")} type byte`,We);tt=ys(re,We)+4,Ge===5&&(tt+=1),Ge===12&&(tt+=12)}if(tt>Ae)throw new te("value reports length larger than document",We);de.push([Ge,_t,Nt,We,tt]),We+=tt}return de},Gs.ByteUtils=ve,Gs.NumberUtils=Ye,Object.freeze(Gs);const zn=17825792;let Mn=ve.allocate(zn);function si(re){Mn.length<re&&(Mn=ve.allocate(re))}function Gi(re,D={}){const Ae=typeof D.checkKeys=="boolean"&&D.checkKeys,de=typeof D.serializeFunctions=="boolean"&&D.serializeFunctions,We=typeof D.ignoreUndefined!="boolean"||D.ignoreUndefined,Ge=typeof D.minInternalBufferSize=="number"?D.minInternalBufferSize:zn;Mn.length<Ge&&(Mn=ve.allocate(Ge));const _t=gs(Mn,re,Ae,0,0,de,We,null),Nt=ve.allocateUnsafe(_t);return Nt.set(Mn.subarray(0,_t),0),Nt}function Ma(re,D,Ae={}){const de=typeof Ae.checkKeys=="boolean"&&Ae.checkKeys,We=typeof Ae.serializeFunctions=="boolean"&&Ae.serializeFunctions,Ge=typeof Ae.ignoreUndefined!="boolean"||Ae.ignoreUndefined,_t=typeof Ae.index=="number"?Ae.index:0,Nt=gs(Mn,re,de,0,0,We,Ge,null);return D.set(Mn.subarray(0,Nt),_t),_t+Nt-1}function Ra(re,D={}){return Lr(ve.toLocalBufferType(re),D)}function ki(re,D={}){return Ut(re,typeof(D=D||{}).serializeFunctions=="boolean"&&D.serializeFunctions,typeof D.ignoreUndefined!="boolean"||D.ignoreUndefined)}function ii(re,D,Ae,de,We,Ge){const _t=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},Ge),Nt=ve.toLocalBufferType(re);let tt=D;for(let rr=0;rr<Ae;rr++){const zt=Ye.getInt32LE(Nt,tt);_t.index=tt,de[We+rr]=Lr(Nt,_t),tt+=zt}return tt}var _i=Object.freeze({__proto__:null,BSONError:he,BSONOffsetError:te,BSONRegExp:Yt,BSONRuntimeError:Z,BSONSymbol:Vt,BSONType:ge,BSONValue:$e,BSONVersionError:ke,Binary:He,Code:vt,DBRef:Jt,Decimal128:ye,Double:De,EJSON:Ln,Int32:qe,Long:et,MaxKey:Ze,MinKey:ht,ObjectId:ut,Timestamp:cr,UUID:Pt,calculateObjectSize:ki,deserialize:Ra,deserializeStream:ii,onDemand:Gs,serialize:Gi,serializeWithBufferAndIndex:Ma,setInternalBufferSize:si})},6365:(o,c,l)=>{var u=l(5832).hp,d=l(6353).Binary,A=l(6353).UUID,f=l(8768);function p(b,v,y){var w,j,C,B,E=b;return b==null&&(E=0),Array.isArray(v)?(j=v[0],C=v[1]):w=v,B=typeof E=="number"||E instanceof Number?u.alloc(E):u.from(E,w,y),f.decorate(B,p.mixin),B.isMongooseBuffer=!0,B[p.pathSymbol]=j,B[g]=C,B._subtype=0,B}var m=Symbol.for("mongoose#Buffer#_path"),g=Symbol.for("mongoose#Buffer#_parent");p.pathSymbol=m,p.mixin={_subtype:void 0,_markModified:function(){var b=this[g];return b&&b.markModified(this[p.pathSymbol]),this},write:function(){var b=u.prototype.write.apply(this,arguments);return b>0&&this._markModified(),b},copy:function(b){var v=u.prototype.copy.apply(this,arguments);return b&&b.isMongooseBuffer&&b._markModified(),v}},f.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(b){u.prototype[b]&&(p.mixin[b]=function(){var v=u.prototype[b].apply(this,arguments);return this._markModified(),v})}),p.mixin.toObject=function(b){var v=typeof b=="number"?b:this._subtype||0;return new d(u.from(this),v)},p.mixin.$toObject=p.mixin.toObject,p.mixin.toBSON=function(){return new d(this,this._subtype||0)},p.mixin.toUUID=function(){if(this._subtype!==4)throw new Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new A(this)},p.mixin.equals=function(b){if(!u.isBuffer(b)||this.length!==b.length)return!1;for(var v=0;v<this.length;++v)if(this[v]!==b[v])return!1;return!0},p.mixin.subtype=function(b){if(typeof b!="number")throw new TypeError("Invalid subtype. Expected a number");this._subtype!==b&&this._markModified(),this._subtype=b},p.Binary=d,o.exports=p},6400:(o,c,l)=>{function u(we){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Fe){return typeof Fe}:function(Fe){return Fe&&typeof Symbol=="function"&&Fe.constructor===Symbol&&Fe!==Symbol.prototype?"symbol":typeof Fe},u(we)}var d,A=l(8093),f=l(9870),p=l(9206),m=l(9939),g=l(783),b=l(9907),v=l(2268),y=l(8188),w=l(9471),j=l(2401),C=l(1697),B=l(8435),E=l(8633),_=l(2151),S=l(674),N=Function,O=function(we){try{return N('"use strict"; return ('+we+").constructor;")()}catch{}},k=l(1464),I=l(988),R=function(){throw new v},Q=k?(function(){try{return R}catch{try{return k(arguments,"callee").get}catch{return R}}})():R,$=l(5510)(),L=l(209),F=l(5825),G=l(2403),X=l(3279),q=l(3123),T={},U=typeof Uint8Array<"u"&&L?L(Uint8Array):d,K={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?d:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?d:ArrayBuffer,"%ArrayIteratorPrototype%":$&&L?L([][Symbol.iterator]()):d,"%AsyncFromSyncIteratorPrototype%":d,"%AsyncFunction%":T,"%AsyncGenerator%":T,"%AsyncGeneratorFunction%":T,"%AsyncIteratorPrototype%":T,"%Atomics%":typeof Atomics>"u"?d:Atomics,"%BigInt%":typeof BigInt>"u"?d:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?d:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?d:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?d:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":f,"%eval%":eval,"%EvalError%":p,"%Float16Array%":typeof Float16Array>"u"?d:Float16Array,"%Float32Array%":typeof Float32Array>"u"?d:Float32Array,"%Float64Array%":typeof Float64Array>"u"?d:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?d:FinalizationRegistry,"%Function%":N,"%GeneratorFunction%":T,"%Int8Array%":typeof Int8Array>"u"?d:Int8Array,"%Int16Array%":typeof Int16Array>"u"?d:Int16Array,"%Int32Array%":typeof Int32Array>"u"?d:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$&&L?L(L([][Symbol.iterator]())):d,"%JSON%":(typeof JSON>"u"?"undefined":u(JSON))==="object"?JSON:d,"%Map%":typeof Map>"u"?d:Map,"%MapIteratorPrototype%":typeof Map<"u"&&$&&L?L(new Map()[Symbol.iterator]()):d,"%Math%":Math,"%Number%":Number,"%Object%":A,"%Object.getOwnPropertyDescriptor%":k,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?d:Promise,"%Proxy%":typeof Proxy>"u"?d:Proxy,"%RangeError%":m,"%ReferenceError%":g,"%Reflect%":typeof Reflect>"u"?d:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?d:Set,"%SetIteratorPrototype%":typeof Set<"u"&&$&&L?L(new Set()[Symbol.iterator]()):d,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?d:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$&&L?L(""[Symbol.iterator]()):d,"%Symbol%":$?Symbol:d,"%SyntaxError%":b,"%ThrowTypeError%":Q,"%TypedArray%":U,"%TypeError%":v,"%Uint8Array%":typeof Uint8Array>"u"?d:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?d:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?d:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?d:Uint32Array,"%URIError%":y,"%WeakMap%":typeof WeakMap>"u"?d:WeakMap,"%WeakRef%":typeof WeakRef>"u"?d:WeakRef,"%WeakSet%":typeof WeakSet>"u"?d:WeakSet,"%Function.prototype.call%":q,"%Function.prototype.apply%":X,"%Object.defineProperty%":I,"%Object.getPrototypeOf%":F,"%Math.abs%":w,"%Math.floor%":j,"%Math.max%":C,"%Math.min%":B,"%Math.pow%":E,"%Math.round%":_,"%Math.sign%":S,"%Reflect.getPrototypeOf%":G};if(L)try{null.error}catch(we){var z=L(L(we));K["%Error.prototype%"]=z}var M=function we(Fe){var _e;if(Fe==="%AsyncFunction%")_e=O("async function () {}");else if(Fe==="%GeneratorFunction%")_e=O("function* () {}");else if(Fe==="%AsyncGeneratorFunction%")_e=O("async function* () {}");else if(Fe==="%AsyncGenerator%"){var Ce=we("%AsyncGeneratorFunction%");Ce&&(_e=Ce.prototype)}else if(Fe==="%AsyncIteratorPrototype%"){var ie=we("%AsyncGenerator%");ie&&L&&(_e=L(ie.prototype))}return K[Fe]=_e,_e},H={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Y=l(2354),ae=l(5994),oe=Y.call(q,Array.prototype.concat),be=Y.call(X,Array.prototype.splice),ge=Y.call(q,String.prototype.replace),he=Y.call(q,String.prototype.slice),ke=Y.call(q,RegExp.prototype.exec),Z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,te=/\\(\\)?/g,fe=function(we,Fe){var _e,Ce=we;if(ae(H,Ce)&&(Ce="%"+(_e=H[Ce])[0]+"%"),ae(K,Ce)){var ie=K[Ce];if(ie===T&&(ie=M(Ce)),ie===void 0&&!Fe)throw new v("intrinsic "+we+" exists, but is not available. Please file an issue!");return{alias:_e,name:Ce,value:ie}}throw new b("intrinsic "+we+" does not exist!")};o.exports=function(we,Fe){if(typeof we!="string"||we.length===0)throw new v("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Fe!="boolean")throw new v('"allowMissing" argument must be a boolean');if(ke(/^%?[^%]*%?$/,we)===null)throw new b("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var _e=(function(it){var It=he(it,0,1),dt=he(it,-1);if(It==="%"&&dt!=="%")throw new b("invalid intrinsic syntax, expected closing `%`");if(dt==="%"&&It!=="%")throw new b("invalid intrinsic syntax, expected opening `%`");var Pt=[];return ge(it,Z,function(vt,tr,Jt,Et){Pt[Pt.length]=Jt?ge(Et,te,"$1"):tr||vt}),Pt})(we),Ce=_e.length>0?_e[0]:"",ie=fe("%"+Ce+"%",Fe),me=ie.name,Be=ie.value,Le=!1,ve=ie.alias;ve&&(Ce=ve[0],be(_e,oe([0,1],ve)));for(var $e=1,je=!0;$e<_e.length;$e+=1){var Pe=_e[$e],Te=he(Pe,0,1),Ye=he(Pe,-1);if((Te==='"'||Te==="'"||Te==="`"||Ye==='"'||Ye==="'"||Ye==="`")&&Te!==Ye)throw new b("property names with quotes must have matching quotes");if(Pe!=="constructor"&&je||(Le=!0),ae(K,me="%"+(Ce+="."+Pe)+"%"))Be=K[me];else if(Be!=null){if(!(Pe in Be)){if(!Fe)throw new v("base intrinsic for "+we+" exists, but the property is not available.");return}if(k&&$e+1>=_e.length){var He=k(Be,Pe);Be=(je=!!He)&&"get"in He&&!("originalValue"in He.get)?He.get:Be[Pe]}else je=ae(Be,Pe),Be=Be[Pe];je&&!Le&&(K[me]=Be)}}return Be}},6413:(o,c,l)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},u(y)}function d(y,w){var j=Object.keys(y);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(y);w&&(C=C.filter(function(B){return Object.getOwnPropertyDescriptor(y,B).enumerable})),j.push.apply(j,C)}return j}function A(y,w,j){return(w=(function(C){var B=(function(E){if(u(E)!="object"||!E)return E;var _=E[Symbol.toPrimitive];if(_!==void 0){var S=_.call(E,"string");if(u(S)!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(E)})(C);return u(B)=="symbol"?B:B+""})(w))in y?Object.defineProperty(y,w,{value:j,enumerable:!0,configurable:!0,writable:!0}):y[w]=j,y}var f=l(3609),p=l(6426),m=l(8953),g=l(4327);function b(y,w){p.call(this,y,w,"Boolean")}b.schemaName="Boolean",b.defaultOptions={},b.prototype=Object.create(p.prototype),b.prototype.constructor=b,b._cast=m,b.set=p.set,b.setters=[],b.get=p.get,b.cast=function(y){return arguments.length===0||(y===!1&&(y=this._defaultCaster),this._cast=y),this._cast},b._defaultCaster=function(y){if(y!=null&&typeof y!="boolean")throw new Error;return y},b._checkRequired=function(y){return y===!0||y===!1},b.checkRequired=p.checkRequired,b.prototype.checkRequired=function(y){return this.constructor._checkRequired(y)},Object.defineProperty(b,"convertToTrue",{get:function(){return m.convertToTrue},set:function(y){m.convertToTrue=y}}),Object.defineProperty(b,"convertToFalse",{get:function(){return m.convertToFalse},set:function(y){m.convertToFalse=y}}),b.prototype.cast=function(y){var w;w=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():b.cast();try{return w(y)}catch(j){throw new f("Boolean",y,this.path,j,this)}};var v=(function(y){for(var w=1;w<arguments.length;w++){var j=arguments[w]!=null?arguments[w]:{};w%2?d(Object(j),!0).forEach(function(C){A(y,C,j[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(j)):d(Object(j)).forEach(function(C){Object.defineProperty(y,C,Object.getOwnPropertyDescriptor(j,C))})}return y})({},p.prototype.$conditionalHandlers);Object.defineProperty(b.prototype,"$conditionalHandlers",{enumerable:!1,value:v}),b.prototype.castForQuery=function(y,w,j){var C;if(y!=null)return(C=this.$conditionalHandlers[y])?C.call(this,w):this.applySetters(w,j);try{return this.applySetters(w,j)}catch(B){throw B instanceof f&&B.path===this.path&&this.$fullPath!=null&&(B.path=this.$fullPath),B}},b.prototype._castNullish=function(y){if(y===void 0)return y;var w=typeof this.constructor.cast=="function"?this.constructor.cast():b.cast();return w==null?y:!(w.convertToFalse instanceof Set&&w.convertToFalse.has(y))&&(!!(w.convertToTrue instanceof Set&&w.convertToTrue.has(y))||y)},b.prototype.toJSONSchema=function(y){var w=this.options.required&&typeof this.options.required!="function";return g("boolean","bool",y?.useBsonType,w)},b.prototype.autoEncryptionType=function(){return"bool"},o.exports=b},6426:(o,c,l)=>{var u=l(5832).hp;function d($){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},d($)}var A=l(3672),f=l(8879),p=l(8499),m=l(2555),g=l(4450),b=l(8133),v=l(9183),y=l(6155),w=l(2746),j=l(7930).schemaTypeSymbol,C=l(8768),B=l(7930).validatorErrorSymbol,E=l(7930).documentIsModified,_=l(7930).populateModelSymbol,S=A.CastError,N=A.ValidatorError,O={_skipMarkModified:!0};function k($,L,F){this[j]=!0,this.path=$,this.instance=F,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),L=L||{};for(var G=this.constructor.defaultOptions||{},X=0,q=Object.keys(G);X<q.length;X++){var T=q[X];T==="validate"?this.validate(G.validate):G.hasOwnProperty(T)&&!Object.prototype.hasOwnProperty.call(L,T)&&(L[T]=G[T])}L.select==null&&delete L.select;var U=this.OptionsConstructor||f;this.options=new U(L),this._index=null,C.hasUserDefinedProperty(this.options,"immutable")&&(this.$immutable=this.options.immutable,b(this));for(var K=0,z=Object.keys(this.options);K<z.length;K++){var M=z[K];if(M!=="cast"){if(C.hasUserDefinedProperty(this.options,M)&&typeof this[M]=="function"){if(M==="index"&&this._index){if(L.index===!1){var H=this._index;if(d(H)==="object"&&H!=null){if(H.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(H.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}var Y=L[M];if(M==="default"){this.default(Y);continue}var ae=Array.isArray(Y)?Y:[Y];this[M].apply(this,ae)}}else Array.isArray(this.options[M])?this.castFunction.apply(this,this.options[M]):this.castFunction(this.options[M])}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}function I($,L){if($!==void 0&&!$){var F=new(L.ErrorConstructor||N)(L);return F[B]=!0,F}}function R($,L){return this.castForQuery(null,$,L)}function Q($,L){var F=this;return Array.isArray($)?$.map(function(G){return Array.isArray(G)&&G.length===0?G:F.castForQuery(null,G,L)}):[this.castForQuery(null,$,L)]}k.prototype.OptionsConstructor=f,k.prototype.path,k.prototype.validators,k.prototype.isRequired,k.prototype.splitPath=function(){return this._presplitPath!=null?this._presplitPath:this.path!=null?(this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath):void 0},k.cast=function($){return arguments.length===0||($===!1&&($=function(L){return L}),this._cast=$),this._cast},k.prototype.castFunction=function($,L){return arguments.length===0?this._castFunction:($===!1&&($=this.constructor._defaultCaster||function(F){return F}),typeof $=="string"?(this._castErrorMessage=$,this._castFunction):($!=null&&(this._castFunction=$),L!=null&&(this._castErrorMessage=L),this._castFunction))},k.prototype.cast=function(){throw new Error("Base SchemaType class does not implement a `cast()` function")},k.set=function($,L){this.hasOwnProperty("defaultOptions")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[$]=L},k.get=function($){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push($)},k.prototype.default=function($){if(arguments.length===1){if($===void 0)return void(this.defaultValue=void 0);if($!=null&&$.instanceOfSchema)throw new A("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=$,this.defaultValue}return arguments.length>1&&(this.defaultValue=Array.prototype.slice.call(arguments)),this.defaultValue},k.prototype.index=function($){return this._index=$,C.expires(this._index),this},k.prototype.unique=function($,L){if(this._index===!1){if(!$)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}return this.options.hasOwnProperty("index")||$!==!1?(this._index==null||this._index===!0?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.unique=!!$,typeof L=="string"&&(this._duplicateKeyErrorMessage=L),this):this},k.prototype.text=function($){if(this._index===!1){if(!$)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}return this.options.hasOwnProperty("index")||$!==!1?(this._index===null||this._index===void 0||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.text=$,this):this},k.prototype.sparse=function($){if(this._index===!1){if(!$)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}return this.options.hasOwnProperty("index")||$!==!1?(this._index==null||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.sparse=$,this):this},k.prototype.immutable=function($){return this.$immutable=$,b(this),this},k.prototype.transform=function($){return this.options.transform=$,this},k.prototype.set=function($){if(typeof $!="function")throw new TypeError("A setter must be a function.");return this.setters.push($),this},k.prototype.get=function($){if(typeof $!="function")throw new TypeError("A getter must be a function.");return this.getters.push($),this},k.prototype.validateAll=function($){for(var L=0;L<$.length;L++)this.validate($[L]);return this},k.prototype.validate=function($,L,F){var G,X,q,T;if(typeof $=="function"||$&&C.getFunctionName($.constructor)==="RegExp")return typeof L=="function"?(G={validator:$,message:L}).type=F||"user defined":L instanceof Object&&!F?((G=y(L)?Object.assign({},L):g(L)).message||(G.message=G.msg),G.validator=$,G.type=G.type||"user defined"):(L==null&&(L=A.messages.general.default),F||(F="user defined"),G={message:L,type:F,validator:$}),this.validators.push(G),this;for(X=0,q=arguments.length;X<q;X++){if(T=arguments[X],!C.isPOJO(T)){var U="Invalid validator. Received ("+d(T)+") "+T+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(U)}this.validate(T.validator,T)}return this},k.prototype.required=function($,L){var F={};if(arguments.length>0&&$==null)return this.validators=this.validators.filter(function(q){return q.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(d($)==="object"&&(L=(F=$).message||L,$=$.isRequired),$===!1)return this.validators=this.validators.filter(function(q){return q.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;var G=this;this.isRequired=!0,this.requiredValidator=function(q){var T=this&&this.$__&&this.$__.cachedRequired;if(T!=null&&!this.$__isSelected(G.path)&&!this[E](G.path))return!0;if(T!=null&&G.path in T){var U=!T[G.path]||G.checkRequired(q,this);return delete T[G.path],U}return typeof $=="function"&&!$.apply(this)||G.checkRequired(q,this)},this.originalRequiredValue=$,typeof $=="string"&&(L=$,$=void 0);var X=L||A.messages.general.required;return this.validators.unshift(Object.assign({},F,{validator:this.requiredValidator,message:X,type:"required"})),this},k.prototype.ref=function($){return this.options.ref=$,this},k.prototype.getDefault=function($,L,F){var G;if((G=typeof this.defaultValue=="function"?this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid"?this.defaultValue.call($):this.defaultValue.call($,$):this.defaultValue)!=null){if(d(G)!=="object"||this.options&&this.options.shared||(G=g(G)),F&&F.skipCast)return this._applySetters(G,$);var X=this.applySetters(G,$,L,void 0,O);return X&&!Array.isArray(X)&&X.$isSingleNested&&(X.$__parent=$),X}return G},k.prototype._applySetters=function($,L,F,G,X){var q=$;if(F)return q;for(var T=this.setters,U=T.length-1;U>=0;U--)q=T[U].call(L,q,G,this,X);return q},k.prototype._castNullish=function($){return $},k.prototype.applySetters=function($,L,F,G,X){var q=this._applySetters($,L,F,G,X);return q==null?this._castNullish(q):q=this.cast(q,L,F,G,X)},k.prototype.applyGetters=function($,L){var F=$,G=this.getters,X=G.length;if(X===0)return F;for(var q=0;q<X;++q)F=G[q].call(L,F,this);return F},k.prototype.select=function($){return this.selected=!!$,this},k.prototype.doValidate=function($,L,F,G){var X=this,q=!1,T=this.path;if(typeof L!="function")throw new TypeError("Must pass callback function to doValidate(), got ".concat(d(L)));var U=this.validators.filter(function(ae){return d(ae)==="object"&&ae!==null}),K=U.length;if(!K)return L(null);for(var z=function(){if(q)return 0;var ae,oe=U[M],be=oe.validator,ge=y(oe)?Object.assign({},oe):g(oe);if(ge.path=G&&G.path?G.path:T,ge.fullPath=X.$fullPath,ge.value=$,be instanceof RegExp)return Y(be.test($),ge,F),1;if(typeof be!="function")return 1;if($===void 0&&be!==X.requiredValidator)return Y(!0,ge,F),1;try{ae=ge.propsParameter?be.call(F,$,ge):be.call(F,$)}catch(he){ae=!1,ge.reason=he,he.message&&(ge.message=he.message)}ae!=null&&typeof ae.then=="function"?ae.then(function(he){Y(he,ge,F)},function(he){ge.reason=he,ge.message=he.message,Y(ae=!1,ge,F)}):Y(ae,ge,F)},M=0,H=U.length;M<H&&z()!==0;++M);function Y(ae,oe,be){if(!q)if(ae===void 0||ae)--K<=0&&w(function(){L(null)});else{var ge=oe.ErrorConstructor||N;(q=new ge(oe,be))[B]=!0,w(function(){L(q)})}}},k.prototype.doValidateSync=function($,L,F){var G=this.path;if(!this.validators.length)return null;var X=this.validators;if($===void 0){if(this.validators.length===0||this.validators[0].type!=="required")return null;X=[this.validators[0]]}var q=null,T=0,U=X.length;for(T=0;T<U;++T){var K=X[T];if(K!==null&&d(K)==="object"){var z=K.validator,M=y(K)?Object.assign({},K):g(K);M.path=F&&F.path?F.path:G,M.fullPath=this.$fullPath,M.value=$;var H=!1;if(!v(z)){if(z instanceof RegExp)q=I(z.test($),M);else if(typeof z=="function"){try{H=M.propsParameter?z.call(L,$,M):z.call(L,$)}catch(Y){H=!1,M.reason=Y}if((H==null||typeof H.then!="function")&&(q=I(H,M)))break}}}}return q},k._isRef=function($,L,F,G){var X=G&&$.options&&($.options.ref||$.options.refPath);if(!X&&F&&F.$__!=null){var q=F.$__fullPath($.path,!0),T=F.ownerDocument();X=q!=null&&T.$populated(q)||F.$populated($.path)}return!!X&&(L==null||!(u.isBuffer(L)||L._bsontype==="Binary"||!C.isObject(L))||G)},k.prototype._castRef=function($,L,F,G){if($==null)return $;if($.$__!=null)return $.$__.wasPopulated=$.$__.wasPopulated||{value:$._doc._id},$;if(u.isBuffer($)||!C.isObject($)){if(F)return $;throw new S(this.instance,$,this.path,null,this)}var X,q,T,U=L.$__fullPath(this.path,!0),K=L.ownerDocument().$populated(U,!0),z=$;if(!(L.$__.populated&&L.$__.populated[U]&&L.$__.populated[U].options&&L.$__.populated[U].options.options&&L.$__.populated[U].options.options.lean)){var M=K?K.options[_]:L.constructor.db.model(this.options.ref);(z=M.hydrate($,null,G)).$__.wasPopulated={value:z._doc._id,options:(X={},q=_,T=M,(q=(function(H){var Y=(function(ae){if(d(ae)!="object"||!ae)return ae;var oe=ae[Symbol.toPrimitive];if(oe!==void 0){var be=oe.call(ae,"string");if(d(be)!="object")return be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ae)})(H);return d(Y)=="symbol"?Y:Y+""})(q))in X?Object.defineProperty(X,q,{value:T,enumerable:!0,configurable:!0,writable:!0}):X[q]=T,X)}}return z},k.prototype.$conditionalHandlers={$all:function($,L){var F=this;return Array.isArray($)?$.map(function(G){return F.castForQuery(null,G,L)}):[this.castForQuery(null,$,L)]},$eq:R,$in:Q,$ne:R,$nin:Q,$exists:p,$type:m},k.prototype.castForQuery=function($,L,F){var G;if($!=null){if(!(G=this.$conditionalHandlers[$]))throw new Error("Can't use "+$);return G.call(this,L,F)}try{return this.applySetters(L,F)}catch(X){throw X instanceof S&&X.path===this.path&&this.$fullPath!=null&&(X.path=this.$fullPath),X}},k.checkRequired=function($){return arguments.length!==0&&(this._checkRequired=$),this._checkRequired},k.prototype.checkRequired=function($){return $!=null},k.prototype.clone=function(){var $=Object.assign({},this.options),L=new this.constructor(this.path,$,this.instance);return L.validators=this.validators.slice(),this.requiredValidator!==void 0&&(L.requiredValidator=this.requiredValidator),this.defaultValue!==void 0&&(L.defaultValue=this.defaultValue),this.$immutable!==void 0&&this.options.immutable===void 0&&(L.$immutable=this.$immutable,b(L)),this._index!==void 0&&(L._index=this._index),this.selected!==void 0&&(L.selected=this.selected),this.isRequired!==void 0&&(L.isRequired=this.isRequired),this.originalRequiredValue!==void 0&&(L.originalRequiredValue=this.originalRequiredValue),L.getters=this.getters.slice(),L.setters=this.setters.slice(),L},k.prototype.getEmbeddedSchemaType=function(){return this.$embeddedSchemaType},k.prototype._duplicateKeyErrorMessage=null,k.prototype.toJSONSchema=function(){throw new Error("Converting unsupported SchemaType to JSON Schema: "+this.instance)},k.prototype.autoEncryptionType=function(){return null},o.exports=c=k,c.CastError=S,c.ValidatorError=N},6451:(o,c,l)=>{var u=l(8768).isPOJO;o.exports=function d(A){for(var f,p,m,g=Object.keys(A),b=g.length;b--;)m=A[p=g[b]],u(m)&&(A[p]=d(m)),A[p]!==void 0?f=!0:delete A[p];return f?A:void 0}},6511:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}function d(g,b){(b==null||b>g.length)&&(b=g.length);for(var v=0,y=Array(b);v<b;v++)y[v]=g[v];return y}function A(g,b){var v=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);b&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(g,w).enumerable})),v.push.apply(v,y)}return v}function f(g){for(var b=1;b<arguments.length;b++){var v=arguments[b]!=null?arguments[b]:{};b%2?A(Object(v),!0).forEach(function(y){p(g,y,v[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(v)):A(Object(v)).forEach(function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(v,y))})}return g}function p(g,b,v){return(b=(function(y){var w=(function(j){if(u(j)!="object"||!j)return j;var C=j[Symbol.toPrimitive];if(C!==void 0){var B=C.call(j,"string");if(u(B)!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(j)})(y);return u(w)=="symbol"?w:w+""})(b))in g?Object.defineProperty(g,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[b]=v,g}l(8768);var m=o.exports=function(){};m.ctor=function(){var g=Array.prototype.slice.call(arguments),b=function(){m.apply(this,arguments),this.paths={},this.states={}};return(b.prototype=new m).constructor=b,b.prototype.stateNames=g,g.forEach(function(v){b.prototype[v]=function(y){this._changeState(y,v)}}),b},m.prototype._changeState=function(g,b){var v=this.paths[g];if(v!==b){var y=this.states[v];y&&delete y[g],this.paths[g]=b,this.states[b]=this.states[b]||{},this.states[b][g]=!0}},m.prototype.clear=function(g){if(this.states[g]!=null)for(var b,v=Object.keys(this.states[g]),y=v.length;y--;)b=v[y],delete this.states[g][b],delete this.paths[b]},m.prototype.clearPath=function(g){var b=this.paths[g];b&&(delete this.paths[g],delete this.states[b][g])},m.prototype.getStatePaths=function(g){return this.states[g]!=null?this.states[g]:{}},m.prototype.some=function(){var g=this,b=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(b,function(v){return g.states[v]!=null&&Object.keys(g.states[v]).length})},m.prototype._iter=function(g){return function(){var b=Array.prototype.slice.call(arguments),v=b.pop();b.length||(b=this.stateNames);var y=this;return b.reduce(function(w,j){return y.states[j]==null?w:w.concat(Object.keys(y.states[j]))},[])[g](function(w,j,C){return v(w,j,C)})}},m.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)},m.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)},m.prototype.clone=function(){var g=new this.constructor;g.paths=f({},this.paths);var b,v=(function(w,j){var C=typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(!C){if(Array.isArray(w)||(C=(function(O,k){if(O){if(typeof O=="string")return d(O,k);var I={}.toString.call(O).slice(8,-1);return I==="Object"&&O.constructor&&(I=O.constructor.name),I==="Map"||I==="Set"?Array.from(O):I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?d(O,k):void 0}})(w))||j){C&&(w=C);var B=0,E=function(){};return{s:E,n:function(){return B>=w.length?{done:!0}:{done:!1,value:w[B++]}},e:function(O){throw O},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,S=!0,N=!1;return{s:function(){C=C.call(w)},n:function(){var O=C.next();return S=O.done,O},e:function(O){N=!0,_=O},f:function(){try{S||C.return==null||C.return()}finally{if(N)throw _}}}})(this.stateNames);try{for(v.s();!(b=v.n()).done;){var y=b.value;y in this.states&&(g.states[y]=this.states[y]==null?this.states[y]:f({},this.states[y]))}}catch(w){v.e(w)}finally{v.f()}return g}},6544:(o,c,l)=>{function u(C){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},u(C)}var d;if(!Object.keys){var A=Object.prototype.hasOwnProperty,f=Object.prototype.toString,p=l(6312),m=Object.prototype.propertyIsEnumerable,g=!m.call({toString:null},"toString"),b=m.call(function(){},"prototype"),v=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],y=function(C){var B=C.constructor;return B&&B.prototype===C},w={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},j=(function(){if(typeof window>"u")return!1;for(var C in window)try{if(!w["$"+C]&&A.call(window,C)&&window[C]!==null&&u(window[C])==="object")try{y(window[C])}catch{return!0}}catch{return!0}return!1})();d=function(C){var B=C!==null&&u(C)==="object",E=f.call(C)==="[object Function]",_=p(C),S=B&&f.call(C)==="[object String]",N=[];if(!B&&!E&&!_)throw new TypeError("Object.keys called on a non-object");var O=b&&E;if(S&&C.length>0&&!A.call(C,0))for(var k=0;k<C.length;++k)N.push(String(k));if(_&&C.length>0)for(var I=0;I<C.length;++I)N.push(String(I));else for(var R in C)O&&R==="prototype"||!A.call(C,R)||N.push(String(R));if(g)for(var Q=(function(L){if(typeof window>"u"||!j)return y(L);try{return y(L)}catch{return!1}})(C),$=0;$<v.length;++$)Q&&v[$]==="constructor"||!A.call(C,v[$])||N.push(v[$]);return N}}o.exports=d},6547:(o,c,l)=>{function u(y,w){var j=Object.keys(y);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(y);w&&(C=C.filter(function(B){return Object.getOwnPropertyDescriptor(y,B).enumerable})),j.push.apply(j,C)}return j}function d(y,w,j){return(w=(function(C){var B=(function(E){if(A(E)!="object"||!E)return E;var _=E[Symbol.toPrimitive];if(_!==void 0){var S=_.call(E,"string");if(A(S)!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(E)})(C);return A(B)=="symbol"?B:B+""})(w))in y?Object.defineProperty(y,w,{value:j,enumerable:!0,configurable:!0,writable:!0}):y[w]=j,y}function A(y){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},A(y)}var f=l(3550).EventEmitter,p=l(9380),m=l(8768),g=l(7930).documentArrayParent;function b(y,w,j,C,B){var E;m.isMongooseDocumentArray(w)?(this.__parentArray=w,this[g]=w.$parent()):(this.__parentArray=void 0,this[g]=void 0),this.$setIndex(B),this.$__parent=this[g],A(j)==="object"&&j!=null?(E=(function(_){for(var S=1;S<arguments.length;S++){var N=arguments[S]!=null?arguments[S]:{};S%2?u(Object(N),!0).forEach(function(O){d(_,O,N[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(N)):u(Object(N)).forEach(function(O){Object.defineProperty(_,O,Object.getOwnPropertyDescriptor(N,O))})}return _})({isNew:!0},j),j=void 0):E={isNew:!0},p.call(this,y,C,this[g],j,E)}for(var v in b.prototype=Object.create(p.prototype),b.prototype.constructor=b,Object.defineProperty(b.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1}),Object.defineProperty(b.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0}),f.prototype)b[v]=f.prototype[v];b.prototype.$setIndex=function(y){if(this.__index=y,this.$__!=null&&this.$__.validationError!=null)for(var w=0,j=Object.keys(this.$__.validationError.errors);w<j.length;w++){var C=j[w];this.invalidate(C,this.$__.validationError.errors[C])}},b.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')},b.prototype.$__removeFromParent=function(){var y=this._doc._id;if(!y)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:y})},b.prototype.$__fullPath=function(y,w){return this.__index==null?null:(this.$__.fullPath||this.ownerDocument(),w?y?this.$__.fullPath+"."+y:this.$__.fullPath:y?this.$__.fullPath+"."+this.__index+"."+y:this.$__.fullPath+"."+this.__index)},b.prototype.$__pathRelativeToParent=function(y,w){return this.__index!=null&&this.__parentArray&&this.__parentArray.$path?w?y==null?this.__parentArray.$path():this.__parentArray.$path()+"."+y:y==null?this.__parentArray.$path()+"."+this.__index:this.__parentArray.$path()+"."+this.__index+"."+y:null},b.prototype.$parent=function(){return this[g]},b.prototype.parentArray=function(){return this.__parentArray},o.exports=b},6583:(o,c,l)=>{function u(b){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},u(b)}var d,A=l(8863),f=l(1464);try{d=[].__proto__===Array.prototype}catch(b){if(!b||u(b)!=="object"||!("code"in b)||b.code!=="ERR_PROTO_ACCESS")throw b}var p=!!d&&f&&f(Object.prototype,"__proto__"),m=Object,g=m.getPrototypeOf;o.exports=p&&typeof p.get=="function"?A([p.get]):typeof g=="function"&&function(b){return g(b==null?b:m(b))}},6665:o=>{o.exports=function(c,l){for(var u,d,A,f=l.split("."),p="",m=0;m<f.length;++m)if(c[p+=p.length?".":""+f[m]]){for(A=(d=Object.keys(c)).length,u=0;u<A;++u)d[m].indexOf(p+".")!==0||d[m].indexOf(l);return!0}return!1}},6730:o=>{var c=Object.prototype.toString,l=Math.max,u=function(d,A){for(var f=[],p=0;p<d.length;p+=1)f[p]=d[p];for(var m=0;m<A.length;m+=1)f[m+d.length]=A[m];return f};o.exports=function(d){var A=this;if(typeof A!="function"||c.apply(A)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+A);for(var f,p=(function(y){for(var w=[],j=1,C=0;j<y.length;j+=1,C+=1)w[C]=y[j];return w})(arguments),m=l(0,A.length-p.length),g=[],b=0;b<m;b++)g[b]="$"+b;if(f=Function("binder","return function ("+(function(y){for(var w="",j=0;j<y.length;j+=1)w+=y[j],j+1<y.length&&(w+=",");return w})(g)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof f){var y=A.apply(this,u(p,arguments));return Object(y)===y?y:this}return A.apply(d,u(p,arguments))}),A.prototype){var v=function(){};v.prototype=A.prototype,f.prototype=new v,v.prototype=null}return f}},6750:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}var d=l(988),A=l(9907),f=l(2268),p=l(1464);o.exports=function(m,g,b){if(!m||u(m)!=="object"&&typeof m!="function")throw new f("`obj` must be an object or a function`");if(typeof g!="string"&&u(g)!=="symbol")throw new f("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new f("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new f("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new f("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new f("`loose`, if provided, must be a boolean");var v=arguments.length>3?arguments[3]:null,y=arguments.length>4?arguments[4]:null,w=arguments.length>5?arguments[5]:null,j=arguments.length>6&&arguments[6],C=!!p&&p(m,g);if(d)d(m,g,{configurable:w===null&&C?C.configurable:!w,enumerable:v===null&&C?C.enumerable:!v,value:b,writable:y===null&&C?C.writable:!y});else{if(!j&&(v||y||w))throw new A("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");m[g]=b}}},6775:(o,c)=>{c.byteLength=function(b){var v=p(b),y=v[0],w=v[1];return 3*(y+w)/4-w},c.toByteArray=function(b){var v,y,w=p(b),j=w[0],C=w[1],B=new d((function(S,N,O){return 3*(N+O)/4-O})(0,j,C)),E=0,_=C>0?j-4:j;for(y=0;y<_;y+=4)v=u[b.charCodeAt(y)]<<18|u[b.charCodeAt(y+1)]<<12|u[b.charCodeAt(y+2)]<<6|u[b.charCodeAt(y+3)],B[E++]=v>>16&255,B[E++]=v>>8&255,B[E++]=255&v;return C===2&&(v=u[b.charCodeAt(y)]<<2|u[b.charCodeAt(y+1)]>>4,B[E++]=255&v),C===1&&(v=u[b.charCodeAt(y)]<<10|u[b.charCodeAt(y+1)]<<4|u[b.charCodeAt(y+2)]>>2,B[E++]=v>>8&255,B[E++]=255&v),B},c.fromByteArray=function(b){for(var v,y=b.length,w=y%3,j=[],C=16383,B=0,E=y-w;B<E;B+=C)j.push(g(b,B,B+C>E?E:B+C));return w===1?(v=b[y-1],j.push(l[v>>2]+l[v<<4&63]+"==")):w===2&&(v=(b[y-2]<<8)+b[y-1],j.push(l[v>>10]+l[v>>4&63]+l[v<<2&63]+"=")),j.join("")};for(var l=[],u=[],d=typeof Uint8Array<"u"?Uint8Array:Array,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0;f<64;++f)l[f]=A[f],u[A.charCodeAt(f)]=f;function p(b){var v=b.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=b.indexOf("=");return y===-1&&(y=v),[y,y===v?0:4-y%4]}function m(b){return l[b>>18&63]+l[b>>12&63]+l[b>>6&63]+l[63&b]}function g(b,v,y){for(var w,j=[],C=v;C<y;C+=3)w=(b[C]<<16&16711680)+(b[C+1]<<8&65280)+(255&b[C+2]),j.push(m(w));return j.join("")}u[45]=62,u[95]=63},6801:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v,y){var w;return(function(j,C){if(!(j instanceof C))throw new TypeError("Cannot call a class as a function")})(this,g),(w=(function(j,C,B){return C=A(C),(function(E,_){if(_&&(u(_)=="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S})(E)})(j,d()?Reflect.construct(C,B||[],A(j).constructor):C.apply(j,B))})(this,g,[y=y||"Cannot populate path `"+v+"` because it is not in your schema. Set the `strictPopulate` option to false to override."])).path=v,w}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"StrictPopulateError"}),o.exports=p},6814:o=>{o.exports=function(c){for(var l={},u=0,d=Object.keys(c);u<d.length;u++){var A=d[u];if(A.indexOf(".")!==-1)for(var f=A.split("."),p=f[0],m=0;m<f.length;++m)l[p]=1,m+1<f.length&&(p=p+"."+f[m+1]);else l[A]=1}return l}},6867:(o,c,l)=>{function u(B){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},u(B)}function d(B,E){(E==null||E>B.length)&&(E=B.length);for(var _=0,S=Array(E);_<E;_++)S[_]=B[_];return S}function A(B,E){for(var _=0;_<E.length;_++){var S=E[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,f(S.key),S)}}function f(B){var E=(function(_){if(u(_)!="object"||!_)return _;var S=_[Symbol.toPrimitive];if(S!==void 0){var N=S.call(_,"string");if(u(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)})(B);return u(E)=="symbol"?E:E+""}function p(){try{var B=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p=function(){return!!B})()}function m(){return m=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(B,E,_){var S=(function(O,k){for(;!{}.hasOwnProperty.call(O,k)&&(O=g(O))!==null;);return O})(B,E);if(S){var N=Object.getOwnPropertyDescriptor(S,E);return N.get?N.get.call(arguments.length<3?B:_):N.value}},m.apply(null,arguments)}function g(B){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},g(B)}function b(B,E){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,S){return _.__proto__=S,_},b(B,E)}var v=l(2081),y=l(241),w=l(6426),j=l(4327),C=(function(B){function E(N,O){var k;return(function(I,R){if(!(I instanceof R))throw new TypeError("Cannot call a class as a function")})(this,E),(k=(function(I,R,Q){return R=g(R),(function($,L){if(L&&(u(L)=="object"||typeof L=="function"))return L;if(L!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F})($)})(I,p()?Reflect.construct(R,Q||[],g(I).constructor):R.apply(I,Q))})(this,E,[N,O,"Map"])).$isSchemaMap=!0,k}return(function(N,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(O&&O.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),O&&b(N,O)})(E,B),_=E,S=[{key:"set",value:function(N,O){return w.set(N,O)}},{key:"cast",value:function(N,O,k,I,R){var Q;if(N instanceof v)return N;var $=(Q=R?.path)!==null&&Q!==void 0?Q:this.path;if(k){var L=new v({},$,O,this.$__schemaType);if(N instanceof l.g.Map){var F,G=(function(M,H){var Y=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(!Y){if(Array.isArray(M)||(Y=(function(ke,Z){if(ke){if(typeof ke=="string")return d(ke,Z);var te={}.toString.call(ke).slice(8,-1);return te==="Object"&&ke.constructor&&(te=ke.constructor.name),te==="Map"||te==="Set"?Array.from(ke):te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te)?d(ke,Z):void 0}})(M))||H){Y&&(M=Y);var ae=0,oe=function(){};return{s:oe,n:function(){return ae>=M.length?{done:!0}:{done:!1,value:M[ae++]}},e:function(ke){throw ke},f:oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var be,ge=!0,he=!1;return{s:function(){Y=Y.call(M)},n:function(){var ke=Y.next();return ge=ke.done,ke},e:function(ke){he=!0,be=ke},f:function(){try{ge||Y.return==null||Y.return()}finally{if(he)throw be}}}})(N.keys());try{for(G.s();!(F=G.n()).done;){var X=F.value,q=N.get(X);q=q==null?L.$__schemaType._castNullish(q):L.$__schemaType.cast(q,O,!0,null,{path:$+"."+X}),L.$init(X,q)}}catch(M){G.e(M)}finally{G.f()}}else for(var T=0,U=Object.keys(N);T<U.length;T++){var K=U[T],z=N[K];z=z==null?L.$__schemaType._castNullish(z):L.$__schemaType.cast(z,O,!0,null,{path:$+"."+K}),L.$init(K,z)}return L}return new v(N,$,O,this.$__schemaType)}},{key:"clone",value:function(){var N,O,k,I=(N=E,O=this,typeof(k=m(g(N.prototype),"clone",O))=="function"?function(R){return k.apply(O,R)}:k)([]);return this.$__schemaType!=null&&(I.$__schemaType=this.$__schemaType.clone()),I}},{key:"getEmbeddedSchemaType",value:function(){return this.$__schemaType}},{key:"toJSONSchema",value:function(N){var O=N?.useBsonType,k=this.getEmbeddedSchemaType(),I=this.options.required&&typeof this.options.required!="function",R=j("object","object",O,I);return R.additionalProperties=k.toJSONSchema(N),R}},{key:"autoEncryptionType",value:function(){return"object"}}],S&&A(_.prototype,S),Object.defineProperty(_,"prototype",{writable:!1}),_;var _,S})(w);C.schemaName="Map",C.prototype.OptionsConstructor=y,C.defaultOptions={},o.exports=C},6948:(o,c,l)=>{function u(p){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u(p)}function d(p,m,g){return Object.defineProperty(p,"prototype",{writable:!1}),p}var A=l(4450),f=d(function p(m){if((function(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")})(this,p),this._docs={},this._childDocs=[],m!=null&&(m=A(m),Object.assign(this,m),u(m.subPopulate)==="object"&&(this.populate=m.subPopulate),m.perDocumentLimit!=null&&m.limit!=null))throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+m.path+"`.")});o.exports=f},6949:(o,c,l)=>{function u(j){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},u(j)}function d(j,C){for(var B=0;B<C.length;B++){var E=C[B];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,A(E.key),E)}}function A(j){var C=(function(B){if(u(B)!="object"||!B)return B;var E=B[Symbol.toPrimitive];if(E!==void 0){var _=E.call(B,"string");if(u(_)!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)})(j);return u(C)=="symbol"?C:C+""}function f(){try{var j=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f=function(){return!!j})()}function p(j){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},p(j)}function m(j,C){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,E){return B.__proto__=E,B},m(j,C)}var g=l(8213),b=l(8260),v=l(7352),y=l(1875),w=(function(j){function C(_){var S,N;return(function(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")})(this,C),(S=(function(O,k,I){return k=p(k),(function(R,Q){if(Q&&(u(Q)=="object"||typeof Q=="function"))return Q;if(Q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $})(R)})(O,f()?Reflect.construct(k,I||[],p(O).constructor):k.apply(O,I))})(this,C,[N=b(_)==="model"?_.constructor.modelName+" validation failed":"Validation failed"])).errors={},S._message=N,_&&(_.$errors=S.errors),S}return(function(_,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(S&&S.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),S&&m(_,S)})(C,j),B=C,(E=[{key:"toString",value:function(){return this.name+": "+y(this)}},{key:"inspect",value:function(){return Object.assign(new Error(this.message),this)}},{key:"addError",value:function(_,S){if(S instanceof C)for(var N=S.errors,O=0,k=Object.keys(N);O<k.length;O++){var I=k[O];this.addError("".concat(_,".").concat(I),N[I])}else this.errors[_]=S,this.message=this._message+": "+y(this)}}])&&d(B.prototype,E),Object.defineProperty(B,"prototype",{writable:!1}),B;var B,E})(g);v.inspect.custom&&(w.prototype[v.inspect.custom]=w.prototype.inspect),Object.defineProperty(w.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}}),Object.defineProperty(w.prototype,"name",{value:"ValidationError"}),o.exports=w},6996:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v,y,w){var j;(function(B,E){if(!(B instanceof E))throw new TypeError("Cannot call a class as a function")})(this,g);var C=w.join(", ");return(j=(function(B,E,_){return E=A(E),(function(S,N){if(N&&(u(N)=="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O})(S)})(B,d()?Reflect.construct(E,_||[],A(B).constructor):E.apply(B,_))})(this,g,['No matching document found for id "'+v._doc._id+'" version '+y+' modifiedPaths "'+C+'"'])).version=y,j.modifiedPaths=w,j}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"VersionError"}),o.exports=p},7045:(o,c,l)=>{function u(C){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},u(C)}function d(C,B){var E=Object.keys(C);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(C);B&&(_=_.filter(function(S){return Object.getOwnPropertyDescriptor(C,S).enumerable})),E.push.apply(E,_)}return E}function A(C){for(var B=1;B<arguments.length;B++){var E=arguments[B]!=null?arguments[B]:{};B%2?d(Object(E),!0).forEach(function(_){f(C,_,E[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(E)):d(Object(E)).forEach(function(_){Object.defineProperty(C,_,Object.getOwnPropertyDescriptor(E,_))})}return C}function f(C,B,E){return(B=(function(_){var S=(function(N){if(u(N)!="object"||!N)return N;var O=N[Symbol.toPrimitive];if(O!==void 0){var k=O.call(N,"string");if(u(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(N)})(_);return u(S)=="symbol"?S:S+""})(B))in C?Object.defineProperty(C,B,{value:E,enumerable:!0,configurable:!0,writable:!0}):C[B]=E,C}var p=l(6426),m=p.CastError,g=l(9553),b=l(4327),v=l(3305);function y(C,B){p.call(this,C,B,"Decimal128")}function w(C){return this.cast(C)}y.schemaName="Decimal128",y.defaultOptions={},y.prototype=Object.create(p.prototype),y.prototype.constructor=y,y._cast=g,y.set=p.set,y.setters=[],y.get=p.get,y.cast=function(C){return arguments.length===0||(C===!1&&(C=this._defaultCaster),this._cast=C),this._cast},y._defaultCaster=function(C){if(C!=null&&!v(C,"Decimal128"))throw new Error;return C},y._checkRequired=function(C){return v(C,"Decimal128")},y.checkRequired=p.checkRequired,y.prototype.checkRequired=function(C,B){return p._isRef(this,C,B,!0)?!!C:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():y.checkRequired())(C)},y.prototype.cast=function(C,B,E,_,S){if(p._isRef(this,C,B,E))return v(C,"Decimal128")?C:this._castRef(C,B,E,S);var N;N=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():y.cast();try{return N(C)}catch(O){throw new m("Decimal128",C,this.path,O,this)}};var j=A(A({},p.prototype.$conditionalHandlers),{},{$gt:w,$gte:w,$lt:w,$lte:w});Object.defineProperty(y.prototype,"$conditionalHandlers",{enumerable:!1,value:j}),y.prototype.toJSONSchema=function(C){var B=this.options.required&&typeof this.options.required!="function";return b("string","decimal",C?.useBsonType,B)},y.prototype.autoEncryptionType=function(){return"decimal"},o.exports=y},7058:(o,c,l)=>{var u=l(5832).hp;function d(ie){return(function(me){if(Array.isArray(me))return y(me)})(ie)||(function(me){if(typeof Symbol<"u"&&me[Symbol.iterator]!=null||me["@@iterator"]!=null)return Array.from(me)})(ie)||v(ie)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function A(ie,me){var Be=Object.keys(ie);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(ie);me&&(Le=Le.filter(function(ve){return Object.getOwnPropertyDescriptor(ie,ve).enumerable})),Be.push.apply(Be,Le)}return Be}function f(ie){for(var me=1;me<arguments.length;me++){var Be=arguments[me]!=null?arguments[me]:{};me%2?A(Object(Be),!0).forEach(function(Le){p(ie,Le,Be[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(Be)):A(Object(Be)).forEach(function(Le){Object.defineProperty(ie,Le,Object.getOwnPropertyDescriptor(Be,Le))})}return ie}function p(ie,me,Be){return(me=(function(Le){var ve=(function($e){if(m($e)!="object"||!$e)return $e;var je=$e[Symbol.toPrimitive];if(je!==void 0){var Pe=je.call($e,"string");if(m(Pe)!="object")return Pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($e)})(Le);return m(ve)=="symbol"?ve:ve+""})(me))in ie?Object.defineProperty(ie,me,{value:Be,enumerable:!0,configurable:!0,writable:!0}):ie[me]=Be,ie}function m(ie){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(me){return typeof me}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me},m(ie)}function g(ie,me){return(function(Be){if(Array.isArray(Be))return Be})(ie)||(function(Be,Le){var ve=Be==null?null:typeof Symbol<"u"&&Be[Symbol.iterator]||Be["@@iterator"];if(ve!=null){var $e,je,Pe,Te,Ye=[],He=!0,it=!1;try{if(Pe=(ve=ve.call(Be)).next,Le===0){if(Object(ve)!==ve)return;He=!1}else for(;!(He=($e=Pe.call(ve)).done)&&(Ye.push($e.value),Ye.length!==Le);He=!0);}catch(It){it=!0,je=It}finally{try{if(!He&&ve.return!=null&&(Te=ve.return(),Object(Te)!==Te))return}finally{if(it)throw je}}return Ye}})(ie,me)||v(ie,me)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function b(ie,me){var Be=typeof Symbol<"u"&&ie[Symbol.iterator]||ie["@@iterator"];if(!Be){if(Array.isArray(ie)||(Be=v(ie))||me){Be&&(ie=Be);var Le=0,ve=function(){};return{s:ve,n:function(){return Le>=ie.length?{done:!0}:{done:!1,value:ie[Le++]}},e:function(Te){throw Te},f:ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $e,je=!0,Pe=!1;return{s:function(){Be=Be.call(ie)},n:function(){var Te=Be.next();return je=Te.done,Te},e:function(Te){Pe=!0,$e=Te},f:function(){try{je||Be.return==null||Be.return()}finally{if(Pe)throw $e}}}}function v(ie,me){if(ie){if(typeof ie=="string")return y(ie,me);var Be={}.toString.call(ie).slice(8,-1);return Be==="Object"&&ie.constructor&&(Be=ie.constructor.name),Be==="Map"||Be==="Set"?Array.from(ie):Be==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Be)?y(ie,me):void 0}}function y(ie,me){(me==null||me>ie.length)&&(me=ie.length);for(var Be=0,Le=Array(me);Be<me;Be++)Le[Be]=ie[Be];return Le}var w,j=l(3550).EventEmitter,C=l(8297),B=l(8213),E=l(6426),_=l(8879),S=l(2069),N=l(622),O=l(486),k=l(4450),I=l(3703),R=l(8260),Q=l(2003),$=l(5289),L=l(3381),F=l(1199),G=l(9539),X=l(5678),q=l(7834),T=l(2097),U=l(8768),K=l(533),z=/\.\d+(\.|$)/,M=l(1260).Ut,H=l(4957).middlewareFunctions,Y=M.concat(H).reduce(function(ie,me){return ie.add(me)},new Set),ae=U.isPOJO,oe=0,be=/^\d+$/;function ge(ie,me){if(!(this instanceof ge))return new ge(ie,me);if(this.obj=ie,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=me&&me.methods||{},this.methodOptions={},this.statics=me&&me.statics||{},this.tree={},this.query=me&&me.query||{},this.childSchemas=[],this.plugins=[],this.$id=++oe,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new C},this.options=this.defaultOptions(me),Array.isArray(ie)){var Be,Le=b(ie);try{for(Le.s();!(Be=Le.n()).done;){var ve=Be.value;this.add(ve)}}catch(It){Le.e(It)}finally{Le.f()}}else ie&&this.add(ie);if(me&&me.virtuals)for(var $e=me.virtuals,je=0,Pe=Object.keys($e);je<Pe.length;je++){var Te=Pe[je],Ye=$e[Te].options?$e[Te].options:void 0,He=this.virtual(Te,Ye);$e[Te].get&&He.get($e[Te].get),$e[Te].set&&He.set($e[Te].set)}var it=ie&&ie._id&&U.isObject(ie._id);!this.paths._id&&this.options._id&&!it&&O(this),this.setupTimestamp(this.options.timestamps)}function he(ie,me){for(var Be=0,Le=Object.keys(me);Be<Le.length;Be++){var ve=Le[Be],$e=null;if(me[ve]!=null)$e=me[ve];else{var je=I(ie.paths[ve],"options");if(je==null)continue;$e=je.alias}if($e){var Pe=ie.paths[ve].path;if(Array.isArray($e)){var Te,Ye=b($e);try{for(Ye.s();!(Te=Ye.n()).done;){var He=Te.value;if(typeof He!="string")throw new Error("Invalid value for alias option on "+Pe+", got "+He);ie.aliases[He]=Pe,ie.virtual(He).get((function(it){return function(){return typeof this.get=="function"?this.get(it):this[it]}})(Pe)).set((function(it){return function(It){return this.$set(it,It)}})(Pe))}}catch(it){Ye.e(it)}finally{Ye.f()}}else{if(typeof $e!="string")throw new Error("Invalid value for alias option on "+Pe+", got "+$e);ie.aliases[$e]=Pe,ie.virtual($e).get((function(it){return function(){return typeof this.get=="function"?this.get(it):this[it]}})(Pe)).set((function(it){return function(It){return this.$set(it,It)}})(Pe))}}}}ge.prototype=Object.create(j.prototype),ge.prototype.constructor=ge,ge.prototype.instanceOfSchema=!0,Object.defineProperty(ge.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0}),Object.defineProperty(ge.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0}),Object.defineProperty(ge.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0}),ge.prototype.obj,ge.prototype.paths,ge.prototype.tree,ge.prototype.clone=function(){var ie=this,me=this._clone();return me.on("init",function(Be){return ie.emit("init",Be)}),me},ge.prototype._clone=function(ie){var me=new(ie=ie||(this.base==null?ge:this.base.Schema))({},this._userProvidedOptions);me.base=this.base,me.obj=this.obj,me.options=k(this.options),me.callQueue=this.callQueue.map(function(Et){return Et}),me.methods=k(this.methods),me.methodOptions=k(this.methodOptions),me.statics=k(this.statics),me.query=k(this.query),me.plugins=Array.prototype.slice.call(this.plugins),me._indexes=k(this._indexes),me._searchIndexes=k(this._searchIndexes),me.s.hooks=this.s.hooks.clone(),me.tree=k(this.tree),me.paths=Object.fromEntries(Object.entries(this.paths).map(function(Et){var ur=g(Et,2);return[ur[0],ur[1].clone()]})),me.nested=k(this.nested),me.subpaths=k(this.subpaths);for(var Be=0,Le=Object.values(me.paths);Be<Le.length;Be++){var ve=Le[Be];if(ve.$isSingleNested){for(var $e=ve.path,je=0,Pe=Object.keys(ve.schema.paths);je<Pe.length;je++){var Te=Pe[je];me.singleNestedPaths[$e+"."+Te]=ve.schema.paths[Te]}for(var Ye=0,He=Object.keys(ve.schema.singleNestedPaths);Ye<He.length;Ye++){var it=He[Ye];me.singleNestedPaths[$e+"."+it]=ve.schema.singleNestedPaths[it]}for(var It=0,dt=Object.keys(ve.schema.subpaths);It<dt.length;It++){var Pt=dt[It];me.singleNestedPaths[$e+"."+Pt]=ve.schema.subpaths[Pt]}for(var vt=0,tr=Object.keys(ve.schema.nested);vt<tr.length;vt++){var Jt=tr[vt];me.singleNestedPaths[$e+"."+Jt]="nested"}}}return me._gatherChildSchemas(),me.virtuals=k(this.virtuals),me.$globalPluginsApplied=this.$globalPluginsApplied,me.$isRootDiscriminator=this.$isRootDiscriminator,me.$implicitlyCreated=this.$implicitlyCreated,me.$id=++oe,me.$originalSchemaId=this.$id,me.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null&&(me.discriminatorMapping=Object.assign({},this.discriminatorMapping)),this.discriminators!=null&&(me.discriminators=Object.assign({},this.discriminators)),this._applyDiscriminators!=null&&(me._applyDiscriminators=new Map(this._applyDiscriminators)),me.aliases=Object.assign({},this.aliases),me.encryptedFields=k(this.encryptedFields),me},ge.prototype.pick=function(ie,me){var Be=new ge({},me||this.options);if(!Array.isArray(ie))throw new B('Schema#pick() only accepts an array argument, got "'+m(ie)+'"');var Le,ve=b(ie);try{for(ve.s();!(Le=ve.n()).done;){var $e=Le.value;if(this._hasEncryptedField($e)){var je=this.encryptedFields[$e],Pe=this.path($e);Be.add(p({},$e,p({encrypt:je},this.options.typeKey,Pe)))}else if(this.nested[$e])Be.add(p({},$e,I(this.tree,$e)));else{var Te=this.path($e);if(Te==null)throw new B("Path `"+$e+"` is not in the schema");Be.add(p({},$e,Te))}}}catch(Ye){ve.e(Ye)}finally{ve.f()}return this._hasEncryptedFields()||(Be.options.encryptionType=null),Be},ge.prototype.omit=function(ie,me){var Be=new ge(this,me||this.options);if(!Array.isArray(ie))throw new B('Schema#omit() only accepts an array argument, got "'+m(ie)+'"');for(var Le in Be.remove(ie),Be.singleNestedPaths)ie.includes(Le)&&delete Be.singleNestedPaths[Le];return Be},ge.prototype.defaultOptions=function(ie){this._userProvidedOptions=ie==null?{}:k(ie);var me=this.base&&this.base.options||{};if((ie=f({strict:!("strict"in me)||me.strict,strictQuery:"strictQuery"in me&&me.strictQuery,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:!("id"in me)||me.id,typeKey:"type"},ie)).versionKey&&typeof ie.versionKey!="string")throw new B("`versionKey` must be falsy or string, got `"+m(ie.versionKey)+"`");if(typeof ie.read=="string"?ie.read=$(ie.read):Array.isArray(ie.read)&&typeof ie.read[0]=="string"&&(ie.read={mode:$(ie.read[0]),tags:ie.read[1]}),ie.optimisticConcurrency&&!ie.versionKey)throw new B("Must set `versionKey` if using `optimisticConcurrency`");return ie},ge.prototype.discriminator=function(ie,me,Be){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(ie,{schema:me,options:Be}),this},ge.prototype._defaultToObjectOptions=function(ie){var me=ie?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[me])return this._defaultToObjectOptionsMap[me];var Be=this.base&&this.base.options&&this.base.options[me]||{},Le=this.options[me]||{},ve=Object.assign({},Be,Le);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[me]=ve,ve},ge.prototype.encryptionType=function(ie){if(arguments.length===0)return this.options.encryptionType;if(typeof ie!="string"&&ie!==null)throw new Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=ie},ge.prototype.add=function(ie,me){if(ie instanceof ge||ie!=null&&ie.instanceOfSchema)return G(this,ie),this;if(ie._id===!1&&me==null&&(this.options._id=!1),(me=me||"")==="__proto__."||me==="constructor."||me==="prototype.")return this;for(var Be=Object.keys(ie),Le=this.options.typeKey,ve=0,$e=Be;ve<$e.length;ve++){var je=$e[ve];if(!U.specialProperties.has(je)){var Pe=me+je,Te=ie[je];if(Te==null)throw new TypeError("Invalid value for schema path `"+Pe+'`, got value "'+Te+'"');if(je!=="_id"||Te!==!1){var Ye=!1;if(typeof Te=="string"&&(Ye=(this.base!=null?this.base.Schema.Types:ge.Types)[Te.charAt(0).toUpperCase()+Te.substring(1)]!=null),je!=="_id"&&(m(Te)!=="object"&&typeof Te!="function"&&!Ye||Te==null))throw new TypeError("Invalid schema configuration: `".concat(Te,"` is not ")+"a valid type at path `".concat(je,"`. See ")+"https://bit.ly/mongoose-schematypes for a list of valid schema types.");if(Te instanceof N||(Te.constructor&&Te.constructor.name||null)==="VirtualType")this.virtual(Te);else{if(Array.isArray(Te)&&Te.length===1&&Te[0]==null)throw new TypeError("Invalid value for schema Array path `"+Pe+'`, got value "'+Te[0]+'"');if(ae(Te)||Te instanceof _)if(Object.keys(Te).length<1)me&&(this.nested[me.substring(0,me.length-1)]=!0),this.path(Pe,Te);else if(!Te[Le]||Le==="type"&&ae(Te.type)&&Te.type.type)this.nested[Pe]=!0,this.add(Te,Pe+".");else{var He=Te[Le];if(ae(He)&&Object.keys(He).length>0){me&&(this.nested[me.substring(0,me.length-1)]=!0);var it={};this._userProvidedOptions.typeKey&&(it.typeKey=this._userProvidedOptions.typeKey),this._userProvidedOptions.strict!=null&&(it.strict=this._userProvidedOptions.strict),this._userProvidedOptions.toObject!=null&&(it.toObject=U.omit(this._userProvidedOptions.toObject,["transform"])),this._userProvidedOptions.toJSON!=null&&(it.toJSON=U.omit(this._userProvidedOptions.toJSON,["transform"]));var It=new ge(He,it);It.$implicitlyCreated=!0;var dt=Object.assign({},Te,p({},Le,It));this.path(me+je,dt)}else if(me&&(this.nested[me.substring(0,me.length-1)]=!0),this.path(me+je,Te),Te!=null&&!Te.instanceOfSchema&&U.isPOJO(Te.discriminators)){var Pt=this.path(me+je);for(var vt in Te.discriminators)Pt.discriminator(vt,Te.discriminators[vt])}}else if(me&&(this.nested[me.substring(0,me.length-1)]=!0),this.path(me+je,Te),Te[0]!=null&&!Te[0].instanceOfSchema&&U.isPOJO(Te[0].discriminators)){var tr=this.path(me+je);for(var Jt in Te[0].discriminators)tr.discriminator(Jt,Te[0].discriminators[Jt])}if(Te.instanceOfSchema&&Te.encryptionType()!=null){if(this.encryptionType()!=Te.encryptionType())throw new Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(var Et=0,ur=Object.entries(Te.encryptedFields);Et<ur.length;Et++){var vr=g(ur[Et],2),Wt=vr[0],Gt=vr[1],at=Pe+"."+Wt;this._addEncryptedField(at,Gt)}}else if(m(Te)==="object"&&"encrypt"in Te){var rn=Te.encrypt;if(this.encryptionType()==null)throw new Error("encryptionType must be provided");this._addEncryptedField(Pe,rn)}else this._removeEncryptedField(Pe)}}}}var dr=Object.fromEntries(Object.entries(ie).map(function(et){var an=g(et,1)[0];return[me+an,null]}));return he(this,dr),this},ge.prototype._addEncryptedField=function(ie,me){if(this.path(ie).autoEncryptionType()==null)throw new Error("Invalid BSON type for FLE field: '".concat(ie,"'"));this.encryptedFields[ie]=k(me)},ge.prototype._removeEncryptedField=function(ie){delete this.encryptedFields[ie]},ge.prototype._hasEncryptedFields=function(){return Object.keys(this.encryptedFields).length>0},ge.prototype._hasEncryptedField=function(ie){return ie in this.encryptedFields},ge.prototype._buildEncryptedFields=function(){var ie=this;return{fields:Object.entries(this.encryptedFields).map(function(me){var Be=g(me,2),Le=Be[0],ve=Be[1];return f({path:Le,bsonType:ie.path(Le).autoEncryptionType()},ve)})}},ge.prototype._buildSchemaMap=function(){var ie=this;return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(function(me,Be){var Le=g(Be,2),ve=Le[0],$e=Le[1],je=ie.path(ve).autoEncryptionType();return(function(Pe,Te,Ye){for(var He=0,it=Pe[He];He<Pe.length-1;it=Pe[++He])Te[it]=Te[it]==null?{bsonType:"object",properties:{}}:Te[it],Te=Te[it].properties;Te[it]=Ye})(ve.split("."),me,{encrypt:f(f({},$e),{},{bsonType:je})}),me},{})}},ge.prototype.alias=function(ie,me){return he(this,p({},ie,me)),this},ge.prototype.removeIndex=function(ie){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(m(ie)!=="object"&&typeof ie!="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(m(ie)==="object")for(var me=this._indexes.length-1;me>=0;--me)F(this._indexes[me][0],ie)&&this._indexes.splice(me,1);else for(var Be=this._indexes.length-1;Be>=0;--Be)this._indexes[Be][1]!=null&&this._indexes[Be][1].name===ie&&this._indexes.splice(Be,1);return this},ge.prototype.clearIndexes=function(){return this._indexes.length=0,this},ge.prototype.searchIndex=function(ie){return this._searchIndexes.push(ie),this},ge.reserved=Object.create(null),ge.prototype.reserved=ge.reserved;var ke=ge.reserved;function Z(ie){return/\.\d+/.test(ie)?ie.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$"):ie}function te(ie,me){if(ie.mapPaths.length===0)return null;var Be,Le=b(ie.mapPaths);try{for(Le.s();!(Be=Le.n()).done;){var ve=Be.value,$e=ve.path.replace(/\.\$\*/g,"");if(me===$e||me.startsWith($e+".")&&me.slice($e.length+1).indexOf(".")===-1)return ve;if(ve.schema&&me.startsWith($e+".")){var je=me.slice($e.length+1);return je=je.slice(je.indexOf(".")+1),ve.schema.paths[je]}if(ve.$isSchemaMap&&me.startsWith($e+".")){var Pe=me.slice($e.length+1);Pe=Pe.slice(Pe.indexOf(".")+1);var Te=ve.$__schemaType._presplitPath;if(Pe.indexOf(".")===-1&&Te[Te.length-1]==="$*")return ve.$__schemaType;if(Pe.indexOf(".")!==-1&&ve.$__schemaType.schema&&Te[Te.length-1]==="$*")return ve.$__schemaType.schema.path(Pe.slice(Pe.indexOf(".")+1))}}}catch(Ye){Le.e(Ye)}finally{Le.f()}return null}function fe(ie,me,Be){var Le=me.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(Le.length<2)return ie.paths.hasOwnProperty(Le[0])?ie.paths[Le[0]]:"adhocOrUndefined";var ve=ie.path(Le[0]),$e=!1;if(!ve)return"adhocOrUndefined";for(var je=Le.length-1,Pe=1;Pe<Le.length;++Pe){$e=!1;var Te=Le[Pe];if(Pe===je&&ve&&!/\D/.test(Te)){ve=ve.$isMongooseDocumentArray?ve.$embeddedSchemaType:ve instanceof w.Array?ve.caster:void 0;break}if(/\D/.test(Te)){if(!ve||!ve.schema){ve=void 0;break}$e=ve.schema.pathType(Te)==="nested",ve=ve.schema.path(Te)}else ve instanceof w.Array&&Pe!==je&&(ve=ve.caster)}return ie.subpaths[Be]=ve,ve?"real":$e?"nested":"adhocOrUndefined"}function we(ie,me){var Be,Le=b(ie.childSchemas);try{for(Le.s();!(Be=Le.n()).done;){var ve=Be.value.schema;ve.$implicitlyCreated&&(Object.assign(ve.options,me),we(ve,me))}}catch($e){Le.e($e)}finally{Le.f()}}ke.prototype=ke.emit=ke.listeners=ke.removeListener=ke.collection=ke.errors=ke.get=ke.init=ke.isModified=ke.isNew=ke.populated=ke.remove=ke.save=ke.toObject=ke.validate=1,ke.collection=1,ge.prototype.path=function(ie,me){if(me===void 0){if(this.paths[ie]!=null)return this.paths[ie];var Be=Z(ie),Le=(function(ut,Ut,$t){if(ut.paths.hasOwnProperty(Ut))return ut.paths[Ut];if(ut.subpaths.hasOwnProperty($t)){var Yt=ut.subpaths[$t];return Yt==="nested"?void 0:Yt}if(ut.singleNestedPaths.hasOwnProperty($t)&&m(ut.singleNestedPaths[$t])==="object"){var Vt=ut.singleNestedPaths[$t];return Vt==="nested"?void 0:Vt}return null})(this,ie,Be);if(Le!=null)return Le;var ve=te(this,ie);return ve??((Le=this.hasMixedParent(Be))!=null?Le:z.test(ie)?(function(ut,Ut,$t){return fe(ut,Ut,$t),ut.subpaths[$t]})(this,ie,Be):void 0)}var $e=ie.split(".")[0];if(ke[$e]&&!this.options.suppressReservedKeysWarning){var je="`".concat($e,"` is a reserved schema pathname and may break some functionality. ")+"You are allowed to use it, but use at your own risk. To disable this warning pass `suppressReservedKeysWarning` as a schema option.";U.warn(je)}m(me)==="object"&&U.hasUserDefinedProperty(me,"ref")&&K(me.ref,ie);var Pe,Te=ie.split(/\./),Ye=Te.pop(),He=this.tree,it="",It=b(Te);try{for(It.s();!(Pe=It.n()).done;){var dt=Pe.value;if(U.specialProperties.has(dt))throw new Error("Cannot set special property `"+dt+"` on a schema");if(it=it+=(it.length>0?".":"")+dt,He[dt]||(this.nested[it]=!0,He[dt]={}),m(He[dt])!=="object"){var Pt="Cannot set nested path `"+ie+"`. Parent path `"+it+"` already set to type "+He[dt].name+".";throw new Error(Pt)}He=He[dt]}}catch(ut){It.e(ut)}finally{It.f()}He[Ye]=k(me),this.paths[ie]=this.interpretAsType(ie,me,this.options);var vt=this.paths[ie];if(this.childSchemas=this.childSchemas.filter(function(ut){return ut.path!==ie}),vt.$isSchemaMap){var tr=ie+".$*";this.paths[tr]=vt.$__schemaType,this.mapPaths.push(this.paths[tr]),vt.$__schemaType.$isSingleNested&&this.childSchemas.push({schema:vt.$__schemaType.schema,model:vt.$__schemaType.caster,path:ie})}if(vt.$isSingleNested){for(var Jt=0,Et=Object.keys(vt.schema.paths);Jt<Et.length;Jt++){var ur=Et[Jt];this.singleNestedPaths[ie+"."+ur]=vt.schema.paths[ur]}for(var vr=0,Wt=Object.keys(vt.schema.singleNestedPaths);vr<Wt.length;vr++){var Gt=Wt[vr];this.singleNestedPaths[ie+"."+Gt]=vt.schema.singleNestedPaths[Gt]}for(var at=0,rn=Object.keys(vt.schema.subpaths);at<rn.length;at++){var dr=rn[at];this.singleNestedPaths[ie+"."+dr]=vt.schema.subpaths[dr]}for(var et=0,an=Object.keys(vt.schema.nested);et<an.length;et++){var gr=an[et];this.singleNestedPaths[ie+"."+gr]="nested"}Object.defineProperty(vt.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),vt.caster.base=this.base,this.childSchemas.push({schema:vt.schema,model:vt.caster,path:ie})}else vt.$isMongooseDocumentArray&&(Object.defineProperty(vt.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),vt.casterConstructor.base=this.base,this.childSchemas.push({schema:vt.schema,model:vt.casterConstructor,path:ie}));if(vt.$isMongooseArray&&vt.caster instanceof E){for(var In=ie,ln=vt;ln.$isMongooseArray;)In+=".$",ln.$isMongooseDocumentArray?(ln.$embeddedSchemaType._arrayPath=In,ln.$embeddedSchemaType._arrayParentPath=ie,ln=ln.$embeddedSchemaType):(ln.caster._arrayPath=In,ln.caster._arrayParentPath=ie,ln=ln.caster),this.subpaths[In]=ln;for(var gn=0,Yn=[];gn<Yn.length;gn++){var Gr=Yn[gn];this.subpaths[Gr.path]=Gr}}if(vt.$isMongooseDocumentArray){for(var Sn=0,ce=Object.keys(vt.schema.paths);Sn<ce.length;Sn++){var Ne=ce[Sn],Re=vt.schema.paths[Ne];this.subpaths[ie+"."+Ne]=Re,m(Re)==="object"&&Re!=null&&Re.$parentSchemaDocArray==null&&(Re.$parentSchemaDocArray=vt)}for(var Ve=0,ye=Object.keys(vt.schema.subpaths);Ve<ye.length;Ve++){var De=ye[Ve],qe=vt.schema.subpaths[De];this.subpaths[ie+"."+De]=qe,m(qe)==="object"&&qe!=null&&qe.$parentSchemaDocArray==null&&(qe.$parentSchemaDocArray=vt)}for(var Ze=0,ht=Object.keys(vt.schema.singleNestedPaths);Ze<ht.length;Ze++){var ct=ht[Ze],gt=vt.schema.singleNestedPaths[ct];this.subpaths[ie+"."+ct]=gt,m(gt)==="object"&&gt!=null&&gt.$parentSchemaDocArray==null&&(gt.$parentSchemaDocArray=vt)}}return this},ge.prototype._gatherChildSchemas=function(){for(var ie=[],me=0,Be=Object.keys(this.paths);me<Be.length;me++){var Le=Be[me];if(typeof Le=="string"){var ve=this.paths[Le];ve.$isMongooseDocumentArray||ve.$isSingleNested?ie.push({schema:ve.schema,model:ve.caster,path:Le}):ve.$isSchemaMap&&ve.$__schemaType.$isSingleNested&&ie.push({schema:ve.$__schemaType.schema,model:ve.$__schemaType.caster,path:Le})}}return this.childSchemas=ie,ie},Object.defineProperty(ge.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null}),ge.prototype.interpretAsType=function(ie,me,Be){if(me instanceof E){if(me.path===ie)return me;var Le=me.clone();return Le.path=ie,Le}var ve=this.base!=null?this.base.Schema.Types:ge.Types,$e=this.base!=null?this.base.Types:l(9600);if(!(U.isPOJO(me)||me instanceof _)&&U.getFunctionName(me.constructor)!=="Object"){var je=me;(me={})[Be.typeKey]=je}var Pe,Te=me[Be.typeKey]&&(me[Be.typeKey]instanceof Function||Be.typeKey!=="type"||!me.type.type)?me[Be.typeKey]:{};if(Te instanceof E){if(Te.path===ie)return Te;var Ye=Te.clone();return Ye.path=ie,Ye}if(U.isPOJO(Te)||Te==="mixed")return new ve.Mixed(ie,me);if(Array.isArray(Te)||Te===Array||Te==="array"||Te===ve.Array){var He=Te===Array||Te==="array"?me.cast||me.of:Te[0];if(He&&He.instanceOfSchema){if(!(He instanceof ge)){if(!this.options._isMerging)throw new TypeError("Schema for array path `"+ie+"` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with `npm list mongoose`. If you are still getting this error, please add `new Schema()` around the path: "+"".concat(ie,": new Schema(...)"));He=new ge(He)}return new ve.DocumentArray(ie,He,me)}if(He&&He[Be.typeKey]&&He[Be.typeKey].instanceOfSchema){if(!(He[Be.typeKey]instanceof ge)){if(!this.options._isMerging)throw new TypeError("Schema for array path `"+ie+"` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with `npm list mongoose`. If you are still getting this error, please add `new Schema()` around the path: "+"".concat(ie,": new Schema(...)"));He[Be.typeKey]=new ge(He[Be.typeKey])}return new ve.DocumentArray(ie,He[Be.typeKey],me,He)}if(He!==void 0&&(Array.isArray(He)||He.type===Array||He.type=="Array"))return He&&He.type=="Array"&&(He.type=Array),new ve.Array(ie,this.interpretAsType(ie,He,Be),me);var it=He==null||!He[Be.typeKey]||Be.typeKey==="type"&&He.type.type?He:He[Be.typeKey];if(typeof He=="string")He=ve[He.charAt(0).toUpperCase()+He.substring(1)];else if(U.isPOJO(it)){if(Object.keys(it).length){var It={minimize:Be.minimize};Be.typeKey&&(It.typeKey=Be.typeKey),Be.hasOwnProperty("strict")&&(It.strict=Be.strict),Be.hasOwnProperty("strictQuery")&&(It.strictQuery=Be.strictQuery),Be.hasOwnProperty("toObject")&&(It.toObject=U.omit(Be.toObject,["transform"])),Be.hasOwnProperty("toJSON")&&(It.toJSON=U.omit(Be.toJSON,["transform"])),this._userProvidedOptions.hasOwnProperty("_id")?It._id=this._userProvidedOptions._id:ge.Types.DocumentArray.defaultOptions._id!=null&&(It._id=ge.Types.DocumentArray.defaultOptions._id);var dt=new ge(it,It);return dt.$implicitlyCreated=!0,new ve.DocumentArray(ie,dt,me)}return new ve.Array(ie,ve.Mixed,me)}if(He){if(Te=!He[Be.typeKey]||Be.typeKey==="type"&&He.type.type?He:He[Be.typeKey],Array.isArray(Te))return new ve.Array(ie,this.interpretAsType(ie,Te,Be),me);if((Pe=typeof Te=="string"?Te:Te.schemaName||U.getFunctionName(Te))==="ClockDate"&&(Pe="Date"),Pe===void 0)throw new TypeError("Invalid schema configuration: "+"Could not determine the embedded type for array `".concat(ie,"`. ")+"See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.");if(!ve.hasOwnProperty(Pe))throw new TypeError("Invalid schema configuration: "+"`".concat(Pe,"` is not a valid type within the array `").concat(ie,"`.")+"See https://bit.ly/mongoose-schematypes for a list of valid schema types.")}return new ve.Array(ie,He||ve.Mixed,me,Be)}if(Te&&Te.instanceOfSchema)return new ve.Subdocument(Te,ie,me);if((Pe=u.isBuffer(Te)?"Buffer":typeof Te=="function"||m(Te)==="object"?Te.schemaName||U.getFunctionName(Te):Te===$e.ObjectId?"ObjectId":Te===$e.Decimal128?"Decimal128":Te==null?""+Te:Te.toString())&&(Pe=Pe.charAt(0).toUpperCase()+Pe.substring(1)),Pe==="ObjectID"&&(Pe="ObjectId"),Pe==="ClockDate"&&(Pe="Date"),Pe===void 0)throw new TypeError("Invalid schema configuration: `".concat(ie,"` schematype definition is ")+"invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.");if(ve[Pe]==null)throw new TypeError("Invalid schema configuration: `".concat(Pe,"` is not ")+"a valid type at path `".concat(ie,"`. See ")+"https://bit.ly/mongoose-schematypes for a list of valid schema types.");var Pt=new ve[Pe](ie,me);return Pt.$isSchemaMap&&(function(vt,tr,Jt,Et,ur){var vr=Jt+".$*",Wt={type:{}};U.hasUserDefinedProperty(Et,"of")&&((Wt=U.isPOJO(Et.of)&&Object.keys(Et.of).length>0&&!U.hasUserDefinedProperty(Et.of,vt.options.typeKey)?p({},vt.options.typeKey,new ge(Et.of)):U.isPOJO(Et.of)?Object.assign({},Et.of):p({},vt.options.typeKey,Et.of))[vt.options.typeKey]&&Wt[vt.options.typeKey].instanceOfSchema&&Wt[vt.options.typeKey].eachPath(function(Gt,at){if(at.options.select===!0||at.options.select===!1)throw new B('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+Jt+"."+Gt+'"')}),U.hasUserDefinedProperty(Et,"ref")&&(Wt.ref=Et.ref)),tr.$__schemaType=vt.interpretAsType(vr,Wt,ur)})(this,Pt,ie,me,Be),Pt},ge.prototype.eachPath=function(ie){for(var me=Object.keys(this.paths),Be=me.length,Le=0;Le<Be;++Le)ie(me[Le],this.paths[me[Le]]);return this},ge.prototype.requiredPaths=function(ie){if(this._requiredpaths&&!ie)return this._requiredpaths;for(var me=Object.keys(this.paths),Be=me.length,Le=[];Be--;){var ve=me[Be];this.paths[ve].isRequired&&Le.push(ve)}return this._requiredpaths=Le,this._requiredpaths},ge.prototype.indexedPaths=function(){return this._indexedpaths||(this._indexedpaths=this.indexes()),this._indexedpaths},ge.prototype.pathType=function(ie){if(this.paths.hasOwnProperty(ie))return"real";if(this.virtuals.hasOwnProperty(ie))return"virtual";if(this.nested.hasOwnProperty(ie))return"nested";var me=Z(ie);if(this.subpaths.hasOwnProperty(me)||this.subpaths.hasOwnProperty(ie))return"real";var Be=this.singleNestedPaths.hasOwnProperty(me)||this.singleNestedPaths.hasOwnProperty(ie);return Be?Be==="nested"?"nested":"real":te(this,ie)!=null?"real":/\.\d+\.|\.\d+$/.test(ie)?fe(this,ie,me):"adhocOrUndefined"},ge.prototype.hasMixedParent=function(ie){var me=ie.split(/\./g);ie="";for(var Be=0;Be<me.length;++Be)if(ie=Be>0?ie+"."+me[Be]:me[Be],this.paths.hasOwnProperty(ie)&&this.paths[ie]instanceof w.Mixed)return this.paths[ie];return null},ge.prototype.setupTimestamp=function(ie){return T(this,ie)},ge.prototype.queue=function(ie,me){return this.callQueue.push([ie,me]),this},ge.prototype.pre=function(ie){if(ie instanceof RegExp){var me,Be=Array.prototype.slice.call(arguments,1),Le=b(Y);try{for(Le.s();!(me=Le.n()).done;){var ve=me.value;ie.test(ve)&&this.pre.apply(this,[ve].concat(Be))}}catch(Ye){Le.e(Ye)}finally{Le.f()}return this}if(Array.isArray(ie)){var $e,je=Array.prototype.slice.call(arguments,1),Pe=b(ie);try{for(Pe.s();!($e=Pe.n()).done;){var Te=$e.value;this.pre.apply(this,[Te].concat(je))}}catch(Ye){Pe.e(Ye)}finally{Pe.f()}return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this},ge.prototype.post=function(ie){if(ie instanceof RegExp){var me,Be=Array.prototype.slice.call(arguments,1),Le=b(Y);try{for(Le.s();!(me=Le.n()).done;){var ve=me.value;ie.test(ve)&&this.post.apply(this,[ve].concat(Be))}}catch(Ye){Le.e(Ye)}finally{Le.f()}return this}if(Array.isArray(ie)){var $e,je=Array.prototype.slice.call(arguments,1),Pe=b(ie);try{for(Pe.s();!($e=Pe.n()).done;){var Te=$e.value;this.post.apply(this,[Te].concat(je))}}catch(Ye){Pe.e(Ye)}finally{Pe.f()}return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this},ge.prototype.plugin=function(ie,me){if(typeof ie!="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+m(ie)+'"');if(me&&me.deduplicate){var Be,Le=b(this.plugins);try{for(Le.s();!(Be=Le.n()).done;)if(Be.value.fn===ie)return this}catch(ve){Le.e(ve)}finally{Le.f()}}return this.plugins.push({fn:ie,opts:me}),ie(this,me),this},ge.prototype.method=function(ie,me,Be){if(typeof ie!="string")for(var Le in ie)this.methods[Le]=ie[Le],this.methodOptions[Le]=k(Be);else this.methods[ie]=me,this.methodOptions[ie]=k(Be);return this},ge.prototype.static=function(ie,me){if(typeof ie!="string")for(var Be in ie)this.statics[Be]=ie[Be];else this.statics[ie]=me;return this},ge.prototype.index=function(ie,me){for(var Be in ie||(ie={}),me||(me={}),me.expires&&U.expires(me),ie)this.aliases[Be]&&(ie=U.renameObjKey(ie,Be,this.aliases[Be]));for(var Le=0,ve=Object.keys(ie);Le<ve.length;Le++){var $e=ve[Le];ie[$e]==="ascending"||ie[$e]==="asc"?ie[$e]=1:ie[$e]!=="descending"&&ie[$e]!=="desc"||(ie[$e]=-1)}var je,Pe=b(this.indexes());try{for(Pe.s();!(je=Pe.n()).done;){var Te=je.value;me.name==null&&Te[1].name==null&&F(Te[0],ie)&&U.warn("Duplicate schema index on ".concat(JSON.stringify(ie),' found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.'))}}catch(Ye){Pe.e(Ye)}finally{Pe.f()}return this._indexes.push([ie,me]),this},ge.prototype.set=function(ie,me,Be){if(arguments.length===1)return this.options[ie];switch(ie){case"read":typeof me=="string"?this.options[ie]={mode:$(me),tags:Be}:Array.isArray(me)&&typeof me[0]=="string"?this.options[ie]={mode:$(me[0]),tags:me[1]}:this.options[ie]=me,this._userProvidedOptions[ie]=this.options[ie];break;case"timestamps":this.setupTimestamp(me),this.options[ie]=me,this._userProvidedOptions[ie]=this.options[ie];break;case"_id":this.options[ie]=me,this._userProvidedOptions[ie]=this.options[ie],me&&!this.paths._id?O(this):!me&&this.paths._id!=null&&this.paths._id.auto&&this.remove("_id");break;default:this.options[ie]=me,this._userProvidedOptions[ie]=this.options[ie]}return ie==="strict"&&we(this,{strict:me}),ie==="strictQuery"&&we(this,{strictQuery:me}),ie==="toObject"&&(delete(me=f({},me)).transform,we(this,{toObject:me})),ie==="toJSON"&&(delete(me=f({},me)).transform,we(this,{toJSON:me})),this},ge.prototype.get=function(ie){return this.options[ie]};var Fe="2d 2dsphere hashed text".split(" ");function _e(ie,me){var Be,Le=me.split("."),ve=Le.pop(),$e=ie.tree,je=b(Le);try{for(je.s();!(Be=je.n()).done;)$e=$e[Be.value]}catch(Pe){je.e(Pe)}finally{je.f()}delete $e[ve]}function Ce(ie){return ie.startsWith("$[")&&ie.endsWith("]")}Object.defineProperty(ge,"indexTypes",{get:function(){return Fe},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}}),ge.prototype.indexes=function(){return Q(this)},ge.prototype.virtual=function(ie,me){if(ie instanceof N||R(ie)==="VirtualType")return this.virtual(ie.path,ie.options);if(me=new S(me),U.hasUserDefinedProperty(me,["ref","refPath"])){if(me.localField==null)throw new Error("Reference virtuals require `localField` option");if(me.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");var Be=this.virtual(ie);Be.options=me,this.pre("init",function(it,It){if(X.has(ie,it)){var dt=X.get(ie,it);if(this.$$populatedVirtuals||(this.$$populatedVirtuals={}),me.justOne||me.count?this.$$populatedVirtuals[ie]=Array.isArray(dt)?dt[0]:dt:this.$$populatedVirtuals[ie]=Array.isArray(dt)?dt:dt==null?[]:[dt],It!=null&&It.hydratedPopulatedDocs&&!me.count){var Pt=Be._getModelNamesForPopulate(this),vt=this.$$populatedVirtuals[ie];if(Array.isArray(vt)||vt.$__||Pt?.length!==1){if(Array.isArray(vt)&&Pt?.length===1){for(var tr=this.db.model(Pt[0]),Jt=0;Jt<vt.length;++Jt)vt[Jt].$__||(vt[Jt]=tr.hydrate(vt[Jt],null,{hydratedPopulatedDocs:!0}));var Et=me.foreignField;this.$populated(ie,vt.map(function(vr){return vr==null?vr:vr.get(typeof Et=="function"?Et.call(vr,vr):Et)}),{populateModelSymbol:tr})}}else{var ur=this.db.model(Pt[0]);this.$$populatedVirtuals[ie]=ur.hydrate(vt)}}X.unset(ie,it)}}),Be.set(function(it){return this.$$populatedVirtuals||(this.$$populatedVirtuals={}),q(this.$$populatedVirtuals,ie,it,me)}),typeof me.get=="function"&&Be.get(me.get);for(var Le=ie.split("."),ve=Le[0],$e=0;$e<Le.length-1;++$e)if(this.paths[ve]!=null){if(this.paths[ve].$isMongooseDocumentArray||this.paths[ve].$isSingleNested){var je=Le.slice($e+1).join(".");this.paths[ve].schema.virtual(je,me);break}if(this.paths[ve].$isSchemaMap){var Pe=Le.slice($e+2).join(".");this.paths[ve].$__schemaType.schema.virtual(Pe,me);break}ve+="."+Le[$e+1]}return Be}var Te=this.virtuals,Ye=ie.split(".");if(this.pathType(ie)==="real")throw new Error('Virtual path "'+ie+'" conflicts with a real path in the schema');if(Te[ie]=Ye.reduce(function(it,It,dt){return it[It]||(it[It]=dt===Ye.length-1?new N(me,ie):{}),it[It]},this.tree),me&&me.applyToArray&&Ye.length>1){var He=this.path(Ye.slice(0,-1).join("."));if(He&&He.$isMongooseArray)return He.virtual(Ye[Ye.length-1],me);throw new B('Path "'.concat(He,'" is not an array'))}return Te[ie]},ge.prototype.virtualpath=function(ie){return this.virtuals.hasOwnProperty(ie)?this.virtuals[ie]:null},ge.prototype.remove=function(ie){return typeof ie=="string"&&(ie=[ie]),Array.isArray(ie)&&ie.forEach(function(me){if(this.path(me)!=null||this.nested[me]){if(this.nested[me]){var Be,Le=b(Object.keys(this.paths).concat(Object.keys(this.nested)));try{for(Le.s();!(Be=Le.n()).done;){var ve=Be.value;ve.startsWith(me+".")&&(delete this.paths[ve],delete this.nested[ve],_e(this,ve))}}catch($e){Le.e($e)}finally{Le.f()}return delete this.nested[me],void _e(this,me)}delete this.paths[me],_e(this,me),this._removeEncryptedField(me)}},this),this},ge.prototype.removeVirtual=function(ie){if(typeof ie=="string"&&(ie=[ie]),Array.isArray(ie)){var me,Be=b(ie);try{for(Be.s();!(me=Be.n()).done;){var Le=me.value;if(this.virtuals[Le]==null)throw new B('Attempting to remove virtual "'.concat(Le,'" that does not exist.'))}}catch(Pe){Be.e(Pe)}finally{Be.f()}var ve,$e=b(ie);try{for($e.s();!(ve=$e.n()).done;){var je=ve.value;delete this.paths[je],delete this.virtuals[je],je.indexOf(".")!==-1?X.unset(je,this.tree):delete this.tree[je]}}catch(Pe){$e.e(Pe)}finally{$e.f()}}return this},ge.prototype.loadClass=function(ie,me){return ie===Object.prototype||ie===Function.prototype||ie.prototype.hasOwnProperty("$isMongooseModelPrototype")||ie.prototype.hasOwnProperty("$isMongooseDocumentPrototype")||(this.loadClass(Object.getPrototypeOf(ie),me),me||Object.getOwnPropertyNames(ie).forEach(function(Be){if(!Be.match(/^(length|name|prototype|constructor|__proto__)$/)){var Le=Object.getOwnPropertyDescriptor(ie,Be);Le.hasOwnProperty("value")&&this.static(Be,Le.value)}},this),Object.getOwnPropertyNames(ie.prototype).forEach(function(Be){if(!Be.match(/^(constructor)$/)){var Le=Object.getOwnPropertyDescriptor(ie.prototype,Be);me||typeof Le.value=="function"&&this.method(Be,Le.value),typeof Le.get=="function"&&(this.virtuals[Be]&&(this.virtuals[Be].getters=[]),this.virtual(Be).get(Le.get)),typeof Le.set=="function"&&(this.virtuals[Be]&&(this.virtuals[Be].setters=[]),this.virtual(Be).set(Le.set))}},this)),this},ge.prototype._getSchema=function(ie){var me=this.path(ie),Be=[];if(me)return me.$fullPath=ie,me;for(var Le=ie.split("."),ve=0;ve<Le.length;++ve)(Le[ve]==="$"||Ce(Le[ve]))&&(Le[ve]="0"),be.test(Le[ve])&&(Le[ve]="$");return(function $e(je,Pe){for(var Te,Ye,He=je.length+1;He--;)if(Ye=je.slice(0,He).join("."),Te=Pe.path(Ye)){if(Be.push(Ye),Te.caster){if(Te.caster instanceof w.Mixed)return Te.caster.$fullPath=Be.join("."),Te.caster;if(He!==je.length){if(He+1===je.length&&Te.$embeddedSchemaType&&(je[He]==="$"||Ce(je[He])))return Te.$embeddedSchemaType;if(Te.schema){var it=void 0;return je[He]==="$"||Ce(je[He])?He+1===je.length?Te.$embeddedSchemaType:((it=$e(je.slice(He+1),Te.schema))&&(it.$parentSchemaDocArray=it.$parentSchemaDocArray||(Te.schema.$isSingleNested?null:Te)),it):((it=$e(je.slice(He),Te.schema))&&(it.$parentSchemaDocArray=it.$parentSchemaDocArray||(Te.schema.$isSingleNested?null:Te)),it)}}}else if(Te.$isSchemaMap){if(He>=je.length)return Te;if(He+1>=je.length||Te.$__schemaType instanceof w.Mixed)return Te.$__schemaType;if(Te.$__schemaType.schema!=null)return $e(je.slice(He+1),Te.$__schemaType.schema)}return Te.$fullPath=Be.join("."),Te}})(Le,this)},ge.prototype._getPathType=function(ie){return this.path(ie)?"real":(function me(Be,Le){for(var ve,$e,je=Be.length+1;je--;){if($e=Be.slice(0,je).join("."),ve=Le.path($e))return ve.caster?ve.caster instanceof w.Mixed?{schema:ve,pathType:"mixed"}:je!==Be.length&&ve.schema?Be[je]==="$"||Ce(Be[je])?je===Be.length-1?{schema:ve,pathType:"nested"}:me(Be.slice(je+1),ve.schema):me(Be.slice(je),ve.schema):{schema:ve,pathType:ve.$isSingleNested?"nested":"array"}:{schema:ve,pathType:"real"};if(je===Be.length&&Le.nested[$e])return{schema:Le,pathType:"nested"}}return{schema:ve||Le,pathType:"undefined"}})(ie.split("."),this)},ge.prototype._transformDuplicateKeyError=function(ie){if(!this._duplicateKeyErrorMessagesByPath||ie.code!==11e3&&ie.code!==11001)return ie;if(ie.keyPattern!=null){var me=ie.keyPattern,Be=Object.keys(me);if(Be.length!==1)return ie;var Le=Be[0];return this._duplicateKeyErrorMessagesByPath.hasOwnProperty(Le)?new B(this._duplicateKeyErrorMessagesByPath[Le],{cause:ie}):ie}return ie},ge.prototype._preCompile=function(){this.plugin(L,{deduplicate:!0})},ge.prototype.toJSONSchema=function(ie){for(var me,Be=(me=ie?.useBsonType)!==null&&me!==void 0&&me,Le=Be?{required:[],properties:{}}:{type:"object",required:[],properties:{}},ve=0,$e=Object.keys(this.paths);ve<$e.length;ve++){var je=$e[ve],Pe=this.paths[je];if(Pe._presplitPath.indexOf("$*")===-1){var Te=Le;if(Pe._presplitPath.length>1)for(var Ye=0;Ye<Pe._presplitPath.length-1;++Ye){var He=Pe._presplitPath[Ye];Te.properties[He]==null&&(Te.properties[He]=Be?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}}),Te=Te.properties[He]}var it=Pe._presplitPath[Pe._presplitPath.length-1],It=!1;je==="_id"?(Te.required||(Te.required=[]),Te.required.push("_id"),It=!0):Pe.options.required&&typeof Pe.options.required!="function"&&(Te.required||(Te.required=[]),Te.required.push(it),It=!0),Te.properties[it]=Pe.toJSONSchema(ie),Pe.options.enum&&(Te.properties[it].enum=It?Pe.options.enum:[].concat(d(Pe.options.enum),[null]))}}return Le.required.length===0&&delete Le.required,Le},o.exports=c=ge,ge.Types=w=l(7953),c.ObjectId=w.ObjectId},7160:(o,c)=>{c.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed"),c.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")},7219:(o,c,l)=>{function u(j){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},u(j)}function d(j,C){for(var B=0;B<C.length;B++){var E=C[B];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,A(E.key),E)}}function A(j){var C=(function(B){if(u(B)!="object"||!B)return B;var E=B[Symbol.toPrimitive];if(E!==void 0){var _=E.call(B,"string");if(u(_)!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)})(j);return u(C)=="symbol"?C:C+""}function f(){try{var j=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f=function(){return!!j})()}function p(j){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},p(j)}function m(j,C){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,E){return B.__proto__=E,B},m(j,C)}var g=l(8213),b=l(2900),v=l(4070),y=l(5497),w=(function(j){function C(){return(function(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")})(this,C),(function(_,S,N){return S=p(S),(function(O,k){if(k&&(u(k)=="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I})(O)})(_,f()?Reflect.construct(S,N||[],p(_).constructor):S.apply(_,N))})(this,C,arguments)}return(function(_,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(S&&S.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),S&&m(_,S)})(C,j),B=C,(E=[{key:"assimilateError",value:function(_){var S=_.reason,N=v(S)&&b(S)&&_.message.indexOf("bad auth")===-1&&_.message.indexOf("Authentication failed")===-1;for(var O in N?this.message="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/":y(S)?this.message="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html":this.message=_.message,_)O!=="name"&&(this[O]=_[O]);return this.cause=S,this}}])&&d(B.prototype,E),Object.defineProperty(B,"prototype",{writable:!1}),B;var B,E})(g);Object.defineProperty(w.prototype,"name",{value:"MongooseServerSelectionError"}),o.exports=w},7236:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(l){if(l==null||c(l)!=="object")return l;if(Array.isArray(l))for(var u=l.length-1;u>=0;--u)l[u]===void 0&&l.splice(u,1);for(var d=0,A=Object.keys(l);d<A.length;d++){var f=A[d];l[f]===void 0&&delete l[f]}return l}},7291:(o,c)=>{function l(d){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},l(d)}var u=Symbol("mongoose#trustedSymbol");c.trustedSymbol=u,c.trusted=function(d){return d==null||l(d)!=="object"||(d[u]=!0),d}},7300:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(l){return l==null||c(l)!=="object"||!("$meta"in l)&&!("$slice"in l)}},7352:(o,c,l)=>{function u(T){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},u(T)}var d=Object.getOwnPropertyDescriptors||function(T){for(var U=Object.keys(T),K={},z=0;z<U.length;z++)K[U[z]]=Object.getOwnPropertyDescriptor(T,U[z]);return K},A=/%[sdj%]/g;c.format=function(T){if(!S(T)){for(var U=[],K=0;K<arguments.length;K++)U.push(g(arguments[K]));return U.join(" ")}K=1;for(var z=arguments,M=z.length,H=String(T).replace(A,function(ae){if(ae==="%%")return"%";if(K>=M)return ae;switch(ae){case"%s":return String(z[K++]);case"%d":return Number(z[K++]);case"%j":try{return JSON.stringify(z[K++])}catch{return"[Circular]"}default:return ae}}),Y=z[K];K<M;Y=z[++K])E(Y)||!k(Y)?H+=" "+Y:H+=" "+g(Y);return H},c.deprecate=function(T,U){if({}.noDeprecation===!0)return T;var K=!1;return function(){if(!K){if({}.throwDeprecation)throw new Error(U);({}).traceDeprecation?console.trace(U):console.error(U),K=!0}return T.apply(this,arguments)}};var f={},p=/^$/;if({}.NODE_DEBUG){var m={}.NODE_DEBUG;m=m.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),p=new RegExp("^"+m+"$","i")}function g(T,U){var K={seen:[],stylize:v};return arguments.length>=3&&(K.depth=arguments[2]),arguments.length>=4&&(K.colors=arguments[3]),B(U)?K.showHidden=U:U&&c._extend(K,U),N(K.showHidden)&&(K.showHidden=!1),N(K.depth)&&(K.depth=2),N(K.colors)&&(K.colors=!1),N(K.customInspect)&&(K.customInspect=!0),K.colors&&(K.stylize=b),y(K,T,K.depth)}function b(T,U){var K=g.styles[U];return K?"\x1B["+g.colors[K][0]+"m"+T+"\x1B["+g.colors[K][1]+"m":T}function v(T,U){return T}function y(T,U,K){if(T.customInspect&&U&&Q(U.inspect)&&U.inspect!==c.inspect&&(!U.constructor||U.constructor.prototype!==U)){var z=U.inspect(K,T);return S(z)||(z=y(T,z,K)),z}var M=(function(ke,Z){if(N(Z))return ke.stylize("undefined","undefined");if(S(Z)){var te="'"+JSON.stringify(Z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ke.stylize(te,"string")}return _(Z)?ke.stylize(""+Z,"number"):B(Z)?ke.stylize(""+Z,"boolean"):E(Z)?ke.stylize("null","null"):void 0})(T,U);if(M)return M;var H=Object.keys(U),Y=(function(ke){var Z={};return ke.forEach(function(te,fe){Z[te]=!0}),Z})(H);if(T.showHidden&&(H=Object.getOwnPropertyNames(U)),R(U)&&(H.indexOf("message")>=0||H.indexOf("description")>=0))return w(U);if(H.length===0){if(Q(U)){var ae=U.name?": "+U.name:"";return T.stylize("[Function"+ae+"]","special")}if(O(U))return T.stylize(RegExp.prototype.toString.call(U),"regexp");if(I(U))return T.stylize(Date.prototype.toString.call(U),"date");if(R(U))return w(U)}var oe,be="",ge=!1,he=["{","}"];return C(U)&&(ge=!0,he=["[","]"]),Q(U)&&(be=" [Function"+(U.name?": "+U.name:"")+"]"),O(U)&&(be=" "+RegExp.prototype.toString.call(U)),I(U)&&(be=" "+Date.prototype.toUTCString.call(U)),R(U)&&(be=" "+w(U)),H.length!==0||ge&&U.length!=0?K<0?O(U)?T.stylize(RegExp.prototype.toString.call(U),"regexp"):T.stylize("[Object]","special"):(T.seen.push(U),oe=ge?(function(ke,Z,te,fe,we){for(var Fe=[],_e=0,Ce=Z.length;_e<Ce;++_e)G(Z,String(_e))?Fe.push(j(ke,Z,te,fe,String(_e),!0)):Fe.push("");return we.forEach(function(ie){ie.match(/^\d+$/)||Fe.push(j(ke,Z,te,fe,ie,!0))}),Fe})(T,U,K,Y,H):H.map(function(ke){return j(T,U,K,Y,ke,ge)}),T.seen.pop(),(function(ke,Z,te){return ke.reduce(function(fe,we){return we.indexOf(`
`),fe+we.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?te[0]+(Z===""?"":Z+`
 `)+" "+ke.join(`,
  `)+" "+te[1]:te[0]+Z+" "+ke.join(", ")+" "+te[1]})(oe,be,he)):he[0]+be+he[1]}function w(T){return"["+Error.prototype.toString.call(T)+"]"}function j(T,U,K,z,M,H){var Y,ae,oe;if((oe=Object.getOwnPropertyDescriptor(U,M)||{value:U[M]}).get?ae=oe.set?T.stylize("[Getter/Setter]","special"):T.stylize("[Getter]","special"):oe.set&&(ae=T.stylize("[Setter]","special")),G(z,M)||(Y="["+M+"]"),ae||(T.seen.indexOf(oe.value)<0?(ae=E(K)?y(T,oe.value,null):y(T,oe.value,K-1)).indexOf(`
`)>-1&&(ae=H?ae.split(`
`).map(function(be){return"  "+be}).join(`
`).slice(2):`
`+ae.split(`
`).map(function(be){return"   "+be}).join(`
`)):ae=T.stylize("[Circular]","special")),N(Y)){if(H&&M.match(/^\d+$/))return ae;(Y=JSON.stringify(""+M)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Y=Y.slice(1,-1),Y=T.stylize(Y,"name")):(Y=Y.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Y=T.stylize(Y,"string"))}return Y+": "+ae}function C(T){return Array.isArray(T)}function B(T){return typeof T=="boolean"}function E(T){return T===null}function _(T){return typeof T=="number"}function S(T){return typeof T=="string"}function N(T){return T===void 0}function O(T){return k(T)&&$(T)==="[object RegExp]"}function k(T){return u(T)==="object"&&T!==null}function I(T){return k(T)&&$(T)==="[object Date]"}function R(T){return k(T)&&($(T)==="[object Error]"||T instanceof Error)}function Q(T){return typeof T=="function"}function $(T){return Object.prototype.toString.call(T)}function L(T){return T<10?"0"+T.toString(10):T.toString(10)}c.debuglog=function(T){if(T=T.toUpperCase(),!f[T])if(p.test(T)){var U={}.pid;f[T]=function(){var K=c.format.apply(c,arguments);console.error("%s %d: %s",T,U,K)}}else f[T]=function(){};return f[T]},c.inspect=g,g.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},g.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.types=l(7595),c.isArray=C,c.isBoolean=B,c.isNull=E,c.isNullOrUndefined=function(T){return T==null},c.isNumber=_,c.isString=S,c.isSymbol=function(T){return u(T)==="symbol"},c.isUndefined=N,c.isRegExp=O,c.types.isRegExp=O,c.isObject=k,c.isDate=I,c.types.isDate=I,c.isError=R,c.types.isNativeError=R,c.isFunction=Q,c.isPrimitive=function(T){return T===null||typeof T=="boolean"||typeof T=="number"||typeof T=="string"||u(T)==="symbol"||T===void 0},c.isBuffer=l(7944);var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function G(T,U){return Object.prototype.hasOwnProperty.call(T,U)}c.log=function(){var T,U;console.log("%s - %s",(U=[L((T=new Date).getHours()),L(T.getMinutes()),L(T.getSeconds())].join(":"),[T.getDate(),F[T.getMonth()],U].join(" ")),c.format.apply(c,arguments))},c.inherits=l(1679),c._extend=function(T,U){if(!U||!k(U))return T;for(var K=Object.keys(U),z=K.length;z--;)T[K[z]]=U[K[z]];return T};var X=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function q(T,U){if(!T){var K=new Error("Promise was rejected with a falsy value");K.reason=T,T=K}return U(T)}c.promisify=function(T){if(typeof T!="function")throw new TypeError('The "original" argument must be of type Function');if(X&&T[X]){var U;if(typeof(U=T[X])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(U,X,{value:U,enumerable:!1,writable:!1,configurable:!0}),U}function U(){for(var K,z,M=new Promise(function(ae,oe){K=ae,z=oe}),H=[],Y=0;Y<arguments.length;Y++)H.push(arguments[Y]);H.push(function(ae,oe){ae?z(ae):K(oe)});try{T.apply(this,H)}catch(ae){z(ae)}return M}return Object.setPrototypeOf(U,Object.getPrototypeOf(T)),X&&Object.defineProperty(U,X,{value:U,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(U,d(T))},c.promisify.custom=X,c.callbackify=function(T){if(typeof T!="function")throw new TypeError('The "original" argument must be of type Function');function U(){for(var K=[],z=0;z<arguments.length;z++)K.push(arguments[z]);var M=K.pop();if(typeof M!="function")throw new TypeError("The last argument must be of type Function");var H=this,Y=function(){return M.apply(H,arguments)};T.apply(this,K).then(function(ae){({env:{}}).nextTick(Y.bind(null,null,ae))},function(ae){({env:{}}).nextTick(q.bind(null,ae,Y))})}return Object.setPrototypeOf(U,Object.getPrototypeOf(T)),Object.defineProperties(U,d(T)),U}},7425:(o,c,l)=>{var u=l(2696);o.exports=function(d,A){if(d==null||d.discriminators==null)return null;for(var f=0,p=Object.keys(d.discriminators);f<p.length;f++){var m=p[f],g=d.discriminators[m];if(g.discriminatorMapping!=null&&u(g.discriminatorMapping.value,A))return g}return null}},7430:(o,c,l)=>{var u=l(5832).hp;function d(g){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},d(g)}var A=l(6353).Binary,f=l(3305),p=l(2497);l(3672),l(7352);function m(g){return g&&d(g)==="object"&&!(g instanceof Date)&&!f(g,"ObjectId")&&(!Array.isArray(g)||g.length!==0)&&!(g instanceof u)&&!f(g,"Decimal128")&&!(g instanceof A)}c.B=function g(b,v,y,w){var j,C=(j=b&&p(b)&&!u.isBuffer(b)?Object.keys(b.toObject({transform:!1,virtuals:!1})||{}):Object.keys(b||{})).length,B={};v=v?v+".":"";for(var E=0;E<C;++E){var _=j[E],S=b[_];B[v+_]=S;var N=w&&w.path&&w.path(v+_),O=w&&w.nested&&w.nested[v+_];if(!N||N.instance!=="Mixed"){if(m(S)){if(y&&y.skipArrays&&Array.isArray(S))continue;var k=g(S,v+_,y,w);for(var I in k)B[I]=k[I];Array.isArray(S)&&(B[v+_]=S)}if(O)for(var R=0,Q=Object.keys(w.paths);R<Q.length;R++){var $=Q[R];$.startsWith(v+_+".")&&!B.hasOwnProperty($)&&(B[$]=void 0)}}}return B}},7494:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}function d(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!g})()}function A(g){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},A(g)}function f(g,b){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,y){return v.__proto__=y,v},f(g,b)}var p=(function(g){function b(){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,b,arguments)}return(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),w&&f(y,w)})(b,g),v=b,Object.defineProperty(v,"prototype",{writable:!1}),v;var v})(l(8879)),m=l(5761);Object.defineProperty(p.prototype,"_id",m),Object.defineProperty(p.prototype,"minimize",m),o.exports=p},7557:(o,c,l)=>{function u(w){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},u(w)}function d(w,j,C){return(j=(function(B){var E=(function(_){if(u(_)!="object"||!_)return _;var S=_[Symbol.toPrimitive];if(S!==void 0){var N=S.call(_,"string");if(u(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)})(B);return u(E)=="symbol"?E:E+""})(j))in w?Object.defineProperty(w,j,{value:C,enumerable:!0,configurable:!0,writable:!0}):w[j]=C,w}var A=l(8920),f=l(7930).arrayAtomicsSymbol,p=l(7930).arrayAtomicsBackupSymbol,m=l(7930).arrayParentSymbol,g=l(7930).arrayPathSymbol,b=l(7930).arraySchemaSymbol,v=Array.prototype.push,y=/^\d+$/;o.exports=function(w,j,C,B){var E;if(Array.isArray(w)){var _=w.length;if(_===0)E=new Array;else if(_===1)(E=new Array(1))[0]=w[0];else if(_<1e4)E=new Array,v.apply(E,w);else{E=new Array;for(var S=0;S<_;++S)v.call(E,w[S])}}else E=[];var N=d(d(d(d(d(d(d(d({},f,{}),p,void 0),g,j),b,B),m,void 0),"isMongooseArray",!0),"isMongooseArrayProxy",!0),"__array",E);w&&w[f]!=null&&(N[f]=w[f]),C!=null&&C.$__&&(N[m]=C,N[b]=B||C.schema.path(j));var O=new Proxy(E,{get:function(k,I){return N.hasOwnProperty(I)?N[I]:A.hasOwnProperty(I)?A[I]:B&&B.virtuals&&B.virtuals.hasOwnProperty(I)?B.virtuals[I].applyGetters(void 0,k):typeof I=="string"&&y.test(I)&&B?.$embeddedSchemaType!=null?B.$embeddedSchemaType.applyGetters(E[I],C):E[I]},set:function(k,I,R){return typeof I=="string"&&y.test(I)?A.set.call(O,I,R,!1):N.hasOwnProperty(I)?N[I]=R:B&&B.virtuals&&B.virtuals.hasOwnProperty(I)?B.virtuals[I].applySetters(R,k):E[I]=R,!0}});return O}},7591:o=>{var c=null;o.exports.get=function(){return c},o.exports.set=function(l){c=l}},7595:(o,c,l)=>{function u(K){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},u(K)}var d=l(5899),A=l(1905),f=l(9834),p=l(7911);function m(K){return K.call.bind(K)}var g=typeof BigInt<"u",b=typeof Symbol<"u",v=m(Object.prototype.toString),y=m(Number.prototype.valueOf),w=m(String.prototype.valueOf),j=m(Boolean.prototype.valueOf);if(g)var C=m(BigInt.prototype.valueOf);if(b)var B=m(Symbol.prototype.valueOf);function E(K,z){if(u(K)!=="object")return!1;try{return z(K),!0}catch{return!1}}function _(K){return v(K)==="[object Map]"}function S(K){return v(K)==="[object Set]"}function N(K){return v(K)==="[object WeakMap]"}function O(K){return v(K)==="[object WeakSet]"}function k(K){return v(K)==="[object ArrayBuffer]"}function I(K){return typeof ArrayBuffer<"u"&&(k.working?k(K):K instanceof ArrayBuffer)}function R(K){return v(K)==="[object DataView]"}function Q(K){return typeof DataView<"u"&&(R.working?R(K):K instanceof DataView)}c.isArgumentsObject=d,c.isGeneratorFunction=A,c.isTypedArray=p,c.isPromise=function(K){return typeof Promise<"u"&&K instanceof Promise||K!==null&&u(K)==="object"&&typeof K.then=="function"&&typeof K.catch=="function"},c.isArrayBufferView=function(K){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(K):p(K)||Q(K)},c.isUint8Array=function(K){return f(K)==="Uint8Array"},c.isUint8ClampedArray=function(K){return f(K)==="Uint8ClampedArray"},c.isUint16Array=function(K){return f(K)==="Uint16Array"},c.isUint32Array=function(K){return f(K)==="Uint32Array"},c.isInt8Array=function(K){return f(K)==="Int8Array"},c.isInt16Array=function(K){return f(K)==="Int16Array"},c.isInt32Array=function(K){return f(K)==="Int32Array"},c.isFloat32Array=function(K){return f(K)==="Float32Array"},c.isFloat64Array=function(K){return f(K)==="Float64Array"},c.isBigInt64Array=function(K){return f(K)==="BigInt64Array"},c.isBigUint64Array=function(K){return f(K)==="BigUint64Array"},_.working=typeof Map<"u"&&_(new Map),c.isMap=function(K){return typeof Map<"u"&&(_.working?_(K):K instanceof Map)},S.working=typeof Set<"u"&&S(new Set),c.isSet=function(K){return typeof Set<"u"&&(S.working?S(K):K instanceof Set)},N.working=typeof WeakMap<"u"&&N(new WeakMap),c.isWeakMap=function(K){return typeof WeakMap<"u"&&(N.working?N(K):K instanceof WeakMap)},O.working=typeof WeakSet<"u"&&O(new WeakSet),c.isWeakSet=function(K){return O(K)},k.working=typeof ArrayBuffer<"u"&&k(new ArrayBuffer),c.isArrayBuffer=I,R.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&R(new DataView(new ArrayBuffer(1),0,1)),c.isDataView=Q;var $=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function L(K){return v(K)==="[object SharedArrayBuffer]"}function F(K){return $!==void 0&&(L.working===void 0&&(L.working=L(new $)),L.working?L(K):K instanceof $)}function G(K){return E(K,y)}function X(K){return E(K,w)}function q(K){return E(K,j)}function T(K){return g&&E(K,C)}function U(K){return b&&E(K,B)}c.isSharedArrayBuffer=F,c.isAsyncFunction=function(K){return v(K)==="[object AsyncFunction]"},c.isMapIterator=function(K){return v(K)==="[object Map Iterator]"},c.isSetIterator=function(K){return v(K)==="[object Set Iterator]"},c.isGeneratorObject=function(K){return v(K)==="[object Generator]"},c.isWebAssemblyCompiledModule=function(K){return v(K)==="[object WebAssembly.Module]"},c.isNumberObject=G,c.isStringObject=X,c.isBooleanObject=q,c.isBigIntObject=T,c.isSymbolObject=U,c.isBoxedPrimitive=function(K){return G(K)||X(K)||q(K)||T(K)||U(K)},c.isAnyArrayBuffer=function(K){return typeof Uint8Array<"u"&&(I(K)||F(K))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(K){Object.defineProperty(c,K,{enumerable:!1,value:function(){throw new Error(K+" is not supported in userland")}})})},7760:(o,c,l)=>{function u(z,M){var H=Object.keys(z);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(z);M&&(Y=Y.filter(function(ae){return Object.getOwnPropertyDescriptor(z,ae).enumerable})),H.push.apply(H,Y)}return H}function d(z){for(var M=1;M<arguments.length;M++){var H=arguments[M]!=null?arguments[M]:{};M%2?u(Object(H),!0).forEach(function(Y){A(z,Y,H[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(H)):u(Object(H)).forEach(function(Y){Object.defineProperty(z,Y,Object.getOwnPropertyDescriptor(H,Y))})}return z}function A(z,M,H){return(M=(function(Y){var ae=(function(oe){if(p(oe)!="object"||!oe)return oe;var be=oe[Symbol.toPrimitive];if(be!==void 0){var ge=be.call(oe,"string");if(p(ge)!="object")return ge;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)})(Y);return p(ae)=="symbol"?ae:ae+""})(M))in z?Object.defineProperty(z,M,{value:H,enumerable:!0,configurable:!0,writable:!0}):z[M]=H,z}function f(z,M){(M==null||M>z.length)&&(M=z.length);for(var H=0,Y=Array(M);H<M;H++)Y[H]=z[H];return Y}function p(z){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},p(z)}var m,g,b=l(8499),v=l(2555),y=l(8213),w=l(4592),j=l(6426),C=j.CastError,B=l(5022),E=l(2069),_=l(622),S=l(2073),N=l(7982),O=l(4450),k=l(8260),I=l(5110),R=l(7352),Q=l(8768),$=l(5558).G,L=l(4327),F=l(9604),G=l(1058),X=Symbol("mongoose#isNestedArray"),q=Object.freeze({});function T(z,M,H,Y){g||(g=l(9600).Embedded);var ae,oe,be="type";if(Y&&Y.typeKey&&(be=Y.typeKey),this.schemaOptions=Y,M){var ge={};Q.isPOJO(M)&&(M[be]?(delete(ge=O(M))[be],M=M[be]):M=B),H!=null&&H.ref!=null&&ge.ref==null&&(ge.ref=H.ref),M===Object&&(M=B);var he=typeof M=="string"?M:Q.getFunctionName(M),ke=l(7953),Z=ke.hasOwnProperty(he)?ke[he]:M;if(this.casterConstructor=Z,this.casterConstructor instanceof T&&(this.casterConstructor[X]=!0),typeof Z!="function"||Z.$isArraySubdocument||Z.$isSchemaMap)this.caster=Z,this.caster instanceof g||(this.caster.path=z);else{var te=this.caster instanceof g?null:z;this.caster=new Z(te,ge)}this.$embeddedSchemaType=this.caster}if(this.$isMongooseArray=!0,j.call(this,z,H,"Array"),this.defaultValue!=null&&(ae=this.defaultValue,oe=typeof ae=="function"),!("defaultValue"in this)||this.defaultValue!=null){var fe=function(){return oe?ae.call(this):ae!=null?[].concat(ae):[]};fe.$runBeforeSetters=!oe,this.default(fe)}}T.schemaName="Array",T.options={castNonArrays:!0},T.defaultOptions={},T.set=j.set,T.setters=[],T.get=j.get,T.prototype=Object.create(j.prototype),T.prototype.constructor=T,T.prototype.OptionsConstructor=w,T._checkRequired=j.prototype.checkRequired,T.checkRequired=j.checkRequired,T.prototype.virtuals=null,T.prototype.checkRequired=function(z,M){return p(z)==="object"&&j._isRef(this,z,M,!0)?!!z:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():T.checkRequired())(z)},T.prototype.enum=function(){for(var z=this;;){var M=z&&z.caster&&z.caster.instance;if(M!=="Array"){if(M!=="String"&&M!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+M);break}z=z.caster}var H=arguments;return!Array.isArray(arguments)&&Q.isObject(arguments)&&(H=Q.object.vals(H)),z.caster.enum.apply(z.caster,H),this},T.prototype.applyGetters=function(z,M){return M!=null&&M.$__!=null&&M.$populated(this.path)?z:j.prototype.applyGetters.call(this,z,M)},T.prototype._applySetters=function(z,M,H,Y){if(this.casterConstructor.$isMongooseArray&&T.options.castNonArrays&&!this[X]){for(var ae=0,oe=this;oe!=null&&oe.$isMongooseArray&&!oe.$isMongooseDocumentArray;)++ae,oe=oe.casterConstructor;if(z!=null&&z.length!==0){var be=S(z);if(be.min===be.max&&be.max<ae&&be.containsNonArrayItem)for(var ge=be.max;ge<ae;++ge)z=[z]}}return j.prototype._applySetters.call(this,z,M,H,Y)},T.prototype.cast=function(z,M,H,Y,ae){var oe,be;if(m||(m=l(9600).Array),Array.isArray(z)){if(!z.length&&M){var ge=M.schema.indexedPaths(),he=this.path;for(oe=0,be=ge.length;oe<be;++oe){var ke=ge[oe][0][he];if(ke==="2dsphere"||ke==="2d")return}var Z=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(Z!=null){for(oe=0,be=ge.length;oe<be;++oe)if(ge[oe][0][Z]==="2dsphere")return}}ae=ae||q;var te=Q.isMongooseArray(z)?z.__array:z,fe=ae.path||this.path;if(ae.arrayPathIndex!=null&&(fe+="."+ae.arrayPathIndex),te=(z=m(te,fe,M,this)).__array,H&&M!=null&&M.$__!=null&&M.$populated(this.path))return z;var we=this.caster,Fe=we.$isMongooseArray;if(we&&this.casterConstructor!==B)try{var _e=te.length;for(oe=0;oe<_e;oe++){var Ce={};Fe&&(ae.arrayPath!=null||we._arrayParentPath!=null)&&(Ce.arrayPathIndex=oe),ae.hydratedPopulatedDocs&&(Ce.hydratedPopulatedDocs=ae.hydratedPopulatedDocs),te[oe]=we.applySetters(te[oe],M,H,void 0,Ce)}}catch(me){throw new C("["+me.kind+"]",R.inspect(z),this.path+"."+oe,me,this)}return z}var ie=this.options.castNonArrays!=null?this.options.castNonArrays:T.options.castNonArrays;if(H||ie)return M&&H&&M.markModified(this.path),this.cast([z],M,H);throw new C("Array",R.inspect(z),this.path,null,this)},T.prototype._castForPopulate=function(z,M){if(m||(m=l(9600).Array),Array.isArray(z)){var H,Y=z.__array?z.__array:z,ae=Y.length,oe=this.caster;if(oe&&this.casterConstructor!==B)try{for(H=0;H<ae;H++){var be={};oe.$isMongooseArray&&oe._arrayParentPath!=null&&(be.arrayPathIndex=H),Y[H]=oe.cast(Y[H],M,!1,void 0,be)}}catch(ge){throw new C("["+ge.kind+"]",R.inspect(z),this.path+"."+H,ge,this)}return z}throw new C("Array",R.inspect(z),this.path,null,this)},T.prototype.$toObject=T.prototype.toObject,T.prototype.discriminator=function(){for(var z,M=this;M.$isMongooseArray&&!M.$isMongooseDocumentArray;)if((M=M.casterConstructor)==null||typeof M=="function")throw new y("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return(z=M).discriminator.apply(z,arguments)},T.prototype.clone=function(){var z=Object.assign({},this.options),M=new this.constructor(this.path,this.caster,z,this.schemaOptions);return M.validators=this.validators.slice(),this.requiredValidator!==void 0&&(M.requiredValidator=this.requiredValidator),M},T.prototype._castForQuery=function(z,M){var H=this,Y=this.casterConstructor;if(z&&Y.discriminators&&Y.schema&&Y.schema.options&&Y.schema.options.discriminatorKey)if(typeof z[Y.schema.options.discriminatorKey]=="string"&&Y.discriminators[z[Y.schema.options.discriminatorKey]])Y=Y.discriminators[z[Y.schema.options.discriminatorKey]];else{var ae=G(Y.discriminators,z[Y.schema.options.discriminatorKey]);ae&&(Y=ae)}var oe=this.casterConstructor.prototype,be=oe&&oe.castForQuery,ge=oe&&oe.cast,he=Y.castForQuery,ke=this.caster;return Array.isArray(z)?(this.setters.reverse().forEach(function(Z){z=Z.call(H,z,H)}),z=z.map(function(Z){return Q.isObject(Z)&&Z.$elemMatch?Z:be?Z=be.call(ke,null,Z,M):ge?Z=ge.call(ke,Z):he?Z=he.call(ke,null,Z,M):Z!=null?Z=new Y(Z):Z})):be?z=be.call(ke,null,z,M):ge?z=ge.call(ke,z):he?z=he.call(ke,null,z,M):z!=null&&(z=new Y(z)),z},T.prototype.castForQuery=function(z,M,H){var Y;if(z!=null){if(!(Y=this.$conditionalHandlers[z]))throw new Error("Can't use "+z+" with Array.");return Y.call(this,M,H)}return this._castForQuery(M,H)},T.prototype.virtual=function(z,M){if(z instanceof _||k(z)==="VirtualType")return this.virtual(z.path,z.options);if(M=new E(M),Q.hasUserDefinedProperty(M,["ref","refPath"]))throw new y("Cannot set populate virtual as a property of an array");var H=new _(M,z);return this.virtuals===null&&(this.virtuals={}),this.virtuals[z]=H,H};var U=T.prototype.$conditionalHandlers={};function K(z){return function(M,H){if(!Array.isArray(M))throw new TypeError("conditional "+z+" requires an array");var Y,ae=[],oe=(function(he,ke){var Z=typeof Symbol<"u"&&he[Symbol.iterator]||he["@@iterator"];if(!Z){if(Array.isArray(he)||(Z=(function(Ce,ie){if(Ce){if(typeof Ce=="string")return f(Ce,ie);var me={}.toString.call(Ce).slice(8,-1);return me==="Object"&&Ce.constructor&&(me=Ce.constructor.name),me==="Map"||me==="Set"?Array.from(Ce):me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(me)?f(Ce,ie):void 0}})(he))||ke){Z&&(he=Z);var te=0,fe=function(){};return{s:fe,n:function(){return te>=he.length?{done:!0}:{done:!1,value:he[te++]}},e:function(Ce){throw Ce},f:fe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var we,Fe=!0,_e=!1;return{s:function(){Z=Z.call(he)},n:function(){var Ce=Z.next();return Fe=Ce.done,Ce},e:function(Ce){_e=!0,we=Ce},f:function(){try{Fe||Z.return==null||Z.return()}finally{if(_e)throw we}}}})(M);try{for(oe.s();!(Y=oe.n()).done;){var be,ge=Y.value;ae.push(N((be=this.casterConstructor.schema)!==null&&be!==void 0?be:H.schema,ge,null,this&&this.$$context))}}catch(he){oe.e(he)}finally{oe.f()}return ae}}U.$all=function(z,M){var H=this;return Array.isArray(z)||(z=[z]),z=z.map(function(Y){if(!Q.isObject(Y))return Y;if(Y.$elemMatch!=null)return{$elemMatch:N(H.casterConstructor.schema,Y.$elemMatch,null,H&&H.$$context)};var ae={};return ae[H.path]=Y,N(H.casterConstructor.schema,ae,null,H&&H.$$context)[H.path]},this),this.castForQuery(null,z,M)},U.$options=String,U.$elemMatch=function(z,M){for(var H=Object.keys(z),Y=H.length,ae=0;ae<Y;++ae){var oe=H[ae],be=z[oe];I(oe)&&be!=null&&(z[oe]=this.castForQuery(oe,be,M))}return z},U.$geoIntersects=F.cast$geoIntersects,U.$or=K("$or"),U.$and=K("$and"),U.$nor=K("$nor"),U.$near=U.$nearSphere=F.cast$near,U.$within=U.$geoWithin=F.cast$within,U.$size=U.$minDistance=U.$maxDistance=$,U.$exists=b,U.$type=v,U.$eq=U.$gt=U.$gte=U.$lt=U.$lte=U.$not=U.$regex=U.$ne=T.prototype._castForQuery,U.$nin=j.prototype.$conditionalHandlers.$nin,U.$in=j.prototype.$conditionalHandlers.$in,T.prototype.toJSONSchema=function(z){var M=this.getEmbeddedSchemaType(),H=this.options.required&&typeof this.options.required!="function";return d(d({},L("array","array",z?.useBsonType,H)),{},{items:M.toJSONSchema(z)})},T.prototype.autoEncryptionType=function(){return"array"},o.exports=T},7768:(o,c,l)=>{var u=l(2402);o.exports=function(d){return d==null?d:d===""?null:(typeof d!="string"&&typeof d!="boolean"||(d=Number(d)),u.ok(!isNaN(d)),d instanceof Number?d.valueOf():typeof d=="number"?d:Array.isArray(d)||typeof d.valueOf!="function"?d.toString&&!Array.isArray(d)&&d.toString()==Number(d)?Number(d):void u.ok(!1):Number(d.valueOf()))}},7834:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(l,u,d,A){return A.justOne||A.count?(l[u]=Array.isArray(d)?d[0]:d,c(l[u])!=="object"&&(l[u]=A.count?d:null)):(l[u]=Array.isArray(d)?d:d==null?[]:[d],l[u]=l[u].filter(function(f){return f&&c(f)==="object"})),l[u]}},7860:o=>{o.exports=function(c){for(var l=[],u="",d="DEFAULT",A=0;A<c.length;++A)d!=="IN_SQUARE_BRACKETS"||/\d/.test(c[A])||c[A]==="]"||(d="DEFAULT",u=l[l.length-1]+"["+u,l.splice(l.length-1,1)),c[A]==="["?(d!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(l.push(u),u=""),d="IN_SQUARE_BRACKETS"):c[A]==="]"?d==="IN_SQUARE_BRACKETS"?(d="IMMEDIATELY_AFTER_SQUARE_BRACKETS",l.push(u),u=""):(d="DEFAULT",u+=c[A]):c[A]==="."?(d!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(l.push(u),u=""),d="DEFAULT"):u+=c[A];return d!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&l.push(u),l}},7878:(o,c,l)=>{var u=l(2273),d=l(4183);o.exports=function(){var A=d();return u(Number,{isNaN:A},{isNaN:function(){return Number.isNaN!==A}}),A}},7910:(o,c,l)=>{var u=l(1058);o.exports=function(d,A,f){var p=d.schema.options.discriminatorKey,m=A!=null&&A[p];if(m==null&&(m=f),d.discriminators&&m!=null)if(d.discriminators[m])d=d.discriminators[m];else{var g=u(d.discriminators,m);g&&(d=g)}return d}},7911:(o,c,l)=>{var u=l(9834);o.exports=function(d){return!!u(d)}},7930:(o,c)=>{c.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup"),c.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics"),c.arrayParentSymbol=Symbol("mongoose#Array#_parent"),c.arrayPathSymbol=Symbol("mongoose#Array#_path"),c.arraySchemaSymbol=Symbol("mongoose#Array#_schema"),c.documentArrayParent=Symbol("mongoose#documentArrayParent"),c.documentIsSelected=Symbol("mongoose#Document#isSelected"),c.documentIsModified=Symbol("mongoose#Document#isModified"),c.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths"),c.documentSchemaSymbol=Symbol("mongoose#Document#schema"),c.getSymbol=Symbol("mongoose#Document#get"),c.modelSymbol=Symbol("mongoose#Model"),c.objectIdSymbol=Symbol("mongoose#ObjectId"),c.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model"),c.schemaTypeSymbol=Symbol("mongoose#schemaType"),c.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments"),c.scopeSymbol=Symbol("mongoose#Document#scope"),c.validatorErrorSymbol=Symbol("mongoose#validatorError")},7944:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(l){return l&&c(l)==="object"&&typeof l.copy=="function"&&typeof l.fill=="function"&&typeof l.readUInt8=="function"}},7953:(o,c,l)=>{c.Array=l(7760),c.BigInt=l(3318),c.Boolean=l(6413),c.Buffer=l(2307),c.Date=l(2345),c.Decimal128=c.Decimal=l(7045),c.DocumentArray=l(9123),c.Map=l(6867),c.Mixed=l(5022),c.Number=l(3660),c.ObjectId=l(3091),c.String=l(8728),c.Subdocument=l(5098),c.UUID=l(2134),c.Double=l(1732),c.Int32=l(433),c.Oid=c.ObjectId,c.Object=c.Mixed,c.Bool=c.Boolean,c.ObjectID=c.ObjectId},7982:(o,c,l)=>{function u(k,I){var R=typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(!R){if(Array.isArray(k)||(R=(function(X,q){if(X){if(typeof X=="string")return d(X,q);var T={}.toString.call(X).slice(8,-1);return T==="Object"&&X.constructor&&(T=X.constructor.name),T==="Map"||T==="Set"?Array.from(X):T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T)?d(X,q):void 0}})(k))||I){R&&(k=R);var Q=0,$=function(){};return{s:$,n:function(){return Q>=k.length?{done:!0}:{done:!1,value:k[Q++]}},e:function(X){throw X},f:$}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var L,F=!0,G=!1;return{s:function(){R=R.call(k)},n:function(){var X=R.next();return F=X.done,X},e:function(X){G=!0,L=X},f:function(){try{F||R.return==null||R.return()}finally{if(G)throw L}}}}function d(k,I){(I==null||I>k.length)&&(I=k.length);for(var R=0,Q=Array(I);R<I;R++)Q[R]=k[R];return Q}function A(k){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},A(k)}var f=l(3609),p=l(8995),m=l(7953),g=l(170),b=l(1244),v=l(9064),y=l(3703),w=l(7425),j=l(5110),C=l(7352),B=l(608),E=l(2497),_=l(8768),S=["Polygon","MultiPolygon"];function N(k,I,R){if(Array.isArray(k))k.forEach(function(G,X){if(Array.isArray(G)||B(G))return N(G,I,R);k[X]=I.castForQuery(null,G,R)});else for(var Q=Object.keys(k),$=Q.length;$--;){var L=Q[$],F=k[L];Array.isArray(F)||B(F)?(N(F,I,R),k[L]=F):k[L]=I.castForQuery({val:F,context:R})}}function O(k,I,R,Q){if("strictQuery"in k)return k.strictQuery;if("strictQuery"in I)return I.strictQuery;var $=Q&&Q.mongooseCollection&&Q.mongooseCollection.conn&&Q.mongooseCollection.conn.base&&Q.mongooseCollection.conn.base.options;return $&&"strictQuery"in $?$.strictQuery:R.strictQuery}o.exports=function k(I,R,Q,$){if(Array.isArray(R))throw new Error("Query filter must be an object, got an array ",C.inspect(R));if(R==null)return R;I!=null&&I.discriminators!=null&&R[I.options.discriminatorKey]!=null&&(I=w(I,R[I.options.discriminatorKey])||I);var L,F,G,X,q,T,U=Object.keys(R),K=U.length;for(Q=Q||{};K--;)if(T=R[X=U[K]],X==="$or"||X==="$nor"||X==="$and"){if(!Array.isArray(T))throw new f("Array",T,X);for(var z=T.length-1;z>=0;z--){if(T[z]==null||A(T[z])!=="object")throw new f("Object",T[z],X+"."+z);var M=Object.keys(T[z]).length,H=T[z][I.options.discriminatorKey];if(H==null)T[z]=k(I,T[z],Q,$);else{var Y=w($.schema,H);T[z]=k(Y||I,T[z],Q,$)}Object.keys(T[z]).length===0&&M!==0&&T.splice(z,1)}T.length===0&&delete R[X]}else{if(X==="$where"){if((q=A(T))!=="string"&&q!=="function")throw new Error("Must have a string or function for $where");q==="function"&&(R[X]=T.toString());continue}if(X==="$expr"){T=g(T,I);continue}if(X==="$elemMatch")T=k(I,T,Q,$);else if(X==="$text")T=v(T,X);else if(X!=="$comment"||I.paths.hasOwnProperty("$comment")){if(!I)continue;if(!(F=I.path(X)))for(var ae=X.split("."),oe=ae.length;oe--;){var be=ae.slice(0,oe).join("."),ge=ae.slice(oe).join("."),he=I.path(be),ke=he&&he.schema&&he.schema.options&&he.schema.options.discriminatorKey;if(he!=null&&(he.schema&&he.schema.discriminators)!=null&&ke!=null&&ge!==ke){var Z=y(R,be+"."+ke),te=he.schema.discriminators;typeof Z=="string"&&te[Z]!=null?F=te[Z].path(ge):Z!=null&&Object.keys(Z).length===1&&Array.isArray(Z.$in)&&Z.$in.length===1&&typeof Z.$in[0]=="string"&&te[Z.$in[0]]!=null&&(F=te[Z.$in[0]].path(ge))}}if(F){if(T==null)continue;if(_.isPOJO(T))if(Object.keys(T).some(j))for(var fe=Object.keys(T),we=void 0,Fe=fe.length;Fe--;)if(G=T[we=fe[Fe]],we==="$elemMatch")G&&F!=null&&F.schema!=null?k(F.schema,G,Q,$):G&&F!=null&&F.$isMongooseArray&&(_.isPOJO(G)&&G.$not!=null?k(I,G,Q,$):T[we]=F.castForQuery(we,G,$));else if(we==="$not"){if(G&&F){if((L=Object.keys(G)).length&&j(L[0]))for(var _e in G)G[_e]=F.castForQuery(_e,G[_e],$);else T[we]=F.castForQuery(we,G,$);continue}}else T[we]=F.castForQuery(we,G,$);else R[X]=F.castForQuery(null,T,$);else if(Array.isArray(T)&&["Buffer","Array"].indexOf(F.instance)===-1&&!Q.sanitizeFilter){var Ce,ie=[],me=u(T);try{for(me.s();!(Ce=me.n()).done;){var Be=Ce.value;ie.push(F.castForQuery(null,Be,$))}}catch(tr){me.e(tr)}finally{me.f()}R[X]={$in:ie}}else R[X]=F.castForQuery(null,T,$)}else{for(var Le=X.split("."),ve=Le.length,$e=void 0,je=void 0,Pe=void 0;ve--&&($e=Le.slice(0,ve).join("."),!(F=I.path($e))););if(F){if(F.caster&&F.caster.schema){(Pe={})[je=Le.slice(ve).join(".")]=T;var Te=k(F.caster.schema,Pe,Q,$)[je];Te===void 0?delete R[X]:R[X]=Te}else R[X]=T;continue}if(B(T)){var Ye="";if(T.$near?Ye="$near":T.$nearSphere?Ye="$nearSphere":T.$within?Ye="$within":T.$geoIntersects?Ye="$geoIntersects":T.$geoWithin&&(Ye="$geoWithin"),Ye){var He=new m.Number("__QueryCasting__"),it=T[Ye];if(T.$maxDistance!=null&&(T.$maxDistance=He.castForQuery(null,T.$maxDistance,$)),T.$minDistance!=null&&(T.$minDistance=He.castForQuery(null,T.$minDistance,$)),Ye==="$within"){var It=it.$center||it.$centerSphere||it.$box||it.$polygon;if(!It)throw new Error("Bad $within parameter: "+JSON.stringify(T));it=It}else if(Ye==="$near"&&typeof it.type=="string"&&Array.isArray(it.coordinates))it=it.coordinates;else if((Ye==="$near"||Ye==="$nearSphere"||Ye==="$geoIntersects")&&it.$geometry&&typeof it.$geometry.type=="string"&&Array.isArray(it.$geometry.coordinates))it.$maxDistance!=null&&(it.$maxDistance=He.castForQuery(null,it.$maxDistance,$)),it.$minDistance!=null&&(it.$minDistance=He.castForQuery(null,it.$minDistance,$)),E(it.$geometry)&&(it.$geometry=it.$geometry.toObject({transform:!1,virtuals:!1})),it=it.$geometry.coordinates;else if(Ye==="$geoWithin")if(it.$geometry){E(it.$geometry)&&(it.$geometry=it.$geometry.toObject({virtuals:!1}));var dt=it.$geometry.type;if(S.indexOf(dt)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+dt+'", must be "Polygon" or "MultiPolygon"');it=it.$geometry.coordinates}else it=it.$box||it.$polygon||it.$center||it.$centerSphere,E(it)&&(it=it.toObject({virtuals:!1}));N(it,He,$);continue}}if(I.nested[X])continue;var Pt="strict"in Q?Q.strict:I.options.strict,vt=O(Q,I._userProvidedOptions,I.options,$);if(Q.upsert&&Pt)throw Pt==="throw"?new p(X):new p(X,'Path "'+X+'" is not in schema, strict mode is `true`, and upsert is `true`.');if(vt==="throw")throw new p(X,'Path "'+X+`" is not in schema and strictQuery is 'throw'.`);vt&&delete R[X]}}else T=b(T,X),R[X]=T}return R}},8063:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,g),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,g,[`Schema hasn't been registered for model "`+v+`".
Use mongoose.model(name, schema)`])}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"MissingSchemaError"}),o.exports=p},8093:o=>{o.exports=Object},8133:(o,c,l)=>{var u=l(8995);o.exports=function(d){var A,f;d.$immutable?(d.$immutableSetter=(A=d.path,f=d.options.immutable,function(p,m,g,b){if(this==null||this.$__==null||this.isNew||b&&b.overwriteImmutable||!(typeof f=="function"?f.call(this,this):f))return p;var v=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(A):this.$__getValue(A);if(this.$__.strictMode==="throw"&&p!==v)throw new u(A,"Path `"+A+"` is immutable and strict mode is set to throw.",!0);return v}),d.set(d.$immutableSetter)):d.$immutableSetter&&(d.setters=d.setters.filter(function(p){return p!==d.$immutableSetter}),delete d.$immutableSetter)}},8188:o=>{o.exports=URIError},8213:o=>{function c(p){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},c(p)}function l(p){var m=typeof Map=="function"?new Map:void 0;return l=function(g){if(g===null||!(function(v){try{return Function.toString.call(v).indexOf("[native code]")!==-1}catch{return typeof v=="function"}})(g))return g;if(typeof g!="function")throw new TypeError("Super expression must either be null or a function");if(m!==void 0){if(m.has(g))return m.get(g);m.set(g,b)}function b(){return(function(v,y,w){if(u())return Reflect.construct.apply(null,arguments);var j=[null];j.push.apply(j,y);var C=new(v.bind.apply(v,j));return w&&d(C,w.prototype),C})(g,arguments,A(this).constructor)}return b.prototype=Object.create(g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),d(b,g)},l(p)}function u(){try{var p=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u=function(){return!!p})()}function d(p,m){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,b){return g.__proto__=b,g},d(p,m)}function A(p){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},A(p)}var f=(function(p){function m(){return(function(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")})(this,m),(function(b,v,y){return v=A(v),(function(w,j){if(j&&(c(j)=="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C})(w)})(b,u()?Reflect.construct(v,y||[],A(b).constructor):v.apply(b,y))})(this,m,arguments)}return(function(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),v&&d(b,v)})(m,p),g=m,Object.defineProperty(g,"prototype",{writable:!1}),g;var g})(l(Error));Object.defineProperty(f.prototype,"name",{value:"MongooseError"}),o.exports=f},8235:(o,c,l)=>{var u=l(8213),d=l(6426),A=l(5098),f=l(7910);function p(m,g){if(this.$parentSchemaType=g&&g.$parentSchemaType,!this.$parentSchemaType)throw new u("Cannot create DocumentArrayElement schematype without a parent");delete g.$parentSchemaType,d.call(this,m,g,"DocumentArrayElement"),this.$isMongooseDocumentArrayElement=!0}p.schemaName="DocumentArrayElement",p.defaultOptions={},p.prototype=Object.create(d.prototype),p.prototype.constructor=p,p.prototype.cast=function(){var m;return(m=this.$parentSchemaType).cast.apply(m,arguments)[0]},p.prototype.doValidate=function(m,g,b,v){var y=f(this.caster,m);return!m||m instanceof y||(m=new y(m,b,null,null,v&&v.index!=null?v.index:null)),A.prototype.doValidate.call(this,m,g,b,v)},p.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;var m=d.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,m.caster=this.caster,m.schema=this.schema,m},o.exports=p},8250:(o,c,l)=>{var u=l(5832).hp,d=l(6365),A=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,f=d.Binary;function p(m){typeof m!="string"&&(m="");var g,b=(g=m.replace(/[{}-]/g,""))!=null&&u.from(g,"hex"),v=new d(b);return v._subtype=4,v}o.exports=function(m){if(m==null)return m;function g(b){var v=new d(b);return v._subtype=4,v}if(typeof m=="string"){if(A.test(m))return p(m);throw new Error('"'.concat(m,'" is not a valid UUID string'))}if(u.isBuffer(m))return g(m);if(m instanceof f)return g(m.value(!0));if(m.toString&&m.toString!==Object.prototype.toString&&A.test(m.toString()))return p(m.toString());throw new Error('"'.concat(m,'" cannot be casted to a UUID'))},o.exports.UUID_FORMAT=A},8260:o=>{o.exports=function(c){if(c!=null&&typeof c.constructor=="function")return c.constructor.name}},8285:(o,c,l)=>{var u=l(2400),d=l(2580),A=!1;o.exports=function(){return A?d:u},o.exports.setBrowser=function(f){A=f}},8297:o=>{function c(j,C){var B=typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(!B){if(Array.isArray(j)||(B=u(j))||C){B&&(j=B);var E=0,_=function(){};return{s:_,n:function(){return E>=j.length?{done:!0}:{done:!1,value:j[E++]}},e:function(k){throw k},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,N=!0,O=!1;return{s:function(){B=B.call(j)},n:function(){var k=B.next();return N=k.done,k},e:function(k){O=!0,S=k},f:function(){try{N||B.return==null||B.return()}finally{if(O)throw S}}}}function l(j){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},l(j)}function u(j,C){if(j){if(typeof j=="string")return d(j,C);var B={}.toString.call(j).slice(8,-1);return B==="Object"&&j.constructor&&(B=j.constructor.name),B==="Map"||B==="Set"?Array.from(j):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?d(j,C):void 0}}function d(j,C){(C==null||C>j.length)&&(C=j.length);for(var B=0,E=Array(C);B<C;B++)E[B]=j[B];return E}function A(j,C,B){if(f())return Reflect.construct.apply(null,arguments);var E=[null];E.push.apply(E,C);var _=new(j.bind.apply(j,E));return _}function f(){try{var j=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f=function(){return!!j})()}function p(){this._pres=new Map,this._posts=new Map}function m(j,C,B,E,_,S,N){return S.useErrorHandlers?j.execPost(B,E,_,{error:C},function(O){return typeof N=="function"&&N(O)}):typeof N=="function"&&N(C)}function g(j,C,B,E){var _;try{_=j.apply(C,B)}catch(S){return E(S)}b(_)&&_.then(function(){return E()},function(S){return E(S)})}function b(j){return l(j)==="object"&&j!==null&&typeof j.then=="function"}function v(j){var C=!1,B=this;return function(){var E=arguments;if(!C)return C=!0,y(function(){return j.apply(B,E)})}}p.skipWrappedFunction=function(){if(!(this instanceof p.skipWrappedFunction))return A(p.skipWrappedFunction,Array.prototype.slice.call(arguments));this.args=Array.prototype.slice.call(arguments)},p.overwriteResult=function(){if(!(this instanceof p.overwriteResult))return A(p.overwriteResult,Array.prototype.slice.call(arguments));this.args=Array.prototype.slice.call(arguments)},p.prototype.execPre=function(j,C,B,E){arguments.length===3&&(E=B,B=[]);var _=this._pres.get(j)||[],S=_.length,N=_.numAsync||0,O=0,k=N,I=!1,R=B,Q=null;if(!S)return y(function(){E(null)});function $(){if(!(O>=S)){var F=_[O];if(F.isAsync){var G=[v(L),v(function(K){if(K){if(I)return;if(!(K instanceof p.skipWrappedFunction))return I=!0,E(K);Q=K}if(--k===0&&O>=S)return E(Q)})];g(F.fn,C,G,G[0])}else if(F.fn.length>0){for(var X=[v(L)],q=arguments.length>=2?arguments:[null].concat(R),T=1;T<q.length;++T)T===q.length-1&&typeof q[T]=="function"||X.push(q[T]);g(F.fn,C,X,X[0])}else{var U=null;try{U=F.fn.call(C)}catch(K){if(K!=null)return E(K)}if(b(U))U.then(function(){return L()},function(K){return L(K)});else{if(++O>=S)return k>0?void 0:y(function(){E(Q)});$()}}}}function L(F){if(F){if(I)return;if(!(F instanceof p.skipWrappedFunction))return I=!0,E(F);Q=F}if(++O>=S)return k>0?void 0:E(Q);$.apply(C,arguments)}$.apply(null,[null].concat(B))},p.prototype.execPreSync=function(j,C,B){for(var E=this._pres.get(j)||[],_=E.length,S=0;S<_;++S)E[S].fn.apply(C,B||[])},p.prototype.execPost=function(j,C,B,E,_){arguments.length<5&&(_=E,E=null);var S=this._posts.get(j)||[],N=S.length,O=0,k=null;if(E&&E.error&&(k=E.error),!N)return y(function(){_.apply(null,[k].concat(B))});(function I(){for(var R=S[O].fn,Q=0,$=B.length,L=[],F=0;F<$;++F)Q+=B[F]&&B[F]._kareemIgnore?0:1,B[F]&&B[F]._kareemIgnore||L.push(B[F]);if(k)if(w(S[O],Q)){var G=v(function(U){if(U){if(U instanceof p.overwriteResult)return B=U.args,++O>=N?_.call(null,k):I();k=U}if(++O>=N)return _.call(null,k);I()});g(R,C,[k].concat(L).concat([G]),G)}else{if(++O>=N)return _.call(null,k);I()}else{var X=v(function(U){return U?U instanceof p.overwriteResult?(B=U.args,++O>=N?_.apply(null,[null].concat(B)):I()):(k=U,I()):++O>=N?_.apply(null,[null].concat(B)):void I()});if(w(S[O],Q))return++O>=N?_.apply(null,[null].concat(B)):I();if(R.length===Q+1)g(R,C,L.concat([X]),X);else{var q,T;try{T=R.apply(C,L)}catch(U){q=U,k=U}if(b(T))return T.then(function(U){X(U instanceof p.overwriteResult?U:null)},function(U){return X(U)});if(T instanceof p.overwriteResult&&(B=T.args),++O>=N)return _.apply(null,[q].concat(B));I()}}})()},p.prototype.execPostSync=function(j,C,B){for(var E=this._posts.get(j)||[],_=E.length,S=0;S<_;++S){var N=E[S].fn.apply(C,B||[]);N instanceof p.overwriteResult&&(B=N.args)}return B},p.prototype.createWrapperSync=function(j,C){var B=this;return function(){B.execPreSync(j,this,arguments);var E=C.apply(this,arguments);return B.execPostSync(j,this,[E])[0]}},p.prototype.wrap=function(j,C,B,E,_){var S=E.length>0?E[E.length-1]:null,N=Array.from(E);typeof S=="function"&&N.pop();var O=this,k=(_=_||{}).checkForPromise;this.execPre(j,B,E,function(I){if(I&&!(I instanceof p.skipWrappedFunction)){for(var R=_.numCallbackParams||0,Q=_.contextParameter?[B]:[],$=Q.length;$<R;++$)Q.push(null);return m(O,I,j,B,Q,_,S)}var L,F,G=C.length;if(I instanceof p.skipWrappedFunction)return L=I.args[0],X.apply(void 0,[null].concat((function(q){if(Array.isArray(q))return d(q)})(F=I.args)||(function(q){if(typeof Symbol<"u"&&q[Symbol.iterator]!=null||q["@@iterator"]!=null)return Array.from(q)})(F)||u(F)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()));try{L=C.apply(B,N.concat(X))}catch(q){return X(q)}if(k){if(b(L))return L.then(function(q){return X(null,q)},function(q){return X(q)});if(G<N.length+1)return X(null,L)}function X(){var q=Array.from(arguments);if(q.shift(),_.nullResultByDefault&&q.length===0&&q.push(null),arguments[0])return m(O,arguments[0],j,B,q,_,S);O.execPost(j,B,q,function(){S!==null&&(arguments[0]?S(arguments[0]):S.apply(B,arguments))})}})},p.prototype.filter=function(j){for(var C=this,B=this.clone(),E=Array.from(B._pres.keys()),_=function(){var Q=N[S],$=C._pres.get(Q).map(function(L){return Object.assign({},L,{name:Q})}).filter(j);if($.length===0)return B._pres.delete(Q),1;$.numAsync=$.filter(function(L){return L.isAsync}).length,B._pres.set(Q,$)},S=0,N=E;S<N.length;S++)_();for(var O=Array.from(B._posts.keys()),k=function(){var Q=R[I],$=C._posts.get(Q).map(function(L){return Object.assign({},L,{name:Q})}).filter(j);if($.length===0)return B._posts.delete(Q),1;B._posts.set(Q,$)},I=0,R=O;I<R.length;I++)k();return B},p.prototype.hasHooks=function(j){return this._pres.has(j)||this._posts.has(j)},p.prototype.createWrapper=function(j,C,B,E){var _=this;return this.hasHooks(j)?function(){var S=B||this;_.wrap(j,C,S,Array.from(arguments),E)}:function(){var S=arguments,N=this;y(function(){return C.apply(N,S)})}},p.prototype.pre=function(j,C,B,E,_){var S={};l(C)==="object"&&C!==null?C=(S=C).isAsync:typeof arguments[1]!="boolean"&&(B=C,C=!1);var N=this._pres.get(j)||[];if(this._pres.set(j,N),C&&(N.numAsync=N.numAsync||0,++N.numAsync),typeof B!="function")throw new Error('pre() requires a function, got "'+l(B)+'"');return _?N.unshift(Object.assign({},S,{fn:B,isAsync:C})):N.push(Object.assign({},S,{fn:B,isAsync:C})),this},p.prototype.post=function(j,C,B,E){var _=this._posts.get(j)||[];if(typeof C=="function"&&(E=!!B,B=C,C={}),typeof B!="function")throw new Error('post() requires a function, got "'+l(B)+'"');return E?_.unshift(Object.assign({},C,{fn:B})):_.push(Object.assign({},C,{fn:B})),this._posts.set(j,_),this},p.prototype.clone=function(){var j,C=new p,B=c(this._pres.keys());try{for(B.s();!(j=B.n()).done;){var E=j.value,_=this._pres.get(E).slice();_.numAsync=this._pres.get(E).numAsync,C._pres.set(E,_)}}catch(k){B.e(k)}finally{B.f()}var S,N=c(this._posts.keys());try{for(N.s();!(S=N.n()).done;){var O=S.value;C._posts.set(O,this._posts.get(O).slice())}}catch(k){N.e(k)}finally{N.f()}return C},p.prototype.merge=function(j,C){var B,E=(C=arguments.length===1||C)?this.clone():this,_=c(j._pres.keys());try{var S=function(){var I=B.value,R=E._pres.get(I)||[],Q=j._pres.get(I).filter(function(L){return R.map(function(F){return F.fn}).indexOf(L.fn)===-1}),$=R.concat(Q);$.numAsync=R.numAsync||0,$.numAsync+=Q.filter(function(L){return L.isAsync}).length,E._pres.set(I,$)};for(_.s();!(B=_.n()).done;)S()}catch(I){_.e(I)}finally{_.f()}var N,O=c(j._posts.keys());try{var k=function(){var I=N.value,R=E._posts.get(I)||[],Q=j._posts.get(I).filter(function($){return R.indexOf($)===-1});E._posts.set(I,R.concat(Q))};for(O.s();!(N=O.n()).done;)k()}catch(I){O.e(I)}finally{O.f()}return E};var y=l({env:{}})==="object"&&{}!==null&&{}.nextTick||function(j){setTimeout(j,0)};function w(j,C){return!!j.errorHandler||j.fn.length===C+2}o.exports=p},8435:o=>{o.exports=Math.min},8442:(o,c,l)=>{var u=l(1898);o.exports=function(d){for(var A=0,f=Object.values(u);A<f.length;A++)(0,f[A])(d,{deduplicate:!0});d.plugins=Object.values(u).map(function(p){return{fn:p,opts:{deduplicate:!0}}}).concat(d.plugins)}},8499:(o,c,l)=>{var u=l(8953);o.exports=function(d){var A=this!=null?this.path:null;return u(d,A)}},8517:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v,y,w){var j,C,B;(function(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")})(this,g);var E=(j=w?.matchedCount)!==null&&j!==void 0?j:0,_=(C=w?.insertedCount)!==null&&C!==void 0?C:0,S=y.map(function(O){return O._id}).join(", ");S.length>100&&(S=S.slice(0,100)+"...");var N=y.length-E-_;return(B=(function(O,k,I){return k=A(k),(function(R,Q){if(Q&&(u(Q)=="object"||typeof Q=="function"))return Q;if(Q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $})(R)})(O,d()?Reflect.construct(k,I||[],A(O).constructor):k.apply(O,I))})(this,g,["".concat(v,".bulkSave() was not able to update ").concat(N," of the given documents due to incorrect version or optimistic concurrency, document ids: ").concat(S)])).modelName=v,B.documents=y,B.bulkWriteResult=w,B.numDocumentsNotUpdated=N,B}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"MongooseBulkSaveIncompleteError"}),o.exports=p},8533:(o,c,l)=>{var u=l(5832).hp;function d(g){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},d(g)}function A(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A=function(){return!!g})()}function f(g){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},f(g)}function p(g,b){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,y){return v.__proto__=y,v},p(g,b)}l(7591).set(l(4026));var m=l(8285);m.setBrowser(!0),c.Error=l(3672),c.Schema=l(7058),c.Types=l(9600),c.VirtualType=l(622),c.SchemaType=l(6426),c.SchemaTypeOptions=l(8879),c.utils=l(8768),c.Document=m(),c.model=function(g,b){var v=(function(y){function w(C,B){return(function(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")})(this,w),(function(E,_,S){return _=f(_),(function(N,O){if(O&&(d(O)=="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k})(N)})(E,A()?Reflect.construct(_,S||[],f(E).constructor):_.apply(E,S))})(this,w,[C,b,B])}return(function(C,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(B&&B.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),B&&p(C,B)})(w,y),j=w,Object.defineProperty(j,"prototype",{writable:!1}),j;var j})(c.Document);return v.modelName=g,v},typeof window<"u"&&(window.mongoose=o.exports,window.Buffer=u)},8633:o=>{o.exports=Math.pow},8728:(o,c,l)=>{function u(N,O){var k=Object.keys(N);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(N);O&&(I=I.filter(function(R){return Object.getOwnPropertyDescriptor(N,R).enumerable})),k.push.apply(k,I)}return k}function d(N){for(var O=1;O<arguments.length;O++){var k=arguments[O]!=null?arguments[O]:{};O%2?u(Object(k),!0).forEach(function(I){A(N,I,k[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(k)):u(Object(k)).forEach(function(I){Object.defineProperty(N,I,Object.getOwnPropertyDescriptor(k,I))})}return N}function A(N,O,k){return(O=(function(I){var R=(function(Q){if(f(Q)!="object"||!Q)return Q;var $=Q[Symbol.toPrimitive];if($!==void 0){var L=$.call(Q,"string");if(f(L)!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Q)})(I);return f(R)=="symbol"?R:R+""})(O))in N?Object.defineProperty(N,O,{value:k,enumerable:!0,configurable:!0,writable:!0}):N[O]=k,N}function f(N){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},f(N)}function p(N,O){(O==null||O>N.length)&&(O=N.length);for(var k=0,I=Array(O);k<O;k++)I[k]=N[k];return I}var m=l(6426),g=l(3672),b=l(9528),v=l(1244),y=l(4327),w=l(8768),j=l(3305),C=m.CastError;function B(N,O){this.enumValues=[],this.regExp=null,m.call(this,N,O,"String")}function E(N,O){return this.castForQuery(null,N,O)}function _(N){return N==null?this._castNullish(N):this.cast(N,this)}B.schemaName="String",B.defaultOptions={},B.prototype=Object.create(m.prototype),B.prototype.constructor=B,Object.defineProperty(B.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:b}),B._cast=v,B.cast=function(N){return arguments.length===0||(N===!1&&(N=this._defaultCaster),this._cast=N),this._cast},B._defaultCaster=function(N){if(N!=null&&typeof N!="string")throw new Error;return N},B.get=m.get,B.set=m.set,B.setters=[],B._checkRequired=function(N){return(N instanceof String||typeof N=="string")&&N.length},B.checkRequired=m.checkRequired,B.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter(function($){return $.validator!==this.enumValidator},this),this.enumValidator=!1),arguments[0]===void 0||arguments[0]===!1)return this;var N,O;w.isObject(arguments[0])?Array.isArray(arguments[0].values)?(N=arguments[0].values,O=arguments[0].message):(N=w.object.vals(arguments[0]),O=g.messages.String.enum):(N=arguments,O=g.messages.String.enum);var k,I=(function($,L){var F=typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"];if(!F){if(Array.isArray($)||(F=(function(K,z){if(K){if(typeof K=="string")return p(K,z);var M={}.toString.call(K).slice(8,-1);return M==="Object"&&K.constructor&&(M=K.constructor.name),M==="Map"||M==="Set"?Array.from(K):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?p(K,z):void 0}})($))||L){F&&($=F);var G=0,X=function(){};return{s:X,n:function(){return G>=$.length?{done:!0}:{done:!1,value:$[G++]}},e:function(K){throw K},f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q,T=!0,U=!1;return{s:function(){F=F.call($)},n:function(){var K=F.next();return T=K.done,K},e:function(K){U=!0,q=K},f:function(){try{T||F.return==null||F.return()}finally{if(U)throw q}}}})(N);try{for(I.s();!(k=I.n()).done;){var R=k.value;R!==void 0&&this.enumValues.push(this.cast(R))}}catch($){I.e($)}finally{I.f()}var Q=this.enumValues;return this.enumValidator=function($){return $==null||~Q.indexOf($)},this.validators.push({validator:this.enumValidator,message:O,type:"enum",enumValues:Q}),this},B.prototype.lowercase=function(N){var O=this;return arguments.length>0&&!N?this:this.set(function(k){return typeof k!="string"&&(k=O.cast(k)),k&&k.toLowerCase()})},B.prototype.uppercase=function(N){var O=this;return arguments.length>0&&!N?this:this.set(function(k){return typeof k!="string"&&(k=O.cast(k)),k&&k.toUpperCase()})},B.prototype.trim=function(N){var O=this;return arguments.length>0&&!N?this:this.set(function(k){return typeof k!="string"&&(k=O.cast(k)),k&&k.trim()})},B.prototype.minlength=function(N,O){if(this.minlengthValidator&&(this.validators=this.validators.filter(function(I){return I.validator!==this.minlengthValidator},this)),N!=null){var k=O||g.messages.String.minlength;k=k.replace(/{MINLENGTH}/,N),this.validators.push({validator:this.minlengthValidator=function(I){return I===null||I.length>=N},message:k,type:"minlength",minlength:N})}return this},B.prototype.minLength=B.prototype.minlength,B.prototype.maxlength=function(N,O){if(this.maxlengthValidator&&(this.validators=this.validators.filter(function(I){return I.validator!==this.maxlengthValidator},this)),N!=null){var k=O||g.messages.String.maxlength;k=k.replace(/{MAXLENGTH}/,N),this.validators.push({validator:this.maxlengthValidator=function(I){return I===null||I.length<=N},message:k,type:"maxlength",maxlength:N})}return this},B.prototype.maxLength=B.prototype.maxlength,B.prototype.match=function(N,O){var k=O||g.messages.String.match;return this.validators.push({validator:function(I){return!!N&&(N.lastIndex=0,I==null||I===""||N.test(I))},message:k,type:"regexp",regexp:N}),this},B.prototype.checkRequired=function(N,O){return f(N)==="object"&&m._isRef(this,N,O,!0)?N!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():B.checkRequired())(N)},B.prototype.cast=function(N,O,k,I,R){if(typeof N!="string"&&m._isRef(this,N,O,k))return this._castRef(N,O,k,R);var Q;Q=typeof this._castFunction=="function"?this._castFunction:typeof this.constructor.cast=="function"?this.constructor.cast():B.cast();try{return Q(N)}catch{throw new C("string",N,this.path,null,this)}};var S=d(d({},m.prototype.$conditionalHandlers),{},{$all:function(N,O){var k=this;return Array.isArray(N)?N.map(function(I){return k.castForQuery(null,I,O)}):[this.castForQuery(null,N,O)]},$gt:E,$gte:E,$lt:E,$lte:E,$options:_,$regex:function(N){return Object.prototype.toString.call(N)==="[object RegExp]"?N:_.call(this,N)},$not:E});Object.defineProperty(B.prototype,"$conditionalHandlers",{enumerable:!1,value:S}),B.prototype.castForQuery=function(N,O,k){var I;if(N!=null){if(!(I=this.$conditionalHandlers[N]))throw new Error("Can't use "+N+" with String.");return I.call(this,O,k)}if(Object.prototype.toString.call(O)==="[object RegExp]"||j(O,"BSONRegExp"))return O;try{return this.applySetters(O,k)}catch(R){throw R instanceof C&&R.path===this.path&&this.$fullPath!=null&&(R.path=this.$fullPath),R}},B.prototype.toJSONSchema=function(N){var O=this.options.required&&typeof this.options.required!="function";return y("string","string",N?.useBsonType,O)},B.prototype.autoEncryptionType=function(){return"string"},o.exports=B},8759:o=>{o.exports=function(c){return c.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}},8768:(o,c,l)=>{var u=l(5832).hp;function d(M,H){var Y=Object.keys(M);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(M);H&&(ae=ae.filter(function(oe){return Object.getOwnPropertyDescriptor(M,oe).enumerable})),Y.push.apply(Y,ae)}return Y}function A(M,H,Y){return(H=(function(ae){var oe=(function(be){if(g(be)!="object"||!be)return be;var ge=be[Symbol.toPrimitive];if(ge!==void 0){var he=ge.call(be,"string");if(g(he)!="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(be)})(ae);return g(oe)=="symbol"?oe:oe+""})(H))in M?Object.defineProperty(M,H,{value:Y,enumerable:!0,configurable:!0,writable:!0}):M[H]=Y,M}function f(M,H){var Y=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(!Y){if(Array.isArray(M)||(Y=p(M))||H){Y&&(M=Y);var ae=0,oe=function(){};return{s:oe,n:function(){return ae>=M.length?{done:!0}:{done:!1,value:M[ae++]}},e:function(ke){throw ke},f:oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var be,ge=!0,he=!1;return{s:function(){Y=Y.call(M)},n:function(){var ke=Y.next();return ge=ke.done,ke},e:function(ke){he=!0,be=ke},f:function(){try{ge||Y.return==null||Y.return()}finally{if(he)throw be}}}}function p(M,H){if(M){if(typeof M=="string")return m(M,H);var Y={}.toString.call(M).slice(8,-1);return Y==="Object"&&M.constructor&&(Y=M.constructor.name),Y==="Map"||Y==="Set"?Array.from(M):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?m(M,H):void 0}}function m(M,H){(H==null||H>M.length)&&(H=M.length);for(var Y=0,ae=Array(H);Y<H;Y++)ae[Y]=M[Y];return ae}function g(M){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},g(M)}var b,v=l(6353).UUID,y=l(354),w=l(5678),j=l(5549),C=l(6948),B=l(4450),E=l(2746),_=l(608),S=l(1243),N=l(1347),O=l(3305),k=l(2789),I=l(9696),R=l(2497),Q=l(5268),$=l(9539),L=l(2793),F=l(7291).trustedSymbol;c.specialProperties=L,c.isMongooseArray=S.isMongooseArray,c.isMongooseDocumentArray=N.isMongooseDocumentArray,c.registerMongooseArray=S.registerMongooseArray,c.registerMongooseDocumentArray=N.registerMongooseDocumentArray;var G=/\s/,X=/\s+/;c.toCollectionName=function(M,H){if(M==="system.profile"||M==="system.indexes")return M;if(typeof H=="function"){if(typeof M!="string")throw new TypeError("Collection name must be a string");if(M.length===0)throw new TypeError("Collection name cannot be empty");return H(M)}return M},c.deepEqual=function M(H,Y){if(H===Y)return!0;if(g(H)!=="object"||g(Y)!=="object")return H===Y;if(H instanceof Date&&Y instanceof Date)return H.getTime()===Y.getTime();if(O(H,"ObjectId")&&O(Y,"ObjectId")||O(H,"Decimal128")&&O(Y,"Decimal128"))return H.toString()===Y.toString();if(H instanceof RegExp&&Y instanceof RegExp)return H.source===Y.source&&H.ignoreCase===Y.ignoreCase&&H.multiline===Y.multiline&&H.global===Y.global&&H.dotAll===Y.dotAll&&H.unicode===Y.unicode&&H.sticky===Y.sticky&&H.hasIndices===Y.hasIndices;if(H==null||Y==null||H.prototype!==Y.prototype)return!1;if(H instanceof Map||Y instanceof Map)return H instanceof Map&&Y instanceof Map&&M(Array.from(H.keys()),Array.from(Y.keys()))&&M(Array.from(H.values()),Array.from(Y.values()));if(H instanceof Number&&Y instanceof Number)return H.valueOf()===Y.valueOf();if(u.isBuffer(H))return c.buffer.areEqual(H,Y);if(Array.isArray(H)||Array.isArray(Y)){if(!Array.isArray(H)||!Array.isArray(Y))return!1;var ae=H.length;if(ae!==Y.length)return!1;for(var oe=0;oe<ae;++oe)if(!M(H[oe],Y[oe]))return!1;return!0}H.$__!=null?H=H._doc:R(H)&&(H=H.toObject()),Y.$__!=null?Y=Y._doc:R(Y)&&(Y=Y.toObject());var be=Object.keys(H),ge=Object.keys(Y),he=be.length;if(he!==ge.length)return!1;for(var ke=he-1;ke>=0;ke--)if(be[ke]!==ge[ke])return!1;for(var Z=0,te=be;Z<te.length;Z++){var fe=te[Z];if(!M(H[fe],Y[fe]))return!1}return!0},c.last=function(M){if(M.length>0)return M[M.length-1]},c.promiseOrCallback=Q,c.cloneArrays=function(M){return Array.isArray(M)?M.map(function(H){return c.cloneArrays(H)}):M},c.omit=function(M,H){if(H==null)return Object.assign({},M);Array.isArray(H)||(H=[H]);var Y,ae=Object.assign({},M),oe=f(H);try{for(oe.s();!(Y=oe.n()).done;)delete ae[Y.value]}catch(be){oe.e(be)}finally{oe.f()}return ae},c.clonePOJOsAndArrays=function(M){if(M==null||M.$__!=null)return M;if(k(M)){M=(function(ge){for(var he=1;he<arguments.length;he++){var ke=arguments[he]!=null?arguments[he]:{};he%2?d(Object(ke),!0).forEach(function(Z){A(ge,Z,ke[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ge,Object.getOwnPropertyDescriptors(ke)):d(Object(ke)).forEach(function(Z){Object.defineProperty(ge,Z,Object.getOwnPropertyDescriptor(ke,Z))})}return ge})({},M);for(var H=0,Y=Object.keys(M);H<Y.length;H++){var ae=Y[H];M[ae]=c.clonePOJOsAndArrays(M[ae])}return M}if(Array.isArray(M)){M=(function(ge){if(Array.isArray(ge))return m(ge)})(be=M)||(function(ge){if(typeof Symbol<"u"&&ge[Symbol.iterator]!=null||ge["@@iterator"]!=null)return Array.from(ge)})(be)||p(be)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})();for(var oe=0;oe<M.length;++oe)M[oe]=c.clonePOJOsAndArrays(M[oe]);return M}var be;return M},c.merge=function M(H,Y,ae,oe){ae=ae||{};var be,ge=Object.keys(Y),he=0,ke=ge.length;Y[F]&&(H[F]=Y[F]),oe=oe||"";for(var Z=ae.omitNested||{};he<ke;)if(be=ge[he++],!(ae.omit&&ae.omit[be]||Z[oe]||L.has(be)))if(H[be]==null)H[be]=c.clonePOJOsAndArrays(Y[be]);else if(c.isObject(Y[be])){if(c.isObject(H[be])||(H[be]={}),Y[be]!=null){if(ae.isDiscriminatorSchemaMerge&&Y[be].$isSingleNested&&H[be].$isMongooseDocumentArray||Y[be].$isMongooseDocumentArray&&H[be].$isSingleNested)continue;if(Y[be].instanceOfSchema){H[be].instanceOfSchema?$(H[be],Y[be].clone(),ae.isDiscriminatorSchemaMerge):H[be]=Y[be].clone();continue}if(O(Y[be],"ObjectId")){H[be]=new j(Y[be]);continue}}M(H[be],Y[be],ae,oe?oe+"."+be:be)}else ae.overwrite&&(H[be]=Y[be]);return H},c.toObject=function M(H){var Y;if(b||(b=l(2400)),H==null)return H;if(H instanceof b)return H.toObject();if(Array.isArray(H)){Y=[];var ae,oe=f(H);try{for(oe.s();!(ae=oe.n()).done;){var be=ae.value;Y.push(M(be))}}catch(Z){oe.e(Z)}finally{oe.f()}return Y}if(c.isPOJO(H)){Y={},H[F]&&(Y[F]=H[F]);for(var ge=0,he=Object.keys(H);ge<he.length;ge++){var ke=he[ge];L.has(ke)||(Y[ke]=M(H[ke]))}return Y}return H},c.isObject=_,c.isPOJO=l(2789),c.isNonBuiltinObject=function(M){return!(g(M)!=="object"||c.isNativeObject(M)||c.isMongooseType(M)||M instanceof v||M==null)},c.isNativeObject=function(M){return Array.isArray(M)||M instanceof Date||M instanceof Boolean||M instanceof Number||M instanceof String},c.isEmptyObject=function(M){return M!=null&&g(M)==="object"&&Object.keys(M).length===0},c.hasKey=function(M,H){for(var Y=0,ae=Object.keys(M);Y<ae.length;Y++){var oe=ae[Y];if(oe===H||c.isPOJO(M[oe])&&c.hasKey(M[oe],H))return!0}return!1},c.tick=function(M){if(typeof M=="function")return function(){try{M.apply(this,arguments)}catch(H){E(function(){throw H})}}},c.isMongooseType=function(M){return O(M,"ObjectId")||O(M,"Decimal128")||M instanceof u},c.isMongooseObject=R,c.expires=function(M){M&&M.constructor.name==="Object"&&"expires"in M&&(M.expireAfterSeconds=typeof M.expires!="string"?M.expires:Math.round(y(M.expires)/1e3),delete M.expires)},c.populate=function(M,H,Y,ae,oe,be,ge,he){var ke,Z=null;if(arguments.length===1){if(M instanceof C)return M._docs={},M._childDocs=[],[M];if(Array.isArray(M)){var te=(ke=[],M.forEach(function(fe){G.test(fe.path)?fe.path.split(X).forEach(function(we){var Fe=Object.assign({},fe);Fe.path=we,ke.push(Fe)}):ke.push(fe)}),ke);return te.map(function(fe){return c.populate(fe)[0]})}Z=c.isObject(M)?Object.assign({},M):{path:M}}else Z=g(Y)==="object"?{path:M,select:H,match:Y,options:ae}:{path:M,select:H,model:Y,match:ae,options:oe,populate:be,justOne:ge,count:he};if(!(typeof Z.path=="string"||Array.isArray(Z.path)&&Z.path.every(function(fe){return typeof fe=="string"})))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+g(M)+"`");return(function(fe){if(Array.isArray(fe.populate)){var we=[];fe.populate.forEach(function(Be){if(G.test(Be.path)){var Le=Object.assign({},Be);Le.path.split(X).forEach(function(ve){Le.path=ve,we.push(c.populate(Le)[0])})}else we.push(c.populate(Be)[0])}),fe.populate=c.populate(we)}else fe.populate!=null&&g(fe.populate)==="object"&&(fe.populate=c.populate(fe.populate));var Fe=[],_e=G.test(fe.path)?fe.path.split(X):Array.isArray(fe.path)?fe.path:[fe.path];fe.options!=null&&(fe.options=B(fe.options));var Ce,ie=f(_e);try{for(ie.s();!(Ce=ie.n()).done;){var me=Ce.value;Fe.push(new C(Object.assign({},fe,{path:me})))}}catch(Be){ie.e(Be)}finally{ie.f()}return Fe})(Z)},c.getValue=function(M,H,Y){return w.get(M,H,T,Y)};var q=Object.freeze({getters:!1});function T(M,H){if(H==="$*"&&M instanceof Map)return M;var Y=M?._doc||M;return Y!=null&&Y.isMongooseArrayProxy&&(Y=Y.__array),Y instanceof Map?Y.get(H,q):Y[H]}c.setValue=function(M,H,Y,ae,oe){w.set(M,H,Y,"_doc",ae,oe)},c.object={},c.object.vals=function(M){for(var H=Object.keys(M),Y=H.length,ae=[];Y--;)ae.push(M[H[Y]]);return ae};var U=Object.prototype.hasOwnProperty;c.object.hasOwnProperty=function(M,H){return U.call(M,H)},c.isNullOrUndefined=function(M){return M==null},c.array={},c.array.flatten=function M(H,Y,ae){return ae||(ae=[]),H.forEach(function(oe){Array.isArray(oe)?M(oe,Y,ae):Y&&!Y(oe)||ae.push(oe)}),ae};var K=Object.prototype.hasOwnProperty;c.hasUserDefinedProperty=function(M,H){if(M==null)return!1;if(Array.isArray(H)){var Y,ae=f(H);try{for(ae.s();!(Y=ae.n()).done;){var oe=Y.value;if(c.hasUserDefinedProperty(M,oe))return!0}}catch(ge){ae.e(ge)}finally{ae.f()}return!1}if(K.call(M,H))return!0;if(g(M)==="object"&&H in M){var be=M[H];return be!==Object.prototype[H]&&be!==Array.prototype[H]}return!1};var z=Math.pow(2,32)-1;c.isArrayIndex=function(M){return typeof M=="number"?M>=0&&M<=z:typeof M=="string"&&!!/^\d+$/.test(M)&&(M=+M)>=0&&M<=z},c.array.unique=function(M){var H,Y=new Set,ae=new Set,oe=[],be=f(M);try{for(be.s();!(H=be.n()).done;){var ge=H.value;if(typeof ge=="number"||typeof ge=="string"||ge==null){if(Y.has(ge))continue;oe.push(ge),Y.add(ge)}else if(O(ge,"ObjectId")){if(ae.has(ge.toString()))continue;oe.push(ge),ae.add(ge.toString())}else oe.push(ge)}}catch(he){be.e(he)}finally{be.f()}return oe},c.buffer={},c.buffer.areEqual=function(M,H){if(!u.isBuffer(M)||!u.isBuffer(H)||M.length!==H.length)return!1;for(var Y=0,ae=M.length;Y<ae;++Y)if(M[Y]!==H[Y])return!1;return!0},c.getFunctionName=I,c.decorate=function(M,H){for(var Y in H)L.has(Y)||(M[Y]=H[Y])},c.mergeClone=function(M,H){R(H)&&(H=H.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));for(var Y,ae=Object.keys(H),oe=ae.length,be=0;be<oe;)if(Y=ae[be++],!L.has(Y))if(M[Y]===void 0)M[Y]=B(H[Y],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{var ge=H[Y];if(ge==null||!ge.valueOf||ge instanceof Date||(ge=ge.valueOf()),c.isObject(ge)){var he=ge;R(ge)&&!ge.isMongooseBuffer&&(he=he.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),ge.isMongooseBuffer&&(he=u.from(he)),c.mergeClone(M[Y],he)}else M[Y]=B(ge,{flattenDecimals:!1})}},c.each=function(M,H){var Y,ae=f(M);try{for(ae.s();!(Y=ae.n()).done;)H(Y.value)}catch(oe){ae.e(oe)}finally{ae.f()}},c.renameObjKey=function(M,H,Y){return Object.keys(M).reduce(function(ae,oe){return oe===H?ae[Y]=M[H]:ae[oe]=M[oe],ae},{})},c.getOption=function(M){var H,Y=f(Array.prototype.slice.call(arguments,1));try{for(Y.s();!(H=Y.n()).done;){var ae=H.value;if(ae!=null&&ae[M]!=null)return ae[M]}}catch(oe){Y.e(oe)}finally{Y.f()}return null},c.noop=function(){},c.errorToPOJO=function(M){if(!(M instanceof Error))throw new Error("`error` must be `instanceof Error`.");var H,Y={},ae=f(Object.getOwnPropertyNames(M));try{for(ae.s();!(H=ae.n()).done;){var oe=H.value;Y[oe]=M[oe]}}catch(be){ae.e(be)}finally{ae.f()}return Y},c.warn=function(M){return{env:{}}.emitWarning(M,{code:"MONGOOSE"})},c.injectTimestampsOption=function(M,H){H!=null&&(M.timestamps=H)}},8863:(o,c,l)=>{var u=l(2354),d=l(2268),A=l(3123),f=l(5477);o.exports=function(p){if(p.length<1||typeof p[0]!="function")throw new d("a function is required");return f(u,A,p)}},8879:(o,c,l)=>{function u(p,m,g){return Object.defineProperty(p,"prototype",{writable:!1}),p}var d=l(4450),A=u(function p(m){if((function(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")})(this,p),m==null)return this;Object.assign(this,d(m))}),f=l(5761);Object.defineProperty(A.prototype,"type",f),Object.defineProperty(A.prototype,"validate",f),Object.defineProperty(A.prototype,"cast",f),Object.defineProperty(A.prototype,"required",f),Object.defineProperty(A.prototype,"default",f),Object.defineProperty(A.prototype,"ref",f),Object.defineProperty(A.prototype,"refPath",f),Object.defineProperty(A.prototype,"select",f),Object.defineProperty(A.prototype,"index",f),Object.defineProperty(A.prototype,"unique",f),Object.defineProperty(A.prototype,"immutable",f),Object.defineProperty(A.prototype,"sparse",f),Object.defineProperty(A.prototype,"text",f),Object.defineProperty(A.prototype,"transform",f),o.exports=A},8920:(o,c,l)=>{var u=l(5832).hp;function d(q){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},d(q)}function A(q,T){var U=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!U){if(Array.isArray(q)||(U=f(q))||T){U&&(q=U);var K=0,z=function(){};return{s:z,n:function(){return K>=q.length?{done:!0}:{done:!1,value:q[K++]}},e:function(ae){throw ae},f:z}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var M,H=!0,Y=!1;return{s:function(){U=U.call(q)},n:function(){var ae=U.next();return H=ae.done,ae},e:function(ae){Y=!0,M=ae},f:function(){try{H||U.return==null||U.return()}finally{if(Y)throw M}}}}function f(q,T){if(q){if(typeof q=="string")return p(q,T);var U={}.toString.call(q).slice(8,-1);return U==="Object"&&q.constructor&&(U=q.constructor.name),U==="Map"||U==="Set"?Array.from(q):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?p(q,T):void 0}}function p(q,T){(T==null||T>q.length)&&(T=q.length);for(var U=0,K=Array(T);U<T;U++)K[U]=q[U];return K}var m=l(2400),g=l(6547),b=l(8213),v=l(4473),y=l(4450),w=l(3303)._,j=l(5678),C=l(8768),B=l(3305),E=l(7930).arrayAtomicsSymbol,_=l(7930).arrayParentSymbol,S=l(7930).arrayPathSymbol,N=l(7930).arraySchemaSymbol,O=l(7930).populateModelSymbol,k=Symbol("mongoose#Array#sliced"),I=Array.prototype.push,R={$__getAtomics:function(){var q=[],T=Object.keys(this[E]||{}),U=T.length,K=Object.assign({},w,{_isNested:!0});if(U===0)return q[0]=["$set",this.toObject(K)],q;for(;U--;){var z=T[U],M=this[E][z];C.isMongooseObject(M)?M=M.toObject(K):Array.isArray(M)?M=this.toObject.call(M,K):M!=null&&Array.isArray(M.$each)?M.$each=this.toObject.call(M.$each,K):M!=null&&typeof M.valueOf=="function"&&(M=M.valueOf()),z==="$addToSet"&&(M={$each:M}),q.push([z,M])}return q},$atomics:function(){return this[E]},$parent:function(){return this[_]},$path:function(){return this[S]},$shift:function(){this._registerAtomic("$pop",-1),this._markModified();var q=this.__array;if(!q._shifted)return q._shifted=!0,[].shift.call(q)},$pop:function(){if(this._registerAtomic("$pop",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)},$schema:function(){return this[N]},_cast:function(q){var T,U=!1,K=this[_];if(K&&(U=K.$populated(this[S],!0)),U&&q!=null){if((T=U.options[O])==null)throw new b("No populated model found for path `"+this[S]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");return(u.isBuffer(q)||B(q,"ObjectId")||!C.isObject(q))&&(q={_id:q}),q.schema&&q.schema.discriminatorMapping&&q.schema.discriminatorMapping.key!==void 0||(q=new T(q)),this[N].caster.applySetters(q,K,!0)}return this[N].caster.applySetters(q,K,!1)},_mapCast:function(q,T){return this._cast(q,this.length+T)},_markModified:function(q){var T,U=this[_];if(U){if(T=this[S],arguments.length&&(T=T+"."+q),T!=null&&T.endsWith(".$"))return this;U.markModified(T,arguments.length!==0?q:U)}return this},_registerAtomic:function(q,T){if(!this[k]){if(q==="$set")return this[E]={$set:T},v(this[_],this[S]),this._markModified(),this;var U,K=this[E];if(q==="$pop"&&!("$pop"in K)){var z=this;this[_].once("save",function(){z._popped=z._shifted=null})}if(K.$set||Object.keys(K).length&&!(q in K))return this[E]={$set:this},this;if(q==="$pullAll"||q==="$addToSet")K[q]||(K[q]=[]),K[q]=K[q].concat(T);else if(q==="$pullDocs"){var M=K.$pull||(K.$pull={});T[0]instanceof g?(U=M.$or||(M.$or=[]),Array.prototype.push.apply(U,T.map(function(ge){return ge.toObject({transform:function(he,ke){return ge==null||ge.$__==null||Object.keys(ge.$__.activePaths.getStatePaths("default")).forEach(function(Z){j.unset(Z,ke),Q(ke,Z)}),ke},virtuals:!1})}))):(U=M._id||(M._id={$in:[]})).$in=U.$in.concat(T)}else if(q==="$push")if(K.$push=K.$push||{$each:[]},T!=null&&C.hasUserDefinedProperty(T,"$each"))K.$push=T;else if(T.length===1)K.$push.$each.push(T[0]);else if(T.length<1e4){var H;(H=K.$push.$each).push.apply(H,(function(ge){if(Array.isArray(ge))return p(ge)})(be=T)||(function(ge){if(typeof Symbol<"u"&&ge[Symbol.iterator]!=null||ge["@@iterator"]!=null)return Array.from(ge)})(be)||f(be)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})())}else{var Y,ae=A(T);try{for(ae.s();!(Y=ae.n()).done;){var oe=Y.value;K.$push.$each.push(oe)}}catch(ge){ae.e(ge)}finally{ae.f()}}else K[q]=T;return this}var be},addToSet:function(){$(this,arguments),L(this,arguments);var q=[].map.call(arguments,this._mapCast,this),T=[],U="";q[0]instanceof g?U="doc":q[0]instanceof Date?U="date":B(q[0],"ObjectId")&&(U="ObjectId");var K=C.isMongooseArray(q)?q.__array:q,z=C.isMongooseArray(this)?this.__array:this;return K.forEach(function(M){var H,Y=+M;switch(U){case"doc":H=this.some(function(ae){return ae.equals(M)});break;case"date":H=this.some(function(ae){return+ae===Y});break;case"ObjectId":H=this.find(function(ae){return ae.toString()===M.toString()});break;default:H=~this.indexOf(M)}H||(this._markModified(),z.push(M),this._registerAtomic("$addToSet",M),[].push.call(T,M))},this),T},hasAtomics:function(){return C.isPOJO(this[E])?Object.keys(this[E]).length:0},includes:function(q,T){return this.indexOf(q,T)!==-1},indexOf:function(q,T){B(q,"ObjectId")&&(q=q.toString()),T=T??0;for(var U=this.length,K=T;K<U;++K)if(q==this[K])return K;return-1},inspect:function(){return JSON.stringify(this)},nonAtomicPush:function(){var q=[].map.call(arguments,this._mapCast,this);this._markModified();var T=[].push.apply(this,q);return this._registerAtomic("$set",this),T},pop:function(){this._markModified();var q=[].pop.call(this);return this._registerAtomic("$set",this),q},pull:function(){var q=this,T=[].map.call(arguments,function(M,H){return q._cast(M,H,{defaults:!1})},this),U=this[_].get(this[S]);C.isMongooseArray(U)&&(U=U.__array);var K,z=U.length;for(this._markModified();z--;)(K=U[z])instanceof m?T.some(function(M){return K.equals(M)})&&U.splice(z,1):~this.indexOf.call(T,K)&&U.splice(z,1);return T[0]instanceof g?this._registerAtomic("$pullDocs",T.map(function(M){var H=M.$__getValue("_id");return H===void 0||M.$isDefault("_id")?M:H})):this._registerAtomic("$pullAll",T),v(this[_],this[S])>0&&this._registerAtomic("$set",this),this},push:function(){var q,T=arguments,U=T,K=T[0]!=null&&C.hasUserDefinedProperty(T[0],"$each"),z=C.isMongooseArray(this)?this.__array:this;if(K&&(U=T[0],T=T[0].$each),this[N]==null)return I.apply(this,T);$(this,T),L(this,T),T=[].map.call(T,this._mapCast,this);var M=this[E];return this._markModified(),K?(U.$each=T,(M.$push&&M.$push.$each&&M.$push.$each.length||0)!==0&&M.$push.$position!=U.$position?(U.$position!=null?([].splice.apply(z,[U.$position,0].concat(T)),q=z.length):q=[].push.apply(z,T),this._registerAtomic("$set",this)):U.$position!=null?([].splice.apply(z,[U.$position,0].concat(T)),q=this.length):q=[].push.apply(z,T)):(U=T,q=I.apply(z,T)),this._registerAtomic("$push",U),q},remove:function(){return this.pull.apply(this,arguments)},set:function(q,T,U){var K=this.__array;if(U)return K[q]=T,this;var z=R._cast.call(this,T,q);return R._markModified.call(this,q),K[q]=z,this},shift:function(){var q=C.isMongooseArray(this)?this.__array:this;this._markModified();var T=[].shift.call(q);return this._registerAtomic("$set",this),T},sort:function(){var q=C.isMongooseArray(this)?this.__array:this,T=[].sort.apply(q,arguments);return this._registerAtomic("$set",this),T},splice:function(){var q,T=C.isMongooseArray(this)?this.__array:this;if(this._markModified(),$(this,Array.prototype.slice.call(arguments,2)),arguments.length){var U;if(this[N]==null)U=arguments;else{U=[];for(var K=0;K<arguments.length;++K)U[K]=K<2?arguments[K]:this._cast(arguments[K],arguments[0]+(K-2))}q=[].splice.apply(T,U),this._registerAtomic("$set",this)}return q},toBSON:function(){return this.toObject(w)},toObject:function(q){var T=C.isMongooseArray(this)?this.__array:this;return q&&q.depopulate?((q=y(q))._isNested=!0,[].concat(T).map(function(U){return U instanceof m?U.toObject(q):U})):[].concat(T)},$toObject:function(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift:function(){var q;$(this,arguments),q=this[N]==null?arguments:[].map.call(arguments,this._cast,this);var T=C.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(T,q),this._registerAtomic("$set",this),this.length}};function Q(q,T,U){if(typeof T=="string"){if(T.indexOf(".")===-1)return;T=j.stringToParts(T)}(U=U||0)>=T.length||q!=null&&d(q)==="object"&&(Q(q[T[0]],T,U+1),q[T[0]]!=null&&d(q[T[0]])==="object"&&Object.keys(q[T[0]]).length===0&&delete q[T[0]])}function $(q,T){var U,K,z,M=q==null?null:q[N]&&q[N].caster&&q[N].caster.options&&q[N].caster.options.ref||null;q.length===0&&T.length!==0&&(function(H,Y){if(!Y)return!1;var ae,oe=A(H);try{for(oe.s();!(ae=oe.n()).done;){var be=ae.value;if(be==null)return!1;var ge=be.constructor;if(!(be instanceof m)||ge.modelName!==Y&&ge.baseModelName!==Y)return!1}}catch(he){oe.e(he)}finally{oe.f()}return!0})(T,M)&&q[_].$populated(q[S],[],(U={},K=O,z=T[0].constructor,(K=(function(H){var Y=(function(ae){if(d(ae)!="object"||!ae)return ae;var oe=ae[Symbol.toPrimitive];if(oe!==void 0){var be=oe.call(ae,"string");if(d(be)!="object")return be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ae)})(H);return d(Y)=="symbol"?Y:Y+""})(K))in U?Object.defineProperty(U,K,{value:z,enumerable:!0,configurable:!0,writable:!0}):U[K]=z,U))}function L(q,T){var U=q==null?null:q[N]&&q[N].caster&&q[N].caster.options&&q[N].caster.options.ref||null,K=q[_],z=q[S];if(U&&K.populated(z)){var M,H=A(T);try{for(H.s();!(M=H.n()).done;){var Y=M.value;if(Y!=null&&(d(Y)!=="object"||Y instanceof String||Y instanceof Number||Y instanceof u||C.isMongooseType(Y))){K.depopulate(z);break}}}catch(ae){H.e(ae)}finally{H.f()}}}for(var F=function(){var q=X[G];if(Array.prototype[q]==null)return 1;R[q]=function(){var T=C.isMongooseArray(this)?this.__array:this,U=[].concat(T);return U[q].apply(U,arguments)}},G=0,X=["filter","flat","flatMap","map","slice"];G<X.length;G++)F();o.exports=R},8953:(o,c,l)=>{var u=l(3609);o.exports=function(d,A){if(o.exports.convertToTrue.has(d))return!0;if(o.exports.convertToFalse.has(d))return!1;if(d==null)return d;throw new u("boolean",d,A)},o.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]),o.exports.convertToFalse=new Set([!1,"false",0,"0","no"])},8995:(o,c,l)=>{function u(m){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(m)}function d(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!m})()}function A(m){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},A(m)}function f(m,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,v){return b.__proto__=v,b},f(m,g)}var p=(function(m){function g(v,y,w){var j;return(function(C,B){if(!(C instanceof B))throw new TypeError("Cannot call a class as a function")})(this,g),(j=(function(C,B,E){return B=A(B),(function(_,S){if(S&&(u(S)=="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N})(_)})(C,d()?Reflect.construct(B,E||[],A(C).constructor):B.apply(C,E))})(this,g,[y=y||"Field `"+v+"` is not in schema and strict mode is set to throw."])).isImmutableError=!!w,j.path=v,j}return(function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),y&&f(v,y)})(g,m),b=g,Object.defineProperty(b,"prototype",{writable:!1}),b;var b})(l(8213));Object.defineProperty(p.prototype,"name",{value:"StrictModeError"}),o.exports=p},9064:(o,c,l)=>{function u(p){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u(p)}var d=l(3609),A=l(8953),f=l(1244);o.exports=function(p,m){if(p==null||u(p)!=="object")throw new d("$text",p,m);return p.$search!=null&&(p.$search=f(p.$search,m+".$search")),p.$language!=null&&(p.$language=f(p.$language,m+".$language")),p.$caseSensitive!=null&&(p.$caseSensitive=A(p.$caseSensitive,m+".$castSensitive")),p.$diacriticSensitive!=null&&(p.$diacriticSensitive=A(p.$diacriticSensitive,m+".$diacriticSensitive")),p}},9068:(o,c,l)=>{function u(R){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},u(R)}function d(R,Q,$){return Q in R?Object.defineProperty(R,Q,{value:$,enumerable:!0,configurable:!0,writable:!0}):R[Q]=$,R}function A(R,Q){for(var $=0;$<Q.length;$++){var L=Q[$];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(R,L.key,L)}}function f(R,Q){return!Q||y(Q)!=="object"&&typeof Q!="function"?p(R):Q}function p(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function m(R){var Q=typeof Map=="function"?new Map:void 0;return m=function($){if($===null||(L=$,Function.toString.call(L).indexOf("[native code]")===-1))return $;var L;if(typeof $!="function")throw new TypeError("Super expression must either be null or a function");if(Q!==void 0){if(Q.has($))return Q.get($);Q.set($,F)}function F(){return g($,arguments,v(this).constructor)}return F.prototype=Object.create($.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),b(F,$)},m(R)}function g(R,Q,$){return g=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}})()?Reflect.construct:function(L,F,G){var X=[null];X.push.apply(X,F);var q=new(Function.bind.apply(L,X));return G&&b(q,G.prototype),q},g.apply(null,arguments)}function b(R,Q){return b=Object.setPrototypeOf||function($,L){return $.__proto__=L,$},b(R,Q)}function v(R){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)},v(R)}function y(R){return y=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(Q){return u(Q)}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":u(Q)},y(R)}var w=l(7352).inspect,j=l(3743).codes.ERR_INVALID_ARG_TYPE;function C(R,Q,$){return($===void 0||$>R.length)&&($=R.length),R.substring($-Q.length,$)===Q}var B="",E="",_="",S="",N={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function O(R){var Q=Object.keys(R),$=Object.create(Object.getPrototypeOf(R));return Q.forEach(function(L){$[L]=R[L]}),Object.defineProperty($,"message",{value:R.message}),$}function k(R){return w(R,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var I=(function(R){function Q(F){var G;if((function(be,ge){if(!(be instanceof ge))throw new TypeError("Cannot call a class as a function")})(this,Q),y(F)!=="object"||F===null)throw new j("options","Object",F);var X=F.message,q=F.operator,T=F.stackStartFn,U=F.actual,K=F.expected,z=Error.stackTraceLimit;if(Error.stackTraceLimit=0,X!=null)G=f(this,v(Q).call(this,String(X)));else if({}.stderr&&{}.stderr.isTTY&&({}.stderr&&{}.stderr.getColorDepth&&{}.stderr.getColorDepth()!==1?(B="\x1B[34m",E="\x1B[32m",S="\x1B[39m",_="\x1B[31m"):(B="",E="",S="",_="")),y(U)==="object"&&U!==null&&y(K)==="object"&&K!==null&&"stack"in U&&U instanceof Error&&"stack"in K&&K instanceof Error&&(U=O(U),K=O(K)),q==="deepStrictEqual"||q==="strictEqual")G=f(this,v(Q).call(this,(function(be,ge,he){var ke="",Z="",te=0,fe="",we=!1,Fe=k(be),_e=Fe.split(`
`),Ce=k(ge).split(`
`),ie=0,me="";if(he==="strictEqual"&&y(be)==="object"&&y(ge)==="object"&&be!==null&&ge!==null&&(he="strictEqualObject"),_e.length===1&&Ce.length===1&&_e[0]!==Ce[0]){var Be=_e[0].length+Ce[0].length;if(Be<=10){if(!(y(be)==="object"&&be!==null||y(ge)==="object"&&ge!==null||be===0&&ge===0))return"".concat(N[he],`

`)+"".concat(_e[0]," !== ").concat(Ce[0],`
`)}else if(he!=="strictEqualObject"&&Be<({}.stderr&&{}.stderr.isTTY?{}.stderr.columns:80)){for(;_e[0][ie]===Ce[0][ie];)ie++;ie>2&&(me=`
  `.concat((function(Pt,vt){if(vt=Math.floor(vt),Pt.length==0||vt==0)return"";var tr=Pt.length*vt;for(vt=Math.floor(Math.log(vt)/Math.log(2));vt;)Pt+=Pt,vt--;return Pt+Pt.substring(0,tr-Pt.length)})(" ",ie),"^"),ie=0)}}for(var Le=_e[_e.length-1],ve=Ce[Ce.length-1];Le===ve&&(ie++<2?fe=`
  `.concat(Le).concat(fe):ke=Le,_e.pop(),Ce.pop(),_e.length!==0&&Ce.length!==0);)Le=_e[_e.length-1],ve=Ce[Ce.length-1];var $e=Math.max(_e.length,Ce.length);if($e===0){var je=Fe.split(`
`);if(je.length>30)for(je[26]="".concat(B,"...").concat(S);je.length>27;)je.pop();return"".concat(N.notIdentical,`

`).concat(je.join(`
`),`
`)}ie>3&&(fe=`
`.concat(B,"...").concat(S).concat(fe),we=!0),ke!==""&&(fe=`
  `.concat(ke).concat(fe),ke="");var Pe=0,Te=N[he]+`
`.concat(E,"+ actual").concat(S," ").concat(_,"- expected").concat(S),Ye=" ".concat(B,"...").concat(S," Lines skipped");for(ie=0;ie<$e;ie++){var He=ie-te;if(_e.length<ie+1)He>1&&ie>2&&(He>4?(Z+=`
`.concat(B,"...").concat(S),we=!0):He>3&&(Z+=`
  `.concat(Ce[ie-2]),Pe++),Z+=`
  `.concat(Ce[ie-1]),Pe++),te=ie,ke+=`
`.concat(_,"-").concat(S," ").concat(Ce[ie]),Pe++;else if(Ce.length<ie+1)He>1&&ie>2&&(He>4?(Z+=`
`.concat(B,"...").concat(S),we=!0):He>3&&(Z+=`
  `.concat(_e[ie-2]),Pe++),Z+=`
  `.concat(_e[ie-1]),Pe++),te=ie,Z+=`
`.concat(E,"+").concat(S," ").concat(_e[ie]),Pe++;else{var it=Ce[ie],It=_e[ie],dt=It!==it&&(!C(It,",")||It.slice(0,-1)!==it);dt&&C(it,",")&&it.slice(0,-1)===It&&(dt=!1,It+=","),dt?(He>1&&ie>2&&(He>4?(Z+=`
`.concat(B,"...").concat(S),we=!0):He>3&&(Z+=`
  `.concat(_e[ie-2]),Pe++),Z+=`
  `.concat(_e[ie-1]),Pe++),te=ie,Z+=`
`.concat(E,"+").concat(S," ").concat(It),ke+=`
`.concat(_,"-").concat(S," ").concat(it),Pe+=2):(Z+=ke,ke="",He!==1&&ie!==0||(Z+=`
  `.concat(It),Pe++))}if(Pe>20&&ie<$e-2)return"".concat(Te).concat(Ye,`
`).concat(Z,`
`).concat(B,"...").concat(S).concat(ke,`
`)+"".concat(B,"...").concat(S)}return"".concat(Te).concat(we?Ye:"",`
`).concat(Z).concat(ke).concat(fe).concat(me)})(U,K,q)));else if(q==="notDeepStrictEqual"||q==="notStrictEqual"){var M=N[q],H=k(U).split(`
`);if(q==="notStrictEqual"&&y(U)==="object"&&U!==null&&(M=N.notStrictEqualObject),H.length>30)for(H[26]="".concat(B,"...").concat(S);H.length>27;)H.pop();G=H.length===1?f(this,v(Q).call(this,"".concat(M," ").concat(H[0]))):f(this,v(Q).call(this,"".concat(M,`

`).concat(H.join(`
`),`
`)))}else{var Y=k(U),ae="",oe=N[q];q==="notDeepEqual"||q==="notEqual"?(Y="".concat(N[q],`

`).concat(Y)).length>1024&&(Y="".concat(Y.slice(0,1021),"...")):(ae="".concat(k(K)),Y.length>512&&(Y="".concat(Y.slice(0,509),"...")),ae.length>512&&(ae="".concat(ae.slice(0,509),"...")),q==="deepEqual"||q==="equal"?Y="".concat(oe,`

`).concat(Y,`

should equal

`):ae=" ".concat(q," ").concat(ae)),G=f(this,v(Q).call(this,"".concat(Y).concat(ae)))}return Error.stackTraceLimit=z,G.generatedMessage=!X,Object.defineProperty(p(G),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),G.code="ERR_ASSERTION",G.actual=U,G.expected=K,G.operator=q,Error.captureStackTrace&&Error.captureStackTrace(p(G),T),G.stack,G.name="AssertionError",f(G)}var $,L;return(function(F,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(G&&G.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),G&&b(F,G)})(Q,R),$=Q,L=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:w.custom,value:function(F,G){return w(this,(function(X){for(var q=1;q<arguments.length;q++){var T=arguments[q]!=null?arguments[q]:{},U=Object.keys(T);typeof Object.getOwnPropertySymbols=="function"&&(U=U.concat(Object.getOwnPropertySymbols(T).filter(function(K){return Object.getOwnPropertyDescriptor(T,K).enumerable}))),U.forEach(function(K){d(X,K,T[K])})}return X})({},G,{customInspect:!1,depth:0}))}}],L&&A($.prototype,L),Q})(m(Error));o.exports=I},9122:(o,c,l)=>{var u=l(3900),d=l(988),A=l(8863),f=l(5804);o.exports=function(p){var m=A(arguments),g=p.length-(arguments.length-1);return u(m,1+(g>0?g:0),!0)},d?d(o.exports,"apply",{value:f}):o.exports.apply=f},9123:(o,c,l)=>{function u(T){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},u(T)}function d(T,U){var K=Object.keys(T);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(T);U&&(z=z.filter(function(M){return Object.getOwnPropertyDescriptor(T,M).enumerable})),K.push.apply(K,z)}return K}function A(T){for(var U=1;U<arguments.length;U++){var K=arguments[U]!=null?arguments[U]:{};U%2?d(Object(K),!0).forEach(function(z){f(T,z,K[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(K)):d(Object(K)).forEach(function(z){Object.defineProperty(T,z,Object.getOwnPropertyDescriptor(K,z))})}return T}function f(T,U,K){return(U=(function(z){var M=(function(H){if(u(H)!="object"||!H)return H;var Y=H[Symbol.toPrimitive];if(Y!==void 0){var ae=Y.call(H,"string");if(u(ae)!="object")return ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(H)})(z);return u(M)=="symbol"?M:M+""})(U))in T?Object.defineProperty(T,U,{value:K,enumerable:!0,configurable:!0,writable:!0}):T[U]=K,T}var p,m,g=l(3609),b=l(8235),v=l(3550).EventEmitter,y=l(7760),w=l(4561),j=l(6426),C=l(7982),B=l(4327),E=l(1469),_=l(1313),S=l(3216),N=l(5110),O=l(8768),k=l(7910),I=l(5537),R=l(7930).arrayAtomicsSymbol,Q=l(7930).arrayPathSymbol,$=l(7930).documentArrayParent;function L(T,U,K,z){if(U.options&&U.options.timeseries)throw new I(T,"timeseries");var M=L.defaultOptions&&L.defaultOptions._id;M!=null&&((z=z||{})._id=M),z!=null&&z._id!=null?U=_(U,z):K!=null&&K._id!=null&&(U=_(U,K));var H=F(U,K);H.prototype.$basePath=T,y.call(this,T,H,K),this.schema=U,this.schemaOptions=z||{},this.$isMongooseDocumentArray=!0,this.Constructor=H,H.base=U.base;var Y=this.defaultValue;"defaultValue"in this&&Y==null||this.default(function(){var ae=Y.call(this);return ae==null||Array.isArray(ae)||(ae=[ae]),ae}),this.$embeddedSchemaType=new b(T+".$",{required:this&&this.schemaOptions&&this.schemaOptions.required||!1,$parentSchemaType:this}),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}function F(T,U,K){function z(){m.apply(this,arguments),this.__parentArray!=null&&this.__parentArray.getArrayParent()!=null&&this.$session(this.__parentArray.getArrayParent().$session())}m||(m=l(6547)),T._preCompile();var M=K!=null?K.prototype:m.prototype;for(var H in z.prototype=Object.create(M),z.prototype.$__setSchema(T),z.schema=T,z.prototype.constructor=z,z.$isArraySubdocument=!0,z.events=new v,z.base=T.base,T.methods)z.prototype[H]=T.methods[H];for(var Y in T.statics)z[Y]=T.statics[Y];for(var ae in v.prototype)z[ae]=v.prototype[ae];return z.options=U,z}L.schemaName="DocumentArray",L.options={castNonArrays:!0},L.prototype=Object.create(y.prototype),L.prototype.constructor=L,L.prototype.OptionsConstructor=w,L.prototype.$conditionalHandlers=A({},y.prototype.$conditionalHandlers),L.prototype.discriminator=function(T,U,K){var z;typeof T=="function"&&(T=O.getFunctionName(T)),K=K||{};var M=O.isPOJO(K)?K.value:K,H=typeof K.clone!="boolean"||K.clone;U.instanceOfSchema&&H&&(U=U.clone());var Y=F(U=E(this.casterConstructor,T,U,M,null,null,(z=K)===null||z===void 0?void 0:z.overwriteExisting),null,this.casterConstructor);Y.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(Y,"name",{value:T})}catch{}return this.casterConstructor.discriminators[T]=Y,this.casterConstructor.discriminators[T]},L.prototype.doValidate=function(T,U,K,z){p||(p=l(4878));var M=this;try{j.prototype.doValidate.call(this,T,function(H){if(H)return U(H);var Y,ae=T&&T.length;if(!ae||z&&z.updateValidator)return U();function oe(Z){Z!=null&&(Y=Z),--ae||U(Y)}O.isMongooseDocumentArray(T)||(T=new p(T,M.path,K));for(var be=0,ge=ae;be<ge;++be){var he=T[be];if(he!=null){if(!(he instanceof m)){var ke=k(M.casterConstructor,T[be]);he=T[be]=new ke(he,T,void 0,void 0,be)}z==null||!z.validateModifiedOnly||he.$isModified()?he.$__validate(null,z,oe):--ae||U(Y)}else--ae||U(Y)}},K)}catch(H){return U(H)}},L.prototype.doValidateSync=function(T,U,K){var z=j.prototype.doValidateSync.call(this,T,U);if(z!=null)return z;var M=T&&T.length,H=null;if(M){for(var Y=0,ae=M;Y<ae;++Y){var oe=T[Y];if(oe){if(!(oe instanceof m)){var be=k(this.casterConstructor,T[Y]);oe=T[Y]=new be(oe,T,void 0,void 0,Y)}if(K==null||!K.validateModifiedOnly||oe.$isModified()){var ge=oe.validateSync(K);ge&&H==null&&(H=ge)}}}return H}},L.prototype.getDefault=function(T,U,K){var z=typeof this.defaultValue=="function"?this.defaultValue.call(T):this.defaultValue;if(z==null||K&&K.skipCast)return z;p||(p=l(4878)),Array.isArray(z)||(z=[z]),z=new p(z,this.path,T);for(var M=0;M<z.length;++M){var H=new(k(this.casterConstructor,z[M]))({},z,void 0,void 0,M);H.$init(z[M]),H.isNew=!0,Object.assign(H.$__.activePaths.default,H.$__.activePaths.init),H.$__.activePaths.init={},z[M]=H}return z};var G=Object.freeze({transform:!1,virtuals:!1}),X=Object.freeze({skipId:!1,willInit:!0});function q(T,U,K){if(K&&U){for(var z,M,H,Y=T.path+".",ae=Object.keys(U),oe=ae.length,be={};oe--;)if((M=ae[oe]).startsWith(Y)){if((H=M.substring(Y.length))==="$")continue;H.startsWith("$.")&&(H=H.substring(2)),z||(z=!0),be[H]=U[M]}return z&&be||void 0}}L.prototype.cast=function(T,U,K,z,M){if(p||(p=l(4878)),T!=null&&T[Q]!=null&&T===z)return T;var H,Y,ae=(M=M||{}).path||this.path;if(!Array.isArray(T)){if(!K&&!L.options.castNonArrays)throw new g("DocumentArray",T,this.path,null,this);return U&&K&&U.markModified(ae),this.cast([T],U,K,z,M)}M.skipDocumentArrayCast&&!O.isMongooseDocumentArray(T)||(T=new p(T,ae,U,this)),z!=null&&(T[R]=z[R]||{}),M.arrayPathIndex!=null&&(T[Q]=ae+"."+M.arrayPathIndex);for(var oe=O.isMongooseDocumentArray(T)?T.__array:T,be=oe.length,ge=0;ge<be;++ge)if(oe[ge]){var he=k(this.casterConstructor,oe[ge]),ke=S(oe[ge],!0);if(oe[ge]!==ke&&(oe[ge]=ke),oe[ge]instanceof m){if(oe[ge][$]!==U)if(K){var Z=new he(null,T,X,H,ge);oe[ge]=Z.$init(oe[ge])}else{var te=new he(oe[ge],T,void 0,void 0,ge);oe[ge]=te}oe[ge].__index==null&&oe[ge].$setIndex(ge)}else if(oe[ge]!=null)if(K)U?H||(H=q(this,U.$__.selected,K)):H=!0,Y=new he(null,T,X,H,ge),oe[ge]=Y.$init(oe[ge]);else if(z&&typeof z.id=="function"&&(Y=z.id(oe[ge]._id)),z&&Y&&O.deepEqual(Y.toObject(G),oe[ge]))Y.set(oe[ge]),oe[ge]=Y;else try{Y=new he(oe[ge],T,void 0,void 0,ge),oe[ge]=Y}catch(fe){throw new g("embedded",oe[ge],T[Q],fe,this)}}return T},L.prototype.clone=function(){var T=Object.assign({},this.options),U=new this.constructor(this.path,this.schema,T,this.schemaOptions);return U.validators=this.validators.slice(),this.requiredValidator!==void 0&&(U.requiredValidator=this.requiredValidator),U.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),U._appliedDiscriminators=this._appliedDiscriminators,U},L.prototype.applyGetters=function(T,U){return j.prototype.applyGetters.call(this,T,U)},L.defaultOptions={},L.set=j.set,L.setters=[],L.get=j.get,L.prototype.$conditionalHandlers.$elemMatch=function(T,U){for(var K,z=Object.keys(T),M=z.length,H=0;H<M;++H){var Y=z[H],ae=T[Y];N(Y)&&ae!=null&&(T[Y]=this.castForQuery(Y,ae,U))}var oe=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,be=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if(oe!=null&&T[oe]!=null&&be[T[oe]]!=null)return C(be[T[oe]],T,null,this&&this.$$context);var ge=(K=this.casterConstructor.schema)!==null&&K!==void 0?K:U.schema;return C(ge,T,null,this&&this.$$context)},L.prototype.toJSONSchema=function(T){var U=B("object","object",T?.useBsonType,!1),K=this.options.required&&typeof this.options.required!="function";return A(A({},B("array","array",T?.useBsonType,K)),{},{items:A(A({},U),this.schema.toJSONSchema(T))})},o.exports=L},9166:(o,c,l)=>{function u(g,b){var v=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!v){if(Array.isArray(g)||(v=(function(E,_){if(E){if(typeof E=="string")return d(E,_);var S={}.toString.call(E).slice(8,-1);return S==="Object"&&E.constructor&&(S=E.constructor.name),S==="Map"||S==="Set"?Array.from(E):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?d(E,_):void 0}})(g))||b){v&&(g=v);var y=0,w=function(){};return{s:w,n:function(){return y>=g.length?{done:!0}:{done:!1,value:g[y++]}},e:function(E){throw E},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j,C=!0,B=!1;return{s:function(){v=v.call(g)},n:function(){var E=v.next();return C=E.done,E},e:function(E){B=!0,j=E},f:function(){try{C||v.return==null||v.return()}finally{if(B)throw j}}}}function d(g,b){(b==null||b>g.length)&&(b=g.length);for(var v=0,y=Array(b);v<b;v++)y[v]=g[v];return y}var A=l(8759),f=l(3696);function p(g,b,v){if(b!=null){var y=Object.keys(b).some(function(R){return R[0]==="$"});if(y){if(b.$push&&I(b.$push),b.$addToSet&&I(b.$addToSet),b.$set!=null)for(var w=0,j=Object.keys(b.$set);w<j.length;w++){var C=j[w];m(v,C,b.$set,g)}if(b.$setOnInsert!=null)for(var B=0,E=Object.keys(b.$setOnInsert);B<E.length;B++){var _=E[B];m(v,_,b.$setOnInsert,g)}}var S,N=Object.keys(b).filter(function(R){return R[0]!=="$"}),O=u(N);try{for(O.s();!(S=O.n()).done;){var k=S.value;m(v,k,b,g)}}catch(R){O.e(R)}finally{O.f()}}function I(R){for(var Q=function(){var F=L[$],G=v.path(F.replace(/\.\$\./i,".").replace(/.\$$/,""));if(R[F]&&G&&G.$isMongooseDocumentArray&&G.schema.options.timestamps){var X=G.schema.options.timestamps,q=f(X,"createdAt"),T=f(X,"updatedAt");R[F].$each?R[F].$each.forEach(function(U){T!=null&&(U[T]=g),q!=null&&(U[q]=g),p(g,U,G.schema)}):(T!=null&&(R[F][T]=g),q!=null&&(R[F][q]=g),p(g,R[F],G.schema))}},$=0,L=Object.keys(R);$<L.length;$++)Q()}}function m(g,b,v,y){var w=A(b),j=g.path(w);if(j){for(var C=[],B=w.split("."),E=B.length-1;E>0;--E){var _=g.path(B.slice(0,E).join("."));_!=null&&(_.$isMongooseDocumentArray||_.$isSingleNested)&&C.push({parentPath:b.split(".").slice(0,E).join("."),parentSchemaType:_})}if(Array.isArray(v[b])&&j.$isMongooseDocumentArray)(function(q,T,U){var K=T.schema.options.timestamps,z=q.length;if(K)for(var M=f(K,"createdAt"),H=f(K,"updatedAt"),Y=0;Y<z;++Y)H!=null&&(q[Y][H]=U),M!=null&&(q[Y][M]=U),p(U,q[Y],T.schema);else for(var ae=0;ae<z;++ae)p(U,q[ae],T.schema)})(v[b],j,y);else if(v[b]&&j.$isSingleNested)(function(q,T,U){var K=T.schema.options.timestamps;if(K){var z=f(K,"createdAt"),M=f(K,"updatedAt");M!=null&&(q[M]=U),z!=null&&(q[z]=U),p(U,q,T.schema)}else p(U,q,T.schema)})(v[b],j,y);else if(C.length>0){var S,N=u(C);try{for(N.s();!(S=N.n()).done;){var O=S.value,k=O.parentPath,I=O.parentSchemaType,R=I.schema.options.timestamps,Q=f(R,"updatedAt");if(R&&Q!=null){if(I.$isSingleNested)v[k+"."+Q]=y;else if(I.$isMongooseDocumentArray){var $=b.substring(k.length+1);if(/^\d+$/.test($)){v[k+"."+$][Q]=y;continue}var L=$.indexOf(".");v[k+"."+($=L!==-1?$.substring(0,L):$)+"."+Q]=y}}}}catch(q){N.e(q)}finally{N.f()}}else if(j.schema!=null&&j.schema!=g&&v[b]){var F=j.schema.options.timestamps,G=f(F,"createdAt"),X=f(F,"updatedAt");if(!F)return;X!=null&&(v[b][X]=y),G!=null&&(v[b][G]=y)}}}o.exports=p},9183:o=>{o.exports=function(c){return typeof c=="function"&&c.constructor&&c.constructor.name==="AsyncFunction"}},9206:o=>{o.exports=EvalError},9247:(o,c,l)=>{var u=l(2481),d=l(2273);o.exports=function(){var A=u();return d(Object,{is:A},{is:function(){return Object.is!==A}}),A}},9344:(o,c,l)=>{function u(j){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},u(j)}var d,A=l(3071),f=l(953)(),p=l(5994),m=l(1464);if(f){var g=A("RegExp.prototype.exec"),b={},v=function(){throw b},y={toString:v,valueOf:v};u(Symbol.toPrimitive)==="symbol"&&(y[Symbol.toPrimitive]=v),d=function(j){if(!j||u(j)!=="object")return!1;var C=m(j,"lastIndex");if(!C||!p(C,"value"))return!1;try{g(j,y)}catch(B){return B===b}}}else{var w=A("Object.prototype.toString");d=function(j){return!(!j||u(j)!=="object"&&typeof j!="function")&&w(j)==="[object RegExp]"}}o.exports=d},9380:(o,c,l)=>{function u(){var w,j,C=typeof Symbol=="function"?Symbol:{},B=C.iterator||"@@iterator",E=C.toStringTag||"@@toStringTag";function _($,L,F,G){var X=L&&L.prototype instanceof N?L:N,q=Object.create(X.prototype);return d(q,"_invoke",(function(T,U,K){var z,M,H,Y=0,ae=K||[],oe=!1,be={p:0,n:0,v:w,a:ge,f:ge.bind(w,4),d:function(he,ke){return z=he,M=0,H=w,be.n=ke,S}};function ge(he,ke){for(M=he,H=ke,j=0;!oe&&Y&&!Z&&j<ae.length;j++){var Z,te=ae[j],fe=be.p,we=te[2];he>3?(Z=we===ke)&&(H=te[(M=te[4])?5:(M=3,3)],te[4]=te[5]=w):te[0]<=fe&&((Z=he<2&&fe<te[1])?(M=0,be.v=ke,be.n=te[1]):fe<we&&(Z=he<3||te[0]>ke||ke>we)&&(te[4]=he,te[5]=ke,be.n=we,M=0))}if(Z||he>1)return S;throw oe=!0,ke}return function(he,ke,Z){if(Y>1)throw TypeError("Generator is already running");for(oe&&ke===1&&ge(ke,Z),M=ke,H=Z;(j=M<2?w:H)||!oe;){z||(M?M<3?(M>1&&(be.n=-1),ge(M,H)):be.n=H:be.v=H);try{if(Y=2,z){if(M||(he="next"),j=z[he]){if(!(j=j.call(z,H)))throw TypeError("iterator result is not an object");if(!j.done)return j;H=j.value,M<2&&(M=0)}else M===1&&(j=z.return)&&j.call(z),M<2&&(H=TypeError("The iterator does not provide a '"+he+"' method"),M=1);z=w}else if((j=(oe=be.n<0)?H:T.call(U,be))!==S)break}catch(te){z=w,M=1,H=te}finally{Y=1}}return{value:j,done:oe}}})($,F,G),!0),q}var S={};function N(){}function O(){}function k(){}j=Object.getPrototypeOf;var I=[][B]?j(j([][B]())):(d(j={},B,function(){return this}),j),R=k.prototype=N.prototype=Object.create(I);function Q($){return Object.setPrototypeOf?Object.setPrototypeOf($,k):($.__proto__=k,d($,E,"GeneratorFunction")),$.prototype=Object.create(R),$}return O.prototype=k,d(R,"constructor",k),d(k,"constructor",O),O.displayName="GeneratorFunction",d(k,E,"GeneratorFunction"),d(R),d(R,E,"Generator"),d(R,B,function(){return this}),d(R,"toString",function(){return"[object Generator]"}),(u=function(){return{w:_,m:Q}})()}function d(w,j,C,B){var E=Object.defineProperty;try{E({},"",{})}catch{E=0}d=function(_,S,N,O){if(S)E?E(_,S,{value:N,enumerable:!O,configurable:!O,writable:!O}):_[S]=N;else{var k=function(I,R){d(_,I,function(Q){return this._invoke(I,R,Q)})};k("next",0),k("throw",1),k("return",2)}},d(w,j,C,B)}function A(w,j,C,B,E,_,S){try{var N=w[_](S),O=N.value}catch(k){return void C(k)}N.done?j(O):Promise.resolve(O).then(B,E)}function f(w){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},f(w)}var p=l(2400),m=l(2746),g=l(3303)._,b=l(7352),v=l(8768);function y(w,j,C,B,E){if(f(B)==="object"&&B!=null&&E==null&&(E=B,B=void 0),C!=null){var _={isNew:C.isNew};"defaults"in C.$__&&(_.defaults=C.$__.defaults),E=Object.assign(_,E)}E!=null&&E.path!=null&&(this.$basePath=E.path),p.call(this,w,j,B,E),delete this.$__.priorDoc}o.exports=y,y.prototype=Object.create(p.prototype),Object.defineProperty(y.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0}),Object.defineProperty(y.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0}),y.prototype.toBSON=function(){return this.toObject(g)},y.prototype.save=(function(){var w,j=(w=u().m(function C(B){var E=this;return u().w(function(_){for(;;)if(_.n===0)return(B=B||{}).suppressWarning||v.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),_.a(2,new Promise(function(S,N){E.$__save(function(O){if(O!=null)return N(O);S(E)})}))},C)}),function(){var C=this,B=arguments;return new Promise(function(E,_){var S=w.apply(C,B);function N(k){A(S,E,_,N,O,"next",k)}function O(k){A(S,E,_,N,O,"throw",k)}N(void 0)})});return function(C){return j.apply(this,arguments)}})(),y.prototype.$__fullPath=function(w){return this.$__.fullPath||this.ownerDocument(),w?this.$__.fullPath+"."+w:this.$__.fullPath},y.prototype.$__pathRelativeToParent=function(w){return w==null?this.$basePath:[this.$basePath,w].join(".")},y.prototype.$__save=function(w){var j=this;return m(function(){return w(null,j)})},y.prototype.$isValid=function(w){var j=this.$parent(),C=this.$__pathRelativeToParent(w);return j!=null&&C!=null?j.$isValid(C):p.prototype.$isValid.call(this,w)},y.prototype.markModified=function(w){p.prototype.markModified.call(this,w);var j=this.$parent(),C=this.$__pathRelativeToParent(w);if(j!=null&&C!=null){var B=this.$__pathRelativeToParent().replace(/\.$/,"");j.isDirectModified(B)||this.isNew||this.$__parent.markModified(C,this)}},y.prototype.isModified=function(w,j,C){var B=this,E=this.$parent();return E!=null?(Array.isArray(w)||typeof w=="string"?w=(w=Array.isArray(w)?w:w.split(" ")).map(function(_){return B.$__pathRelativeToParent(_)}).filter(function(_){return _!=null}):w||(w=this.$__pathRelativeToParent()),E.$isModified(w,j,C)):p.prototype.isModified.call(this,w,j,C)},y.prototype.$markValid=function(w){p.prototype.$markValid.call(this,w);var j=this.$parent(),C=this.$__pathRelativeToParent(w);j!=null&&C!=null&&j.$markValid(C)},y.prototype.invalidate=function(w,j,C){p.prototype.invalidate.call(this,w,j,C);var B=this.$parent(),E=this.$__pathRelativeToParent(w);if(B!=null&&E!=null)B.invalidate(E,j,C);else if(j.kind==="cast"||j.name==="CastError"||E==null)throw j;return this.ownerDocument().$__.validationError},y.prototype.$ignore=function(w){p.prototype.$ignore.call(this,w);var j=this.$parent(),C=this.$__pathRelativeToParent(w);j!=null&&C!=null&&j.$ignore(C)},y.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;for(var w=this,j=[],C=new Set([w]);typeof w.$__pathRelativeToParent=="function";){j.unshift(w.$__pathRelativeToParent(void 0,!0));var B=w.$parent();if(B==null)break;if(w=B,C.has(w))throw new Error("Infinite subdocument loop: subdoc with _id "+w._id+" is a parent of itself");C.add(w)}return this.$__.fullPath=j.join("."),this.$__.ownerDocument=w,this.$__.ownerDocument},y.prototype.$__fullPathWithIndexes=function(){for(var w=this,j=[],C=new Set([w]);typeof w.$__pathRelativeToParent=="function";){j.unshift(w.$__pathRelativeToParent(void 0,!1));var B=w.$parent();if(B==null)break;if(w=B,C.has(w))throw new Error("Infinite subdocument loop: subdoc with _id "+w._id+" is a parent of itself");C.add(w)}return j.join(".")},y.prototype.parent=function(){return this.$__parent},y.prototype.$parent=y.prototype.parent,y.prototype.$__deleteOne=function(w){if(w!=null)return w(null,this)},y.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)},y.prototype.deleteOne=function(w,j){if(typeof w=="function"&&(j=w,w=null),(function(B){var E=B.ownerDocument();function _(){E.$removeListener("save",_),E.$removeListener("deleteOne",_),B.emit("deleteOne",B),B.constructor.emit("deleteOne",B)}E.$on("save",_),E.$on("deleteOne",_)})(this),!w||!w.noop){this.$__removeFromParent();var C=this.ownerDocument();C.$__.removedSubdocs=C.$__.removedSubdocs||[],C.$__.removedSubdocs.push(this)}return this.$__deleteOne(j)},y.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')},y.prototype.inspect=function(){return this.toObject()},b.inspect.custom&&(y.prototype[b.inspect.custom]=y.prototype.inspect),y.prototype.$toObject=function(w,j){var C,B,E,_,S=p.prototype.$toObject.call(this,w,j);if(Object.keys(S).length!==0||w?._calledWithOptions==null||!((C=(B=(E=w._calledWithOptions)===null||E===void 0?void 0:E.minimize)!==null&&B!==void 0?B:this==null||(_=this.$__schemaTypeOptions)===null||_===void 0?void 0:_.minimize)!==null&&C!==void 0?C:w.minimize)||this.constructor.$__required)return S}},9460:(o,c,l)=>{var u=l(5832).hp,d=l(3609);function A(f,p){var m=Number(p);if(isNaN(m))throw new d("number",p,f);return m}o.exports=function(f){var p=this;return Array.isArray(f)?f.map(function(m){return A(p.path,m)}):u.isBuffer(f)?f:A(p.path,f)}},9471:o=>{o.exports=Math.abs},9528:(o,c,l)=>{function u(g){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(g)}function d(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d=function(){return!!g})()}function A(g){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},A(g)}function f(g,b){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,y){return v.__proto__=y,v},f(g,b)}var p=(function(g){function b(){return(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),(function(y,w,j){return w=A(w),(function(C,B){if(B&&(u(B)=="object"||typeof B=="function"))return B;if(B!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(C)})(y,d()?Reflect.construct(w,j||[],A(y).constructor):w.apply(y,j))})(this,b,arguments)}return(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),w&&f(y,w)})(b,g),v=b,Object.defineProperty(v,"prototype",{writable:!1}),v;var v})(l(8879)),m=l(5761);Object.defineProperty(p.prototype,"enum",m),Object.defineProperty(p.prototype,"match",m),Object.defineProperty(p.prototype,"lowercase",m),Object.defineProperty(p.prototype,"trim",m),Object.defineProperty(p.prototype,"uppercase",m),Object.defineProperty(p.prototype,"minLength",m),Object.defineProperty(p.prototype,"minlength",m),Object.defineProperty(p.prototype,"maxLength",m),Object.defineProperty(p.prototype,"maxlength",m),Object.defineProperty(p.prototype,"populate",m),o.exports=p},9538:(o,c,l)=>{function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},u(y)}function d(y,w){for(var j=0;j<w.length;j++){var C=w[j];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(y,A(C.key),C)}}function A(y){var w=(function(j){if(u(j)!="object"||!j)return j;var C=j[Symbol.toPrimitive];if(C!==void 0){var B=C.call(j,"string");if(u(B)!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(j)})(y);return u(w)=="symbol"?w:w+""}function f(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f=function(){return!!y})()}function p(y){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},p(y)}function m(y,w){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(j,C){return j.__proto__=C,j},m(y,w)}var g=l(8213),b=(function(y){function w(B,E){var _;(function(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")})(this,w);var S=B.message;S||(S=g.messages.general.default);var N=v(S,B,E);return _=(function(O,k,I){return k=p(k),(function(R,Q){if(Q&&(u(Q)=="object"||typeof Q=="function"))return Q;if(Q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $})(R)})(O,f()?Reflect.construct(k,I||[],p(O).constructor):k.apply(O,I))})(this,w,[N]),B=Object.assign({},B,{message:N}),_.properties=B,_.kind=B.type,_.path=B.path,_.value=B.value,_.reason=B.reason,_}return(function(B,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create(E&&E.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),Object.defineProperty(B,"prototype",{writable:!1}),E&&m(B,E)})(w,y),j=w,(C=[{key:"toString",value:function(){return this.message}},{key:"toJSON",value:function(){return Object.assign({name:this.name,message:this.message},this)}}])&&d(j.prototype,C),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,C})(g);function v(y,w,j){if(typeof y=="function")return y(w,j);for(var C=0,B=Object.keys(w);C<B.length;C++){var E=B[C];E!=="message"&&(y=y.replace("{"+E.toUpperCase()+"}",w[E]))}return y}Object.defineProperty(b.prototype,"name",{value:"ValidatorError"}),Object.defineProperty(b.prototype,"properties",{enumerable:!1,writable:!0,value:null}),b.prototype.formatMessage=v,o.exports=b},9539:o=>{function c(u,d){return(function(A){if(Array.isArray(A))return A})(u)||(function(A,f){var p=A==null?null:typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(p!=null){var m,g,b,v,y=[],w=!0,j=!1;try{if(b=(p=p.call(A)).next,f!==0)for(;!(w=(m=b.call(p)).done)&&(y.push(m.value),y.length!==f);w=!0);}catch(C){j=!0,g=C}finally{try{if(!w&&p.return!=null&&(v=p.return(),Object(v)!==v))return}finally{if(j)throw g}}return y}})(u,d)||(function(A,f){if(A){if(typeof A=="string")return l(A,f);var p={}.toString.call(A).slice(8,-1);return p==="Object"&&A.constructor&&(p=A.constructor.name),p==="Map"||p==="Set"?Array.from(A):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?l(A,f):void 0}})(u,d)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function l(u,d){(d==null||d>u.length)&&(d=u.length);for(var A=0,f=Array(d);A<d;A++)f[A]=u[A];return f}o.exports=function(u,d,A){for(var f={},p=0,m=Object.keys(d.tree);p<m.length;p++){var g=m[p];A&&(u.paths[g]||u.nested[g]||u.singleNestedPaths[g])||(f[g]=d.tree[g])}u.options._isMerging=!0,u.add(f,null),delete u.options._isMerging,u.callQueue=u.callQueue.concat(d.callQueue),u.method(d.methods),u.static(d.statics);for(var b=0,v=Object.entries(d._userProvidedOptions);b<v.length;b++){var y=c(v[b],2),w=y[0],j=y[1];w in u._userProvidedOptions||u.set(w,j)}for(var C in d.query)u.query[C]=d.query[C];for(var B in d.virtuals)u.virtuals[B]=d.virtuals[B].clone();u._indexes=u._indexes.concat(d._indexes||[]),u.s.hooks.merge(d.s.hooks,!1)}},9553:(o,c,l)=>{var u=l(5832).hp;function d(p){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},d(p)}var A=l(9639),f=l(2402);o.exports=function(p){return p==null?p:d(p)==="object"&&typeof p.$numberDecimal=="string"?A.fromString(p.$numberDecimal):p instanceof A?p:typeof p=="string"?A.fromString(p):typeof u=="function"&&u.isBuffer(p)||typeof Uint8Array=="function"&&p instanceof Uint8Array?new A(p):typeof p=="number"?A.fromString(String(p)):typeof p.valueOf=="function"&&typeof p.valueOf()=="string"?A.fromString(p.valueOf()):void f.ok(!1)}},9600:(o,c,l)=>{c.Array=l(7557),c.Buffer=l(6365),c.Document=c.Embedded=l(6547),c.DocumentArray=l(4878),c.Double=l(2822),c.Decimal128=l(9639),c.ObjectId=l(5549),c.Map=l(2081),c.Subdocument=l(9380),c.UUID=l(1344)},9604:(o,c,l)=>{var u=l(5558).p,d=l(5558).G;function A(p,m){switch(p.$geometry.type){case"Polygon":case"LineString":case"Point":u(p.$geometry.coordinates,m)}return f(m,p),p}function f(p,m){m.$maxDistance&&(m.$maxDistance=d.call(p,m.$maxDistance)),m.$minDistance&&(m.$minDistance=d.call(p,m.$minDistance))}c.cast$geoIntersects=function(p){if(p.$geometry)return A(p,this),p},c.cast$near=function(p){var m=l(7760);if(Array.isArray(p))return u(p,this),p;if(f(this,p),p&&p.$geometry)return A(p,this);if(!Array.isArray(p))throw new TypeError("$near must be either an array or an object with a $geometry property");return m.prototype.castForQuery.call(this,null,p)},c.cast$within=function(p){var m=this;if(f(this,p),p.$box||p.$polygon){var g=p.$box?"$box":"$polygon";p[g].forEach(function(v){if(!Array.isArray(v))throw new TypeError("Invalid $within $box argument. Expected an array, received "+v);v.forEach(function(y,w){v[w]=d.call(m,y)})})}else if(p.$center||p.$centerSphere){var b=p.$center?"$center":"$centerSphere";p[b].forEach(function(v,y){Array.isArray(v)?v.forEach(function(w,j){v[j]=d.call(m,w)}):p[b][y]=d.call(m,v)})}else p.$geometry&&A(p,this);return p}},9639:(o,c,l)=>{o.exports=l(6353).Decimal128},9696:o=>{var c=/^function\s*([^\s(]+)/;o.exports=function(l){return l.name||(l.toString().trim().match(c)||[])[1]}},9809:o=>{function c(j){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},c(j)}var l,u,d=Function.prototype.toString,A=(typeof Reflect>"u"?"undefined":c(Reflect))==="object"&&Reflect!==null&&Reflect.apply;if(typeof A=="function"&&typeof Object.defineProperty=="function")try{l=Object.defineProperty({},"length",{get:function(){throw u}}),u={},A(function(){throw 42},null,l)}catch(j){j!==u&&(A=null)}else A=null;var f=/^\s*class\b/,p=function(j){try{var C=d.call(j);return f.test(C)}catch{return!1}},m=function(j){try{return!p(j)&&(d.call(j),!0)}catch{return!1}},g=Object.prototype.toString,b=typeof Symbol=="function"&&!!Symbol.toStringTag,v=!(0 in[,]),y=function(){return!1};if((typeof document>"u"?"undefined":c(document))==="object"){var w=document.all;g.call(w)===g.call(document.all)&&(y=function(j){if((v||!j)&&(j===void 0||c(j)==="object"))try{var C=g.call(j);return(C==="[object HTMLAllCollection]"||C==="[object HTML document.all class]"||C==="[object HTMLCollection]"||C==="[object Object]")&&j("")==null}catch{}return!1})}o.exports=A?function(j){if(y(j))return!0;if(!j||typeof j!="function"&&c(j)!=="object")return!1;try{A(j,null,l)}catch(C){if(C!==u)return!1}return!p(j)&&m(j)}:function(j){if(y(j))return!0;if(!j||typeof j!="function"&&c(j)!=="object")return!1;if(b)return m(j);if(p(j))return!1;var C=g.call(j);return!(C!=="[object Function]"&&C!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(C))&&m(j)}},9834:(o,c,l)=>{function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(E)}var d=l(3777),A=l(3426),f=l(9122),p=l(3071),m=l(1464),g=l(209),b=p("Object.prototype.toString"),v=l(953)(),y=typeof globalThis>"u"?l.g:globalThis,w=A(),j=p("String.prototype.slice"),C=p("Array.prototype.indexOf",!0)||function(E,_){for(var S=0;S<E.length;S+=1)if(E[S]===_)return S;return-1},B={__proto__:null};d(w,v&&m&&g?function(E){var _=new y[E];if(Symbol.toStringTag in _&&g){var S=g(_),N=m(S,Symbol.toStringTag);if(!N&&S){var O=g(S);N=m(O,Symbol.toStringTag)}B["$"+E]=f(N.get)}}:function(E){var _=new y[E],S=_.slice||_.set;S&&(B["$"+E]=f(S))}),o.exports=function(E){if(!E||u(E)!=="object")return!1;if(!v){var _=j(b(E),8,-1);return C(w,_)>-1?_:_==="Object"&&(function(S){var N=!1;return d(B,function(O,k){if(!N)try{O(S),N=j(k,1)}catch{}}),N})(E)}return m?(function(S){var N=!1;return d(B,function(O,k){if(!N)try{"$"+O(S)===k&&(N=j(k,1))}catch{}}),N})(E):null}},9848:o=>{function c(l){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},c(l)}o.exports=function(l){l.pre("save",!1,function(u,d){var A=this,f=this;if(this.$isSubdocument)return u();if(d&&c(d)==="object"&&"validateBeforeSave"in d?d.validateBeforeSave:this.$__schema.options.validateBeforeSave){var p=d&&c(d)==="object"&&"validateModifiedOnly"in d?{validateModifiedOnly:d.validateModifiedOnly}:null;this.$validate(p).then(function(){A.$op="save",u()},function(m){f.$__schema.s.hooks.execPost("save:error",f,[f],{error:m},function(g){f.$op="save",u(g)})})}else u()},null,!0)}},9870:o=>{o.exports=Error},9907:o=>{o.exports=SyntaxError},9939:o=>{o.exports=RangeError}},i={};function a(o){var c=i[o];if(c!==void 0)return c.exports;var l=i[o]={exports:{}};return s[o](l,l.exports,a),l.exports}return a.d=(o,c)=>{for(var l in c)a.o(c,l)&&!a.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:c[l]})},a.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),a.o=(o,c)=>Object.prototype.hasOwnProperty.call(o,c),a.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a(4829)})())})(Hg)),Hg.exports}lH();const cH=()=>{const r=ee.useRef(new Set),{user:t}=Fn(),{id:s}=ty(),[i,a]=ee.useState(null),[o,c]=ee.useState([]),[l,u]=ee.useState(!0),[d,A]=ee.useState(""),[f,p]=ee.useState({isFollowing:!1,isOwnStore:!1});ee.useEffect(()=>{(async()=>{if(s){u(!0);try{const I=[j(),C(),w()];await Promise.all(I)}finally{u(!1)}}})()},[s]);const m=()=>{b.current?.scrollIntoView({behavior:"smooth",block:"start"}),console.log("Explore button clicked")},g=()=>{v.current?.scrollIntoView({behavior:"smooth",block:"start"})},b=ee.useRef(null),v=ee.useRef(null);ee.useEffect(()=>{if(!s||r.current.has(s))return;const I=setTimeout(async()=>{try{r.current.add(s),await fetch(`http://localhost:10000/api/stores/${s}/views`,{method:"PATCH"})}catch(R){console.error("Error updating views:",R),r.current.delete(s)}},100);return()=>clearTimeout(I)},[s]);const y=(k,I)=>{a(R=>({...R,isFollowing:k,stats:{...R.stats,followersCount:I}})),p(R=>({...R,isFollowing:k}))},w=async()=>{try{A("");const k=`http://localhost:10000/api/stores/${s}/follow-check`,I=await fetch(k,{credentials:"include"});if(!I.ok){if(I.status===401){p({isFollowing:!1,isOwnStore:!1});return}throw new Error(`Failed to fetch follow data: ${I.status}`)}const R=await I.json();console.log("Follow data:",R),p(R)}catch(k){console.error("Error fetching follow data:",k),p({isFollowing:!1,isOwnStore:!1})}},j=async()=>{try{A("");const k=await fetch(`http://localhost:10000/api/stores/${s}`);if(!k.ok)throw new Error(`Failed to fetch store: ${k.status}`);const I=await k.json();a(I)}catch(k){console.error("Error fetching store data:",k),A("Failed to load store data")}},C=async()=>{try{A("");const k=await fetch(`http://localhost:10000/api/reviews/store/${s}`);if(k.ok){const I=await k.json();c(I||[])}}catch(k){console.error("Error fetching reviews:",k),c([])}},B=k=>k.length<=2?k:k.charAt(0)+"*".repeat(k.length-2)+k.charAt(k.length-1),E=k=>{if(!k)return{backgroundColor:"#000000",color:"#ffffff"};if(k.startsWith("#")){const I=_(k);return{backgroundColor:k,color:I?"#000000":"#ffffff"}}return{backgroundColor:"#000000",color:"#ffffff"}},_=k=>{const I=k.replace("#",""),R=parseInt(I.substr(0,2),16),Q=parseInt(I.substr(2,2),16),$=parseInt(I.substr(4,2),16);return(R*299+Q*587+$*114)/1e3>155};if(l)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-black"})});if(d||!i)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:d||"Store not found"}),n.jsx(Zt,{to:"/",className:"text-black hover:text-gray-700",children:"Back to Home"})]})});const{store:S,listings:N=[]}=i;if(!S)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Store not found"}),n.jsx(Zt,{to:"/",className:"text-black hover:text-gray-700",children:"Back to Home"})]})});const O=["https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=1200&h=400&fit=crop","https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200&h=400&fit=crop","https://images.unsplash.com/photo-1560472354-b43ff0c44a43?w=1200&h=400&fit=crop"];return S.heroImages&&S.heroImages.length>0&&S.heroImages,E(S.themeColor),_(S.themeColor||"#000000"),n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:n.jsxs(Zt,{to:"/",className:"flex items-center space-x-2 text-gray-600 hover:text-black transition-colors",children:[n.jsx(oc,{className:"w-4 h-4"}),n.jsx("span",{children:"Back to Home"})]})})}),n.jsx(H9,{store:S,user:t,reviews:o,onExploreClick:m,onContactClick:g}),n.jsx("div",{ref:v,children:n.jsx(aH,{followData:f,setFollowData:p,store:S,user:t,reviews:o,onFollowChange:y})}),n.jsx("div",{className:"py-16 bg-white",ref:b,children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold mb-4 text-gray-900",children:S.type==="product"?"Our Products":"Our Services"}),n.jsxs("p",{className:"text-gray-600",children:[N.length," ",S.type==="product"?"products":"services"," available"]})]}),N.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsxs("p",{className:"text-lg text-gray-500",children:["No ",S.type==="product"?"products":"services"," ","available yet"]}),n.jsx("p",{className:"mt-2 text-gray-400",children:"Check back later for new listings"})]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-5 2xl:grid-cols-5 gap-4",children:N.map(k=>S.type==="product"?n.jsx(Ay,{product:k},k._id):n.jsx(hy,{service:k},k._id))})]})}),n.jsx("div",{className:"py-16 bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Customer Reviews"}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"flex items-center",children:[...Array(5)].map((k,I)=>n.jsx(mn,{className:`w-5 h-5 ${I<Math.floor(S.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},I))}),n.jsx("span",{className:"text-lg font-semibold",children:S.rating||0}),n.jsxs("span",{className:"text-gray-600",children:["(",o.length," reviews)"]})]})})]}),o.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(mn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Reviews Yet"}),n.jsx("p",{className:"text-gray-600",children:"Be the first to review this store!"})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Review Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx("div",{children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:S.rating||0}),n.jsx("div",{className:"flex justify-center mb-2",children:[...Array(5)].map((k,I)=>n.jsx(mn,{className:`w-5 h-5 ${I<Math.floor(S.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},I))}),n.jsxs("p",{className:"text-gray-600",children:[o.length," total reviews"]})]})}),n.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(k=>{const I=o.filter(Q=>Q.rating===k).length,R=o.length>0?I/o.length*100:0;return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm w-8",children:[k,""]}),n.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${R}%`}})}),n.jsx("span",{className:"text-sm text-gray-600 w-8",children:I})]},k)})})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(k=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:B(k.customerId?.name||"Anonymous")}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx("div",{className:"flex items-center",children:[...Array(5)].map((I,R)=>n.jsx(mn,{className:`w-4 h-4 ${R<k.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},R))}),n.jsx("span",{className:"text-sm text-gray-500",children:new Date(k.createdAt).toLocaleDateString()})]})]}),n.jsxs("div",{className:"text-right",children:[k.orderId&&n.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Product Order"}),k.bookingId&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Service Booking"})]})]}),n.jsx("p",{className:"text-gray-700 mb-4",children:k.comment}),k.response&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-black",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Store Response"}),n.jsx("span",{className:"text-sm text-gray-500",children:new Date(k.response.respondedAt).toLocaleDateString()})]}),n.jsx("p",{className:"text-gray-700",children:k.response.message})]})]},k._id))})]})]})})]})},uH=()=>{const{orderItems:r,bookingItems:t,updateQuantity:s,removeFromOrder:i,removeFromBooking:a,orderTotal:o,bookingTotal:c}=ac(),l=r.reduce((d,A)=>d+A.quantity,0)+t.length,u=o+c;return l===0?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(sd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"Add some products or book services to get started"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsx(Zt,{to:"/products",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors",children:"Browse Products"}),n.jsx(Zt,{to:"/services",className:"bg-white border-2 border-black text-black px-6 py-3 rounded-lg hover:bg-black hover:text-white transition-colors",children:"Browse Services"})]})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Shopping Cart"}),n.jsxs("p",{className:"text-gray-600 mt-2",children:[l," item",l!==1?"s":""," in your cart"]}),(r.length>0||t.length>0)&&n.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[r.length>0&&n.jsxs("span",{children:[" ",n.jsx("strong",{children:"Product Cart:"})," You can add multiple products. Adding a service will clear all products."]}),t.length>0&&n.jsxs("span",{children:[" ",n.jsx("strong",{children:"Service Cart:"})," Only one service can be booked at a time. Adding products will clear the service."]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Products (",r.length,")"]}),n.jsx("div",{className:"space-y-4",children:r.map(d=>n.jsxs("div",{className:"cart-item-animate flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[n.jsx("img",{src:d.image?d.image.startsWith("http")?d.image:`http://localhost:10000${d.image}`:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",alt:d.title,className:"w-16 h-16 object-cover rounded-lg"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:d.title}),n.jsx("p",{className:"text-gray-600",children:Br(d.price)}),d.variants&&Object.keys(d.variants).length>0&&n.jsx("div",{className:"flex gap-2 mt-1",children:Object.entries(d.variants).map(([A,f])=>n.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[A,": ",f]},A))})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>s(d.id,d.quantity-1,d.variants),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:n.jsx(dy,{className:"w-4 h-4"})}),n.jsx("span",{className:"w-8 text-center",children:d.quantity}),n.jsx("button",{onClick:()=>s(d.id,d.quantity+1,d.variants),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:n.jsx(Ua,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-semibold",children:Br(d.price*d.quantity)}),n.jsx("button",{onClick:()=>i(d.id,d.variants),className:"text-red-500 hover:text-red-700 transition-colors mt-1",children:n.jsx(Rc,{className:"w-4 h-4"})})]})]},`${d.id}-${JSON.stringify(d.variants||{})}`))})]}),t.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Service Bookings (",t.length,")"]}),n.jsx("div",{className:"space-y-4",children:t.map(d=>n.jsxs("div",{className:"cart-item-animate flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[n.jsx("img",{src:d.image?d.image.startsWith("http")?d.image:`http://localhost:10000${d.image}`:"https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400&h=300&fit=crop",alt:d.title,className:"w-16 h-16 object-cover rounded-lg"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:d.title}),n.jsx("p",{className:"text-gray-600",children:Br(d.price)}),n.jsxs("p",{className:"text-sm text-gray-500",children:[d.date," at ",d.time]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-semibold",children:Br(d.price)}),n.jsx("button",{onClick:()=>a(d.id),className:"text-red-500 hover:text-red-700 transition-colors mt-1",children:n.jsx(Rc,{className:"w-4 h-4"})})]})]},`${d.id}-${d.date}-${d.time}`))})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 h-fit",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),n.jsxs("div",{className:"space-y-3",children:[r.length>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Products (",r.reduce((d,A)=>d+A.quantity,0),")"]}),n.jsx("span",{children:Br(o)})]}),t.length>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Services (",t.length,")"]}),n.jsx("span",{children:Br(c)})]}),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[n.jsx("span",{children:"Total"}),n.jsx("span",{children:Br(u)})]})})]}),n.jsx(Zt,{to:"/checkout",className:"w-full bg-black text-white py-3 rounded-lg hover:bg-gray-800 transition-colors mt-6 block text-center",children:"Proceed to Checkout"})]})]})]})})},dH=()=>{const{bookingItems:r,bookingTotal:t}=ac();return r.length===0?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ms,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No bookings found"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"You haven't booked any services yet"}),n.jsx(Zt,{to:"/services",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors",children:"Browse Services"})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs(Zt,{to:"/services",className:"flex items-center space-x-2 text-gray-600 hover:text-black transition-colors mb-4",children:[n.jsx(oc,{className:"w-4 h-4"}),n.jsx("span",{children:"Back to Services"})]}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Booking Summary"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Review your service bookings"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2 space-y-6",children:r.map((s,i)=>n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("img",{src:s.image?s.image.startsWith("http")?s.image:`http://localhost:10000${s.image}`:"https://images.unsplash.com/photo-1560472354-b43ff0c44a43?w=400&h=300&fit=crop",alt:s.title,className:"w-20 h-20 object-cover rounded-lg"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s.title}),n.jsxs("p",{className:"text-2xl font-bold text-black mb-4",children:["$",s.price]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[n.jsx(ms,{className:"w-4 h-4"}),n.jsx("span",{children:s.date})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[n.jsx(is,{className:"w-4 h-4"}),n.jsx("span",{children:s.time})]}),s.notes&&n.jsxs("div",{className:"mt-3",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700",children:s.notes})]})]})]})]})},`${s.id}-${i}`))}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 h-fit",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Booking Summary"}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-gray-600",children:["Services (",r.length,")"]}),n.jsxs("span",{className:"font-semibold",children:["$",t.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Platform Fee (5%)"}),n.jsxs("span",{className:"font-semibold",children:["$",(t*.05).toFixed(2)]})]}),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{children:["$",(t*1.05).toFixed(2)]})]})})]}),n.jsx(Zt,{to:"/checkout",className:"w-full bg-black text-white py-3 rounded-lg hover:bg-gray-800 transition-colors block text-center",children:"Proceed to Payment"}),n.jsx("div",{className:"mt-4 text-center",children:n.jsx(Zt,{to:"/services",className:"text-gray-600 hover:text-black transition-colors text-sm",children:"Continue Browsing Services"})})]})]})]})})},AH=()=>{const{orderItems:r,bookingItems:t,orderTotal:s,bookingTotal:i,clearOrder:a,clearBookings:o}=ac(),{user:c}=Fn(),l=yi(),[u,d]=ee.useState(!1),[A,f]=ee.useState([]),[p,m]=ee.useState("payhere"),[g,b]=ee.useState({street:"",city:"",state:"",zipCode:"",country:"Sri Lanka"}),[v,y]=ee.useState(!1),[w,j]=ee.useState(null),C=r.reduce((Q,$)=>Q+$.quantity,0)+t.length,B=s+i,E=B*.07,_=B+E;ee.useEffect(()=>{if((r.length||t.length)&&N(),window.payhere)y(!0);else{const Q=document.createElement("script");Q.src="https://www.payhere.lk/lib/payhere.js",Q.async=!0,Q.onload=()=>{y(!0),console.log("PayHere script loaded")},Q.onerror=()=>{alert("Failed to load PayHere payment gateway script")},document.body.appendChild(Q)}},[r,t,c]),ee.useEffect(()=>{p==="bank_transfer"&&(r.length>0||t.length>0)&&S()},[p,r,t,_]);const S=async()=>{try{const Q=await fetch("http://localhost:10000/api/payments/bank-transfer-preview",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({orderItems:r.map($=>({productId:$.id,quantity:$.quantity,price:$.price})),bookingItems:t.map($=>({serviceId:$.id,selectedDate:$.selectedDate,selectedTime:$.selectedTime,price:$.price})),shippingAddress:g,totalAmount:_})});if(Q.ok){const $=await Q.json();j($)}}catch(Q){console.error("Error fetching bank details preview:",Q)}},N=async()=>{try{const Q=await fetch("http://localhost:10000/api/payments/payment-methods");if(Q.ok){const $=await Q.json();if(c)try{const L=await fetch("http://localhost:10000/api/users/verification-status",{credentials:"include"});if(L.ok){const G=(await L.json()).verificationStatus==="verified",X=$.map(q=>q.id==="cod"?{...q,available:G}:q);f(X)}else f($)}catch(L){console.error("Error checking verification status:",L),f($)}else{const L=$.map(F=>F.id==="cod"?{...F,available:!1}:F);f(L)}}else console.error("Failed to fetch payment methods:",Q.status)}catch(Q){console.error("Error fetching payment methods:",Q)}},O=Q=>{b({...g,[Q.target.name]:Q.target.value})},k=Q=>new Promise(($,L)=>{if(!window.payhere)return alert("Payment gateway not loaded, please try again later."),L(new Error("PayHere script not loaded"));window.payhere.onCompleted=function(F){console.log("Payment completed. OrderID:",F),$({success:!0,orderId:F})},window.payhere.onDismissed=function(){console.log("Payment was cancelled by user"),L(new Error("Payment cancelled"))},window.payhere.onError=function(F){console.error("PayHere payment error:",F),alert("Payment failed. Please try again."),L(new Error("Payment error: "+F))},console.log("Starting PayHere payment with params:",Q),window.payhere.startPayment(Q)}),I=async()=>{if(!c){alert("Please log in to continue"),l("/login");return}if(c.role!=="customer"){alert("Only customers can place orders");return}if(r.length>0&&(!g.street||!g.city||!g.state||!g.zipCode||isNaN(g.zipCode))){alert("Please fill in all shipping address fields correctly");return}if(p==="payhere"&&!v){alert("Payment gateway is still loading, please wait a moment.");return}d(!0);try{let Q="";switch(p){case"payhere":Q="/api/payments/payhere-intent";break;case"bank_transfer":Q="/api/payments/bank-transfer-intent";break;case"cod":Q="/api/payments/cod-intent";break;default:alert("Please select a payment method"),d(!1);return}const $=await fetch(`http://localhost:10000${Q}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethod:p,orderItems:r.map(F=>({productId:F.id,quantity:F.quantity,storeId:typeof F.storeId=="object"?F.storeId._id:F.storeId||"unknown"})),bookingItems:t.map(F=>({serviceId:F.id,storeId:F.storeId,bookingDetails:{date:new Date(F.bookingDetails.date),startTime:F.bookingDetails.time,endTime:F.bookingDetails.endTime,duration:F.duration||F.bookingDetails.duration,timeZone:"Asia/Colombo"},notes:F.bookingDetails.notes||F.notes})),shippingAddress:g})});if(!$.ok){const F=await $.json();if(F.requiresVerification){alert("Document verification required for Cash on Delivery. Please upload your ID/Passport in your profile settings."),l("/profile"),d(!1);return}alert(`Payment creation failed: ${F.error||"Unknown error"}`),d(!1);return}const L=await $.json();if(p==="payhere"){const{paymentParams:F}=L;if(!F){alert("Payment parameters missing in response."),d(!1);return}try{if((await k(F)).success){a(),o();const X=L.transactionId||L._id,q=t.length>0?"booking":"order";console.log(`Checkout - PayHere success. Navigating with transactionId: ${X}, type: ${q}`),console.log("Checkout - Full responseData:",L),l(`/thank-you?transactionId=${X}&type=${q}&paymentMethod=payhere`)}}catch(G){console.log("PayHere payment failed or cancelled:",G.message),d(!1);return}}else if(p==="bank_transfer"){a(),o();const F=L.transactionId||L._id,G=t.length>0?"booking":"order";console.log(`Checkout - Bank Transfer success. Navigating with transactionId: ${F}, type: ${G}`),l(`/thank-you?transactionId=${F}&type=${G}&paymentMethod=bank_transfer`)}else if(p==="cod"){a(),o();const F=L.transactionId||L._id,G=t.length>0?"booking":"order";console.log(`Checkout - COD success. Navigating with transactionId: ${F}, type: ${G}`),console.log("Checkout - Full responseData:",L),l(`/thank-you?transactionId=${F}&type=${G}&paymentMethod=cod`)}}catch(Q){console.error("Checkout error:",Q),alert("Checkout failed. Please try again.")}finally{d(!1)}},R=Q=>{switch(Q){case"building-2":return n.jsx(zl,{className:"w-6 h-6"});case"smartphone":return n.jsx(CR,{className:"w-6 h-6"});case"banknote":return n.jsx(pp,{className:"w-6 h-6"});case"credit-card":return n.jsx(gl,{className:"w-6 h-6"});default:return n.jsx(gl,{className:"w-6 h-6"})}};return C===0?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md",children:[n.jsx(sd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"Add some items to proceed with checkout"})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Checkout"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Complete your purchase"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[r.length>0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Shipping Address"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),n.jsx("input",{type:"text",name:"street",value:g.street,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"123 Main Street"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),n.jsx("input",{type:"text",name:"city",value:g.city,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Colombo"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Province *"}),n.jsxs("select",{name:"state",value:g.state,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select Province"}),n.jsx("option",{value:"Western",children:"Western"}),n.jsx("option",{value:"Central",children:"Central"}),n.jsx("option",{value:"Southern",children:"Southern"}),n.jsx("option",{value:"Northern",children:"Northern"}),n.jsx("option",{value:"Eastern",children:"Eastern"}),n.jsx("option",{value:"North Western",children:"North Western"}),n.jsx("option",{value:"North Central",children:"North Central"}),n.jsx("option",{value:"Uva",children:"Uva"}),n.jsx("option",{value:"Sabaragamuwa",children:"Sabaragamuwa"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code *"}),n.jsx("input",{type:"text",name:"zipCode",value:g.zipCode,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"10001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),n.jsx("input",{type:"text",name:"country",value:g.country,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-3 bg-gray-100 cursor-not-allowed",readOnly:!0})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Payment Method"}),n.jsxs("div",{className:"space-y-3",children:[A.map(Q=>n.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 transition-all ${Q.available?p===Q.id?"border-black bg-black text-white cursor-pointer":"border-gray-200 hover:border-gray-300 cursor-pointer":"border-gray-100 bg-gray-50 cursor-not-allowed opacity-60"}`,children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:Q.id,checked:p===Q.id,onChange:$=>m($.target.value),disabled:!Q.available,className:"sr-only"}),n.jsx("div",{className:`mr-3 ${p===Q.id?"text-white":"text-gray-400"}`,children:R(Q.icon)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:`font-medium ${p===Q.id?"text-white":"text-gray-900"}`,children:[Q.name,Q.id==="cod"&&!Q.available&&n.jsx("span",{className:"ml-2 text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded",children:"Verification Required"})]}),n.jsxs("div",{className:`text-sm ${p===Q.id?"text-gray-200":"text-gray-500"}`,children:[Q.description,Q.id==="cod"&&!Q.available&&n.jsx("span",{className:"block text-xs mt-1 text-gray-600",children:"Upload ID/Passport in profile to enable COD"})]})]})]},Q.id)),n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mt-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(aa,{className:"w-5 h-5 text-gray-600"}),n.jsx("p",{className:"text-sm text-gray-800",children:"Your payment information is secure and processed locally in Sri Lanka"})]})}),p==="bank_transfer"&&w&&n.jsxs("div",{className:"mt-6 p-6 bg-white border-2 border-gray-300 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bank Transfer Instructions"}),n.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsxs("p",{className:"text-gray-800 font-medium mb-2",children:["Please transfer LKR ",Br(_)," to the bank account(s) below:"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Bank details will also be available in your Orders section after checkout."})]}),w.bankDetails?.map((Q,$)=>n.jsxs("div",{className:"mb-4 p-4 border border-gray-300 rounded-lg bg-white",children:[n.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:Q.storeName}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Bank Name"}),n.jsx("p",{className:"text-gray-900 font-medium",children:Q.bankDetails.bankName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Account Holder"}),n.jsx("p",{className:"text-gray-900 font-medium",children:Q.bankDetails.accountHolderName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Account Number"}),n.jsx("p",{className:"text-gray-900 font-mono font-bold",children:Q.bankDetails.accountNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Branch"}),n.jsx("p",{className:"text-gray-900 font-medium",children:Q.bankDetails.branchName})]}),Q.bankDetails.routingNumber&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Routing Number"}),n.jsx("p",{className:"text-gray-900 font-mono font-bold",children:Q.bankDetails.routingNumber})]})]}),n.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg border border-gray-200",children:[n.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2 uppercase tracking-wide",children:"Contact Store After Transfer:"}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[Q.contactInfo.whatsapp&&n.jsxs("a",{href:`https://wa.me/${Q.contactInfo.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-900 hover:text-black font-medium text-sm",children:["WhatsApp: ",Q.contactInfo.whatsapp]}),Q.contactInfo.email&&n.jsxs("a",{href:`mailto:${Q.contactInfo.email}`,className:"text-gray-900 hover:text-black font-medium text-sm",children:["Email: ",Q.contactInfo.email]})]})]})]},$)),n.jsx("div",{className:"bg-gray-100 p-4 rounded-lg border border-gray-300",children:n.jsxs("p",{className:"text-gray-800 text-sm",children:[n.jsx("strong",{children:"Important:"})," Please contact the store via WhatsApp or email after making the transfer with your payment receipt for order confirmation."]})})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 h-fit",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Order Summary"}),r.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Products"}),n.jsx("div",{className:"space-y-3",children:r.map(Q=>n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("img",{src:Q.image?Q.image.startsWith("http")?Q.image:`http://localhost:10000${Q.image}`:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",alt:Q.title,className:"w-12 h-12 object-cover rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q.title}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",Q.quantity]})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Br(Q.price*Q.quantity)})]},Q.id))})]}),t.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Service Bookings"}),n.jsx("div",{className:"space-y-3",children:t.map((Q,$)=>n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("img",{src:Q.image?Q.image.startsWith("http")?Q.image:`http://localhost:10000${Q.image}`:"https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400&h=300&fit=crop",alt:Q.title,className:"w-12 h-12 object-cover rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q.title}),n.jsxs("p",{className:"text-sm text-gray-500",children:[Q.date," at ",Q.time]})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Br(Q.price)})]},`${Q.id}-${$}`))})]}),n.jsxs("div",{className:"space-y-3 border-t pt-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal"}),n.jsx("span",{className:"font-medium",children:Br(B)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Platform Fee (7%)"}),n.jsx("span",{className:"font-medium",children:Br(E)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-3",children:[n.jsx("span",{children:"Total"}),n.jsx("span",{children:Br(_)})]})]}),n.jsx("button",{onClick:I,disabled:u,className:"w-full bg-black text-white py-3 rounded-lg hover:bg-gray-800 transition-colors mt-6 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Processing...":`Pay ${Br(_)}`})]})]})]})})},hH=()=>{const[r,t]=ee.useState(""),[s,i]=ee.useState(""),[a,o]=ee.useState(!1),[c,l]=ee.useState(!1),[u,d]=ee.useState(""),{login:A}=Fn(),f=yi(),p=async m=>{m.preventDefault(),l(!0),d("");const g=await A(r,s);g.success?f("/"):d(g.error),l(!1)};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Welcome back"}),n.jsx("p",{className:"text-gray-600",children:"Sign in to your AIO account"}),n.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Don't have an account?"," ",n.jsx(Zt,{to:"/register",className:"font-medium text-black hover:text-gray-700 transition-colors",children:"Create one here"})]})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:n.jsxs("form",{className:"space-y-6",onSubmit:p,children:[u&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),n.jsxs("div",{className:"relative",children:[n.jsx(vl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:r,onChange:m=>t(m.target.value),className:"pl-10 block w-full border border-gray-300 rounded-lg px-3 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(aa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{id:"password",name:"password",type:a?"text":"password",required:!0,value:s,onChange:m=>i(m.target.value),className:"pl-10 pr-10 block w-full border border-gray-300 rounded-lg px-3 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"Enter your password"}),n.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:a?n.jsx(f0,{className:"w-5 h-5"}):n.jsx(Gn,{className:"w-5 h-5"})})]})]})]}),n.jsx("button",{type:"submit",disabled:c,className:"w-full bg-black text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Signing in...":"Sign in"})]})})]})})},fH=()=>{const[r,t]=ee.useState({name:"",email:"",password:"",confirmPassword:"",role:"customer"}),[s,i]=ee.useState(!1),[a,o]=ee.useState(!1),[c,l]=ee.useState(!1),[u,d]=ee.useState(""),{register:A}=Fn(),f=yi(),p=async g=>{if(g.preventDefault(),l(!0),d(""),r.password!==r.confirmPassword){d("Passwords do not match"),l(!1);return}if(r.password.length<6){d("Password must be at least 6 characters long"),l(!1);return}const b=await A(r);b.success?r.role==="store_owner"?f("/create-store"):f("/"):d(b.error),l(!1)},m=g=>{t({...r,[g.target.name]:g.target.value})};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Join AIO"}),n.jsx("p",{className:"text-gray-600",children:"Create your account and start your journey"}),n.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Already have an account?"," ",n.jsx(Zt,{to:"/login",className:"font-medium text-black hover:text-gray-700 transition-colors",children:"Sign in here"})]})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:n.jsxs("form",{className:"space-y-6",onSubmit:p,children:[u&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"I want to"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{type:"button",onClick:()=>t({...r,role:"customer"}),className:`p-4 rounded-lg border-2 transition-all text-center ${r.role==="customer"?"border-black bg-black text-white":"border-gray-200 hover:border-gray-300"}`,children:[n.jsx(ic,{className:"w-6 h-6 mx-auto mb-2"}),n.jsx("div",{className:"font-medium",children:"Shop"}),n.jsx("div",{className:"text-xs opacity-75",children:"Buy products & services"})]}),n.jsxs("button",{type:"button",onClick:()=>t({...r,role:"store_owner"}),className:`p-4 rounded-lg border-2 transition-all text-center ${r.role==="store_owner"?"border-black bg-black text-white":"border-gray-200 hover:border-gray-300"}`,children:[n.jsx(ei,{className:"w-6 h-6 mx-auto mb-2"}),n.jsx("div",{className:"font-medium",children:"Sell"}),n.jsx("div",{className:"text-xs opacity-75",children:"Create a store"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(ic,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:r.name,onChange:m,className:"pl-10 block w-full border border-gray-300 rounded-lg px-3 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"Enter your full name"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),n.jsxs("div",{className:"relative",children:[n.jsx(vl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:r.email,onChange:m,className:"pl-10 block w-full border border-gray-300 rounded-lg px-3 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(aa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{id:"password",name:"password",type:s?"text":"password",required:!0,value:r.password,onChange:m,className:"pl-10 pr-10 block w-full border border-gray-300 rounded-lg px-3 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"Create a password"}),n.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?n.jsx(f0,{className:"w-5 h-5"}):n.jsx(Gn,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(aa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:a?"text":"password",required:!0,value:r.confirmPassword,onChange:m,className:"pl-10 pr-10 block w-full border border-gray-300 rounded-lg px-3 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"Confirm your password"}),n.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:a?n.jsx(f0,{className:"w-5 h-5"}):n.jsx(Gn,{className:"w-5 h-5"})})]})]})]}),n.jsx("button",{type:"submit",disabled:c,className:"w-full bg-black text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Creating account...":"Create account"}),r.role==="store_owner"&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Next step:"})," After registration, you'll create your store and start selling!"]})})]})})]})})},Tc=({images:r=[],onImagesChange:t,maxImages:s=5,multiple:i=!0,className:a="",idPrefix:o="upload"})=>{const[c,l]=ee.useState(!1),u=g=>{const v=Array.from(g).filter(y=>y.type.startsWith("image/"));if(i){const y=[...r,...v].slice(0,s);t(y)}else t(v.slice(0,1))},d=g=>{g.preventDefault(),l(!1),u(g.dataTransfer.files)},A=g=>{g.preventDefault(),l(!0)},f=g=>{g.preventDefault(),l(!1)},p=g=>{const b=r.filter((v,y)=>y!==g);t(b)},m=`${o}-image-upload`;return n.jsxs("div",{className:`space-y-4 ${a}`,children:[n.jsxs("div",{onDrop:d,onDragOver:A,onDragLeave:f,className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${c?"border-black bg-gray-50":"border-gray-300 hover:border-gray-400"}`,children:[n.jsx("input",{type:"file",multiple:i,accept:"image/*",onChange:g=>u(g.target.files),className:"hidden",id:m}),n.jsxs("label",{htmlFor:m,className:"cursor-pointer",children:[n.jsx(gp,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-600 mb-1",children:"Click to upload or drag and drop"}),n.jsxs("p",{className:"text-sm text-gray-500",children:["PNG, JPG, GIF up to 10MB ",i&&`(max ${s})`]})]})]}),r.length>0&&n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((g,b)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:typeof g=="string"?g:URL.createObjectURL(g),alt:`Upload ${b+1}`,className:"w-full h-32 object-cover rounded-lg"}),n.jsx("button",{type:"button",onClick:()=>p(b),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(Ts,{className:"w-4 h-4"})})]},b))}),n.jsxs("p",{className:"text-sm text-gray-500",children:[r.length," of ",s," images uploaded"]})]})};function pH(r,t){return t.forEach((function(s){s&&typeof s!="string"&&!Array.isArray(s)&&Object.keys(s).forEach((function(i){if(i!=="default"&&!(i in r)){var a=Object.getOwnPropertyDescriptor(s,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return s[i]}})}}))})),Object.freeze(r)}function nE(r,t){return new Promise((function(s,i){let a;return mH(r).then((function(o){try{return a=o,s(new Blob([t.slice(0,2),a,t.slice(2)],{type:"image/jpeg"}))}catch(c){return i(c)}}),i)}))}const mH=r=>new Promise(((t,s)=>{const i=new FileReader;i.addEventListener("load",(({target:{result:a}})=>{const o=new DataView(a);let c=0;if(o.getUint16(c)!==65496)return s("not a valid JPEG");for(c+=2;;){const l=o.getUint16(c);if(l===65498)break;const u=o.getUint16(c+2);if(l===65505&&o.getUint32(c+4)===1165519206){const d=c+10;let A;switch(o.getUint16(d)){case 18761:A=!0;break;case 19789:A=!1;break;default:return s("TIFF header contains invalid endian")}if(o.getUint16(d+2,A)!==42)return s("TIFF header contains invalid version");const f=o.getUint32(d+4,A),p=d+f+2+12*o.getUint16(d+f,A);for(let m=d+f+2;m<p;m+=12)if(o.getUint16(m,A)==274){if(o.getUint16(m+2,A)!==3)return s("Orientation data type is invalid");if(o.getUint32(m+4,A)!==1)return s("Orientation data count is invalid");o.setUint16(m+8,1,A);break}return t(a.slice(c,c+2+u))}c+=2+u}return t(new Blob)})),i.readAsArrayBuffer(r)}));var O0={},gH={get exports(){return O0},set exports(r){O0=r}};(function(r){var t,s,i={};gH.exports=i,i.parse=function(a,o){for(var c=i.bin.readUshort,l=i.bin.readUint,u=0,d={},A=new Uint8Array(a),f=A.length-4;l(A,f)!=101010256;)f--;u=f,u+=4;var p=c(A,u+=4);c(A,u+=2);var m=l(A,u+=2),g=l(A,u+=4);u+=4,u=g;for(var b=0;b<p;b++){l(A,u),u+=4,u+=4,u+=4,l(A,u+=4),m=l(A,u+=4);var v=l(A,u+=4),y=c(A,u+=4),w=c(A,u+2),j=c(A,u+4);u+=6;var C=l(A,u+=8);u+=4,u+=y+w+j,i._readLocal(A,C,d,m,v,o)}return d},i._readLocal=function(a,o,c,l,u,d){var A=i.bin.readUshort,f=i.bin.readUint;f(a,o),A(a,o+=4),A(a,o+=2);var p=A(a,o+=2);f(a,o+=2),f(a,o+=4),o+=4;var m=A(a,o+=8),g=A(a,o+=2);o+=2;var b=i.bin.readUTF8(a,o,m);if(o+=m,o+=g,d)c[b]={size:u,csize:l};else{var v=new Uint8Array(a.buffer,o);if(p==0)c[b]=new Uint8Array(v.buffer.slice(o,o+l));else{if(p!=8)throw"unknown compression method: "+p;var y=new Uint8Array(u);i.inflateRaw(v,y),c[b]=y}}},i.inflateRaw=function(a,o){return i.F.inflate(a,o)},i.inflate=function(a,o){return a[0],a[1],i.inflateRaw(new Uint8Array(a.buffer,a.byteOffset+2,a.length-6),o)},i.deflate=function(a,o){o==null&&(o={level:6});var c=0,l=new Uint8Array(50+Math.floor(1.1*a.length));l[c]=120,l[c+1]=156,c+=2,c=i.F.deflateRaw(a,l,c,o.level);var u=i.adler(a,0,a.length);return l[c+0]=u>>>24&255,l[c+1]=u>>>16&255,l[c+2]=u>>>8&255,l[c+3]=u>>>0&255,new Uint8Array(l.buffer,0,c+4)},i.deflateRaw=function(a,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*a.length)),l=i.F.deflateRaw(a,c,l,o.level);return new Uint8Array(c.buffer,0,l)},i.encode=function(a,o){o==null&&(o=!1);var c=0,l=i.bin.writeUint,u=i.bin.writeUshort,d={};for(var A in a){var f=!i._noNeed(A)&&!o,p=a[A],m=i.crc.crc(p,0,p.length);d[A]={cpr:f,usize:p.length,crc:m,file:f?i.deflateRaw(p):p}}for(var A in d)c+=d[A].file.length+30+46+2*i.bin.sizeUTF8(A);c+=22;var g=new Uint8Array(c),b=0,v=[];for(var A in d){var y=d[A];v.push(b),b=i._writeHeader(g,b,A,y,0)}var w=0,j=b;for(var A in d)y=d[A],v.push(b),b=i._writeHeader(g,b,A,y,1,v[w++]);var C=b-j;return l(g,b,101010256),b+=4,u(g,b+=4,w),u(g,b+=2,w),l(g,b+=2,C),l(g,b+=4,j),b+=4,b+=2,g.buffer},i._noNeed=function(a){var o=a.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},i._writeHeader=function(a,o,c,l,u,d){var A=i.bin.writeUint,f=i.bin.writeUshort,p=l.file;return A(a,o,u==0?67324752:33639248),o+=4,u==1&&(o+=2),f(a,o,20),f(a,o+=2,0),f(a,o+=2,l.cpr?8:0),A(a,o+=2,0),A(a,o+=4,l.crc),A(a,o+=4,p.length),A(a,o+=4,l.usize),f(a,o+=4,i.bin.sizeUTF8(c)),f(a,o+=2,0),o+=2,u==1&&(o+=2,o+=2,A(a,o+=6,d),o+=4),o+=i.bin.writeUTF8(a,o,c),u==0&&(a.set(p,o),o+=p.length),o},i.crc={table:(function(){for(var a=new Uint32Array(256),o=0;o<256;o++){for(var c=o,l=0;l<8;l++)1&c?c=3988292384^c>>>1:c>>>=1;a[o]=c}return a})(),update:function(a,o,c,l){for(var u=0;u<l;u++)a=i.crc.table[255&(a^o[c+u])]^a>>>8;return a},crc:function(a,o,c){return 4294967295^i.crc.update(4294967295,a,o,c)}},i.adler=function(a,o,c){for(var l=1,u=0,d=o,A=o+c;d<A;){for(var f=Math.min(d+5552,A);d<f;)u+=l+=a[d++];l%=65521,u%=65521}return u<<16|l},i.bin={readUshort:function(a,o){return a[o]|a[o+1]<<8},writeUshort:function(a,o,c){a[o]=255&c,a[o+1]=c>>8&255},readUint:function(a,o){return 16777216*a[o+3]+(a[o+2]<<16|a[o+1]<<8|a[o])},writeUint:function(a,o,c){a[o]=255&c,a[o+1]=c>>8&255,a[o+2]=c>>16&255,a[o+3]=c>>24&255},readASCII:function(a,o,c){for(var l="",u=0;u<c;u++)l+=String.fromCharCode(a[o+u]);return l},writeASCII:function(a,o,c){for(var l=0;l<c.length;l++)a[o+l]=c.charCodeAt(l)},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,o,c){for(var l,u="",d=0;d<c;d++)u+="%"+i.bin.pad(a[o+d].toString(16));try{l=decodeURIComponent(u)}catch{return i.bin.readASCII(a,o,c)}return l},writeUTF8:function(a,o,c){for(var l=c.length,u=0,d=0;d<l;d++){var A=c.charCodeAt(d);if((4294967168&A)==0)a[o+u]=A,u++;else if((4294965248&A)==0)a[o+u]=192|A>>6,a[o+u+1]=128|A>>0&63,u+=2;else if((4294901760&A)==0)a[o+u]=224|A>>12,a[o+u+1]=128|A>>6&63,a[o+u+2]=128|A>>0&63,u+=3;else{if((4292870144&A)!=0)throw"e";a[o+u]=240|A>>18,a[o+u+1]=128|A>>12&63,a[o+u+2]=128|A>>6&63,a[o+u+3]=128|A>>0&63,u+=4}}return u},sizeUTF8:function(a){for(var o=a.length,c=0,l=0;l<o;l++){var u=a.charCodeAt(l);if((4294967168&u)==0)c++;else if((4294965248&u)==0)c+=2;else if((4294901760&u)==0)c+=3;else{if((4292870144&u)!=0)throw"e";c+=4}}return c}},i.F={},i.F.deflateRaw=function(a,o,c,l){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],d=i.F.U,A=i.F._goodIndex;i.F._hash;var f=i.F._putsE,p=0,m=c<<3,g=0,b=a.length;if(l==0){for(;p<b;)f(o,m,p+(k=Math.min(65535,b-p))==b?1:0),m=i.F._copyExact(a,p,k,o,m+8),p+=k;return m>>>3}var v=d.lits,y=d.strt,w=d.prev,j=0,C=0,B=0,E=0,_=0,S=0;for(b>2&&(y[S=i.F._hash(a,0)]=0),p=0;p<b;p++){if(_=S,p+1<b-2){S=i.F._hash(a,p+1);var N=p+1&32767;w[N]=y[S],y[S]=N}if(g<=p){(j>14e3||C>26697)&&b-p>100&&(g<p&&(v[j]=p-g,j+=2,g=p),m=i.F._writeBlock(p==b-1||g==b?1:0,v,j,E,a,B,p-B,o,m),j=C=E=0,B=p);var O=0;p<b-2&&(O=i.F._bestMatch(a,p,w,_,Math.min(u[2],b-p),u[3]));var k=O>>>16,I=65535&O;if(O!=0){I=65535&O;var R=A(k=O>>>16,d.of0);d.lhst[257+R]++;var Q=A(I,d.df0);d.dhst[Q]++,E+=d.exb[R]+d.dxb[Q],v[j]=k<<23|p-g,v[j+1]=I<<16|R<<8|Q,j+=2,g=p+k}else d.lhst[a[p]]++;C++}}for(B==p&&a.length!=0||(g<p&&(v[j]=p-g,j+=2,g=p),m=i.F._writeBlock(1,v,j,E,a,B,p-B,o,m),j=0,C=0,j=C=E=0,B=p);(7&m)!=0;)m++;return m>>>3},i.F._bestMatch=function(a,o,c,l,u,d){var A=32767&o,f=c[A],p=A-f+32768&32767;if(f==A||l!=i.F._hash(a,o-p))return 0;for(var m=0,g=0,b=Math.min(32767,o);p<=b&&--d!=0&&f!=A;){if(m==0||a[o+m]==a[o+m-p]){var v=i.F._howLong(a,o,p);if(v>m){if(g=p,(m=v)>=u)break;p+2<v&&(v=p+2);for(var y=0,w=0;w<v-2;w++){var j=o-p+w+32768&32767,C=j-c[j]+32768&32767;C>y&&(y=C,f=j)}}}p+=(A=f)-(f=c[A])+32768&32767}return m<<16|g},i.F._howLong=function(a,o,c){if(a[o]!=a[o-c]||a[o+1]!=a[o+1-c]||a[o+2]!=a[o+2-c])return 0;var l=o,u=Math.min(a.length,o+258);for(o+=3;o<u&&a[o]==a[o-c];)o++;return o-l},i.F._hash=function(a,o){return(a[o]<<8|a[o+1])+(a[o+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(a,o,c,l,u,d,A,f,p){var m,g,b,v,y,w,j,C,B,E=i.F.U,_=i.F._putsF,S=i.F._putsE;E.lhst[256]++,g=(m=i.F.getTrees())[0],b=m[1],v=m[2],y=m[3],w=m[4],j=m[5],C=m[6],B=m[7];var N=32+((p+3&7)==0?0:8-(p+3&7))+(A<<3),O=l+i.F.contSize(E.fltree,E.lhst)+i.F.contSize(E.fdtree,E.dhst),k=l+i.F.contSize(E.ltree,E.lhst)+i.F.contSize(E.dtree,E.dhst);k+=14+3*j+i.F.contSize(E.itree,E.ihst)+(2*E.ihst[16]+3*E.ihst[17]+7*E.ihst[18]);for(var I=0;I<286;I++)E.lhst[I]=0;for(I=0;I<30;I++)E.dhst[I]=0;for(I=0;I<19;I++)E.ihst[I]=0;var R=N<O&&N<k?0:O<k?1:2;if(_(f,p,a),_(f,p+1,R),p+=3,R==0){for(;(7&p)!=0;)p++;p=i.F._copyExact(u,d,A,f,p)}else{var Q,$;if(R==1&&(Q=E.fltree,$=E.fdtree),R==2){i.F.makeCodes(E.ltree,g),i.F.revCodes(E.ltree,g),i.F.makeCodes(E.dtree,b),i.F.revCodes(E.dtree,b),i.F.makeCodes(E.itree,v),i.F.revCodes(E.itree,v),Q=E.ltree,$=E.dtree,S(f,p,y-257),S(f,p+=5,w-1),S(f,p+=5,j-4),p+=4;for(var L=0;L<j;L++)S(f,p+3*L,E.itree[1+(E.ordr[L]<<1)]);p+=3*j,p=i.F._codeTiny(C,E.itree,f,p),p=i.F._codeTiny(B,E.itree,f,p)}for(var F=d,G=0;G<c;G+=2){for(var X=o[G],q=X>>>23,T=F+(8388607&X);F<T;)p=i.F._writeLit(u[F++],Q,f,p);if(q!=0){var U=o[G+1],K=U>>16,z=U>>8&255,M=255&U;S(f,p=i.F._writeLit(257+z,Q,f,p),q-E.of0[z]),p+=E.exb[z],_(f,p=i.F._writeLit(M,$,f,p),K-E.df0[M]),p+=E.dxb[M],F+=q}}p=i.F._writeLit(256,Q,f,p)}return p},i.F._copyExact=function(a,o,c,l,u){var d=u>>>3;return l[d]=c,l[d+1]=c>>>8,l[d+2]=255-l[d],l[d+3]=255-l[d+1],d+=4,l.set(new Uint8Array(a.buffer,o,c),d),u+(c+4<<3)},i.F.getTrees=function(){for(var a=i.F.U,o=i.F._hufTree(a.lhst,a.ltree,15),c=i.F._hufTree(a.dhst,a.dtree,15),l=[],u=i.F._lenCodes(a.ltree,l),d=[],A=i.F._lenCodes(a.dtree,d),f=0;f<l.length;f+=2)a.ihst[l[f]]++;for(f=0;f<d.length;f+=2)a.ihst[d[f]]++;for(var p=i.F._hufTree(a.ihst,a.itree,7),m=19;m>4&&a.itree[1+(a.ordr[m-1]<<1)]==0;)m--;return[o,c,p,u,A,m,l,d]},i.F.getSecond=function(a){for(var o=[],c=0;c<a.length;c+=2)o.push(a[c+1]);return o},i.F.nonZero=function(a){for(var o="",c=0;c<a.length;c+=2)a[c+1]!=0&&(o+=(c>>1)+",");return o},i.F.contSize=function(a,o){for(var c=0,l=0;l<o.length;l++)c+=o[l]*a[1+(l<<1)];return c},i.F._codeTiny=function(a,o,c,l){for(var u=0;u<a.length;u+=2){var d=a[u],A=a[u+1];l=i.F._writeLit(d,o,c,l);var f=d==16?2:d==17?3:7;d>15&&(i.F._putsE(c,l,A,f),l+=f)}return l},i.F._lenCodes=function(a,o){for(var c=a.length;c!=2&&a[c-1]==0;)c-=2;for(var l=0;l<c;l+=2){var u=a[l+1],d=l+3<c?a[l+3]:-1,A=l+5<c?a[l+5]:-1,f=l==0?-1:a[l-1];if(u==0&&d==u&&A==u){for(var p=l+5;p+2<c&&a[p+2]==u;)p+=2;(m=Math.min(p+1-l>>>1,138))<11?o.push(17,m-3):o.push(18,m-11),l+=2*m-2}else if(u==f&&d==u&&A==u){for(p=l+5;p+2<c&&a[p+2]==u;)p+=2;var m=Math.min(p+1-l>>>1,6);o.push(16,m-3),l+=2*m-2}else o.push(u,0)}return c>>>1},i.F._hufTree=function(a,o,c){var l=[],u=a.length,d=o.length,A=0;for(A=0;A<d;A+=2)o[A]=0,o[A+1]=0;for(A=0;A<u;A++)a[A]!=0&&l.push({lit:A,f:a[A]});var f=l.length,p=l.slice(0);if(f==0)return 0;if(f==1){var m=l[0].lit;return p=m==0?1:0,o[1+(m<<1)]=1,o[1+(p<<1)]=1,1}l.sort((function(C,B){return C.f-B.f}));var g=l[0],b=l[1],v=0,y=1,w=2;for(l[0]={lit:-1,f:g.f+b.f,l:g,r:b,d:0};y!=f-1;)g=v!=y&&(w==f||l[v].f<l[w].f)?l[v++]:l[w++],b=v!=y&&(w==f||l[v].f<l[w].f)?l[v++]:l[w++],l[y++]={lit:-1,f:g.f+b.f,l:g,r:b};var j=i.F.setDepth(l[y-1],0);for(j>c&&(i.F.restrictDepth(p,c,j),j=c),A=0;A<f;A++)o[1+(p[A].lit<<1)]=p[A].d;return j},i.F.setDepth=function(a,o){return a.lit!=-1?(a.d=o,o):Math.max(i.F.setDepth(a.l,o+1),i.F.setDepth(a.r,o+1))},i.F.restrictDepth=function(a,o,c){var l=0,u=1<<c-o,d=0;for(a.sort((function(f,p){return p.d==f.d?f.f-p.f:p.d-f.d})),l=0;l<a.length&&a[l].d>o;l++){var A=a[l].d;a[l].d=o,d+=u-(1<<c-A)}for(d>>>=c-o;d>0;)(A=a[l].d)<o?(a[l].d++,d-=1<<o-A-1):l++;for(;l>=0;l--)a[l].d==o&&d<0&&(a[l].d--,d++);d!=0&&console.log("debt left")},i.F._goodIndex=function(a,o){var c=0;return o[16|c]<=a&&(c|=16),o[8|c]<=a&&(c|=8),o[4|c]<=a&&(c|=4),o[2|c]<=a&&(c|=2),o[1|c]<=a&&(c|=1),c},i.F._writeLit=function(a,o,c,l){return i.F._putsF(c,l,o[a<<1]),l+o[1+(a<<1)]},i.F.inflate=function(a,o){var c=Uint8Array;if(a[0]==3&&a[1]==0)return o||new c(0);var l=i.F,u=l._bitsF,d=l._bitsE,A=l._decodeTiny,f=l.makeCodes,p=l.codes2map,m=l._get17,g=l.U,b=o==null;b&&(o=new c(a.length>>>2<<3));for(var v,y,w=0,j=0,C=0,B=0,E=0,_=0,S=0,N=0,O=0;w==0;)if(w=u(a,O,1),j=u(a,O+1,2),O+=3,j!=0){if(b&&(o=i.F._check(o,N+(1<<17))),j==1&&(v=g.flmap,y=g.fdmap,_=511,S=31),j==2){C=d(a,O,5)+257,B=d(a,O+5,5)+1,E=d(a,O+10,4)+4,O+=14;for(var k=0;k<38;k+=2)g.itree[k]=0,g.itree[k+1]=0;var I=1;for(k=0;k<E;k++){var R=d(a,O+3*k,3);g.itree[1+(g.ordr[k]<<1)]=R,R>I&&(I=R)}O+=3*E,f(g.itree,I),p(g.itree,I,g.imap),v=g.lmap,y=g.dmap,O=A(g.imap,(1<<I)-1,C+B,a,O,g.ttree);var Q=l._copyOut(g.ttree,0,C,g.ltree);_=(1<<Q)-1;var $=l._copyOut(g.ttree,C,B,g.dtree);S=(1<<$)-1,f(g.ltree,Q),p(g.ltree,Q,v),f(g.dtree,$),p(g.dtree,$,y)}for(;;){var L=v[m(a,O)&_];O+=15&L;var F=L>>>4;if(!(F>>>8))o[N++]=F;else{if(F==256)break;var G=N+F-254;if(F>264){var X=g.ldef[F-257];G=N+(X>>>3)+d(a,O,7&X),O+=7&X}var q=y[m(a,O)&S];O+=15&q;var T=q>>>4,U=g.ddef[T],K=(U>>>4)+u(a,O,15&U);for(O+=15&U,b&&(o=i.F._check(o,N+(1<<17)));N<G;)o[N]=o[N++-K],o[N]=o[N++-K],o[N]=o[N++-K],o[N]=o[N++-K];N=G}}}else{(7&O)!=0&&(O+=8-(7&O));var z=4+(O>>>3),M=a[z-4]|a[z-3]<<8;b&&(o=i.F._check(o,N+M)),o.set(new c(a.buffer,a.byteOffset+z,M),N),O=z+M<<3,N+=M}return o.length==N?o:o.slice(0,N)},i.F._check=function(a,o){var c=a.length;if(o<=c)return a;var l=new Uint8Array(Math.max(c<<1,o));return l.set(a,0),l},i.F._decodeTiny=function(a,o,c,l,u,d){for(var A=i.F._bitsE,f=i.F._get17,p=0;p<c;){var m=a[f(l,u)&o];u+=15&m;var g=m>>>4;if(g<=15)d[p]=g,p++;else{var b=0,v=0;g==16?(v=3+A(l,u,2),u+=2,b=d[p-1]):g==17?(v=3+A(l,u,3),u+=3):g==18&&(v=11+A(l,u,7),u+=7);for(var y=p+v;p<y;)d[p]=b,p++}}return u},i.F._copyOut=function(a,o,c,l){for(var u=0,d=0,A=l.length>>>1;d<c;){var f=a[d+o];l[d<<1]=0,l[1+(d<<1)]=f,f>u&&(u=f),d++}for(;d<A;)l[d<<1]=0,l[1+(d<<1)]=0,d++;return u},i.F.makeCodes=function(a,o){for(var c,l,u,d,A=i.F.U,f=a.length,p=A.bl_count,m=0;m<=o;m++)p[m]=0;for(m=1;m<f;m+=2)p[a[m]]++;var g=A.next_code;for(c=0,p[0]=0,l=1;l<=o;l++)c=c+p[l-1]<<1,g[l]=c;for(u=0;u<f;u+=2)(d=a[u+1])!=0&&(a[u]=g[d],g[d]++)},i.F.codes2map=function(a,o,c){for(var l=a.length,u=i.F.U.rev15,d=0;d<l;d+=2)if(a[d+1]!=0)for(var A=d>>1,f=a[d+1],p=A<<4|f,m=o-f,g=a[d]<<m,b=g+(1<<m);g!=b;)c[u[g]>>>15-o]=p,g++},i.F.revCodes=function(a,o){for(var c=i.F.U.rev15,l=15-o,u=0;u<a.length;u+=2){var d=a[u]<<o-a[u+1];a[u]=c[d]>>>l}},i.F._putsE=function(a,o,c){c<<=7&o;var l=o>>>3;a[l]|=c,a[l+1]|=c>>>8},i.F._putsF=function(a,o,c){c<<=7&o;var l=o>>>3;a[l]|=c,a[l+1]|=c>>>8,a[l+2]|=c>>>16},i.F._bitsE=function(a,o,c){return(a[o>>>3]|a[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},i.F._bitsF=function(a,o,c){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},i.F._get17=function(a,o){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16)>>>(7&o)},i.F._get25=function(a,o){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16|a[3+(o>>>3)]<<24)>>>(7&o)},i.F.U=(t=Uint16Array,s=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new s(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new s(286),dhst:new s(30),ihst:new s(19),lits:new s(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var a=i.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,a.rev15[o]=(c>>>16|c<<16)>>>17}function l(u,d,A){for(;d--!=0;)u.push(0,A)}for(o=0;o<32;o++)a.ldef[o]=a.of0[o]<<3|a.exb[o],a.ddef[o]=a.df0[o]<<4|a.dxb[o];l(a.fltree,144,8),l(a.fltree,112,9),l(a.fltree,24,7),l(a.fltree,8,8),i.F.makeCodes(a.fltree,9),i.F.codes2map(a.fltree,9,a.flmap),i.F.revCodes(a.fltree,9),l(a.fdtree,32,5),i.F.makeCodes(a.fdtree,5),i.F.codes2map(a.fdtree,5,a.fdmap),i.F.revCodes(a.fdtree,5),l(a.itree,19,0),l(a.ltree,286,0),l(a.dtree,30,0),l(a.ttree,320,0)})()})();var yH=pH({__proto__:null,default:O0},[O0]);const il=(function(){var r={nextZero(A,f){for(;A[f]!=0;)f++;return f},readUshort:(A,f)=>A[f]<<8|A[f+1],writeUshort(A,f,p){A[f]=p>>8&255,A[f+1]=255&p},readUint:(A,f)=>16777216*A[f]+(A[f+1]<<16|A[f+2]<<8|A[f+3]),writeUint(A,f,p){A[f]=p>>24&255,A[f+1]=p>>16&255,A[f+2]=p>>8&255,A[f+3]=255&p},readASCII(A,f,p){let m="";for(let g=0;g<p;g++)m+=String.fromCharCode(A[f+g]);return m},writeASCII(A,f,p){for(let m=0;m<p.length;m++)A[f+m]=p.charCodeAt(m)},readBytes(A,f,p){const m=[];for(let g=0;g<p;g++)m.push(A[f+g]);return m},pad:A=>A.length<2?`0${A}`:A,readUTF8(A,f,p){let m,g="";for(let b=0;b<p;b++)g+=`%${r.pad(A[f+b].toString(16))}`;try{m=decodeURIComponent(g)}catch{return r.readASCII(A,f,p)}return m}};function t(A,f,p,m){const g=f*p,b=o(m),v=Math.ceil(f*b/8),y=new Uint8Array(4*g),w=new Uint32Array(y.buffer),{ctype:j}=m,{depth:C}=m,B=r.readUshort;if(j==6){const X=g<<2;if(C==8)for(var E=0;E<X;E+=4)y[E]=A[E],y[E+1]=A[E+1],y[E+2]=A[E+2],y[E+3]=A[E+3];if(C==16)for(E=0;E<X;E++)y[E]=A[E<<1]}else if(j==2){const X=m.tabs.tRNS;if(X==null){if(C==8)for(E=0;E<g;E++){var _=3*E;w[E]=255<<24|A[_+2]<<16|A[_+1]<<8|A[_]}if(C==16)for(E=0;E<g;E++)_=6*E,w[E]=255<<24|A[_+4]<<16|A[_+2]<<8|A[_]}else{var S=X[0];const q=X[1],T=X[2];if(C==8)for(E=0;E<g;E++){var N=E<<2;_=3*E,w[E]=255<<24|A[_+2]<<16|A[_+1]<<8|A[_],A[_]==S&&A[_+1]==q&&A[_+2]==T&&(y[N+3]=0)}if(C==16)for(E=0;E<g;E++)N=E<<2,_=6*E,w[E]=255<<24|A[_+4]<<16|A[_+2]<<8|A[_],B(A,_)==S&&B(A,_+2)==q&&B(A,_+4)==T&&(y[N+3]=0)}}else if(j==3){const X=m.tabs.PLTE,q=m.tabs.tRNS,T=q?q.length:0;if(C==1)for(var O=0;O<p;O++){var k=O*v,I=O*f;for(E=0;E<f;E++){N=I+E<<2;var R=3*(Q=A[k+(E>>3)]>>7-((7&E)<<0)&1);y[N]=X[R],y[N+1]=X[R+1],y[N+2]=X[R+2],y[N+3]=Q<T?q[Q]:255}}if(C==2)for(O=0;O<p;O++)for(k=O*v,I=O*f,E=0;E<f;E++)N=I+E<<2,R=3*(Q=A[k+(E>>2)]>>6-((3&E)<<1)&3),y[N]=X[R],y[N+1]=X[R+1],y[N+2]=X[R+2],y[N+3]=Q<T?q[Q]:255;if(C==4)for(O=0;O<p;O++)for(k=O*v,I=O*f,E=0;E<f;E++)N=I+E<<2,R=3*(Q=A[k+(E>>1)]>>4-((1&E)<<2)&15),y[N]=X[R],y[N+1]=X[R+1],y[N+2]=X[R+2],y[N+3]=Q<T?q[Q]:255;if(C==8)for(E=0;E<g;E++){var Q;N=E<<2,R=3*(Q=A[E]),y[N]=X[R],y[N+1]=X[R+1],y[N+2]=X[R+2],y[N+3]=Q<T?q[Q]:255}}else if(j==4){if(C==8)for(E=0;E<g;E++){N=E<<2;var $=A[L=E<<1];y[N]=$,y[N+1]=$,y[N+2]=$,y[N+3]=A[L+1]}if(C==16)for(E=0;E<g;E++){var L;N=E<<2,$=A[L=E<<2],y[N]=$,y[N+1]=$,y[N+2]=$,y[N+3]=A[L+2]}}else if(j==0)for(S=m.tabs.tRNS?m.tabs.tRNS:-1,O=0;O<p;O++){const X=O*v,q=O*f;if(C==1)for(var F=0;F<f;F++){var G=($=255*(A[X+(F>>>3)]>>>7-(7&F)&1))==255*S?0:255;w[q+F]=G<<24|$<<16|$<<8|$}else if(C==2)for(F=0;F<f;F++)G=($=85*(A[X+(F>>>2)]>>>6-((3&F)<<1)&3))==85*S?0:255,w[q+F]=G<<24|$<<16|$<<8|$;else if(C==4)for(F=0;F<f;F++)G=($=17*(A[X+(F>>>1)]>>>4-((1&F)<<2)&15))==17*S?0:255,w[q+F]=G<<24|$<<16|$<<8|$;else if(C==8)for(F=0;F<f;F++)G=($=A[X+F])==S?0:255,w[q+F]=G<<24|$<<16|$<<8|$;else if(C==16)for(F=0;F<f;F++)$=A[X+(F<<1)],G=B(A,X+(F<<1))==S?0:255,w[q+F]=G<<24|$<<16|$<<8|$}return y}function s(A,f,p,m){const g=o(A),b=Math.ceil(p*g/8),v=new Uint8Array((b+1+A.interlace)*m);return f=A.tabs.CgBI?a(f,v):i(f,v),A.interlace==0?f=c(f,A,0,p,m):A.interlace==1&&(f=(function(w,j){const C=j.width,B=j.height,E=o(j),_=E>>3,S=Math.ceil(C*E/8),N=new Uint8Array(B*S);let O=0;const k=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],R=[8,8,8,4,4,2,2],Q=[8,8,4,4,2,2,1];let $=0;for(;$<7;){const F=R[$],G=Q[$];let X=0,q=0,T=k[$];for(;T<B;)T+=F,q++;let U=I[$];for(;U<C;)U+=G,X++;const K=Math.ceil(X*E/8);c(w,j,O,X,q);let z=0,M=k[$];for(;M<B;){let H=I[$],Y=O+z*K<<3;for(;H<C;){var L;if(E==1&&(L=(L=w[Y>>3])>>7-(7&Y)&1,N[M*S+(H>>3)]|=L<<7-((7&H)<<0)),E==2&&(L=(L=w[Y>>3])>>6-(7&Y)&3,N[M*S+(H>>2)]|=L<<6-((3&H)<<1)),E==4&&(L=(L=w[Y>>3])>>4-(7&Y)&15,N[M*S+(H>>1)]|=L<<4-((1&H)<<2)),E>=8){const ae=M*S+H*_;for(let oe=0;oe<_;oe++)N[ae+oe]=w[(Y>>3)+oe]}Y+=E,H+=G}z++,M+=F}X*q!=0&&(O+=q*(1+K)),$+=1}return N})(f,A)),f}function i(A,f){return a(new Uint8Array(A.buffer,2,A.length-6),f)}var a=(function(){const A={H:{}};return A.H.N=function(f,p){const m=Uint8Array;let g,b,v=0,y=0,w=0,j=0,C=0,B=0,E=0,_=0,S=0;if(f[0]==3&&f[1]==0)return p||new m(0);const N=A.H,O=N.b,k=N.e,I=N.R,R=N.n,Q=N.A,$=N.Z,L=N.m,F=p==null;for(F&&(p=new m(f.length>>>2<<5));v==0;)if(v=O(f,S,1),y=O(f,S+1,2),S+=3,y!=0){if(F&&(p=A.H.W(p,_+(1<<17))),y==1&&(g=L.J,b=L.h,B=511,E=31),y==2){w=k(f,S,5)+257,j=k(f,S+5,5)+1,C=k(f,S+10,4)+4,S+=14;let X=1;for(var G=0;G<38;G+=2)L.Q[G]=0,L.Q[G+1]=0;for(G=0;G<C;G++){const U=k(f,S+3*G,3);L.Q[1+(L.X[G]<<1)]=U,U>X&&(X=U)}S+=3*C,R(L.Q,X),Q(L.Q,X,L.u),g=L.w,b=L.d,S=I(L.u,(1<<X)-1,w+j,f,S,L.v);const q=N.V(L.v,0,w,L.C);B=(1<<q)-1;const T=N.V(L.v,w,j,L.D);E=(1<<T)-1,R(L.C,q),Q(L.C,q,g),R(L.D,T),Q(L.D,T,b)}for(;;){const X=g[$(f,S)&B];S+=15&X;const q=X>>>4;if(!(q>>>8))p[_++]=q;else{if(q==256)break;{let T=_+q-254;if(q>264){const H=L.q[q-257];T=_+(H>>>3)+k(f,S,7&H),S+=7&H}const U=b[$(f,S)&E];S+=15&U;const K=U>>>4,z=L.c[K],M=(z>>>4)+O(f,S,15&z);for(S+=15&z;_<T;)p[_]=p[_++-M],p[_]=p[_++-M],p[_]=p[_++-M],p[_]=p[_++-M];_=T}}}}else{(7&S)!=0&&(S+=8-(7&S));const X=4+(S>>>3),q=f[X-4]|f[X-3]<<8;F&&(p=A.H.W(p,_+q)),p.set(new m(f.buffer,f.byteOffset+X,q),_),S=X+q<<3,_+=q}return p.length==_?p:p.slice(0,_)},A.H.W=function(f,p){const m=f.length;if(p<=m)return f;const g=new Uint8Array(m<<1);return g.set(f,0),g},A.H.R=function(f,p,m,g,b,v){const y=A.H.e,w=A.H.Z;let j=0;for(;j<m;){const C=f[w(g,b)&p];b+=15&C;const B=C>>>4;if(B<=15)v[j]=B,j++;else{let E=0,_=0;B==16?(_=3+y(g,b,2),b+=2,E=v[j-1]):B==17?(_=3+y(g,b,3),b+=3):B==18&&(_=11+y(g,b,7),b+=7);const S=j+_;for(;j<S;)v[j]=E,j++}}return b},A.H.V=function(f,p,m,g){let b=0,v=0;const y=g.length>>>1;for(;v<m;){const w=f[v+p];g[v<<1]=0,g[1+(v<<1)]=w,w>b&&(b=w),v++}for(;v<y;)g[v<<1]=0,g[1+(v<<1)]=0,v++;return b},A.H.n=function(f,p){const m=A.H.m,g=f.length;let b,v,y,w;const j=m.j;for(var C=0;C<=p;C++)j[C]=0;for(C=1;C<g;C+=2)j[f[C]]++;const B=m.K;for(b=0,j[0]=0,v=1;v<=p;v++)b=b+j[v-1]<<1,B[v]=b;for(y=0;y<g;y+=2)w=f[y+1],w!=0&&(f[y]=B[w],B[w]++)},A.H.A=function(f,p,m){const g=f.length,b=A.H.m.r;for(let v=0;v<g;v+=2)if(f[v+1]!=0){const y=v>>1,w=f[v+1],j=y<<4|w,C=p-w;let B=f[v]<<C;const E=B+(1<<C);for(;B!=E;)m[b[B]>>>15-p]=j,B++}},A.H.l=function(f,p){const m=A.H.m.r,g=15-p;for(let b=0;b<f.length;b+=2){const v=f[b]<<p-f[b+1];f[b]=m[v]>>>g}},A.H.M=function(f,p,m){m<<=7&p;const g=p>>>3;f[g]|=m,f[g+1]|=m>>>8},A.H.I=function(f,p,m){m<<=7&p;const g=p>>>3;f[g]|=m,f[g+1]|=m>>>8,f[g+2]|=m>>>16},A.H.e=function(f,p,m){return(f[p>>>3]|f[1+(p>>>3)]<<8)>>>(7&p)&(1<<m)-1},A.H.b=function(f,p,m){return(f[p>>>3]|f[1+(p>>>3)]<<8|f[2+(p>>>3)]<<16)>>>(7&p)&(1<<m)-1},A.H.Z=function(f,p){return(f[p>>>3]|f[1+(p>>>3)]<<8|f[2+(p>>>3)]<<16)>>>(7&p)},A.H.i=function(f,p){return(f[p>>>3]|f[1+(p>>>3)]<<8|f[2+(p>>>3)]<<16|f[3+(p>>>3)]<<24)>>>(7&p)},A.H.m=(function(){const f=Uint16Array,p=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new p(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new p(286),Y:new p(30),a:new p(19),t:new p(15e3),k:new f(65536),g:new f(32768)}})(),(function(){const f=A.H.m;for(var p=0;p<32768;p++){let g=p;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,f.r[p]=(g>>>16|g<<16)>>>17}function m(g,b,v){for(;b--!=0;)g.push(0,v)}for(p=0;p<32;p++)f.q[p]=f.S[p]<<3|f.T[p],f.c[p]=f.p[p]<<4|f.z[p];m(f._,144,8),m(f._,112,9),m(f._,24,7),m(f._,8,8),A.H.n(f._,9),A.H.A(f._,9,f.J),A.H.l(f._,9),m(f.$,32,5),A.H.n(f.$,5),A.H.A(f.$,5,f.h),A.H.l(f.$,5),m(f.Q,19,0),m(f.C,286,0),m(f.D,30,0),m(f.v,320,0)})(),A.H.N})();function o(A){return[1,null,3,1,2,null,4][A.ctype]*A.depth}function c(A,f,p,m,g){let b=o(f);const v=Math.ceil(m*b/8);let y,w;b=Math.ceil(b/8);let j=A[p],C=0;if(j>1&&(A[p]=[0,0,1][j-2]),j==3)for(C=b;C<v;C++)A[C+1]=A[C+1]+(A[C+1-b]>>>1)&255;for(let B=0;B<g;B++)if(y=p+B*v,w=y+B+1,j=A[w-1],C=0,j==0)for(;C<v;C++)A[y+C]=A[w+C];else if(j==1){for(;C<b;C++)A[y+C]=A[w+C];for(;C<v;C++)A[y+C]=A[w+C]+A[y+C-b]}else if(j==2)for(;C<v;C++)A[y+C]=A[w+C]+A[y+C-v];else if(j==3){for(;C<b;C++)A[y+C]=A[w+C]+(A[y+C-v]>>>1);for(;C<v;C++)A[y+C]=A[w+C]+(A[y+C-v]+A[y+C-b]>>>1)}else{for(;C<b;C++)A[y+C]=A[w+C]+l(0,A[y+C-v],0);for(;C<v;C++)A[y+C]=A[w+C]+l(A[y+C-b],A[y+C-v],A[y+C-b-v])}return A}function l(A,f,p){const m=A+f-p,g=m-A,b=m-f,v=m-p;return g*g<=b*b&&g*g<=v*v?A:b*b<=v*v?f:p}function u(A,f,p){p.width=r.readUint(A,f),f+=4,p.height=r.readUint(A,f),f+=4,p.depth=A[f],f++,p.ctype=A[f],f++,p.compress=A[f],f++,p.filter=A[f],f++,p.interlace=A[f],f++}function d(A,f,p,m,g,b,v,y,w){const j=Math.min(f,g),C=Math.min(p,b);let B=0,E=0;for(let $=0;$<C;$++)for(let L=0;L<j;L++)if(v>=0&&y>=0?(B=$*f+L<<2,E=(y+$)*g+v+L<<2):(B=(-y+$)*f-v+L<<2,E=$*g+L<<2),w==0)m[E]=A[B],m[E+1]=A[B+1],m[E+2]=A[B+2],m[E+3]=A[B+3];else if(w==1){var _=A[B+3]*.00392156862745098,S=A[B]*_,N=A[B+1]*_,O=A[B+2]*_,k=m[E+3]*(1/255),I=m[E]*k,R=m[E+1]*k,Q=m[E+2]*k;const F=1-_,G=_+k*F,X=G==0?0:1/G;m[E+3]=255*G,m[E+0]=(S+I*F)*X,m[E+1]=(N+R*F)*X,m[E+2]=(O+Q*F)*X}else if(w==2)_=A[B+3],S=A[B],N=A[B+1],O=A[B+2],k=m[E+3],I=m[E],R=m[E+1],Q=m[E+2],_==k&&S==I&&N==R&&O==Q?(m[E]=0,m[E+1]=0,m[E+2]=0,m[E+3]=0):(m[E]=S,m[E+1]=N,m[E+2]=O,m[E+3]=_);else if(w==3){if(_=A[B+3],S=A[B],N=A[B+1],O=A[B+2],k=m[E+3],I=m[E],R=m[E+1],Q=m[E+2],_==k&&S==I&&N==R&&O==Q)continue;if(_<220&&k>20)return!1}return!0}return{decode:function(f){const p=new Uint8Array(f);let m=8;const g=r,b=g.readUshort,v=g.readUint,y={tabs:{},frames:[]},w=new Uint8Array(p.length);let j,C=0,B=0;const E=[137,80,78,71,13,10,26,10];for(var _=0;_<8;_++)if(p[_]!=E[_])throw"The input is not a PNG file!";for(;m<p.length;){const $=g.readUint(p,m);m+=4;const L=g.readASCII(p,m,4);if(m+=4,L=="IHDR")u(p,m,y);else if(L=="iCCP"){for(var S=m;p[S]!=0;)S++;g.readASCII(p,m,S-m),p[S+1];const F=p.slice(S+2,m+$);let G=null;try{G=i(F)}catch{G=a(F)}y.tabs[L]=G}else if(L=="CgBI")y.tabs[L]=p.slice(m,m+4);else if(L=="IDAT"){for(_=0;_<$;_++)w[C+_]=p[m+_];C+=$}else if(L=="acTL")y.tabs[L]={num_frames:v(p,m),num_plays:v(p,m+4)},j=new Uint8Array(p.length);else if(L=="fcTL"){B!=0&&((Q=y.frames[y.frames.length-1]).data=s(y,j.slice(0,B),Q.rect.width,Q.rect.height),B=0);const F={x:v(p,m+12),y:v(p,m+16),width:v(p,m+4),height:v(p,m+8)};let G=b(p,m+22);G=b(p,m+20)/(G==0?100:G);const X={rect:F,delay:Math.round(1e3*G),dispose:p[m+24],blend:p[m+25]};y.frames.push(X)}else if(L=="fdAT"){for(_=0;_<$-4;_++)j[B+_]=p[m+_+4];B+=$-4}else if(L=="pHYs")y.tabs[L]=[g.readUint(p,m),g.readUint(p,m+4),p[m+8]];else if(L=="cHRM")for(y.tabs[L]=[],_=0;_<8;_++)y.tabs[L].push(g.readUint(p,m+4*_));else if(L=="tEXt"||L=="zTXt"){y.tabs[L]==null&&(y.tabs[L]={});var N=g.nextZero(p,m),O=g.readASCII(p,m,N-m),k=m+$-N-1;if(L=="tEXt")R=g.readASCII(p,N+1,k);else{var I=i(p.slice(N+2,N+2+k));R=g.readUTF8(I,0,I.length)}y.tabs[L][O]=R}else if(L=="iTXt"){y.tabs[L]==null&&(y.tabs[L]={}),N=0,S=m,N=g.nextZero(p,S),O=g.readASCII(p,S,N-S);const F=p[S=N+1];var R;p[S+1],S+=2,N=g.nextZero(p,S),g.readASCII(p,S,N-S),S=N+1,N=g.nextZero(p,S),g.readUTF8(p,S,N-S),k=$-((S=N+1)-m),F==0?R=g.readUTF8(p,S,k):(I=i(p.slice(S,S+k)),R=g.readUTF8(I,0,I.length)),y.tabs[L][O]=R}else if(L=="PLTE")y.tabs[L]=g.readBytes(p,m,$);else if(L=="hIST"){const F=y.tabs.PLTE.length/3;for(y.tabs[L]=[],_=0;_<F;_++)y.tabs[L].push(b(p,m+2*_))}else if(L=="tRNS")y.ctype==3?y.tabs[L]=g.readBytes(p,m,$):y.ctype==0?y.tabs[L]=b(p,m):y.ctype==2&&(y.tabs[L]=[b(p,m),b(p,m+2),b(p,m+4)]);else if(L=="gAMA")y.tabs[L]=g.readUint(p,m)/1e5;else if(L=="sRGB")y.tabs[L]=p[m];else if(L=="bKGD")y.ctype==0||y.ctype==4?y.tabs[L]=[b(p,m)]:y.ctype==2||y.ctype==6?y.tabs[L]=[b(p,m),b(p,m+2),b(p,m+4)]:y.ctype==3&&(y.tabs[L]=p[m]);else if(L=="IEND")break;m+=$,g.readUint(p,m),m+=4}var Q;return B!=0&&((Q=y.frames[y.frames.length-1]).data=s(y,j.slice(0,B),Q.rect.width,Q.rect.height)),y.data=s(y,w,y.width,y.height),delete y.compress,delete y.interlace,delete y.filter,y},toRGBA8:function(f){const p=f.width,m=f.height;if(f.tabs.acTL==null)return[t(f.data,p,m,f).buffer];const g=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const b=p*m*4,v=new Uint8Array(b),y=new Uint8Array(b),w=new Uint8Array(b);for(let C=0;C<f.frames.length;C++){const B=f.frames[C],E=B.rect.x,_=B.rect.y,S=B.rect.width,N=B.rect.height,O=t(B.data,S,N,f);if(C!=0)for(var j=0;j<b;j++)w[j]=v[j];if(B.blend==0?d(O,S,N,v,p,m,E,_,0):B.blend==1&&d(O,S,N,v,p,m,E,_,1),g.push(v.buffer.slice(0)),B.dispose!=0){if(B.dispose==1)d(y,S,N,v,p,m,E,_,0);else if(B.dispose==2)for(j=0;j<b;j++)v[j]=w[j]}}return g},_paeth:l,_copyTile:d,_bin:r}})();(function(){const{_copyTile:r}=il,{_bin:t}=il,s=il._paeth;var i={table:(function(){const S=new Uint32Array(256);for(let N=0;N<256;N++){let O=N;for(let k=0;k<8;k++)1&O?O=3988292384^O>>>1:O>>>=1;S[N]=O}return S})(),update(S,N,O,k){for(let I=0;I<k;I++)S=i.table[255&(S^N[O+I])]^S>>>8;return S},crc:(S,N,O)=>4294967295^i.update(4294967295,S,N,O)};function a(S,N,O,k){N[O]+=S[0]*k>>4,N[O+1]+=S[1]*k>>4,N[O+2]+=S[2]*k>>4,N[O+3]+=S[3]*k>>4}function o(S){return Math.max(0,Math.min(255,S))}function c(S,N){const O=S[0]-N[0],k=S[1]-N[1],I=S[2]-N[2],R=S[3]-N[3];return O*O+k*k+I*I+R*R}function l(S,N,O,k,I,R,Q){Q==null&&(Q=1);const $=k.length,L=[];for(var F=0;F<$;F++){const M=k[F];L.push([M>>>0&255,M>>>8&255,M>>>16&255,M>>>24&255])}for(F=0;F<$;F++){let M=4294967295;for(var G=0,X=0;X<$;X++){var q=c(L[F],L[X]);X!=F&&q<M&&(M=q,G=X)}}const T=new Uint32Array(I.buffer),U=new Int16Array(N*O*4),K=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(F=0;F<K.length;F++)K[F]=255*((K[F]+.5)/16-.5);for(let M=0;M<O;M++)for(let H=0;H<N;H++){var z;F=4*(M*N+H),Q!=2?z=[o(S[F]+U[F]),o(S[F+1]+U[F+1]),o(S[F+2]+U[F+2]),o(S[F+3]+U[F+3])]:(q=K[4*(3&M)+(3&H)],z=[o(S[F]+q),o(S[F+1]+q),o(S[F+2]+q),o(S[F+3]+q)]),G=0;let Y=16777215;for(X=0;X<$;X++){const be=c(z,L[X]);be<Y&&(Y=be,G=X)}const ae=L[G],oe=[z[0]-ae[0],z[1]-ae[1],z[2]-ae[2],z[3]-ae[3]];Q==1&&(H!=N-1&&a(oe,U,F+4,7),M!=O-1&&(H!=0&&a(oe,U,F+4*N-4,3),a(oe,U,F+4*N,5),H!=N-1&&a(oe,U,F+4*N+4,1))),R[F>>2]=G,T[F>>2]=k[G]}}function u(S,N,O,k,I){I==null&&(I={});const{crc:R}=i,Q=t.writeUint,$=t.writeUshort,L=t.writeASCII;let F=8;const G=S.frames.length>1;let X,q=!1,T=33+(G?20:0);if(I.sRGB!=null&&(T+=13),I.pHYs!=null&&(T+=21),I.iCCP!=null&&(X=pako.deflate(I.iCCP),T+=21+X.length+4),S.ctype==3){for(var U=S.plte.length,K=0;K<U;K++)S.plte[K]>>>24!=255&&(q=!0);T+=8+3*U+4+(q?8+1*U+4:0)}for(var z=0;z<S.frames.length;z++)G&&(T+=38),T+=(ae=S.frames[z]).cimg.length+12,z!=0&&(T+=4);T+=12;const M=new Uint8Array(T),H=[137,80,78,71,13,10,26,10];for(K=0;K<8;K++)M[K]=H[K];if(Q(M,F,13),F+=4,L(M,F,"IHDR"),F+=4,Q(M,F,N),F+=4,Q(M,F,O),F+=4,M[F]=S.depth,F++,M[F]=S.ctype,F++,M[F]=0,F++,M[F]=0,F++,M[F]=0,F++,Q(M,F,R(M,F-17,17)),F+=4,I.sRGB!=null&&(Q(M,F,1),F+=4,L(M,F,"sRGB"),F+=4,M[F]=I.sRGB,F++,Q(M,F,R(M,F-5,5)),F+=4),I.iCCP!=null){const oe=13+X.length;Q(M,F,oe),F+=4,L(M,F,"iCCP"),F+=4,L(M,F,"ICC profile"),F+=11,F+=2,M.set(X,F),F+=X.length,Q(M,F,R(M,F-(oe+4),oe+4)),F+=4}if(I.pHYs!=null&&(Q(M,F,9),F+=4,L(M,F,"pHYs"),F+=4,Q(M,F,I.pHYs[0]),F+=4,Q(M,F,I.pHYs[1]),F+=4,M[F]=I.pHYs[2],F++,Q(M,F,R(M,F-13,13)),F+=4),G&&(Q(M,F,8),F+=4,L(M,F,"acTL"),F+=4,Q(M,F,S.frames.length),F+=4,Q(M,F,I.loop!=null?I.loop:0),F+=4,Q(M,F,R(M,F-12,12)),F+=4),S.ctype==3){for(Q(M,F,3*(U=S.plte.length)),F+=4,L(M,F,"PLTE"),F+=4,K=0;K<U;K++){const oe=3*K,be=S.plte[K],ge=255&be,he=be>>>8&255,ke=be>>>16&255;M[F+oe+0]=ge,M[F+oe+1]=he,M[F+oe+2]=ke}if(F+=3*U,Q(M,F,R(M,F-3*U-4,3*U+4)),F+=4,q){for(Q(M,F,U),F+=4,L(M,F,"tRNS"),F+=4,K=0;K<U;K++)M[F+K]=S.plte[K]>>>24&255;F+=U,Q(M,F,R(M,F-U-4,U+4)),F+=4}}let Y=0;for(z=0;z<S.frames.length;z++){var ae=S.frames[z];G&&(Q(M,F,26),F+=4,L(M,F,"fcTL"),F+=4,Q(M,F,Y++),F+=4,Q(M,F,ae.rect.width),F+=4,Q(M,F,ae.rect.height),F+=4,Q(M,F,ae.rect.x),F+=4,Q(M,F,ae.rect.y),F+=4,$(M,F,k[z]),F+=2,$(M,F,1e3),F+=2,M[F]=ae.dispose,F++,M[F]=ae.blend,F++,Q(M,F,R(M,F-30,30)),F+=4);const oe=ae.cimg;Q(M,F,(U=oe.length)+(z==0?0:4)),F+=4;const be=F;L(M,F,z==0?"IDAT":"fdAT"),F+=4,z!=0&&(Q(M,F,Y++),F+=4),M.set(oe,F),F+=U,Q(M,F,R(M,be,F-be)),F+=4}return Q(M,F,0),F+=4,L(M,F,"IEND"),F+=4,Q(M,F,R(M,F-4,4)),F+=4,M.buffer}function d(S,N,O){for(let k=0;k<S.frames.length;k++){const I=S.frames[k];I.rect.width;const R=I.rect.height,Q=new Uint8Array(R*I.bpl+R);I.cimg=m(I.img,R,I.bpp,I.bpl,Q,N,O)}}function A(S,N,O,k,I){const R=I[0],Q=I[1],$=I[2],L=I[3],F=I[4],G=I[5];let X=6,q=8,T=255;for(var U=0;U<S.length;U++){const fe=new Uint8Array(S[U]);for(var K=fe.length,z=0;z<K;z+=4)T&=fe[z+3]}const M=T!=255,H=(function(we,Fe,_e,Ce,ie,me){const Be=[];for(var Le=0;Le<we.length;Le++){const Ye=new Uint8Array(we[Le]),He=new Uint32Array(Ye.buffer);var ve;let it=0,It=0,dt=Fe,Pt=_e,vt=Ce?1:0;if(Le!=0){const tr=me||Ce||Le==1||Be[Le-2].dispose!=0?1:2;let Jt=0,Et=1e9;for(let ur=0;ur<tr;ur++){var $e=new Uint8Array(we[Le-1-ur]);const vr=new Uint32Array(we[Le-1-ur]);let Wt=Fe,Gt=_e,at=-1,rn=-1;for(let et=0;et<_e;et++)for(let an=0;an<Fe;an++)He[Pe=et*Fe+an]!=vr[Pe]&&(an<Wt&&(Wt=an),an>at&&(at=an),et<Gt&&(Gt=et),et>rn&&(rn=et));at==-1&&(Wt=Gt=at=rn=0),ie&&((1&Wt)==1&&Wt--,(1&Gt)==1&&Gt--);const dr=(at-Wt+1)*(rn-Gt+1);dr<Et&&(Et=dr,Jt=ur,it=Wt,It=Gt,dt=at-Wt+1,Pt=rn-Gt+1)}$e=new Uint8Array(we[Le-1-Jt]),Jt==1&&(Be[Le-1].dispose=2),ve=new Uint8Array(dt*Pt*4),r($e,Fe,_e,ve,dt,Pt,-it,-It,0),vt=r(Ye,Fe,_e,ve,dt,Pt,-it,-It,3)?1:0,vt==1?p(Ye,Fe,_e,ve,{x:it,y:It,width:dt,height:Pt}):r(Ye,Fe,_e,ve,dt,Pt,-it,-It,0)}else ve=Ye.slice(0);Be.push({rect:{x:it,y:It,width:dt,height:Pt},img:ve,blend:vt,dispose:0})}if(Ce)for(Le=0;Le<Be.length;Le++){if((Te=Be[Le]).blend==1)continue;const Ye=Te.rect,He=Be[Le-1].rect,it=Math.min(Ye.x,He.x),It=Math.min(Ye.y,He.y),dt={x:it,y:It,width:Math.max(Ye.x+Ye.width,He.x+He.width)-it,height:Math.max(Ye.y+Ye.height,He.y+He.height)-It};Be[Le-1].dispose=1,Le-1!=0&&f(we,Fe,_e,Be,Le-1,dt,ie),f(we,Fe,_e,Be,Le,dt,ie)}let je=0;if(we.length!=1)for(var Pe=0;Pe<Be.length;Pe++){var Te;je+=(Te=Be[Pe]).rect.width*Te.rect.height}return Be})(S,N,O,R,Q,$),Y={},ae=[],oe=[];if(k!=0){const fe=[];for(z=0;z<H.length;z++)fe.push(H[z].img.buffer);const we=(function(ie){let me=0;for(var Be=0;Be<ie.length;Be++)me+=ie[Be].byteLength;const Le=new Uint8Array(me);let ve=0;for(Be=0;Be<ie.length;Be++){const $e=new Uint8Array(ie[Be]),je=$e.length;for(let Pe=0;Pe<je;Pe+=4){let Te=$e[Pe],Ye=$e[Pe+1],He=$e[Pe+2];const it=$e[Pe+3];it==0&&(Te=Ye=He=0),Le[ve+Pe]=Te,Le[ve+Pe+1]=Ye,Le[ve+Pe+2]=He,Le[ve+Pe+3]=it}ve+=je}return Le.buffer})(fe),Fe=b(we,k);for(z=0;z<Fe.plte.length;z++)ae.push(Fe.plte[z].est.rgba);let _e=0;for(z=0;z<H.length;z++){const Ce=(ge=H[z]).img.length;var be=new Uint8Array(Fe.inds.buffer,_e>>2,Ce>>2);oe.push(be);const ie=new Uint8Array(Fe.abuf,_e,Ce);G&&l(ge.img,ge.rect.width,ge.rect.height,ae,ie,be),ge.img.set(ie),_e+=Ce}}else for(U=0;U<H.length;U++){var ge=H[U];const fe=new Uint32Array(ge.img.buffer);var he=ge.rect.width;for(K=fe.length,be=new Uint8Array(K),oe.push(be),z=0;z<K;z++){const we=fe[z];if(z!=0&&we==fe[z-1])be[z]=be[z-1];else if(z>he&&we==fe[z-he])be[z]=be[z-he];else{let Fe=Y[we];if(Fe==null&&(Y[we]=Fe=ae.length,ae.push(we),ae.length>=300))break;be[z]=Fe}}}const ke=ae.length;for(ke<=256&&F==0&&(q=ke<=2?1:ke<=4?2:ke<=16?4:8,q=Math.max(q,L)),U=0;U<H.length;U++){(ge=H[U]).rect.x,ge.rect.y,he=ge.rect.width;const fe=ge.rect.height;let we=ge.img;new Uint32Array(we.buffer);let Fe=4*he,_e=4;if(ke<=256&&F==0){Fe=Math.ceil(q*he/8);var Z=new Uint8Array(Fe*fe);const Ce=oe[U];for(let ie=0;ie<fe;ie++){z=ie*Fe;const me=ie*he;if(q==8)for(var te=0;te<he;te++)Z[z+te]=Ce[me+te];else if(q==4)for(te=0;te<he;te++)Z[z+(te>>1)]|=Ce[me+te]<<4-4*(1&te);else if(q==2)for(te=0;te<he;te++)Z[z+(te>>2)]|=Ce[me+te]<<6-2*(3&te);else if(q==1)for(te=0;te<he;te++)Z[z+(te>>3)]|=Ce[me+te]<<7-1*(7&te)}we=Z,X=3,_e=1}else if(M==0&&H.length==1){Z=new Uint8Array(he*fe*3);const Ce=he*fe;for(z=0;z<Ce;z++){const ie=3*z,me=4*z;Z[ie]=we[me],Z[ie+1]=we[me+1],Z[ie+2]=we[me+2]}we=Z,X=2,_e=3,Fe=3*he}ge.img=we,ge.bpl=Fe,ge.bpp=_e}return{ctype:X,depth:q,plte:ae,frames:H}}function f(S,N,O,k,I,R,Q){const $=Uint8Array,L=Uint32Array,F=new $(S[I-1]),G=new L(S[I-1]),X=I+1<S.length?new $(S[I+1]):null,q=new $(S[I]),T=new L(q.buffer);let U=N,K=O,z=-1,M=-1;for(let Y=0;Y<R.height;Y++)for(let ae=0;ae<R.width;ae++){const oe=R.x+ae,be=R.y+Y,ge=be*N+oe,he=T[ge];he==0||k[I-1].dispose==0&&G[ge]==he&&(X==null||X[4*ge+3]!=0)||(oe<U&&(U=oe),oe>z&&(z=oe),be<K&&(K=be),be>M&&(M=be))}z==-1&&(U=K=z=M=0),Q&&((1&U)==1&&U--,(1&K)==1&&K--),R={x:U,y:K,width:z-U+1,height:M-K+1};const H=k[I];H.rect=R,H.blend=1,H.img=new Uint8Array(R.width*R.height*4),k[I-1].dispose==0?(r(F,N,O,H.img,R.width,R.height,-R.x,-R.y,0),p(q,N,O,H.img,R)):r(q,N,O,H.img,R.width,R.height,-R.x,-R.y,0)}function p(S,N,O,k,I){r(S,N,O,k,I.width,I.height,-I.x,-I.y,2)}function m(S,N,O,k,I,R,Q){const $=[];let L,F=[0,1,2,3,4];R!=-1?F=[R]:(N*k>5e5||O==1)&&(F=[0]),Q&&(L={level:0});const G=yH;for(var X=0;X<F.length;X++){for(let U=0;U<N;U++)g(I,S,U,k,O,F[X]);$.push(G.deflate(I,L))}let q,T=1e9;for(X=0;X<$.length;X++)$[X].length<T&&(q=X,T=$[X].length);return $[q]}function g(S,N,O,k,I,R){const Q=O*k;let $=Q+O;if(S[$]=R,$++,R==0)if(k<500)for(var L=0;L<k;L++)S[$+L]=N[Q+L];else S.set(new Uint8Array(N.buffer,Q,k),$);else if(R==1){for(L=0;L<I;L++)S[$+L]=N[Q+L];for(L=I;L<k;L++)S[$+L]=N[Q+L]-N[Q+L-I]+256&255}else if(O==0){for(L=0;L<I;L++)S[$+L]=N[Q+L];if(R==2)for(L=I;L<k;L++)S[$+L]=N[Q+L];if(R==3)for(L=I;L<k;L++)S[$+L]=N[Q+L]-(N[Q+L-I]>>1)+256&255;if(R==4)for(L=I;L<k;L++)S[$+L]=N[Q+L]-s(N[Q+L-I],0,0)+256&255}else{if(R==2)for(L=0;L<k;L++)S[$+L]=N[Q+L]+256-N[Q+L-k]&255;if(R==3){for(L=0;L<I;L++)S[$+L]=N[Q+L]+256-(N[Q+L-k]>>1)&255;for(L=I;L<k;L++)S[$+L]=N[Q+L]+256-(N[Q+L-k]+N[Q+L-I]>>1)&255}if(R==4){for(L=0;L<I;L++)S[$+L]=N[Q+L]+256-s(0,N[Q+L-k],0)&255;for(L=I;L<k;L++)S[$+L]=N[Q+L]+256-s(N[Q+L-I],N[Q+L-k],N[Q+L-I-k])&255}}}function b(S,N){const O=new Uint8Array(S),k=O.slice(0),I=new Uint32Array(k.buffer),R=v(k,N),Q=R[0],$=R[1],L=O.length,F=new Uint8Array(L>>2);let G;if(O.length<2e7)for(var X=0;X<L;X+=4)G=y(Q,q=O[X]*(1/255),T=O[X+1]*(1/255),U=O[X+2]*(1/255),K=O[X+3]*(1/255)),F[X>>2]=G.ind,I[X>>2]=G.est.rgba;else for(X=0;X<L;X+=4){var q=O[X]*.00392156862745098,T=O[X+1]*(1/255),U=O[X+2]*(1/255),K=O[X+3]*(1/255);for(G=Q;G.left;)G=w(G.est,q,T,U,K)<=0?G.left:G.right;F[X>>2]=G.ind,I[X>>2]=G.est.rgba}return{abuf:k.buffer,inds:F,plte:$}}function v(S,N,O){O==null&&(O=1e-4);const k=new Uint32Array(S.buffer),I={i0:0,i1:S.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=B(S,I.i0,I.i1),I.est=E(I.bst);const R=[I];for(;R.length<N;){let $=0,L=0;for(var Q=0;Q<R.length;Q++)R[Q].est.L>$&&($=R[Q].est.L,L=Q);if($<O)break;const F=R[L],G=j(S,k,F.i0,F.i1,F.est.e,F.est.eMq255);if(F.i0>=G||F.i1<=G){F.est.L=0;continue}const X={i0:F.i0,i1:G,bst:null,est:null,tdst:0,left:null,right:null};X.bst=B(S,X.i0,X.i1),X.est=E(X.bst);const q={i0:G,i1:F.i1,bst:null,est:null,tdst:0,left:null,right:null};for(q.bst={R:[],m:[],N:F.bst.N-X.bst.N},Q=0;Q<16;Q++)q.bst.R[Q]=F.bst.R[Q]-X.bst.R[Q];for(Q=0;Q<4;Q++)q.bst.m[Q]=F.bst.m[Q]-X.bst.m[Q];q.est=E(q.bst),F.left=X,F.right=q,R[L]=X,R.push(q)}for(R.sort((($,L)=>L.bst.N-$.bst.N)),Q=0;Q<R.length;Q++)R[Q].ind=Q;return[I,R]}function y(S,N,O,k,I){if(S.left==null)return S.tdst=(function(X,q,T,U,K){const z=q-X[0],M=T-X[1],H=U-X[2],Y=K-X[3];return z*z+M*M+H*H+Y*Y})(S.est.q,N,O,k,I),S;const R=w(S.est,N,O,k,I);let Q=S.left,$=S.right;R>0&&(Q=S.right,$=S.left);const L=y(Q,N,O,k,I);if(L.tdst<=R*R)return L;const F=y($,N,O,k,I);return F.tdst<L.tdst?F:L}function w(S,N,O,k,I){const{e:R}=S;return R[0]*N+R[1]*O+R[2]*k+R[3]*I-S.eMq}function j(S,N,O,k,I,R){for(k-=4;O<k;){for(;C(S,O,I)<=R;)O+=4;for(;C(S,k,I)>R;)k-=4;if(O>=k)break;const Q=N[O>>2];N[O>>2]=N[k>>2],N[k>>2]=Q,O+=4,k-=4}for(;C(S,O,I)>R;)O-=4;return O+4}function C(S,N,O){return S[N]*O[0]+S[N+1]*O[1]+S[N+2]*O[2]+S[N+3]*O[3]}function B(S,N,O){const k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],R=O-N>>2;for(let Q=N;Q<O;Q+=4){const $=S[Q]*.00392156862745098,L=S[Q+1]*(1/255),F=S[Q+2]*(1/255),G=S[Q+3]*(1/255);I[0]+=$,I[1]+=L,I[2]+=F,I[3]+=G,k[0]+=$*$,k[1]+=$*L,k[2]+=$*F,k[3]+=$*G,k[5]+=L*L,k[6]+=L*F,k[7]+=L*G,k[10]+=F*F,k[11]+=F*G,k[15]+=G*G}return k[4]=k[1],k[8]=k[2],k[9]=k[6],k[12]=k[3],k[13]=k[7],k[14]=k[11],{R:k,m:I,N:R}}function E(S){const{R:N}=S,{m:O}=S,{N:k}=S,I=O[0],R=O[1],Q=O[2],$=O[3],L=k==0?0:1/k,F=[N[0]-I*I*L,N[1]-I*R*L,N[2]-I*Q*L,N[3]-I*$*L,N[4]-R*I*L,N[5]-R*R*L,N[6]-R*Q*L,N[7]-R*$*L,N[8]-Q*I*L,N[9]-Q*R*L,N[10]-Q*Q*L,N[11]-Q*$*L,N[12]-$*I*L,N[13]-$*R*L,N[14]-$*Q*L,N[15]-$*$*L],G=F,X=_;let q=[Math.random(),Math.random(),Math.random(),Math.random()],T=0,U=0;if(k!=0)for(let z=0;z<16&&(q=X.multVec(G,q),U=Math.sqrt(X.dot(q,q)),q=X.sml(1/U,q),!(z!=0&&Math.abs(U-T)<1e-9));z++)T=U;const K=[I*L,R*L,Q*L,$*L];return{Cov:F,q:K,e:q,L:T,eMq255:X.dot(X.sml(255,K),q),eMq:X.dot(q,K),rgba:(Math.round(255*K[3])<<24|Math.round(255*K[2])<<16|Math.round(255*K[1])<<8|Math.round(255*K[0])<<0)>>>0}}var _={multVec:(S,N)=>[S[0]*N[0]+S[1]*N[1]+S[2]*N[2]+S[3]*N[3],S[4]*N[0]+S[5]*N[1]+S[6]*N[2]+S[7]*N[3],S[8]*N[0]+S[9]*N[1]+S[10]*N[2]+S[11]*N[3],S[12]*N[0]+S[13]*N[1]+S[14]*N[2]+S[15]*N[3]],dot:(S,N)=>S[0]*N[0]+S[1]*N[1]+S[2]*N[2]+S[3]*N[3],sml:(S,N)=>[S*N[0],S*N[1],S*N[2],S*N[3]]};il.encode=function(N,O,k,I,R,Q,$){I==null&&(I=0),$==null&&($=!1);const L=A(N,O,k,I,[!1,!1,!1,0,$,!1]);return d(L,-1),u(L,O,k,R,Q)},il.encodeLL=function(N,O,k,I,R,Q,$,L){const F={ctype:0+(I==1?0:2)+(R==0?0:4),depth:Q,frames:[]},G=(I+R)*Q,X=G*O;for(let q=0;q<N.length;q++)F.frames.push({rect:{x:0,y:0,width:O,height:k},img:new Uint8Array(N[q]),blend:0,dispose:1,bpp:Math.ceil(G/8),bpl:Math.ceil(X/8)});return d(F,0,!0),u(F,O,k,$,L)},il.encode.compress=A,il.encode.dither=l,il.quantize=b,il.quantize.getKDtree=v,il.quantize.getNearest=y})();const sE={toArrayBuffer(r,t){const s=r.width,i=r.height,a=s<<2,o=r.getContext("2d").getImageData(0,0,s,i),c=new Uint32Array(o.data.buffer),l=(32*s+31)/32<<2,u=l*i,d=122+u,A=new ArrayBuffer(d),f=new DataView(A),p=1<<20;let m,g,b,v,y=p,w=0,j=0,C=0;function B(S){f.setUint16(j,S,!0),j+=2}function E(S){f.setUint32(j,S,!0),j+=4}function _(S){j+=S}B(19778),E(d),_(4),E(122),E(108),E(s),E(-i>>>0),B(1),B(32),E(3),E(u),E(2835),E(2835),_(8),E(16711680),E(65280),E(255),E(4278190080),E(1466527264),(function S(){for(;w<i&&y>0;){for(v=122+w*l,m=0;m<a;)y--,g=c[C++],b=g>>>24,f.setUint32(v+m,g<<8|b),m+=4;w++}C<c.length?(y=p,setTimeout(S,sE._dly)):t(A)})()},toBlob(r,t){this.toArrayBuffer(r,(s=>{t(new Blob([s],{type:"image/bmp"}))}))},_dly:9};var Ya={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},xH={[Ya.CHROME]:16384,[Ya.FIREFOX]:11180,[Ya.DESKTOP_SAFARI]:16384,[Ya.IE]:8192,[Ya.IOS]:4096,[Ya.ETC]:8192};const a2=typeof window<"u",iE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,I0=a2&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),bH=(a2||iE)&&(I0&&I0.getOriginalSymbol(window,"File")||typeof File<"u"&&File),aE=(a2||iE)&&(I0&&I0.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function o2(r,t,s=Date.now()){return new Promise((i=>{const a=r.split(","),o=a[0].match(/:(.*?);/)[1],c=globalThis.atob(a[1]);let l=c.length;const u=new Uint8Array(l);for(;l--;)u[l]=c.charCodeAt(l);const d=new Blob([u],{type:o});d.name=t,d.lastModified=s,i(d)}))}function oE(r){return new Promise(((t,s)=>{const i=new aE;i.onload=()=>t(i.result),i.onerror=a=>s(a),i.readAsDataURL(r)}))}function lE(r){return new Promise(((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=a=>s(a),i.src=r}))}function Dd(){if(Dd.cachedResult!==void 0)return Dd.cachedResult;let r=Ya.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?r=Ya.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?r=Ya.IOS:/Safari/i.test(t)?r=Ya.DESKTOP_SAFARI:/Firefox/i.test(t)?r=Ya.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(r=Ya.IE),Dd.cachedResult=r,Dd.cachedResult}function cE(r,t){const s=Dd(),i=xH[s];let a=r,o=t,c=a*o;const l=a>o?o/a:a/o;for(;c>i*i;){const u=(i+a)/2,d=(i+o)/2;u<d?(o=d,a=d*l):(o=u*l,a=u),c=a*o}return{width:a,height:o}}function jy(r,t){let s,i;try{if(s=new OffscreenCanvas(r,t),i=s.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{s=document.createElement("canvas"),i=s.getContext("2d")}return s.width=r,s.height=t,[s,i]}function uE(r,t){const{width:s,height:i}=cE(r.width,r.height),[a,o]=jy(s,i);return t&&/jpe?g/.test(t)&&(o.fillStyle="white",o.fillRect(0,0,a.width,a.height)),o.drawImage(r,0,0,a.width,a.height),a}function Vg(){return Vg.cachedResult!==void 0||(Vg.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Vg.cachedResult}function P0(r,t={}){return new Promise((function(s,i){let a,o;var c=function(){try{return o=uE(a,t.fileType||r.type),s([a,o])}catch(u){return i(u)}},l=function(u){try{var d=function(A){try{throw A}catch(f){return i(f)}};try{let A;return oE(r).then((function(f){try{return A=f,lE(A).then((function(p){try{return a=p,(function(){try{return c()}catch(m){return i(m)}})()}catch(m){return d(m)}}),d)}catch(p){return d(p)}}),d)}catch(A){d(A)}}catch(A){return i(A)}};try{if(Vg()||[Ya.DESKTOP_SAFARI,Ya.MOBILE_SAFARI].includes(Dd()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then((function(u){try{return a=u,c()}catch{return l()}}),l)}catch{l()}}))}function T0(r,t,s,i,a=1){return new Promise((function(o,c){let l;if(t==="image/png"){let d,A,f;return d=r.getContext("2d"),{data:A}=d.getImageData(0,0,r.width,r.height),f=il.encode([A.buffer],r.width,r.height,4096*a),l=new Blob([f],{type:t}),l.name=s,l.lastModified=i,u.call(this)}{let d=function(){return u.call(this)};if(t==="image/bmp")return new Promise((A=>sE.toBlob(r,A))).then((function(A){try{return l=A,l.name=s,l.lastModified=i,d.call(this)}catch(f){return c(f)}}).bind(this),c);{let A=function(){return d.call(this)};if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:t,quality:a}).then((function(f){try{return l=f,l.name=s,l.lastModified=i,A.call(this)}catch(p){return c(p)}}).bind(this),c);{let f;return f=r.toDataURL(t,a),o2(f,s,i).then((function(p){try{return l=p,A.call(this)}catch(m){return c(m)}}).bind(this),c)}}}function u(){return o(l)}}))}function Hl(r){r.width=0,r.height=0}function sh(){return new Promise((function(r,t){let s,i,a,o;return sh.cachedResult!==void 0?r(sh.cachedResult):o2("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return s=c,P0(s).then((function(l){try{return i=l[1],T0(i,s.type,s.name,s.lastModified).then((function(u){try{return a=u,Hl(i),P0(a).then((function(d){try{return o=d[0],sh.cachedResult=o.width===1&&o.height===2,r(sh.cachedResult)}catch(A){return t(A)}}),t)}catch(d){return t(d)}}),t)}catch(u){return t(u)}}),t)}catch(l){return t(l)}}),t)}))}function dE(r){return new Promise(((t,s)=>{const i=new aE;i.onload=a=>{const o=new DataView(a.target.result);if(o.getUint16(0,!1)!=65496)return t(-2);const c=o.byteLength;let l=2;for(;l<c;){if(o.getUint16(l+2,!1)<=8)return t(-1);const u=o.getUint16(l,!1);if(l+=2,u==65505){if(o.getUint32(l+=2,!1)!=1165519206)return t(-1);const d=o.getUint16(l+=6,!1)==18761;l+=o.getUint32(l+4,d);const A=o.getUint16(l,d);l+=2;for(let f=0;f<A;f++)if(o.getUint16(l+12*f,d)==274)return t(o.getUint16(l+12*f+8,d))}else{if((65280&u)!=65280)break;l+=o.getUint16(l,!1)}}return t(-1)},i.onerror=a=>s(a),i.readAsArrayBuffer(r)}))}function AE(r,t){const{width:s}=r,{height:i}=r,{maxWidthOrHeight:a}=t;let o,c=r;return isFinite(a)&&(s>a||i>a)&&([c,o]=jy(s,i),s>i?(c.width=a,c.height=i/s*a):(c.width=s/i*a,c.height=a),o.drawImage(r,0,0,c.width,c.height),Hl(r)),c}function hE(r,t){const{width:s}=r,{height:i}=r,[a,o]=jy(s,i);switch(t>4&&t<9?(a.width=i,a.height=s):(a.width=s,a.height=i),t){case 2:o.transform(-1,0,0,1,s,0);break;case 3:o.transform(-1,0,0,-1,s,i);break;case 4:o.transform(1,0,0,-1,0,i);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,i,0);break;case 7:o.transform(0,-1,-1,0,i,s);break;case 8:o.transform(0,-1,1,0,0,s)}return o.drawImage(r,0,0,s,i),Hl(r),a}function l4(r,t,s=0){return new Promise((function(i,a){let o,c,l,u,d,A,f,p,m,g,b,v,y,w,j,C,B,E,_,S;function N(k=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;o+=k,t.onProgress(Math.min(o,100))}function O(k){if(t.signal&&t.signal.aborted)throw t.signal.reason;o=Math.min(Math.max(k,o),100),t.onProgress(o)}return o=s,c=t.maxIteration||10,l=1024*t.maxSizeMB*1024,N(),P0(r,t).then((function(k){try{return[,u]=k,N(),d=AE(u,t),N(),new Promise((function(I,R){var Q;if(!(Q=t.exifOrientation))return dE(r).then((function(L){try{return Q=L,$.call(this)}catch(F){return R(F)}}).bind(this),R);function $(){return I(Q)}return $.call(this)})).then((function(I){try{return A=I,N(),sh().then((function(R){try{return f=R?d:hE(d,A),N(),p=t.initialQuality||1,m=t.fileType||r.type,T0(f,m,r.name,r.lastModified,p).then((function(Q){try{{let L=function(){if(c--&&(j>l||j>y)){let G,X;return G=S?.95*_.width:_.width,X=S?.95*_.height:_.height,[B,E]=jy(G,X),E.drawImage(_,0,0,G,X),p*=m==="image/png"?.85:.95,T0(B,m,r.name,r.lastModified,p).then((function(q){try{return C=q,Hl(_),_=B,j=C.size,O(Math.min(99,Math.floor((w-j)/(w-l)*100))),L}catch(T){return a(T)}}),a)}return[1]},F=function(){return Hl(_),Hl(B),Hl(d),Hl(f),Hl(u),O(100),i(C)};if(g=Q,N(),b=g.size>l,v=g.size>r.size,!b&&!v)return O(100),i(g);var $;return y=r.size,w=g.size,j=w,_=f,S=!t.alwaysKeepResolution&&b,($=(function(G){for(;G;){if(G.then)return void G.then($,a);try{if(G.pop){if(G.length)return G.pop()?F.call(this):G;G=L}else G=G.call(this)}catch(X){return a(X)}}}).bind(this))(L)}}catch(L){return a(L)}}).bind(this),a)}catch(Q){return a(Q)}}).bind(this),a)}catch(R){return a(R)}}).bind(this),a)}catch(I){return a(I)}}).bind(this),a)}))}const vH=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let fb;function wH(r,t){return new Promise(((s,i)=>{fb||(fb=(function(c){const l=[];return l.push(c),URL.createObjectURL(new Blob(l))})(vH));const a=new Worker(fb);a.addEventListener("message",(function(c){if(t.signal&&t.signal.aborted)a.terminate();else if(c.data.progress===void 0){if(c.data.error)return i(new Error(c.data.error)),void a.terminate();s(c.data.file),a.terminate()}else t.onProgress(c.data.progress)})),a.addEventListener("error",i),t.signal&&t.signal.addEventListener("abort",(()=>{i(t.signal.reason),a.terminate()})),a.postMessage({file:r,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function ws(r,t){return new Promise((function(s,i){let a,o,c,l,u,d;if(a={...t},c=0,{onProgress:l}=a,a.maxSizeMB=a.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof a.useWebWorker!="boolean"||a.useWebWorker,delete a.useWebWorker,a.onProgress=m=>{c=m,typeof l=="function"&&l(c)},!(r instanceof Blob||r instanceof bH))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return i(new Error("The file given is not an image"));if(d=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||d)return l4(r,a).then((function(m){try{return o=m,p.call(this)}catch(g){return i(g)}}).bind(this),i);var A=(function(){try{return p.call(this)}catch(m){return i(m)}}).bind(this),f=function(m){try{return l4(r,a).then((function(g){try{return o=g,A()}catch(b){return i(b)}}),i)}catch(g){return i(g)}};try{return a.libURL=a.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",wH(r,a).then((function(m){try{return o=m,A()}catch{return f()}}),f)}catch{f()}function p(){try{o.name=r.name,o.lastModified=r.lastModified}catch{}try{a.preserveExif&&r.type==="image/jpeg"&&(!a.fileType||a.fileType&&a.fileType===r.type)&&(o=nE(r,o))}catch{}return s(o)}}))}ws.getDataUrlFromFile=oE,ws.getFilefromDataUrl=o2,ws.loadImage=lE,ws.drawImageInCanvas=uE,ws.drawFileInCanvas=P0,ws.canvasToFile=T0,ws.getExifOrientation=dE,ws.handleMaxWidthOrHeight=AE,ws.followExifOrientation=hE,ws.cleanupCanvasMemory=Hl,ws.isAutoOrientationInBrowser=sh,ws.approximateBelowMaximumCanvasSizeOfBrowser=cE,ws.copyExifWithoutOrientation=nE,ws.getBrowserName=Dd,ws.version="2.0.2";const jH=async(r,t={})=>{try{const s={maxSizeMB:t.maxSizeMB||1,maxWidthOrHeight:t.maxWidthOrHeight||1920,useWebWorker:!0,fileType:t.fileType||r.type,initialQuality:t.initialQuality||.8,alwaysKeepResolution:t.alwaysKeepResolution||!1,...t},i=await ws(r,s);return console.log(`Image compressed: ${r.size} bytes  ${i.size} bytes`),i}catch(s){return console.error("Image compression error:",s),r}},NH=async(r,t={})=>{try{if(!r)throw new Error("No file provided");const s=t.maxSizeMB||5;if(r.size>s*1024*1024)throw new Error(`File size must be less than ${s}MB`);if(!(t.allowedTypes||["image/jpeg","image/jpg","image/png","image/gif","image/webp"]).includes(r.type))throw new Error("File type not allowed. Only image files are supported.");let a=r;r.type.startsWith("image/")&&(a=await jH(r,{maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.9}));const o=Date.now(),c=Math.random().toString(36).substring(2,15),l=r.name.split(".").pop(),u=r.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_").substring(0,15),d=`id_${o}_${c}_${u}.${l}`,A=Al(hl,`id-documents/${d}`),f={contentType:a.type,customMetadata:{originalName:r.name,uploadedAt:new Date().toISOString(),fileSize:a.size.toString(),documentType:"id_verification",uploadType:"customer_verification"}},p=await ul(A,a,f);return{success:!0,url:await dl(p.ref),filename:d,originalName:r.name,size:a.size,mimeType:a.type,path:`id-documents/${d}`,metadata:p.metadata,documentType:"id_verification"}}catch(s){throw console.error("ID document upload error:",s),new Error(`Upload failed: ${s.message}`)}},SH=()=>{const{user:r}=Fn(),[t,s]=ee.useState(null),[i,a]=ee.useState(!0),[o,c]=ee.useState(!1),[l,u]=ee.useState(null),[d,A]=ee.useState(""),[f,p]=ee.useState(""),[m,g]=ee.useState(null),[b,v]=ee.useState(null),[y,w]=ee.useState(!1),[j,C]=ee.useState({name:"",email:"",phone:"",address:{street:"",city:"",state:"",zipCode:"",country:""}});ee.useEffect(()=>{r&&(B(),E())},[r]);const B=async()=>{try{const k=await fetch("http://localhost:10000/api/users/profile",{credentials:"include"});if(k.ok){const I=await k.json();s(I),C({name:I.name||"",email:I.email||"",phone:I.phone||"",address:I.address||{street:"",city:"",state:"",zipCode:"",country:""}})}}catch(k){console.error("Error fetching profile:",k)}finally{a(!1)}},E=async()=>{try{const k=await fetch("http://localhost:10000/api/users/verification-status",{credentials:"include"});if(k.ok){const I=await k.json();v(I)}}catch(k){console.error("Error fetching verification status:",k)}},_=async()=>{if(!m){A("Please select an ID or Passport image to upload");return}w(!0),A("");try{const k=await NH(m);if(!k.success){A("Failed to upload document to storage");return}const I=await fetch("http://localhost:10000/api/users/upload-verification",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({idDocumentUrl:k.url,originalName:k.originalName,size:k.size})});if(I.ok){const R=await I.json();p("Verification document uploaded successfully! Your request is under review."),g(null),await E(),await B()}else{const R=await I.json();A(R.error||"Failed to upload verification document")}}catch(k){console.error("Error uploading verification:",k),A("Upload failed. Please try again.")}finally{w(!1)}},S=k=>{switch(k){case"verified":return n.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:" Verified"});case"pending":return n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",children:" Under Review"});case"rejected":return n.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:" Rejected"});default:return n.jsx("span",{className:"bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm font-medium",children:"Not Verified"})}},N=async k=>{k.preventDefault(),a(!0),A(""),p("");try{let I=null;if(l){const $=await ws(l,{maxSizeMB:.5,maxWidthOrHeight:800,useWebWorker:!0}),L=ref(storage,`users/${Date.now()}_${l.name}`);await uploadBytes(L,$),I=await getDownloadURL(L)}const R={name:j.name,email:j.email,phone:j.phone,address:j.address,...I&&{profileImage:I}},Q=await fetch("http://localhost:10000/api/users/profile",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(Q.ok){const $=await Q.json();s($),c(!1),u(null),p("Profile updated successfully!")}else{const $=await Q.json();A($.error||"Failed to update profile")}}catch(I){console.error("Error updating profile:",I),A("Network error. Please try again.")}finally{a(!1)}},O=k=>{const{name:I,value:R}=k.target;if(I.startsWith("address.")){const Q=I.split(".")[1];C($=>({...$,address:{...$.address,[Q]:R}}))}else C(Q=>({...Q,[I]:R}))};return r?i?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-black"})}):n.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:n.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[n.jsx("div",{className:"bg-black text-white px-6 py-8",children:n.jsxs("div",{className:"flex items-center space-x-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-600 rounded-full flex items-center justify-center",children:t?.profileImage?n.jsx("img",{src:t.profileImage.startsWith("http")?t.profileImage:`http://localhost:10000${t.profileImage}`,alt:"Profile",className:"w-24 h-24 rounded-full object-cover"}):n.jsx(ic,{className:"w-12 h-12 text-gray-300"})}),o&&n.jsxs("label",{className:"absolute bottom-0 right-0 bg-white text-black p-2 rounded-full hover:bg-gray-100 transition-colors cursor-pointer",children:[n.jsx(D1,{className:"w-4 h-4"}),n.jsx("input",{type:"file",accept:"image/*",onChange:k=>u(k.target.files[0]),className:"hidden"})]})]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:t?.name||"User"}),n.jsx("p",{className:"text-gray-300 capitalize",children:t?.role||"Customer"}),n.jsx("p",{className:"text-gray-300",children:t?.email})]})]})}),n.jsxs("div",{className:"p-6",children:[d&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:d}),f&&n.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:f}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Profile Information"}),n.jsx("button",{onClick:()=>c(!o),className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:o?"Cancel":"Edit Profile"})]}),o?n.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Profile Image"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("img",{src:URL.createObjectURL(l),alt:"New profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsx("button",{type:"button",onClick:()=>u(null),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",name:"name",value:j.name,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:j.email,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),n.jsx("input",{type:"tel",name:"phone",value:j.phone,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),n.jsx("input",{type:"text",name:"address.street",value:j.address.street,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),n.jsx("input",{type:"text",name:"address.city",value:j.address.city,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),n.jsx("input",{type:"text",name:"address.state",value:j.address.state,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),n.jsx("input",{type:"text",name:"address.zipCode",value:j.address.zipCode,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),n.jsx("input",{type:"text",name:"address.country",value:j.address.country,onChange:O,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4",children:[n.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50",children:i?"Saving...":"Save Changes"})]})]}):n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ic,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Full Name"}),n.jsx("p",{className:"font-medium",children:t?.name||"Not provided"})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(vl,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),n.jsx("p",{className:"font-medium",children:t?.email||"Not provided"})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Gu,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),n.jsx("p",{className:"font-medium",children:t?.phone||"Not provided"})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(wl,{className:"w-5 h-5 text-gray-400 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),n.jsx("p",{className:"font-medium",children:t?.address?n.jsxs(n.Fragment,{children:[t.address.street&&n.jsxs(n.Fragment,{children:[t.address.street,n.jsx("br",{})]}),t.address.city&&t.address.state&&`${t.address.city}, ${t.address.state} `,t.address.zipCode,t.address.country&&n.jsxs(n.Fragment,{children:[n.jsx("br",{}),t.address.country]})]}):"Not provided"})]})]})]})})]}),n.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-sm overflow-hidden",children:[n.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Document Verification"}),b&&S(b.verificationStatus)]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Upload your ID or Passport to enable Cash on Delivery payment option"})]}),n.jsxs("div",{className:"p-6",children:[b?.verificationStatus==="verified"?n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-green-600 mr-3",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-green-800",children:"Your account is verified!"}),n.jsx("p",{className:"text-green-700 text-sm",children:"You can now use Cash on Delivery for your orders."})]})]})}):b?.verificationStatus==="pending"?n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-yellow-600 mr-3",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-yellow-800",children:"Verification in progress"}),n.jsx("p",{className:"text-yellow-700 text-sm",children:"Your document is under review. This usually takes 24-48 hours."}),b.submittedAt&&n.jsxs("p",{className:"text-yellow-700 text-xs mt-1",children:["Submitted: ",new Date(b.submittedAt).toLocaleDateString()]})]})]})}):b?.verificationStatus==="rejected"?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-red-600 mr-3",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-800",children:"Verification rejected"}),n.jsx("p",{className:"text-red-700 text-sm",children:"Please upload a clear photo of your valid ID or Passport."})]})]})}):null,(!b?.verificationStatus||b?.verificationStatus==="unverified"||b?.verificationStatus==="rejected")&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload ID or Passport Image"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:k=>g(k.target.files[0]),className:`block w-full text-sm text-gray-500\r
                          file:mr-4 file:py-2 file:px-4\r
                          file:rounded-lg file:border-0\r
                          file:text-sm file:font-medium\r
                          file:bg-black file:text-white\r
                          hover:file:bg-gray-800`}),n.jsx("button",{onClick:_,disabled:!m||y,className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Uploading...":"Upload"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Accepted formats: JPG, PNG, GIF. Maximum size: 5MB"})]}),m&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview:"}),n.jsx("img",{src:URL.createObjectURL(m),alt:"Document preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-200"})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("p",{className:"text-blue-800 text-sm",children:[n.jsx("strong",{children:"Important:"})," Please ensure your document is clear and all details are visible. Once uploaded, your document will be locked until verification is complete."]})})]})]})]})]})})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"text-center",children:n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please log in to view your profile"})})})},CH="data:image/png;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGNbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAITwAAAV8AAgAAAAEAAAG1AAAGmgAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAAw2lwcnAAAACdaXBjbwAAABRpc3BlAAAAAAAAAQAAAAEAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAgAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQBBYYHAAAIAW1kYXQSAAoGGB3//8JUMo0NEBAAAEAA3Zi2xeiNW1VrWMZmcmAH/0vkDa5nJLN/LOrCZkY8oib8XG+p/6x416j0TK61Hg0MpvGquL5Fv8e97yGgQ/bULG/VQ+9K8BNlWdlCDbaNNfI/44o5Bb/SiiDzk4kbYFxJHIP6y8x+Qvx++CtEi+BxZKwClqMPv4vlh/lF4qynoFz1R9HFLjPesESo36AAq8B54/OHp+eFn8TDdHpMmrnk4Sdfz////9pmnxzYAA94DaawTj9fmG+8tuYoAWRMG+SSWRYv288yX5XdtAyqecWUAAXswQzXGysz/wGA1hxp2y2kypz5H+K5/+08ztWfWaYIAAFOPyUw4ivumBZgAAmdvn5JmMzMI69mlemAXv9Br4mV4kMOCYzrUoIU8nbndpllj5G1Hf///+seAAHcwWdp2+jRDZ3Ttt+H8B9ell84ANRHUYTeBtyfh514qTL/oAK63Mq0BTs2ZINGE4wHYrJoVnqw5ymYKtGBJ8B48jSaGKzkUvsEVoAwAHLrqIyCTEnXkWDBEUSqDiwEVmzwuhXkTP5OZil/Lpyj5e2ADGD4DU/6JuHiw1u2OlvuEhNiz8zOsKnDMfKa1XnK2s0Teq5Usl1PMOeQOWvs98jpRgiP3x8fYc0wPQBa0Vd3+senst+lA7smdAzwhwM8SI+msCn0Yr2/a6PppqXEX7eFfdzf7SlRzsYvS2uqwUjgaVjTgR4dTIC6++A4pp+B3Y29H3RtV5XU5aWlBEhFkb0dj6VJz6Lu8raFKAPwL+dUuWd3y0GvpaR4U38apcBp0d/eKO8CrAPaJZ/5DAbydN2OrlDPmA3If55GZTdtZ4Hz1hmszvl1C4qG8tb4MdVYKkabH4op2RS9Sduzf9zKRoUk3/fc3jbNvhHpVaPoIFTO7JEvl4a9l0D1muhB6eBCmNMRAuhUGeubHm3cjAJUVe1mJYky24pBjWU8BNNMuRms6rBGE5YgcGxi29F1+vEwOXU4ogXkuwPa/UEjSip7eQOJFFP2PclUwzkRy83GbPlCSekzvSfBrQV2LF2VRbRg3X8ZcVujAZO4jer22K1P1lGcS9pzqzwOrJOvb+OHtVToWIAGDEhSEvgV5teSIb8USljwrbnYn7am8O1MmceL2qjBk8HRo+6LBZBf+cAIP0naP6IOKqZi7T/y35LfNl+BXxM3ERL7B7ATa6h/7UdcKL7A6QS6qcaUBuOxusALFOkeclzihRtRDeGBDaThYjv/Y+OnjpZNhwzuvq/48XChS8YmegRW0Dl7GRislwDusiXZdOfPPIIWbdTpMF8wObaU2MQl4MfE6M0L7lNDhyUfK8edHD6+FSB4XpwqkucdaN/Ba8haPG3RuiTdzsHXR+m2cCvKyBkbym+7iIcLrr6QZYIXz0kNRzR0qqiHXBllrDcbhwAz8DjTDtjQ6MssJXy3/KhUCmpjRVt8tethxEYzIBPXhY/GsxCSV/UD4hJCyo497NbYhuZhe3WkD/RY2PqZeAN/G84TY+TdRHkn8AG7c4Fh4Ma/ROA9nBwGTSNAFvbduN1DPheU99N+Gz3ANbj0NmuVk4Ds3lRE4G3suxm44ZYtz4kAF7QPiVREwonhzURJ/nnE+jnBfnD6T3v+XLcfxbQMd09hTlDadS/Sh3OztUJylNyw9yefDuUJM5JjBhzzGghNIzIcWOWd1J/f1wWoGm3s41WLouEemPdZ6QnKos82a0MtZoX5FSgXdIiOfiyhoaAW0Q2lw46Rv0cAQYeDYfgg+5agOHT+3oMCj8sTd3sn1BcDwRxTbCIDM3gIPz3dFkUhjy/2h9QNIlSukS0m8qCIkPp2oIxWGcw3J59KC3ENEkSTbdTOG4471IKqfc5uruwQW0X5EvxcebYqNIK3U8PnuYqLQ8AZdwI2ssHDC7cDGEkXgDOYb6VDGHRVBveGRiRV2FdT3WOLciz/+QbxL/96+WD/jaT1Nf0r5asAYuEqUoqGX2eT6wvWUQYd+05RIqrx210LLY4ND67Ei0ENs5bbDDZTmH9D7x0SYABZuUX1j0L6PW2u878saZjahZQ/3cVa5lfDQlowtgCdkAib8mW8pN/rz6OK1mja68iLMtebT3cKgODmVLU+yUwFEaaDqVkQdCnJWZgF8sgfThMwSCUc6CN6QSyGeWK+ollGKHB5GeyjTgLKUzVtn5N9g5qECr0nYdqw8AReh7TXXjQ28rrDzu7S0KvMaOKmf60+8nkL0w7/V3gj17NOY+XAEgAKBxgd///CAIAy0QIRcAFFFFEgggDCcPS+3v0QllAQdVAFq2WKLpkNhmF9O1JtKt6J+TCFcsB8fkbiS2DaBOrxx8S3L8UeykSVY/IdjwWVgZEBEQQJxpbdn3ekEF/34AbJFc8Kwbz/fXRZoW7JOj8cx/uT9Up45byl5SSTSe0sEnhYGItdZW3ZyDgI5/UgLKkoIMdhalmnig1D1qsZhgUoilR4480K9Wixi1MXWUROvaXyzPwfx0ygBQBdAQ75i984l1ZsZTsqGHHLtz7BnSpOsU/C67ZczI0BBZu9UEvpFGG1pAzJ2J+p7hO31ajTANPM4lujmn/nIF5VlPQifzyySdBzSnm6DzafEtR1EOu065EVQv6XzO3yru8EGyteGVT1H8NKWN9pxKZ4Su+xebVi2+6gPGhssHLBPbMBNFWW44FxdmjHmbvzZyoBQtyTXv1XqIYcUfz7liScuShA",BH="data:image/png;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGNbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAITwAAArsAAgAAAAEAAAG1AAAGmgAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAAw2lwcnAAAACdaXBjbwAAABRpc3BlAAAAAAAAAQAAAAEAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAgAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQBBYYHAAAJXW1kYXQSAAoGGB3//8JUMo0NEBAAAEAA3Zi2xeiNW1VrWMZmcmAH/0vkDa5nJLN/LOrCZkY8oib8XG+p/6x416j0TK61Hg0MpvGquL5Fv8e97yGgQ/bULG/VQ+9K8BNlWdlCDbaNNfI/44o5Bb/SiiDzk4kbYFxJHIP6y8x+Qvx++CtEi+BxZKwClqMPv4vlh/lF4qynoFz1R9HFLjPesESo36AAq8B54/OHp+eFn8TDdHpMmrnk4Sdfz////9pmnxzYAA94DaawTj9fmG+8tuYoAWRMG+SSWRYv288yX5XdtAyqecWUAAXswQzXGysz/wGA1hxp2y2kypz5H+K5/+08ztWfWaYIAAFOPyUw4ivumBZgAAmdvn5JmMzMI69mlemAXv9Br4mV4kMOCYzrUoIU8nbndpllj5G1Hf///+seAAHcwWdp2+jRDZ3Ttt+H8B9ell84ANRHUYTeBtyfh514qTL/oAK63Mq0BTs2ZINGE4wHYrJoVnqw5ymYKtGBJ8B48jSaGKzkUvsEVoAwAHLrqIyCTEnXkWDBEUSqDiwEVmzwuhXkTP5OZil/Lpyj5e2ADGD4DU/6JuHiw1u2OlvuEhNiz8zOsKnDMfKa1XnK2s0Teq5Usl1PMOeQOWvs98jpRgiP3x8fYc0wPQBa0Vd3+senst+lA7smdAzwhwM8SI+msCn0Yr2/a6PppqXEX7eFfdzf7SlRzsYvS2uqwUjgaVjTgR4dTIC6++A4pp+B3Y29H3RtV5XU5aWlBEhFkb0dj6VJz6Lu8raFKAPwL+dUuWd3y0GvpaR4U38apcBp0d/eKO8CrAPaJZ/5DAbydN2OrlDPmA3If55GZTdtZ4Hz1hmszvl1C4qG8tb4MdVYKkabH4op2RS9Sduzf9zKRoUk3/fc3jbNvhHpVaPoIFTO7JEvl4a9l0D1muhB6eBCmNMRAuhUGeubHm3cjAJUVe1mJYky24pBjWU8BNNMuRms6rBGE5YgcGxi29F1+vEwOXU4ogXkuwPa/UEjSip7eQOJFFP2PclUwzkRy83GbPlCSekzvSfBrQV2LF2VRbRg3X8ZcVujAZO4jer22K1P1lGcS9pzqzwOrJOvb+OHtVToWIAGDEhSEvgV5teSIb8USljwrbnYn7am8O1MmceL2qjBk8HRo+6LBZBf+cAIP0naP6IOKqZi7T/y35LfNl+BXxM3ERL7B7ATa6h/7UdcKL7A6QS6qcaUBuOxusALFOkeclzihRtRDeGBDaThYjv/Y+OnjpZNhwzuvq/48XChS8YmegRW0Dl7GRislwDusiXZdOfPPIIWbdTpMF8wObaU2MQl4MfE6M0L7lNDhyUfK8edHD6+FSB4XpwqkucdaN/Ba8haPG3RuiTdzsHXR+m2cCvKyBkbym+7iIcLrr6QZYIXz0kNRzR0qqiHXBllrDcbhwAz8DjTDtjQ6MssJXy3/KhUCmpjRVt8tethxEYzIBPXhY/GsxCSV/UD4hJCyo497NbYhuZhe3WkD/RY2PqZeAN/G84TY+TdRHkn8AG7c4Fh4Ma/ROA9nBwGTSNAFvbduN1DPheU99N+Gz3ANbj0NmuVk4Ds3lRE4G3suxm44ZYtz4kAF7QPiVREwonhzURJ/nnE+jnBfnD6T3v+XLcfxbQMd09hTlDadS/Sh3OztUJylNyw9yefDuUJM5JjBhzzGghNIzIcWOWd1J/f1wWoGm3s41WLouEemPdZ6QnKos82a0MtZoX5FSgXdIiOfiyhoaAW0Q2lw46Rv0cAQYeDYfgg+5agOHT+3oMCj8sTd3sn1BcDwRxTbCIDM3gIPz3dFkUhjy/2h9QNIlSukS0m8qCIkPp2oIxWGcw3J59KC3ENEkSTbdTOG4471IKqfc5uruwQW0X5EvxcebYqNIK3U8PnuYqLQ8AZdwI2ssHDC7cDGEkXgDOYb6VDGHRVBveGRiRV2FdT3WOLciz/+QbxL/96+WD/jaT1Nf0r5asAYuEqUoqGX2eT6wvWUQYd+05RIqrx210LLY4ND67Ei0ENs5bbDDZTmH9D7x0SYABZuUX1j0L6PW2u878saZjahZQ/3cVa5lfDQlowtgCdkAib8mW8pN/rz6OK1mja68iLMtebT3cKgODmVLU+yUwFEaaDqVkQdCnJWZgF8sgfThMwSCUc6CN6QSyGeWK+ollGKHB5GeyjTgLKUzVtn5N9g5qECr0nYdqw8AReh7TXXjQ28rrDzu7S0KvMaOKmf60+8nkL0w7/V3gj17NOY+XAEgAKBxgd///CAIAyrQURcAFFFFEgggDdK/p6yJP0BatKhUDrO8OemK4E8kBh82f1uz4y0q8NgrS4AnUAB0Q7DufkWZR3Qs9KxQaMkgBHnfyf6ol8ei1tK2Mkbvwhdd4DholEw9a34nvkf2dTcmcDBmmBdLwL/6no6+gxAQYJAZqcAXxwa8Vqdkmt/dO0ufNSl4Kha3hgOhxyOky9ZyBzishyH+yL5vXZlADFLF0lQa0PLSB1suIGCUnzBvqEi0hYPMnFD4mr2iT0YlVRsaHrSY5UrFrACWhkpxOpTG40Mo8JgFaWvkNX/yGoQhJq4KFBGybjYQfIaJgUykKQmlayaZZeeWvpkROX0ACDV4ooLOzw+HeGdVM1jDaLllzOUsTQNX+nkHXMkmtJQK4kESSdpM2ucUebcFxu3KfAPypvX7BwAAACbUMYOn4dQN48QqHmP1U7Mnk7uAQyz2kC6zqxSSK5xWCYk1L5VgqncHewxSxmt88r01GW7XdRDG1eIQWGNhKkyQpzm38rq4QD9pigjYNJ5oCW8u2ZBJM9YvHUp/AoqWYNmCHtTycQXTG+r5y3P8F88FM6AH2od0y3NVgS0cmaz73SkMMp7fQQHC9xwcvv/5qoHtxPYcPddOpfoKcPvsqFNrV2iNg+kzNGmEqSRjLhHnQrzspk1SYQVZRsbw6FXwrhR87AZmmpP07vzfVNKRaJr+1iWlpAwDi5ItiGPnOThbxLiFixNh3GxuAM0THdggBwsGeaba4aoAe8ZtqfUvo10+eR+iLL2xY4PPwDfbmf/8yiGAFSkG7w0Uc/xy60zJIdboFapWwXwC/cukAJe2D77gu6QVUhgThoIW2muvJxM0/FNpTt1PlTpEYNVw2kEREM+cKGgW4ZIhZtq9qsXiWvzEa4zXbsd94OdChwfCTTCsGcKiT27fOg",kH="data:image/png;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGNbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAITwAAAgIAAgAAAAEAAAG1AAAGmgAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAAw2lwcnAAAACdaXBjbwAAABRpc3BlAAAAAAAAAQAAAAEAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAgAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQBBYYHAAAIpG1kYXQSAAoGGB3//8JUMo0NEBAAAEAA3Zi2xeiNW1VrWMZmcmAH/0vkDa5nJLN/LOrCZkY8oib8XG+p/6x416j0TK61Hg0MpvGquL5Fv8e97yGgQ/bULG/VQ+9K8BNlWdlCDbaNNfI/44o5Bb/SiiDzk4kbYFxJHIP6y8x+Qvx++CtEi+BxZKwClqMPv4vlh/lF4qynoFz1R9HFLjPesESo36AAq8B54/OHp+eFn8TDdHpMmrnk4Sdfz////9pmnxzYAA94DaawTj9fmG+8tuYoAWRMG+SSWRYv288yX5XdtAyqecWUAAXswQzXGysz/wGA1hxp2y2kypz5H+K5/+08ztWfWaYIAAFOPyUw4ivumBZgAAmdvn5JmMzMI69mlemAXv9Br4mV4kMOCYzrUoIU8nbndpllj5G1Hf///+seAAHcwWdp2+jRDZ3Ttt+H8B9ell84ANRHUYTeBtyfh514qTL/oAK63Mq0BTs2ZINGE4wHYrJoVnqw5ymYKtGBJ8B48jSaGKzkUvsEVoAwAHLrqIyCTEnXkWDBEUSqDiwEVmzwuhXkTP5OZil/Lpyj5e2ADGD4DU/6JuHiw1u2OlvuEhNiz8zOsKnDMfKa1XnK2s0Teq5Usl1PMOeQOWvs98jpRgiP3x8fYc0wPQBa0Vd3+senst+lA7smdAzwhwM8SI+msCn0Yr2/a6PppqXEX7eFfdzf7SlRzsYvS2uqwUjgaVjTgR4dTIC6++A4pp+B3Y29H3RtV5XU5aWlBEhFkb0dj6VJz6Lu8raFKAPwL+dUuWd3y0GvpaR4U38apcBp0d/eKO8CrAPaJZ/5DAbydN2OrlDPmA3If55GZTdtZ4Hz1hmszvl1C4qG8tb4MdVYKkabH4op2RS9Sduzf9zKRoUk3/fc3jbNvhHpVaPoIFTO7JEvl4a9l0D1muhB6eBCmNMRAuhUGeubHm3cjAJUVe1mJYky24pBjWU8BNNMuRms6rBGE5YgcGxi29F1+vEwOXU4ogXkuwPa/UEjSip7eQOJFFP2PclUwzkRy83GbPlCSekzvSfBrQV2LF2VRbRg3X8ZcVujAZO4jer22K1P1lGcS9pzqzwOrJOvb+OHtVToWIAGDEhSEvgV5teSIb8USljwrbnYn7am8O1MmceL2qjBk8HRo+6LBZBf+cAIP0naP6IOKqZi7T/y35LfNl+BXxM3ERL7B7ATa6h/7UdcKL7A6QS6qcaUBuOxusALFOkeclzihRtRDeGBDaThYjv/Y+OnjpZNhwzuvq/48XChS8YmegRW0Dl7GRislwDusiXZdOfPPIIWbdTpMF8wObaU2MQl4MfE6M0L7lNDhyUfK8edHD6+FSB4XpwqkucdaN/Ba8haPG3RuiTdzsHXR+m2cCvKyBkbym+7iIcLrr6QZYIXz0kNRzR0qqiHXBllrDcbhwAz8DjTDtjQ6MssJXy3/KhUCmpjRVt8tethxEYzIBPXhY/GsxCSV/UD4hJCyo497NbYhuZhe3WkD/RY2PqZeAN/G84TY+TdRHkn8AG7c4Fh4Ma/ROA9nBwGTSNAFvbduN1DPheU99N+Gz3ANbj0NmuVk4Ds3lRE4G3suxm44ZYtz4kAF7QPiVREwonhzURJ/nnE+jnBfnD6T3v+XLcfxbQMd09hTlDadS/Sh3OztUJylNyw9yefDuUJM5JjBhzzGghNIzIcWOWd1J/f1wWoGm3s41WLouEemPdZ6QnKos82a0MtZoX5FSgXdIiOfiyhoaAW0Q2lw46Rv0cAQYeDYfgg+5agOHT+3oMCj8sTd3sn1BcDwRxTbCIDM3gIPz3dFkUhjy/2h9QNIlSukS0m8qCIkPp2oIxWGcw3J59KC3ENEkSTbdTOG4471IKqfc5uruwQW0X5EvxcebYqNIK3U8PnuYqLQ8AZdwI2ssHDC7cDGEkXgDOYb6VDGHRVBveGRiRV2FdT3WOLciz/+QbxL/96+WD/jaT1Nf0r5asAYuEqUoqGX2eT6wvWUQYd+05RIqrx210LLY4ND67Ei0ENs5bbDDZTmH9D7x0SYABZuUX1j0L6PW2u878saZjahZQ/3cVa5lfDQlowtgCdkAib8mW8pN/rz6OK1mja68iLMtebT3cKgODmVLU+yUwFEaaDqVkQdCnJWZgF8sgfThMwSCUc6CN6QSyGeWK+ollGKHB5GeyjTgLKUzVtn5N9g5qECr0nYdqw8AReh7TXXjQ28rrDzu7S0KvMaOKmf60+8nkL0w7/V3gj17NOY+XAEgAKBxgd///CAIAy9AMRcAFFFFEgggDdK/p7kt6OfHFQ577VU23esHQITcCYIwNIaqRi2Zmmmz/K9Nq8/i4XBsJcdb63bZyu12BWP2BgIMM+O8sA/lvlS6eMd52JKb7jouJrgZCy1ogDUPkSCQ+XAAYNCTLAVbW2wE8BXLXWH+F1pnNMUXpkDfn4b/9kXuNiAtvPve34fiMJEpYJqYD7CGE2bWyEWUEvxl6pKyoUhdQpPCUFA094A1LIZpClT3g8+QeKvGKNfuYnA+p3ZJK/61a7JMHbI5SOdYkRH7b+ybaIIvTDKw+3GTEspEp8KQWX1D08MR093rVcHxpzF8K6Yn5I3eyoUWMKMDhfVFthBOaS0GjZdIJ9kqLgSFEhKCKTPs6IOmp77d5oFCof7dZsz8eUCAAdghEf36s0tqtVOtAxeoSkELJqmwZJjaG+G12Q/BZha1Mc8quxpuopkg8uEz3qk4tv3XI1sgvOzQakXm1JUyapUKgSI8kBDlrCAZqu0/3naB1bHB5q3JdPGI3hv7qCOM87QYvbHolQHeu3WF2P3SmJ+CVDoxTxeuLHbHrxbqRG5sSbnL/MxmYWz/7GXFwvJaWsrqw1QkgT9luKK6BIjQuqZ5MQnoHlZqnj9j1btQElnB4kGfKPlvjhz25zj3fDpSdNfoheWr1Cv3GSL/P4gA==",_H="data:image/png;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGNbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAITwAAArIAAgAAAAEAAAG1AAAGmgAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAAw2lwcnAAAACdaXBjbwAAABRpc3BlAAAAAAAAAQAAAAEAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAgAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQBBYYHAAAJVG1kYXQSAAoGGB3//8JUMo0NEBAAAEAA3Zi2xeiNW1VrWMZmcmAH/0vkDa5nJLN/LOrCZkY8oib8XG+p/6x416j0TK61Hg0MpvGquL5Fv8e97yGgQ/bULG/VQ+9K8BNlWdlCDbaNNfI/44o5Bb/SiiDzk4kbYFxJHIP6y8x+Qvx++CtEi+BxZKwClqMPv4vlh/lF4qynoFz1R9HFLjPesESo36AAq8B54/OHp+eFn8TDdHpMmrnk4Sdfz////9pmnxzYAA94DaawTj9fmG+8tuYoAWRMG+SSWRYv288yX5XdtAyqecWUAAXswQzXGysz/wGA1hxp2y2kypz5H+K5/+08ztWfWaYIAAFOPyUw4ivumBZgAAmdvn5JmMzMI69mlemAXv9Br4mV4kMOCYzrUoIU8nbndpllj5G1Hf///+seAAHcwWdp2+jRDZ3Ttt+H8B9ell84ANRHUYTeBtyfh514qTL/oAK63Mq0BTs2ZINGE4wHYrJoVnqw5ymYKtGBJ8B48jSaGKzkUvsEVoAwAHLrqIyCTEnXkWDBEUSqDiwEVmzwuhXkTP5OZil/Lpyj5e2ADGD4DU/6JuHiw1u2OlvuEhNiz8zOsKnDMfKa1XnK2s0Teq5Usl1PMOeQOWvs98jpRgiP3x8fYc0wPQBa0Vd3+senst+lA7smdAzwhwM8SI+msCn0Yr2/a6PppqXEX7eFfdzf7SlRzsYvS2uqwUjgaVjTgR4dTIC6++A4pp+B3Y29H3RtV5XU5aWlBEhFkb0dj6VJz6Lu8raFKAPwL+dUuWd3y0GvpaR4U38apcBp0d/eKO8CrAPaJZ/5DAbydN2OrlDPmA3If55GZTdtZ4Hz1hmszvl1C4qG8tb4MdVYKkabH4op2RS9Sduzf9zKRoUk3/fc3jbNvhHpVaPoIFTO7JEvl4a9l0D1muhB6eBCmNMRAuhUGeubHm3cjAJUVe1mJYky24pBjWU8BNNMuRms6rBGE5YgcGxi29F1+vEwOXU4ogXkuwPa/UEjSip7eQOJFFP2PclUwzkRy83GbPlCSekzvSfBrQV2LF2VRbRg3X8ZcVujAZO4jer22K1P1lGcS9pzqzwOrJOvb+OHtVToWIAGDEhSEvgV5teSIb8USljwrbnYn7am8O1MmceL2qjBk8HRo+6LBZBf+cAIP0naP6IOKqZi7T/y35LfNl+BXxM3ERL7B7ATa6h/7UdcKL7A6QS6qcaUBuOxusALFOkeclzihRtRDeGBDaThYjv/Y+OnjpZNhwzuvq/48XChS8YmegRW0Dl7GRislwDusiXZdOfPPIIWbdTpMF8wObaU2MQl4MfE6M0L7lNDhyUfK8edHD6+FSB4XpwqkucdaN/Ba8haPG3RuiTdzsHXR+m2cCvKyBkbym+7iIcLrr6QZYIXz0kNRzR0qqiHXBllrDcbhwAz8DjTDtjQ6MssJXy3/KhUCmpjRVt8tethxEYzIBPXhY/GsxCSV/UD4hJCyo497NbYhuZhe3WkD/RY2PqZeAN/G84TY+TdRHkn8AG7c4Fh4Ma/ROA9nBwGTSNAFvbduN1DPheU99N+Gz3ANbj0NmuVk4Ds3lRE4G3suxm44ZYtz4kAF7QPiVREwonhzURJ/nnE+jnBfnD6T3v+XLcfxbQMd09hTlDadS/Sh3OztUJylNyw9yefDuUJM5JjBhzzGghNIzIcWOWd1J/f1wWoGm3s41WLouEemPdZ6QnKos82a0MtZoX5FSgXdIiOfiyhoaAW0Q2lw46Rv0cAQYeDYfgg+5agOHT+3oMCj8sTd3sn1BcDwRxTbCIDM3gIPz3dFkUhjy/2h9QNIlSukS0m8qCIkPp2oIxWGcw3J59KC3ENEkSTbdTOG4471IKqfc5uruwQW0X5EvxcebYqNIK3U8PnuYqLQ8AZdwI2ssHDC7cDGEkXgDOYb6VDGHRVBveGRiRV2FdT3WOLciz/+QbxL/96+WD/jaT1Nf0r5asAYuEqUoqGX2eT6wvWUQYd+05RIqrx210LLY4ND67Ei0ENs5bbDDZTmH9D7x0SYABZuUX1j0L6PW2u878saZjahZQ/3cVa5lfDQlowtgCdkAib8mW8pN/rz6OK1mja68iLMtebT3cKgODmVLU+yUwFEaaDqVkQdCnJWZgF8sgfThMwSCUc6CN6QSyGeWK+ollGKHB5GeyjTgLKUzVtn5N9g5qECr0nYdqw8AReh7TXXjQ28rrDzu7S0KvMaOKmf60+8nkL0w7/V3gj17NOY+XAEgAKBxgd///CAIAypAURcAFFFFEgggDdK/p8qpczqgG/MdaJ0Z73psRKev/IIMjMfw//nx4BtxPQtMWtNfuYOdPayZnMguvvYKaOaVFzr7TNe3VpyXthd+PlLiX31rP7BFOOuA6IViyAHkoI9LYQqmiYK/N4Rk3gTR5DK295GwsvRIDNTgC8cvO9N9QWABVVZ5td7h0B7WtdsZqIf/bvlU+haete2S7//ZF7jYgD6TjrxtBQokv25pUZIdbvvOOk2NZivOmciINrf9XLwa+MFviInzB5Eiw3THDDZrCU666t5Xo5Qing81MAjLGH5Seep78KK4AMLeJ8S+XSBADIRdw/yM3ZtmNbPvNNweA5AUpklYLob1G40S9sQzhMYxsZ3tbLbC9epn5d9SUn+uIkgSJE1swNCDBP9v5ddpzbJUDvcW4YZbeSfkoas3T39TFV0E51XfBhU3+OQM2XevSH66v3jRhCW4fQY7mvRk5E1M2QhaPwUmsuYUZjhnUfJUVcA/38PMx0Y1VT5abQ2MgF4CjovDY/in8+6LRVE++K4fqU/MGRvo7I16kb260IfM1IFv3PzoGpO1KZ7gKcwS4boE+A+S/G5Ur9CAvBqHYmgb0wzPh3THgGoteL0kg9sj1AgpJh18ENS5zoBltIS1EMxY0X2Kz7S2ZFogpcBJsGkLDDgWhSMVL8A2mNIu1QV+E6Ri3Pa2+94FN+a+WNP5dO9/WQzJRHrcGuy6SFfN6MztJ+H2nUOYkQsU4jyfQmSzAQs3fPYAPk5+geuCF2NBnzdoAeRInPPwNqelCCK7SPVOGeIrxbws4L5WcA9jEkTv/G/vvr6F8U8rCh7gRg8J7MRU33e0EennLaCtntoTaNLIFFsnAYKw93nh1fLRl3Q1qiYKwym0OrIClROcBzwx9qaexy",EH="data:image/png;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGNbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAITwAAAhYAAgAAAAEAAAG1AAAGmgAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAAw2lwcnAAAACdaXBjbwAAABRpc3BlAAAAAAAAAQAAAAEAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAgAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQBBYYHAAAIuG1kYXQSAAoGGB3//8JUMo0NEBAAAEAA3Zi2xeiNW1VrWMZmcmAH/0vkDa5nJLN/LOrCZkY8oib8XG+p/6x416j0TK61Hg0MpvGquL5Fv8e97yGgQ/bULG/VQ+9K8BNlWdlCDbaNNfI/44o5Bb/SiiDzk4kbYFxJHIP6y8x+Qvx++CtEi+BxZKwClqMPv4vlh/lF4qynoFz1R9HFLjPesESo36AAq8B54/OHp+eFn8TDdHpMmrnk4Sdfz////9pmnxzYAA94DaawTj9fmG+8tuYoAWRMG+SSWRYv288yX5XdtAyqecWUAAXswQzXGysz/wGA1hxp2y2kypz5H+K5/+08ztWfWaYIAAFOPyUw4ivumBZgAAmdvn5JmMzMI69mlemAXv9Br4mV4kMOCYzrUoIU8nbndpllj5G1Hf///+seAAHcwWdp2+jRDZ3Ttt+H8B9ell84ANRHUYTeBtyfh514qTL/oAK63Mq0BTs2ZINGE4wHYrJoVnqw5ymYKtGBJ8B48jSaGKzkUvsEVoAwAHLrqIyCTEnXkWDBEUSqDiwEVmzwuhXkTP5OZil/Lpyj5e2ADGD4DU/6JuHiw1u2OlvuEhNiz8zOsKnDMfKa1XnK2s0Teq5Usl1PMOeQOWvs98jpRgiP3x8fYc0wPQBa0Vd3+senst+lA7smdAzwhwM8SI+msCn0Yr2/a6PppqXEX7eFfdzf7SlRzsYvS2uqwUjgaVjTgR4dTIC6++A4pp+B3Y29H3RtV5XU5aWlBEhFkb0dj6VJz6Lu8raFKAPwL+dUuWd3y0GvpaR4U38apcBp0d/eKO8CrAPaJZ/5DAbydN2OrlDPmA3If55GZTdtZ4Hz1hmszvl1C4qG8tb4MdVYKkabH4op2RS9Sduzf9zKRoUk3/fc3jbNvhHpVaPoIFTO7JEvl4a9l0D1muhB6eBCmNMRAuhUGeubHm3cjAJUVe1mJYky24pBjWU8BNNMuRms6rBGE5YgcGxi29F1+vEwOXU4ogXkuwPa/UEjSip7eQOJFFP2PclUwzkRy83GbPlCSekzvSfBrQV2LF2VRbRg3X8ZcVujAZO4jer22K1P1lGcS9pzqzwOrJOvb+OHtVToWIAGDEhSEvgV5teSIb8USljwrbnYn7am8O1MmceL2qjBk8HRo+6LBZBf+cAIP0naP6IOKqZi7T/y35LfNl+BXxM3ERL7B7ATa6h/7UdcKL7A6QS6qcaUBuOxusALFOkeclzihRtRDeGBDaThYjv/Y+OnjpZNhwzuvq/48XChS8YmegRW0Dl7GRislwDusiXZdOfPPIIWbdTpMF8wObaU2MQl4MfE6M0L7lNDhyUfK8edHD6+FSB4XpwqkucdaN/Ba8haPG3RuiTdzsHXR+m2cCvKyBkbym+7iIcLrr6QZYIXz0kNRzR0qqiHXBllrDcbhwAz8DjTDtjQ6MssJXy3/KhUCmpjRVt8tethxEYzIBPXhY/GsxCSV/UD4hJCyo497NbYhuZhe3WkD/RY2PqZeAN/G84TY+TdRHkn8AG7c4Fh4Ma/ROA9nBwGTSNAFvbduN1DPheU99N+Gz3ANbj0NmuVk4Ds3lRE4G3suxm44ZYtz4kAF7QPiVREwonhzURJ/nnE+jnBfnD6T3v+XLcfxbQMd09hTlDadS/Sh3OztUJylNyw9yefDuUJM5JjBhzzGghNIzIcWOWd1J/f1wWoGm3s41WLouEemPdZ6QnKos82a0MtZoX5FSgXdIiOfiyhoaAW0Q2lw46Rv0cAQYeDYfgg+5agOHT+3oMCj8sTd3sn1BcDwRxTbCIDM3gIPz3dFkUhjy/2h9QNIlSukS0m8qCIkPp2oIxWGcw3J59KC3ENEkSTbdTOG4471IKqfc5uruwQW0X5EvxcebYqNIK3U8PnuYqLQ8AZdwI2ssHDC7cDGEkXgDOYb6VDGHRVBveGRiRV2FdT3WOLciz/+QbxL/96+WD/jaT1Nf0r5asAYuEqUoqGX2eT6wvWUQYd+05RIqrx210LLY4ND67Ei0ENs5bbDDZTmH9D7x0SYABZuUX1j0L6PW2u878saZjahZQ/3cVa5lfDQlowtgCdkAib8mW8pN/rz6OK1mja68iLMtebT3cKgODmVLU+yUwFEaaDqVkQdCnJWZgF8sgfThMwSCUc6CN6QSyGeWK+ollGKHB5GeyjTgLKUzVtn5N9g5qECr0nYdqw8AReh7TXXjQ28rrDzu7S0KvMaOKmf60+8nkL0w7/V3gj17NOY+XAEgAKBxgd///CAIAyiAQRcAFFFFEgggDdK/p7nMeaKOIbg0cki5ct8bNIQcorS+/Orv7ULoLi2OA+TEMxOyBxHm/PVd3xUlpXZGdgrhEdISqyP9wq2RDspZg/0Zy6263J6fLgTgr3AUWUufA1neY70rjWIJO3E11507bJQztPZyT0iVJFkmkyoeX0biqZdanBVBBzNquuZbBx/78AI6Nd6ryaYKHtXTCCKUbKUvQ/ta2Fg0pj/8kvscd5kaMnWMEq6KhbSo/gXtDyZ0Y4ayXLM500z/Ese+BmT+TPDpzuH499eJ/euqsG2rf/wCRK7XGEMzoU9eJ5XEU+JJE69Wm7z7VWEIhziVVd46PUTdemeWT3Stc0DI/jm+BzV7pbNeQN5dHFn9qFQ+MQCBBhfzd/gcAqmADqPtU7yPLwHH0SCQi5A3qKWAIXF6k0SWESgeZM/d+S3m+HOnc6hq5HD7nqDUHehmgK/pnI23vsLn6NqjFAcAf5u47SQ3YY8Hjvxa1t3cY0BCVIcfu5qAMqvYP5LLUy5D3KAUe56Z3FxEjHbn/Oox/d/XQCaOjar+GE0DTJG3T5anUcCZrFv+uFr/2d542uNdy55TWlU+LcDhTBCoxHcYbk+8Zz3i9si2IQLrV56/Umgmy5B3yz/PssNraV4c50eRSXQoXhbS0JuqTdrxM3MQW2TT/zZePQKY5jkQXJeKYL/YPN",OH="data:image/png;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGNbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAITwAAAdwAAgAAAAEAAAG1AAAGmgAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAAw2lwcnAAAACdaXBjbwAAABRpc3BlAAAAAAAAAQAAAAEAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAgAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQBBYYHAAAIfm1kYXQSAAoGGB3//8JUMo0NEBAAAEAA3Zi2xeiNW1VrWMZmcmAH/0vkDa5nJLN/LOrCZkY8oib8XG+p/6x416j0TK61Hg0MpvGquL5Fv8e97yGgQ/bULG/VQ+9K8BNlWdlCDbaNNfI/44o5Bb/SiiDzk4kbYFxJHIP6y8x+Qvx++CtEi+BxZKwClqMPv4vlh/lF4qynoFz1R9HFLjPesESo36AAq8B54/OHp+eFn8TDdHpMmrnk4Sdfz////9pmnxzYAA94DaawTj9fmG+8tuYoAWRMG+SSWRYv288yX5XdtAyqecWUAAXswQzXGysz/wGA1hxp2y2kypz5H+K5/+08ztWfWaYIAAFOPyUw4ivumBZgAAmdvn5JmMzMI69mlemAXv9Br4mV4kMOCYzrUoIU8nbndpllj5G1Hf///+seAAHcwWdp2+jRDZ3Ttt+H8B9ell84ANRHUYTeBtyfh514qTL/oAK63Mq0BTs2ZINGE4wHYrJoVnqw5ymYKtGBJ8B48jSaGKzkUvsEVoAwAHLrqIyCTEnXkWDBEUSqDiwEVmzwuhXkTP5OZil/Lpyj5e2ADGD4DU/6JuHiw1u2OlvuEhNiz8zOsKnDMfKa1XnK2s0Teq5Usl1PMOeQOWvs98jpRgiP3x8fYc0wPQBa0Vd3+senst+lA7smdAzwhwM8SI+msCn0Yr2/a6PppqXEX7eFfdzf7SlRzsYvS2uqwUjgaVjTgR4dTIC6++A4pp+B3Y29H3RtV5XU5aWlBEhFkb0dj6VJz6Lu8raFKAPwL+dUuWd3y0GvpaR4U38apcBp0d/eKO8CrAPaJZ/5DAbydN2OrlDPmA3If55GZTdtZ4Hz1hmszvl1C4qG8tb4MdVYKkabH4op2RS9Sduzf9zKRoUk3/fc3jbNvhHpVaPoIFTO7JEvl4a9l0D1muhB6eBCmNMRAuhUGeubHm3cjAJUVe1mJYky24pBjWU8BNNMuRms6rBGE5YgcGxi29F1+vEwOXU4ogXkuwPa/UEjSip7eQOJFFP2PclUwzkRy83GbPlCSekzvSfBrQV2LF2VRbRg3X8ZcVujAZO4jer22K1P1lGcS9pzqzwOrJOvb+OHtVToWIAGDEhSEvgV5teSIb8USljwrbnYn7am8O1MmceL2qjBk8HRo+6LBZBf+cAIP0naP6IOKqZi7T/y35LfNl+BXxM3ERL7B7ATa6h/7UdcKL7A6QS6qcaUBuOxusALFOkeclzihRtRDeGBDaThYjv/Y+OnjpZNhwzuvq/48XChS8YmegRW0Dl7GRislwDusiXZdOfPPIIWbdTpMF8wObaU2MQl4MfE6M0L7lNDhyUfK8edHD6+FSB4XpwqkucdaN/Ba8haPG3RuiTdzsHXR+m2cCvKyBkbym+7iIcLrr6QZYIXz0kNRzR0qqiHXBllrDcbhwAz8DjTDtjQ6MssJXy3/KhUCmpjRVt8tethxEYzIBPXhY/GsxCSV/UD4hJCyo497NbYhuZhe3WkD/RY2PqZeAN/G84TY+TdRHkn8AG7c4Fh4Ma/ROA9nBwGTSNAFvbduN1DPheU99N+Gz3ANbj0NmuVk4Ds3lRE4G3suxm44ZYtz4kAF7QPiVREwonhzURJ/nnE+jnBfnD6T3v+XLcfxbQMd09hTlDadS/Sh3OztUJylNyw9yefDuUJM5JjBhzzGghNIzIcWOWd1J/f1wWoGm3s41WLouEemPdZ6QnKos82a0MtZoX5FSgXdIiOfiyhoaAW0Q2lw46Rv0cAQYeDYfgg+5agOHT+3oMCj8sTd3sn1BcDwRxTbCIDM3gIPz3dFkUhjy/2h9QNIlSukS0m8qCIkPp2oIxWGcw3J59KC3ENEkSTbdTOG4471IKqfc5uruwQW0X5EvxcebYqNIK3U8PnuYqLQ8AZdwI2ssHDC7cDGEkXgDOYb6VDGHRVBveGRiRV2FdT3WOLciz/+QbxL/96+WD/jaT1Nf0r5asAYuEqUoqGX2eT6wvWUQYd+05RIqrx210LLY4ND67Ei0ENs5bbDDZTmH9D7x0SYABZuUX1j0L6PW2u878saZjahZQ/3cVa5lfDQlowtgCdkAib8mW8pN/rz6OK1mja68iLMtebT3cKgODmVLU+yUwFEaaDqVkQdCnJWZgF8sgfThMwSCUc6CN6QSyGeWK+ollGKHB5GeyjTgLKUzVtn5N9g5qECr0nYdqw8AReh7TXXjQ28rrDzu7S0KvMaOKmf60+8nkL0w7/V3gj17NOY+XAEgAKBxgd///CAIAyzgMRcAFFFFEgggDdK/p7kJw9nmEK0wBrlxHnQYfCvQ7plEw/VmKV8Da/hc4w0hjB+JRDNQxR1zU/uE99m+oIE6Rm0jUFPJ40IAAIfKWm3wqKYlhdCDC/2h5CU3G2xic7xZzx+C/6+9bu+slLSJZTVRPr/78AEea4J1+8hbs1wCsKP42wEDj91U4qRfb5UGPviqdpQE6zfPTmSMdwh+IYUJCiF0BoB8qHYdfNWFbkO6Sg00PSTl1B679UnU0z76ct8nyCLCEGcEzxDa3/vPayZNDdt5GGt/guR36RaNvxwFy28AfOL8xNgAoNmM9XQqchTkaaJNhqAkfF8nFHvhW6X0vwJ/ziSN0NI8Yp9hW2RdDVmnctAfugVmxl2u2P2VObkg9kiTjk9BMFmAw4+b6b2gBBOuLmi/82Fn9OGsKjmgVvUN9rXfUsiIV/TWoT7W3Y/ZaDWRr50StSuqv15nwO/VmG+yEj/dmhdjzqvPWcxwM0WUhFxWhkx37/qldShaRvnA3iDzAv4CSTOcH4OBabpq90htYv1u63Fy3gjzQGsKkIxdOT7sAD6X5Aq0aCSVc96BjTyQ0G3+Yp9P6CwNBYxsQq74boDvNOldQJCRoFHsA=",IH="data:image/png;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGNbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAITwAAAx8AAgAAAAEAAAG1AAAGmgAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAAw2lwcnAAAACdaXBjbwAAABRpc3BlAAAAAAAAAQAAAAEAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAgAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQBBYYHAAAJwW1kYXQSAAoGGB3//8JUMo0NEBAAAEAA3Zi2xeiNW1VrWMZmcmAH/0vkDa5nJLN/LOrCZkY8oib8XG+p/6x416j0TK61Hg0MpvGquL5Fv8e97yGgQ/bULG/VQ+9K8BNlWdlCDbaNNfI/44o5Bb/SiiDzk4kbYFxJHIP6y8x+Qvx++CtEi+BxZKwClqMPv4vlh/lF4qynoFz1R9HFLjPesESo36AAq8B54/OHp+eFn8TDdHpMmrnk4Sdfz////9pmnxzYAA94DaawTj9fmG+8tuYoAWRMG+SSWRYv288yX5XdtAyqecWUAAXswQzXGysz/wGA1hxp2y2kypz5H+K5/+08ztWfWaYIAAFOPyUw4ivumBZgAAmdvn5JmMzMI69mlemAXv9Br4mV4kMOCYzrUoIU8nbndpllj5G1Hf///+seAAHcwWdp2+jRDZ3Ttt+H8B9ell84ANRHUYTeBtyfh514qTL/oAK63Mq0BTs2ZINGE4wHYrJoVnqw5ymYKtGBJ8B48jSaGKzkUvsEVoAwAHLrqIyCTEnXkWDBEUSqDiwEVmzwuhXkTP5OZil/Lpyj5e2ADGD4DU/6JuHiw1u2OlvuEhNiz8zOsKnDMfKa1XnK2s0Teq5Usl1PMOeQOWvs98jpRgiP3x8fYc0wPQBa0Vd3+senst+lA7smdAzwhwM8SI+msCn0Yr2/a6PppqXEX7eFfdzf7SlRzsYvS2uqwUjgaVjTgR4dTIC6++A4pp+B3Y29H3RtV5XU5aWlBEhFkb0dj6VJz6Lu8raFKAPwL+dUuWd3y0GvpaR4U38apcBp0d/eKO8CrAPaJZ/5DAbydN2OrlDPmA3If55GZTdtZ4Hz1hmszvl1C4qG8tb4MdVYKkabH4op2RS9Sduzf9zKRoUk3/fc3jbNvhHpVaPoIFTO7JEvl4a9l0D1muhB6eBCmNMRAuhUGeubHm3cjAJUVe1mJYky24pBjWU8BNNMuRms6rBGE5YgcGxi29F1+vEwOXU4ogXkuwPa/UEjSip7eQOJFFP2PclUwzkRy83GbPlCSekzvSfBrQV2LF2VRbRg3X8ZcVujAZO4jer22K1P1lGcS9pzqzwOrJOvb+OHtVToWIAGDEhSEvgV5teSIb8USljwrbnYn7am8O1MmceL2qjBk8HRo+6LBZBf+cAIP0naP6IOKqZi7T/y35LfNl+BXxM3ERL7B7ATa6h/7UdcKL7A6QS6qcaUBuOxusALFOkeclzihRtRDeGBDaThYjv/Y+OnjpZNhwzuvq/48XChS8YmegRW0Dl7GRislwDusiXZdOfPPIIWbdTpMF8wObaU2MQl4MfE6M0L7lNDhyUfK8edHD6+FSB4XpwqkucdaN/Ba8haPG3RuiTdzsHXR+m2cCvKyBkbym+7iIcLrr6QZYIXz0kNRzR0qqiHXBllrDcbhwAz8DjTDtjQ6MssJXy3/KhUCmpjRVt8tethxEYzIBPXhY/GsxCSV/UD4hJCyo497NbYhuZhe3WkD/RY2PqZeAN/G84TY+TdRHkn8AG7c4Fh4Ma/ROA9nBwGTSNAFvbduN1DPheU99N+Gz3ANbj0NmuVk4Ds3lRE4G3suxm44ZYtz4kAF7QPiVREwonhzURJ/nnE+jnBfnD6T3v+XLcfxbQMd09hTlDadS/Sh3OztUJylNyw9yefDuUJM5JjBhzzGghNIzIcWOWd1J/f1wWoGm3s41WLouEemPdZ6QnKos82a0MtZoX5FSgXdIiOfiyhoaAW0Q2lw46Rv0cAQYeDYfgg+5agOHT+3oMCj8sTd3sn1BcDwRxTbCIDM3gIPz3dFkUhjy/2h9QNIlSukS0m8qCIkPp2oIxWGcw3J59KC3ENEkSTbdTOG4471IKqfc5uruwQW0X5EvxcebYqNIK3U8PnuYqLQ8AZdwI2ssHDC7cDGEkXgDOYb6VDGHRVBveGRiRV2FdT3WOLciz/+QbxL/96+WD/jaT1Nf0r5asAYuEqUoqGX2eT6wvWUQYd+05RIqrx210LLY4ND67Ei0ENs5bbDDZTmH9D7x0SYABZuUX1j0L6PW2u878saZjahZQ/3cVa5lfDQlowtgCdkAib8mW8pN/rz6OK1mja68iLMtebT3cKgODmVLU+yUwFEaaDqVkQdCnJWZgF8sgfThMwSCUc6CN6QSyGeWK+ollGKHB5GeyjTgLKUzVtn5N9g5qECr0nYdqw8AReh7TXXjQ28rrDzu7S0KvMaOKmf60+8nkL0w7/V3gj17NOY+XAEgAKBxgd///CAIAykQYRcAFFFFEgggDdK7ZTqQri/BWuvQExV18aMvN6mDhY7kyJyr6S9VAwLEtuz2OxlIG6VMIqEj6qha5hyjxtAEHd242QELypv2SJOwAFUldcPlVQXiSJVfOczpHKSCb0HaMIYPtQRsA3CEXsDcFZA6Olefe09FGicnRxSrb8cboCdwtGhHc3SLdx8L8nUDHM5wS9yP4DWfv4vfsi+54npbM+lAB7DLHL/3CZgCqh6K5QK2QBAQR6ag4MYtKpFq4oH8yshFyEoBl+IYe//6zQ2VPgCauEfJMJJUfA78p2dDRVcKBd+4lCsAAAjhrYA69hjBWloZdjZqGzbB1GuuWzs4NCOmKpWn9Aw47TN26BU1R8qauNRDYP5qkBmsQerMXRJ7qxm6zIK/E0oTKJUyR6yoqIT4r++04I5vcv0ge7YuSZi/rdOr2bQBXC3LPpbW6ZmEkAcCg27qrmINAGnoUWxWEqSusVrXvjvWQa3XpUw+EkialUuy1hdZD3HIoYltZ4hxWe+cY2txGWVkhlT2Z1raMl/ecF11B7mhKRcmAAAJl8PoG8BMB87GGCvHqnom72DRKfNYtQr9AIfULDhI5vEW6Q/gU7tdd5/nphgXv5VIYzdrYq1OlJG5Of1PY590iT80mjVTV5iBGuIEzh7mYwVVu7w7VBQaEOkOwnVJVCgbxMqzrQo4OnsqiDJ6Sr0tx7KRCc5NrON84hrwGzL2EIoucIc0XwsQv3+7wCrjPd3LxQE3WUct1WXOpJ7F9Y2i2091eNQCtNJwhh7UxsNzGx4fi84MuVW1Yr+TtGRSNTNtk8txsmr8KCBsvapArDcjT7MP79fMD5raP0M7XIPI+FCIFxv8UClEOblMX9tiRd4u2itpRGM7kwStnCVFBWEC/P1vtOWVzE2+Kofd815ohIOt1quxvW+lAC5SwUJy7ccA97FEWXIWKh3n9weXuNBp+fYrCTTP/mcNAHwDJoXgxovFBpEE25Mr34f4lrnICaVqXe9AVsQMXtTVJkbgHUxiCo6MSh+JiagfxGNoNmOznmJhaHYA==",PH="data:image/png;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGNbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAITwAAAUMAAgAAAAEAAAG1AAAGmgAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAAw2lwcnAAAACdaXBjbwAAABRpc3BlAAAAAAAAAQAAAAEAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAgAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQBBYYHAAAH5W1kYXQSAAoGGB3//8JUMo0NEBAAAEAA3Zi2xeiNW1VrWMZmcmAH/0vkDa5nJLN/LOrCZkY8oib8XG+p/6x416j0TK61Hg0MpvGquL5Fv8e97yGgQ/bULG/VQ+9K8BNlWdlCDbaNNfI/44o5Bb/SiiDzk4kbYFxJHIP6y8x+Qvx++CtEi+BxZKwClqMPv4vlh/lF4qynoFz1R9HFLjPesESo36AAq8B54/OHp+eFn8TDdHpMmrnk4Sdfz////9pmnxzYAA94DaawTj9fmG+8tuYoAWRMG+SSWRYv288yX5XdtAyqecWUAAXswQzXGysz/wGA1hxp2y2kypz5H+K5/+08ztWfWaYIAAFOPyUw4ivumBZgAAmdvn5JmMzMI69mlemAXv9Br4mV4kMOCYzrUoIU8nbndpllj5G1Hf///+seAAHcwWdp2+jRDZ3Ttt+H8B9ell84ANRHUYTeBtyfh514qTL/oAK63Mq0BTs2ZINGE4wHYrJoVnqw5ymYKtGBJ8B48jSaGKzkUvsEVoAwAHLrqIyCTEnXkWDBEUSqDiwEVmzwuhXkTP5OZil/Lpyj5e2ADGD4DU/6JuHiw1u2OlvuEhNiz8zOsKnDMfKa1XnK2s0Teq5Usl1PMOeQOWvs98jpRgiP3x8fYc0wPQBa0Vd3+senst+lA7smdAzwhwM8SI+msCn0Yr2/a6PppqXEX7eFfdzf7SlRzsYvS2uqwUjgaVjTgR4dTIC6++A4pp+B3Y29H3RtV5XU5aWlBEhFkb0dj6VJz6Lu8raFKAPwL+dUuWd3y0GvpaR4U38apcBp0d/eKO8CrAPaJZ/5DAbydN2OrlDPmA3If55GZTdtZ4Hz1hmszvl1C4qG8tb4MdVYKkabH4op2RS9Sduzf9zKRoUk3/fc3jbNvhHpVaPoIFTO7JEvl4a9l0D1muhB6eBCmNMRAuhUGeubHm3cjAJUVe1mJYky24pBjWU8BNNMuRms6rBGE5YgcGxi29F1+vEwOXU4ogXkuwPa/UEjSip7eQOJFFP2PclUwzkRy83GbPlCSekzvSfBrQV2LF2VRbRg3X8ZcVujAZO4jer22K1P1lGcS9pzqzwOrJOvb+OHtVToWIAGDEhSEvgV5teSIb8USljwrbnYn7am8O1MmceL2qjBk8HRo+6LBZBf+cAIP0naP6IOKqZi7T/y35LfNl+BXxM3ERL7B7ATa6h/7UdcKL7A6QS6qcaUBuOxusALFOkeclzihRtRDeGBDaThYjv/Y+OnjpZNhwzuvq/48XChS8YmegRW0Dl7GRislwDusiXZdOfPPIIWbdTpMF8wObaU2MQl4MfE6M0L7lNDhyUfK8edHD6+FSB4XpwqkucdaN/Ba8haPG3RuiTdzsHXR+m2cCvKyBkbym+7iIcLrr6QZYIXz0kNRzR0qqiHXBllrDcbhwAz8DjTDtjQ6MssJXy3/KhUCmpjRVt8tethxEYzIBPXhY/GsxCSV/UD4hJCyo497NbYhuZhe3WkD/RY2PqZeAN/G84TY+TdRHkn8AG7c4Fh4Ma/ROA9nBwGTSNAFvbduN1DPheU99N+Gz3ANbj0NmuVk4Ds3lRE4G3suxm44ZYtz4kAF7QPiVREwonhzURJ/nnE+jnBfnD6T3v+XLcfxbQMd09hTlDadS/Sh3OztUJylNyw9yefDuUJM5JjBhzzGghNIzIcWOWd1J/f1wWoGm3s41WLouEemPdZ6QnKos82a0MtZoX5FSgXdIiOfiyhoaAW0Q2lw46Rv0cAQYeDYfgg+5agOHT+3oMCj8sTd3sn1BcDwRxTbCIDM3gIPz3dFkUhjy/2h9QNIlSukS0m8qCIkPp2oIxWGcw3J59KC3ENEkSTbdTOG4471IKqfc5uruwQW0X5EvxcebYqNIK3U8PnuYqLQ8AZdwI2ssHDC7cDGEkXgDOYb6VDGHRVBveGRiRV2FdT3WOLciz/+QbxL/96+WD/jaT1Nf0r5asAYuEqUoqGX2eT6wvWUQYd+05RIqrx210LLY4ND67Ei0ENs5bbDDZTmH9D7x0SYABZuUX1j0L6PW2u878saZjahZQ/3cVa5lfDQlowtgCdkAib8mW8pN/rz6OK1mja68iLMtebT3cKgODmVLU+yUwFEaaDqVkQdCnJWZgF8sgfThMwSCUc6CN6QSyGeWK+ollGKHB5GeyjTgLKUzVtn5N9g5qECr0nYdqw8AReh7TXXjQ28rrDzu7S0KvMaOKmf60+8nkL0w7/V3gj17NOY+XAEgAKBxgd///CAIAytQIRcAFFFFEgggDdK/pEFTKh6k2anZ35+jTGUpdjCM2BbeAmnobCT2lqoLdLvZSSvMK/7N1IlxUtafRqz2/FnMrQ4HZCLnrptPgct1gN8WP3E3By1Jo1a+XdsCdvEU1rKCwQMX/P6Bj9jFn1pDpp5pwZuM3X73pvxHlnBCtc4UByj3bkDidUREFWLj9ZFXR+z68jvx/wktMouhX82fG5JXXzaRMl1pYHcDngHnK4ggtLaxXY+J/nVsHKIyNB/sLfhAMKWMehgT0A7IsbamYCGZuoWBDYTD1kElTUX7nNzPycVezJuQAUlpDyEirMFx9HPoSa80hom1522TyhOkRJOIdPNapbcmFSx31C4Vov2CdVKGkETpVLCi/G9RGS+gidPi+2tcKY+qq7ZNlZrmXP3wEVOK1gMrg=",TH="data:image/png;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGNbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAITwAAAKEAAgAAAAEAAAG1AAAGmgAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAAw2lwcnAAAACdaXBjbwAAABRpc3BlAAAAAAAAAQAAAAEAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAgAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQBBYYHAAAHQ21kYXQSAAoGGB3//8JUMo0NEBAAAEAA3Zi2xeiNW1VrWMZmcmAH/0vkDa5nJLN/LOrCZkY8oib8XG+p/6x416j0TK61Hg0MpvGquL5Fv8e97yGgQ/bULG/VQ+9K8BNlWdlCDbaNNfI/44o5Bb/SiiDzk4kbYFxJHIP6y8x+Qvx++CtEi+BxZKwClqMPv4vlh/lF4qynoFz1R9HFLjPesESo36AAq8B54/OHp+eFn8TDdHpMmrnk4Sdfz////9pmnxzYAA94DaawTj9fmG+8tuYoAWRMG+SSWRYv288yX5XdtAyqecWUAAXswQzXGysz/wGA1hxp2y2kypz5H+K5/+08ztWfWaYIAAFOPyUw4ivumBZgAAmdvn5JmMzMI69mlemAXv9Br4mV4kMOCYzrUoIU8nbndpllj5G1Hf///+seAAHcwWdp2+jRDZ3Ttt+H8B9ell84ANRHUYTeBtyfh514qTL/oAK63Mq0BTs2ZINGE4wHYrJoVnqw5ymYKtGBJ8B48jSaGKzkUvsEVoAwAHLrqIyCTEnXkWDBEUSqDiwEVmzwuhXkTP5OZil/Lpyj5e2ADGD4DU/6JuHiw1u2OlvuEhNiz8zOsKnDMfKa1XnK2s0Teq5Usl1PMOeQOWvs98jpRgiP3x8fYc0wPQBa0Vd3+senst+lA7smdAzwhwM8SI+msCn0Yr2/a6PppqXEX7eFfdzf7SlRzsYvS2uqwUjgaVjTgR4dTIC6++A4pp+B3Y29H3RtV5XU5aWlBEhFkb0dj6VJz6Lu8raFKAPwL+dUuWd3y0GvpaR4U38apcBp0d/eKO8CrAPaJZ/5DAbydN2OrlDPmA3If55GZTdtZ4Hz1hmszvl1C4qG8tb4MdVYKkabH4op2RS9Sduzf9zKRoUk3/fc3jbNvhHpVaPoIFTO7JEvl4a9l0D1muhB6eBCmNMRAuhUGeubHm3cjAJUVe1mJYky24pBjWU8BNNMuRms6rBGE5YgcGxi29F1+vEwOXU4ogXkuwPa/UEjSip7eQOJFFP2PclUwzkRy83GbPlCSekzvSfBrQV2LF2VRbRg3X8ZcVujAZO4jer22K1P1lGcS9pzqzwOrJOvb+OHtVToWIAGDEhSEvgV5teSIb8USljwrbnYn7am8O1MmceL2qjBk8HRo+6LBZBf+cAIP0naP6IOKqZi7T/y35LfNl+BXxM3ERL7B7ATa6h/7UdcKL7A6QS6qcaUBuOxusALFOkeclzihRtRDeGBDaThYjv/Y+OnjpZNhwzuvq/48XChS8YmegRW0Dl7GRislwDusiXZdOfPPIIWbdTpMF8wObaU2MQl4MfE6M0L7lNDhyUfK8edHD6+FSB4XpwqkucdaN/Ba8haPG3RuiTdzsHXR+m2cCvKyBkbym+7iIcLrr6QZYIXz0kNRzR0qqiHXBllrDcbhwAz8DjTDtjQ6MssJXy3/KhUCmpjRVt8tethxEYzIBPXhY/GsxCSV/UD4hJCyo497NbYhuZhe3WkD/RY2PqZeAN/G84TY+TdRHkn8AG7c4Fh4Ma/ROA9nBwGTSNAFvbduN1DPheU99N+Gz3ANbj0NmuVk4Ds3lRE4G3suxm44ZYtz4kAF7QPiVREwonhzURJ/nnE+jnBfnD6T3v+XLcfxbQMd09hTlDadS/Sh3OztUJylNyw9yefDuUJM5JjBhzzGghNIzIcWOWd1J/f1wWoGm3s41WLouEemPdZ6QnKos82a0MtZoX5FSgXdIiOfiyhoaAW0Q2lw46Rv0cAQYeDYfgg+5agOHT+3oMCj8sTd3sn1BcDwRxTbCIDM3gIPz3dFkUhjy/2h9QNIlSukS0m8qCIkPp2oIxWGcw3J59KC3ENEkSTbdTOG4471IKqfc5uruwQW0X5EvxcebYqNIK3U8PnuYqLQ8AZdwI2ssHDC7cDGEkXgDOYb6VDGHRVBveGRiRV2FdT3WOLciz/+QbxL/96+WD/jaT1Nf0r5asAYuEqUoqGX2eT6wvWUQYd+05RIqrx210LLY4ND67Ei0ENs5bbDDZTmH9D7x0SYABZuUX1j0L6PW2u878saZjahZQ/3cVa5lfDQlowtgCdkAib8mW8pN/rz6OK1mja68iLMtebT3cKgODmVLU+yUwFEaaDqVkQdCnJWZgF8sgfThMwSCUc6CN6QSyGeWK+ollGKHB5GeyjTgLKUzVtn5N9g5qECr0nYdqw8AReh7TXXjQ28rrDzu7S0KvMaOKmf60+8nkL0w7/V3gj17NOY+XAEgAKBxgd///CAIAykwERcAFFFFEgggC2dm0xiiuBDcQlws8sdaHFgVRnTs+ETxnyUxReKup68eT8C50Cs+curSsxPvt/rdMjcaymGnmlYEYXfVeRA2EqW09cEmHxyg2Lxo0ZvkPjg+hZESCuaIjjerPuvCvib63VQcyZI4IPt498bz+qqTC01RlrYLbRtYjBShpLDN2J7ZtJWHVGRWALz/A=",FH="data:image/png;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGNbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAITwAAAfcAAgAAAAEAAAG1AAAGmgAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAAw2lwcnAAAACdaXBjbwAAABRpc3BlAAAAAAAAAQAAAAEAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAgAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQBBYYHAAAImW1kYXQSAAoGGB3//8JUMo0NEBAAAEAA3Zi2xeiNW1VrWMZmcmAH/0vkDa5nJLN/LOrCZkY8oib8XG+p/6x416j0TK61Hg0MpvGquL5Fv8e97yGgQ/bULG/VQ+9K8BNlWdlCDbaNNfI/44o5Bb/SiiDzk4kbYFxJHIP6y8x+Qvx++CtEi+BxZKwClqMPv4vlh/lF4qynoFz1R9HFLjPesESo36AAq8B54/OHp+eFn8TDdHpMmrnk4Sdfz////9pmnxzYAA94DaawTj9fmG+8tuYoAWRMG+SSWRYv288yX5XdtAyqecWUAAXswQzXGysz/wGA1hxp2y2kypz5H+K5/+08ztWfWaYIAAFOPyUw4ivumBZgAAmdvn5JmMzMI69mlemAXv9Br4mV4kMOCYzrUoIU8nbndpllj5G1Hf///+seAAHcwWdp2+jRDZ3Ttt+H8B9ell84ANRHUYTeBtyfh514qTL/oAK63Mq0BTs2ZINGE4wHYrJoVnqw5ymYKtGBJ8B48jSaGKzkUvsEVoAwAHLrqIyCTEnXkWDBEUSqDiwEVmzwuhXkTP5OZil/Lpyj5e2ADGD4DU/6JuHiw1u2OlvuEhNiz8zOsKnDMfKa1XnK2s0Teq5Usl1PMOeQOWvs98jpRgiP3x8fYc0wPQBa0Vd3+senst+lA7smdAzwhwM8SI+msCn0Yr2/a6PppqXEX7eFfdzf7SlRzsYvS2uqwUjgaVjTgR4dTIC6++A4pp+B3Y29H3RtV5XU5aWlBEhFkb0dj6VJz6Lu8raFKAPwL+dUuWd3y0GvpaR4U38apcBp0d/eKO8CrAPaJZ/5DAbydN2OrlDPmA3If55GZTdtZ4Hz1hmszvl1C4qG8tb4MdVYKkabH4op2RS9Sduzf9zKRoUk3/fc3jbNvhHpVaPoIFTO7JEvl4a9l0D1muhB6eBCmNMRAuhUGeubHm3cjAJUVe1mJYky24pBjWU8BNNMuRms6rBGE5YgcGxi29F1+vEwOXU4ogXkuwPa/UEjSip7eQOJFFP2PclUwzkRy83GbPlCSekzvSfBrQV2LF2VRbRg3X8ZcVujAZO4jer22K1P1lGcS9pzqzwOrJOvb+OHtVToWIAGDEhSEvgV5teSIb8USljwrbnYn7am8O1MmceL2qjBk8HRo+6LBZBf+cAIP0naP6IOKqZi7T/y35LfNl+BXxM3ERL7B7ATa6h/7UdcKL7A6QS6qcaUBuOxusALFOkeclzihRtRDeGBDaThYjv/Y+OnjpZNhwzuvq/48XChS8YmegRW0Dl7GRislwDusiXZdOfPPIIWbdTpMF8wObaU2MQl4MfE6M0L7lNDhyUfK8edHD6+FSB4XpwqkucdaN/Ba8haPG3RuiTdzsHXR+m2cCvKyBkbym+7iIcLrr6QZYIXz0kNRzR0qqiHXBllrDcbhwAz8DjTDtjQ6MssJXy3/KhUCmpjRVt8tethxEYzIBPXhY/GsxCSV/UD4hJCyo497NbYhuZhe3WkD/RY2PqZeAN/G84TY+TdRHkn8AG7c4Fh4Ma/ROA9nBwGTSNAFvbduN1DPheU99N+Gz3ANbj0NmuVk4Ds3lRE4G3suxm44ZYtz4kAF7QPiVREwonhzURJ/nnE+jnBfnD6T3v+XLcfxbQMd09hTlDadS/Sh3OztUJylNyw9yefDuUJM5JjBhzzGghNIzIcWOWd1J/f1wWoGm3s41WLouEemPdZ6QnKos82a0MtZoX5FSgXdIiOfiyhoaAW0Q2lw46Rv0cAQYeDYfgg+5agOHT+3oMCj8sTd3sn1BcDwRxTbCIDM3gIPz3dFkUhjy/2h9QNIlSukS0m8qCIkPp2oIxWGcw3J59KC3ENEkSTbdTOG4471IKqfc5uruwQW0X5EvxcebYqNIK3U8PnuYqLQ8AZdwI2ssHDC7cDGEkXgDOYb6VDGHRVBveGRiRV2FdT3WOLciz/+QbxL/96+WD/jaT1Nf0r5asAYuEqUoqGX2eT6wvWUQYd+05RIqrx210LLY4ND67Ei0ENs5bbDDZTmH9D7x0SYABZuUX1j0L6PW2u878saZjahZQ/3cVa5lfDQlowtgCdkAib8mW8pN/rz6OK1mja68iLMtebT3cKgODmVLU+yUwFEaaDqVkQdCnJWZgF8sgfThMwSCUc6CN6QSyGeWK+ollGKHB5GeyjTgLKUzVtn5N9g5qECr0nYdqw8AReh7TXXjQ28rrDzu7S0KvMaOKmf60+8nkL0w7/V3gj17NOY+XAEgAKBxgd///CAIAy6QMRcAFFFFEgggDZteAlKs2gPMW8xy52qR2Mpsghb84uq093vV3Bbt9J4NZ/ajtQM9DmC0Aozsk2LerTOf4SWkuffk8y+IpCApu/wBcO2VphGS8SHTOK7bO/GXex4IKtuL3oseeeYqSo/3peQIZWrfpHOZhlKb9gkkPC3HyUDwaIyTcAABoGQWsSL7DtRuAyMu/rYE/E4fXPO4FPAAAChThL+0YJXDPY6ikmXOTzPnBmRDFkE9hYWiXynUhSw0JVC7Jx0y2TtNQhRfVJiTjXqHzQcnilvV9B0RQNfMZszkopd7udbRk0EeK3AzlIDpjjf9XU5hL2TIZQQ8oOvc0RZucLUeYPWbQNgodb5SWf6mB77pnfSy/BRDiEyM+4swyspvLKeEFeSft9jwpVaWO56DasWB0ITG9T9UeY9TRh8gJ/9tzNQ3w+jBdF7k6VcaB9A69lN7isKZPfDTu7uttcJ/RFOWDGGoK4BhWX1jea5aGFNcfYXan/WL3fFkq4jhZJzZV6oEMQZmPkI1Illj+rgBsIO+6dxFl8HVRPbN6iuloguiWFRt3DfSyWIbTdn2F7dTqWiC0si1FxQqO1B6hDId44bT2ez6XOIftZLWFKXSrqSPYdo3pSUcUF2TPWpz9xarLkSPSnBt8qXhQ=",fE=({selectedColor:r,onColorSelect:t,variantIndex:s})=>{const[i,a]=ee.useState(!1),o=[{name:"black",image:CH},{name:"blue",image:BH},{name:"gray",image:kH},{name:"green",image:_H},{name:"orange",image:EH},{name:"pink",image:OH},{name:"purple",image:IH},{name:"red",image:PH},{name:"white",image:TH},{name:"yellow",image:FH}],c=u=>{t(s,u),a(!1)},l=o.find(u=>u.name===r)||null;return n.jsxs("div",{className:"relative",children:[n.jsxs("div",{onClick:()=>a(!i),className:"flex items-center gap-2 border border-gray-300 rounded-lg px-3 py-2 cursor-pointer hover:border-gray-400 min-w-[150px]",children:[l?n.jsxs(n.Fragment,{children:[n.jsx("img",{src:l.image,alt:l.name,className:"w-6 h-6 rounded"}),n.jsx("span",{className:"flex-1 capitalize",children:l.name})]}):n.jsx("span",{className:"text-gray-500 flex-1",children:"Select Color"}),n.jsx("svg",{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&n.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 max-h-60 overflow-y-auto",children:o.map(u=>n.jsxs("div",{onClick:()=>c(u.name),className:`flex items-center gap-3 px-3 py-2 hover:bg-gray-50 cursor-pointer ${r===u.name?"bg-blue-50 border-l-4 border-blue-500":""}`,children:[n.jsx("img",{src:u.image,alt:u.name,className:"w-8 h-8 rounded"}),n.jsx("span",{className:"capitalize",children:u.name})]},u.name))}),i&&n.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>a(!1)})]})},UH=({product:r,onUpdate:t,onCancel:s,limitsInfo:i})=>{const[a,o]=ee.useState([]),[c,l]=ee.useState(0),[u,d]=ee.useState([]),[A,f]=ee.useState(!1),[p,m]=ee.useState(""),[g,b]=ee.useState({title:"",description:"",price:"",oldPrice:"",discount:"",stock:"",isPreorder:!1,shipping:"",condition:"",warrentyMonths:"",variants:[],tags:[],category:"",subcategory:"",childCategory:""});ee.useEffect(()=>{v()},[]),ee.useEffect(()=>{r&&(b({title:r.title||"",description:r.description||"",price:r.price?.toString()||"",oldPrice:r.oldPrice?.toString()||"",discount:r.discount?.toString()||"",stock:r.stock?.toString()||"",isPreorder:r.isPreorder||!1,shipping:r.shipping||"",condition:r.condition||"",warrentyMonths:r.warrentyMonths?.toString()||"",variants:r.variants||[],tags:r.tags||[],category:r.category||"",subcategory:r.subcategory||"",childCategory:r.childCategory||""}),r.images&&r.images.length>0&&d(r.images))},[r]),ee.useEffect(()=>{const O=g.variants.reduce((k,I)=>k+(Number(I.stock)||0),0);l(O)},[g.variants]),ee.useEffect(()=>{if(g.oldPrice&&g.discount){const O=parseFloat(g.oldPrice),k=parseFloat(g.discount);if(O>0&&k>=0){const I=O*(1-k/100);b(R=>({...R,price:I.toFixed(2)}))}}},[g.oldPrice,g.discount]);const v=async()=>{try{const O=await fetch("http://localhost:10000/api/categories");if(!O.ok)throw new Error("Failed to fetch categories");const k=await O.json();o(k)}catch(O){console.error("Error loading categories:",O)}},y=O=>{const{name:k,value:I,type:R,checked:Q}=O.target;k==="price"&&g.discount?b($=>({...$,[k]:R==="checkbox"?Q:I,discount:""})):b($=>({...$,[k]:R==="checkbox"?Q:I}))},w=()=>{b(O=>({...O,variants:[...O.variants,{name:"",hex:"#000000",size:"",stock:""}]}))},j=(O,k,I)=>{const R=[...g.variants];R[O][k]=I,b(Q=>({...Q,variants:R}))},C=O=>{const k=g.variants.filter((I,R)=>R!==O);b(I=>({...I,variants:k}))},B=O=>{O.trim()&&!g.tags.includes(O.trim())&&b(k=>({...k,tags:[...k.tags,O.trim()]}))},E=O=>{b(k=>({...k,tags:k.tags.filter((I,R)=>R!==O)}))},_=O=>{(O.key==="Enter"||O.key===",")&&(O.preventDefault(),B(O.target.value),O.target.value="")},S=async()=>{if(u.length===0)return[];const O={maxSizeMB:.5,maxWidthOrHeight:1e3,useWebWorker:!0},k=u.map(async I=>{if(typeof I=="string")return I;if(I instanceof File){const R=await ws(I,O),Q=Al(hl,`products/id_${Date.now()}_${I.name}`);return await ul(Q,R),dl(Q)}return I});return Promise.all(k)},N=async O=>{O.preventDefault(),f(!0),m("");try{const k=await S(),I=g.variants.length>0?g.variants.map(({name:L,hex:F,size:G,stock:X})=>({name:L,hex:F,size:G,stock:Number(X)||0})):[],R=I.length>0?I.reduce((L,F)=>L+F.stock,0):Number(g.stock)||0,Q={description:g.description,price:parseFloat(g.price),oldPrice:g.oldPrice?parseFloat(g.oldPrice):void 0,stock:R,images:k,isPreorder:g.isPreorder,shipping:g.shipping,condition:g.condition,warrentyMonths:Number(g.warrentyMonths)||0,variants:I.length>0?I:void 0,tags:g.tags},$=await fetch(`http://localhost:10000/api/products/${r._id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if($.ok)t(),alert("Product updated successfully!");else{const L=await $.json();m(L.error||"Failed to update product")}}catch(k){console.error(k),m("Network error. Please try again.")}finally{f(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Product"}),n.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),p&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:p}),n.jsxs("form",{onSubmit:N,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Title (Cannot be changed)"}),n.jsx("input",{type:"text",value:g.title,disabled:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-100 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Product title cannot be modified after creation"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),n.jsx("textarea",{name:"description",value:g.description,onChange:y,required:!0,rows:4,placeholder:"A detailed description of the product...",className:"w-full border border-gray-300 rounded-lg px-4 py-2 resize-none"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price (LKR)"}),n.jsx("input",{type:"number",name:"price",value:g.price,onChange:y,required:!0,min:"0",step:"1",placeholder:"2999.99",className:`w-full border rounded-lg px-4 py-2 ${g.discount&&g.discount>0?"bg-gray-100":"border-gray-300"}`,disabled:!!g.discount&&g.discount>0}),g.discount&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from original price and discount"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Original Price (optional)"}),n.jsx("input",{type:"number",name:"oldPrice",value:g.oldPrice,onChange:y,min:"0",step:"1",className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount (%) (optional)"}),n.jsx("input",{type:"number",name:"discount",value:g.discount,onChange:y,min:"0",max:"100",step:"1",className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Stock Quantity"}),n.jsx("input",{type:"number",name:"stock",value:g.variants.length>0?c:g.stock,onChange:y,min:"0",className:`w-full border rounded-lg px-4 py-2 ${g.variants.length>0?"bg-gray-100 cursor-not-allowed":"border-gray-300"}`,placeholder:"0",disabled:g.variants.length>0,required:g.variants.length===0}),g.variants.length>0&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Stock is managed via variants and cannot be set here."})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:n.jsxs("div",{className:"flex items-center space-x-2 mt-6 md:mt-0",children:[n.jsx("input",{type:"checkbox",name:"isPreorder",checked:g.isPreorder,onChange:y,id:"isPreorder",className:"h-5 w-5"}),n.jsx("label",{htmlFor:"isPreorder",className:"text-sm font-medium",children:"Is Preorder"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category (Cannot be changed)"}),n.jsx("input",{type:"text",value:g.category,disabled:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-100 cursor-not-allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subcategory (Cannot be changed)"}),n.jsx("input",{type:"text",value:g.subcategory,disabled:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-100 cursor-not-allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Child Category (Cannot be changed)"}),n.jsx("input",{type:"text",value:g.childCategory,disabled:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-100 cursor-not-allowed"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Shipping Info"}),n.jsxs("select",{name:"shipping",value:g.shipping,onChange:y,className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"",children:"Select shipping"}),n.jsx("option",{value:"free-shipping",children:"Free Shipping"}),n.jsx("option",{value:"paid-shipping",children:"Paid Shipping"}),n.jsx("option",{value:"local-pickup",children:"Local Pickup"})]}),n.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["You can only charge for the ",n.jsx("b",{children:"Paid Shipping"})," fees through the user."]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Condition"}),n.jsxs("select",{name:"condition",value:g.condition,onChange:y,className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"",children:"Select condition"}),n.jsx("option",{value:"new",children:"New"}),n.jsx("option",{value:"used",children:"Used"}),n.jsx("option",{value:"refurbished",children:"Refurbished"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Warranty Months"}),n.jsx("input",{type:"number",name:"warrentyMonths",value:g.warrentyMonths,onChange:y,min:"0",className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"0"})]})]}),i?.itemVariants&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Variants"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Add color, size, and stock for each variant combination."}),g.variants.map((O,k)=>n.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[n.jsx(fE,{selectedColor:O.name,onColorSelect:(I,R)=>{j(I,"name",R)},variantIndex:k}),n.jsx("input",{type:"text",placeholder:"Size (e.g. M, L, 42)",value:O.size,onChange:I=>j(k,"size",I.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 w-32 h-10"}),n.jsx("input",{type:"number",placeholder:"Stock",value:O.stock,onChange:I=>j(k,"stock",I.target.value),min:"0",className:"border border-gray-300 rounded-lg px-3 py-2 w-20 h-10",required:!0}),n.jsx("button",{type:"button",onClick:()=>C(k),className:"text-red-500 hover:text-red-700 px-2 py-2 h-10 flex items-center",children:"Remove"})]},k)),n.jsx("button",{type:"button",onClick:w,className:"text-blue-500 hover:text-blue-700 font-medium",children:"+ Add Variant"}),g.variants.length>0&&n.jsxs("p",{className:"text-sm font-medium mt-2",children:["Total Stock (from variants):"," ",n.jsx("span",{className:"text-green-600 font-semibold",children:c})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Tags"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Press Enter or comma to add tags. Great for search and categorization."}),n.jsx("input",{type:"text",placeholder:"Type a tag and press Enter...",onKeyDown:_,className:"w-full border border-gray-300 rounded-lg px-4 py-2 mb-3"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:g.tags.map((O,k)=>n.jsxs("span",{className:"bg-black text-white px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[O,n.jsx("button",{type:"button",onClick:()=>E(k),className:"text-white hover:text-red-500 font-bold",children:""})]},k))}),g.tags.length===0&&n.jsx("p",{className:"text-gray-400 text-sm",children:"No tags added yet"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Images (up to 10)"}),n.jsx(Tc,{images:u,onImagesChange:d,maxImages:10,multiple:!0})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:A,className:"bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 disabled:opacity-50",children:A?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(cs,{size:"sm"}),n.jsx("span",{children:"Updating..."})]}):"Update Product"})]})]})]})})})},LH=({service:r,onUpdate:t,onCancel:s})=>{const[i,a]=ee.useState([]),[o,c]=ee.useState([]),[l,u]=ee.useState(!1),[d,A]=ee.useState(""),[f,p]=ee.useState({title:"",description:"",price:"",oldPrice:"",discount:"",duration:30,tags:[],category:"",subcategory:"",childCategory:""}),m=[{value:30,label:"30 minutes"},{value:60,label:"1 hour"},{value:90,label:"1 hour 30 minutes"},{value:120,label:"2 hours"},{value:150,label:"2 hours 30 minutes"},{value:180,label:"3 hours"},{value:210,label:"3 hours 30 minutes"},{value:240,label:"4 hours"},{value:270,label:"4 hours 30 minutes"},{value:300,label:"5 hours"},{value:330,label:"5 hours 30 minutes"},{value:360,label:"6 hours"}];ee.useEffect(()=>{g()},[]),ee.useEffect(()=>{r&&(p({title:r.title||"",description:r.description||"",price:r.price?.toString()||"",oldPrice:r.oldPrice?.toString()||"",discount:r.discount?.toString()||"",duration:r.duration||30,tags:r.tags||[],category:r.category||"",subcategory:r.subcategory||"",childCategory:r.childCategory||""}),r.images&&r.images.length>0&&c(r.images))},[r]),ee.useEffect(()=>{if(f.oldPrice&&f.discount){const B=parseFloat(f.oldPrice),E=parseFloat(f.discount);if(B>0&&E>=0){const _=B*(1-E/100);p(S=>({...S,price:_.toFixed(2)}))}}},[f.oldPrice,f.discount]);const g=async()=>{try{const B=await fetch("http://localhost:10000/api/categories");if(!B.ok)throw new Error("Failed to fetch categories");const E=await B.json();a(E)}catch(B){console.error("Error loading categories:",B)}},b=B=>{const{name:E,value:_,type:S,checked:N}=B.target;E==="price"&&f.discount?p(O=>({...O,[E]:S==="checkbox"?N:_,discount:""})):p(O=>({...O,[E]:S==="checkbox"?N:_}))},v=async()=>{if(o.length===0)return[];const B={maxSizeMB:.5,maxWidthOrHeight:1e3,useWebWorker:!0},E=o.map(async _=>{if(typeof _=="string")return _;if(_ instanceof File){const S=await ws(_,B),N=Al(hl,`services/id_${Date.now()}_${_.name}`);return await ul(N,S),dl(N)}return _});return Promise.all(E)},y=B=>{B.trim()&&!f.tags.includes(B.trim())&&p(E=>({...E,tags:[...E.tags,B.trim()]}))},w=B=>{p(E=>({...E,tags:E.tags.filter((_,S)=>S!==B)}))},j=B=>{(B.key==="Enter"||B.key===",")&&(B.preventDefault(),y(B.target.value),B.target.value="")},C=async B=>{B.preventDefault(),u(!0),A("");try{const E=await v(),_={description:f.description,price:parseFloat(f.price),oldPrice:f.oldPrice?parseFloat(f.oldPrice):void 0,duration:parseInt(f.duration),images:E,tags:f.tags},S=await fetch(`http://localhost:10000/api/services/${r._id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(S.ok)t(),alert("Service updated successfully!");else{const N=await S.json();A(N.error||"Failed to update service")}}catch(E){console.error(E),A("Network error. Please try again.")}finally{u(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"px-8 py-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Service"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Update your service details"})]}),n.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]})}),n.jsxs("div",{className:"p-8",children:[d&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:d}),n.jsxs("form",{onSubmit:C,className:"space-y-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Title (Cannot be changed)"}),n.jsx("input",{type:"text",value:f.title,disabled:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 bg-gray-100 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Service title cannot be modified after creation"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration *"}),n.jsx("select",{name:"duration",value:f.duration,onChange:b,required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-black focus:border-transparent",children:m.map(B=>n.jsx("option",{value:B.value,children:B.label},B.value))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price (LKR)"}),n.jsx("input",{type:"number",name:"price",value:f.price,onChange:b,required:!0,min:"0",step:"1",placeholder:"2999.99",className:`w-full border rounded-lg px-4 py-2 ${f.discount&&f.discount>0?"bg-gray-100":"border-gray-300"}`,disabled:!!f.discount&&f.discount>0}),f.discount&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from original price and discount"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Original Price (optional)"}),n.jsx("input",{type:"number",name:"oldPrice",value:f.oldPrice,onChange:b,min:"0",step:"1",className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount (%) (optional)"}),n.jsx("input",{type:"number",name:"discount",value:f.discount,onChange:b,min:"0",max:"100",step:"1",className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),n.jsx("textarea",{name:"description",value:f.description,onChange:b,required:!0,rows:4,placeholder:"Describe your service in detail...",className:"w-full border border-gray-300 rounded-lg px-4 py-3 resize-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category (Cannot be changed)"}),n.jsx("input",{type:"text",value:f.category,disabled:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 bg-gray-100 cursor-not-allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subcategory (Cannot be changed)"}),n.jsx("input",{type:"text",value:f.subcategory,disabled:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 bg-gray-100 cursor-not-allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Child Category (Cannot be changed)"}),n.jsx("input",{type:"text",value:f.childCategory,disabled:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 bg-gray-100 cursor-not-allowed"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Service Tags"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Press Enter or comma to add tags. Great for search and categorization."}),n.jsx("input",{type:"text",placeholder:"Type a tag and press Enter...",onKeyDown:j,className:"w-full border border-gray-300 rounded-lg px-4 py-2 mb-3"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:f.tags.map((B,E)=>n.jsxs("span",{className:"bg-black text-white px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[B,n.jsx("button",{type:"button",onClick:()=>w(E),className:"text-white hover:text-red-500 font-bold",children:""})]},E))}),f.tags.length===0&&n.jsx("p",{className:"text-gray-400 text-sm",children:"No tags added yet"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Service Images"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Images (up to 10)"}),n.jsx(Tc,{images:o,onImagesChange:c,maxImages:10,multiple:!0})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:l,className:"bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(cs,{size:"sm"}),n.jsx("span",{children:"Updating Service..."})]}):"Update Service"})]})]})]})]})})},DH=()=>{const[r,t]=ee.useState(null),[s,i]=ee.useState(null),a=l=>({usageInfo:l||{},errorInfo:null,planInfo:l?.plan||"none",limitsInfo:l?.limits||{},productsInfo:{count:l?.usage?.products?.count||0,images:l?.usage?.products?.images||0,limitReached:l?.usage?.products?.limitReached||!1,imageLimitReached:l?.usage?.products?.imageLimitReached||!1},servicesInfo:{count:l?.usage?.services?.count||0,images:l?.usage?.services?.images||0,limitReached:l?.usage?.services?.limitReached||!1,imageLimitReached:l?.usage?.services?.imageLimitReached||!1},headerImagesInfo:{count:l?.usage?.headerImages?.count||0,limitReached:l?.usage?.headerImages?.limitReached||!1},variantsInfo:{used:l?.usage?.variants?.used||!1,allowed:l?.usage?.variants?.allowed||!1,violated:l?.usage?.variants?.violated||!1}}),o=ee.useCallback(async()=>{try{const l=await fetch("http://localhost:10000/api/users/usage-summary",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch usage summary");const u=await l.json();return t(u),a(u)}catch(l){return i(l.message),{usageInfo:{},errorInfo:l.message,planInfo:"none",limitsInfo:{},productsInfo:{count:0,images:0,limitReached:!1,imageLimitReached:!1},servicesInfo:{count:0,images:0,limitReached:!1,imageLimitReached:!1},headerImagesInfo:{count:0,limitReached:!1},variantsInfo:{used:!1,allowed:!1,violated:!1}}}},[]),c=ee.useMemo(()=>a(r),[r]);return{...c,errorInfo:s||c.errorInfo,loadUsage:o}},l2=()=>{const{user:r}=Fn(),[t,s]=ee.useState(null),[i,a]=ee.useState(null),[o,c]=ee.useState([]),[l,u]=ee.useState(null),[d,A]=ee.useState(null),[f,p]=ee.useState(null),[m,g]=ee.useState([]),[b,v]=ee.useState(!0),[y,w]=ee.useState(null),j=ee.useCallback(async()=>{try{const X=await Pa.getSummary();return a(X.data),X.data}catch(X){throw w(X.message),X}},[]),C=ee.useCallback(async()=>{try{const X=await Pa.getDetails();return s(X.data),A(X.data.settings),X.data}catch(X){throw w(X.message),X}},[]),B=ee.useCallback(async(X={})=>{try{const q=await Pa.getTransactions(X);return c(q.data.transactions),q.data}catch(q){throw w(q.message),q}},[]),E=ee.useCallback(async(X="month")=>{try{const q=await Pa.getAnalytics(X);return u(q.data),q.data}catch(q){throw w(q.message),q}},[]),_=ee.useCallback(async(X=1,q=10)=>{try{const T=await Pa.getCredits(X,q);return p(T.data),T.data}catch(T){throw w(T.message),T}},[]),S=ee.useCallback(async()=>{try{const X=await Pa.getCreditPackages();return g(X.data.packages||[]),X.data}catch(X){throw w(X.message),X}},[]),N=async X=>{try{const q=await Pa.purchaseCredits(X);return await Promise.all([j(),C(),_(),S()]),q}catch(q){throw new Error(q.response?.data?.message||"Credit purchase failed")}},O=async(X,q)=>{try{const T=await Pa.requestWithdrawal({amount:X,bankAccountId:q});return await Promise.all([j(),C(),B()]),T}catch(T){throw new Error(T.response?.data?.message||"Withdrawal request failed")}},k=async X=>{try{const q=await Pa.updateSettings(X);return A(q.data),await C(),q}catch(q){throw new Error(q.response?.data?.message||"Settings update failed")}},I=ee.useCallback(async()=>{if(!r||r.role!=="store_owner"){v(!1);return}try{v(!0),w(null),await Promise.all([j(),C(),B(),E(),_(),S()])}catch(X){w(X.message)}finally{v(!1)}},[r,j,C,B,E,_,S]),R=async X=>{try{return(await Qx.canReveal(X)).data}catch(q){throw new Error(q.response?.data?.message||"Failed to check reveal eligibility")}},Q=async(X,q=null)=>{try{const T=await Qx.revealContact(X,q);return await Promise.all([j(),C(),_()]),T}catch(T){throw new Error(T.response?.data?.message||"Contact reveal failed")}},$=async(X=1,q=10)=>{try{return(await Qx.getMyReveals(X,q)).data}catch(T){throw new Error(T.response?.data?.message||"Failed to fetch reveal history")}};ee.useEffect(()=>{r&&r.role==="store_owner"?I():(s(null),a(null),c([]),u(null),A(null),p(null),g([]),w(null),v(!1))},[r,I]);const L=t?.canWithdraw||!1,F=t?.monthlyGrowth||0,G=t?.metadata?.walletStatus||"active";return{wallet:t,summary:i,transactions:o,analytics:l,settings:d,credits:f,creditPackages:m,loading:b,error:y,canWithdraw:L,monthlyGrowth:F,walletStatus:G,fetchSummary:j,fetchWalletDetails:C,fetchTransactions:B,fetchAnalytics:E,requestWithdrawal:O,updateSettings:k,refreshWalletData:I,fetchCredits:_,fetchCreditPackages:S,purchaseCredits:N,canRevealContact:R,revealContact:Q,getMyReveals:$,clearError:()=>w(null),setError:w}},MH=()=>{const{user:r}=Fn(),[t,s]=ee.useState(null),[i,a]=ee.useState({totalProducts:0,totalServices:0,totalOrders:0,totalBookings:0,totalEarnings:0}),{loadUsage:o,limitsInfo:c,productsInfo:l,servicesInfo:u}=DH(),{summary:d}=l2(),[A,f]=ee.useState([]),[p,m]=ee.useState([]),[g,b]=ee.useState(null),[v,y]=ee.useState([]),[w,j]=ee.useState([]),[C,B]=ee.useState(!0),[E,_]=ee.useState(null),[S,N]=ee.useState(null),[O,k]=ee.useState(null),I=yi();ee.useEffect(()=>{r?.role==="store_owner"&&(r?.storeId?R():I("/create-store"))},[r]);const R=async()=>{B(!0),o();try{if(r.storeId){const U=await fetch(`http://localhost:10000/api/stores/${r.storeId}`,{credentials:"include"});if(U.ok){const K=await U.json();if(s(K.store),K.store?.type==="product"){const z=await fetch(`http://localhost:10000/api/products?storeId=${r.storeId}`,{credentials:"include"});if(z.ok){const M=await z.json();y(M),a(H=>({...H,totalProducts:M.length}))}else y([])}else if(K.store?.type==="service"){const z=await fetch(`http://localhost:10000/api/services?storeId=${r.storeId}`,{credentials:"include"});if(z.ok){const M=await z.json();j(M),a(H=>({...H,totalServices:M.length}))}else j([])}}else s(null)}else s(null);const X=await fetch("http://localhost:10000/api/orders/store",{credentials:"include"});if(X.ok){const U=await X.json();f(U.slice(0,5)),a(K=>({...K,totalOrders:U.length}))}else f([]);const q=await fetch("http://localhost:10000/api/bookings/store",{credentials:"include"});if(q.ok){const U=await q.json();m(U.slice(0,5)),a(K=>({...K,totalBookings:U.length}))}else m([]);const T=await fetch("http://localhost:10000/api/subscriptions/my-subscription",{credentials:"include"});if(T.ok){const U=await T.json();b(U.subscription)}else b(null)}catch(X){console.error("Unexpected error fetching dashboard data:",X)}finally{B(!1)}},Q=X=>{_(X)},$=X=>{N(X)},L=()=>{R(),_(null),N(null)},F=()=>{_(null),N(null)},G=async(X,q)=>{if(confirm(`Are you sure you want to delete this ${q}?`)){k(X);try{(await fetch(`http://localhost:10000/api/${q==="product"?"products":"services"}/${X}`,{method:"DELETE",credentials:"include"})).ok?(q==="product"?y(v.filter(K=>K._id!==X)):j(w.filter(K=>K._id!==X)),alert(`${q.charAt(0).toUpperCase()+q.slice(1)} deleted successfully!`)):alert(`Failed to delete ${q}`)}catch(T){console.error(`Error deleting ${q}:`,T),alert(`Error deleting ${q}`)}finally{k(null)}}};return!r||r.role!=="store_owner"?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"You need to be a store owner to access this page"}),n.jsx(Zt,{to:"/create-store",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors",children:"Create Store"})]})}):C?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(cs,{size:"xl"})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Store Dashboard"}),n.jsx("p",{className:"text-gray-600 mt-2",children:t?`Welcome back to ${t.name}`:"Manage your store"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[!t&&n.jsxs(Zt,{to:"/create-store",className:"bg-black text-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 flex items-center space-x-3",children:[n.jsx(Ua,{className:"w-8 h-8 text-white"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-white",children:"Create Store"}),n.jsx("p",{className:"text-sm text-gray-300",children:"Start your business"})]})]}),t?.type==="product"&&n.jsxs(n.Fragment,{children:[n.jsxs(Zt,{to:"/create-product",className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 flex items-center space-x-3",children:[n.jsx(Ua,{className:"w-8 h-8 text-black"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Add Product"}),l.limitReached?n.jsx("p",{className:"text-sm text-red-500",children:"Reched max products"}):n.jsx("p",{className:"text-sm text-gray-500",children:"Create new product"})]})]}),n.jsxs(Zt,{to:"/orders",className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 flex items-center space-x-3",children:[n.jsx(ps,{className:"w-8 h-8 text-black"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"View Orders"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Manage orders"})]})]})]}),t?.type==="service"&&n.jsxs(n.Fragment,{children:[n.jsxs(Zt,{to:"/create-service",className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 flex items-center space-x-3",children:[n.jsx(ms,{className:"w-8 h-8 text-black"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Add Service"}),u.limitReached?n.jsx("p",{className:"text-sm text-red-500",children:"Reched max services"}):n.jsx("p",{className:"text-sm text-gray-500",children:"Create new service"})]})]}),n.jsxs(Zt,{to:"/bookings",className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 flex items-center space-x-3",children:[n.jsx(Ti,{className:"w-8 h-8 text-black"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"View Bookings"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Manage bookings"})]})]})]}),n.jsxs(Zt,{to:"/wallet-dashboard",className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 flex items-center space-x-3",children:[n.jsx(Yu,{className:"w-8 h-8 text-green-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Wallet & Credits"}),n.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[n.jsxs("p",{children:["Balance: ",d?Br(d.availableBalance):"Loading..."]}),n.jsxs("p",{children:["Credits: ",d?.credits?.balance||0]})]})]})]}),n.jsxs(Zt,{to:"/store-management",className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 flex items-center space-x-3",children:[n.jsx(Ch,{className:"w-8 h-8 text-black"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Store Settings"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Manage store"})]})]}),n.jsxs(Zt,{to:`/store/${t._id}`,className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 flex items-center space-x-3",children:[n.jsx(ei,{className:"w-8 h-8 text-black"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"View My Store"}),n.jsx("p",{className:"text-sm text-gray-500",children:t.name})]})]})]}),n.jsxs("div",{className:"relative w-full rounded-3xl px-8 py-6 mb-6 bg-gradient-to-br from-gray-50 via-white to-gray-100 border-2 border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-black via-gray-600 to-black"}),n.jsx("div",{className:"absolute top-4 right-4 w-12 h-12 border-2 border-gray-300 rounded-full opacity-20"}),n.jsx("div",{className:"absolute top-6 right-6 w-8 h-8 border-2 border-gray-400 rounded-full opacity-30"}),n.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-2 h-2 bg-black rounded-full"}),n.jsx("h3",{className:"text-xl font-light text-black tracking-wide",children:g?"Package Management":"Subscription Required"})]}),n.jsx("div",{className:"space-y-2 text-gray-700",children:g?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-gray-600 font-light",children:"Current Plan:"}),n.jsx("span",{className:"font-medium text-black bg-gray-200 px-3 py-1 rounded-full text-sm tracking-wide",children:g.package.toUpperCase()})]}),n.jsxs("p",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-gray-600 font-light",children:"Status:"}),n.jsx("span",{className:`font-medium text-sm tracking-wide ${g.status==="active"?"text-green-600":"text-red-600"}`,children:g.status.toUpperCase()})]}),n.jsxs("p",{className:"text-gray-600 font-light",children:[n.jsx("span",{className:"font-medium text-black",children:"Expires:"})," ",new Date(g.endDate).toLocaleDateString()]}),n.jsxs("p",{className:"text-gray-600 font-light",children:[n.jsx("span",{className:"font-medium text-black",children:"Monthly Fee:"})," ",Br(g.amount)]}),n.jsx("p",{className:"text-gray-600 font-light leading-relaxed max-w-md",children:"Upgrade anytime to unlock more features. Downgrades are available after one month from your last update."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-gray-600 font-light",children:"Subscription Status:"}),n.jsx("span",{className:"font-medium text-red-600 text-sm tracking-wide",children:"PENDING"})]}),n.jsx("p",{className:"text-gray-600 font-light leading-relaxed max-w-md",children:"A subscription is required to sell your products or services on AIO."})]})})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx(Zt,{to:"/sub-management",children:n.jsxs("button",{className:"bg-black text-white px-6 py-3 rounded-xl font-medium hover:bg-gray-800 transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg flex items-center gap-2 group",children:[n.jsx("span",{children:g?"Manage Plan":"Get Subscription"}),n.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),n.jsx("span",{className:"text-xs text-gray-500 font-light",children:g?"Instant activation":"Quick setup"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t?.type==="product"&&n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Orders"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.totalOrders})]}),n.jsx(ps,{className:"w-8 h-8 text-blue-500"})]})}),t?.type==="service"&&n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Bookings"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.totalBookings})]}),n.jsx(ms,{className:"w-8 h-8 text-green-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Earnings"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Br(d&&d.totalEarnings||0)}),d?.monthlyGrowth!==void 0&&n.jsxs("p",{className:`text-sm ${d.monthlyGrowth>=0?"text-green-600":"text-red-600"}`,children:[d.monthlyGrowth>=0?"+":"",d.monthlyGrowth.toFixed(1),"% this month"]})]}),n.jsx(fl,{className:"w-8 h-8 text-yellow-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Store Rating"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t?.rating||0})]}),n.jsx(ti,{className:"w-8 h-8 text-purple-500"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t?.type==="product"&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Manage Products"}),n.jsx(Zt,{to:"/create-product",className:"text-black hover:text-gray-700 text-sm",children:"Add New"})]}),v.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ps,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No products yet"}),n.jsx(Zt,{to:"/create-product",className:"text-black hover:text-gray-700 text-sm",children:"Create your first product"})]}):n.jsxs("div",{className:"space-y-4",children:[v.slice(0,5).map(X=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("img",{src:X.images?.[0]?X.images[0].startsWith("http")?X.images[0]:`http://localhost:10000${X.images[0]}`:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",alt:X.title,className:"w-12 h-12 object-cover rounded"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:X.title}),n.jsxs("p",{className:"text-sm text-gray-500",children:[Br(X.price),"  ",X.stock," in stock"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Zt,{to:`/product/${X._id}`,className:"text-blue-600 hover:text-blue-800 p-1",children:n.jsx(Gn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Q(X),className:"text-green-600 hover:text-green-800 p-1",children:n.jsx(rA,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>G(X._id,"product"),disabled:O===X._id,className:"text-red-600 hover:text-red-800 p-1 disabled:opacity-50",children:n.jsx(Rc,{className:"w-4 h-4"})})]})]})},X._id)),v.length>5&&n.jsx("div",{className:"text-center",children:n.jsxs(Zt,{to:"/manage-products",className:"text-black hover:text-gray-700 text-sm",children:["View all ",v.length," products"]})})]})]}),t?.type==="service"&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Manage Services"}),n.jsx(Zt,{to:"/create-service",className:"text-black hover:text-gray-700 text-sm",children:"Add New"})]}),w.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ms,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No services yet"}),n.jsx(Zt,{to:"/create-service",className:"text-black hover:text-gray-700 text-sm",children:"Create your first service"})]}):n.jsxs("div",{className:"space-y-4",children:[w.slice(0,5).map(X=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("img",{src:X.images?.[0]?X.images[0].startsWith("http")?X.images[0]:`http://localhost:10000${X.images[0]}`:"https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400&h=300&fit=crop",alt:X.title,className:"w-12 h-12 object-cover rounded"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:X.title}),n.jsxs("p",{className:"text-sm text-gray-500",children:[Br(X.price),"  ",X.duration," ","min"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Zt,{to:`/service/${X._id}`,className:"text-blue-600 hover:text-blue-800 p-1",children:n.jsx(Gn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>$(X),className:"text-green-600 hover:text-green-800 p-1",children:n.jsx(rA,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>G(X._id,"service"),disabled:O===X._id,className:"text-red-600 hover:text-red-800 p-1 disabled:opacity-50",children:n.jsx(Rc,{className:"w-4 h-4"})})]})]})},X._id)),w.length>5&&n.jsx("div",{className:"text-center",children:n.jsxs(Zt,{to:"/manage-services",className:"text-black hover:text-gray-700 text-sm",children:["View all ",w.length," services"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Activity"}),n.jsx(Zt,{to:t?.type==="product"?"/orders":"/bookings",className:"text-black hover:text-gray-700 text-sm",children:"View All"})]}),(t?.type==="product"?A:p).length===0?n.jsx("p",{className:"text-gray-500 text-center py-8",children:"No recent activity"}):n.jsx("div",{className:"space-y-4",children:(t?.type==="product"?A:p).map(X=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:t?.type==="product"?`Order #${X._id.slice(-6)}`:X.serviceId?.title||"Service"}),n.jsx("p",{className:"text-sm text-gray-500",children:X.customerId?.name||"Customer"}),n.jsx("p",{className:"text-sm text-gray-500",children:new Date(X.createdAt).toLocaleDateString()})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:Br(X.totalAmount)}),n.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${X.status==="pending"?"bg-yellow-100 text-yellow-800":X.status==="confirmed"||X.status==="processing"?"bg-blue-100 text-blue-800":X.status==="completed"||X.status==="delivered"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:X.status})]})]})},X._id))})]})]}),E&&n.jsx(UH,{product:E,onUpdate:L,onCancel:F,limitsInfo:c}),S&&n.jsx(LH,{service:S,onUpdate:L,onCancel:F})]})})},pE=({selectedPackage:r,setSelectedPackage:t,isUpgrade:s=!1})=>{const[i,a]=ee.useState({}),[o,c]=ee.useState(!0),l={basic:{label:"Basic",bg:"bg-white",border:"border-gray-200",textColor:"text-gray-700",priceText:u=>`LKR ${u.toLocaleString()}/month`},standard:{label:"Standard",bg:"bg-black",border:"border-black",textColor:"text-white",priceText:u=>`LKR ${u.toLocaleString()}/month`},premium:{label:"Premium",bg:"bg-gradient-to-br from-gray-900 to-black",border:"border-gray-800",textColor:"text-white",priceText:u=>`LKR ${u.toLocaleString()}/month`}};return ee.useEffect(()=>{(async()=>{try{const d=await fetch("http://localhost:10000/api/packages",{credentials:"include"});if(!d.ok)throw new Error("Failed to fetch packages");const A=await d.json();a(A)}catch(d){console.error("Error:",d)}finally{c(!1)}})()},[]),o?n.jsx("section",{className:"py-12 px-4 flex justify-center items-center min-h-[200px] bg-white",children:n.jsx("div",{className:"w-10 h-10 border-4 border-t-transparent border-black rounded-full animate-spin"})}):n.jsx("section",{className:"py-14 px-4 bg-white",children:n.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-light text-black mb-4",children:s?"Upgrade Your Package":"Choose Your Package"}),n.jsx("p",{className:"text-lg md:text-xl text-gray-600 mb-12 font-light",children:s?"Select a new plan that fits your growing needs":"Elegant solutions for every business need"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.length===0?n.jsx("p",{className:"col-span-3 text-gray-500 text-center",children:"No packages available."}):i.map((u,d)=>{const A=l[u.name]||{bg:"bg-white",border:"border-gray-200",textColor:"text-gray-700"},f=r===u.name,p=u.name==="standard";return n.jsxs("div",{className:"relative pt-6",children:[p&&n.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 bg-black text-white text-xs md:text-sm font-medium px-4 py-1.5 rounded-full shadow-md z-10 select-none",children:" Most Popular"}),n.jsxs("div",{onClick:()=>t(u.name),className:`cursor-pointer ${A.bg} ${A.textColor} border-2 rounded-2xl px-6 py-6 flex flex-col justify-between transition-all duration-300 hover:shadow-xl ${f?"border-black scale-[1.02] shadow-2xl":A.border}`,children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg md:text-xl font-light mb-2 tracking-wide text-center",children:A.label??u.name}),n.jsx("p",{className:"text-2xl font-thin mb-4 text-center break-words",children:A.priceText?A.priceText(u.amount):u.amount}),n.jsx("ul",{className:"text-sm space-y-2 text-left",children:(u.features||[]).map((m,g)=>n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:`mr-2 mt-0.5 ${u.name==="basic"?"text-gray-600":"text-white"}`,children:""}),n.jsx("span",{className:"font-light leading-snug",children:m})]},g))})]}),n.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),t(u.name)},className:`mt-6 w-full font-medium py-2.5 rounded-lg text-sm transition-all duration-200 ${f?"bg-black text-white":u.name==="basic"?"bg-black text-white hover:bg-gray-800":"bg-white text-black hover:bg-gray-100 border border-gray-300"}`,children:f?"Selected":"Get Started"})]})]},d)})})]})})},RH=()=>{const[r,t]=ee.useState({name:"",type:"product",description:"",themeColor:"#000000",contactInfo:{email:"",phone:"",address:"",whatsapp:""}}),[s,i]=ee.useState([]),[a,o]=ee.useState([]),[c,l]=ee.useState([]),[u,d]=ee.useState(!1),[A,f]=ee.useState(""),[p,m]=ee.useState(!0),[g,b]=ee.useState(!1),[v,y]=ee.useState("basic"),{user:w,refreshUser:j}=Fn(),C=yi();ee.useEffect(()=>{w&&(w.role==="store_owner"&&w.storeId?C("/dashboard"):m(!1))},[w,C]),ee.useEffect(()=>{if(window.payhere)b(!0);else{const S=document.createElement("script");S.src="https://payhere.lk/lib/payhere.js",S.async=!0,S.onload=()=>b(!0),S.onerror=()=>{console.error("PayHere SDK failed to load"),b(!1)},document.body.appendChild(S)}},[]);const B=async S=>{S.preventDefault(),d(!0),f("");try{if(s.length<2)throw new Error("Please upload both front and back of your identity card.");if(a.length<1)throw new Error("Please upload your address verification document.");const N={maxSizeMB:.5,maxWidthOrHeight:800,useWebWorker:!0},O=await Promise.all(s.map(async L=>{const F=await ws(L,N),G=Al(hl,`documents/id_${Date.now()}_${L.name}`);return await ul(G,F),dl(G)})),k=await Promise.all(a.map(async L=>{const F=await ws(L,N),G=Al(hl,`documents/address_${Date.now()}_${L.name}`);return await ul(G,F),dl(G)})),I={name:r.name,type:r.type,description:r.description,themeColor:r.themeColor,contactInfo:r.contactInfo,timeSlots:c,idImages:O,addressVerificationImages:k},R=await fetch("http://localhost:10000/api/stores",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!R.ok){const L=await R.json();throw new Error(L.error||"Failed to create store")}const Q=await fetch("http://localhost:10000/api/subscriptions/create-subscription",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageName:v})});if(!Q.ok)return alert("Store created, but failed to start subscription. Please contact support."),await j(),C("/dashboard");const{paymentParams:$}=await Q.json();await E($),alert("Subscription payment successful!"),await j(),C("/dashboard")}catch(N){console.error("Error:",N),f(N.message||"Something went wrong. Please try again.")}finally{d(!1)}},E=S=>new Promise((N,O)=>{if(!window.payhere)return alert("Payment gateway not loaded. Please refresh and try again."),O(new Error("PayHere SDK not loaded"));window.payhere.onCompleted=function(k){console.log(" Payment completed. Order ID:",k),N(k)},window.payhere.onDismissed=function(){alert("Payment was cancelled."),O(new Error("Payment cancelled"))},window.payhere.onError=function(k){console.error(" PayHere error:",k),alert("Payment failed. Please try again."),O(new Error("Payment error: "+k))},console.log(" Starting PayHere payment with:",S),window.payhere.startPayment(S)}),_=S=>{const{name:N,value:O}=S.target;if(N.startsWith("contactInfo.")){const k=N.split(".")[1];t(I=>({...I,contactInfo:{...I.contactInfo,[k]:O}}))}else t({...r,[N]:O})};return p?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(cs,{size:"xl"})}):w?w.role==="customer"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md",children:[n.jsx(ei,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Upgrade to Store Owner"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"You need a store owner account to create a store. Please create a new store owner account."}),n.jsx(Zt,{to:"/register",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors",children:"Create Store Owner Account"})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:n.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"text-white px-8 py-8",style:{backgroundColor:r.themeColor},children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Create Your Store"}),n.jsx("p",{className:"opacity-90",children:"Start your entrepreneurial journey with AIO"})]}),n.jsx("div",{className:"p-8",children:n.jsxs("form",{onSubmit:B,className:"space-y-8",children:[A&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:A}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"What type of store do you want to create?"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("button",{type:"button",onClick:()=>t({...r,type:"product"}),className:`p-6 rounded-xl border-2 text-left transition-all hover:shadow-md ${r.type==="product"?"border-black bg-black text-white":"border-gray-200 hover:border-gray-300"}`,children:[n.jsx(ps,{className:"w-8 h-8 mb-3"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Product Store"}),n.jsx("p",{className:"text-sm opacity-80",children:"Sell physical products with inventory management and shipping"})]}),n.jsxs("button",{type:"button",onClick:()=>t({...r,type:"service"}),className:`p-6 rounded-xl border-2 text-left transition-all hover:shadow-md ${r.type==="service"?"border-black bg-black text-white":"border-gray-200 hover:border-gray-300"}`,children:[n.jsx(ms,{className:"w-8 h-8 mb-3"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Service Store"}),n.jsx("p",{className:"text-sm opacity-80",children:"Offer services with booking, scheduling, and appointment management"})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Name *"}),n.jsx("input",{type:"text",name:"name",value:r.name,onChange:_,required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"Enter your store name"})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Description *"}),n.jsx("textarea",{name:"description",value:r.description,onChange:_,required:!0,rows:4,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"Describe your store and what you offer to customers"})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[n.jsx(wl,{className:"w-5 h-5"}),n.jsx("span",{children:"Contact Information"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[n.jsx(vl,{className:"w-4 h-4"}),n.jsx("span",{children:"Email"})]}),n.jsx("input",{type:"email",name:"contactInfo.email",value:r.contactInfo.email,onChange:_,required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"store@example.com"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[n.jsx(Gu,{className:"w-4 h-4"}),n.jsx("span",{children:"Phone"})]}),n.jsx("input",{type:"tel",name:"contactInfo.phone",value:r.contactInfo.phone,onChange:_,required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"+94 77 123 4567"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[n.jsx(Ku,{className:"w-4 h-4"}),n.jsx("span",{children:"WhatsApp"})]}),n.jsx("input",{type:"tel",name:"contactInfo.whatsapp",value:r.contactInfo.whatsapp,onChange:_,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"+94 77 123 4567"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),n.jsx("textarea",{name:"contactInfo.address",value:r.contactInfo.address,onChange:_,required:!0,rows:3,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-colors",placeholder:"123 Main Street, Colombo, Sri Lanka"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Identity Verification *"}),n.jsx(Tc,{images:s,onImagesChange:i,maxImages:2,multiple:!0,className:"mb-6",idPrefix:"id"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Upload both front and back of your identity card (max 2 images)."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address Verification Document *"}),n.jsx(Tc,{images:a,onImagesChange:o,maxImages:1,multiple:!1,idPrefix:"address"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Upload a utility bill or document that verifies your address."})]}),n.jsx(pE,{selectedPackage:v,setSelectedPackage:y}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>C("/"),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:u,className:"bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[u&&n.jsx(cs,{size:"sm"}),n.jsx("span",{children:u?"Creating Store...":"Create Store"})]})]})]})})]})})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Authentication Required"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to create a store"}),n.jsx(Zt,{to:"/login",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors",children:"Login"})]})})},QH=()=>{const{user:r}=Fn(),t=yi(),[s,i]=ee.useState([]),[a,o]=ee.useState(""),[c,l]=ee.useState(""),[u,d]=ee.useState(""),[A,f]=ee.useState(0),[p,m]=ee.useState([]),[g,b]=ee.useState(!1),[v,y]=ee.useState(""),[w,j]=ee.useState({title:"",description:"",price:"",oldPrice:"",discount:"",stock:"",isPreorder:!1,shipping:"",condition:"",warrentyMonths:"",variants:[],tags:[]});ee.useEffect(()=>{C()},[]),ee.useEffect(()=>{const F=w.variants.reduce((G,X)=>G+(Number(X.stock)||0),0);f(F)},[w.variants]),ee.useEffect(()=>{if(w.oldPrice&&w.discount){const F=parseFloat(w.oldPrice),G=parseFloat(w.discount);if(F>0&&G>=0){const X=F*(1-G/100);j(q=>({...q,price:X.toFixed(2)}))}}},[w.oldPrice,w.discount]);const C=async()=>{try{const F=await fetch("http://localhost:10000/api/categories");if(!F.ok)throw new Error("Failed to fetch categories");const G=await F.json();i(G)}catch(F){console.error("Error loading categories:",F)}},B=F=>{o(F.target.value),l(""),d("")},E=F=>{l(F.target.value),d("")},_=F=>{d(F.target.value)},S=F=>{const{name:G,value:X,type:q,checked:T}=F.target;G==="price"&&w.discount?j(U=>({...U,[G]:q==="checkbox"?T:X,discount:""})):j(U=>({...U,[G]:q==="checkbox"?T:X}))},N=()=>{j(F=>({...F,variants:[...F.variants,{name:"",hex:"#000000",size:"",stock:""}]}))},O=(F,G,X)=>{const q=[...w.variants];q[F][G]=X,j(T=>({...T,variants:q}))},k=F=>{const G=w.variants.filter((X,q)=>q!==F);j(X=>({...X,variants:G}))},I=F=>{F.trim()&&!w.tags.includes(F.trim())&&j(G=>({...G,tags:[...G.tags,F.trim()]}))},R=F=>{j(G=>({...G,tags:G.tags.filter((X,q)=>q!==F)}))},Q=F=>{(F.key==="Enter"||F.key===",")&&(F.preventDefault(),I(F.target.value),F.target.value="")},$=async()=>{const F={maxSizeMB:.5,maxWidthOrHeight:1e3,useWebWorker:!0};return Promise.all(p.map(async G=>{const X=await ws(G,F),q=Al(hl,`products/id_${Date.now()}_${G.name}`);return await ul(q,X),dl(q)}))},L=async F=>{F.preventDefault(),b(!0),y("");try{const G=await $();if(!a||!c||!u){y("Please select category, subcategory, and child category."),b(!1);return}const X=w.variants.length>0?w.variants.map(({name:K,hex:z,size:M,stock:H})=>({name:K,hex:z,size:M,stock:Number(H)||0})):[],q=X.length>0?X.reduce((K,z)=>K+z.stock,0):Number(w.stock)||0,T={title:w.title,description:w.description,price:parseFloat(w.price),oldPrice:w.oldPrice?parseFloat(w.oldPrice):void 0,category:a,subcategory:c,childCategory:u,stock:q,images:G,isPreorder:w.isPreorder,shipping:w.shipping,condition:w.condition,warrentyMonths:Number(w.warrentyMonths)||0,variants:X.length>0?X:void 0},U=await fetch("http://localhost:10000/api/products",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(U.ok)t("/dashboard");else{const K=await U.json();y(K.error||"Failed to create product")}}catch(G){console.error(G),y("Network error. Please try again.")}finally{b(!1)}};return!r||r.role!=="store_owner"?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600",children:"You need to be a store owner to create products"})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Create New Product"}),v&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:v}),n.jsxs("form",{onSubmit:L,className:"space-y-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Title"}),n.jsx("input",{type:"text",name:"title",value:w.title,onChange:S,required:!0,placeholder:"Sample Product Name",className:"w-full border border-gray-300 rounded-lg px-4 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),n.jsx("textarea",{name:"description",value:w.description,onChange:S,required:!0,rows:4,placeholder:"A detailed description of the product...",className:"w-full border border-gray-300 rounded-lg px-4 py-2 resize-none"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price (LKR)"}),n.jsx("input",{type:"number",name:"price",value:w.price,onChange:S,required:!0,min:"0",step:"1",placeholder:"2999.99",className:`w-full border rounded-lg px-4 py-2 ${w.discount&&w.discount>0?"bg-gray-100":"border-gray-300"}`,disabled:!!w.discount&&w.discount>0}),w.discount&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from original price and discount"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Original Price (optional)"}),n.jsx("input",{type:"number",name:"oldPrice",value:w.oldPrice,onChange:S,min:"0",step:"1",className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount (%) (optional)"}),n.jsx("input",{type:"number",name:"discount",value:w.discount,onChange:S,min:"0",max:"100",step:"1",className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Stock Quantity"}),n.jsx("input",{type:"number",name:"stock",value:w.variants.length>0?A:w.stock,onChange:S,min:"0",className:`w-full border rounded-lg px-4 py-2 ${w.variants.length>0?"bg-gray-100 cursor-not-allowed":"border-gray-300"}`,placeholder:"0",disabled:w.variants.length>0,required:w.variants.length===0}),w.variants.length>0&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Stock is managed via variants and cannot be set here."})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:n.jsxs("div",{className:"flex items-center space-x-2 mt-6 md:mt-0",children:[n.jsx("input",{type:"checkbox",name:"isPreorder",checked:w.isPreorder,onChange:S,id:"isPreorder",className:"h-5 w-5"}),n.jsx("label",{htmlFor:"isPreorder",className:"text-sm font-medium",children:"Is Preorder"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),n.jsxs("select",{value:a,onChange:B,required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"",children:"Select a category"}),s.map(F=>n.jsx("option",{value:F.name,children:F.name},F._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subcategory"}),n.jsxs("select",{value:c,onChange:E,required:!0,disabled:!a,className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"",children:"Select a subcategory"}),s.find(F=>F.name===a)?.subcategories.map(F=>n.jsx("option",{value:F.name,children:F.name},F.name))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Child Category"}),n.jsxs("select",{value:u,onChange:_,required:!0,disabled:!c,className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"",children:"Select a child category"}),s.find(F=>F.name===a)?.subcategories.find(F=>F.name===c)?.childCategories.map(F=>n.jsx("option",{value:F,children:F},F))]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Shipping Info"}),n.jsxs("select",{name:"shipping",value:w.shipping,onChange:S,className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"",children:"Select shipping"}),n.jsx("option",{value:"free-shipping",children:"Free Shipping"}),n.jsx("option",{value:"paid-shipping",children:"Paid Shipping"}),n.jsx("option",{value:"local-pickup",children:"Local Pickup"})]}),n.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["You can only charge for the ",n.jsx("b",{children:"Paid Shipping"})," fees through the user."]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Condition"}),n.jsxs("select",{name:"condition",value:w.condition,onChange:S,className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[n.jsx("option",{value:"",children:"Select condition"}),n.jsx("option",{value:"new",children:"New"}),n.jsx("option",{value:"used",children:"Used"}),n.jsx("option",{value:"refurbished",children:"Refurbished"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Warranty Months"}),n.jsx("input",{type:"number",name:"warrentyMonths",value:w.warrentyMonths,onChange:S,min:"0",className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Variants"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Add color, size, and stock for each variant combination."}),w.variants.map((F,G)=>n.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[n.jsx(fE,{selectedColor:F.name,onColorSelect:(X,q)=>{O(X,"name",q)},variantIndex:G}),n.jsx("input",{type:"text",placeholder:"Size (e.g. M, L, 42)",value:F.size,onChange:X=>O(G,"size",X.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 w-32 h-10"}),n.jsx("input",{type:"number",placeholder:"Stock",value:F.stock,onChange:X=>O(G,"stock",X.target.value),min:"0",className:"border border-gray-300 rounded-lg px-3 py-2 w-20 h-10",required:!0}),n.jsx("button",{type:"button",onClick:()=>k(G),className:"text-red-500 hover:text-red-700 px-2 py-2 h-10 flex items-center",children:"Remove"})]},G)),n.jsx("button",{type:"button",onClick:N,className:"text-blue-500 hover:text-blue-700 font-medium",children:"+ Add Variant"}),w.variants.length>0&&n.jsxs("p",{className:"text-sm font-medium mt-2",children:["Total Stock (from variants):"," ",n.jsx("span",{className:"text-green-600 font-semibold",children:A})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Service Tags"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Press Enter or comma to add tags. Great for search and categorization."}),n.jsx("input",{type:"text",placeholder:"Type a tag and press Enter...",onKeyDown:Q,className:"w-full border border-gray-300 rounded-lg px-4 py-2 mb-3"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:w.tags.map((F,G)=>n.jsxs("span",{className:"bg-black text-white  px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[F,n.jsx("button",{type:"button",onClick:()=>R(G),className:"text-white hover:text-red-500 font-bold",children:""})]},G))}),w.tags.length===0&&n.jsx("p",{className:"text-gray-400 text-sm",children:"No tags added yet"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Images (up to 10)"}),n.jsx(Tc,{images:p,onImagesChange:m,maxImages:10,multiple:!0})]}),n.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[n.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:g,className:"bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 disabled:opacity-50",children:g?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(cs,{size:"sm"}),n.jsx("span",{children:"Creating..."})]}):"Create Product"})]})]})]})})})},$H=()=>{const{user:r}=Fn(),t=yi(),[s,i]=ee.useState([]),[a,o]=ee.useState(""),[c,l]=ee.useState(""),[u,d]=ee.useState(""),[A,f]=ee.useState([]),[p,m]=ee.useState(!1),[g,b]=ee.useState(""),[v,y]=ee.useState({title:"",description:"",price:"",oldPrice:"",discount:"",duration:30,tags:[]});ee.useEffect(()=>{if(v.oldPrice&&v.discount){const R=parseFloat(v.oldPrice),Q=parseFloat(v.discount);if(R>0&&Q>=0){const $=R*(1-Q/100);y(L=>({...L,price:$.toFixed(2)}))}}},[v.oldPrice,v.discount]);const w=[{value:30,label:"30 minutes"},{value:60,label:"1 hour"},{value:90,label:"1 hour 30 minutes"},{value:120,label:"2 hours"},{value:150,label:"2 hours 30 minutes"},{value:180,label:"3 hours"},{value:210,label:"3 hours 30 minutes"},{value:240,label:"4 hours"},{value:270,label:"4 hours 30 minutes"},{value:300,label:"5 hours"},{value:330,label:"5 hours 30 minutes"},{value:360,label:"6 hours"}];ee.useEffect(()=>{j()},[]);const j=async()=>{try{const R=await fetch("http://localhost:10000/api/categories");if(!R.ok)throw new Error("Failed to fetch categories");const Q=await R.json();i(Q)}catch(R){console.error("Error loading categories:",R)}},C=R=>{o(R.target.value),l(""),d("")},B=R=>{l(R.target.value),d("")},E=R=>{d(R.target.value)},_=R=>{const{name:Q,value:$,type:L,checked:F}=R.target;y(G=>({...G,[Q]:L==="checkbox"?F:$}))},S=async()=>{const R={maxSizeMB:.5,maxWidthOrHeight:1e3,useWebWorker:!0};return Promise.all(A.map(async Q=>{const $=await ws(Q,R),L=Al(hl,`services/id_${Date.now()}_${Q.name}`);return await ul(L,$),dl(L)}))},N=R=>{R.trim()&&!v.tags.includes(R.trim())&&y(Q=>({...Q,tags:[...Q.tags,R.trim()]}))},O=R=>{y(Q=>({...Q,tags:Q.tags.filter(($,L)=>L!==R)}))},k=R=>{(R.key==="Enter"||R.key===",")&&(R.preventDefault(),N(R.target.value),R.target.value="")},I=async R=>{R.preventDefault(),m(!0),b("");try{const Q=await S();if(!a||!c||!u){b("Please select category, subcategory, and child category."),m(!1);return}if(!r?.storeId){b("Store information not found. Please ensure you have a store setup."),m(!1);return}const $={title:v.title,description:v.description,price:parseFloat(v.price),oldPrice:v.oldPrice?parseFloat(v.oldPrice):void 0,duration:parseInt(v.duration),category:a,subcategory:c,childCategory:u,images:Q},L=await fetch("http://localhost:10000/api/services",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(L.ok)t("/dashboard");else{const F=await L.json();b(F.error||"Failed to create service")}}catch(Q){console.error(Q),b("Network error. Please try again.")}finally{m(!1)}};return!r||r.role!=="store_owner"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center bg-white p-8 rounded-lg shadow-sm",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600",children:"You need to be a store owner to create services"})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"px-8 py-6 border-b border-gray-200",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Service"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Set up your service with available time slots"})]}),n.jsxs("div",{className:"p-8",children:[g&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:g}),n.jsxs("form",{onSubmit:I,className:"space-y-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Title *"}),n.jsx("input",{type:"text",name:"title",value:v.title,onChange:_,required:!0,placeholder:"e.g., Hair Cut & Styling",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration *"}),n.jsx("select",{name:"duration",value:v.duration,onChange:_,required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-black focus:border-transparent",children:w.map(R=>n.jsx("option",{value:R.value,children:R.label},R.value))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price (LKR)"}),n.jsx("input",{type:"number",name:"price",value:v.price,onChange:_,required:!0,min:"0",step:"1",placeholder:"2999.99",className:`w-full border rounded-lg px-4 py-2 ${v.discount&&v.discount>0?"bg-gray-100":"border-gray-300"}`,disabled:!!v.discount&&v.discount>0}),v.discount&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from original price and discount"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Original Price (optional)"}),n.jsx("input",{type:"number",name:"oldPrice",value:v.oldPrice,onChange:_,min:"0",step:"1",className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount (%) (optional)"}),n.jsx("input",{type:"number",name:"discount",value:v.discount,onChange:_,min:"0",max:"100",step:"1",className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),n.jsx("textarea",{name:"description",value:v.description,onChange:_,required:!0,rows:4,placeholder:"Describe your service in detail...",className:"w-full border border-gray-300 rounded-lg px-4 py-3 resize-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),n.jsxs("select",{value:a,onChange:C,required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select category"}),s.map(R=>n.jsx("option",{value:R.name,children:R.name},R._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subcategory *"}),n.jsxs("select",{value:c,onChange:B,required:!0,disabled:!a,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-black focus:border-transparent disabled:bg-gray-100",children:[n.jsx("option",{value:"",children:"Select subcategory"}),s.find(R=>R.name===a)?.subcategories.map(R=>n.jsx("option",{value:R.name,children:R.name},R.name))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Child Category *"}),n.jsxs("select",{value:u,onChange:E,required:!0,disabled:!c,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-black focus:border-transparent disabled:bg-gray-100",children:[n.jsx("option",{value:"",children:"Select child category"}),s.find(R=>R.name===a)?.subcategories.find(R=>R.name===c)?.childCategories.map(R=>n.jsx("option",{value:R,children:R},R))]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Service Tags"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Press Enter or comma to add tags. Great for search and categorization."}),n.jsx("input",{type:"text",placeholder:"Type a tag and press Enter...",onKeyDown:k,className:"w-full border border-gray-300 rounded-lg px-4 py-2 mb-3"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:v.tags.map((R,Q)=>n.jsxs("span",{className:"bg-black text-white  px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[R,n.jsx("button",{type:"button",onClick:()=>O(Q),className:"text-white hover:text-red-500 font-bold",children:""})]},Q))}),v.tags.length===0&&n.jsx("p",{className:"text-gray-400 text-sm",children:"No tags added yet"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Service Images"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Images (up to 10)"}),n.jsx(Tc,{images:A,onImagesChange:f,maxImages:10,multiple:!0})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:p,className:"bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(cs,{size:"sm"}),n.jsx("span",{children:"Creating Service..."})]}):"Create Service"})]})]})]})]})})})},HH=()=>{const{user:r}=Fn(),t=yi(),[s,i]=ee.useState([]),[a,o]=ee.useState(!0),[c,l]=ee.useState(null),[u,d]=ee.useState(null),[A,f]=ee.useState(!1);ee.useEffect(()=>{r?.role==="store_owner"&&r?.storeId?p():t("/dashboard")},[r,t]);const p=async()=>{try{o(!0);const v=await fetch(`http://localhost:10000/api/products?storeId=${r.storeId}`,{credentials:"include"});if(v.ok){const y=await v.json();i(y)}else console.error("Failed to fetch products")}catch(v){console.error("Error fetching products:",v)}finally{o(!1)}},m=async v=>{if(confirm("Are you sure you want to delete this product?")){l(v);try{(await fetch(`http://localhost:10000/api/products/${v}`,{method:"DELETE",credentials:"include"})).ok?(i(s.filter(w=>w._id!==v)),alert("Product deleted successfully!")):alert("Failed to delete product")}catch(y){console.error("Error deleting product:",y),alert("Error deleting product")}finally{l(null)}}},g=v=>{d({...v,price:v.price?.toString()||"",stock:v.stock?.toString()||"",variants:{colors:v.variants?.colors||[],sizes:v.variants?.sizes||[]}}),f(!0)},b=async v=>{v.preventDefault();try{const y={title:u.title,description:u.description,price:parseFloat(u.price),category:u.category,stock:parseInt(u.stock,10),...u.variants?.colors?.length>0||u.variants?.sizes?.length>0?{variants:u.variants}:{}};(await fetch(`http://localhost:10000/api/products/${u._id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).ok?(p(),f(!1),d(null),alert("Product updated successfully!")):alert("Failed to update product")}catch(y){console.error("Error updating product:",y),alert("Error updating product")}};return!r||r.role!=="store_owner"?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600",children:"You need to be a store owner to access this page"})]})}):a?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(cs,{size:"xl"})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs(Zt,{to:"/dashboard",className:"flex items-center space-x-2 text-gray-600 hover:text-black transition-colors mb-4",children:[n.jsx(oc,{className:"w-4 h-4"}),n.jsx("span",{children:"Back to Dashboard"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Products"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Add, edit, and manage your products"})]}),n.jsxs(Zt,{to:"/create-product",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors flex items-center space-x-2",children:[n.jsx(Ua,{className:"w-5 h-5"}),n.jsx("span",{children:"Add New Product"})]})]})]}),s.length===0?n.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[n.jsx(ps,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Products Yet"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Start by creating your first product"}),n.jsxs(Zt,{to:"/create-product",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors inline-flex items-center space-x-2",children:[n.jsx(Ua,{className:"w-5 h-5"}),n.jsx("span",{children:"Create Product"})]})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(v=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:v.images?.[0]?v.images[0].startsWith("http")?v.images[0]:`http://localhost:10000${v.images[0]}`:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",alt:v.title,className:"w-full h-48 object-cover"}),n.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded text-sm ${v.isActive?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:v.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:v.title}),n.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:v.description}),n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-2xl font-bold",children:Br(v.price)}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(mn,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),n.jsx("span",{className:"text-sm text-gray-600",children:"4.5"})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("span",{className:"text-sm text-gray-500",children:v.stock>0?`${v.stock} in stock`:"Out of stock"}),n.jsx("span",{className:"text-sm text-gray-500 capitalize",children:v.category})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(Zt,{to:`/product/${v._id}`,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-3 rounded text-sm hover:bg-gray-200 transition-colors flex items-center justify-center space-x-1",children:[n.jsx(Gn,{className:"w-4 h-4"}),n.jsx("span",{children:"View"})]}),n.jsxs("button",{onClick:()=>g(v),className:"flex-1 bg-blue-500 text-white py-2 px-3 rounded text-sm hover:bg-blue-600 transition-colors flex items-center justify-center space-x-1",children:[n.jsx(rA,{className:"w-4 h-4"}),n.jsx("span",{children:"Edit"})]}),n.jsxs("button",{onClick:()=>m(v._id),disabled:c===v._id,className:"flex-1 bg-red-500 text-white py-2 px-3 rounded text-sm hover:bg-red-600 transition-colors disabled:opacity-50 flex items-center justify-center space-x-1",children:[n.jsx(Rc,{className:"w-4 h-4"}),n.jsx("span",{children:c===v._id?"Deleting...":"Delete"})]})]})]})]},v._id))}),A&&u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Product"}),n.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),n.jsxs("form",{onSubmit:b,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Title"}),n.jsx("input",{type:"text",value:u.title,onChange:v=>d({...u,title:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{value:u.description,onChange:v=>d({...u,description:v.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (LKR)"}),n.jsx("input",{type:"number",value:u.price,onChange:v=>d({...u,price:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",required:!0,min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Quantity"}),n.jsx("input",{type:"number",value:u.stock,onChange:v=>d({...u,stock:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",required:!0,min:"0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),n.jsxs("select",{value:u.category,onChange:v=>d({...u,category:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"Select a category"}),n.jsx("option",{value:"Electronics",children:"Electronics"}),n.jsx("option",{value:"Clothing",children:"Clothing"}),n.jsx("option",{value:"Home & Garden",children:"Home & Garden"}),n.jsx("option",{value:"Sports & Outdoors",children:"Sports & Outdoors"}),n.jsx("option",{value:"Books",children:"Books"}),n.jsx("option",{value:"Beauty & Health",children:"Beauty & Health"}),n.jsx("option",{value:"Toys & Games",children:"Toys & Games"}),n.jsx("option",{value:"Food & Beverages",children:"Food & Beverages"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Variants"}),(u?.variants?.colors||[]).map((v,y)=>n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("input",{type:"text",placeholder:"Color Name",value:v.name,onChange:w=>{const j=[...u.variants.colors];j[y].name=w.target.value,d(C=>({...C,variants:{...C.variants,colors:j}}))},className:"border border-gray-300 rounded px-2 py-1"}),n.jsx("input",{type:"color",value:v.hex,onChange:w=>{const j=[...u.variants.colors];j[y].hex=w.target.value,d(C=>({...C,variants:{...C.variants,colors:j}}))},className:"w-10 h-10 border"}),n.jsx("button",{type:"button",onClick:()=>{const w=u.variants.colors.filter((j,C)=>C!==y);d(j=>({...j,variants:{...j.variants,colors:w}}))},className:"text-red-500 hover:underline",children:"Remove"})]},y)),n.jsx("button",{type:"button",onClick:()=>{d(v=>({...v,variants:{...v.variants,colors:[...v.variants.colors||[],{name:"",hex:"#000000"}]}}))},className:"text-blue-500 hover:underline mt-2",children:"+ Add Color"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Size Variants"}),(u?.variants?.sizes||[]).map((v,y)=>n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("input",{type:"text",placeholder:"Size Name",value:v.name,onChange:w=>{const j=[...u.variants.sizes];j[y].name=w.target.value,d(C=>({...C,variants:{...C.variants,sizes:j}}))},className:"border border-gray-300 rounded px-2 py-1"}),n.jsxs("select",{value:v.inStock?"true":"false",onChange:w=>{const j=[...u.variants.sizes];j[y].inStock=w.target.value==="true",d(C=>({...C,variants:{...C.variants,sizes:j}}))},className:"border border-gray-300 rounded px-2 py-1",children:[n.jsx("option",{value:"true",children:"In Stock"}),n.jsx("option",{value:"false",children:"Out of Stock"})]}),n.jsx("button",{type:"button",onClick:()=>{const w=u.variants.sizes.filter((j,C)=>C!==y);d(j=>({...j,variants:{...j.variants,sizes:w}}))},className:"text-red-500 hover:underline",children:"Remove"})]},y)),n.jsx("button",{type:"button",onClick:()=>{d(v=>({...v,variants:{...v.variants,sizes:[...v.variants.sizes||[],{name:"",inStock:!0}]}}))},className:"text-blue-500 hover:underline mt-2",children:"+ Add Size"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800",children:"Update Product"})]})]})]})})})]})})},VH=()=>{const{user:r}=Fn(),t=yi(),[s,i]=ee.useState([]),[a,o]=ee.useState(!0),[c,l]=ee.useState(null),[u,d]=ee.useState(null),[A,f]=ee.useState(!1);ee.useEffect(()=>{r?.role==="store_owner"&&r?.storeId?p():t("/dashboard")},[r,t]);const p=async()=>{try{o(!0);const v=await fetch(`http://localhost:10000/api/services?storeId=${r.storeId}`,{credentials:"include"});if(v.ok){const y=await v.json();i(y)}else console.error("Failed to fetch services")}catch(v){console.error("Error fetching services:",v)}finally{o(!1)}},m=async v=>{if(confirm("Are you sure you want to delete this service?")){l(v);try{(await fetch(`http://localhost:10000/api/services/${v}`,{method:"DELETE",credentials:"include"})).ok?(i(s.filter(w=>w._id!==v)),alert("Service deleted successfully!")):alert("Failed to delete service")}catch(y){console.error("Error deleting service:",y),alert("Error deleting service")}finally{l(null)}}},g=v=>{d({...v,price:v.price.toString(),duration:v.duration.toString()}),f(!0)},b=async v=>{v.preventDefault();try{const y={title:u.title,description:u.description,price:u.price,priceType:u.priceType,category:u.category,duration:u.duration};(await fetch(`http://localhost:10000/api/services/${u._id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).ok?(p(),f(!1),d(null),alert("Service updated successfully!")):alert("Failed to update service")}catch(y){console.error("Error updating service:",y),alert("Error updating service")}};return!r||r.role!=="store_owner"?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600",children:"You need to be a store owner to access this page"})]})}):a?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(cs,{size:"xl"})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs(Zt,{to:"/dashboard",className:"flex items-center space-x-2 text-gray-600 hover:text-black transition-colors mb-4",children:[n.jsx(oc,{className:"w-4 h-4"}),n.jsx("span",{children:"Back to Dashboard"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Services"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Add, edit, and manage your services"})]}),n.jsxs(Zt,{to:"/create-service",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors flex items-center space-x-2",children:[n.jsx(Ua,{className:"w-5 h-5"}),n.jsx("span",{children:"Add New Service"})]})]})]}),s.length===0?n.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[n.jsx(ms,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Services Yet"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Start by creating your first service"}),n.jsxs(Zt,{to:"/create-service",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors inline-flex items-center space-x-2",children:[n.jsx(Ua,{className:"w-5 h-5"}),n.jsx("span",{children:"Create Service"})]})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(v=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:v.images?.[0]?v.images[0].startsWith("http")?v.images[0]:`http://localhost:10000${v.images[0]}`:"https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400&h=300&fit=crop",alt:v.title,className:"w-full h-48 object-cover"}),n.jsx("div",{className:"absolute top-2 left-2 bg-black text-white px-2 py-1 rounded text-sm",children:v.priceType}),n.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded text-sm ${v.isActive?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:v.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:v.title}),n.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:v.description}),n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("span",{className:"text-2xl font-bold",children:[Br(v.price),n.jsx("span",{className:"text-sm text-gray-500 ml-1",children:v.priceType==="hourly"?"/hour":""})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(mn,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),n.jsx("span",{className:"text-sm text-gray-600",children:"4.5"})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[n.jsx(is,{className:"w-4 h-4"}),n.jsxs("span",{children:[v.duration," min"]})]}),n.jsx("span",{className:"text-sm text-gray-500 capitalize",children:v.category})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(Zt,{to:`/service/${v._id}`,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-3 rounded text-sm hover:bg-gray-200 transition-colors flex items-center justify-center space-x-1",children:[n.jsx(Gn,{className:"w-4 h-4"}),n.jsx("span",{children:"View"})]}),n.jsxs("button",{onClick:()=>g(v),className:"flex-1 bg-blue-500 text-white py-2 px-3 rounded text-sm hover:bg-blue-600 transition-colors flex items-center justify-center space-x-1",children:[n.jsx(rA,{className:"w-4 h-4"}),n.jsx("span",{children:"Edit"})]}),n.jsxs("button",{onClick:()=>m(v._id),disabled:c===v._id,className:"flex-1 bg-red-500 text-white py-2 px-3 rounded text-sm hover:bg-red-600 transition-colors disabled:opacity-50 flex items-center justify-center space-x-1",children:[n.jsx(Rc,{className:"w-4 h-4"}),n.jsx("span",{children:c===v._id?"Deleting...":"Delete"})]})]})]})]},v._id))}),A&&u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Service"}),n.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),n.jsxs("form",{onSubmit:b,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Title"}),n.jsx("input",{type:"text",value:u.title,onChange:v=>d({...u,title:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{value:u.description,onChange:v=>d({...u,description:v.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (LKR)"}),n.jsx("input",{type:"number",value:u.price,onChange:v=>d({...u,price:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",required:!0,min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),n.jsx("input",{type:"number",value:u.duration,onChange:v=>d({...u,duration:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",required:!0,min:"15",step:"15"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Type"}),n.jsxs("select",{value:u.priceType,onChange:v=>d({...u,priceType:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"fixed",children:"Fixed Price"}),n.jsx("option",{value:"hourly",children:"Hourly Rate"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),n.jsxs("select",{value:u.category,onChange:v=>d({...u,category:v.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"Select a category"}),n.jsx("option",{value:"Tutoring",children:"Tutoring"}),n.jsx("option",{value:"Home Services",children:"Home Services"}),n.jsx("option",{value:"Beauty & Wellness",children:"Beauty & Wellness"}),n.jsx("option",{value:"Consulting",children:"Consulting"}),n.jsx("option",{value:"Fitness",children:"Fitness"}),n.jsx("option",{value:"Technology",children:"Technology"}),n.jsx("option",{value:"Creative Services",children:"Creative Services"}),n.jsx("option",{value:"Professional Services",children:"Professional Services"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800",children:"Update Service"})]})]})]})})})]})})},c4=({status:r,type:t="order"})=>{const i={order:{pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pending"},accepted:{bg:"bg-blue-100",text:"text-blue-800",label:"Accepted"},processing:{bg:"bg-blue-100",text:"text-blue-800",label:"Processing"},ready:{bg:"bg-indigo-100",text:"text-indigo-800",label:"Ready for Pickup"},shipped:{bg:"bg-purple-100",text:"text-purple-800",label:"Shipped"},delivered:{bg:"bg-green-100",text:"text-green-800",label:"Delivered"},cancelled:{bg:"bg-red-100",text:"text-red-800",label:"Cancelled"}},booking:{pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pending"},confirmed:{bg:"bg-blue-100",text:"text-blue-800",label:"Confirmed"},completed:{bg:"bg-green-100",text:"text-green-800",label:"Completed"},cancelled:{bg:"bg-red-100",text:"text-red-800",label:"Cancelled"}},payment:{pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pending"},paid:{bg:"bg-green-100",text:"text-green-800",label:"Paid"},failed:{bg:"bg-red-100",text:"text-red-800",label:"Failed"},refunded:{bg:"bg-gray-100",text:"text-gray-800",label:"Refunded"}}}[t]?.[r]||{bg:"bg-gray-100",text:"text-gray-800",label:r};return n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.bg} ${i.text}`,children:i.label})},zH=()=>{const{user:r}=Fn(),t=yi(),[s,i]=ee.useState([]),[a,o]=ee.useState(!0),[c,l]=ee.useState("all"),[u,d]=ee.useState(null),[A,f]=ee.useState(null),[p,m]=ee.useState(!1),[g,b]=ee.useState(null),[v,y]=ee.useState({rating:5,comment:""}),[w,j]=ee.useState(!1),[C,B]=ee.useState(null),[E,_]=ee.useState(null),[S,N]=ee.useState(null),[O,k]=ee.useState(null),[I,R]=ee.useState(new Set);ee.useEffect(()=>{if(r){Q();const H=setInterval(Q,3e4);return()=>clearInterval(H)}},[r]);const Q=async()=>{try{o(!0);const H=r.role==="store_owner"?"/api/orders/store":"/api/orders/customer",Y=await fetch(`http://localhost:10000${H}`,{credentials:"include"});if(Y.ok){const ae=await Y.json();i(ae)}}catch(H){console.error("Error fetching orders:",H)}finally{o(!1)}},$=async(H,Y,ae="")=>{try{(await fetch(`http://localhost:10000/api/orders/${H}/status`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:Y,notes:ae})})).ok&&(Q(),d(null))}catch(oe){console.error("Error updating order status:",oe)}},L=H=>{b(H),y({rating:5,comment:""}),m(!0)},F=async H=>{H.preventDefault(),j(!0);try{const Y=await fetch("http://localhost:10000/api/reviews",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({storeId:g.storeId._id||g.storeId,orderId:g._id,rating:v.rating,comment:v.comment})});if(Y.ok)alert("Review submitted successfully!"),m(!1),b(null),Q();else{const ae=await Y.json();alert(`Error: ${ae.error}`)}}catch(Y){console.error("Error submitting review:",Y),alert("Failed to submit review. Please try again.")}finally{j(!1)}},G=H=>{switch(H){case"pending":return n.jsx(is,{className:"w-4 h-4"});case"accepted":return n.jsx(Xr,{className:"w-4 h-4"});case"processing":return n.jsx(ps,{className:"w-4 h-4"});case"ready":return n.jsx(ps,{className:"w-4 h-4"});case"shipped":return n.jsx(Hu,{className:"w-4 h-4"});case"delivered":return n.jsx(Xr,{className:"w-4 h-4"});case"completed":return n.jsx(Xr,{className:"w-4 h-4"});case"cancelled":return n.jsx(mo,{className:"w-4 h-4"});default:return n.jsx(ps,{className:"w-4 h-4"})}},X=H=>{t(`/receipt/${H}?type=order`)},q=async H=>{if(confirm("Are you sure you want to mark this order as delivered?"))try{B(H);const Y=await fetch(`http://localhost:10000/api/orders/${H}/mark-delivered`,{method:"PUT",credentials:"include"});if(Y.ok)alert("Order marked as delivered successfully!"),Q();else{const ae=await Y.json();alert(`Error: ${ae.error}`)}}catch(Y){console.error("Error marking order as delivered:",Y),alert("Error marking order as delivered. Please try again.")}finally{B(null)}},T=async H=>{if(confirm("Have you completed the bank transfer? The seller will need to verify your payment."))try{N(H);const Y=await fetch(`http://localhost:10000/api/orders/${H}/mark-payment-sent`,{method:"PUT",credentials:"include"});if(Y.ok)alert("Payment marked as sent! The seller will verify and confirm your payment."),Q();else{const ae=await Y.json();alert(`Error: ${ae.error}`)}}catch(Y){console.error("Error marking payment as sent:",Y),alert("Error marking payment as sent. Please try again.")}finally{N(null)}},U=async(H,Y)=>{if(confirm(`Are you sure you want to mark this payment as ${Y}?`))try{_(H);const ae=await fetch(`http://localhost:10000/api/orders/${H}/update-payment-status`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:Y})});if(ae.ok)alert("Payment status updated successfully!"),Q();else{const oe=await ae.json();alert(`Error: ${oe.error}`)}}catch(ae){console.error("Error updating payment status:",ae),alert("Error updating payment status. Please try again.")}finally{_(null)}},K=async H=>{if(confirm("Are you sure you want to confirm that you received this order?"))try{k(H);const Y=await fetch(`http://localhost:10000/api/orders/${H}/confirm-delivery`,{method:"PUT",credentials:"include"});if(Y.ok)alert("Order confirmed successfully! Thank you for your confirmation."),Q();else{const ae=await Y.json();alert(`Error: ${ae.error}`)}}catch(Y){console.error("Error confirming order:",Y),alert("Error confirming order. Please try again.")}finally{k(null)}},z=H=>{const Y=new Set(I);Y.has(H)?Y.delete(H):Y.add(H),R(Y)},M=s.filter(H=>c==="all"||H.status===c);return r?a?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(cs,{size:"xl"})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.role==="store_owner"?"Store Orders":"My Orders"}),n.jsxs("p",{className:"text-gray-600 mt-2",children:[s.length," order",s.length!==1?"s":""," found"]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:n.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"All Orders"},{key:"pending",label:"Pending"},{key:"accepted",label:"Accepted"},{key:"processing",label:"Processing"},{key:"ready",label:"Ready"},{key:"shipped",label:"Shipped"},{key:"delivered",label:"Delivered"},{key:"completed",label:"Completed"},{key:"cancelled",label:"Cancelled"}].map(({key:H,label:Y})=>n.jsx("button",{onClick:()=>l(H),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c===H?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Y},H))})}),M.length===0?n.jsx(V1,{icon:ps,title:"No orders found",description:"You haven't placed any orders yet or no orders match your current filter."}):n.jsx("div",{className:"space-y-2",children:M.map(H=>{const Y=I.has(H._id),ae=H.items.reduce((oe,be)=>oe+be.quantity,0);return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200",children:[n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>z(H._id),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[G(H.status),n.jsxs("span",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:["#",H._id.slice(-8)]})]}),n.jsx(c4,{status:H.status})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"font-bold text-gray-900 text-sm sm:text-base",children:["LKR ",H.totalAmount]}),n.jsx("p",{className:"text-xs text-gray-500",children:H.paymentDetails?.paymentStatus==="paid"?"Paid":H.paymentDetails?.paymentStatus==="customer_paid_pending_confirmation"?"Awaiting Confirmation":"Pending"})]}),n.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:Y?n.jsx(Uk,{className:"w-5 h-5"}):n.jsx(Qp,{className:"w-5 h-5"})})]})]}),n.jsx("div",{className:"mt-3 sm:hidden",children:n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("span",{children:[ae," item",ae!==1?"s":""]}),n.jsx("span",{children:new Date(H.createdAt).toLocaleDateString()})]}),n.jsxs("div",{children:[r.role==="store_owner"&&n.jsx("span",{children:H.customerId?.name||"Unknown"}),r.role==="customer"&&n.jsx("span",{className:"truncate max-w-24",children:H.storeId?.name||"Unknown Store"})]})]})}),n.jsxs("div",{className:"hidden sm:flex items-center justify-between mt-2",children:[n.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[n.jsxs("span",{children:[ae," item",ae!==1?"s":""]}),n.jsx("span",{children:new Date(H.createdAt).toLocaleDateString()}),r.role==="store_owner"&&n.jsxs("span",{children:["Customer: ",H.customerId?.name||"Unknown"]}),r.role==="customer"&&n.jsxs("span",{children:["Store: ",H.storeId?.name||"Unknown Store"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[r.role==="store_owner"&&H.status!=="cancelled"&&n.jsxs(n.Fragment,{children:[H.paymentDetails?.paymentMethod==="bank_transfer"&&H.paymentDetails?.paymentStatus==="pending_bank_transfer"&&n.jsx("button",{onClick:oe=>{oe.stopPropagation(),U(H._id,"paid")},disabled:E===H._id,className:"bg-black text-white px-3 py-1.5 rounded text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 min-h-[36px]",children:E===H._id?"...":"Mark Paid"}),H.paymentDetails?.paymentMethod==="bank_transfer"&&H.paymentDetails?.paymentStatus==="customer_paid_pending_confirmation"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:oe=>{oe.stopPropagation(),U(H._id,"paid")},disabled:E===H._id,className:"bg-green-600 text-white px-3 py-1.5 rounded text-sm hover:bg-green-700 transition-colors disabled:opacity-50 min-h-[36px]",children:E===H._id?"...":"Confirm"}),n.jsx("button",{onClick:oe=>{oe.stopPropagation(),U(H._id,"failed")},disabled:E===H._id,className:"bg-red-600 text-white px-3 py-1.5 rounded text-sm hover:bg-red-700 transition-colors disabled:opacity-50 min-h-[36px]",children:E===H._id?"...":"Reject"})]}),H.paymentDetails?.paymentMethod==="cod"&&H.paymentDetails?.paymentStatus==="cod_pending"&&n.jsx("button",{onClick:oe=>{oe.stopPropagation(),U(H._id,"paid")},disabled:E===H._id,className:"bg-black text-white px-3 py-1.5 rounded text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 min-h-[36px]",children:E===H._id?"...":"Mark Paid"})]}),r.role==="customer"&&H.status!=="cancelled"&&H.paymentDetails?.paymentMethod==="bank_transfer"&&H.paymentDetails?.paymentStatus==="pending_bank_transfer"&&n.jsx("button",{onClick:oe=>{oe.stopPropagation(),T(H._id)},disabled:S===H._id,className:"bg-blue-600 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-700 transition-colors disabled:opacity-50 min-h-[36px]",children:S===H._id?"...":"Mark as Paid"}),r.role==="customer"&&H.status!=="cancelled"&&H.paymentDetails?.paymentMethod==="cod"&&H.paymentDetails?.paymentStatus==="cod_pending"&&H.canCustomerUpdateStatus&&n.jsx("button",{onClick:oe=>{oe.stopPropagation(),q(H._id)},disabled:C===H._id,className:"bg-black text-white px-3 py-1.5 rounded text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 min-h-[36px]",children:C===H._id?"...":"Mark Delivered"}),r.role==="customer"&&H.status==="delivered"&&n.jsx("button",{onClick:oe=>{oe.stopPropagation(),K(H._id)},disabled:O===H._id,className:"bg-green-600 text-white px-3 py-1.5 rounded text-sm hover:bg-green-700 transition-colors disabled:opacity-50 min-h-[36px]",children:O===H._id?"...":"Confirm Delivery"})]})]}),n.jsxs("div",{className:"sm:hidden",children:[r.role==="store_owner"&&H.status!=="cancelled"&&n.jsxs("div",{className:"mt-3 space-y-2",children:[H.paymentDetails?.paymentMethod==="bank_transfer"&&H.paymentDetails?.paymentStatus==="pending_bank_transfer"&&n.jsx("button",{onClick:oe=>{oe.stopPropagation(),U(H._id,"paid")},disabled:E===H._id,className:"w-full bg-black text-white py-2.5 rounded-lg text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 font-medium",children:E===H._id?"Updating Payment...":"Mark Payment as Paid"}),H.paymentDetails?.paymentMethod==="bank_transfer"&&H.paymentDetails?.paymentStatus==="customer_paid_pending_confirmation"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:oe=>{oe.stopPropagation(),U(H._id,"paid")},disabled:E===H._id,className:"w-full bg-green-600 text-white py-2.5 rounded-lg text-sm hover:bg-green-700 transition-colors disabled:opacity-50 font-medium",children:E===H._id?"Confirming Payment...":"Confirm Customer Payment"}),n.jsx("button",{onClick:oe=>{oe.stopPropagation(),U(H._id,"failed")},disabled:E===H._id,className:"w-full bg-red-600 text-white py-2.5 rounded-lg text-sm hover:bg-red-700 transition-colors disabled:opacity-50 font-medium",children:E===H._id?"Rejecting Payment...":"Reject Customer Payment"})]}),H.paymentDetails?.paymentMethod==="cod"&&H.paymentDetails?.paymentStatus==="cod_pending"&&n.jsx("button",{onClick:oe=>{oe.stopPropagation(),U(H._id,"paid")},disabled:E===H._id,className:"w-full bg-black text-white py-2.5 rounded-lg text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 font-medium",children:E===H._id?"Updating Payment...":"Mark COD Payment as Paid"})]}),r.role==="customer"&&H.status!=="cancelled"&&H.paymentDetails?.paymentMethod==="bank_transfer"&&H.paymentDetails?.paymentStatus==="pending_bank_transfer"&&n.jsx("div",{className:"mt-3",children:n.jsx("button",{onClick:oe=>{oe.stopPropagation(),T(H._id)},disabled:S===H._id,className:"w-full bg-blue-600 text-white py-2.5 rounded-lg text-sm hover:bg-blue-700 transition-colors disabled:opacity-50 font-medium",children:S===H._id?"Marking Payment as Sent...":"Mark Payment as Sent"})}),r.role==="customer"&&H.status!=="cancelled"&&H.paymentDetails?.paymentMethod==="cod"&&H.paymentDetails?.paymentStatus==="cod_pending"&&H.canCustomerUpdateStatus&&n.jsx("div",{className:"mt-3",children:n.jsx("button",{onClick:oe=>{oe.stopPropagation(),q(H._id)},disabled:C===H._id,className:"w-full bg-black text-white py-2.5 rounded-lg text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 font-medium",children:C===H._id?"Marking as Delivered...":"Mark Order as Delivered"})}),r.role==="customer"&&H.status==="delivered"&&n.jsx("div",{className:"mt-3",children:n.jsx("button",{onClick:oe=>{oe.stopPropagation(),K(H._id)},disabled:O===H._id,className:"w-full bg-green-600 text-white py-2.5 rounded-lg text-sm hover:bg-green-700 transition-colors disabled:opacity-50 font-medium",children:O===H._id?"Confirming Delivery...":"Confirm I Received This Order"})})]})]}),Y&&n.jsx("div",{className:"border-t border-gray-100 animate-in slide-in-from-top duration-200",children:n.jsxs("div",{className:"p-3 space-y-4",children:[n.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:r.role==="store_owner"?"Customer:":"Store:"}),n.jsx("p",{className:"font-medium text-gray-900 truncate",children:r.role==="store_owner"?H.customerId?.name||"Unknown":H.storeId?.name||"Unknown"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Date:"}),n.jsx("p",{className:"font-medium text-gray-900",children:new Date(H.createdAt).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Payment:"}),n.jsx("p",{className:`font-medium ${H.paymentDetails?.paymentStatus?.toLowerCase()==="paid"?"text-green-600":H.paymentDetails?.paymentStatus==="customer_paid_pending_confirmation"?"text-yellow-600":"text-red-600"}`,children:H.paymentDetails?.paymentStatus?.toLowerCase()==="paid"?"Paid":H.paymentDetails?.paymentStatus==="customer_paid_pending_confirmation"?"Awaiting Confirmation":"Pending"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Items:"}),n.jsx("p",{className:"font-medium text-gray-900",children:ae})]})]})}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[n.jsxs("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:["Order Items (",ae,")"]}),n.jsx("div",{className:"space-y-2",children:H.items.map((oe,be)=>n.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded",children:[n.jsx("img",{src:oe.productId?.images?.[0]?oe.productId.images[0].startsWith("http")?oe.productId.images[0]:`http://localhost:10000${oe.productId.images[0]}`:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",alt:oe.productId?.title||"Product",className:"w-10 h-10 object-cover rounded flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:oe.productId?.title||"Product"}),n.jsxs("p",{className:"text-xs text-gray-500",children:[oe.quantity,"  LKR ",oe.price]})]}),n.jsxs("p",{className:"font-medium text-gray-900 text-sm",children:["LKR ",(oe.price*oe.quantity).toFixed(2)]})]},be))})]}),H.shippingAddress&&n.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(wl,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-1 text-sm",children:"Shipping Address"}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx("p",{children:H.shippingAddress.street}),n.jsxs("p",{children:[H.shippingAddress.city,", ",H.shippingAddress.state," ",H.shippingAddress.zipCode]})]})]})]})}),H.trackingNumber&&n.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Hu,{className:"w-4 h-4 text-black flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"font-medium text-black text-sm",children:"Tracking: "}),n.jsx("span",{className:"text-sm text-gray-700 font-mono bg-gray-50 px-2 py-1 rounded",children:H.trackingNumber})]})]})}),H.status==="delivered"&&r.role==="customer"&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 text-sm",children:" Order Delivered - Confirmation Required"}),H.customerConfirmationDeadline?n.jsxs("p",{className:"text-xs text-blue-700",children:["Please confirm receipt by ",new Date(H.customerConfirmationDeadline).toLocaleDateString(),(()=>{const oe=Math.ceil((new Date(H.customerConfirmationDeadline)-new Date)/864e5);return oe>0?` (${oe} days left)`:" (Auto-confirmed)"})()]}):n.jsx("p",{className:"text-xs text-blue-700",children:"Auto-confirmation in 14 days from delivery"})]}),n.jsx("button",{onClick:()=>K(H._id),disabled:O===H._id,className:"bg-blue-600 text-white px-3 py-1.5 rounded text-xs hover:bg-blue-700 transition-colors disabled:opacity-50",children:O===H._id?"Confirming...":"Confirm"})]})}),H.status==="completed"&&r.role==="customer"&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-green-900 text-sm",children:"Order Completed "}),H.reviewed?n.jsx("p",{className:"text-xs text-green-700",children:"Review submitted - Thank you!"}):n.jsx("p",{className:"text-xs text-green-700",children:"Share your experience"})]}),!H.reviewed&&n.jsx("button",{onClick:()=>L(H),className:"bg-green-600 text-white px-3 py-1.5 rounded text-xs hover:bg-green-700 transition-colors",children:"Write Review"})]})}),H.paymentDetails&&n.jsxs("div",{className:"space-y-4",children:[H.paymentDetails.paymentMethod==="bank_transfer"&&r.role==="customer"&&H.paymentDetails.paymentStatus==="pending_bank_transfer"&&n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[n.jsx(zl,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h4",{className:"font-semibold text-blue-900 text-sm mb-1",children:[" Bank Transfer Required - LKR ",H.totalAmount]}),n.jsx("p",{className:"text-xs text-blue-700",children:"Transfer to the account below and contact the store with receipt."})]})]}),H.bankDetails&&n.jsxs("div",{className:"bg-white border border-blue-200 p-3 rounded-lg mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:" Bank Details"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[H.bankDetails.isVerified&&n.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:" Verified"}),H.bankDetails.isLocked&&n.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium text-gray-700 bg-gray-100 rounded",children:""})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Bank:"}),n.jsx("span",{className:"ml-1 font-medium text-gray-900",children:H.bankDetails.bankName})]}),n.jsx("button",{onClick:()=>navigator.clipboard.writeText(H.bankDetails.bankName),className:"text-xs bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700",title:"Copy bank name",children:"Copy"})]}),n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Holder:"}),n.jsx("span",{className:"ml-1 font-medium text-gray-900",children:H.bankDetails.accountHolderName})]}),n.jsx("button",{onClick:()=>navigator.clipboard.writeText(H.bankDetails.accountHolderName),className:"text-xs bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700",title:"Copy account holder name",children:"Copy"})]})]}),n.jsxs("div",{className:"bg-gray-50 p-2 rounded border-l-4 border-blue-500",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Account Number"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-mono text-lg font-bold text-gray-900 select-all",children:H.bankDetails.accountNumber}),n.jsx("button",{onClick:()=>navigator.clipboard.writeText(H.bankDetails.accountNumber),className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",title:"Copy account number",children:"Copy"})]})]}),n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Branch:"}),n.jsx("span",{className:"ml-1 font-medium text-gray-900",children:H.bankDetails.branchName})]}),n.jsx("button",{onClick:()=>navigator.clipboard.writeText(H.bankDetails.branchName),className:"text-xs bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700",title:"Copy branch name",children:"Copy"})]})]})]}),n.jsx("div",{className:"bg-blue-100 p-2 rounded",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-xs font-medium text-blue-700",children:["Reference: ",H._id.slice(-8)]}),n.jsx("button",{onClick:()=>navigator.clipboard.writeText(H._id.slice(-8)),className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",title:"Copy reference number",children:"Copy"})]})})]}),H.paymentDetails.paymentMethod==="bank_transfer"&&r.role==="customer"&&H.paymentDetails.paymentStatus==="customer_paid_pending_confirmation"&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(zl,{className:"w-4 h-4 text-yellow-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-900 text-sm",children:" Payment Confirmation Pending"}),n.jsxs("p",{className:"text-xs text-yellow-700",children:["Waiting for seller to verify your bank transfer of LKR ",H.totalAmount]})]})]})}),H.paymentDetails.paymentMethod==="bank_transfer"&&r.role==="store_owner"&&H.paymentDetails.paymentStatus==="pending_bank_transfer"&&n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(zl,{className:"w-4 h-4 text-orange-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-orange-900 text-sm",children:"Awaiting Bank Transfer"}),n.jsxs("p",{className:"text-xs text-orange-700",children:["LKR ",H.totalAmount," pending"]})]})]}),n.jsx("button",{onClick:()=>U(H._id,"paid"),disabled:E===H._id,className:"bg-orange-600 text-white px-3 py-1.5 rounded text-xs hover:bg-orange-700 transition-colors disabled:opacity-50",children:E===H._id?"Updating...":"Mark Paid"})]})}),H.paymentDetails.paymentMethod==="bank_transfer"&&r.role==="store_owner"&&H.paymentDetails.paymentStatus==="customer_paid_pending_confirmation"&&n.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(zl,{className:"w-4 h-4 text-purple-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-purple-900 text-sm",children:" Customer Claims Payment Sent"}),n.jsxs("p",{className:"text-xs text-purple-700",children:["Customer says they transferred LKR ",H.totalAmount," - please verify"]})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>U(H._id,"paid"),disabled:E===H._id,className:"bg-green-600 text-white px-3 py-1.5 rounded text-xs hover:bg-green-700 transition-colors disabled:opacity-50",children:E===H._id?"...":"Confirm"}),n.jsx("button",{onClick:()=>U(H._id,"failed"),disabled:E===H._id,className:"bg-red-600 text-white px-3 py-1.5 rounded text-xs hover:bg-red-700 transition-colors disabled:opacity-50",children:E===H._id?"...":"Reject"})]})]})}),H.paymentDetails.paymentMethod==="cod"&&H.paymentDetails.paymentStatus==="cod_pending"&&r.role==="customer"&&H.canCustomerUpdateStatus&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(pp,{className:"w-4 h-4 text-yellow-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-900 text-sm",children:"Cash on Delivery"}),n.jsx("p",{className:"text-xs text-yellow-700",children:"Confirm when received"})]})]}),n.jsx("button",{onClick:()=>q(H._id),disabled:C===H._id,className:"bg-yellow-600 text-white px-3 py-1.5 rounded text-xs hover:bg-yellow-700 transition-colors disabled:opacity-50",children:C===H._id?"Confirming...":"Received"})]})}),H.paymentDetails.paymentMethod==="cod"&&H.paymentDetails.paymentStatus==="cod_pending"&&r.role==="store_owner"&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(pp,{className:"w-4 h-4 text-green-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-green-900 text-sm",children:"COD Payment"}),n.jsxs("p",{className:"text-xs text-green-700",children:["LKR ",H.totalAmount," on delivery"]})]})]}),n.jsx("button",{onClick:()=>U(H._id,"paid"),disabled:E===H._id,className:"bg-green-600 text-white px-3 py-1.5 rounded text-xs hover:bg-green-700 transition-colors disabled:opacity-50",children:E===H._id?"Updating...":"Mark Paid"})]})})]}),H.paymentDetails?.paymentStatus==="paid"&&n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($1,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-sm text-green-900 font-medium",children:"Receipt Available"})]}),n.jsx("button",{onClick:()=>X(H._id),className:"bg-green-600 text-white px-3 py-1.5 rounded text-xs hover:bg-green-700 transition-colors",children:"View Receipt"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>d(H),className:"flex items-center space-x-1 text-gray-700 border border-gray-300 py-1.5 px-3 rounded text-xs hover:bg-gray-50 transition-colors",children:[n.jsx(Gn,{className:"w-3 h-3"}),n.jsx("span",{children:"Details"})]}),r.role==="store_owner"&&n.jsxs(n.Fragment,{children:[H.status==="pending"&&n.jsx("button",{onClick:()=>$(H._id,"accepted"),className:"bg-black text-white py-1.5 px-3 rounded text-xs hover:bg-gray-800 transition-colors",children:"Accept"}),H.status==="accepted"&&n.jsx("button",{onClick:()=>$(H._id,"processing"),className:"bg-black text-white py-1.5 px-3 rounded text-xs hover:bg-gray-800 transition-colors",children:"Process"}),H.status==="processing"&&n.jsx("button",{onClick:()=>$(H._id,"ready"),className:"bg-black text-white py-1.5 px-3 rounded text-xs hover:bg-gray-800 transition-colors",children:"Ready"}),H.status==="ready"&&n.jsx("button",{onClick:()=>$(H._id,"shipped"),className:"bg-black text-white py-1.5 px-3 rounded text-xs hover:bg-gray-800 transition-colors",children:"Ship"}),H.status==="shipped"&&n.jsx("button",{onClick:()=>$(H._id,"delivered"),className:"bg-black text-white py-1.5 px-3 rounded text-xs hover:bg-gray-800 transition-colors",children:"Delivered"}),H.status==="pending"&&n.jsx("button",{onClick:()=>$(H._id,"cancelled"),className:"bg-gray-600 text-white py-1.5 px-3 rounded text-xs hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})})]},H._id)})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Order Details #",u._id.slice(-8)]}),n.jsx("button",{onClick:()=>d(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(c4,{status:u.status}),n.jsxs("span",{className:"text-gray-600",children:["Ordered on"," ",new Date(u.createdAt).toLocaleDateString()]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Order Items"}),n.jsx("div",{className:"space-y-3",children:u.items.map((H,Y)=>n.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[n.jsx("img",{src:H.productId?.images?.[0]?H.productId.images[0].startsWith("http")?H.productId.images[0]:`http://localhost:10000${H.productId.images[0]}`:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",alt:H.productId?.title||"Product",className:"w-16 h-16 object-cover rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:H.productId?.title||"Product"}),n.jsxs("p",{className:"text-gray-600",children:["Quantity: ",H.quantity]}),n.jsxs("p",{className:"text-gray-600",children:["Price: LKR ",H.price]})]}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["LKR ",(H.price*H.quantity).toFixed(2)]})]},Y))})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Order Summary"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["LKR ",u.storeAmount]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Platform Fee:"}),n.jsxs("span",{children:["LKR ",u.platformFee]})]}),n.jsxs("div",{className:"flex justify-between font-semibold text-lg border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["LKR ",u.totalAmount]})]})]})]}),u.shippingAddress&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Shipping Address"}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("p",{children:u.shippingAddress.street}),n.jsxs("p",{children:[u.shippingAddress.city,","," ",u.shippingAddress.state]}),n.jsxs("p",{children:[u.shippingAddress.zipCode,","," ",u.shippingAddress.country]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Payment Details"}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Status:"})," ",u.paymentDetails?.paymentStatus||"Paid"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Method:"})," ",u.paymentDetails?.paymentMethod||"Local Payment"]}),u.paymentDetails?.paidAt&&n.jsxs("p",{children:[n.jsx("strong",{children:"Paid At:"})," ",new Date(u.paymentDetails.paidAt).toLocaleString()]})]})]})]})]})})})]}),p&&g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Write a Review"}),n.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),n.jsxs("form",{onSubmit:F,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),n.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(H=>n.jsx("button",{type:"button",onClick:()=>y({...v,rating:H}),className:`w-8 h-8 ${H<=v.rating?"text-yellow-400 fill-current":"text-gray-300"}`,children:n.jsx(mn,{className:"w-full h-full"})},H))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review"}),n.jsx("textarea",{value:v.comment,onChange:H=>y({...v,comment:H.target.value}),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Share your experience with this order...",required:!0})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 disabled:opacity-50",children:w?"Submitting...":"Submit Review"})]})]})]})})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"text-center",children:n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please log in to view orders"})})})},KH=()=>{const{user:r}=Fn(),t=yi(),[s,i]=ee.useState([]),[a,o]=ee.useState(!0),[c,l]=ee.useState(null),[u,d]=ee.useState(!1),[A,f]=ee.useState(null),[p,m]=ee.useState({rating:5,comment:""}),[g,b]=ee.useState(!1),[v,y]=ee.useState(null),[w,j]=ee.useState(null),[C,B]=ee.useState(new Set);ee.useEffect(()=>{r&&E()},[r]);const E=async()=>{try{const $=r.role==="store_owner"?"/api/bookings/store":"/api/bookings/customer",L=await fetch(`http://localhost:10000${$}`,{credentials:"include"});if(L.ok){const F=await L.json();i(F)}}catch($){console.error("Error fetching bookings:",$)}finally{o(!1)}},_=async($,L)=>{try{(await fetch(`http://localhost:10000/api/bookings/${$}/status`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:L})})).ok&&(E(),l(null))}catch(F){console.error("Error updating booking status:",F)}},S=$=>{f($),m({rating:5,comment:""}),d(!0)},N=async $=>{$.preventDefault(),b(!0);try{const L=await fetch("http://localhost:10000/api/reviews",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({storeId:A.storeId._id||A.storeId,bookingId:A._id,rating:p.rating,comment:p.comment})});if(L.ok)alert("Review submitted successfully!"),d(!1),f(null),E();else{const F=await L.json();alert(`Error: ${F.error}`)}}catch(L){console.error("Error submitting review:",L),alert("Failed to submit review. Please try again.")}finally{b(!1)}},O=$=>{t(`/receipt/${$}?type=booking`)},k=async $=>{if(confirm("Are you sure you want to mark this booking as completed?"))try{y($);const L=await fetch(`http://localhost:10000/api/bookings/${$}/mark-delivered`,{method:"PUT",credentials:"include"});if(L.ok)alert("Booking marked as completed successfully!"),E();else{const F=await L.json();alert(`Error: ${F.error}`)}}catch(L){console.error("Error marking booking as completed:",L),alert("Error marking booking as completed. Please try again.")}finally{y(null)}},I=async($,L)=>{if(confirm(`Are you sure you want to mark this payment as ${L}?`))try{j($);const F=await fetch(`http://localhost:10000/api/bookings/${$}/update-payment-status`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:L})});if(F.ok)alert("Payment status updated successfully!"),E();else{const G=await F.json();alert(`Error: ${G.error}`)}}catch(F){console.error("Error updating payment status:",F),alert("Error updating payment status. Please try again.")}finally{j(null)}},R=$=>{const L=new Set(C);L.has($)?L.delete($):L.add($),B(L)},Q=$=>{switch($){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return r?a?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-black"})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.role==="store_owner"?"Store Bookings":"My Bookings"}),n.jsxs("p",{className:"text-gray-600 mt-2",children:[s.length," booking",s.length!==1?"s":""," found"]})]}),s.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ms,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No bookings found"}),n.jsx("p",{className:"text-gray-600",children:r.role==="store_owner"?"You haven't received any bookings yet":"You haven't made any bookings yet"})]}):n.jsx("div",{className:"space-y-2",children:s.map($=>{const L=C.has($._id);return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200",children:[n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>R($._id),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ms,{className:"w-4 h-4 text-black"}),n.jsxs("span",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:["#",$._id.slice(-6)]})]}),n.jsx("span",{className:`inline-block px-3 py-1 text-xs rounded-full ${Q($.status)}`,children:$.status})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"font-bold text-gray-900 text-sm sm:text-base",children:["LKR ",$.totalAmount]}),n.jsx("p",{className:"text-xs text-gray-500",children:$.paymentDetails?.paymentStatus==="paid"?"Paid":"Pending"})]}),n.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:L?n.jsx(Uk,{className:"w-5 h-5"}):n.jsx(Qp,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"mt-3 sm:hidden",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:"truncate max-w-20",children:$.serviceId?.title||"Service"}),n.jsx("span",{children:new Date($.bookingDate).toLocaleDateString()})]}),n.jsx("div",{className:"text-xs",children:n.jsxs("span",{children:[$.startTime,"-",$.endTime]})})]}),r.role==="store_owner"&&n.jsx("div",{className:"mt-1 text-sm text-gray-600",children:n.jsxs("span",{children:["Customer: ",$.customerId?.name||"Unknown"]})})]}),n.jsxs("div",{className:"hidden sm:flex items-center justify-between mt-2",children:[n.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[n.jsx("span",{children:$.serviceId?.title||"Service"}),n.jsx("span",{children:new Date($.bookingDate).toLocaleDateString()}),n.jsxs("span",{children:[$.startTime," - ",$.endTime]}),r.role==="store_owner"&&n.jsxs("span",{children:["Customer: ",$.customerId?.name||"Unknown"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[r.role==="store_owner"&&$.status!=="cancelled"&&n.jsxs(n.Fragment,{children:[$.paymentDetails?.paymentMethod==="bank_transfer"&&$.paymentDetails?.paymentStatus==="pending_bank_transfer"&&n.jsx("button",{onClick:F=>{F.stopPropagation(),I($._id,"paid")},disabled:w===$._id,className:"bg-black text-white px-3 py-1.5 rounded text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 min-h-[36px]",children:w===$._id?"...":"Mark Paid"}),$.paymentDetails?.paymentMethod==="cod"&&$.paymentDetails?.paymentStatus==="cod_pending"&&n.jsx("button",{onClick:F=>{F.stopPropagation(),I($._id,"paid")},disabled:w===$._id,className:"bg-black text-white px-3 py-1.5 rounded text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 min-h-[36px]",children:w===$._id?"...":"Mark Paid"})]}),r.role==="customer"&&$.status!=="cancelled"&&$.paymentDetails?.paymentMethod==="cod"&&$.paymentDetails?.paymentStatus==="cod_pending"&&$.canCustomerUpdateStatus&&n.jsx("button",{onClick:F=>{F.stopPropagation(),k($._id)},disabled:v===$._id,className:"bg-black text-white px-3 py-1.5 rounded text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 min-h-[36px]",children:v===$._id?"...":"Mark Complete"})]})]}),n.jsxs("div",{className:"sm:hidden",children:[r.role==="store_owner"&&$.status!=="cancelled"&&n.jsxs("div",{className:"mt-3 space-y-2",children:[$.paymentDetails?.paymentMethod==="bank_transfer"&&$.paymentDetails?.paymentStatus==="pending_bank_transfer"&&n.jsx("button",{onClick:F=>{F.stopPropagation(),I($._id,"paid")},disabled:w===$._id,className:"w-full bg-black text-white py-2.5 rounded-lg text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 font-medium",children:w===$._id?"Updating Payment...":"Mark Payment as Paid"}),$.paymentDetails?.paymentMethod==="cod"&&$.paymentDetails?.paymentStatus==="cod_pending"&&n.jsx("button",{onClick:F=>{F.stopPropagation(),I($._id,"paid")},disabled:w===$._id,className:"w-full bg-black text-white py-2.5 rounded-lg text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 font-medium",children:w===$._id?"Updating Payment...":"Mark COD Payment as Paid"})]}),r.role==="customer"&&$.status!=="cancelled"&&$.paymentDetails?.paymentMethod==="cod"&&$.paymentDetails?.paymentStatus==="cod_pending"&&$.canCustomerUpdateStatus&&n.jsx("div",{className:"mt-3",children:n.jsx("button",{onClick:F=>{F.stopPropagation(),k($._id)},disabled:v===$._id,className:"w-full bg-black text-white py-2.5 rounded-lg text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 font-medium",children:v===$._id?"Marking as Completed...":"Mark Service as Completed"})})]})]}),L&&n.jsx("div",{className:"border-t border-gray-100 animate-in slide-in-from-top duration-200",children:n.jsxs("div",{className:"p-3 space-y-4",children:[n.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:r.role==="store_owner"?"Customer:":"Service:"}),n.jsx("p",{className:"font-medium text-gray-900 truncate",children:r.role==="store_owner"?$.customerId?.name||"Unknown":$.serviceId?.title||"Unknown"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Date:"}),n.jsx("p",{className:"font-medium text-gray-900",children:new Date($.bookingDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Time:"}),n.jsxs("p",{className:"font-medium text-gray-900 text-xs",children:[$.startTime,"-",$.endTime]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Payment:"}),n.jsx("p",{className:`font-medium ${$.paymentDetails?.paymentStatus?.toLowerCase()==="paid"?"text-green-600":"text-red-600"}`,children:$.paymentDetails?.paymentStatus?.toLowerCase()==="paid"?"Paid":"Pending"})]})]})}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:"Service Information"}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("img",{src:$.serviceId?.images?.[0]?$.serviceId.images[0].startsWith("http")?$.serviceId.images[0]:`http://localhost:10000${$.serviceId.images[0]}`:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",alt:$.serviceId?.title||"Service",className:"w-12 h-12 object-cover rounded-lg flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:$.serviceId?.title||"Service"}),n.jsxs("p",{className:"text-xs text-gray-500",children:[$.serviceId?.category||"Service","  LKR ",$.totalAmount]})]})]})]}),$.notes&&n.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-1 text-sm",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:$.notes})]}),$.paymentDetails&&n.jsxs("div",{className:"space-y-4",children:[$.paymentDetails.paymentMethod==="bank_transfer"&&r.role==="customer"&&$.paymentDetails.paymentStatus==="pending_bank_transfer"&&n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[n.jsx(zl,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h4",{className:"font-semibold text-blue-900 text-sm mb-1",children:[" Bank Transfer Required - LKR ",$.totalAmount]}),n.jsx("p",{className:"text-xs text-blue-700",children:"Transfer to the account below and contact the store with receipt."})]})]}),$.bankDetails&&n.jsxs("div",{className:"bg-white border border-blue-200 p-3 rounded-lg mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:" Bank Details"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[$.bankDetails.isVerified&&n.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:" Verified"}),$.bankDetails.isLocked&&n.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium text-gray-700 bg-gray-100 rounded",children:""})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Bank:"}),n.jsx("span",{className:"ml-1 font-medium text-gray-900",children:$.bankDetails.bankName})]}),n.jsx("button",{onClick:()=>navigator.clipboard.writeText($.bankDetails.bankName),className:"text-xs bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700",title:"Copy bank name",children:"Copy"})]}),n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Holder:"}),n.jsx("span",{className:"ml-1 font-medium text-gray-900",children:$.bankDetails.accountHolderName})]}),n.jsx("button",{onClick:()=>navigator.clipboard.writeText($.bankDetails.accountHolderName),className:"text-xs bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700",title:"Copy account holder name",children:"Copy"})]})]}),n.jsxs("div",{className:"bg-gray-50 p-2 rounded border-l-4 border-blue-500",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Account Number"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-mono text-lg font-bold text-gray-900 select-all",children:$.bankDetails.accountNumber}),n.jsx("button",{onClick:()=>navigator.clipboard.writeText($.bankDetails.accountNumber),className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",title:"Copy account number",children:"Copy"})]})]}),n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Branch:"}),n.jsx("span",{className:"ml-1 font-medium text-gray-900",children:$.bankDetails.branchName})]}),n.jsx("button",{onClick:()=>navigator.clipboard.writeText($.bankDetails.branchName),className:"text-xs bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700",title:"Copy branch name",children:"Copy"})]})]})]}),n.jsx("div",{className:"bg-blue-100 p-2 rounded",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-xs font-medium text-blue-700",children:["Reference: ",$._id.slice(-8)]}),n.jsx("button",{onClick:()=>navigator.clipboard.writeText($._id.slice(-8)),className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",title:"Copy reference number",children:"Copy"})]})})]}),$.paymentDetails.paymentMethod==="bank_transfer"&&r.role==="store_owner"&&$.paymentDetails.paymentStatus==="pending_bank_transfer"&&n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(zl,{className:"w-4 h-4 text-orange-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-orange-900 text-sm",children:"Awaiting Bank Transfer"}),n.jsxs("p",{className:"text-xs text-orange-700",children:["LKR ",$.totalAmount," pending"]})]})]}),n.jsx("button",{onClick:()=>I($._id,"paid"),disabled:w===$._id,className:"bg-orange-600 text-white px-3 py-1.5 rounded text-xs hover:bg-orange-700 transition-colors disabled:opacity-50",children:w===$._id?"Updating...":"Mark Paid"})]})}),$.paymentDetails.paymentMethod==="cod"&&$.paymentDetails.paymentStatus==="cod_pending"&&r.role==="customer"&&$.canCustomerUpdateStatus&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(pp,{className:"w-4 h-4 text-yellow-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-900 text-sm",children:"Cash on Service"}),n.jsx("p",{className:"text-xs text-yellow-700",children:"Confirm when completed"})]})]}),n.jsx("button",{onClick:()=>k($._id),disabled:v===$._id,className:"bg-yellow-600 text-white px-3 py-1.5 rounded text-xs hover:bg-yellow-700 transition-colors disabled:opacity-50",children:v===$._id?"Confirming...":"Completed"})]})}),$.paymentDetails.paymentMethod==="cod"&&$.paymentDetails.paymentStatus==="cod_pending"&&r.role==="store_owner"&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(pp,{className:"w-4 h-4 text-green-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-green-900 text-sm",children:"Cash on Service"}),n.jsxs("p",{className:"text-xs text-green-700",children:["LKR ",$.totalAmount," on completion"]})]})]}),n.jsx("button",{onClick:()=>I($._id,"paid"),disabled:w===$._id,className:"bg-green-600 text-white px-3 py-1.5 rounded text-xs hover:bg-green-700 transition-colors disabled:opacity-50",children:w===$._id?"Updating...":"Mark Paid"})]})})]}),$.paymentDetails?.paymentStatus==="paid"&&n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx($1,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-sm text-green-900 font-medium",children:"Receipt Available"})]}),n.jsx("button",{onClick:()=>O($._id),className:"bg-green-600 text-white px-3 py-1.5 rounded text-xs hover:bg-green-700 transition-colors",children:"View Receipt"})]}),$.status==="completed"&&r.role==="customer"&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-green-900 text-sm",children:"Service Completed "}),$.reviewed?n.jsx("p",{className:"text-xs text-green-700",children:"Review submitted - Thank you!"}):n.jsx("p",{className:"text-xs text-green-700",children:"Share your experience"})]}),!$.reviewed&&n.jsx("button",{onClick:()=>S($),className:"bg-green-600 text-white px-3 py-1.5 rounded text-xs hover:bg-green-700 transition-colors",children:"Write Review"})]})}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>l($),className:"flex items-center space-x-1 text-gray-700 border border-gray-300 py-1.5 px-3 rounded text-xs hover:bg-gray-50 transition-colors",children:[n.jsx(Gn,{className:"w-3 h-3"}),n.jsx("span",{children:"Details"})]}),r.role==="store_owner"&&n.jsxs(n.Fragment,{children:[$.status==="pending"&&n.jsx("button",{onClick:()=>_($._id,"confirmed"),className:"bg-black text-white py-1.5 px-3 rounded text-xs hover:bg-gray-800 transition-colors",children:"Confirm"}),$.status==="confirmed"&&n.jsx("button",{onClick:()=>_($._id,"completed"),className:"bg-black text-white py-1.5 px-3 rounded text-xs hover:bg-gray-800 transition-colors",children:"Complete"}),$.status==="pending"&&n.jsx("button",{onClick:()=>_($._id,"cancelled"),className:"bg-gray-600 text-white py-1.5 px-3 rounded text-xs hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})})]},$._id)})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-96 overflow-y-auto p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Booking Details #",c._id.slice(-6)]}),n.jsx("button",{onClick:()=>l(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Service:"})," ",c.serviceId?.title]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Status:"})," ",c.status]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Date:"})," ",new Date(c.bookingDate).toLocaleDateString()]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Time:"})," ",c.startTime," -"," ",c.endTime]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total:"})," ",c.totalAmount," LKR"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Platform Fee:"})," ",c.platformFee," ","LKR"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Store Amount:"})," ",c.storeAmount," ","LKR"]})]}),c.notes&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Notes:"}),n.jsx("p",{children:c.notes})]}),c.paymentDetails&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Payment Details:"}),n.jsxs("p",{children:["Status: ",c.paymentDetails.paymentStatus]}),c.paymentDetails.paidAt&&n.jsxs("p",{children:["Paid:"," ",new Date(c.paymentDetails.paidAt).toLocaleString()]})]})]})]})})]}),u&&A&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Write a Review"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),n.jsxs("form",{onSubmit:N,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),n.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map($=>n.jsx("button",{type:"button",onClick:()=>m({...p,rating:$}),className:`w-8 h-8 ${$<=p.rating?"text-yellow-400 fill-current":"text-gray-300"}`,children:n.jsx(mn,{className:"w-full h-full"})},$))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review"}),n.jsx("textarea",{value:p.comment,onChange:$=>m({...p,comment:$.target.value}),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Share your experience with this service...",required:!0})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 disabled:opacity-50",children:g?"Submitting...":"Submit Review"})]})]})]})})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"text-center",children:n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please log in to view bookings"})})})},GH="modulepreload",WH=function(r){return"/"+r},u4={},pb=function(t,s,i){let a=Promise.resolve();if(s&&s.length>0){let u=function(d){return Promise.all(d.map(A=>Promise.resolve(A).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=c?.nonce||c?.getAttribute("nonce");a=u(s.map(d=>{if(d=WH(d),d in u4)return;u4[d]=!0;const A=d.endsWith(".css"),f=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=A?"stylesheet":GH,A||(p.as="script"),p.crossOrigin="",p.href=d,l&&p.setAttribute("nonce",l),document.head.appendChild(p),A)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return a.then(c=>{for(const l of c||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};function ss(r){"@babel/helpers - typeof";return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ss(r)}var xl=Uint8Array,fo=Uint16Array,c2=Int32Array,u2=new xl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),d2=new xl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),d4=new xl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mE=function(r,t){for(var s=new fo(31),i=0;i<31;++i)s[i]=t+=1<<r[i-1];for(var a=new c2(s[30]),i=1;i<30;++i)for(var o=s[i];o<s[i+1];++o)a[o]=o-s[i]<<5|i;return{b:s,r:a}},gE=mE(u2,2),qH=gE.b,cw=gE.r;qH[28]=258,cw[258]=28;var YH=mE(d2,0),A4=YH.r,uw=new fo(32768);for(var Cs=0;Cs<32768;++Cs){var bu=(Cs&43690)>>1|(Cs&21845)<<1;bu=(bu&52428)>>2|(bu&13107)<<2,bu=(bu&61680)>>4|(bu&3855)<<4,uw[Cs]=((bu&65280)>>8|(bu&255)<<8)>>1}var Jf=(function(r,t,s){for(var i=r.length,a=0,o=new fo(t);a<i;++a)r[a]&&++o[r[a]-1];var c=new fo(t);for(a=1;a<t;++a)c[a]=c[a-1]+o[a-1]<<1;var l;if(s){l=new fo(1<<t);var u=15-t;for(a=0;a<i;++a)if(r[a])for(var d=a<<4|r[a],A=t-r[a],f=c[r[a]-1]++<<A,p=f|(1<<A)-1;f<=p;++f)l[uw[f]>>u]=d}else for(l=new fo(i),a=0;a<i;++a)r[a]&&(l[a]=uw[c[r[a]-1]++]>>15-r[a]);return l}),sA=new xl(288);for(var Cs=0;Cs<144;++Cs)sA[Cs]=8;for(var Cs=144;Cs<256;++Cs)sA[Cs]=9;for(var Cs=256;Cs<280;++Cs)sA[Cs]=7;for(var Cs=280;Cs<288;++Cs)sA[Cs]=8;var F0=new xl(32);for(var Cs=0;Cs<32;++Cs)F0[Cs]=5;var XH=Jf(sA,9,0),JH=Jf(F0,5,0),yE=function(r){return(r+7)/8|0},ZH=function(r,t,s){return(s==null||s>r.length)&&(s=r.length),new xl(r.subarray(t,s))},Sc=function(r,t,s){s<<=t&7;var i=t/8|0;r[i]|=s,r[i+1]|=s>>8},jf=function(r,t,s){s<<=t&7;var i=t/8|0;r[i]|=s,r[i+1]|=s>>8,r[i+2]|=s>>16},mb=function(r,t){for(var s=[],i=0;i<r.length;++i)r[i]&&s.push({s:i,f:r[i]});var a=s.length,o=s.slice();if(!a)return{t:bE,l:0};if(a==1){var c=new xl(s[0].s+1);return c[s[0].s]=1,{t:c,l:1}}s.sort(function(B,E){return B.f-E.f}),s.push({s:-1,f:25001});var l=s[0],u=s[1],d=0,A=1,f=2;for(s[0]={s:-1,f:l.f+u.f,l,r:u};A!=a-1;)l=s[s[d].f<s[f].f?d++:f++],u=s[d!=A&&s[d].f<s[f].f?d++:f++],s[A++]={s:-1,f:l.f+u.f,l,r:u};for(var p=o[0].s,i=1;i<a;++i)o[i].s>p&&(p=o[i].s);var m=new fo(p+1),g=dw(s[A-1],m,0);if(g>t){var i=0,b=0,v=g-t,y=1<<v;for(o.sort(function(E,_){return m[_.s]-m[E.s]||E.f-_.f});i<a;++i){var w=o[i].s;if(m[w]>t)b+=y-(1<<g-m[w]),m[w]=t;else break}for(b>>=v;b>0;){var j=o[i].s;m[j]<t?b-=1<<t-m[j]++-1:++i}for(;i>=0&&b;--i){var C=o[i].s;m[C]==t&&(--m[C],++b)}g=t}return{t:new xl(m),l:g}},dw=function(r,t,s){return r.s==-1?Math.max(dw(r.l,t,s+1),dw(r.r,t,s+1)):t[r.s]=s},h4=function(r){for(var t=r.length;t&&!r[--t];);for(var s=new fo(++t),i=0,a=r[0],o=1,c=function(u){s[i++]=u},l=1;l<=t;++l)if(r[l]==a&&l!=t)++o;else{if(!a&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(a),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(a);o=1,a=r[l]}return{c:s.subarray(0,i),n:t}},Nf=function(r,t){for(var s=0,i=0;i<t.length;++i)s+=r[i]*t[i];return s},xE=function(r,t,s){var i=s.length,a=yE(t+2);r[a]=i&255,r[a+1]=i>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var o=0;o<i;++o)r[a+o+4]=s[o];return(a+4+i)*8},f4=function(r,t,s,i,a,o,c,l,u,d,A){Sc(t,A++,s),++a[256];for(var f=mb(a,15),p=f.t,m=f.l,g=mb(o,15),b=g.t,v=g.l,y=h4(p),w=y.c,j=y.n,C=h4(b),B=C.c,E=C.n,_=new fo(19),S=0;S<w.length;++S)++_[w[S]&31];for(var S=0;S<B.length;++S)++_[B[S]&31];for(var N=mb(_,7),O=N.t,k=N.l,I=19;I>4&&!O[d4[I-1]];--I);var R=d+5<<3,Q=Nf(a,sA)+Nf(o,F0)+c,$=Nf(a,p)+Nf(o,b)+c+14+3*I+Nf(_,O)+2*_[16]+3*_[17]+7*_[18];if(u>=0&&R<=Q&&R<=$)return xE(t,A,r.subarray(u,u+d));var L,F,G,X;if(Sc(t,A,1+($<Q)),A+=2,$<Q){L=Jf(p,m,0),F=p,G=Jf(b,v,0),X=b;var q=Jf(O,k,0);Sc(t,A,j-257),Sc(t,A+5,E-1),Sc(t,A+10,I-4),A+=14;for(var S=0;S<I;++S)Sc(t,A+3*S,O[d4[S]]);A+=3*I;for(var T=[w,B],U=0;U<2;++U)for(var K=T[U],S=0;S<K.length;++S){var z=K[S]&31;Sc(t,A,q[z]),A+=O[z],z>15&&(Sc(t,A,K[S]>>5&127),A+=K[S]>>12)}}else L=XH,F=sA,G=JH,X=F0;for(var S=0;S<l;++S){var M=i[S];if(M>255){var z=M>>18&31;jf(t,A,L[z+257]),A+=F[z+257],z>7&&(Sc(t,A,M>>23&31),A+=u2[z]);var H=M&31;jf(t,A,G[H]),A+=X[H],H>3&&(jf(t,A,M>>5&8191),A+=d2[H])}else jf(t,A,L[M]),A+=F[M]}return jf(t,A,L[256]),A+F[256]},eV=new c2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),bE=new xl(0),tV=function(r,t,s,i,a,o){var c=o.z||r.length,l=new xl(i+c+5*(1+Math.ceil(c/7e3))+a),u=l.subarray(i,l.length-a),d=o.l,A=(o.r||0)&7;if(t){A&&(u[0]=o.r>>3);for(var f=eV[t-1],p=f>>13,m=f&8191,g=(1<<s)-1,b=o.p||new fo(32768),v=o.h||new fo(g+1),y=Math.ceil(s/3),w=2*y,j=function(Z){return(r[Z]^r[Z+1]<<y^r[Z+2]<<w)&g},C=new c2(25e3),B=new fo(288),E=new fo(32),_=0,S=0,N=o.i||0,O=0,k=o.w||0,I=0;N+2<c;++N){var R=j(N),Q=N&32767,$=v[R];if(b[Q]=$,v[R]=Q,k<=N){var L=c-N;if((_>7e3||O>24576)&&(L>423||!d)){A=f4(r,u,0,C,B,E,S,O,I,N-I,A),O=_=S=0,I=N;for(var F=0;F<286;++F)B[F]=0;for(var F=0;F<30;++F)E[F]=0}var G=2,X=0,q=m,T=Q-$&32767;if(L>2&&R==j(N-T))for(var U=Math.min(p,L)-1,K=Math.min(32767,N),z=Math.min(258,L);T<=K&&--q&&Q!=$;){if(r[N+G]==r[N+G-T]){for(var M=0;M<z&&r[N+M]==r[N+M-T];++M);if(M>G){if(G=M,X=T,M>U)break;for(var H=Math.min(T,M-2),Y=0,F=0;F<H;++F){var ae=N-T+F&32767,oe=b[ae],be=ae-oe&32767;be>Y&&(Y=be,$=ae)}}}Q=$,$=b[Q],T+=Q-$&32767}if(X){C[O++]=268435456|cw[G]<<18|A4[X];var ge=cw[G]&31,he=A4[X]&31;S+=u2[ge]+d2[he],++B[257+ge],++E[he],k=N+G,++_}else C[O++]=r[N],++B[r[N]]}}for(N=Math.max(N,k);N<c;++N)C[O++]=r[N],++B[r[N]];A=f4(r,u,d,C,B,E,S,O,I,N-I,A),d||(o.r=A&7|u[A/8|0]<<3,A-=7,o.h=v,o.p=b,o.i=N,o.w=k)}else{for(var N=o.w||0;N<c+d;N+=65535){var ke=N+65535;ke>=c&&(u[A/8|0]=d,ke=c),A=xE(u,A+1,r.subarray(N,ke))}o.i=c}return ZH(l,0,i+yE(A)+a)},vE=function(){var r=1,t=0;return{p:function(s){for(var i=r,a=t,o=s.length|0,c=0;c!=o;){for(var l=Math.min(c+2655,o);c<l;++c)a+=i+=s[c];i=(i&65535)+15*(i>>16),a=(a&65535)+15*(a>>16)}r=i,t=a},d:function(){return r%=65521,t%=65521,(r&255)<<24|(r&65280)<<8|(t&255)<<8|t>>8}}},rV=function(r,t,s,i,a){if(!a&&(a={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),c=new xl(o.length+r.length);c.set(o),c.set(r,o.length),r=c,a.w=o.length}return tV(r,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+t.mem,s,i,a)},wE=function(r,t,s){for(;s;++t)r[t]=s,s>>>=8},nV=function(r,t){var s=t.level,i=s==0?0:s<6?1:s==9?3:2;if(r[0]=120,r[1]=i<<6|(t.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,t.dictionary){var a=vE();a.p(t.dictionary),wE(r,2,a.d())}};function Aw(r,t){t||(t={});var s=vE();s.p(r);var i=rV(r,t,t.dictionary?6:2,4);return nV(i,t),wE(i,i.length-4,s.d()),i}var sV=typeof TextDecoder<"u"&&new TextDecoder,iV=0;try{sV.decode(bE,{stream:!0}),iV=1}catch{}function aV(r){if(Array.isArray(r))return r}function oV(r,t){var s=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(s!=null){var i,a,o,c,l=[],u=!0,d=!1;try{if(o=(s=s.call(r)).next,t!==0)for(;!(u=(i=o.call(s)).done)&&(l.push(i.value),l.length!==t);u=!0);}catch(A){d=!0,a=A}finally{try{if(!u&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(d)throw a}}return l}}function p4(r,t){(t==null||t>r.length)&&(t=r.length);for(var s=0,i=Array(t);s<t;s++)i[s]=r[s];return i}function lV(r,t){if(r){if(typeof r=="string")return p4(r,t);var s={}.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?p4(r,t):void 0}}function cV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m4(r,t){return aV(r)||oV(r,t)||lV(r,t)||cV()}function g4(r,t="utf8"){return new TextDecoder(t).decode(r)}const uV=new TextEncoder;function dV(r){return uV.encode(r)}const AV=1024*8,hV=(()=>{const r=new Uint8Array(4),t=new Uint32Array(r.buffer);return!((t[0]=1)&r[0])})(),gb={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class A2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=AV,s={}){let i=!1;typeof t=="number"?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);const a=s.offset?s.offset>>>0:0,o=t.byteLength-a;let c=a;(ArrayBuffer.isView(t)||t instanceof A2)&&(t.byteLength!==t.buffer.byteLength&&(c=t.byteOffset+a),t=t.buffer),i?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const i=(this.offset+t)*2,a=new Uint8Array(i);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,s){const i=gb[s].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+i);if(this.littleEndian===hV&&s!=="uint8"&&s!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+i));l.reverse();const u=new gb[s](l.buffer);return this.offset+=i,u.reverse(),u}const c=new gb[s](o);return this.offset+=i,c}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let s="";for(let i=0;i<t;i++)s+=this.readChar();return s}readUtf8(t=1){return g4(this.readBytes(t))}decodeText(t=1,s="utf8"){return g4(this.readBytes(t),s)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let s=0;s<t.length;s++)this._data.setUint8(this.offset++,t[s]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let s=0;s<t.length;s++)this.writeUint8(t.charCodeAt(s));return this}writeUtf8(t){return this.writeBytes(dV(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Dh(r){let t=r.length;for(;--t>=0;)r[t]=0}const fV=3,pV=258,jE=29,mV=256,gV=mV+1+jE,NE=30,yV=512,xV=new Array((gV+2)*2);Dh(xV);const bV=new Array(NE*2);Dh(bV);const vV=new Array(yV);Dh(vV);const wV=new Array(pV-fV+1);Dh(wV);const jV=new Array(jE);Dh(jV);const NV=new Array(NE);Dh(NV);const SV=(r,t,s,i)=>{let a=r&65535|0,o=r>>>16&65535|0,c=0;for(;s!==0;){c=s>2e3?2e3:s,s-=c;do a=a+t[i++]|0,o=o+a|0;while(--c);a%=65521,o%=65521}return a|o<<16|0};var hw=SV;const CV=()=>{let r,t=[];for(var s=0;s<256;s++){r=s;for(var i=0;i<8;i++)r=r&1?3988292384^r>>>1:r>>>1;t[s]=r}return t},BV=new Uint32Array(CV()),kV=(r,t,s,i)=>{const a=BV,o=i+s;r^=-1;for(let c=i;c<o;c++)r=r>>>8^a[(r^t[c])&255];return r^-1};var Ml=kV,fw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},SE={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _V=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var EV=function(r){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const s=t.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(const i in s)_V(s,i)&&(r[i]=s[i])}}return r},OV=r=>{let t=0;for(let i=0,a=r.length;i<a;i++)t+=r[i].length;const s=new Uint8Array(t);for(let i=0,a=0,o=r.length;i<o;i++){let c=r[i];s.set(c,a),a+=c.length}return s},CE={assign:EV,flattenChunks:OV};let BE=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{BE=!1}const jp=new Uint8Array(256);for(let r=0;r<256;r++)jp[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;jp[254]=jp[254]=1;var IV=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,s,i,a,o,c=r.length,l=0;for(a=0;a<c;a++)s=r.charCodeAt(a),(s&64512)===55296&&a+1<c&&(i=r.charCodeAt(a+1),(i&64512)===56320&&(s=65536+(s-55296<<10)+(i-56320),a++)),l+=s<128?1:s<2048?2:s<65536?3:4;for(t=new Uint8Array(l),o=0,a=0;o<l;a++)s=r.charCodeAt(a),(s&64512)===55296&&a+1<c&&(i=r.charCodeAt(a+1),(i&64512)===56320&&(s=65536+(s-55296<<10)+(i-56320),a++)),s<128?t[o++]=s:s<2048?(t[o++]=192|s>>>6,t[o++]=128|s&63):s<65536?(t[o++]=224|s>>>12,t[o++]=128|s>>>6&63,t[o++]=128|s&63):(t[o++]=240|s>>>18,t[o++]=128|s>>>12&63,t[o++]=128|s>>>6&63,t[o++]=128|s&63);return t};const PV=(r,t)=>{if(t<65534&&r.subarray&&BE)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let s="";for(let i=0;i<t;i++)s+=String.fromCharCode(r[i]);return s};var TV=(r,t)=>{const s=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let i,a;const o=new Array(s*2);for(a=0,i=0;i<s;){let c=r[i++];if(c<128){o[a++]=c;continue}let l=jp[c];if(l>4){o[a++]=65533,i+=l-1;continue}for(c&=l===2?31:l===3?15:7;l>1&&i<s;)c=c<<6|r[i++]&63,l--;if(l>1){o[a++]=65533;continue}c<65536?o[a++]=c:(c-=65536,o[a++]=55296|c>>10&1023,o[a++]=56320|c&1023)}return PV(o,a)},FV=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let s=t-1;for(;s>=0&&(r[s]&192)===128;)s--;return s<0||s===0?t:s+jp[r[s]]>t?s:t},pw={string2buf:IV,buf2string:TV,utf8border:FV};function UV(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var LV=UV;const Km=16209,DV=16191;var MV=function(t,s){let i,a,o,c,l,u,d,A,f,p,m,g,b,v,y,w,j,C,B,E,_,S,N,O;const k=t.state;i=t.next_in,N=t.input,a=i+(t.avail_in-5),o=t.next_out,O=t.output,c=o-(s-t.avail_out),l=o+(t.avail_out-257),u=k.dmax,d=k.wsize,A=k.whave,f=k.wnext,p=k.window,m=k.hold,g=k.bits,b=k.lencode,v=k.distcode,y=(1<<k.lenbits)-1,w=(1<<k.distbits)-1;e:do{g<15&&(m+=N[i++]<<g,g+=8,m+=N[i++]<<g,g+=8),j=b[m&y];t:for(;;){if(C=j>>>24,m>>>=C,g-=C,C=j>>>16&255,C===0)O[o++]=j&65535;else if(C&16){B=j&65535,C&=15,C&&(g<C&&(m+=N[i++]<<g,g+=8),B+=m&(1<<C)-1,m>>>=C,g-=C),g<15&&(m+=N[i++]<<g,g+=8,m+=N[i++]<<g,g+=8),j=v[m&w];r:for(;;){if(C=j>>>24,m>>>=C,g-=C,C=j>>>16&255,C&16){if(E=j&65535,C&=15,g<C&&(m+=N[i++]<<g,g+=8,g<C&&(m+=N[i++]<<g,g+=8)),E+=m&(1<<C)-1,E>u){t.msg="invalid distance too far back",k.mode=Km;break e}if(m>>>=C,g-=C,C=o-c,E>C){if(C=E-C,C>A&&k.sane){t.msg="invalid distance too far back",k.mode=Km;break e}if(_=0,S=p,f===0){if(_+=d-C,C<B){B-=C;do O[o++]=p[_++];while(--C);_=o-E,S=O}}else if(f<C){if(_+=d+f-C,C-=f,C<B){B-=C;do O[o++]=p[_++];while(--C);if(_=0,f<B){C=f,B-=C;do O[o++]=p[_++];while(--C);_=o-E,S=O}}}else if(_+=f-C,C<B){B-=C;do O[o++]=p[_++];while(--C);_=o-E,S=O}for(;B>2;)O[o++]=S[_++],O[o++]=S[_++],O[o++]=S[_++],B-=3;B&&(O[o++]=S[_++],B>1&&(O[o++]=S[_++]))}else{_=o-E;do O[o++]=O[_++],O[o++]=O[_++],O[o++]=O[_++],B-=3;while(B>2);B&&(O[o++]=O[_++],B>1&&(O[o++]=O[_++]))}}else if((C&64)===0){j=v[(j&65535)+(m&(1<<C)-1)];continue r}else{t.msg="invalid distance code",k.mode=Km;break e}break}}else if((C&64)===0){j=b[(j&65535)+(m&(1<<C)-1)];continue t}else if(C&32){k.mode=DV;break e}else{t.msg="invalid literal/length code",k.mode=Km;break e}break}}while(i<a&&o<l);B=g>>3,i-=B,g-=B<<3,m&=(1<<g)-1,t.next_in=i,t.next_out=o,t.avail_in=i<a?5+(a-i):5-(i-a),t.avail_out=o<l?257+(l-o):257-(o-l),k.hold=m,k.bits=g};const QA=15,y4=852,x4=592,b4=0,yb=1,v4=2,RV=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),QV=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),$V=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),HV=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),VV=(r,t,s,i,a,o,c,l)=>{const u=l.bits;let d=0,A=0,f=0,p=0,m=0,g=0,b=0,v=0,y=0,w=0,j,C,B,E,_,S=null,N;const O=new Uint16Array(QA+1),k=new Uint16Array(QA+1);let I=null,R,Q,$;for(d=0;d<=QA;d++)O[d]=0;for(A=0;A<i;A++)O[t[s+A]]++;for(m=u,p=QA;p>=1&&O[p]===0;p--);if(m>p&&(m=p),p===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<p&&O[f]===0;f++);for(m<f&&(m=f),v=1,d=1;d<=QA;d++)if(v<<=1,v-=O[d],v<0)return-1;if(v>0&&(r===b4||p!==1))return-1;for(k[1]=0,d=1;d<QA;d++)k[d+1]=k[d]+O[d];for(A=0;A<i;A++)t[s+A]!==0&&(c[k[t[s+A]]++]=A);if(r===b4?(S=I=c,N=20):r===yb?(S=RV,I=QV,N=257):(S=$V,I=HV,N=0),w=0,A=0,d=f,_=o,g=m,b=0,B=-1,y=1<<m,E=y-1,r===yb&&y>y4||r===v4&&y>x4)return 1;for(;;){R=d-b,c[A]+1<N?(Q=0,$=c[A]):c[A]>=N?(Q=I[c[A]-N],$=S[c[A]-N]):(Q=96,$=0),j=1<<d-b,C=1<<g,f=C;do C-=j,a[_+(w>>b)+C]=R<<24|Q<<16|$|0;while(C!==0);for(j=1<<d-1;w&j;)j>>=1;if(j!==0?(w&=j-1,w+=j):w=0,A++,--O[d]===0){if(d===p)break;d=t[s+c[A]]}if(d>m&&(w&E)!==B){for(b===0&&(b=m),_+=f,g=d-b,v=1<<g;g+b<p&&(v-=O[g+b],!(v<=0));)g++,v<<=1;if(y+=1<<g,r===yb&&y>y4||r===v4&&y>x4)return 1;B=w&E,a[B]=m<<24|g<<16|_-o|0}}return w!==0&&(a[_+w]=d-b<<24|64<<16|0),l.bits=m,0};var Zf=VV;const zV=0,kE=1,_E=2,{Z_FINISH:w4,Z_BLOCK:KV,Z_TREES:Gm,Z_OK:iA,Z_STREAM_END:GV,Z_NEED_DICT:WV,Z_STREAM_ERROR:Qo,Z_DATA_ERROR:EE,Z_MEM_ERROR:OE,Z_BUF_ERROR:qV,Z_DEFLATED:j4}=SE,Ny=16180,N4=16181,S4=16182,C4=16183,B4=16184,k4=16185,_4=16186,E4=16187,O4=16188,I4=16189,U0=16190,Cc=16191,xb=16192,P4=16193,bb=16194,T4=16195,F4=16196,U4=16197,L4=16198,Wm=16199,qm=16200,D4=16201,M4=16202,R4=16203,Q4=16204,$4=16205,vb=16206,H4=16207,V4=16208,Os=16209,IE=16210,PE=16211,YV=852,XV=592,JV=15,ZV=JV,z4=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function ez(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const dA=r=>{if(!r)return 1;const t=r.state;return!t||t.strm!==r||t.mode<Ny||t.mode>PE?1:0},TE=r=>{if(dA(r))return Qo;const t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=Ny,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(YV),t.distcode=t.distdyn=new Int32Array(XV),t.sane=1,t.back=-1,iA},FE=r=>{if(dA(r))return Qo;const t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,TE(r)},UE=(r,t)=>{let s;if(dA(r))return Qo;const i=r.state;return t<0?(s=0,t=-t):(s=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Qo:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=s,i.wbits=t,FE(r))},LE=(r,t)=>{if(!r)return Qo;const s=new ez;r.state=s,s.strm=r,s.window=null,s.mode=Ny;const i=UE(r,t);return i!==iA&&(r.state=null),i},tz=r=>LE(r,ZV);let K4=!0,wb,jb;const rz=r=>{if(K4){wb=new Int32Array(512),jb=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Zf(kE,r.lens,0,288,wb,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Zf(_E,r.lens,0,32,jb,0,r.work,{bits:5}),K4=!1}r.lencode=wb,r.lenbits=9,r.distcode=jb,r.distbits=5},DE=(r,t,s,i)=>{let a;const o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(t.subarray(s-o.wsize,s),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>i&&(a=i),o.window.set(t.subarray(s-i,s-i+a),o.wnext),i-=a,i?(o.window.set(t.subarray(s-i,s),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},nz=(r,t)=>{let s,i,a,o,c,l,u,d,A,f,p,m,g,b,v=0,y,w,j,C,B,E,_,S;const N=new Uint8Array(4);let O,k;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(dA(r)||!r.output||!r.input&&r.avail_in!==0)return Qo;s=r.state,s.mode===Cc&&(s.mode=xb),c=r.next_out,a=r.output,u=r.avail_out,o=r.next_in,i=r.input,l=r.avail_in,d=s.hold,A=s.bits,f=l,p=u,S=iA;e:for(;;)switch(s.mode){case Ny:if(s.wrap===0){s.mode=xb;break}for(;A<16;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}if(s.wrap&2&&d===35615){s.wbits===0&&(s.wbits=15),s.check=0,N[0]=d&255,N[1]=d>>>8&255,s.check=Ml(s.check,N,2,0),d=0,A=0,s.mode=N4;break}if(s.head&&(s.head.done=!1),!(s.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",s.mode=Os;break}if((d&15)!==j4){r.msg="unknown compression method",s.mode=Os;break}if(d>>>=4,A-=4,_=(d&15)+8,s.wbits===0&&(s.wbits=_),_>15||_>s.wbits){r.msg="invalid window size",s.mode=Os;break}s.dmax=1<<s.wbits,s.flags=0,r.adler=s.check=1,s.mode=d&512?I4:Cc,d=0,A=0;break;case N4:for(;A<16;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}if(s.flags=d,(s.flags&255)!==j4){r.msg="unknown compression method",s.mode=Os;break}if(s.flags&57344){r.msg="unknown header flags set",s.mode=Os;break}s.head&&(s.head.text=d>>8&1),s.flags&512&&s.wrap&4&&(N[0]=d&255,N[1]=d>>>8&255,s.check=Ml(s.check,N,2,0)),d=0,A=0,s.mode=S4;case S4:for(;A<32;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}s.head&&(s.head.time=d),s.flags&512&&s.wrap&4&&(N[0]=d&255,N[1]=d>>>8&255,N[2]=d>>>16&255,N[3]=d>>>24&255,s.check=Ml(s.check,N,4,0)),d=0,A=0,s.mode=C4;case C4:for(;A<16;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}s.head&&(s.head.xflags=d&255,s.head.os=d>>8),s.flags&512&&s.wrap&4&&(N[0]=d&255,N[1]=d>>>8&255,s.check=Ml(s.check,N,2,0)),d=0,A=0,s.mode=B4;case B4:if(s.flags&1024){for(;A<16;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}s.length=d,s.head&&(s.head.extra_len=d),s.flags&512&&s.wrap&4&&(N[0]=d&255,N[1]=d>>>8&255,s.check=Ml(s.check,N,2,0)),d=0,A=0}else s.head&&(s.head.extra=null);s.mode=k4;case k4:if(s.flags&1024&&(m=s.length,m>l&&(m=l),m&&(s.head&&(_=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(i.subarray(o,o+m),_)),s.flags&512&&s.wrap&4&&(s.check=Ml(s.check,i,m,o)),l-=m,o+=m,s.length-=m),s.length))break e;s.length=0,s.mode=_4;case _4:if(s.flags&2048){if(l===0)break e;m=0;do _=i[o+m++],s.head&&_&&s.length<65536&&(s.head.name+=String.fromCharCode(_));while(_&&m<l);if(s.flags&512&&s.wrap&4&&(s.check=Ml(s.check,i,m,o)),l-=m,o+=m,_)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=E4;case E4:if(s.flags&4096){if(l===0)break e;m=0;do _=i[o+m++],s.head&&_&&s.length<65536&&(s.head.comment+=String.fromCharCode(_));while(_&&m<l);if(s.flags&512&&s.wrap&4&&(s.check=Ml(s.check,i,m,o)),l-=m,o+=m,_)break e}else s.head&&(s.head.comment=null);s.mode=O4;case O4:if(s.flags&512){for(;A<16;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}if(s.wrap&4&&d!==(s.check&65535)){r.msg="header crc mismatch",s.mode=Os;break}d=0,A=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),r.adler=s.check=0,s.mode=Cc;break;case I4:for(;A<32;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}r.adler=s.check=z4(d),d=0,A=0,s.mode=U0;case U0:if(s.havedict===0)return r.next_out=c,r.avail_out=u,r.next_in=o,r.avail_in=l,s.hold=d,s.bits=A,WV;r.adler=s.check=1,s.mode=Cc;case Cc:if(t===KV||t===Gm)break e;case xb:if(s.last){d>>>=A&7,A-=A&7,s.mode=vb;break}for(;A<3;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}switch(s.last=d&1,d>>>=1,A-=1,d&3){case 0:s.mode=P4;break;case 1:if(rz(s),s.mode=Wm,t===Gm){d>>>=2,A-=2;break e}break;case 2:s.mode=F4;break;case 3:r.msg="invalid block type",s.mode=Os}d>>>=2,A-=2;break;case P4:for(d>>>=A&7,A-=A&7;A<32;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",s.mode=Os;break}if(s.length=d&65535,d=0,A=0,s.mode=bb,t===Gm)break e;case bb:s.mode=T4;case T4:if(m=s.length,m){if(m>l&&(m=l),m>u&&(m=u),m===0)break e;a.set(i.subarray(o,o+m),c),l-=m,o+=m,u-=m,c+=m,s.length-=m;break}s.mode=Cc;break;case F4:for(;A<14;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}if(s.nlen=(d&31)+257,d>>>=5,A-=5,s.ndist=(d&31)+1,d>>>=5,A-=5,s.ncode=(d&15)+4,d>>>=4,A-=4,s.nlen>286||s.ndist>30){r.msg="too many length or distance symbols",s.mode=Os;break}s.have=0,s.mode=U4;case U4:for(;s.have<s.ncode;){for(;A<3;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}s.lens[I[s.have++]]=d&7,d>>>=3,A-=3}for(;s.have<19;)s.lens[I[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,O={bits:s.lenbits},S=Zf(zV,s.lens,0,19,s.lencode,0,s.work,O),s.lenbits=O.bits,S){r.msg="invalid code lengths set",s.mode=Os;break}s.have=0,s.mode=L4;case L4:for(;s.have<s.nlen+s.ndist;){for(;v=s.lencode[d&(1<<s.lenbits)-1],y=v>>>24,w=v>>>16&255,j=v&65535,!(y<=A);){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}if(j<16)d>>>=y,A-=y,s.lens[s.have++]=j;else{if(j===16){for(k=y+2;A<k;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}if(d>>>=y,A-=y,s.have===0){r.msg="invalid bit length repeat",s.mode=Os;break}_=s.lens[s.have-1],m=3+(d&3),d>>>=2,A-=2}else if(j===17){for(k=y+3;A<k;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}d>>>=y,A-=y,_=0,m=3+(d&7),d>>>=3,A-=3}else{for(k=y+7;A<k;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}d>>>=y,A-=y,_=0,m=11+(d&127),d>>>=7,A-=7}if(s.have+m>s.nlen+s.ndist){r.msg="invalid bit length repeat",s.mode=Os;break}for(;m--;)s.lens[s.have++]=_}}if(s.mode===Os)break;if(s.lens[256]===0){r.msg="invalid code -- missing end-of-block",s.mode=Os;break}if(s.lenbits=9,O={bits:s.lenbits},S=Zf(kE,s.lens,0,s.nlen,s.lencode,0,s.work,O),s.lenbits=O.bits,S){r.msg="invalid literal/lengths set",s.mode=Os;break}if(s.distbits=6,s.distcode=s.distdyn,O={bits:s.distbits},S=Zf(_E,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,O),s.distbits=O.bits,S){r.msg="invalid distances set",s.mode=Os;break}if(s.mode=Wm,t===Gm)break e;case Wm:s.mode=qm;case qm:if(l>=6&&u>=258){r.next_out=c,r.avail_out=u,r.next_in=o,r.avail_in=l,s.hold=d,s.bits=A,MV(r,p),c=r.next_out,a=r.output,u=r.avail_out,o=r.next_in,i=r.input,l=r.avail_in,d=s.hold,A=s.bits,s.mode===Cc&&(s.back=-1);break}for(s.back=0;v=s.lencode[d&(1<<s.lenbits)-1],y=v>>>24,w=v>>>16&255,j=v&65535,!(y<=A);){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}if(w&&(w&240)===0){for(C=y,B=w,E=j;v=s.lencode[E+((d&(1<<C+B)-1)>>C)],y=v>>>24,w=v>>>16&255,j=v&65535,!(C+y<=A);){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}d>>>=C,A-=C,s.back+=C}if(d>>>=y,A-=y,s.back+=y,s.length=j,w===0){s.mode=$4;break}if(w&32){s.back=-1,s.mode=Cc;break}if(w&64){r.msg="invalid literal/length code",s.mode=Os;break}s.extra=w&15,s.mode=D4;case D4:if(s.extra){for(k=s.extra;A<k;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}s.length+=d&(1<<s.extra)-1,d>>>=s.extra,A-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=M4;case M4:for(;v=s.distcode[d&(1<<s.distbits)-1],y=v>>>24,w=v>>>16&255,j=v&65535,!(y<=A);){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}if((w&240)===0){for(C=y,B=w,E=j;v=s.distcode[E+((d&(1<<C+B)-1)>>C)],y=v>>>24,w=v>>>16&255,j=v&65535,!(C+y<=A);){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}d>>>=C,A-=C,s.back+=C}if(d>>>=y,A-=y,s.back+=y,w&64){r.msg="invalid distance code",s.mode=Os;break}s.offset=j,s.extra=w&15,s.mode=R4;case R4:if(s.extra){for(k=s.extra;A<k;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}s.offset+=d&(1<<s.extra)-1,d>>>=s.extra,A-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){r.msg="invalid distance too far back",s.mode=Os;break}s.mode=Q4;case Q4:if(u===0)break e;if(m=p-u,s.offset>m){if(m=s.offset-m,m>s.whave&&s.sane){r.msg="invalid distance too far back",s.mode=Os;break}m>s.wnext?(m-=s.wnext,g=s.wsize-m):g=s.wnext-m,m>s.length&&(m=s.length),b=s.window}else b=a,g=c-s.offset,m=s.length;m>u&&(m=u),u-=m,s.length-=m;do a[c++]=b[g++];while(--m);s.length===0&&(s.mode=qm);break;case $4:if(u===0)break e;a[c++]=s.length,u--,s.mode=qm;break;case vb:if(s.wrap){for(;A<32;){if(l===0)break e;l--,d|=i[o++]<<A,A+=8}if(p-=u,r.total_out+=p,s.total+=p,s.wrap&4&&p&&(r.adler=s.check=s.flags?Ml(s.check,a,p,c-p):hw(s.check,a,p,c-p)),p=u,s.wrap&4&&(s.flags?d:z4(d))!==s.check){r.msg="incorrect data check",s.mode=Os;break}d=0,A=0}s.mode=H4;case H4:if(s.wrap&&s.flags){for(;A<32;){if(l===0)break e;l--,d+=i[o++]<<A,A+=8}if(s.wrap&4&&d!==(s.total&4294967295)){r.msg="incorrect length check",s.mode=Os;break}d=0,A=0}s.mode=V4;case V4:S=GV;break e;case Os:S=EE;break e;case IE:return OE;case PE:default:return Qo}return r.next_out=c,r.avail_out=u,r.next_in=o,r.avail_in=l,s.hold=d,s.bits=A,(s.wsize||p!==r.avail_out&&s.mode<Os&&(s.mode<vb||t!==w4))&&DE(r,r.output,r.next_out,p-r.avail_out),f-=r.avail_in,p-=r.avail_out,r.total_in+=f,r.total_out+=p,s.total+=p,s.wrap&4&&p&&(r.adler=s.check=s.flags?Ml(s.check,a,p,r.next_out-p):hw(s.check,a,p,r.next_out-p)),r.data_type=s.bits+(s.last?64:0)+(s.mode===Cc?128:0)+(s.mode===Wm||s.mode===bb?256:0),(f===0&&p===0||t===w4)&&S===iA&&(S=qV),S},sz=r=>{if(dA(r))return Qo;let t=r.state;return t.window&&(t.window=null),r.state=null,iA},iz=(r,t)=>{if(dA(r))return Qo;const s=r.state;return(s.wrap&2)===0?Qo:(s.head=t,t.done=!1,iA)},az=(r,t)=>{const s=t.length;let i,a,o;return dA(r)||(i=r.state,i.wrap!==0&&i.mode!==U0)?Qo:i.mode===U0&&(a=1,a=hw(a,t,s,0),a!==i.check)?EE:(o=DE(r,t,s,s),o?(i.mode=IE,OE):(i.havedict=1,iA))};var oz=FE,lz=UE,cz=TE,uz=tz,dz=LE,Az=nz,hz=sz,fz=iz,pz=az,mz="pako inflate (from Nodeca project)",Ec={inflateReset:oz,inflateReset2:lz,inflateResetKeep:cz,inflateInit:uz,inflateInit2:dz,inflate:Az,inflateEnd:hz,inflateGetHeader:fz,inflateSetDictionary:pz,inflateInfo:mz};function gz(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var yz=gz;const ME=Object.prototype.toString,{Z_NO_FLUSH:xz,Z_FINISH:bz,Z_OK:Np,Z_STREAM_END:Nb,Z_NEED_DICT:Sb,Z_STREAM_ERROR:vz,Z_DATA_ERROR:G4,Z_MEM_ERROR:wz}=SE;function Kp(r){this.options=CE.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new LV,this.strm.avail_out=0;let s=Ec.inflateInit2(this.strm,t.windowBits);if(s!==Np)throw new Error(fw[s]);if(this.header=new yz,Ec.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=pw.string2buf(t.dictionary):ME.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(s=Ec.inflateSetDictionary(this.strm,t.dictionary),s!==Np)))throw new Error(fw[s])}Kp.prototype.push=function(r,t){const s=this.strm,i=this.options.chunkSize,a=this.options.dictionary;let o,c,l;if(this.ended)return!1;for(t===~~t?c=t:c=t===!0?bz:xz,ME.call(r)==="[object ArrayBuffer]"?s.input=new Uint8Array(r):s.input=r,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),o=Ec.inflate(s,c),o===Sb&&a&&(o=Ec.inflateSetDictionary(s,a),o===Np?o=Ec.inflate(s,c):o===G4&&(o=Sb));s.avail_in>0&&o===Nb&&s.state.wrap>0&&r[s.next_in]!==0;)Ec.inflateReset(s),o=Ec.inflate(s,c);switch(o){case vz:case G4:case Sb:case wz:return this.onEnd(o),this.ended=!0,!1}if(l=s.avail_out,s.next_out&&(s.avail_out===0||o===Nb))if(this.options.to==="string"){let u=pw.utf8border(s.output,s.next_out),d=s.next_out-u,A=pw.buf2string(s.output,u);s.next_out=d,s.avail_out=i-d,d&&s.output.set(s.output.subarray(u,u+d),0),this.onData(A)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(!(o===Np&&l===0)){if(o===Nb)return o=Ec.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(s.avail_in===0)break}}return!0};Kp.prototype.onData=function(r){this.chunks.push(r)};Kp.prototype.onEnd=function(r){r===Np&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=CE.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function jz(r,t){const s=new Kp(t);if(s.push(r),s.err)throw s.msg||fw[s.err];return s.result}var Nz=Kp,Sz=jz,Cz={Inflate:Nz,inflate:Sz};const{Inflate:Bz,inflate:kz}=Cz;var W4=Bz,_z=kz;const RE=[];for(let r=0;r<256;r++){let t=r;for(let s=0;s<8;s++)t&1?t=3988292384^t>>>1:t=t>>>1;RE[r]=t}const q4=4294967295;function Ez(r,t,s){let i=r;for(let a=0;a<s;a++)i=RE[(i^t[a])&255]^i>>>8;return i}function Oz(r,t){return(Ez(q4,r,t)^q4)>>>0}function Y4(r,t,s){const i=r.readUint32(),a=Oz(new Uint8Array(r.buffer,r.byteOffset+r.offset-t-4,t),t);if(a!==i)throw new Error(`CRC mismatch for chunk ${s}. Expected ${i}, found ${a}`)}function QE(r,t,s){for(let i=0;i<s;i++)t[i]=r[i]}function $E(r,t,s,i){let a=0;for(;a<i;a++)t[a]=r[a];for(;a<s;a++)t[a]=r[a]+t[a-i]&255}function HE(r,t,s,i){let a=0;if(s.length===0)for(;a<i;a++)t[a]=r[a];else for(;a<i;a++)t[a]=r[a]+s[a]&255}function VE(r,t,s,i,a){let o=0;if(s.length===0){for(;o<a;o++)t[o]=r[o];for(;o<i;o++)t[o]=r[o]+(t[o-a]>>1)&255}else{for(;o<a;o++)t[o]=r[o]+(s[o]>>1)&255;for(;o<i;o++)t[o]=r[o]+(t[o-a]+s[o]>>1)&255}}function zE(r,t,s,i,a){let o=0;if(s.length===0){for(;o<a;o++)t[o]=r[o];for(;o<i;o++)t[o]=r[o]+t[o-a]&255}else{for(;o<a;o++)t[o]=r[o]+s[o]&255;for(;o<i;o++)t[o]=r[o]+Iz(t[o-a],s[o],s[o-a])&255}}function Iz(r,t,s){const i=r+t-s,a=Math.abs(i-r),o=Math.abs(i-t),c=Math.abs(i-s);return a<=o&&a<=c?r:o<=c?t:s}function Pz(r,t,s,i,a,o){switch(r){case 0:QE(t,s,a);break;case 1:$E(t,s,a,o);break;case 2:HE(t,s,i,a);break;case 3:VE(t,s,i,a,o);break;case 4:zE(t,s,i,a,o);break;default:throw new Error(`Unsupported filter: ${r}`)}}const Tz=new Uint16Array([255]),Fz=new Uint8Array(Tz.buffer),Uz=Fz[0]===255;function Lz(r){const{data:t,width:s,height:i,channels:a,depth:o}=r,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(o/8)*a,u=new Uint8Array(i*s*l);let d=0;for(let A=0;A<7;A++){const f=c[A],p=Math.ceil((s-f.x)/f.xStep),m=Math.ceil((i-f.y)/f.yStep);if(p<=0||m<=0)continue;const g=p*l,b=new Uint8Array(g);for(let v=0;v<m;v++){const y=t[d++],w=t.subarray(d,d+g);d+=g;const j=new Uint8Array(g);Pz(y,w,j,b,g,l),b.set(j);for(let C=0;C<p;C++){const B=f.x+C*f.xStep,E=f.y+v*f.yStep;if(!(B>=s||E>=i))for(let _=0;_<l;_++)u[(E*s+B)*l+_]=j[C*l+_]}}}if(o===16){const A=new Uint16Array(u.buffer);if(Uz)for(let f=0;f<A.length;f++)A[f]=Dz(A[f]);return A}else return u}function Dz(r){return(r&255)<<8|r>>8&255}const Mz=new Uint16Array([255]),Rz=new Uint8Array(Mz.buffer),Qz=Rz[0]===255,$z=new Uint8Array(0);function X4(r){const{data:t,width:s,height:i,channels:a,depth:o}=r,c=Math.ceil(o/8)*a,l=Math.ceil(o/8*a*s),u=new Uint8Array(i*l);let d=$z,A=0,f,p;for(let m=0;m<i;m++){switch(f=t.subarray(A+1,A+1+l),p=u.subarray(m*l,(m+1)*l),t[A]){case 0:QE(f,p,l);break;case 1:$E(f,p,l,c);break;case 2:HE(f,p,d,l);break;case 3:VE(f,p,d,l,c);break;case 4:zE(f,p,d,l,c);break;default:throw new Error(`Unsupported filter: ${t[A]}`)}d=p,A+=l+1}if(o===16){const m=new Uint16Array(u.buffer);if(Qz)for(let g=0;g<m.length;g++)m[g]=Hz(m[g]);return m}else return u}function Hz(r){return(r&255)<<8|r>>8&255}const zg=Uint8Array.of(137,80,78,71,13,10,26,10);function J4(r){if(!Vz(r.readBytes(zg.length)))throw new Error("wrong PNG signature")}function Vz(r){if(r.length<zg.length)return!1;for(let t=0;t<zg.length;t++)if(r[t]!==zg[t])return!1;return!0}const zz="tEXt",Kz=0,KE=new TextDecoder("latin1");function Gz(r){if(qz(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const Wz=/^[\u0000-\u00FF]*$/;function qz(r){if(!Wz.test(r))throw new Error("invalid latin1 text")}function Yz(r,t,s){const i=GE(t);r[i]=Xz(t,s-i.length-1)}function GE(r){for(r.mark();r.readByte()!==Kz;);const t=r.offset;r.reset();const s=KE.decode(r.readBytes(t-r.offset-1));return r.skip(1),Gz(s),s}function Xz(r,t){return KE.decode(r.readBytes(t))}const lo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Cb={UNKNOWN:-1,DEFLATE:0},Z4={UNKNOWN:-1,ADAPTIVE:0},Bb={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ym={NONE:0,BACKGROUND:1,PREVIOUS:2},kb={SOURCE:0,OVER:1};class Jz extends A2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,s={}){super(t);const{checkCrc:i=!1}=s;this._checkCrc=i,this._inflator=new W4,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Cb.UNKNOWN,this._filterMethod=Z4.UNKNOWN,this._interlaceMethod=Bb.UNKNOWN,this._colorType=lo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(J4(this);!this._end;){const t=this.readUint32(),s=this.readChars(4);this.decodeChunk(t,s)}return this.decodeImage(),this._png}decodeApng(){for(J4(this);!this._end;){const t=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(t,s)}return this.decodeApngImage(),this._apng}decodeChunk(t,s){const i=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case zz:Yz(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?Y4(this,t+4,s):this.skip(4)}decodeApngChunk(t,s){const i=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,s),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?Y4(this,t+4,s):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=Zz(this.readUint8());const s=this.readUint8();this._colorType=s;let i;switch(s){case lo.GREYSCALE:i=1;break;case lo.TRUECOLOUR:i=3;break;case lo.INDEXED_COLOUR:i=1;break;case lo.GREYSCALE_ALPHA:i=2;break;case lo.TRUECOLOUR_ALPHA:i=4;break;case lo.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Cb.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const s=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<s;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const s=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let s=t,i=this.offset+this.byteOffset;if(i+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,i,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case lo.GREYSCALE:case lo.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let s=0;s<t/2;s++)this._transparency[s]=this.readUint16();break}case lo.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let s=0;for(;s<t;s++){const i=this.readByte();this._palette[s].push(i)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case lo.UNKNOWN:case lo.GREYSCALE_ALPHA:case lo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const s=GE(this),i=this.readUint8();if(i!==Cb.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(t-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:_z(a)}}decodepHYs(){const t=this.readUint32(),s=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:s,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const s={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=X4({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)s.data=i.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(i,a,s),this.addFrameDataToCanvas(s,i)}this._apng.frames.push(s)}}return this._apng}disposeFrame(t,s,i){switch(t.disposeOp){case Ym.NONE:break;case Ym.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const c=(a*t.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[c+l]=0}break;case Ym.PREVIOUS:i.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,s){const i=1<<this._png.depth,a=(o,c)=>{const l=((o+s.yOffset)*this._png.width+s.xOffset+c)*this._png.channels,u=(o*s.width+c)*this._png.channels;return{index:l,frameIndex:u}};switch(s.blendOp){case kb.SOURCE:for(let o=0;o<s.height;o++)for(let c=0;c<s.width;c++){const{index:l,frameIndex:u}=a(o,c);for(let d=0;d<this._png.channels;d++)t.data[l+d]=s.data[u+d]}break;case kb.OVER:for(let o=0;o<s.height;o++)for(let c=0;c<s.width;c++){const{index:l,frameIndex:u}=a(o,c);for(let d=0;d<this._png.channels;d++){const A=s.data[u+this._png.channels-1]/i,f=d%(this._png.channels-1)===0?1:s.data[u+d],p=Math.floor(A*f+(1-A)*t.data[l+d]);t.data[l+d]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Z4.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Bb.NO_INTERLACE)this._png.data=X4({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Bb.ADAM7)this._png.data=Lz({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,s=this._frames.at(-1);s?s.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ym.NONE,blendOp:kb.SOURCE,data:t}),this._inflator=new W4,this._writingDataChunks=!1}}function Zz(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var eS;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(eS||(eS={}));function eK(r,t){return new Jz(r,t).decode()}var tn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function _b(){tn.console&&typeof tn.console.log=="function"&&tn.console.log.apply(tn.console,arguments)}var hs={log:_b,warn:function(r){tn.console&&(typeof tn.console.warn=="function"?tn.console.warn.apply(tn.console,arguments):_b.call(null,arguments))},error:function(r){tn.console&&(typeof tn.console.error=="function"?tn.console.error.apply(tn.console,arguments):_b(r))}};function Eb(r,t,s){var i=new XMLHttpRequest;i.open("GET",r),i.responseType="blob",i.onload=function(){Td(i.response,t,s)},i.onerror=function(){hs.error("could not download file")},i.send()}function tS(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Xm(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var Td=tn.saveAs||((typeof window>"u"?"undefined":ss(window))!=="object"||window!==tn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,s){var i=tn.URL||tn.webkitURL,a=document.createElement("a");t=t||r.name||"download",a.download=t,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?tS(a.href)?Eb(r,t,s):Xm(a,a.target="_blank"):Xm(a)):(a.href=i.createObjectURL(r),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){Xm(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,s){if(t=t||r.name||"download",typeof r=="string")if(tS(r))Eb(r,t,s);else{var i=document.createElement("a");i.href=r,i.target="_blank",setTimeout(function(){Xm(i)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:ss(o)!=="object"&&(hs.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(r,s),t)}:function(r,t,s,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof r=="string")return Eb(r,t,s);var a=r.type==="application/octet-stream",o=/constructor/i.test(tn.HTMLElement)||tn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&o)&&(typeof FileReader>"u"?"undefined":ss(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var A=l.result;A=c?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=A:location=A,i=null},l.readAsDataURL(r)}else{var u=tn.URL||tn.webkitURL,d=u.createObjectURL(r);i?i.location=d:location.href=d,i=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function WE(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var s=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0;i<s.length;i++){var a=s[i].re,o=s[i].process,c=a.exec(r);c&&(t=o(c),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),"#"+l+u+d}}var Kg=tn.atob.bind(tn),rS=tn.btoa.bind(tn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ob(r,t){var s=r[0],i=r[1],a=r[2],o=r[3];s=ya(s,i,a,o,t[0],7,-680876936),o=ya(o,s,i,a,t[1],12,-389564586),a=ya(a,o,s,i,t[2],17,606105819),i=ya(i,a,o,s,t[3],22,-1044525330),s=ya(s,i,a,o,t[4],7,-176418897),o=ya(o,s,i,a,t[5],12,1200080426),a=ya(a,o,s,i,t[6],17,-1473231341),i=ya(i,a,o,s,t[7],22,-45705983),s=ya(s,i,a,o,t[8],7,1770035416),o=ya(o,s,i,a,t[9],12,-1958414417),a=ya(a,o,s,i,t[10],17,-42063),i=ya(i,a,o,s,t[11],22,-1990404162),s=ya(s,i,a,o,t[12],7,1804603682),o=ya(o,s,i,a,t[13],12,-40341101),a=ya(a,o,s,i,t[14],17,-1502002290),s=xa(s,i=ya(i,a,o,s,t[15],22,1236535329),a,o,t[1],5,-165796510),o=xa(o,s,i,a,t[6],9,-1069501632),a=xa(a,o,s,i,t[11],14,643717713),i=xa(i,a,o,s,t[0],20,-373897302),s=xa(s,i,a,o,t[5],5,-701558691),o=xa(o,s,i,a,t[10],9,38016083),a=xa(a,o,s,i,t[15],14,-660478335),i=xa(i,a,o,s,t[4],20,-405537848),s=xa(s,i,a,o,t[9],5,568446438),o=xa(o,s,i,a,t[14],9,-1019803690),a=xa(a,o,s,i,t[3],14,-187363961),i=xa(i,a,o,s,t[8],20,1163531501),s=xa(s,i,a,o,t[13],5,-1444681467),o=xa(o,s,i,a,t[2],9,-51403784),a=xa(a,o,s,i,t[7],14,1735328473),s=ba(s,i=xa(i,a,o,s,t[12],20,-1926607734),a,o,t[5],4,-378558),o=ba(o,s,i,a,t[8],11,-2022574463),a=ba(a,o,s,i,t[11],16,1839030562),i=ba(i,a,o,s,t[14],23,-35309556),s=ba(s,i,a,o,t[1],4,-1530992060),o=ba(o,s,i,a,t[4],11,1272893353),a=ba(a,o,s,i,t[7],16,-155497632),i=ba(i,a,o,s,t[10],23,-1094730640),s=ba(s,i,a,o,t[13],4,681279174),o=ba(o,s,i,a,t[0],11,-358537222),a=ba(a,o,s,i,t[3],16,-722521979),i=ba(i,a,o,s,t[6],23,76029189),s=ba(s,i,a,o,t[9],4,-640364487),o=ba(o,s,i,a,t[12],11,-421815835),a=ba(a,o,s,i,t[15],16,530742520),s=va(s,i=ba(i,a,o,s,t[2],23,-995338651),a,o,t[0],6,-198630844),o=va(o,s,i,a,t[7],10,1126891415),a=va(a,o,s,i,t[14],15,-1416354905),i=va(i,a,o,s,t[5],21,-57434055),s=va(s,i,a,o,t[12],6,1700485571),o=va(o,s,i,a,t[3],10,-1894986606),a=va(a,o,s,i,t[10],15,-1051523),i=va(i,a,o,s,t[1],21,-2054922799),s=va(s,i,a,o,t[8],6,1873313359),o=va(o,s,i,a,t[15],10,-30611744),a=va(a,o,s,i,t[6],15,-1560198380),i=va(i,a,o,s,t[13],21,1309151649),s=va(s,i,a,o,t[4],6,-145523070),o=va(o,s,i,a,t[11],10,-1120210379),a=va(a,o,s,i,t[2],15,718787259),i=va(i,a,o,s,t[9],21,-343485551),r[0]=Pu(s,r[0]),r[1]=Pu(i,r[1]),r[2]=Pu(a,r[2]),r[3]=Pu(o,r[3])}function Sy(r,t,s,i,a,o){return t=Pu(Pu(t,r),Pu(i,o)),Pu(t<<a|t>>>32-a,s)}function ya(r,t,s,i,a,o,c){return Sy(t&s|~t&i,r,t,a,o,c)}function xa(r,t,s,i,a,o,c){return Sy(t&i|s&~i,r,t,a,o,c)}function ba(r,t,s,i,a,o,c){return Sy(t^s^i,r,t,a,o,c)}function va(r,t,s,i,a,o,c){return Sy(s^(t|~i),r,t,a,o,c)}function qE(r){var t,s=r.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)Ob(i,tK(r.substring(t-64,t)));r=r.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)a[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(Ob(i,a),t=0;t<16;t++)a[t]=0;return a[14]=8*s,Ob(i,a),i}function tK(r){var t,s=[];for(t=0;t<64;t+=4)s[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return s}var nS="0123456789abcdef".split("");function rK(r){for(var t="",s=0;s<4;s++)t+=nS[r>>8*s+4&15]+nS[r>>8*s&15];return t}function nK(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function mw(r){return qE(r).map(nK).join("")}var sK=(function(r){for(var t=0;t<r.length;t++)r[t]=rK(r[t]);return r.join("")})(qE("hello"))!="5d41402abc4b2a76b9719d911017c592";function Pu(r,t){if(sK){var s=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(s>>16)<<16|65535&s}return r+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function gw(r,t){var s,i,a,o;if(r!==s){for(var c=(a=r,o=1+(256/r.length|0),new Array(o+1).join(a)),l=[],u=0;u<256;u++)l[u]=u;var d=0;for(u=0;u<256;u++){var A=l[u];d=(d+A+c.charCodeAt(u))%256,l[u]=l[d],l[d]=A}s=r,i=l}else l=i;var f=t.length,p=0,m=0,g="";for(u=0;u<f;u++)m=(m+(A=l[p=(p+1)%256]))%256,l[p]=l[m],l[m]=A,c=l[(l[p]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(u)^c);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var sS={print:4,modify:8,copy:16,"annot-forms":32};function YA(r,t,s,i){this.v=1,this.r=2;var a=192;r.forEach(function(l){if(sS.perm!==void 0)throw new Error("Invalid permission: "+l);a+=sS[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),c=(s+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,c),this.P=-(1+(255^a)),this.encryptionKey=mw(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=gw(this.encryptionKey,this.padding)}function XA(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",s=r.length,i=0;i<s;i++){var a=r.charCodeAt(i);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):r[i]}return t}function iS(r){if(ss(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(s,i,a){if(a=a||!1,typeof s!="string"||typeof i!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(s)||(t[s]={});var o=Math.random().toString(35);return t[s][o]=[i,!!a],o},this.unsubscribe=function(s){for(var i in t)if(t[i][s])return delete t[i][s],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(s){if(t.hasOwnProperty(s)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var o in t[s]){var c=t[s][o];try{c[0].apply(r,i)}catch(l){tn.console&&hs.error("jsPDF PubSub Error",l.message,l)}c[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function L0(r){if(!(this instanceof L0))return new L0(r);var t="opacity,stroke-opacity".split(",");for(var s in r)r.hasOwnProperty(s)&&t.indexOf(s)>=0&&(this[s]=r[s]);this.id="",this.objectNumber=-1}function YE(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function Ud(r,t,s,i,a){if(!(this instanceof Ud))return new Ud(r,t,s,i,a);this.type=r==="axial"?2:3,this.coords=t,this.colors=s,YE.call(this,i,a)}function ih(r,t,s,i,a){if(!(this instanceof ih))return new ih(r,t,s,i,a);this.boundingBox=r,this.xStep=t,this.yStep=s,this.stream="",this.cloneIndex=0,YE.call(this,i,a)}function Tr(r){var t,s=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],a=arguments[2],o=arguments[3],c=[],l=1,u=16,d="S",A=null;ss(r=r||{})==="object"&&(s=r.orientation,i=r.unit||i,a=r.format||a,o=r.compress||r.compressPdf||o,(A=r.encryption||null)!==null&&(A.userPassword=A.userPassword||"",A.ownerPassword=A.ownerPassword||"",A.userPermissions=A.userPermissions||[]),l=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(u=r.floatPrecision),d=r.defaultPathOperation||"S"),c=r.filters||(o===!0?["FlateEncode"]:c),i=i||"mm",s=(""+(s||"P")).toLowerCase();var f=r.putOnlyUsedFonts||!1,p={},m={internal:{},__private__:{}};m.__private__.PubSub=iS;var g="1.3",b=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(ne){g=ne};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(ne){return v[ne]};a=a||"a4";var w="compat",j="advanced",C=w;function B(){this.saveGraphicsState(),te(new gr(Ye,0,0,-Ye,0,xt()*Ye).toString()+" cm"),this.setFontSize(this.getFontSize()/Ye),d="n",C=j}function E(){this.restoreGraphicsState(),d="S",C=w}var _=m.__private__.combineFontStyleAndFontWeight=function(ne,xe){if(ne=="bold"&&xe=="normal"||ne=="bold"&&xe==400||ne=="normal"&&xe=="italic"||ne=="bold"&&xe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return xe&&(ne=xe==400||xe==="normal"?ne==="italic"?"italic":"normal":xe!=700&&xe!=="bold"||ne!=="normal"?(xe==700?"bold":xe)+""+ne:"bold"),ne};m.advancedAPI=function(ne){var xe=C===w;return xe&&B.call(this),typeof ne!="function"||(ne(this),xe&&E.call(this)),this},m.compatAPI=function(ne){var xe=C===j;return xe&&E.call(this),typeof ne!="function"||(ne(this),xe&&B.call(this)),this},m.isAdvancedAPI=function(){return C===j};var S,N=function(ne){if(C!==j)throw new Error(ne+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=m.roundToPrecision=m.__private__.roundToPrecision=function(ne,xe){var Qe=t||xe;if(isNaN(ne)||isNaN(Qe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ne.toFixed(Qe).replace(/0+$/,"")};S=m.hpf=m.__private__.hpf=typeof u=="number"?function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.hpf");return O(ne,u)}:u==="smart"?function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.hpf");return O(ne,ne>-1&&ne<1?16:5)}:function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.hpf");return O(ne,16)};var k=m.f2=m.__private__.f2=function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.f2");return O(ne,2)},I=m.__private__.f3=function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.f3");return O(ne,3)},R=m.scale=m.__private__.scale=function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.scale");return C===w?ne*Ye:C===j?ne:void 0},Q=function(ne){return R((function(xe){return C===w?xt()-xe:C===j?xe:void 0})(ne))};m.__private__.setPrecision=m.setPrecision=function(ne){typeof parseInt(ne,10)=="number"&&(t=parseInt(ne,10))};var $,L="00000000000000000000000000000000",F=m.__private__.getFileId=function(){return L},G=m.__private__.setFileId=function(ne){return L=ne!==void 0&&/^[a-fA-F0-9]{32}$/.test(ne)?ne.toUpperCase():L.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),A!==null&&(fn=new YA(A.userPermissions,A.userPassword,A.ownerPassword,L)),L};m.setFileId=function(ne){return G(ne),this},m.getFileId=function(){return F()};var X=m.__private__.convertDateToPDFDate=function(ne){var xe=ne.getTimezoneOffset(),Qe=xe<0?"+":"-",Xe=Math.floor(Math.abs(xe/60)),rt=Math.abs(xe%60),wt=[Qe,z(Xe),"'",z(rt),"'"].join("");return["D:",ne.getFullYear(),z(ne.getMonth()+1),z(ne.getDate()),z(ne.getHours()),z(ne.getMinutes()),z(ne.getSeconds()),wt].join("")},q=m.__private__.convertPDFDateToDate=function(ne){var xe=parseInt(ne.substr(2,4),10),Qe=parseInt(ne.substr(6,2),10)-1,Xe=parseInt(ne.substr(8,2),10),rt=parseInt(ne.substr(10,2),10),wt=parseInt(ne.substr(12,2),10),St=parseInt(ne.substr(14,2),10);return new Date(xe,Qe,Xe,rt,wt,St,0)},T=m.__private__.setCreationDate=function(ne){var xe;if(ne===void 0&&(ne=new Date),ne instanceof Date)xe=X(ne);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ne))throw new Error("Invalid argument passed to jsPDF.setCreationDate");xe=ne}return $=xe},U=m.__private__.getCreationDate=function(ne){var xe=$;return ne==="jsDate"&&(xe=q($)),xe};m.setCreationDate=function(ne){return T(ne),this},m.getCreationDate=function(ne){return U(ne)};var K,z=m.__private__.padd2=function(ne){return("0"+parseInt(ne)).slice(-2)},M=m.__private__.padd2Hex=function(ne){return("00"+(ne=ne.toString())).substr(ne.length)},H=0,Y=[],ae=[],oe=0,be=[],ge=[],he=!1,ke=ae;m.__private__.setCustomOutputDestination=function(ne){he=!0,ke=ne};var Z=function(ne){he||(ke=ne)};m.__private__.resetCustomOutputDestination=function(){he=!1,ke=ae};var te=m.__private__.out=function(ne){return ne=ne.toString(),oe+=ne.length+1,ke.push(ne),ke},fe=m.__private__.write=function(ne){return te(arguments.length===1?ne.toString():Array.prototype.join.call(arguments," "))},we=m.__private__.getArrayBuffer=function(ne){for(var xe=ne.length,Qe=new ArrayBuffer(xe),Xe=new Uint8Array(Qe);xe--;)Xe[xe]=ne.charCodeAt(xe);return Qe},Fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Fe};var _e=r.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(ne){return _e=C===j?ne/Ye:ne,this};var Ce,ie=m.__private__.getFontSize=m.getFontSize=function(){return C===w?_e:_e*Ye},me=r.R2L||!1;m.__private__.setR2L=m.setR2L=function(ne){return me=ne,this},m.__private__.getR2L=m.getR2L=function(){return me};var Be,Le=m.__private__.setZoomMode=function(ne){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ne))Ce=ne;else if(isNaN(ne)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(ne)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ne+'" is not recognized.');Ce=ne}else Ce=parseInt(ne,10)};m.__private__.getZoomMode=function(){return Ce};var ve,$e=m.__private__.setPageMode=function(ne){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ne)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ne+'" is not recognized.');Be=ne};m.__private__.getPageMode=function(){return Be};var je=m.__private__.setLayoutMode=function(ne){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ne)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ne+'" is not recognized.');ve=ne};m.__private__.getLayoutMode=function(){return ve},m.__private__.setDisplayMode=m.setDisplayMode=function(ne,xe,Qe){return Le(ne),je(xe),$e(Qe),this};var Pe={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(ne){if(Object.keys(Pe).indexOf(ne)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pe[ne]},m.__private__.getDocumentProperties=function(){return Pe},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(ne){for(var xe in Pe)Pe.hasOwnProperty(xe)&&ne[xe]&&(Pe[xe]=ne[xe]);return this},m.__private__.setDocumentProperty=function(ne,xe){if(Object.keys(Pe).indexOf(ne)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pe[ne]=xe};var Te,Ye,He,it,It,dt={},Pt={},vt=[],tr={},Jt={},Et={},ur={},vr=null,Wt=0,Gt=[],at=new iS(m),rn=r.hotfixes||[],dr={},et={},an=[],gr=function ne(xe,Qe,Xe,rt,wt,St){if(!(this instanceof ne))return new ne(xe,Qe,Xe,rt,wt,St);isNaN(xe)&&(xe=1),isNaN(Qe)&&(Qe=0),isNaN(Xe)&&(Xe=0),isNaN(rt)&&(rt=1),isNaN(wt)&&(wt=0),isNaN(St)&&(St=0),this._matrix=[xe,Qe,Xe,rt,wt,St]};Object.defineProperty(gr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ne){this._matrix[0]=ne}}),Object.defineProperty(gr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ne){this._matrix[1]=ne}}),Object.defineProperty(gr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ne){this._matrix[2]=ne}}),Object.defineProperty(gr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ne){this._matrix[3]=ne}}),Object.defineProperty(gr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ne){this._matrix[4]=ne}}),Object.defineProperty(gr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ne){this._matrix[5]=ne}}),Object.defineProperty(gr.prototype,"a",{get:function(){return this._matrix[0]},set:function(ne){this._matrix[0]=ne}}),Object.defineProperty(gr.prototype,"b",{get:function(){return this._matrix[1]},set:function(ne){this._matrix[1]=ne}}),Object.defineProperty(gr.prototype,"c",{get:function(){return this._matrix[2]},set:function(ne){this._matrix[2]=ne}}),Object.defineProperty(gr.prototype,"d",{get:function(){return this._matrix[3]},set:function(ne){this._matrix[3]=ne}}),Object.defineProperty(gr.prototype,"e",{get:function(){return this._matrix[4]},set:function(ne){this._matrix[4]=ne}}),Object.defineProperty(gr.prototype,"f",{get:function(){return this._matrix[5]},set:function(ne){this._matrix[5]=ne}}),Object.defineProperty(gr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(gr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(gr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(gr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),gr.prototype.join=function(ne){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(ne)},gr.prototype.multiply=function(ne){var xe=ne.sx*this.sx+ne.shy*this.shx,Qe=ne.sx*this.shy+ne.shy*this.sy,Xe=ne.shx*this.sx+ne.sy*this.shx,rt=ne.shx*this.shy+ne.sy*this.sy,wt=ne.tx*this.sx+ne.ty*this.shx+this.tx,St=ne.tx*this.shy+ne.ty*this.sy+this.ty;return new gr(xe,Qe,Xe,rt,wt,St)},gr.prototype.decompose=function(){var ne=this.sx,xe=this.shy,Qe=this.shx,Xe=this.sy,rt=this.tx,wt=this.ty,St=Math.sqrt(ne*ne+xe*xe),bt=(ne/=St)*Qe+(xe/=St)*Xe;Qe-=ne*bt,Xe-=xe*bt;var Mt=Math.sqrt(Qe*Qe+Xe*Xe);return bt/=Mt,ne*(Xe/=Mt)<xe*(Qe/=Mt)&&(ne=-ne,xe=-xe,bt=-bt,St=-St),{scale:new gr(St,0,0,Mt,0,0),translate:new gr(1,0,0,1,rt,wt),rotate:new gr(ne,xe,-xe,ne,0,0),skew:new gr(1,0,bt,1,0,0)}},gr.prototype.toString=function(ne){return this.join(" ")},gr.prototype.inversed=function(){var ne=this.sx,xe=this.shy,Qe=this.shx,Xe=this.sy,rt=this.tx,wt=this.ty,St=1/(ne*Xe-xe*Qe),bt=Xe*St,Mt=-xe*St,Cr=-Qe*St,lr=ne*St;return new gr(bt,Mt,Cr,lr,-bt*rt-Cr*wt,-Mt*rt-lr*wt)},gr.prototype.applyToPoint=function(ne){var xe=ne.x*this.sx+ne.y*this.shx+this.tx,Qe=ne.x*this.shy+ne.y*this.sy+this.ty;return new We(xe,Qe)},gr.prototype.applyToRectangle=function(ne){var xe=this.applyToPoint(ne),Qe=this.applyToPoint(new We(ne.x+ne.w,ne.y+ne.h));return new Ge(xe.x,xe.y,Qe.x-xe.x,Qe.y-xe.y)},gr.prototype.clone=function(){var ne=this.sx,xe=this.shy,Qe=this.shx,Xe=this.sy,rt=this.tx,wt=this.ty;return new gr(ne,xe,Qe,Xe,rt,wt)},m.Matrix=gr;var In=m.matrixMult=function(ne,xe){return xe.multiply(ne)},ln=new gr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ln;var gn=function(ne,xe){if(!Jt[ne]){var Qe=(xe instanceof Ud?"Sh":"P")+(Object.keys(tr).length+1).toString(10);xe.id=Qe,Jt[ne]=Qe,tr[Qe]=xe,at.publish("addPattern",xe)}};m.ShadingPattern=Ud,m.TilingPattern=ih,m.addShadingPattern=function(ne,xe){return N("addShadingPattern()"),gn(ne,xe),this},m.beginTilingPattern=function(ne){N("beginTilingPattern()"),Nt(ne.boundingBox[0],ne.boundingBox[1],ne.boundingBox[2]-ne.boundingBox[0],ne.boundingBox[3]-ne.boundingBox[1],ne.matrix)},m.endTilingPattern=function(ne,xe){N("endTilingPattern()"),xe.stream=ge[K].join(`
`),gn(ne,xe),at.publish("endTilingPattern",xe),an.pop().restore()};var Yn,Gr=m.__private__.newObject=function(){var ne=Sn();return ce(ne,!0),ne},Sn=m.__private__.newObjectDeferred=function(){return H++,Y[H]=function(){return oe},H},ce=function(ne,xe){return xe=typeof xe=="boolean"&&xe,Y[ne]=oe,xe&&te(ne+" 0 obj"),ne},Ne=m.__private__.newAdditionalObject=function(){var ne={objId:Sn(),content:""};return be.push(ne),ne},Re=Sn(),Ve=Sn(),ye=m.__private__.decodeColorString=function(ne){var xe=ne.split(" ");if(xe.length!==2||xe[1]!=="g"&&xe[1]!=="G")xe.length!==5||xe[4]!=="k"&&xe[4]!=="K"||(xe=[(1-xe[0])*(1-xe[3]),(1-xe[1])*(1-xe[3]),(1-xe[2])*(1-xe[3]),"r"]);else{var Qe=parseFloat(xe[0]);xe=[Qe,Qe,Qe,"r"]}for(var Xe="#",rt=0;rt<3;rt++)Xe+=("0"+Math.floor(255*parseFloat(xe[rt])).toString(16)).slice(-2);return Xe},De=m.__private__.encodeColorString=function(ne){var xe;typeof ne=="string"&&(ne={ch1:ne});var Qe=ne.ch1,Xe=ne.ch2,rt=ne.ch3,wt=ne.ch4,St=ne.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Qe=="string"&&Qe.charAt(0)!=="#"){var bt=new WE(Qe);if(bt.ok)Qe=bt.toHex();else if(!/^\d*\.?\d*$/.test(Qe))throw new Error('Invalid color "'+Qe+'" passed to jsPDF.encodeColorString.')}if(typeof Qe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Qe)&&(Qe="#"+Qe[1]+Qe[1]+Qe[2]+Qe[2]+Qe[3]+Qe[3]),typeof Qe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Qe)){var Mt=parseInt(Qe.substr(1),16);Qe=Mt>>16&255,Xe=Mt>>8&255,rt=255&Mt}if(Xe===void 0||wt===void 0&&Qe===Xe&&Xe===rt)xe=typeof Qe=="string"?Qe+" "+St[0]:ne.precision===2?k(Qe/255)+" "+St[0]:I(Qe/255)+" "+St[0];else if(wt===void 0||ss(wt)==="object"){if(wt&&!isNaN(wt.a)&&wt.a===0)return["1.","1.","1.",St[1]].join(" ");xe=typeof Qe=="string"?[Qe,Xe,rt,St[1]].join(" "):ne.precision===2?[k(Qe/255),k(Xe/255),k(rt/255),St[1]].join(" "):[I(Qe/255),I(Xe/255),I(rt/255),St[1]].join(" ")}else xe=typeof Qe=="string"?[Qe,Xe,rt,wt,St[2]].join(" "):ne.precision===2?[k(Qe),k(Xe),k(rt),k(wt),St[2]].join(" "):[I(Qe),I(Xe),I(rt),I(wt),St[2]].join(" ");return xe},qe=m.__private__.getFilters=function(){return c},Ze=m.__private__.putStream=function(ne){var xe=(ne=ne||{}).data||"",Qe=ne.filters||qe(),Xe=ne.alreadyAppliedFilters||[],rt=ne.addLength1||!1,wt=xe.length,St=ne.objectId,bt=function(vn){return vn};if(A!==null&&St===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");A!==null&&(bt=fn.encryptor(St,0));var Mt={};Qe===!0&&(Qe=["FlateEncode"]);var Cr=ne.additionalKeyValues||[],lr=(Mt=Tr.API.processDataByFilters!==void 0?Tr.API.processDataByFilters(xe,Qe):{data:xe,reverseChain:[]}).reverseChain+(Array.isArray(Xe)?Xe.join(" "):Xe.toString());if(Mt.data.length!==0&&(Cr.push({key:"Length",value:Mt.data.length}),rt===!0&&Cr.push({key:"Length1",value:wt})),lr.length!=0)if(lr.split("/").length-1==1)Cr.push({key:"Filter",value:lr});else{Cr.push({key:"Filter",value:"["+lr+"]"});for(var Rr=0;Rr<Cr.length;Rr+=1)if(Cr[Rr].key==="DecodeParms"){for(var Ht=[],ir=0;ir<Mt.reverseChain.split("/").length-1;ir+=1)Ht.push("null");Ht.push(Cr[Rr].value),Cr[Rr].value="["+Ht.join(" ")+"]"}}te("<<");for(var nr=0;nr<Cr.length;nr++)te("/"+Cr[nr].key+" "+Cr[nr].value);te(">>"),Mt.data.length!==0&&(te("stream"),te(bt(Mt.data)),te("endstream"))},ht=m.__private__.putPage=function(ne){var xe=ne.number,Qe=ne.data,Xe=ne.objId,rt=ne.contentsObjId;ce(Xe,!0),te("<</Type /Page"),te("/Parent "+ne.rootDictionaryObjId+" 0 R"),te("/Resources "+ne.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(S(ne.mediaBox.bottomLeftX))+" "+parseFloat(S(ne.mediaBox.bottomLeftY))+" "+S(ne.mediaBox.topRightX)+" "+S(ne.mediaBox.topRightY)+"]"),ne.cropBox!==null&&te("/CropBox ["+S(ne.cropBox.bottomLeftX)+" "+S(ne.cropBox.bottomLeftY)+" "+S(ne.cropBox.topRightX)+" "+S(ne.cropBox.topRightY)+"]"),ne.bleedBox!==null&&te("/BleedBox ["+S(ne.bleedBox.bottomLeftX)+" "+S(ne.bleedBox.bottomLeftY)+" "+S(ne.bleedBox.topRightX)+" "+S(ne.bleedBox.topRightY)+"]"),ne.trimBox!==null&&te("/TrimBox ["+S(ne.trimBox.bottomLeftX)+" "+S(ne.trimBox.bottomLeftY)+" "+S(ne.trimBox.topRightX)+" "+S(ne.trimBox.topRightY)+"]"),ne.artBox!==null&&te("/ArtBox ["+S(ne.artBox.bottomLeftX)+" "+S(ne.artBox.bottomLeftY)+" "+S(ne.artBox.topRightX)+" "+S(ne.artBox.topRightY)+"]"),typeof ne.userUnit=="number"&&ne.userUnit!==1&&te("/UserUnit "+ne.userUnit),at.publish("putPage",{objId:Xe,pageContext:Gt[xe],pageNumber:xe,page:Qe}),te("/Contents "+rt+" 0 R"),te(">>"),te("endobj");var wt=Qe.join(`
`);return C===j&&(wt+=`
Q`),ce(rt,!0),Ze({data:wt,filters:qe(),objectId:rt}),te("endobj"),Xe},ct=m.__private__.putPages=function(){var ne,xe,Qe=[];for(ne=1;ne<=Wt;ne++)Gt[ne].objId=Sn(),Gt[ne].contentsObjId=Sn();for(ne=1;ne<=Wt;ne++)Qe.push(ht({number:ne,data:ge[ne],objId:Gt[ne].objId,contentsObjId:Gt[ne].contentsObjId,mediaBox:Gt[ne].mediaBox,cropBox:Gt[ne].cropBox,bleedBox:Gt[ne].bleedBox,trimBox:Gt[ne].trimBox,artBox:Gt[ne].artBox,userUnit:Gt[ne].userUnit,rootDictionaryObjId:Re,resourceDictionaryObjId:Ve}));ce(Re,!0),te("<</Type /Pages");var Xe="/Kids [";for(xe=0;xe<Wt;xe++)Xe+=Qe[xe]+" 0 R ";te(Xe+"]"),te("/Count "+Wt),te(">>"),te("endobj"),at.publish("postPutPages")},gt=function(ne){at.publish("putFont",{font:ne,out:te,newObject:Gr,putStream:Ze}),ne.isAlreadyPutted!==!0&&(ne.objectNumber=Gr(),te("<<"),te("/Type /Font"),te("/BaseFont /"+XA(ne.postScriptName)),te("/Subtype /Type1"),typeof ne.encoding=="string"&&te("/Encoding /"+ne.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},ut=function(ne){ne.objectNumber=Gr();var xe=[];xe.push({key:"Type",value:"/XObject"}),xe.push({key:"Subtype",value:"/Form"}),xe.push({key:"BBox",value:"["+[S(ne.x),S(ne.y),S(ne.x+ne.width),S(ne.y+ne.height)].join(" ")+"]"}),xe.push({key:"Matrix",value:"["+ne.matrix.toString()+"]"});var Qe=ne.pages[1].join(`
`);Ze({data:Qe,additionalKeyValues:xe,objectId:ne.objectNumber}),te("endobj")},Ut=function(ne,xe){xe||(xe=21);var Qe=Gr(),Xe=(function(St,bt){var Mt,Cr=[],lr=1/(bt-1);for(Mt=0;Mt<1;Mt+=lr)Cr.push(Mt);if(Cr.push(1),St[0].offset!=0){var Rr={offset:0,color:St[0].color};St.unshift(Rr)}if(St[St.length-1].offset!=1){var Ht={offset:1,color:St[St.length-1].color};St.push(Ht)}for(var ir="",nr=0,vn=0;vn<Cr.length;vn++){for(Mt=Cr[vn];Mt>St[nr+1].offset;)nr++;var cn=St[nr].offset,wn=(Mt-cn)/(St[nr+1].offset-cn),Qa=St[nr].color,eo=St[nr+1].color;ir+=M(Math.round((1-wn)*Qa[0]+wn*eo[0]).toString(16))+M(Math.round((1-wn)*Qa[1]+wn*eo[1]).toString(16))+M(Math.round((1-wn)*Qa[2]+wn*eo[2]).toString(16))}return ir.trim()})(ne.colors,xe),rt=[];rt.push({key:"FunctionType",value:"0"}),rt.push({key:"Domain",value:"[0.0 1.0]"}),rt.push({key:"Size",value:"["+xe+"]"}),rt.push({key:"BitsPerSample",value:"8"}),rt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ze({data:Xe,additionalKeyValues:rt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Qe}),te("endobj"),ne.objectNumber=Gr(),te("<< /ShadingType "+ne.type),te("/ColorSpace /DeviceRGB");var wt="/Coords ["+S(parseFloat(ne.coords[0]))+" "+S(parseFloat(ne.coords[1]))+" ";ne.type===2?wt+=S(parseFloat(ne.coords[2]))+" "+S(parseFloat(ne.coords[3])):wt+=S(parseFloat(ne.coords[2]))+" "+S(parseFloat(ne.coords[3]))+" "+S(parseFloat(ne.coords[4]))+" "+S(parseFloat(ne.coords[5])),te(wt+="]"),ne.matrix&&te("/Matrix ["+ne.matrix.toString()+"]"),te("/Function "+Qe+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},$t=function(ne,xe){var Qe=Sn(),Xe=Gr();xe.push({resourcesOid:Qe,objectOid:Xe}),ne.objectNumber=Xe;var rt=[];rt.push({key:"Type",value:"/Pattern"}),rt.push({key:"PatternType",value:"1"}),rt.push({key:"PaintType",value:"1"}),rt.push({key:"TilingType",value:"1"}),rt.push({key:"BBox",value:"["+ne.boundingBox.map(S).join(" ")+"]"}),rt.push({key:"XStep",value:S(ne.xStep)}),rt.push({key:"YStep",value:S(ne.yStep)}),rt.push({key:"Resources",value:Qe+" 0 R"}),ne.matrix&&rt.push({key:"Matrix",value:"["+ne.matrix.toString()+"]"}),Ze({data:ne.stream,additionalKeyValues:rt,objectId:ne.objectNumber}),te("endobj")},Yt=function(ne){for(var xe in ne.objectNumber=Gr(),te("<<"),ne)switch(xe){case"opacity":te("/ca "+k(ne[xe]));break;case"stroke-opacity":te("/CA "+k(ne[xe]))}te(">>"),te("endobj")},Vt=function(ne){ce(ne.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var xe in te("/Font <<"),dt)dt.hasOwnProperty(xe)&&(f===!1||f===!0&&p.hasOwnProperty(xe))&&te("/"+xe+" "+dt[xe].objectNumber+" 0 R");te(">>")})(),(function(){if(Object.keys(tr).length>0){for(var xe in te("/Shading <<"),tr)tr.hasOwnProperty(xe)&&tr[xe]instanceof Ud&&tr[xe].objectNumber>=0&&te("/"+xe+" "+tr[xe].objectNumber+" 0 R");at.publish("putShadingPatternDict"),te(">>")}})(),(function(xe){if(Object.keys(tr).length>0){for(var Qe in te("/Pattern <<"),tr)tr.hasOwnProperty(Qe)&&tr[Qe]instanceof m.TilingPattern&&tr[Qe].objectNumber>=0&&tr[Qe].objectNumber<xe&&te("/"+Qe+" "+tr[Qe].objectNumber+" 0 R");at.publish("putTilingPatternDict"),te(">>")}})(ne.objectOid),(function(){if(Object.keys(Et).length>0){var xe;for(xe in te("/ExtGState <<"),Et)Et.hasOwnProperty(xe)&&Et[xe].objectNumber>=0&&te("/"+xe+" "+Et[xe].objectNumber+" 0 R");at.publish("putGStateDict"),te(">>")}})(),(function(){for(var xe in te("/XObject <<"),dr)dr.hasOwnProperty(xe)&&dr[xe].objectNumber>=0&&te("/"+xe+" "+dr[xe].objectNumber+" 0 R");at.publish("putXobjectDict"),te(">>")})(),te(">>"),te("endobj")},or=function(ne){Pt[ne.fontName]=Pt[ne.fontName]||{},Pt[ne.fontName][ne.fontStyle]=ne.id},cr=function(ne,xe,Qe,Xe,rt){var wt={id:"F"+(Object.keys(dt).length+1).toString(10),postScriptName:ne,fontName:xe,fontStyle:Qe,encoding:Xe,isStandardFont:rt||!1,metadata:{}};return at.publish("addFont",{font:wt,instance:this}),dt[wt.id]=wt,or(wt),wt.id},Fr=m.__private__.pdfEscape=m.pdfEscape=function(ne,xe){return(function(Qe,Xe){var rt,wt,St,bt,Mt,Cr,lr,Rr,Ht;if(St=(Xe=Xe||{}).sourceEncoding||"Unicode",Mt=Xe.outputEncoding,(Xe.autoencode||Mt)&&dt[Te].metadata&&dt[Te].metadata[St]&&dt[Te].metadata[St].encoding&&(bt=dt[Te].metadata[St].encoding,!Mt&&dt[Te].encoding&&(Mt=dt[Te].encoding),!Mt&&bt.codePages&&(Mt=bt.codePages[0]),typeof Mt=="string"&&(Mt=bt[Mt]),Mt)){for(lr=!1,Cr=[],rt=0,wt=Qe.length;rt<wt;rt++)(Rr=Mt[Qe.charCodeAt(rt)])?Cr.push(String.fromCharCode(Rr)):Cr.push(Qe[rt]),Cr[rt].charCodeAt(0)>>8&&(lr=!0);Qe=Cr.join("")}for(rt=Qe.length;lr===void 0&&rt!==0;)Qe.charCodeAt(rt-1)>>8&&(lr=!0),rt--;if(!lr)return Qe;for(Cr=Xe.noBOM?[]:[254,255],rt=0,wt=Qe.length;rt<wt;rt++){if((Ht=(Rr=Qe.charCodeAt(rt))>>8)>>8)throw new Error("Character at position "+rt+" of string '"+Qe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Cr.push(Ht),Cr.push(Rr-(Ht<<8))}return String.fromCharCode.apply(void 0,Cr)})(ne,xe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yn=m.__private__.beginPage=function(ne){ge[++Wt]=[],Gt[Wt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ne[0]),topRightY:Number(ne[1])}},Zr(Wt),Z(ge[K])},Lr=function(ne,xe){var Qe,Xe,rt;switch(s=xe||s,typeof ne=="string"&&(Qe=y(ne.toLowerCase()),Array.isArray(Qe)&&(Xe=Qe[0],rt=Qe[1])),Array.isArray(ne)&&(Xe=ne[0]*Ye,rt=ne[1]*Ye),isNaN(Xe)&&(Xe=a[0],rt=a[1]),(Xe>14400||rt>14400)&&(hs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Xe=Math.min(14400,Xe),rt=Math.min(14400,rt)),a=[Xe,rt],s.substr(0,1)){case"l":rt>Xe&&(a=[rt,Xe]);break;case"p":Xe>rt&&(a=[rt,Xe])}yn(a),Ln(Pr),te(Ma),D!==0&&te(D+" J"),Ae!==0&&te(Ae+" j"),at.publish("addPage",{pageNumber:Wt})},xn=function(ne){ne>0&&ne<=Wt&&(ge.splice(ne,1),Gt.splice(ne,1),Wt--,K>Wt&&(K=Wt),this.setPage(K))},Zr=function(ne){ne>0&&ne<=Wt&&(K=ne)},kr=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ge.length-1},Hr=function(ne,xe,Qe){var Xe,rt=void 0;return Qe=Qe||{},ne=ne!==void 0?ne:dt[Te].fontName,xe=xe!==void 0?xe:dt[Te].fontStyle,Xe=ne.toLowerCase(),Pt[Xe]!==void 0&&Pt[Xe][xe]!==void 0?rt=Pt[Xe][xe]:Pt[ne]!==void 0&&Pt[ne][xe]!==void 0?rt=Pt[ne][xe]:Qe.disableWarning===!1&&hs.warn("Unable to look up font label for font '"+ne+"', '"+xe+"'. Refer to getFontList() for available fonts."),rt||Qe.noFallback||(rt=Pt.times[xe])==null&&(rt=Pt.times.normal),rt},hn=m.__private__.putInfo=function(){var ne=Gr(),xe=function(Xe){return Xe};for(var Qe in A!==null&&(xe=fn.encryptor(ne,0)),te("<<"),te("/Producer ("+Fr(xe("jsPDF "+Tr.version))+")"),Pe)Pe.hasOwnProperty(Qe)&&Pe[Qe]&&te("/"+Qe.substr(0,1).toUpperCase()+Qe.substr(1)+" ("+Fr(xe(Pe[Qe]))+")");te("/CreationDate ("+Fr(xe($))+")"),te(">>"),te("endobj")},Hn=m.__private__.putCatalog=function(ne){var xe=(ne=ne||{}).rootDictionaryObjId||Re;switch(Gr(),te("<<"),te("/Type /Catalog"),te("/Pages "+xe+" 0 R"),Ce||(Ce="fullwidth"),Ce){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Qe=""+Ce;Qe.substr(Qe.length-1)==="%"&&(Ce=parseInt(Ce)/100),typeof Ce=="number"&&te("/OpenAction [3 0 R /XYZ null null "+k(Ce)+"]")}switch(ve||(ve="continuous"),ve){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}Be&&te("/PageMode /"+Be),at.publish("putCatalog"),te(">>"),te("endobj")},pr=m.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(H+1)),te("/Root "+H+" 0 R"),te("/Info "+(H-1)+" 0 R"),A!==null&&te("/Encrypt "+fn.oid+" 0 R"),te("/ID [ <"+L+"> <"+L+"> ]"),te(">>")},bn=m.__private__.putHeader=function(){te("%PDF-"+g),te("%")},Qt=m.__private__.putXRef=function(){var ne="0000000000";te("xref"),te("0 "+(H+1)),te("0000000000 65535 f ");for(var xe=1;xe<=H;xe++)typeof Y[xe]=="function"?te((ne+Y[xe]()).slice(-10)+" 00000 n "):Y[xe]!==void 0?te((ne+Y[xe]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},Er=m.__private__.buildDocument=function(){var ne;H=0,oe=0,ae=[],Y=[],be=[],Re=Sn(),Ve=Sn(),Z(ae),at.publish("buildDocument"),bn(),ct(),(function(){at.publish("putAdditionalObjects");for(var Qe=0;Qe<be.length;Qe++){var Xe=be[Qe];ce(Xe.objId,!0),te(Xe.content),te("endobj")}at.publish("postPutAdditionalObjects")})(),ne=[],(function(){for(var Qe in dt)dt.hasOwnProperty(Qe)&&(f===!1||f===!0&&p.hasOwnProperty(Qe))&&gt(dt[Qe])})(),(function(){var Qe;for(Qe in Et)Et.hasOwnProperty(Qe)&&Yt(Et[Qe])})(),(function(){for(var Qe in dr)dr.hasOwnProperty(Qe)&&ut(dr[Qe])})(),(function(Qe){var Xe;for(Xe in tr)tr.hasOwnProperty(Xe)&&(tr[Xe]instanceof Ud?Ut(tr[Xe]):tr[Xe]instanceof ih&&$t(tr[Xe],Qe))})(ne),at.publish("putResources"),ne.forEach(Vt),Vt({resourcesOid:Ve,objectOid:Number.MAX_SAFE_INTEGER}),at.publish("postPutResources"),A!==null&&(fn.oid=Gr(),te("<<"),te("/Filter /Standard"),te("/V "+fn.v),te("/R "+fn.r),te("/U <"+fn.toHexString(fn.U)+">"),te("/O <"+fn.toHexString(fn.O)+">"),te("/P "+fn.P),te(">>"),te("endobj")),hn(),Hn();var xe=oe;return Qt(),pr(),te("startxref"),te(""+xe),te("%%EOF"),Z(ge[K]),ae.join(`
`)},Wr=m.__private__.getBlob=function(ne){return new Blob([we(ne)],{type:"application/pdf"})},Dr=m.output=m.__private__.output=(Yn=function(ne,xe){switch(typeof(xe=xe||{})=="string"?xe={filename:xe}:xe.filename=xe.filename||"generated.pdf",ne){case void 0:return Er();case"save":m.save(xe.filename);break;case"arraybuffer":return we(Er());case"blob":return Wr(Er());case"bloburi":case"bloburl":if(tn.URL!==void 0&&typeof tn.URL.createObjectURL=="function")return tn.URL&&tn.URL.createObjectURL(Wr(Er()))||void 0;hs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Qe="",Xe=Er();try{Qe=rS(Xe)}catch{Qe=rS(unescape(encodeURIComponent(Xe)))}return"data:application/pdf;filename="+xe.filename+";base64,"+Qe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var rt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",wt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';xe.pdfObjectUrl&&(rt=xe.pdfObjectUrl,wt="");var St='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+rt+'"'+wt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(xe)+");<\/script></body></html>",bt=tn.open();return bt!==null&&bt.document.write(St),bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(xe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+xe.filename+'" width="500px" height="400px" /></body></html>',Cr=tn.open();if(Cr!==null){Cr.document.write(Mt);var lr=this;Cr.document.documentElement.querySelector("#pdfViewer").onload=function(){Cr.document.title=xe.filename,Cr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(lr.output("bloburl"))}}return Cr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",xe)+'"></iframe></body></html>',Ht=tn.open();if(Ht!==null&&(Ht.document.write(Rr),Ht.document.title=xe.filename),Ht||typeof safari>"u")return Ht;break;case"datauri":case"dataurl":return tn.document.location.href=this.output("datauristring",xe);default:return null}},Yn.foo=function(){try{return Yn.apply(this,arguments)}catch(Qe){var ne=Qe.stack||"";~ne.indexOf(" at ")&&(ne=ne.split(" at ")[1]);var xe="Error in function "+ne.split(`
`)[0].split("<")[0]+": "+Qe.message;if(!tn.console)throw new Error(xe);tn.console.error(xe,Qe),tn.alert&&alert(xe)}},Yn.foo.bar=Yn,Yn.foo),nn=function(ne){return Array.isArray(rn)===!0&&rn.indexOf(ne)>-1};switch(i){case"pt":Ye=1;break;case"mm":Ye=72/25.4;break;case"cm":Ye=72/2.54;break;case"in":Ye=72;break;case"px":Ye=nn("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ye=12;break;case"ex":Ye=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Ye=i}var fn=null;T(),G();var Dn=m.__private__.getPageInfo=m.getPageInfo=function(ne){if(isNaN(ne)||ne%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Gt[ne].objId,pageNumber:ne,pageContext:Gt[ne]}},xi=m.__private__.getPageInfoByObjId=function(ne){if(isNaN(ne)||ne%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var xe in Gt)if(Gt[xe].objId===ne)break;return Dn(xe)},Us=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Gt[K].objId,pageNumber:K,pageContext:Gt[K]}};m.addPage=function(){return Lr.apply(this,arguments),this},m.setPage=function(){return Zr.apply(this,arguments),Z.call(this,ge[K]),this},m.insertPage=function(ne){return this.addPage(),this.movePage(K,ne),this},m.movePage=function(ne,xe){var Qe,Xe;if(ne>xe){Qe=ge[ne],Xe=Gt[ne];for(var rt=ne;rt>xe;rt--)ge[rt]=ge[rt-1],Gt[rt]=Gt[rt-1];ge[xe]=Qe,Gt[xe]=Xe,this.setPage(xe)}else if(ne<xe){Qe=ge[ne],Xe=Gt[ne];for(var wt=ne;wt<xe;wt++)ge[wt]=ge[wt+1],Gt[wt]=Gt[wt+1];ge[xe]=Qe,Gt[xe]=Xe,this.setPage(xe)}return this},m.deletePage=function(){return xn.apply(this,arguments),this},m.__private__.text=m.text=function(ne,xe,Qe,Xe,rt){var wt,St,bt,Mt,Cr,lr,Rr,Ht,ir,nr=(Xe=Xe||{}).scope||this;if(typeof ne=="number"&&typeof xe=="number"&&(typeof Qe=="string"||Array.isArray(Qe))){var vn=Qe;Qe=xe,xe=ne,ne=vn}if(arguments[3]instanceof gr==0?(bt=arguments[4],Mt=arguments[5],ss(Rr=arguments[3])==="object"&&Rr!==null||(typeof bt=="string"&&(Mt=bt,bt=null),typeof Rr=="string"&&(Mt=Rr,Rr=null),typeof Rr=="number"&&(bt=Rr,Rr=null),Xe={flags:Rr,angle:bt,align:Mt})):(N("The transform parameter of text() with a Matrix value"),ir=rt),isNaN(xe)||isNaN(Qe)||ne==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ne.length===0)return nr;var cn,wn="",Qa=typeof Xe.lineHeightFactor=="number"?Xe.lineHeightFactor:Mr,eo=nr.internal.scaleFactor;function go(as){return as=as.split("	").join(Array(Xe.TabLen||9).join(" ")),Fr(as,Rr)}function yo(as){for(var os,Ds=as.concat(),Ms=[],oi=Ds.length;oi--;)typeof(os=Ds.shift())=="string"?Ms.push(os):Array.isArray(as)&&(os.length===1||os[1]===void 0&&os[2]===void 0)?Ms.push(os[0]):Ms.push([os[0],os[1],os[2]]);return Ms}function Ho(as,os){var Ds;if(typeof as=="string")Ds=os(as)[0];else if(Array.isArray(as)){for(var Ms,oi,wo=as.concat(),to=[],Zc=wo.length;Zc--;)typeof(Ms=wo.shift())=="string"?to.push(os(Ms)[0]):Array.isArray(Ms)&&typeof Ms[0]=="string"&&(oi=os(Ms[0],Ms[1],Ms[2]),to.push([oi[0],oi[1],oi[2]]));Ds=to}return Ds}var Fi=!1,ld=!0;if(typeof ne=="string")Fi=!0;else if(Array.isArray(ne)){var Cl=ne.concat();St=[];for(var Bl,bi=Cl.length;bi--;)(typeof(Bl=Cl.shift())!="string"||Array.isArray(Bl)&&typeof Bl[0]!="string")&&(ld=!1);Fi=ld}if(Fi===!1)throw new Error('Type of text must be string or Array. "'+ne+'" is not recognized.');typeof ne=="string"&&(ne=ne.match(/[\r?\n]/)?ne.split(/\r\n|\r|\n/g):[ne]);var Vo=_e/nr.internal.scaleFactor,xo=Vo*(Qa-1);switch(Xe.baseline){case"bottom":Qe-=xo;break;case"top":Qe+=Vo-xo;break;case"hanging":Qe+=Vo-2*xo;break;case"middle":Qe+=Vo/2-xo}if((lr=Xe.maxWidth||0)>0&&(typeof ne=="string"?ne=nr.splitTextToSize(ne,lr):Object.prototype.toString.call(ne)==="[object Array]"&&(ne=ne.reduce(function(as,os){return as.concat(nr.splitTextToSize(os,lr))},[]))),wt={text:ne,x:xe,y:Qe,options:Xe,mutex:{pdfEscape:Fr,activeFontKey:Te,fonts:dt,activeFontSize:_e}},at.publish("preProcessText",wt),ne=wt.text,bt=(Xe=wt.options).angle,ir instanceof gr==0&&bt&&typeof bt=="number"){bt*=Math.PI/180,Xe.rotationDirection===0&&(bt=-bt),C===j&&(bt=-bt);var Wc=Math.cos(bt),cd=Math.sin(bt);ir=new gr(Wc,cd,-cd,Wc,0,0)}else bt&&bt instanceof gr&&(ir=bt);C!==j||ir||(ir=ln),(Cr=Xe.charSpace||_i)!==void 0&&(wn+=S(R(Cr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ht=Xe.horizontalScale)!==void 0&&(wn+=S(100*Ht)+` Tz
`),Xe.lang;var Wi=-1,hA=Xe.renderingMode!==void 0?Xe.renderingMode:Xe.stroke,qc=nr.internal.getCurrentPageInfo().pageContext;switch(hA){case 0:case!1:case"fill":Wi=0;break;case 1:case!0:case"stroke":Wi=1;break;case 2:case"fillThenStroke":Wi=2;break;case 3:case"invisible":Wi=3;break;case 4:case"fillAndAddForClipping":Wi=4;break;case 5:case"strokeAndAddPathForClipping":Wi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wi=6;break;case 7:case"addToPathForClipping":Wi=7}var fA=qc.usedRenderingMode!==void 0?qc.usedRenderingMode:-1;Wi!==-1?wn+=Wi+` Tr
`:fA!==-1&&(wn+=`0 Tr
`),Wi!==-1&&(qc.usedRenderingMode=Wi),Mt=Xe.align||"left";var ai,oa=_e*Qa,zo=nr.internal.pageSize.getWidth(),ud=dt[Te];Cr=Xe.charSpace||_i,lr=Xe.maxWidth||0,Rr=Object.assign({autoencode:!0,noBOM:!0},Xe.flags);var Ko=[],dc=function(as){return nr.getStringUnitWidth(as,{font:ud,charSpace:Cr,fontSize:_e,doKerning:!1})*_e/eo};if(Object.prototype.toString.call(ne)==="[object Array]"){var qi;St=yo(ne),Mt!=="left"&&(ai=St.map(dc));var Yi,kl=0;if(Mt==="right"){xe-=ai[0],ne=[],bi=St.length;for(var Xi=0;Xi<bi;Xi++)Xi===0?(Yi=zn(xe),qi=Mn(Qe)):(Yi=R(kl-ai[Xi]),qi=-oa),ne.push([St[Xi],Yi,qi]),kl=ai[Xi]}else if(Mt==="center"){xe-=ai[0]/2,ne=[],bi=St.length;for(var _l=0;_l<bi;_l++)_l===0?(Yi=zn(xe),qi=Mn(Qe)):(Yi=R((kl-ai[_l])/2),qi=-oa),ne.push([St[_l],Yi,qi]),kl=ai[_l]}else if(Mt==="left"){ne=[],bi=St.length;for(var dd=0;dd<bi;dd++)ne.push(St[dd])}else if(Mt==="justify"&&ud.encoding==="Identity-H"){ne=[],bi=St.length,lr=lr!==0?lr:zo;for(var El=0,Bs=0;Bs<bi;Bs++)if(qi=Bs===0?Mn(Qe):-oa,Yi=Bs===0?zn(xe):El,Bs<bi-1){var pA=R((lr-ai[Bs])/(St[Bs].split(" ").length-1)),la=St[Bs].split(" ");ne.push([la[0]+" ",Yi,qi]),El=0;for(var ca=1;ca<la.length;ca++){var Yc=(dc(la[ca-1]+" "+la[ca])-dc(la[ca]))*eo+pA;ca==la.length-1?ne.push([la[ca],Yc,0]):ne.push([la[ca]+" ",Yc,0]),El-=Yc}}else ne.push([St[Bs],Yi,qi]);ne.push(["",El,0])}else{if(Mt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ne=[],bi=St.length,lr=lr!==0?lr:zo,Bs=0;Bs<bi;Bs++)qi=Bs===0?Mn(Qe):-oa,Yi=Bs===0?zn(xe):0,Bs<bi-1?Ko.push(S(R((lr-ai[Bs])/(St[Bs].split(" ").length-1)))):Ko.push(0),ne.push([St[Bs],Yi,qi])}}(typeof Xe.R2L=="boolean"?Xe.R2L:me)===!0&&(ne=Ho(ne,function(as,os,Ds){return[as.split("").reverse().join(""),os,Ds]})),wt={text:ne,x:xe,y:Qe,options:Xe,mutex:{pdfEscape:Fr,activeFontKey:Te,fonts:dt,activeFontSize:_e}},at.publish("postProcessText",wt),ne=wt.text,cn=wt.mutex.isHex||!1;var Ol=dt[Te].encoding;Ol!=="WinAnsiEncoding"&&Ol!=="StandardEncoding"||(ne=Ho(ne,function(as,os,Ds){return[go(as),os,Ds]})),St=yo(ne),ne=[];for(var Xc,Ac,Go,Wo=Array.isArray(St[0])?1:0,bo="",Jc=function(as,os,Ds){var Ms="";return Ds instanceof gr?(Ds=typeof Xe.angle=="number"?In(Ds,new gr(1,0,0,1,as,os)):In(new gr(1,0,0,1,as,os),Ds),C===j&&(Ds=In(new gr(1,0,0,-1,0,0),Ds)),Ms=Ds.join(" ")+` Tm
`):Ms=S(as)+" "+S(os)+` Td
`,Ms},ua=0;ua<St.length;ua++){switch(bo="",Wo){case 1:Go=(cn?"<":"(")+St[ua][0]+(cn?">":")"),Xc=parseFloat(St[ua][1]),Ac=parseFloat(St[ua][2]);break;case 0:Go=(cn?"<":"(")+St[ua]+(cn?">":")"),Xc=zn(xe),Ac=Mn(Qe)}Ko!==void 0&&Ko[ua]!==void 0&&(bo=Ko[ua]+` Tw
`),ua===0?ne.push(bo+Jc(Xc,Ac,ir)+Go):Wo===0?ne.push(bo+Go):Wo===1&&ne.push(bo+Jc(Xc,Ac,ir)+Go)}ne=Wo===0?ne.join(` Tj
T* `):ne.join(` Tj
`),ne+=` Tj
`;var vo=`BT
/`;return vo+=Te+" "+_e+` Tf
`,vo+=S(_e*Qa)+` TL
`,vo+=ki+`
`,vo+=wn,vo+=ne,te(vo+="ET"),p[Te]=!0,nr};var Ls=m.__private__.clip=m.clip=function(ne){return te(ne==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ls("evenodd")},m.__private__.discardPath=m.discardPath=function(){return te("n"),this};var ds=m.__private__.isValidStyle=function(ne){var xe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ne)!==-1&&(xe=!0),xe};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(ne){return ds(ne)&&(d=ne),this};var Cn=m.__private__.getStyle=m.getStyle=function(ne){var xe=d;switch(ne){case"D":case"S":xe="S";break;case"F":xe="f";break;case"FD":case"DF":xe="B";break;case"f":case"f*":case"B":case"B*":xe=ne}return xe},Ur=m.close=function(){return te("h"),this};m.stroke=function(){return te("S"),this},m.fill=function(ne){return Pn("f",ne),this},m.fillEvenOdd=function(ne){return Pn("f*",ne),this},m.fillStroke=function(ne){return Pn("B",ne),this},m.fillStrokeEvenOdd=function(ne){return Pn("B*",ne),this};var Pn=function(ne,xe){ss(xe)==="object"?Vn(xe,ne):te(ne)},Wn=function(ne){ne===null||C===j&&ne===void 0||(ne=Cn(ne),te(ne))};function Bn(ne,xe,Qe,Xe,rt){var wt=new ih(xe||this.boundingBox,Qe||this.xStep,Xe||this.yStep,this.gState,rt||this.matrix);wt.stream=this.stream;var St=ne+"$$"+this.cloneIndex+++"$$";return gn(St,wt),wt}var Vn=function(ne,xe){var Qe=Jt[ne.key],Xe=tr[Qe];if(Xe instanceof Ud)te("q"),te(gs(xe)),Xe.gState&&m.setGState(Xe.gState),te(ne.matrix.toString()+" cm"),te("/"+Qe+" sh"),te("Q");else if(Xe instanceof ih){var rt=new gr(1,0,0,-1,0,xt());ne.matrix&&(rt=rt.multiply(ne.matrix||ln),Qe=Bn.call(Xe,ne.key,ne.boundingBox,ne.xStep,ne.yStep,rt).id),te("q"),te("/Pattern cs"),te("/"+Qe+" scn"),Xe.gState&&m.setGState(Xe.gState),te(xe),te("Q")}},gs=function(ne){switch(ne){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},hr=m.moveTo=function(ne,xe){return te(S(R(ne))+" "+S(Q(xe))+" m"),this},kn=m.lineTo=function(ne,xe){return te(S(R(ne))+" "+S(Q(xe))+" l"),this},pn=m.curveTo=function(ne,xe,Qe,Xe,rt,wt){return te([S(R(ne)),S(Q(xe)),S(R(Qe)),S(Q(Xe)),S(R(rt)),S(Q(wt)),"c"].join(" ")),this};m.__private__.line=m.line=function(ne,xe,Qe,Xe,rt){if(isNaN(ne)||isNaN(xe)||isNaN(Qe)||isNaN(Xe)||!ds(rt))throw new Error("Invalid arguments passed to jsPDF.line");return C===w?this.lines([[Qe-ne,Xe-xe]],ne,xe,[1,1],rt||"S"):this.lines([[Qe-ne,Xe-xe]],ne,xe,[1,1]).stroke()},m.__private__.lines=m.lines=function(ne,xe,Qe,Xe,rt,wt){var St,bt,Mt,Cr,lr,Rr,Ht,ir,nr,vn,cn,wn;if(typeof ne=="number"&&(wn=Qe,Qe=xe,xe=ne,ne=wn),Xe=Xe||[1,1],wt=wt||!1,isNaN(xe)||isNaN(Qe)||!Array.isArray(ne)||!Array.isArray(Xe)||!ds(rt)||typeof wt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(hr(xe,Qe),St=Xe[0],bt=Xe[1],Cr=ne.length,vn=xe,cn=Qe,Mt=0;Mt<Cr;Mt++)(lr=ne[Mt]).length===2?(vn=lr[0]*St+vn,cn=lr[1]*bt+cn,kn(vn,cn)):(Rr=lr[0]*St+vn,Ht=lr[1]*bt+cn,ir=lr[2]*St+vn,nr=lr[3]*bt+cn,vn=lr[4]*St+vn,cn=lr[5]*bt+cn,pn(Rr,Ht,ir,nr,vn,cn));return wt&&Ur(),Wn(rt),this},m.path=function(ne){for(var xe=0;xe<ne.length;xe++){var Qe=ne[xe],Xe=Qe.c;switch(Qe.op){case"m":hr(Xe[0],Xe[1]);break;case"l":kn(Xe[0],Xe[1]);break;case"c":pn.apply(this,Xe);break;case"h":Ur()}}return this},m.__private__.rect=m.rect=function(ne,xe,Qe,Xe,rt){if(isNaN(ne)||isNaN(xe)||isNaN(Qe)||isNaN(Xe)||!ds(rt))throw new Error("Invalid arguments passed to jsPDF.rect");return C===w&&(Xe=-Xe),te([S(R(ne)),S(Q(xe)),S(R(Qe)),S(R(Xe)),"re"].join(" ")),Wn(rt),this},m.__private__.triangle=m.triangle=function(ne,xe,Qe,Xe,rt,wt,St){if(isNaN(ne)||isNaN(xe)||isNaN(Qe)||isNaN(Xe)||isNaN(rt)||isNaN(wt)||!ds(St))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Qe-ne,Xe-xe],[rt-Qe,wt-Xe],[ne-rt,xe-wt]],ne,xe,[1,1],St,!0),this},m.__private__.roundedRect=m.roundedRect=function(ne,xe,Qe,Xe,rt,wt,St){if(isNaN(ne)||isNaN(xe)||isNaN(Qe)||isNaN(Xe)||isNaN(rt)||isNaN(wt)||!ds(St))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var bt=4/3*(Math.SQRT2-1);return rt=Math.min(rt,.5*Qe),wt=Math.min(wt,.5*Xe),this.lines([[Qe-2*rt,0],[rt*bt,0,rt,wt-wt*bt,rt,wt],[0,Xe-2*wt],[0,wt*bt,-rt*bt,wt,-rt,wt],[2*rt-Qe,0],[-rt*bt,0,-rt,-wt*bt,-rt,-wt],[0,2*wt-Xe],[0,-wt*bt,rt*bt,-wt,rt,-wt]],ne+rt,xe,[1,1],St,!0),this},m.__private__.ellipse=m.ellipse=function(ne,xe,Qe,Xe,rt){if(isNaN(ne)||isNaN(xe)||isNaN(Qe)||isNaN(Xe)||!ds(rt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var wt=4/3*(Math.SQRT2-1)*Qe,St=4/3*(Math.SQRT2-1)*Xe;return hr(ne+Qe,xe),pn(ne+Qe,xe-St,ne+wt,xe-Xe,ne,xe-Xe),pn(ne-wt,xe-Xe,ne-Qe,xe-St,ne-Qe,xe),pn(ne-Qe,xe+St,ne-wt,xe+Xe,ne,xe+Xe),pn(ne+wt,xe+Xe,ne+Qe,xe+St,ne+Qe,xe),Wn(rt),this},m.__private__.circle=m.circle=function(ne,xe,Qe,Xe){if(isNaN(ne)||isNaN(xe)||isNaN(Qe)||!ds(Xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ne,xe,Qe,Qe,Xe)},m.setFont=function(ne,xe,Qe){return Qe&&(xe=_(xe,Qe)),Te=Hr(ne,xe,{disableWarning:!1}),this};var sn=m.__private__.getFont=m.getFont=function(){return dt[Hr.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var ne,xe,Qe={};for(ne in Pt)if(Pt.hasOwnProperty(ne))for(xe in Qe[ne]=[],Pt[ne])Pt[ne].hasOwnProperty(xe)&&Qe[ne].push(xe);return Qe},m.addFont=function(ne,xe,Qe,Xe,rt){var wt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&wt.indexOf(arguments[3])!==-1?rt=arguments[3]:arguments[3]&&wt.indexOf(arguments[3])==-1&&(Qe=_(Qe,Xe)),cr.call(this,ne,xe,Qe,rt=rt||"Identity-H")};var Mr,Pr=r.lineWidth||.200025,Ar=m.__private__.getLineWidth=m.getLineWidth=function(){return Pr},Ln=m.__private__.setLineWidth=m.setLineWidth=function(ne){return Pr=ne,te(S(R(ne))+" w"),this};m.__private__.setLineDash=Tr.API.setLineDash=Tr.API.setLineDashPattern=function(ne,xe){if(ne=ne||[],xe=xe||0,isNaN(xe)||!Array.isArray(ne))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ne=ne.map(function(Qe){return S(R(Qe))}).join(" "),xe=S(R(xe)),te("["+ne+"] "+xe+" d"),this};var ys=m.__private__.getLineHeight=m.getLineHeight=function(){return _e*Mr};m.__private__.getLineHeight=m.getLineHeight=function(){return _e*Mr};var Ks=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(ne){return typeof(ne=ne||1.15)=="number"&&(Mr=ne),this},Gs=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Mr};Ks(r.lineHeight);var zn=m.__private__.getHorizontalCoordinate=function(ne){return R(ne)},Mn=m.__private__.getVerticalCoordinate=function(ne){return C===j?ne:Gt[K].mediaBox.topRightY-Gt[K].mediaBox.bottomLeftY-R(ne)},si=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(ne){return S(zn(ne))},Gi=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(ne){return S(Mn(ne))},Ma=r.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ye(Ma)},m.__private__.setStrokeColor=m.setDrawColor=function(ne,xe,Qe,Xe){return Ma=De({ch1:ne,ch2:xe,ch3:Qe,ch4:Xe,pdfColorType:"draw",precision:2}),te(Ma),this};var Ra=r.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ye(Ra)},m.__private__.setFillColor=m.setFillColor=function(ne,xe,Qe,Xe){return Ra=De({ch1:ne,ch2:xe,ch3:Qe,ch4:Xe,pdfColorType:"fill",precision:2}),te(Ra),this};var ki=r.textColor||"0 g",ii=m.__private__.getTextColor=m.getTextColor=function(){return ye(ki)};m.__private__.setTextColor=m.setTextColor=function(ne,xe,Qe,Xe){return ki=De({ch1:ne,ch2:xe,ch3:Qe,ch4:Xe,pdfColorType:"text",precision:3}),this};var _i=r.charSpace,re=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(_i||0)};m.__private__.setCharSpace=m.setCharSpace=function(ne){if(isNaN(ne))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _i=ne,this};var D=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(ne){var xe=m.CapJoinStyles[ne];if(xe===void 0)throw new Error("Line cap style of '"+ne+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return D=xe,te(xe+" J"),this};var Ae=0;m.__private__.setLineJoin=m.setLineJoin=function(ne){var xe=m.CapJoinStyles[ne];if(xe===void 0)throw new Error("Line join style of '"+ne+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ae=xe,te(xe+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(ne){if(ne=ne||0,isNaN(ne))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(S(R(ne))+" M"),this},m.GState=L0,m.setGState=function(ne){(ne=typeof ne=="string"?Et[ur[ne]]:de(null,ne)).equals(vr)||(te("/"+ne.id+" gs"),vr=ne)};var de=function(ne,xe){if(!ne||!ur[ne]){var Qe=!1;for(var Xe in Et)if(Et.hasOwnProperty(Xe)&&Et[Xe].equals(xe)){Qe=!0;break}if(Qe)xe=Et[Xe];else{var rt="GS"+(Object.keys(Et).length+1).toString(10);Et[rt]=xe,xe.id=rt}return ne&&(ur[ne]=xe.id),at.publish("addGState",xe),xe}};m.addGState=function(ne,xe){return de(ne,xe),this},m.saveGraphicsState=function(){return te("q"),vt.push({key:Te,size:_e,color:ki}),this},m.restoreGraphicsState=function(){te("Q");var ne=vt.pop();return Te=ne.key,_e=ne.size,ki=ne.color,vr=null,this},m.setCurrentTransformationMatrix=function(ne){return te(ne.toString()+" cm"),this},m.comment=function(ne){return te("#"+ne),this};var We=function(ne,xe){var Qe=ne||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Qe},set:function(wt){isNaN(wt)||(Qe=parseFloat(wt))}});var Xe=xe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Xe},set:function(wt){isNaN(wt)||(Xe=parseFloat(wt))}});var rt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return rt},set:function(wt){rt=wt.toString()}}),this},Ge=function(ne,xe,Qe,Xe){We.call(this,ne,xe),this.type="rect";var rt=Qe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return rt},set:function(St){isNaN(St)||(rt=parseFloat(St))}});var wt=Xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return wt},set:function(St){isNaN(St)||(wt=parseFloat(St))}}),this},_t=function(){this.page=Wt,this.currentPage=K,this.pages=ge.slice(0),this.pagesContext=Gt.slice(0),this.x=He,this.y=it,this.matrix=It,this.width=rr(K),this.height=xt(K),this.outputDestination=ke,this.id="",this.objectNumber=-1};_t.prototype.restore=function(){Wt=this.page,K=this.currentPage,Gt=this.pagesContext,ge=this.pages,He=this.x,it=this.y,It=this.matrix,zt(K,this.width),Lt(K,this.height),ke=this.outputDestination};var Nt=function(ne,xe,Qe,Xe,rt){an.push(new _t),Wt=K=0,ge=[],He=ne,it=xe,It=rt,yn([Qe,Xe])};for(var tt in m.beginFormObject=function(ne,xe,Qe,Xe,rt){return Nt(ne,xe,Qe,Xe,rt),this},m.endFormObject=function(ne){return(function(xe){if(et[xe])an.pop().restore();else{var Qe=new _t,Xe="Xo"+(Object.keys(dr).length+1).toString(10);Qe.id=Xe,et[xe]=Xe,dr[Xe]=Qe,at.publish("addFormObject",Qe),an.pop().restore()}})(ne),this},m.doFormObject=function(ne,xe){var Qe=dr[et[ne]];return te("q"),te(xe.toString()+" cm"),te("/"+Qe.id+" Do"),te("Q"),this},m.getFormObject=function(ne){var xe=dr[et[ne]];return{x:xe.x,y:xe.y,width:xe.width,height:xe.height,matrix:xe.matrix}},m.save=function(ne,xe){return ne=ne||"generated.pdf",(xe=xe||{}).returnPromise=xe.returnPromise||!1,xe.returnPromise===!1?(Td(Wr(Er()),ne),typeof Td.unload=="function"&&tn.setTimeout&&setTimeout(Td.unload,911),this):new Promise(function(Qe,Xe){try{var rt=Td(Wr(Er()),ne);typeof Td.unload=="function"&&tn.setTimeout&&setTimeout(Td.unload,911),Qe(rt)}catch(wt){Xe(wt.message)}})},Tr.API)Tr.API.hasOwnProperty(tt)&&(tt==="events"&&Tr.API.events.length?(function(ne,xe){var Qe,Xe,rt;for(rt=xe.length-1;rt!==-1;rt--)Qe=xe[rt][0],Xe=xe[rt][1],ne.subscribe.apply(ne,[Qe].concat(typeof Xe=="function"?[Xe]:Xe))})(at,Tr.API.events):m[tt]=Tr.API[tt]);var rr=m.getPageWidth=function(ne){return(Gt[ne=ne||K].mediaBox.topRightX-Gt[ne].mediaBox.bottomLeftX)/Ye},zt=m.setPageWidth=function(ne,xe){Gt[ne].mediaBox.topRightX=xe*Ye+Gt[ne].mediaBox.bottomLeftX},xt=m.getPageHeight=function(ne){return(Gt[ne=ne||K].mediaBox.topRightY-Gt[ne].mediaBox.bottomLeftY)/Ye},Lt=m.setPageHeight=function(ne,xe){Gt[ne].mediaBox.topRightY=xe*Ye+Gt[ne].mediaBox.bottomLeftY};return m.internal={pdfEscape:Fr,getStyle:Cn,getFont:sn,getFontSize:ie,getCharSpace:re,getTextColor:ii,getLineHeight:ys,getLineHeightFactor:Gs,getLineWidth:Ar,write:fe,getHorizontalCoordinate:zn,getVerticalCoordinate:Mn,getCoordinateString:si,getVerticalCoordinateString:Gi,collections:{},newObject:Gr,newAdditionalObject:Ne,newObjectDeferred:Sn,newObjectDeferredBegin:ce,getFilters:qe,putStream:Ze,events:at,scaleFactor:Ye,pageSize:{getWidth:function(){return rr(K)},setWidth:function(ne){zt(K,ne)},getHeight:function(){return xt(K)},setHeight:function(ne){Lt(K,ne)}},encryptionOptions:A,encryption:fn,getEncryptor:function(ne){return A!==null?fn.encryptor(ne,0):function(xe){return xe}},output:Dr,getNumberOfPages:kr,pages:ge,out:te,f2:k,f3:I,getPageInfo:Dn,getPageInfoByObjId:xi,getCurrentPageInfo:Us,getPDFVersion:b,Point:We,Rectangle:Ge,Matrix:gr,hasHotfix:nn},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return rr(K)},set:function(ne){zt(K,ne)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return xt(K)},set:function(ne){Lt(K,ne)},enumerable:!0,configurable:!0}),(function(ne){for(var xe=0,Qe=Fe.length;xe<Qe;xe++){var Xe=cr.call(this,ne[xe][0],ne[xe][1],ne[xe][2],Fe[xe][3],!0);f===!1&&(p[Xe]=!0);var rt=ne[xe][0].split("-");or({id:Xe,fontName:rt[0],fontStyle:rt[1]||""})}at.publish("addFonts",{fonts:dt,dictionary:Pt})}).call(m,Fe),Te="F1",Lr(a,s),at.publish("initialized"),m}YA.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},YA.prototype.toHexString=function(r){return r.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},YA.prototype.hexToBytes=function(r){for(var t=[],s=0;s<r.length;s+=2)t.push(String.fromCharCode(parseInt(r.substr(s,2),16)));return t.join("")},YA.prototype.processOwnerPassword=function(r,t){return gw(mw(t).substr(0,5),r)},YA.prototype.encryptor=function(r,t){var s=mw(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return gw(s,i)}},L0.prototype.equals=function(r){var t,s="id,objectNumber,equals";if(!r||ss(r)!==ss(this))return!1;var i=0;for(t in this)if(!(s.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;i++}for(t in r)r.hasOwnProperty(t)&&s.indexOf(t)<0&&i--;return i===0},Tr.API={events:[]},Tr.version="3.0.2";var Js=Tr.API,h2=1,AA=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$A=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},An=function(r){return r.toFixed(2)},vu=function(r){return r.toFixed(5)};Js.__acroform__={};var Za=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},aS=function(r){return r*h2},$l=function(r){var t=new JE,s=Sr.internal.getHeight(r)||0,i=Sr.internal.getWidth(r)||0;return t.BBox=[0,0,Number(An(i)),Number(An(s))],t},iK=Js.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<t},aK=Js.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<t)},oK=Js.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<t?1:0},fi=Js.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return oK(r,t-1)},pi=Js.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return iK(r,t-1)},mi=Js.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return aK(r,t-1)},lK=Js.__acroform__.calculateCoordinates=function(r,t){var s=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,a=r[0],o=r[1],c=r[2],l=r[3],u={};return u.lowerLeft_X=s(a)||0,u.lowerLeft_Y=i(o+l)||0,u.upperRight_X=s(a+c)||0,u.upperRight_Y=i(o)||0,[Number(An(u.lowerLeft_X)),Number(An(u.lowerLeft_Y)),Number(An(u.upperRight_X)),Number(An(u.upperRight_Y))]},cK=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],s=r._V||r.DV,i=yw(r,s),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+a+" "+An(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=$l(r);return o.scope=r.scope,o.stream=t.join(`
`),o}},yw=function(r,t){var s=r.fontSize===0?r.maxFontSize:r.fontSize,i={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=r.multiline?a.map(function(k){return k.split(`
`)}):a.map(function(k){return[k]});var o=s,c=Sr.internal.getHeight(r)||0;c=c<0?-c:c;var l=Sr.internal.getWidth(r)||0;l=l<0?-l:l;var u=function(k,I,R){if(k+1<a.length){var Q=I+" "+a[k+1][0];return Jm(Q,r,R).width<=l-4}return!1};o++;e:for(;o>0;){t="",o--;var d,A,f=Jm("3",r,o).height,p=r.multiline?c-o:(c-f)/2,m=p+=2,g=0,b=0,v=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+Jm(t,r,o=12).width+", FieldWidth:"+l+`
`;break}for(var y="",w=0,j=0;j<a.length;j++)if(a.hasOwnProperty(j)){var C=!1;if(a[j].length!==1&&v!==a[j].length-1){if((f+2)*(w+2)+2>c)continue e;y+=a[j][v],C=!0,b=j,j--}else{y=(y+=a[j][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var B=parseInt(j),E=u(B,y,o),_=j>=a.length-1;if(E&&!_){y+=" ",v=0;continue}if(E||_){if(_)b=B;else if(r.multiline&&(f+2)*(w+2)+2>c)continue e}else{if(!r.multiline||(f+2)*(w+2)+2>c)continue e;b=B}}for(var S="",N=g;N<=b;N++){var O=a[N];if(r.multiline){if(N===b){S+=O[v]+" ",v=(v+1)%O.length;continue}if(N===g){S+=O[O.length-1]+" ";continue}}S+=O[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,A=Jm(S,r,o).width,r.textAlign){case"right":d=l-A-2;break;case"center":d=(l-A)/2;break;default:d=2}t+=An(d)+" "+An(m)+` Td
`,t+="("+AA(S)+`) Tj
`,t+=-An(d)+` 0 Td
`,m=-(o+2),A=0,g=C?b:b+1,w++,y=""}break}return i.text=t,i.fontSize=o,i},Jm=function(r,t,s){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(r,{font:i,fontSize:parseFloat(s),charSpace:0})*parseFloat(s);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(s),charSpace:0})*parseFloat(s)*1.5,width:a}},uK={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},dK=function(r,t){var s={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find(function(i){return i.type===s.type&&i.object===s.object})===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(s)},AK=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(jl.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(uK)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");h2=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new ZE,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(s){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(s){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];o.objId=void 0,o.hasAnnotation&&dK(o,s)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(s){if(s.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(s){(function(i,a){var o=!i;for(var c in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(c)){var l=i[c],u=[],d=l.Rect;if(l.Rect&&(l.Rect=lK(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Sr.createDefaultAppearanceStream(l),ss(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(u=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var A=cK(l);u.push({key:"AP",value:"<</N "+A+">>"}),a.internal.acroformPlugin.xForms.push(A)}if(l.appearanceStreamContent){var f="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var m=l.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var c in m)if(m.hasOwnProperty(c)){var g=m[c];typeof g=="function"&&(g=g.call(a,l)),f+="/"+c+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),f+="/"+c+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}u.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:u,objectId:l.objId}),a.internal.out("endobj")}o&&(function(b,v){for(var y in b)if(b.hasOwnProperty(y)){var w=y,j=b[y];v.internal.newObjectDeferredBegin(j.objId,!0),ss(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete b[w]}})(a.internal.acroformPlugin.xForms,a)})(s,r)}),r.internal.acroformPlugin.isInitialized=!0}},XE=Js.__acroform__.arrayToPdfArray=function(r,t,s){var i=function(c){return c};if(Array.isArray(r)){for(var a="[",o=0;o<r.length;o++)switch(o!==0&&(a+=" "),ss(r[o])){case"boolean":case"number":case"object":a+=r[o].toString();break;case"string":r[o].substr(0,1)!=="/"?(t!==void 0&&s&&(i=s.internal.getEncryptor(t)),a+="("+AA(i(r[o].toString()))+")"):a+=r[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ib=function(r,t,s){var i=function(a){return a};return t!==void 0&&s&&(i=s.internal.getEncryptor(t)),(r=r||"").toString(),"("+AA(i(r))+")"},Gl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Gl.prototype.toString=function(){return this.objId+" 0 R"},Gl.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Gl.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var s in t)if(Object.getOwnPropertyDescriptor(this,t[s]).configurable===!1){var i=t[s],a=this[i];a&&(Array.isArray(a)?r.push({key:i,value:XE(a,this.objId,this.scope)}):a instanceof Gl?(a.scope=this.scope,r.push({key:i,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:i,value:a}))}return r};var JE=function(){Gl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(s){r=s.trim()},get:function(){return r||null}})};Za(JE,Gl);var ZE=function(){Gl.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var s=function(i){return i};return this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),"("+AA(s(r))+")"}},set:function(s){r=s}})};Za(ZE,Gl);var jl=function r(){Gl.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fi(t,3)},set:function(y){y?this.F=pi(t,3):this.F=mi(t,3)}});var s=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return s},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');s=y}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(y){i=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(y){i[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(y){i[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(y){i[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(y){i[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof D0)return;o="FieldObject"+r.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+AA(y(o))+")"},set:function(y){o=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(y){o=y}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/h2:d},set:function(y){d=y}});var A="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return A},set:function(y){A=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof D0||this instanceof zd))return Ib(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Vi==0?Ib(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof Vi==0?y.substr(0,1)==="("?$A(y.substr(1,y.length-2)):$A(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi==1?$A(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Vi==1?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Vi==0?Ib(m,this.objId,this.scope):m},set:function(y){y=y.toString(),m=this instanceof Vi==0?y.substr(0,1)==="("?$A(y.substr(1,y.length-2)):$A(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi==1?$A(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Vi==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(y){y=!!y,b=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,1)},set:function(y){y?this.Ff=pi(this.Ff,1):this.Ff=mi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,2)},set:function(y){y?this.Ff=pi(this.Ff,2):this.Ff=mi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,3)},set:function(y){y?this.Ff=pi(this.Ff,3):this.Ff=mi(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;default:v=0}}})};Za(jl,Gl);var yh=function(){jl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(s){r=s}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return XE(t,this.objId,this.scope)},set:function(s){var i,a;a=[],typeof(i=s)=="string"&&(a=(function(o,c,l){l||(l=1);for(var u,d=[];u=c.exec(o);)d.push(u[l]);return d})(i,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(s){t=s,this.sort&&t.sort()},this.addOption=function(s){s=(s=s||"").toString(),t.push(s),this.sort&&t.sort()},this.removeOption=function(s,i){for(i=i||!1,s=(s=s||"").toString();t.indexOf(s)!==-1&&(t.splice(t.indexOf(s),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,18)},set:function(s){s?this.Ff=pi(this.Ff,18):this.Ff=mi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,19)},set:function(s){this.combo===!0&&(s?this.Ff=pi(this.Ff,19):this.Ff=mi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,20)},set:function(s){s?(this.Ff=pi(this.Ff,20),t.sort()):this.Ff=mi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,22)},set:function(s){s?this.Ff=pi(this.Ff,22):this.Ff=mi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(s){s?this.Ff=pi(this.Ff,23):this.Ff=mi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,27)},set:function(s){s?this.Ff=pi(this.Ff,27):this.Ff=mi(this.Ff,27)}}),this.hasAppearanceStream=!1};Za(yh,jl);var xh=function(){yh.call(this),this.fontName="helvetica",this.combo=!1};Za(xh,yh);var bh=function(){xh.call(this),this.combo=!0};Za(bh,xh);var Gg=function(){bh.call(this),this.edit=!0};Za(Gg,bh);var Vi=function(){jl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,15)},set:function(s){s?this.Ff=pi(this.Ff,15):this.Ff=mi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,16)},set:function(s){s?this.Ff=pi(this.Ff,16):this.Ff=mi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,17)},set:function(s){s?this.Ff=pi(this.Ff,17):this.Ff=mi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(s){s?this.Ff=pi(this.Ff,26):this.Ff=mi(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};if(this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,a=[];for(i in a.push("<<"),t)a.push("/"+i+" ("+AA(s(t[i]))+")");return a.push(">>"),a.join(`
`)}},set:function(s){ss(s)==="object"&&(t=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(s){typeof s=="string"&&(t.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}})};Za(Vi,jl);var Wg=function(){Vi.call(this),this.pushButton=!0};Za(Wg,Vi);var vh=function(){Vi.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};Za(vh,Vi);var D0=function(){var r,t;jl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var s,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,c=[];for(o in c.push("<<"),i)c.push("/"+o+" ("+AA(a(i[o]))+")");return c.push(">>"),c.join(`
`)},set:function(a){ss(a)==="object"&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){typeof a=="string"&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(a){s="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Sr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Za(D0,jl),vh.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var s=this.Kids[t];s.appearanceStreamContent=r.createAppearanceStream(s.optionName),s.caption=r.getCA()}},vh.prototype.createOption=function(r){var t=new D0;return t.Parent=this,t.optionName=r,this.Kids.push(t),hK.call(this.scope,t),t};var qg=function(){Vi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Sr.CheckBox.createAppearanceStream()};Za(qg,Vi);var zd=function(){jl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,13)},set:function(t){t?this.Ff=pi(this.Ff,13):this.Ff=mi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,21)},set:function(t){t?this.Ff=pi(this.Ff,21):this.Ff=mi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(t){t?this.Ff=pi(this.Ff,23):this.Ff=mi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,24)},set:function(t){t?this.Ff=pi(this.Ff,24):this.Ff=mi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,25)},set:function(t){t?this.Ff=pi(this.Ff,25):this.Ff=mi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(t){t?this.Ff=pi(this.Ff,26):this.Ff=mi(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Za(zd,jl);var Yg=function(){zd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,14)},set:function(r){r?this.Ff=pi(this.Ff,14):this.Ff=mi(this.Ff,14)}}),this.password=!0};Za(Yg,zd);var Sr={CheckBox:{createAppearanceStream:function(){return{N:{On:Sr.CheckBox.YesNormal},D:{On:Sr.CheckBox.YesPushDown,Off:Sr.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=$l(r);t.scope=r.scope;var s=[],i=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),o=yw(r,r.caption);return s.push("0.749023 g"),s.push("0 0 "+An(Sr.internal.getWidth(r))+" "+An(Sr.internal.getHeight(r))+" re"),s.push("f"),s.push("BMC"),s.push("q"),s.push("0 0 1 rg"),s.push("/"+i+" "+An(o.fontSize)+" Tf "+a),s.push("BT"),s.push(o.text),s.push("ET"),s.push("Q"),s.push("EMC"),t.stream=s.join(`
`),t},YesNormal:function(r){var t=$l(r);t.scope=r.scope;var s=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),a=[],o=Sr.internal.getHeight(r),c=Sr.internal.getWidth(r),l=yw(r,r.caption);return a.push("1 g"),a.push("0 0 "+An(c)+" "+An(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+An(c-1)+" "+An(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+s+" "+An(l.fontSize)+" Tf "+i),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(r){var t=$l(r);t.scope=r.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+An(Sr.internal.getWidth(r))+" "+An(Sr.internal.getHeight(r))+" re"),s.push("f"),t.stream=s.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:Sr.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=Sr.RadioButton.Circle.YesNormal,t.D[r]=Sr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=$l(r);t.scope=r.scope;var s=[],i=Sr.internal.getWidth(r)<=Sr.internal.getHeight(r)?Sr.internal.getWidth(r)/4:Sr.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var a=Sr.internal.Bezier_C,o=Number((i*a).toFixed(5));return s.push("q"),s.push("1 0 0 1 "+vu(Sr.internal.getWidth(r)/2)+" "+vu(Sr.internal.getHeight(r)/2)+" cm"),s.push(i+" 0 m"),s.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),s.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),s.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),s.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t},YesPushDown:function(r){var t=$l(r);t.scope=r.scope;var s=[],i=Sr.internal.getWidth(r)<=Sr.internal.getHeight(r)?Sr.internal.getWidth(r)/4:Sr.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),o=Number((a*Sr.internal.Bezier_C).toFixed(5)),c=Number((i*Sr.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+vu(Sr.internal.getWidth(r)/2)+" "+vu(Sr.internal.getHeight(r)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),s.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),s.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),s.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),s.push("f"),s.push("Q"),s.push("0 g"),s.push("q"),s.push("1 0 0 1 "+vu(Sr.internal.getWidth(r)/2)+" "+vu(Sr.internal.getHeight(r)/2)+" cm"),s.push(i+" 0 m"),s.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),s.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),s.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),s.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(r){var t=$l(r);t.scope=r.scope;var s=[],i=Sr.internal.getWidth(r)<=Sr.internal.getHeight(r)?Sr.internal.getWidth(r)/4:Sr.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),o=Number((a*Sr.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+vu(Sr.internal.getWidth(r)/2)+" "+vu(Sr.internal.getHeight(r)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),s.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),s.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),s.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:Sr.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=Sr.RadioButton.Cross.YesNormal,t.D[r]=Sr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=$l(r);t.scope=r.scope;var s=[],i=Sr.internal.calculateCross(r);return s.push("q"),s.push("1 1 "+An(Sr.internal.getWidth(r)-2)+" "+An(Sr.internal.getHeight(r)-2)+" re"),s.push("W"),s.push("n"),s.push(An(i.x1.x)+" "+An(i.x1.y)+" m"),s.push(An(i.x2.x)+" "+An(i.x2.y)+" l"),s.push(An(i.x4.x)+" "+An(i.x4.y)+" m"),s.push(An(i.x3.x)+" "+An(i.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},YesPushDown:function(r){var t=$l(r);t.scope=r.scope;var s=Sr.internal.calculateCross(r),i=[];return i.push("0.749023 g"),i.push("0 0 "+An(Sr.internal.getWidth(r))+" "+An(Sr.internal.getHeight(r))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+An(Sr.internal.getWidth(r)-2)+" "+An(Sr.internal.getHeight(r)-2)+" re"),i.push("W"),i.push("n"),i.push(An(s.x1.x)+" "+An(s.x1.y)+" m"),i.push(An(s.x2.x)+" "+An(s.x2.y)+" l"),i.push(An(s.x4.x)+" "+An(s.x4.y)+" m"),i.push(An(s.x3.x)+" "+An(s.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(r){var t=$l(r);t.scope=r.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+An(Sr.internal.getWidth(r))+" "+An(Sr.internal.getHeight(r))+" re"),s.push("f"),t.stream=s.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,s=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+s}};Sr.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=Sr.internal.getWidth(r),s=Sr.internal.getHeight(r),i=Math.min(t,s);return{x1:{x:(t-i)/2,y:(s-i)/2+i},x2:{x:(t-i)/2+i,y:(s-i)/2},x3:{x:(t-i)/2,y:(s-i)/2},x4:{x:(t-i)/2+i,y:(s-i)/2+i}}}},Sr.internal.getWidth=function(r){var t=0;return ss(r)==="object"&&(t=aS(r.Rect[2])),t},Sr.internal.getHeight=function(r){var t=0;return ss(r)==="object"&&(t=aS(r.Rect[3])),t};var hK=Js.addField=function(r){if(AK(this,r),!(r instanceof jl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Js.AcroFormChoiceField=yh,Js.AcroFormListBox=xh,Js.AcroFormComboBox=bh,Js.AcroFormEditBox=Gg,Js.AcroFormButton=Vi,Js.AcroFormPushButton=Wg,Js.AcroFormRadioButton=vh,Js.AcroFormCheckBox=qg,Js.AcroFormTextField=zd,Js.AcroFormPasswordField=Yg,Js.AcroFormAppearance=Sr,Js.AcroForm={ChoiceField:yh,ListBox:xh,ComboBox:bh,EditBox:Gg,Button:Vi,PushButton:Wg,RadioButton:vh,CheckBox:qg,TextField:zd,PasswordField:Yg,Appearance:Sr},Tr.AcroForm={ChoiceField:yh,ListBox:xh,ComboBox:bh,EditBox:Gg,Button:Vi,PushButton:Wg,RadioButton:vh,CheckBox:qg,TextField:zd,PasswordField:Yg,Appearance:Sr};Tr.AcroForm;function e6(r){return r.reduce(function(t,s,i){return t[s]=i,t},{})}(function(r){var t="addImage_";r.__addimage__={};var s="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=r.__addimage__.getImageFileTypeByImageData=function(k,I){var R,Q,$,L,F,G=s;if((I=I||s)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(E(k))for(F in i)for($=i[F],R=0;R<$.length;R+=1){for(L=!0,Q=0;Q<$[R].length;Q+=1)if($[R][Q]!==void 0&&$[R][Q]!==k[Q]){L=!1;break}if(L===!0){G=F;break}}else for(F in i)for($=i[F],R=0;R<$.length;R+=1){for(L=!0,Q=0;Q<$[R].length;Q+=1)if($[R][Q]!==void 0&&$[R][Q]!==k.charCodeAt(Q)){L=!1;break}if(L===!0){G=F;break}}return G===s&&I!==s&&(G=I),G},o=function k(I){for(var R=this.internal.write,Q=this.internal.putStream,$=(0,this.internal.getFilters)();$.indexOf("FlateEncode")!==-1;)$.splice($.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var L=[];if(L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Image"}),L.push({key:"Width",value:I.width}),L.push({key:"Height",value:I.height}),I.colorSpace===y.INDEXED?L.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(L.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===y.DEVICE_CMYK&&L.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),L.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&L.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var F="",G=0,X=I.transparency.length;G<X;G++)F+=I.transparency[G]+" "+I.transparency[G]+" ";L.push({key:"Mask",value:"["+F+"]"})}I.sMask!==void 0&&L.push({key:"SMask",value:I.objectId+1+" 0 R"});var q=I.filter!==void 0?["/"+I.filter]:void 0;if(Q({data:I.data,additionalKeyValues:L,alreadyAppliedFilters:q,objectId:I.objectId}),R("endobj"),"sMask"in I&&I.sMask!==void 0){var T=(I.predictor!=null?"/Predictor "+I.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+I.width,U={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:T,data:I.sMask};"filter"in I&&(U.filter=I.filter),k.call(this,U)}if(I.colorSpace===y.INDEXED){var K=this.internal.newObject();Q({data:S(new Uint8Array(I.palette)),objectId:K}),R("endobj")}},c=function(){var k=this.internal.collections[t+"images"];for(var I in k)o.call(this,k[I])},l=function(){var k,I=this.internal.collections[t+"images"],R=this.internal.write;for(var Q in I)R("/I"+(k=I[Q]).index,k.objectId,"0","R")},u=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var k=this.internal.collections[t+"images"];return u.call(this),k},A=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(k){return typeof r["process"+k.toUpperCase()]=="function"},p=function(k){return ss(k)==="object"&&k.nodeType===1},m=function(k,I){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var R=""+k.getAttribute("src");if(R.indexOf("data:image/")===0)return Kg(unescape(R).split("base64,").pop());var Q=r.loadFile(R,!0);if(Q!==void 0)return Q}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var $;switch(I){case"PNG":$="image/png";break;case"WEBP":$="image/webp";break;default:$="image/jpeg"}return Kg(k.toDataURL($,1).split("base64,").pop())}},g=function(k){var I=this.internal.collections[t+"images"];if(I){for(var R in I)if(k===I[R].alias)return I[R]}},b=function(k,I,R){return k||I||(k=-96,I=-96),k<0&&(k=-1*R.width*72/k/this.internal.scaleFactor),I<0&&(I=-1*R.height*72/I/this.internal.scaleFactor),k===0&&(k=I*R.width/R.height),I===0&&(I=k*R.height/R.width),[k,I]},v=function(k,I,R,Q,$,L){var F=b.call(this,R,Q,$),G=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,q=d.call(this);if(R=F[0],Q=F[1],q[$.index]=$,L){L*=Math.PI/180;var T=Math.cos(L),U=Math.sin(L),K=function(M){return M.toFixed(4)},z=[K(T),K(U),K(-1*U),K(T),0,0,"cm"]}this.internal.write("q"),L?(this.internal.write([1,"0","0",1,G(k),X(I+Q),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([G(R),"0","0",G(Q),"0","0","cm"].join(" "))):this.internal.write([G(R),"0","0",G(Q),G(k),X(I+Q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+$.index+" Do"),this.internal.write("Q")},y=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=r.__addimage__.sHashCode=function(k){var I,R,Q=0;if(typeof k=="string")for(R=k.length,I=0;I<R;I++)Q=(Q<<5)-Q+k.charCodeAt(I),Q|=0;else if(E(k))for(R=k.byteLength/2,I=0;I<R;I++)Q=(Q<<5)-Q+k[I],Q|=0;return Q},C=r.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var I=!0;return k.length===0&&(I=!1),k.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(I=!1),I},B=r.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var I=k.indexOf(",");return I<0?null:k.substring(0,I).trim().endsWith("base64")?k.substring(I+1):null};r.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var E=r.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},_=r.__addimage__.binaryStringToUint8Array=function(k){for(var I=k.length,R=new Uint8Array(I),Q=0;Q<I;Q++)R[Q]=k.charCodeAt(Q);return R},S=r.__addimage__.arrayBufferToBinaryString=function(k){for(var I="",R=E(k)?k:new Uint8Array(k),Q=0;Q<R.length;Q+=8192)I+=String.fromCharCode.apply(null,R.subarray(Q,Q+8192));return I};r.addImage=function(){var k,I,R,Q,$,L,F,G,X;if(typeof arguments[1]=="number"?(I=s,R=arguments[1],Q=arguments[2],$=arguments[3],L=arguments[4],F=arguments[5],G=arguments[6],X=arguments[7]):(I=arguments[1],R=arguments[2],Q=arguments[3],$=arguments[4],L=arguments[5],F=arguments[6],G=arguments[7],X=arguments[8]),ss(k=arguments[0])==="object"&&!p(k)&&"imageData"in k){var q=k;k=q.imageData,I=q.format||I||s,R=q.x||R||0,Q=q.y||Q||0,$=q.w||q.width||$,L=q.h||q.height||L,F=q.alias||F,G=q.compression||G,X=q.rotation||q.angle||X}var T=this.internal.getFilters();if(G===void 0&&T.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(R)||isNaN(Q))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var U=N.call(this,k,I,F,G);return v.call(this,R,Q,$,L,U,X),this};var N=function(k,I,R,Q){var $,L,F;if(typeof k=="string"&&a(k)===s){k=unescape(k);var G=O(k,!1);(G!==""||(G=r.loadFile(k,!0))!==void 0)&&(k=G)}if(p(k)&&(k=m(k,I)),I=a(k,I),!f(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((F=R)==null||F.length===0)&&(R=(function(X){return typeof X=="string"||E(X)?j(X):E(X.data)?j(X.data):null})(k)),($=g.call(this,R))||(k instanceof Uint8Array||I==="RGBA"||(L=k,k=_(k)),$=this["process"+I.toUpperCase()](k,A.call(this),R,(function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in r.image_compression?X:w.NONE})(Q),L)),!$)throw new Error("An unknown error occurred whilst processing the image.");return $},O=r.__addimage__.convertBase64ToBinaryString=function(k,I){I=typeof I!="boolean"||I;var R,Q="";if(typeof k=="string"){var $;R=($=B(k))!==null&&$!==void 0?$:k;try{Q=Kg(R)}catch(L){if(I)throw C(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+L.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Q};r.getImageProperties=function(k){var I,R,Q="";if(p(k)&&(k=m(k)),typeof k=="string"&&a(k)===s&&((Q=O(k,!1))===""&&(Q=r.loadFile(k)||""),k=Q),R=a(k),!f(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(k instanceof Uint8Array||(k=_(k)),!(I=this["process"+R.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=R,I}})(Tr.API),(function(r){var t=function(s){if(s!==void 0&&s!="")return!0};Tr.API.events.push(["addPage",function(s){this.internal.getPageInfo(s.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(s){for(var i,a,o,c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(s.objId),d=s.pageContext.annotations,A=!1,f=0;f<d.length&&!A;f++)switch((i=d[f]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(A=!0);break;case"reference":case"text":case"freetext":A=!0}if(A!=0){this.internal.write("/Annots [");for(var p=0;p<d.length;p++){i=d[p];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(s.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(b.objId),w=i.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+c(i.bounds.x)+" "+l(i.bounds.y+i.bounds.h)+" "+c(i.bounds.x+i.bounds.w)+" "+l(i.bounds.y)+"] ")+"/Contents ("+m(y(i.contents))+")",o+=" /Popup "+v.objId+" 0 R",o+=" /P "+u.objId+" 0 R",o+=" /T ("+m(y(w))+") >>",b.content=o;var j=b.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+c(i.bounds.x+30)+" "+l(i.bounds.y+i.bounds.h)+" "+c(i.bounds.x+i.bounds.w+30)+" "+l(i.bounds.y)+"] ")+" /Parent "+j,i.open&&(o+=" /Open true"),o+=" >>",v.content=o,this.internal.write(b.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+c(i.bounds.x)+" "+l(i.bounds.y)+" "+c(i.bounds.x+i.bounds.w)+" "+l(i.bounds.y+i.bounds.h)+"] ";var C=i.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(i.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(i.options.name){var B=this.annotations._nameMap[i.options.name];i.options.pageNumber=B.page,i.options.top=B.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",o="",i.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(i.options.url))+") >>";else if(i.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,o+=" /FitV "+i.options.left+"]";break;default:var E=l(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),o+=" /XYZ "+i.options.left+" "+E+" "+i.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),r.createAnnotation=function(s){var i=this.internal.getCurrentPageInfo();switch(s.type){case"link":this.link(s.bounds.x,s.bounds.y,s.bounds.w,s.bounds.h,s);break;case"text":case"freetext":i.pageContext.annotations.push(s)}},r.link=function(s,i,a,o,c){var l=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:u(s),y:d(i),w:u(s+a),h:d(i+o)},options:c,type:"link"})},r.textWithLink=function(s,i,a,o){var c,l,u=this.getTextWidth(s),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){l=o.maxWidth;var A=this.splitTextToSize(s,l).length;c=Math.ceil(d*A)}else l=u,c=d;return this.text(s,i,a,o),a+=.2*d,o.align==="center"&&(i-=u/2),o.align==="right"&&(i-=u),this.link(i,a-d,l,c,o),u},r.getTextWidth=function(s){var i=this.internal.getFontSize();return this.getStringUnitWidth(s)*i/this.internal.scaleFactor}})(Tr.API),(function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},s={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var o=r.__arabicParser__.isInArabicSubstitutionA=function(b){return t[b.charCodeAt(0)]!==void 0},c=r.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},l=r.__arabicParser__.isArabicEndLetter=function(b){return c(b)&&o(b)&&t[b.charCodeAt(0)].length<=2},u=r.__arabicParser__.isArabicAlfLetter=function(b){return c(b)&&a.indexOf(b.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return c(b)&&o(b)&&t[b.charCodeAt(0)].length>=1};var d=r.__arabicParser__.arabicLetterHasFinalForm=function(b){return c(b)&&o(b)&&t[b.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(b){return c(b)&&o(b)&&t[b.charCodeAt(0)].length>=3};var A=r.__arabicParser__.arabicLetterHasMedialForm=function(b){return c(b)&&o(b)&&t[b.charCodeAt(0)].length==4},f=r.__arabicParser__.resolveLigatures=function(b){var v=0,y=s,w="",j=0;for(v=0;v<b.length;v+=1)y[b.charCodeAt(v)]!==void 0?(j++,typeof(y=y[b.charCodeAt(v)])=="number"&&(w+=String.fromCharCode(y),y=s,j=0),v===b.length-1&&(y=s,w+=b.charAt(v-(j-1)),v-=j-1,j=0)):(y=s,w+=b.charAt(v-j),v-=j,j=0);return w};r.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&i[b.charCodeAt(0)]!==void 0};var p=r.__arabicParser__.getCorrectForm=function(b,v,y){return c(b)?o(b)===!1?-1:!d(b)||!c(v)&&!c(y)||!c(y)&&l(v)||l(b)&&!c(v)||l(b)&&u(v)||l(b)&&l(v)?0:A(b)&&c(v)&&!l(v)&&c(y)&&d(y)?3:l(b)||!c(y)?1:2:-1},m=function(b){var v=0,y=0,w=0,j="",C="",B="",E=(b=b||"").split("\\s+"),_=[];for(v=0;v<E.length;v+=1){for(_.push(""),y=0;y<E[v].length;y+=1)j=E[v][y],C=E[v][y-1],B=E[v][y+1],c(j)?(w=p(j,C,B),_[v]+=w!==-1?String.fromCharCode(t[j.charCodeAt(0)][w]):j):_[v]+=j;_[v]=f(_[v])}return _.join(" ")},g=r.__arabicParser__.processArabic=r.processArabic=function(){var b,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var w=0;for(y=[],w=0;w<v.length;w+=1)Array.isArray(v[w])?y.push([m(v[w][0]),v[w][1],v[w][2]]):y.push([m(v[w])]);b=y}else b=m(v);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};r.events.push(["preProcessText",g])})(Tr.API),Tr.API.autoPrint=function(r){var t;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(r){var t=function(){var s=void 0;Object.defineProperty(this,"pdf",{get:function(){return s},set:function(l){s=l}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(l){o=l}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(l){c=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(s,i){var a;if((s=s||"2d")!=="2d")return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Tr.API),(function(r){var t={left:0,top:0,bottom:0,right:0},s=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var A=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return A},set:function(b){A=b}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(b){g=b}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(u){return i.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},r.getTextDimensions=function(u,d){i.call(this);var A=(d=d||{}).fontSize||this.getFontSize(),f=d.font||this.getFont(),p=d.scaleFactor||this.internal.scaleFactor,m=0,g=0,b=0,v=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var y=d.maxWidth;y>0?typeof u=="string"?u=this.splitTextToSize(u,y):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(j,C){return j.concat(v.splitTextToSize(C,y))},[])):u=Array.isArray(u)?u:[u];for(var w=0;w<u.length;w++)m<(b=this.getStringUnitWidth(u[w],{font:f})*A)&&(m=b);return m!==0&&(g=u.length),{w:m/=p,h:Math.max((g*A*this.getLineHeightFactor()-A*(this.getLineHeightFactor()-1))/p,0)}},r.cellAddPage=function(){i.call(this),this.addPage();var u=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=r.cell=function(){var u;u=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var d=this.internal.__cell__.lastCell,A=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===u.lineNumber?(u.x=(d.x||0)+(d.width||0),u.y=d.y||0):d.y+d.height+u.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=f.top,m&&p&&(this.printHeaderRow(u.lineNumber,!0),u.y+=p[0].height)):u.y=d.y+d.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,s===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-A,u.y+A,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+A,{align:"center",baseline:"top",maxWidth:u.width-A-A}):this.text(u.text,u.x+A,u.y+A,{align:"left",baseline:"top",maxWidth:u.width-A-A})),this.internal.__cell__.lastCell=u,this};r.table=function(u,d,A,f,p){if(i.call(this),!A)throw new Error("No data for PDF table.");var m,g,b,v,y=[],w=[],j=[],C={},B={},E=[],_=[],S=(p=p||{}).autoSize||!1,N=p.printHeaders!==!1,O=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,k=p.margins||Object.assign({width:this.getPageWidth()},t),I=typeof p.padding=="number"?p.padding:3,R=p.headerBackgroundColor||"#c8c8c8",Q=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=Q,this.setFontSize(O),f==null)w=y=Object.keys(A[0]),j=y.map(function(){return"left"});else if(Array.isArray(f)&&ss(f[0])==="object")for(y=f.map(function(q){return q.name}),w=f.map(function(q){return q.prompt||q.name||""}),j=f.map(function(q){return q.align||"left"}),m=0;m<f.length;m+=1)B[f[m].name]=.7499990551181103*f[m].width;else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,j=y.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(C[v=y[m]]=A.map(function(q){return q[v]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(w[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=C[v],this.setFont(void 0,"normal"),b=0;b<g.length;b+=1)E.push(this.getTextDimensions(g[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[v]=Math.max.apply(null,E)+I+I,E=[]}if(N){var $={};for(m=0;m<y.length;m+=1)$[y[m]]={},$[y[m]].text=w[m],$[y[m]].align=j[m];var L=l.call(this,$,B);_=y.map(function(q){return new o(u,d,B[q],L,$[q].text,void 0,$[q].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var F=f.reduce(function(q,T){return q[T.name]=T.align,q},{});for(m=0;m<A.length;m+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:m,data:A[m]},this);var G=l.call(this,A[m],B);for(b=0;b<y.length;b+=1){var X=A[m][y[b]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:m,col:b,data:X},this),c.call(this,new o(u,d,B[y[b]],G,X,m+2,F[y[b]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=d,this};var l=function(u,d){var A=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(u).map(function(m){var g=u[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,d[m]-A-A)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/p+A+A},this).reduce(function(m,g){return Math.max(m,g)},0)};r.setTableHeaderRow=function(u){i.call(this),this.internal.__cell__.tableHeaderRow=u},r.printHeaderRow=function(u,d){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var A;if(s=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){A=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(A.y=this.internal.__cell__.margins.top||0,p.push(A)),A.lineNumber=u;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,A),this.setTextColor(g)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),s=!1}})(Tr.API);var t6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},r6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xw=e6(r6),n6=[100,200,300,400,500,600,700,800,900],fK=e6(n6);function Pb(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),s=(function(o){return t6[o=o||"normal"]?o:"normal"})(r.style),i=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(r.weight),a=(function(o){return typeof xw[o=o||"normal"]=="number"?o:"normal"})(r.stretch);return{family:t,style:s,weight:i,stretch:a,src:r.src||[],ref:r.ref||{name:t,style:[a,s,i].join(" ")}}}function oS(r,t,s,i){var a;for(a=s;a>=0&&a<t.length;a+=i)if(r[t[a]])return r[t[a]];for(a=s;a>=0&&a<t.length;a-=i)if(r[t[a]])return r[t[a]]}var pK={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},lS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function cS(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function uS(r){return r.trimLeft()}function mK(r,t){for(var s=0;s<r.length;){if(r.charAt(s)===t)return[r.substring(0,s),r.substring(s+1)];s+=1}return null}function gK(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var Zm,dS,AS,HA,eg,hS,fS,pS,Tb=["times"];function mS(r,t,s,i){var a=4,o=yS;switch(i){case Tr.API.image_compression.FAST:a=1,o=gS;break;case Tr.API.image_compression.MEDIUM:a=6,o=xS;break;case Tr.API.image_compression.SLOW:a=9,o=bS}r=(function(l,u,d,A){for(var f,p=l.length/u,m=new Uint8Array(l.length+p),g=[yK,gS,yS,xS,bS],b=0;b<p;b+=1){var v=b*u,y=l.subarray(v,v+u);if(A)m.set(A(y,d,f),v+b);else{for(var w=g.length,j=[],C=0;C<w;C+=1)j[C]=g[C](y,d,f);var B=bK(j.concat());m.set(j[B],v+b)}f=y}return m})(r,t,s,o);var c=Aw(r,{level:a});return Tr.API.__addimage__.arrayBufferToBinaryString(c)}function yK(r){var t=Array.apply([],r);return t.unshift(0),t}function gS(r,t){var s=r.length,i=[];i[0]=1;for(var a=0;a<s;a+=1){var o=r[a-t]||0;i[a+1]=r[a]-o+256&255}return i}function yS(r,t,s){var i=r.length,a=[];a[0]=2;for(var o=0;o<i;o+=1){var c=s&&s[o]||0;a[o+1]=r[o]-c+256&255}return a}function xS(r,t,s){var i=r.length,a=[];a[0]=3;for(var o=0;o<i;o+=1){var c=r[o-t]||0,l=s&&s[o]||0;a[o+1]=r[o]+256-(c+l>>>1)&255}return a}function bS(r,t,s){var i=r.length,a=[];a[0]=4;for(var o=0;o<i;o+=1){var c=xK(r[o-t]||0,s&&s[o]||0,s&&s[o-t]||0);a[o+1]=r[o]-c+256&255}return a}function xK(r,t,s){if(r===t&&t===s)return r;var i=Math.abs(t-s),a=Math.abs(r-s),o=Math.abs(r+t-s-s);return i<=a&&i<=o?r:a<=o?t:s}function bK(r){var t=r.map(function(s){return s.reduce(function(i,a){return i+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function Fb(r,t,s){var i=t*s,a=Math.floor(i/8),o=16-(i-8*a+s),c=(1<<s)-1;return s6(r,a)>>o&c}function vS(r,t,s,i){var a=s*i,o=Math.floor(a/8),c=16-(a-8*o+i),l=(1<<i)-1,u=(t&l)<<c;(function(d,A,f){if(A+1<d.byteLength)d.setUint16(A,f,!1);else{var p=f>>8&255;d.setUint8(A,p)}})(r,o,s6(r,o)&~(l<<c)&65535|u)}function s6(r,t){return t+1<r.byteLength?r.getUint16(t,!1):r.getUint8(t)<<8}function vK(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var s=r[t++]|r[t++]<<8,i=r[t++]|r[t++]<<8,a=r[t++],o=a>>7,c=1<<1+(7&a);r[t++],r[t++];var l=null,u=null;o&&(l=t,u=c,t+=3*c);var d=!0,A=[],f=0,p=null,m=0,g=null;for(this.width=s,this.height=i;d&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,g=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((k=r[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var b=r[t++];f=r[t++]|r[t++]<<8,p=r[t++],1&b||(p=null),m=b>>2&7,t++;break;case 254:for(;;){if(!((k=r[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var v=r[t++]|r[t++]<<8,y=r[t++]|r[t++]<<8,w=r[t++]|r[t++]<<8,j=r[t++]|r[t++]<<8,C=r[t++],B=C>>6&1,E=1<<1+(7&C),_=l,S=u,N=!1;C>>7&&(N=!0,_=t,S=E,t+=3*E);var O=t;for(t++;;){var k;if(!((k=r[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}A.push({x:v,y,width:w,height:j,has_local_palette:N,palette_offset:_,palette_size:S,data_offset:O,data_length:t-O,transparent_index:p,interlaced:!!B,delay:f,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return A.length},this.loopCount=function(){return g},this.frameInfo=function(I){if(I<0||I>=A.length)throw new Error("Frame index out of range.");return A[I]},this.decodeAndBlitFrameBGRA=function(I,R){var Q=this.frameInfo(I),$=Q.width*Q.height,L=new Uint8Array($);wS(r,Q.data_offset,L,$);var F=Q.palette_offset,G=Q.transparent_index;G===null&&(G=256);var X=Q.width,q=s-X,T=X,U=4*(Q.y*s+Q.x),K=4*((Q.y+Q.height)*s+Q.x),z=U,M=4*q;Q.interlaced===!0&&(M+=4*s*7);for(var H=8,Y=0,ae=L.length;Y<ae;++Y){var oe=L[Y];if(T===0&&(T=X,(z+=M)>=K&&(M=4*q+4*s*(H-1),z=U+(X+q)*(H<<1),H>>=1)),oe===G)z+=4;else{var be=r[F+3*oe],ge=r[F+3*oe+1],he=r[F+3*oe+2];R[z++]=he,R[z++]=ge,R[z++]=be,R[z++]=255}--T}},this.decodeAndBlitFrameRGBA=function(I,R){var Q=this.frameInfo(I),$=Q.width*Q.height,L=new Uint8Array($);wS(r,Q.data_offset,L,$);var F=Q.palette_offset,G=Q.transparent_index;G===null&&(G=256);var X=Q.width,q=s-X,T=X,U=4*(Q.y*s+Q.x),K=4*((Q.y+Q.height)*s+Q.x),z=U,M=4*q;Q.interlaced===!0&&(M+=4*s*7);for(var H=8,Y=0,ae=L.length;Y<ae;++Y){var oe=L[Y];if(T===0&&(T=X,(z+=M)>=K&&(M=4*q+4*s*(H-1),z=U+(X+q)*(H<<1),H>>=1)),oe===G)z+=4;else{var be=r[F+3*oe],ge=r[F+3*oe+1],he=r[F+3*oe+2];R[z++]=be,R[z++]=ge,R[z++]=he,R[z++]=255}--T}}}function wS(r,t,s,i){for(var a=r[t++],o=1<<a,c=o+1,l=c+1,u=a+1,d=(1<<u)-1,A=0,f=0,p=0,m=r[t++],g=new Int32Array(4096),b=null;;){for(;A<16&&m!==0;)f|=r[t++]<<A,A+=8,m===1?m=r[t++]:--m;if(A<u)break;var v=f&d;if(f>>=u,A-=u,v!==o){if(v===c)break;for(var y=v<l?v:b,w=0,j=y;j>o;)j=g[j]>>8,++w;var C=j;if(p+w+(y!==v?1:0)>i)return void hs.log("Warning, gif stream longer than expected.");s[p++]=C;var B=p+=w;for(y!==v&&(s[p++]=C),j=y;w--;)j=g[j],s[--B]=255&j,j>>=8;b!==null&&l<4096&&(g[l++]=b<<8|C,l>=d+1&&u<12&&(++u,d=d<<1|1)),b=v}else l=c+1,d=(1<<(u=a+1))-1,b=null}return p!==i&&hs.log("Warning, gif stream shorter than expected."),s}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ub(r){var t,s,i,a,o,c=Math.floor,l=new Array(64),u=new Array(64),d=new Array(64),A=new Array(64),f=new Array(65535),p=new Array(65535),m=new Array(64),g=new Array(64),b=[],v=0,y=7,w=new Array(64),j=new Array(64),C=new Array(64),B=new Array(256),E=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],$=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(U,K){for(var z=0,M=0,H=new Array,Y=1;Y<=16;Y++){for(var ae=1;ae<=U[Y];ae++)H[K[M]]=[],H[K[M]][0]=z,H[K[M]][1]=Y,M++,z++;z*=2}return H}function F(U){for(var K=U[0],z=U[1]-1;z>=0;)K&1<<z&&(v|=1<<y),z--,--y<0&&(v==255?(G(255),G(0)):G(v),y=7,v=0)}function G(U){b.push(U)}function X(U){G(U>>8&255),G(255&U)}function q(U,K,z,M,H){for(var Y,ae=H[0],oe=H[240],be=(function(_e,Ce){var ie,me,Be,Le,ve,$e,je,Pe,Te,Ye,He=0;for(Te=0;Te<8;++Te){ie=_e[He],me=_e[He+1],Be=_e[He+2],Le=_e[He+3],ve=_e[He+4],$e=_e[He+5],je=_e[He+6];var it=ie+(Pe=_e[He+7]),It=ie-Pe,dt=me+je,Pt=me-je,vt=Be+$e,tr=Be-$e,Jt=Le+ve,Et=Le-ve,ur=it+Jt,vr=it-Jt,Wt=dt+vt,Gt=dt-vt;_e[He]=ur+Wt,_e[He+4]=ur-Wt;var at=.707106781*(Gt+vr);_e[He+2]=vr+at,_e[He+6]=vr-at;var rn=.382683433*((ur=Et+tr)-(Gt=Pt+It)),dr=.5411961*ur+rn,et=1.306562965*Gt+rn,an=.707106781*(Wt=tr+Pt),gr=It+an,In=It-an;_e[He+5]=In+dr,_e[He+3]=In-dr,_e[He+1]=gr+et,_e[He+7]=gr-et,He+=8}for(He=0,Te=0;Te<8;++Te){ie=_e[He],me=_e[He+8],Be=_e[He+16],Le=_e[He+24],ve=_e[He+32],$e=_e[He+40],je=_e[He+48];var ln=ie+(Pe=_e[He+56]),gn=ie-Pe,Yn=me+je,Gr=me-je,Sn=Be+$e,ce=Be-$e,Ne=Le+ve,Re=Le-ve,Ve=ln+Ne,ye=ln-Ne,De=Yn+Sn,qe=Yn-Sn;_e[He]=Ve+De,_e[He+32]=Ve-De;var Ze=.707106781*(qe+ye);_e[He+16]=ye+Ze,_e[He+48]=ye-Ze;var ht=.382683433*((Ve=Re+ce)-(qe=Gr+gn)),ct=.5411961*Ve+ht,gt=1.306562965*qe+ht,ut=.707106781*(De=ce+Gr),Ut=gn+ut,$t=gn-ut;_e[He+40]=$t+ct,_e[He+24]=$t-ct,_e[He+8]=Ut+gt,_e[He+56]=Ut-gt,He++}for(Te=0;Te<64;++Te)Ye=_e[Te]*Ce[Te],m[Te]=Ye>0?Ye+.5|0:Ye-.5|0;return m})(U,K),ge=0;ge<64;++ge)g[_[ge]]=be[ge];var he=g[0]-z;z=g[0],he==0?F(M[0]):(F(M[p[Y=32767+he]]),F(f[Y]));for(var ke=63;ke>0&&g[ke]==0;)ke--;if(ke==0)return F(ae),z;for(var Z,te=1;te<=ke;){for(var fe=te;g[te]==0&&te<=ke;)++te;var we=te-fe;if(we>=16){Z=we>>4;for(var Fe=1;Fe<=Z;++Fe)F(oe);we&=15}Y=32767+g[te],F(H[(we<<4)+p[Y]]),F(f[Y]),te++}return ke!=63&&F(ae),z}function T(U){U=Math.min(Math.max(U,1),100),o!=U&&((function(K){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],M=0;M<64;M++){var H=c((z[M]*K+50)/100);H=Math.min(Math.max(H,1),255),l[_[M]]=H}for(var Y=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ae=0;ae<64;ae++){var oe=c((Y[ae]*K+50)/100);oe=Math.min(Math.max(oe,1),255),u[_[ae]]=oe}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ge=0,he=0;he<8;he++)for(var ke=0;ke<8;ke++)d[ge]=1/(l[_[ge]]*be[he]*be[ke]*8),A[ge]=1/(u[_[ge]]*be[he]*be[ke]*8),ge++})(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),o=U)}this.encode=function(U,K){K&&T(K),b=new Array,v=0,y=7,X(65496),X(65504),X(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),X(1),X(1),G(0),G(0),(function(){X(65499),X(132),G(0);for(var me=0;me<64;me++)G(l[me]);G(1);for(var Be=0;Be<64;Be++)G(u[Be])})(),(function(me,Be){X(65472),X(17),G(8),X(Be),X(me),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)})(U.width,U.height),(function(){X(65476),X(418),G(0);for(var me=0;me<16;me++)G(S[me+1]);for(var Be=0;Be<=11;Be++)G(N[Be]);G(16);for(var Le=0;Le<16;Le++)G(O[Le+1]);for(var ve=0;ve<=161;ve++)G(k[ve]);G(1);for(var $e=0;$e<16;$e++)G(I[$e+1]);for(var je=0;je<=11;je++)G(R[je]);G(17);for(var Pe=0;Pe<16;Pe++)G(Q[Pe+1]);for(var Te=0;Te<=161;Te++)G($[Te])})(),X(65498),X(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var z=0,M=0,H=0;v=0,y=7,this.encode.displayName="_encode_";for(var Y,ae,oe,be,ge,he,ke,Z,te,fe=U.data,we=U.width,Fe=U.height,_e=4*we,Ce=0;Ce<Fe;){for(Y=0;Y<_e;){for(ge=_e*Ce+Y,ke=-1,Z=0,te=0;te<64;te++)he=ge+(Z=te>>3)*_e+(ke=4*(7&te)),Ce+Z>=Fe&&(he-=_e*(Ce+1+Z-Fe)),Y+ke>=_e&&(he-=Y+ke-_e+4),ae=fe[he++],oe=fe[he++],be=fe[he++],w[te]=(E[ae]+E[oe+256|0]+E[be+512|0]>>16)-128,j[te]=(E[ae+768|0]+E[oe+1024|0]+E[be+1280|0]>>16)-128,C[te]=(E[ae+1280|0]+E[oe+1536|0]+E[be+1792|0]>>16)-128;z=q(w,d,z,t,i),M=q(j,A,M,s,a),H=q(C,A,H,s,a),Y+=32}Ce+=8}if(y>=0){var ie=[];ie[1]=y+1,ie[0]=(1<<y+1)-1,F(ie)}return X(65497),new Uint8Array(b)},r=r||50,(function(){for(var U=String.fromCharCode,K=0;K<256;K++)B[K]=U(K)})(),t=L(S,N),s=L(I,R),i=L(O,k),a=L(Q,$),(function(){for(var U=1,K=2,z=1;z<=15;z++){for(var M=U;M<K;M++)p[32767+M]=z,f[32767+M]=[],f[32767+M][1]=z,f[32767+M][0]=M;for(var H=-(K-1);H<=-U;H++)p[32767+H]=z,f[32767+H]=[],f[32767+H][1]=z,f[32767+H][0]=K-1+H;U<<=1,K<<=1}})(),(function(){for(var U=0;U<256;U++)E[U]=19595*U,E[U+256|0]=38470*U,E[U+512|0]=7471*U+32768,E[U+768|0]=-11059*U,E[U+1024|0]=-21709*U,E[U+1280|0]=32768*U+8421375,E[U+1536|0]=-27439*U,E[U+1792|0]=-5329*U})(),T(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function sl(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jS(r){function t(N){if(!N)throw Error("assert :P")}function s(N,O,k){for(var I=0;4>I;I++)if(N[O+I]!=k.charCodeAt(I))return!0;return!1}function i(N,O,k,I,R){for(var Q=0;Q<R;Q++)N[O+Q]=k[I+Q]}function a(N,O,k,I){for(var R=0;R<I;R++)N[O+R]=k}function o(N){return new Int32Array(N)}function c(N,O){for(var k=[],I=0;I<N;I++)k.push(new O);return k}function l(N,O){var k=[];return(function I(R,Q,$){for(var L=$[Q],F=0;F<L&&(R.push($.length>Q+1?[]:new O),!($.length<Q+1));F++)I(R[F],Q+1,$)})(k,0,N),k}var u=function(){var N=this;function O(V,J){for(var le=1<<J-1>>>0;V&le;)le>>>=1;return le?(V&le-1)+le:V}function k(V,J,le,pe,Se){t(!(pe%le));do V[J+(pe-=le)]=Se;while(0<pe)}function I(V,J,le,pe,Se){if(t(2328>=Se),512>=Se)var Oe=o(512);else if((Oe=o(Se))==null)return 0;return(function(Ie,Ue,Me,ze,nt,ft){var Ke,ot,At=Ue,Ot=1<<Me,mt=o(16),Ct=o(16);for(t(nt!=0),t(ze!=null),t(Ie!=null),t(0<Me),ot=0;ot<nt;++ot){if(15<ze[ot])return 0;++mt[ze[ot]]}if(mt[0]==nt)return 0;for(Ct[1]=0,Ke=1;15>Ke;++Ke){if(mt[Ke]>1<<Ke)return 0;Ct[Ke+1]=Ct[Ke]+mt[Ke]}for(ot=0;ot<nt;++ot)Ke=ze[ot],0<ze[ot]&&(ft[Ct[Ke]++]=ot);if(Ct[15]==1)return(ze=new R).g=0,ze.value=ft[0],k(Ie,At,1,Ot,ze),Ot;var kt,Tt=-1,Rt=Ot-1,Or=0,xr=1,on=1,jr=1<<Me;for(ot=0,Ke=1,nt=2;Ke<=Me;++Ke,nt<<=1){if(xr+=on<<=1,0>(on-=mt[Ke]))return 0;for(;0<mt[Ke];--mt[Ke])(ze=new R).g=Ke,ze.value=ft[ot++],k(Ie,At+Or,nt,jr,ze),Or=O(Or,Ke)}for(Ke=Me+1,nt=2;15>=Ke;++Ke,nt<<=1){if(xr+=on<<=1,0>(on-=mt[Ke]))return 0;for(;0<mt[Ke];--mt[Ke]){if(ze=new R,(Or&Rt)!=Tt){for(At+=jr,kt=1<<(Tt=Ke)-Me;15>Tt&&!(0>=(kt-=mt[Tt]));)++Tt,kt<<=1;Ot+=jr=1<<(kt=Tt-Me),Ie[Ue+(Tt=Or&Rt)].g=kt+Me,Ie[Ue+Tt].value=At-Ue-Tt}ze.g=Ke-Me,ze.value=ft[ot++],k(Ie,At+(Or>>Me),nt,jr,ze),Or=O(Or,Ke)}}return xr!=2*Ct[15]-1?0:Ot})(V,J,le,pe,Se,Oe)}function R(){this.value=this.g=0}function Q(){this.value=this.g=0}function $(){this.G=c(5,R),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Xi,Q)}function L(V,J,le,pe){t(V!=null),t(J!=null),t(2147483648>pe),V.Ca=254,V.I=0,V.b=-8,V.Ka=0,V.oa=J,V.pa=le,V.Jd=J,V.Yc=le+pe,V.Zc=4<=pe?le+pe-4+1:le,ae(V)}function F(V,J){for(var le=0;0<J--;)le|=be(V,128)<<J;return le}function G(V,J){var le=F(V,J);return oe(V)?-le:le}function X(V,J,le,pe){var Se,Oe=0;for(t(V!=null),t(J!=null),t(4294967288>pe),V.Sb=pe,V.Ra=0,V.u=0,V.h=0,4<pe&&(pe=4),Se=0;Se<pe;++Se)Oe+=J[le+Se]<<8*Se;V.Ra=Oe,V.bb=pe,V.oa=J,V.pa=le}function q(V){for(;8<=V.u&&V.bb<V.Sb;)V.Ra>>>=8,V.Ra+=V.oa[V.pa+V.bb]<<El-8>>>0,++V.bb,V.u-=8;M(V)&&(V.h=1,V.u=0)}function T(V,J){if(t(0<=J),!V.h&&J<=dd){var le=z(V)&_l[J];return V.u+=J,q(V),le}return V.h=1,V.u=0}function U(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(V){return V.Ra>>>(V.u&El-1)>>>0}function M(V){return t(V.bb<=V.Sb),V.h||V.bb==V.Sb&&V.u>El}function H(V,J){V.u=J,V.h=M(V)}function Y(V){V.u>=Bs&&(t(V.u>=Bs),q(V))}function ae(V){t(V!=null&&V.oa!=null),V.pa<V.Zc?(V.I=(V.oa[V.pa++]|V.I<<8)>>>0,V.b+=8):(t(V!=null&&V.oa!=null),V.pa<V.Yc?(V.b+=8,V.I=V.oa[V.pa++]|V.I<<8):V.Ka?V.b=0:(V.I<<=8,V.b+=8,V.Ka=1))}function oe(V){return F(V,1)}function be(V,J){var le=V.Ca;0>V.b&&ae(V);var pe=V.b,Se=le*J>>>8,Oe=(V.I>>>pe>Se)+0;for(Oe?(le-=Se,V.I-=Se+1<<pe>>>0):le=Se+1,pe=le,Se=0;256<=pe;)Se+=8,pe>>=8;return pe=7^Se+pA[pe],V.b-=pe,V.Ca=(le<<pe)-1,Oe}function ge(V,J,le){V[J+0]=le>>24&255,V[J+1]=le>>16&255,V[J+2]=le>>8&255,V[J+3]=255&le}function he(V,J){return V[J+0]|V[J+1]<<8}function ke(V,J){return he(V,J)|V[J+2]<<16}function Z(V,J){return he(V,J)|he(V,J+2)<<16}function te(V,J){var le=1<<J;return t(V!=null),t(0<J),V.X=o(le),V.X==null?0:(V.Mb=32-J,V.Xa=J,1)}function fe(V,J){t(V!=null),t(J!=null),t(V.Xa==J.Xa),i(J.X,0,V.X,0,1<<J.Xa)}function we(){this.X=[],this.Xa=this.Mb=0}function Fe(V,J,le,pe){t(le!=null),t(pe!=null);var Se=le[0],Oe=pe[0];return Se==0&&(Se=(V*Oe+J/2)/J),Oe==0&&(Oe=(J*Se+V/2)/V),0>=Se||0>=Oe?0:(le[0]=Se,pe[0]=Oe,1)}function _e(V,J){return V+(1<<J)-1>>>J}function Ce(V,J){return((4278255360&V)+(4278255360&J)>>>0&4278255360)+((16711935&V)+(16711935&J)>>>0&16711935)>>>0}function ie(V,J){N[J]=function(le,pe,Se,Oe,Ie,Ue,Me){var ze;for(ze=0;ze<Ie;++ze){var nt=N[V](Ue[Me+ze-1],Se,Oe+ze);Ue[Me+ze]=Ce(le[pe+ze],nt)}}}function me(){this.ud=this.hd=this.jd=0}function Be(V,J){return((4278124286&(V^J))>>>1)+(V&J)>>>0}function Le(V){return 0<=V&&256>V?V:0>V?0:255<V?255:void 0}function ve(V,J){return Le(V+(V-J+.5>>1))}function $e(V,J,le){return Math.abs(J-le)-Math.abs(V-le)}function je(V,J,le,pe,Se,Oe,Ie){for(pe=Oe[Ie-1],le=0;le<Se;++le)Oe[Ie+le]=pe=Ce(V[J+le],pe)}function Pe(V,J,le,pe,Se){var Oe;for(Oe=0;Oe<le;++Oe){var Ie=V[J+Oe],Ue=Ie>>8&255,Me=16711935&(Me=(Me=16711935&Ie)+((Ue<<16)+Ue));pe[Se+Oe]=(4278255360&Ie)+Me>>>0}}function Te(V,J){J.jd=255&V,J.hd=V>>8&255,J.ud=V>>16&255}function Ye(V,J,le,pe,Se,Oe){var Ie;for(Ie=0;Ie<pe;++Ie){var Ue=J[le+Ie],Me=Ue>>>8,ze=Ue,nt=255&(nt=(nt=Ue>>>16)+((V.jd<<24>>24)*(Me<<24>>24)>>>5));ze=255&(ze=(ze+=(V.hd<<24>>24)*(Me<<24>>24)>>>5)+((V.ud<<24>>24)*(nt<<24>>24)>>>5)),Se[Oe+Ie]=(4278255360&Ue)+(nt<<16)+ze}}function He(V,J,le,pe,Se){N[J]=function(Oe,Ie,Ue,Me,ze,nt,ft,Ke,ot){for(Me=ft;Me<Ke;++Me)for(ft=0;ft<ot;++ft)ze[nt++]=Se(Ue[pe(Oe[Ie++])])},N[V]=function(Oe,Ie,Ue,Me,ze,nt,ft){var Ke=8>>Oe.b,ot=Oe.Ea,At=Oe.K[0],Ot=Oe.w;if(8>Ke)for(Oe=(1<<Oe.b)-1,Ot=(1<<Ke)-1;Ie<Ue;++Ie){var mt,Ct=0;for(mt=0;mt<ot;++mt)mt&Oe||(Ct=pe(Me[ze++])),nt[ft++]=Se(At[Ct&Ot]),Ct>>=Ke}else N["VP8LMapColor"+le](Me,ze,At,Ot,nt,ft,Ie,Ue,ot)}}function it(V,J,le,pe,Se){for(le=J+le;J<le;){var Oe=V[J++];pe[Se++]=Oe>>16&255,pe[Se++]=Oe>>8&255,pe[Se++]=255&Oe}}function It(V,J,le,pe,Se){for(le=J+le;J<le;){var Oe=V[J++];pe[Se++]=Oe>>16&255,pe[Se++]=Oe>>8&255,pe[Se++]=255&Oe,pe[Se++]=Oe>>24&255}}function dt(V,J,le,pe,Se){for(le=J+le;J<le;){var Oe=(Ie=V[J++])>>16&240|Ie>>12&15,Ie=240&Ie|Ie>>28&15;pe[Se++]=Oe,pe[Se++]=Ie}}function Pt(V,J,le,pe,Se){for(le=J+le;J<le;){var Oe=(Ie=V[J++])>>16&248|Ie>>13&7,Ie=Ie>>5&224|Ie>>3&31;pe[Se++]=Oe,pe[Se++]=Ie}}function vt(V,J,le,pe,Se){for(le=J+le;J<le;){var Oe=V[J++];pe[Se++]=255&Oe,pe[Se++]=Oe>>8&255,pe[Se++]=Oe>>16&255}}function tr(V,J,le,pe,Se,Oe){if(Oe==0)for(le=J+le;J<le;)ge(pe,((Oe=V[J++])[0]>>24|Oe[1]>>8&65280|Oe[2]<<8&16711680|Oe[3]<<24)>>>0),Se+=32;else i(pe,Se,V,J,le)}function Jt(V,J){N[J][0]=N[V+"0"],N[J][1]=N[V+"1"],N[J][2]=N[V+"2"],N[J][3]=N[V+"3"],N[J][4]=N[V+"4"],N[J][5]=N[V+"5"],N[J][6]=N[V+"6"],N[J][7]=N[V+"7"],N[J][8]=N[V+"8"],N[J][9]=N[V+"9"],N[J][10]=N[V+"10"],N[J][11]=N[V+"11"],N[J][12]=N[V+"12"],N[J][13]=N[V+"13"],N[J][14]=N[V+"0"],N[J][15]=N[V+"0"]}function Et(V){return V==ru||V==mc||V==md||V==gd}function ur(){this.eb=[],this.size=this.A=this.fb=0}function vr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ur,this.f.kb=new vr,this.sd=null}function Gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function at(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function rn(V){return alert("todo:WebPSamplerProcessPlane"),V.T}function dr(V,J){var le=V.T,pe=J.ba.f.RGBA,Se=pe.eb,Oe=pe.fb+V.ka*pe.A,Ie=Aa[J.ba.S],Ue=V.y,Me=V.O,ze=V.f,nt=V.N,ft=V.ea,Ke=V.W,ot=J.cc,At=J.dc,Ot=J.Mc,mt=J.Nc,Ct=V.ka,kt=V.ka+V.T,Tt=V.U,Rt=Tt+1>>1;for(Ct==0?Ie(Ue,Me,null,null,ze,nt,ft,Ke,ze,nt,ft,Ke,Se,Oe,null,null,Tt):(Ie(J.ec,J.fc,Ue,Me,ot,At,Ot,mt,ze,nt,ft,Ke,Se,Oe-pe.A,Se,Oe,Tt),++le);Ct+2<kt;Ct+=2)ot=ze,At=nt,Ot=ft,mt=Ke,nt+=V.Rc,Ke+=V.Rc,Oe+=2*pe.A,Ie(Ue,(Me+=2*V.fa)-V.fa,Ue,Me,ot,At,Ot,mt,ze,nt,ft,Ke,Se,Oe-pe.A,Se,Oe,Tt);return Me+=V.fa,V.j+kt<V.o?(i(J.ec,J.fc,Ue,Me,Tt),i(J.cc,J.dc,ze,nt,Rt),i(J.Mc,J.Nc,ft,Ke,Rt),le--):1&kt||Ie(Ue,Me,null,null,ze,nt,ft,Ke,ze,nt,ft,Ke,Se,Oe+pe.A,null,null,Tt),le}function et(V,J,le){var pe=V.F,Se=[V.J];if(pe!=null){var Oe=V.U,Ie=J.ba.S,Ue=Ie==pd||Ie==md;J=J.ba.f.RGBA;var Me=[0],ze=V.ka;Me[0]=V.T,V.Kb&&(ze==0?--Me[0]:(--ze,Se[0]-=V.width),V.j+V.ka+V.T==V.o&&(Me[0]=V.o-V.j-ze));var nt=J.eb;ze=J.fb+ze*J.A,V=hd(pe,Se[0],V.width,Oe,Me,nt,ze+(Ue?0:3),J.A),t(le==Me),V&&Et(Ie)&&pc(nt,ze,Ue,Oe,Me,J.A)}return 0}function an(V){var J=V.ma,le=J.ba.S,pe=11>le,Se=le==Il||le==fd||le==pd||le==es||le==12||Et(le);if(J.memory=null,J.Ib=null,J.Jb=null,J.Nd=null,!qi(J.Oa,V,Se?11:12))return 0;if(Se&&Et(le)&&ld(),V.da)alert("todo:use_scaling");else{if(pe){if(J.Ib=rn,V.Kb){if(le=V.U+1>>1,J.memory=o(V.U+2*le),J.memory==null)return 0;J.ec=J.memory,J.fc=0,J.cc=J.ec,J.dc=J.fc+V.U,J.Mc=J.cc,J.Nc=J.dc+le,J.Ib=dr,ld()}}else alert("todo:EmitYUV");Se&&(J.Jb=et,pe&&Ho())}if(pe&&!Ei){for(V=0;256>V;++V)ha[V]=89858*(V-128)+ro>>qo,fa[V]=-22014*(V-128)+ro,au[V]=-45773*(V-128),bc[V]=113618*(V-128)+ro>>qo;for(V=qn;V<Xn;++V)J=76283*(V-16)+ro>>qo,jA[V-qn]=ai(J,255),am[V-qn]=ai(J+8>>4,15);Ei=1}return 1}function gr(V){var J=V.ma,le=V.U,pe=V.T;return t(!(1&V.ka)),0>=le||0>=pe?0:(le=J.Ib(V,J),J.Jb!=null&&J.Jb(V,J,le),J.Dc+=le,1)}function In(V){V.ma.memory=null}function ln(V,J,le,pe){return T(V,8)!=47?0:(J[0]=T(V,14)+1,le[0]=T(V,14)+1,pe[0]=T(V,1),T(V,3)!=0?0:!V.h)}function gn(V,J){if(4>V)return V+1;var le=V-2>>1;return(2+(1&V)<<le)+T(J,le)+1}function Yn(V,J){return 120<J?J-120:1<=(le=((le=Qy[J-1])>>4)*V+(8-(15&le)))?le:1;var le}function Gr(V,J,le){var pe=z(le),Se=V[J+=255&pe].g-8;return 0<Se&&(H(le,le.u+8),pe=z(le),J+=V[J].value,J+=pe&(1<<Se)-1),H(le,le.u+V[J].g),V[J].value}function Sn(V,J,le){return le.g+=V.g,le.value+=V.value<<J>>>0,t(8>=le.g),V.g}function ce(V,J,le){var pe=V.xc;return t((J=pe==0?0:V.vc[V.md*(le>>pe)+(J>>pe)])<V.Wb),V.Ya[J]}function Ne(V,J,le,pe){var Se=V.ab,Oe=V.c*J,Ie=V.C;J=Ie+J;var Ue=le,Me=pe;for(pe=V.Ta,le=V.Ua;0<Se--;){var ze=V.gc[Se],nt=Ie,ft=J,Ke=Ue,ot=Me,At=(Me=pe,Ue=le,ze.Ea);switch(t(nt<ft),t(ft<=ze.nc),ze.hc){case 2:Yc(Ke,ot,(ft-nt)*At,Me,Ue);break;case 0:var Ot=nt,mt=ft,Ct=Me,kt=Ue,Tt=(jr=ze).Ea;Ot==0&&(la(Ke,ot,null,null,1,Ct,kt),je(Ke,ot+1,0,0,Tt-1,Ct,kt+1),ot+=Tt,kt+=Tt,++Ot);for(var Rt=1<<jr.b,Or=Rt-1,xr=_e(Tt,jr.b),on=jr.K,jr=jr.w+(Ot>>jr.b)*xr;Ot<mt;){var _n=on,ks=jr,un=1;for(ca(Ke,ot,Ct,kt-Tt,1,Ct,kt);un<Tt;){var br=(un&~Or)+Rt;br>Tt&&(br=Tt),(0,Wo[_n[ks++]>>8&15])(Ke,ot+ +un,Ct,kt+un-Tt,br-un,Ct,kt+un),un=br}ot+=Tt,kt+=Tt,++Ot&Or||(jr+=xr)}ft!=ze.nc&&i(Me,Ue-At,Me,Ue+(ft-nt-1)*At,At);break;case 1:for(At=Ke,mt=ot,Tt=(Ke=ze.Ea)-(kt=Ke&~(Ct=(ot=1<<ze.b)-1)),Ot=_e(Ke,ze.b),Rt=ze.K,ze=ze.w+(nt>>ze.b)*Ot;nt<ft;){for(Or=Rt,xr=ze,on=new me,jr=mt+kt,_n=mt+Ke;mt<jr;)Te(Or[xr++],on),bo(on,At,mt,ot,Me,Ue),mt+=ot,Ue+=ot;mt<_n&&(Te(Or[xr++],on),bo(on,At,mt,Tt,Me,Ue),mt+=Tt,Ue+=Tt),++nt&Ct||(ze+=Ot)}break;case 3:if(Ke==Me&&ot==Ue&&0<ze.b){for(mt=Me,Ke=At=Ue+(ft-nt)*At-(kt=(ft-nt)*_e(ze.Ea,ze.b)),ot=Me,Ct=Ue,Ot=[],kt=(Tt=kt)-1;0<=kt;--kt)Ot[kt]=ot[Ct+kt];for(kt=Tt-1;0<=kt;--kt)mt[Ke+kt]=Ot[kt];Ol(ze,nt,ft,Me,At,Me,Ue)}else Ol(ze,nt,ft,Ke,ot,Me,Ue)}Ue=pe,Me=le}Me!=le&&i(pe,le,Ue,Me,Oe)}function Re(V,J){var le=V.V,pe=V.Ba+V.c*V.C,Se=J-V.C;if(t(J<=V.l.o),t(16>=Se),0<Se){var Oe=V.l,Ie=V.Ta,Ue=V.Ua,Me=Oe.width;if(Ne(V,Se,le,pe),Se=Ue=[Ue],t((le=V.C)<(pe=J)),t(Oe.v<Oe.va),pe>Oe.o&&(pe=Oe.o),le<Oe.j){var ze=Oe.j-le;le=Oe.j,Se[0]+=ze*Me}if(le>=pe?le=0:(Se[0]+=4*Oe.v,Oe.ka=le-Oe.j,Oe.U=Oe.va-Oe.v,Oe.T=pe-le,le=1),le){if(Ue=Ue[0],11>(le=V.ca).S){var nt=le.f.RGBA,ft=(pe=le.S,Se=Oe.U,Oe=Oe.T,ze=nt.eb,nt.A),Ke=Oe;for(nt=nt.fb+V.Ma*nt.A;0<Ke--;){var ot=Ie,At=Ue,Ot=Se,mt=ze,Ct=nt;switch(pe){case xA:Jc(ot,At,Ot,mt,Ct);break;case Il:ua(ot,At,Ot,mt,Ct);break;case ru:ua(ot,At,Ot,mt,Ct),pc(mt,Ct,0,Ot,1,0);break;case tm:os(ot,At,Ot,mt,Ct);break;case fd:tr(ot,At,Ot,mt,Ct,1);break;case mc:tr(ot,At,Ot,mt,Ct,1),pc(mt,Ct,0,Ot,1,0);break;case pd:tr(ot,At,Ot,mt,Ct,0);break;case md:tr(ot,At,Ot,mt,Ct,0),pc(mt,Ct,1,Ot,1,0);break;case es:vo(ot,At,Ot,mt,Ct);break;case gd:vo(ot,At,Ot,mt,Ct),Kh(mt,Ct,Ot,1,0);break;case bA:as(ot,At,Ot,mt,Ct);break;default:t(0)}Ue+=Me,nt+=ft}V.Ma+=Oe}else alert("todo:EmitRescaledRowsYUVA");t(V.Ma<=le.height)}}V.C=J,t(V.C<=V.i)}function Ve(V){var J;if(0<V.ua)return 0;for(J=0;J<V.Wb;++J){var le=V.Ya[J].G,pe=V.Ya[J].H;if(0<le[1][pe[1]+0].g||0<le[2][pe[2]+0].g||0<le[3][pe[3]+0].g)return 0}return 1}function ye(V,J,le,pe,Se,Oe){if(V.Z!=0){var Ie=V.qd,Ue=V.rd;for(t(Ui[V.Z]!=null);J<le;++J)Ui[V.Z](Ie,Ue,pe,Se,pe,Se,Oe),Ie=pe,Ue=Se,Se+=Oe;V.qd=Ie,V.rd=Ue}}function De(V,J){var le=V.l.ma,pe=le.Z==0||le.Z==1?V.l.j:V.C;if(pe=V.C<pe?pe:V.C,t(J<=V.l.o),J>pe){var Se=V.l.width,Oe=le.ca,Ie=le.tb+Se*pe,Ue=V.V,Me=V.Ba+V.c*pe,ze=V.gc;t(V.ab==1),t(ze[0].hc==3),Ac(ze[0],pe,J,Ue,Me,Oe,Ie),ye(le,pe,J,Oe,Ie,Se)}V.C=V.Ma=J}function qe(V,J,le,pe,Se,Oe,Ie){var Ue=V.$/pe,Me=V.$%pe,ze=V.m,nt=V.s,ft=le+V.$,Ke=ft;Se=le+pe*Se;var ot=le+pe*Oe,At=280+nt.ua,Ot=V.Pb?Ue:16777216,mt=0<nt.ua?nt.Wa:null,Ct=nt.wc,kt=ft<ot?ce(nt,Me,Ue):null;t(V.C<Oe),t(ot<=Se);var Tt=!1;e:for(;;){for(;Tt||ft<ot;){var Rt=0;if(Ue>=Ot){var Or=ft-le;t((Ot=V).Pb),Ot.wd=Ot.m,Ot.xd=Or,0<Ot.s.ua&&fe(Ot.s.Wa,Ot.s.vb),Ot=Ue+wA}if(Me&Ct||(kt=ce(nt,Me,Ue)),t(kt!=null),kt.Qb&&(J[ft]=kt.qb,Tt=!0),!Tt)if(Y(ze),kt.jc){Rt=ze,Or=J;var xr=ft,on=kt.pd[z(Rt)&Xi-1];t(kt.jc),256>on.g?(H(Rt,Rt.u+on.g),Or[xr]=on.value,Rt=0):(H(Rt,Rt.u+on.g-256),t(256<=on.value),Rt=on.value),Rt==0&&(Tt=!0)}else Rt=Gr(kt.G[0],kt.H[0],ze);if(ze.h)break;if(Tt||256>Rt){if(!Tt)if(kt.nd)J[ft]=(kt.qb|Rt<<8)>>>0;else{if(Y(ze),Tt=Gr(kt.G[1],kt.H[1],ze),Y(ze),Or=Gr(kt.G[2],kt.H[2],ze),xr=Gr(kt.G[3],kt.H[3],ze),ze.h)break;J[ft]=(xr<<24|Tt<<16|Rt<<8|Or)>>>0}if(Tt=!1,++ft,++Me>=pe&&(Me=0,++Ue,Ie!=null&&Ue<=Oe&&!(Ue%16)&&Ie(V,Ue),mt!=null))for(;Ke<ft;)Rt=J[Ke++],mt.X[(506832829*Rt&4294967295)>>>mt.Mb]=Rt}else if(280>Rt){if(Rt=gn(Rt-256,ze),Or=Gr(kt.G[4],kt.H[4],ze),Y(ze),Or=Yn(pe,Or=gn(Or,ze)),ze.h)break;if(ft-le<Or||Se-ft<Rt)break e;for(xr=0;xr<Rt;++xr)J[ft+xr]=J[ft+xr-Or];for(ft+=Rt,Me+=Rt;Me>=pe;)Me-=pe,++Ue,Ie!=null&&Ue<=Oe&&!(Ue%16)&&Ie(V,Ue);if(t(ft<=Se),Me&Ct&&(kt=ce(nt,Me,Ue)),mt!=null)for(;Ke<ft;)Rt=J[Ke++],mt.X[(506832829*Rt&4294967295)>>>mt.Mb]=Rt}else{if(!(Rt<At))break e;for(Tt=Rt-280,t(mt!=null);Ke<ft;)Rt=J[Ke++],mt.X[(506832829*Rt&4294967295)>>>mt.Mb]=Rt;Rt=ft,t(!(Tt>>>(Or=mt).Xa)),J[Rt]=Or.X[Tt],Tt=!0}Tt||t(ze.h==M(ze))}if(V.Pb&&ze.h&&ft<Se)t(V.m.h),V.a=5,V.m=V.wd,V.$=V.xd,0<V.s.ua&&fe(V.s.vb,V.s.Wa);else{if(ze.h)break e;Ie?.(V,Ue>Oe?Oe:Ue),V.a=0,V.$=ft-le}return 1}return V.a=3,0}function Ze(V){t(V!=null),V.vc=null,V.yc=null,V.Ya=null;var J=V.Wa;J!=null&&(J.X=null),V.vb=null,t(V!=null)}function ht(){var V=new Ht;return V==null?null:(V.a=0,V.xb=su,Jt("Predictor","VP8LPredictors"),Jt("Predictor","VP8LPredictors_C"),Jt("PredictorAdd","VP8LPredictorsAdd"),Jt("PredictorAdd","VP8LPredictorsAdd_C"),Yc=Pe,bo=Ye,Jc=it,ua=It,vo=dt,as=Pt,os=vt,N.VP8LMapColor32b=Xc,N.VP8LMapColor8b=Go,V)}function ct(V,J,le,pe,Se){var Oe=1,Ie=[V],Ue=[J],Me=pe.m,ze=pe.s,nt=null,ft=0;e:for(;;){if(le)for(;Oe&&T(Me,1);){var Ke=Ie,ot=Ue,At=pe,Ot=1,mt=At.m,Ct=At.gc[At.ab],kt=T(mt,2);if(At.Oc&1<<kt)Oe=0;else{switch(At.Oc|=1<<kt,Ct.hc=kt,Ct.Ea=Ke[0],Ct.nc=ot[0],Ct.K=[null],++At.ab,t(4>=At.ab),kt){case 0:case 1:Ct.b=T(mt,3)+2,Ot=ct(_e(Ct.Ea,Ct.b),_e(Ct.nc,Ct.b),0,At,Ct.K),Ct.K=Ct.K[0];break;case 3:var Tt,Rt=T(mt,8)+1,Or=16<Rt?0:4<Rt?1:2<Rt?2:3;if(Ke[0]=_e(Ct.Ea,Or),Ct.b=Or,Tt=Ot=ct(Rt,1,0,At,Ct.K)){var xr,on=Rt,jr=Ct,_n=1<<(8>>jr.b),ks=o(_n);if(ks==null)Tt=0;else{var un=jr.K[0],br=jr.w;for(ks[0]=jr.K[0][0],xr=1;xr<1*on;++xr)ks[xr]=Ce(un[br+xr],ks[xr-1]);for(;xr<4*_n;++xr)ks[xr]=0;jr.K[0]=null,jr.K[0]=ks,Tt=1}}Ot=Tt;break;case 2:break;default:t(0)}Oe=Ot}}if(Ie=Ie[0],Ue=Ue[0],Oe&&T(Me,1)&&!(Oe=1<=(ft=T(Me,4))&&11>=ft)){pe.a=3;break e}var ar;if(ar=Oe)t:{var Rs,qr,Nn,ls=pe,vi=Ie,Ws=Ue,Ns=ft,li=le,wi=ls.m,xs=ls.s,On=[null],Rn=1,bs=0,Qn=nm[Ns];r:for(;;){if(li&&T(wi,1)){var _s=T(wi,3)+2,Es=_e(vi,_s),ts=_e(Ws,_s),Li=Es*ts;if(!ct(Es,ts,0,ls,On))break r;for(On=On[0],xs.xc=_s,Rs=0;Rs<Li;++Rs){var Jn=On[Rs]>>8&65535;On[Rs]=Jn,Jn>=Rn&&(Rn=Jn+1)}}if(wi.h)break r;for(qr=0;5>qr;++qr){var rs=gc[qr];!qr&&0<Ns&&(rs+=1<<Ns),bs<rs&&(bs=rs)}var qs=c(Rn*Qn,R),Oi=Rn,pa=c(Oi,$);if(pa==null)var Qs=null;else t(65536>=Oi),Qs=pa;var $s=o(bs);if(Qs==null||$s==null||qs==null){ls.a=1;break r}var Di=qs;for(Rs=Nn=0;Rs<Rn;++Rs){var ns=Qs[Rs],Mi=ns.G,Va=ns.H,no=0,ji=1,Hs=0;for(qr=0;5>qr;++qr){rs=gc[qr],Mi[qr]=Di,Va[qr]=Nn,!qr&&0<Ns&&(rs+=1<<Ns);s:{var Fl,Xo=rs,ou=ls,So=$s,lm=Di,sf=Nn,As=0,so=ou.m,af=T(so,1);if(a(So,0,0,Xo),af){var of=T(so,1)+1,NA=T(so,1),SA=T(so,NA==0?1:8);So[SA]=1,of==2&&(So[SA=T(so,8)]=1);var Co=1}else{var vs=o(19),Ys=T(so,4)+4;if(19<Ys){ou.a=3;var Vs=0;break s}for(Fl=0;Fl<Ys;++Fl)vs[Ry[Fl]]=T(so,3);var lu=void 0,Jo=void 0,cu=ou,Ky=vs,ci=Xo,CA=So,wd=0,Bo=cu.m,io=8,Ba=c(128,R);n:for(;I(Ba,0,7,Ky,19);){if(T(Bo,1)){var jd=2+2*T(Bo,3);if((lu=2+T(Bo,jd))>ci)break n}else lu=ci;for(Jo=0;Jo<ci&&lu--;){Y(Bo);var BA=Ba[0+(127&z(Bo))];H(Bo,Bo.u+BA.g);var Ul=BA.value;if(16>Ul)CA[Jo++]=Ul,Ul!=0&&(io=Ul);else{var cm=Ul==16,lf=Ul-16,um=vA[lf],cf=T(Bo,yd[lf])+um;if(Jo+cf>ci)break n;for(var dm=cm?io:0;0<cf--;)CA[Jo++]=dm}}wd=1;break n}wd||(cu.a=3),Co=wd}(Co=Co&&!so.h)&&(As=I(lm,sf,8,So,Xo)),Co&&As!=0?Vs=As:(ou.a=3,Vs=0)}if(Vs==0)break r;if(ji&&rm[qr]==1&&(ji=Di[Nn].g==0),no+=Di[Nn].g,Nn+=Vs,3>=qr){var uu,kA=$s[0];for(uu=1;uu<rs;++uu)$s[uu]>kA&&(kA=$s[uu]);Hs+=kA}}if(ns.nd=ji,ns.Qb=0,ji&&(ns.qb=(Mi[3][Va[3]+0].value<<24|Mi[1][Va[1]+0].value<<16|Mi[2][Va[2]+0].value)>>>0,no==0&&256>Mi[0][Va[0]+0].value&&(ns.Qb=1,ns.qb+=Mi[0][Va[0]+0].value<<8)),ns.jc=!ns.Qb&&6>Hs,ns.jc){var Nd,ka=ns;for(Nd=0;Nd<Xi;++Nd){var Zo=Nd,ao=ka.pd[Zo],wc=ka.G[0][ka.H[0]+Zo];256<=wc.value?(ao.g=wc.g+256,ao.value=wc.value):(ao.g=0,ao.value=0,Zo>>=Sn(wc,8,ao),Zo>>=Sn(ka.G[1][ka.H[1]+Zo],16,ao),Zo>>=Sn(ka.G[2][ka.H[2]+Zo],0,ao),Sn(ka.G[3][ka.H[3]+Zo],24,ao))}}}xs.vc=On,xs.Wb=Rn,xs.Ya=Qs,xs.yc=qs,ar=1;break t}ar=0}if(!(Oe=ar)){pe.a=3;break e}if(0<ft){if(ze.ua=1<<ft,!te(ze.Wa,ft)){pe.a=1,Oe=0;break e}}else ze.ua=0;var _A=pe,EA=Ie,Am=Ue,OA=_A.s,IA=OA.xc;if(_A.c=EA,_A.i=Am,OA.md=_e(EA,IA),OA.wc=IA==0?-1:(1<<IA)-1,le){pe.xb=No;break e}if((nt=o(Ie*Ue))==null){pe.a=1,Oe=0;break e}Oe=(Oe=qe(pe,nt,0,Ie,Ue,Ue,null))&&!Me.h;break e}return Oe?(Se!=null?Se[0]=nt:(t(nt==null),t(le)),pe.$=0,le||Ze(ze)):Ze(ze),Oe}function gt(V,J){var le=V.c*V.i,pe=le+J+16*J;return t(V.c<=J),V.V=o(pe),V.V==null?(V.Ta=null,V.Ua=0,V.a=1,0):(V.Ta=V.V,V.Ua=V.Ba+le+J,1)}function ut(V,J){var le=V.C,pe=J-le,Se=V.V,Oe=V.Ba+V.c*le;for(t(J<=V.l.o);0<pe;){var Ie=16<pe?16:pe,Ue=V.l.ma,Me=V.l.width,ze=Me*Ie,nt=Ue.ca,ft=Ue.tb+Me*le,Ke=V.Ta,ot=V.Ua;Ne(V,Ie,Se,Oe),Gh(Ke,ot,nt,ft,ze),ye(Ue,le,le+Ie,nt,ft,Me),pe-=Ie,Se+=Ie*V.c,le+=Ie}t(le==J),V.C=V.Ma=J}function Ut(){this.ub=this.yd=this.td=this.Rb=0}function $t(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Yt(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Vt(){this.Yb=(function(){var V=[];return(function J(le,pe,Se){for(var Oe=Se[pe],Ie=0;Ie<Oe&&(le.push(Se.length>pe+1?[]:0),!(Se.length<pe+1));Ie++)J(le[Ie],pe+1,Se)})(V,0,[3,11]),V})()}function or(){this.jb=o(3),this.Wc=l([4,8],Vt),this.Xc=l([4,17],Vt)}function cr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Fr(){this.ld=this.La=this.dd=this.tc=0}function yn(){this.Na=this.la=0}function Lr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xn(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Zr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fr),this.Y=0,this.ya=Array(new xn),this.aa=0,this.l=new hn}function kr(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Hr(){this.cb=this.a=0,this.sc="",this.m=new U,this.Od=new Ut,this.Kc=new $t,this.ed=new cr,this.Qa=new Yt,this.Ic=this.$c=this.Aa=0,this.D=new Zr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,U),this.ia=0,this.pb=c(4,Lr),this.Pa=new or,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new kr),this.Hd=0,this.rb=Array(new yn),this.sb=0,this.wa=Array(new Fr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xn),this.L=this.aa=0,this.gd=l([4,2],Fr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function hn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Hn(){var V=new Hr;return V!=null&&(V.a=0,V.sc="OK",V.cb=0,V.Xb=0,yc||(yc=Er)),V}function pr(V,J,le){return V.a==0&&(V.a=J,V.sc=le,V.cb=0),0}function bn(V,J,le){return 3<=le&&V[J+0]==157&&V[J+1]==1&&V[J+2]==42}function Qt(V,J){if(V==null)return 0;if(V.a=0,V.sc="OK",J==null)return pr(V,2,"null VP8Io passed to VP8GetHeaders()");var le=J.data,pe=J.w,Se=J.ha;if(4>Se)return pr(V,7,"Truncated header.");var Oe=le[pe+0]|le[pe+1]<<8|le[pe+2]<<16,Ie=V.Od;if(Ie.Rb=!(1&Oe),Ie.td=Oe>>1&7,Ie.yd=Oe>>4&1,Ie.ub=Oe>>5,3<Ie.td)return pr(V,3,"Incorrect keyframe parameters.");if(!Ie.yd)return pr(V,4,"Frame not displayable.");pe+=3,Se-=3;var Ue=V.Kc;if(Ie.Rb){if(7>Se)return pr(V,7,"cannot parse picture header");if(!bn(le,pe,Se))return pr(V,3,"Bad code word");Ue.c=16383&(le[pe+4]<<8|le[pe+3]),Ue.Td=le[pe+4]>>6,Ue.i=16383&(le[pe+6]<<8|le[pe+5]),Ue.Ud=le[pe+6]>>6,pe+=7,Se-=7,V.za=Ue.c+15>>4,V.Ub=Ue.i+15>>4,J.width=Ue.c,J.height=Ue.i,J.Da=0,J.j=0,J.v=0,J.va=J.width,J.o=J.height,J.da=0,J.ib=J.width,J.hb=J.height,J.U=J.width,J.T=J.height,a((Oe=V.Pa).jb,0,255,Oe.jb.length),t((Oe=V.Qa)!=null),Oe.Cb=0,Oe.Bb=0,Oe.Fb=1,a(Oe.Zb,0,0,Oe.Zb.length),a(Oe.Lb,0,0,Oe.Lb)}if(Ie.ub>Se)return pr(V,7,"bad partition length");L(Oe=V.m,le,pe,Ie.ub),pe+=Ie.ub,Se-=Ie.ub,Ie.Rb&&(Ue.Ld=oe(Oe),Ue.Kd=oe(Oe)),Ue=V.Qa;var Me,ze=V.Pa;if(t(Oe!=null),t(Ue!=null),Ue.Cb=oe(Oe),Ue.Cb){if(Ue.Bb=oe(Oe),oe(Oe)){for(Ue.Fb=oe(Oe),Me=0;4>Me;++Me)Ue.Zb[Me]=oe(Oe)?G(Oe,7):0;for(Me=0;4>Me;++Me)Ue.Lb[Me]=oe(Oe)?G(Oe,6):0}if(Ue.Bb)for(Me=0;3>Me;++Me)ze.jb[Me]=oe(Oe)?F(Oe,8):255}else Ue.Bb=0;if(Oe.Ka)return pr(V,3,"cannot parse segment header");if((Ue=V.ed).zd=oe(Oe),Ue.Tb=F(Oe,6),Ue.wb=F(Oe,3),Ue.Pc=oe(Oe),Ue.Pc&&oe(Oe)){for(ze=0;4>ze;++ze)oe(Oe)&&(Ue.vd[ze]=G(Oe,6));for(ze=0;4>ze;++ze)oe(Oe)&&(Ue.od[ze]=G(Oe,6))}if(V.L=Ue.Tb==0?0:Ue.zd?1:2,Oe.Ka)return pr(V,3,"cannot parse filter header");var nt=Se;if(Se=Me=pe,pe=Me+nt,Ue=nt,V.Xb=(1<<F(V.m,2))-1,nt<3*(ze=V.Xb))le=7;else{for(Me+=3*ze,Ue-=3*ze,nt=0;nt<ze;++nt){var ft=le[Se+0]|le[Se+1]<<8|le[Se+2]<<16;ft>Ue&&(ft=Ue),L(V.Jc[+nt],le,Me,ft),Me+=ft,Ue-=ft,Se+=3}L(V.Jc[+ze],le,Me,Ue),le=Me<pe?0:5}if(le!=0)return pr(V,le,"cannot parse partitions");for(le=F(Me=V.m,7),Se=oe(Me)?G(Me,4):0,pe=oe(Me)?G(Me,4):0,Ue=oe(Me)?G(Me,4):0,ze=oe(Me)?G(Me,4):0,Me=oe(Me)?G(Me,4):0,nt=V.Qa,ft=0;4>ft;++ft){if(nt.Cb){var Ke=nt.Zb[ft];nt.Fb||(Ke+=le)}else{if(0<ft){V.pb[ft]=V.pb[0];continue}Ke=le}var ot=V.pb[ft];ot.Sc[0]=nu[ai(Ke+Se,127)],ot.Sc[1]=xd[ai(Ke+0,127)],ot.Eb[0]=2*nu[ai(Ke+pe,127)],ot.Eb[1]=101581*xd[ai(Ke+Ue,127)]>>16,8>ot.Eb[1]&&(ot.Eb[1]=8),ot.Qc[0]=nu[ai(Ke+ze,117)],ot.Qc[1]=xd[ai(Ke+Me,127)],ot.lc=Ke+Me}if(!Ie.Rb)return pr(V,4,"Not a key frame.");for(oe(Oe),Ie=V.Pa,le=0;4>le;++le){for(Se=0;8>Se;++Se)for(pe=0;3>pe;++pe)for(Ue=0;11>Ue;++Ue)ze=be(Oe,Hy[le][Se][pe][Ue])?F(Oe,8):im[le][Se][pe][Ue],Ie.Wc[le][Se].Yb[pe][Ue]=ze;for(Se=0;17>Se;++Se)Ie.Xc[le][Se]=Ie.Wc[le][tf[Se]]}return V.kc=oe(Oe),V.kc&&(V.Bd=F(Oe,8)),V.cb=1}function Er(V,J,le,pe,Se,Oe,Ie){var Ue=J[Se].Yb[le];for(le=0;16>Se;++Se){if(!be(V,Ue[le+0]))return Se;for(;!be(V,Ue[le+1]);)if(Ue=J[++Se].Yb[0],le=0,Se==16)return 16;var Me=J[Se+1].Yb;if(be(V,Ue[le+2])){var ze=V,nt=0;if(be(ze,(Ke=Ue)[(ft=le)+3]))if(be(ze,Ke[ft+6])){for(Ue=0,ft=2*(nt=be(ze,Ke[ft+8]))+(Ke=be(ze,Ke[ft+9+nt])),nt=0,Ke=Zh[ft];Ke[Ue];++Ue)nt+=nt+be(ze,Ke[Ue]);nt+=3+(8<<ft)}else be(ze,Ke[ft+7])?(nt=7+2*be(ze,165),nt+=be(ze,145)):nt=5+be(ze,159);else nt=be(ze,Ke[ft+4])?3+be(ze,Ke[ft+5]):2;Ue=Me[2]}else nt=1,Ue=Me[1];Me=Ie+ef[Se],0>(ze=V).b&&ae(ze);var ft,Ke=ze.b,ot=(ft=ze.Ca>>1)-(ze.I>>Ke)>>31;--ze.b,ze.Ca+=ot,ze.Ca|=1,ze.I-=(ft+1&ot)<<Ke,Oe[Me]=((nt^ot)-ot)*pe[(0<Se)+0]}return 16}function Wr(V){var J=V.rb[V.sb-1];J.la=0,J.Na=0,a(V.zc,0,0,V.zc.length),V.ja=0}function Dr(V,J,le,pe,Se){Se=V[J+le+32*pe]+(Se>>3),V[J+le+32*pe]=-256&Se?0>Se?0:255:Se}function nn(V,J,le,pe,Se,Oe){Dr(V,J,0,le,pe+Se),Dr(V,J,1,le,pe+Oe),Dr(V,J,2,le,pe-Oe),Dr(V,J,3,le,pe-Se)}function fn(V){return(20091*V>>16)+V}function Dn(V,J,le,pe){var Se,Oe=0,Ie=o(16);for(Se=0;4>Se;++Se){var Ue=V[J+0]+V[J+8],Me=V[J+0]-V[J+8],ze=(35468*V[J+4]>>16)-fn(V[J+12]),nt=fn(V[J+4])+(35468*V[J+12]>>16);Ie[Oe+0]=Ue+nt,Ie[Oe+1]=Me+ze,Ie[Oe+2]=Me-ze,Ie[Oe+3]=Ue-nt,Oe+=4,J++}for(Se=Oe=0;4>Se;++Se)Ue=(V=Ie[Oe+0]+4)+Ie[Oe+8],Me=V-Ie[Oe+8],ze=(35468*Ie[Oe+4]>>16)-fn(Ie[Oe+12]),Dr(le,pe,0,0,Ue+(nt=fn(Ie[Oe+4])+(35468*Ie[Oe+12]>>16))),Dr(le,pe,1,0,Me+ze),Dr(le,pe,2,0,Me-ze),Dr(le,pe,3,0,Ue-nt),Oe++,pe+=32}function xi(V,J,le,pe){var Se=V[J+0]+4,Oe=35468*V[J+4]>>16,Ie=fn(V[J+4]),Ue=35468*V[J+1]>>16;nn(le,pe,0,Se+Ie,V=fn(V[J+1]),Ue),nn(le,pe,1,Se+Oe,V,Ue),nn(le,pe,2,Se-Oe,V,Ue),nn(le,pe,3,Se-Ie,V,Ue)}function Us(V,J,le,pe,Se){Dn(V,J,le,pe),Se&&Dn(V,J+16,le,pe+4)}function Ls(V,J,le,pe){Ms(V,J+0,le,pe,1),Ms(V,J+32,le,pe+128,1)}function ds(V,J,le,pe){var Se;for(V=V[J+0]+4,Se=0;4>Se;++Se)for(J=0;4>J;++J)Dr(le,pe,J,Se,V)}function Cn(V,J,le,pe){V[J+0]&&to(V,J+0,le,pe),V[J+16]&&to(V,J+16,le,pe+4),V[J+32]&&to(V,J+32,le,pe+128),V[J+48]&&to(V,J+48,le,pe+128+4)}function Ur(V,J,le,pe){var Se,Oe=o(16);for(Se=0;4>Se;++Se){var Ie=V[J+0+Se]+V[J+12+Se],Ue=V[J+4+Se]+V[J+8+Se],Me=V[J+4+Se]-V[J+8+Se],ze=V[J+0+Se]-V[J+12+Se];Oe[0+Se]=Ie+Ue,Oe[8+Se]=Ie-Ue,Oe[4+Se]=ze+Me,Oe[12+Se]=ze-Me}for(Se=0;4>Se;++Se)Ie=(V=Oe[0+4*Se]+3)+Oe[3+4*Se],Ue=Oe[1+4*Se]+Oe[2+4*Se],Me=Oe[1+4*Se]-Oe[2+4*Se],ze=V-Oe[3+4*Se],le[pe+0]=Ie+Ue>>3,le[pe+16]=ze+Me>>3,le[pe+32]=Ie-Ue>>3,le[pe+48]=ze-Me>>3,pe+=64}function Pn(V,J,le){var pe,Se=J-32,Oe=Ji,Ie=255-V[Se-1];for(pe=0;pe<le;++pe){var Ue,Me=Oe,ze=Ie+V[J-1];for(Ue=0;Ue<le;++Ue)V[J+Ue]=Me[ze+V[Se+Ue]];J+=32}}function Wn(V,J){Pn(V,J,4)}function Bn(V,J){Pn(V,J,8)}function Vn(V,J){Pn(V,J,16)}function gs(V,J){var le;for(le=0;16>le;++le)i(V,J+32*le,V,J-32,16)}function hr(V,J){var le;for(le=16;0<le;--le)a(V,J,V[J-1],16),J+=32}function kn(V,J,le){var pe;for(pe=0;16>pe;++pe)a(J,le+32*pe,V,16)}function pn(V,J){var le,pe=16;for(le=0;16>le;++le)pe+=V[J-1+32*le]+V[J+le-32];kn(pe>>5,V,J)}function sn(V,J){var le,pe=8;for(le=0;16>le;++le)pe+=V[J-1+32*le];kn(pe>>4,V,J)}function Mr(V,J){var le,pe=8;for(le=0;16>le;++le)pe+=V[J+le-32];kn(pe>>4,V,J)}function Pr(V,J){kn(128,V,J)}function Ar(V,J,le){return V+2*J+le+2>>2}function Ln(V,J){var le,pe=J-32;for(pe=new Uint8Array([Ar(V[pe-1],V[pe+0],V[pe+1]),Ar(V[pe+0],V[pe+1],V[pe+2]),Ar(V[pe+1],V[pe+2],V[pe+3]),Ar(V[pe+2],V[pe+3],V[pe+4])]),le=0;4>le;++le)i(V,J+32*le,pe,0,pe.length)}function ys(V,J){var le=V[J-1],pe=V[J-1+32],Se=V[J-1+64],Oe=V[J-1+96];ge(V,J+0,16843009*Ar(V[J-1-32],le,pe)),ge(V,J+32,16843009*Ar(le,pe,Se)),ge(V,J+64,16843009*Ar(pe,Se,Oe)),ge(V,J+96,16843009*Ar(Se,Oe,Oe))}function Ks(V,J){var le,pe=4;for(le=0;4>le;++le)pe+=V[J+le-32]+V[J-1+32*le];for(pe>>=3,le=0;4>le;++le)a(V,J+32*le,pe,4)}function Gs(V,J){var le=V[J-1+0],pe=V[J-1+32],Se=V[J-1+64],Oe=V[J-1-32],Ie=V[J+0-32],Ue=V[J+1-32],Me=V[J+2-32],ze=V[J+3-32];V[J+0+96]=Ar(pe,Se,V[J-1+96]),V[J+1+96]=V[J+0+64]=Ar(le,pe,Se),V[J+2+96]=V[J+1+64]=V[J+0+32]=Ar(Oe,le,pe),V[J+3+96]=V[J+2+64]=V[J+1+32]=V[J+0+0]=Ar(Ie,Oe,le),V[J+3+64]=V[J+2+32]=V[J+1+0]=Ar(Ue,Ie,Oe),V[J+3+32]=V[J+2+0]=Ar(Me,Ue,Ie),V[J+3+0]=Ar(ze,Me,Ue)}function zn(V,J){var le=V[J+1-32],pe=V[J+2-32],Se=V[J+3-32],Oe=V[J+4-32],Ie=V[J+5-32],Ue=V[J+6-32],Me=V[J+7-32];V[J+0+0]=Ar(V[J+0-32],le,pe),V[J+1+0]=V[J+0+32]=Ar(le,pe,Se),V[J+2+0]=V[J+1+32]=V[J+0+64]=Ar(pe,Se,Oe),V[J+3+0]=V[J+2+32]=V[J+1+64]=V[J+0+96]=Ar(Se,Oe,Ie),V[J+3+32]=V[J+2+64]=V[J+1+96]=Ar(Oe,Ie,Ue),V[J+3+64]=V[J+2+96]=Ar(Ie,Ue,Me),V[J+3+96]=Ar(Ue,Me,Me)}function Mn(V,J){var le=V[J-1+0],pe=V[J-1+32],Se=V[J-1+64],Oe=V[J-1-32],Ie=V[J+0-32],Ue=V[J+1-32],Me=V[J+2-32],ze=V[J+3-32];V[J+0+0]=V[J+1+64]=Oe+Ie+1>>1,V[J+1+0]=V[J+2+64]=Ie+Ue+1>>1,V[J+2+0]=V[J+3+64]=Ue+Me+1>>1,V[J+3+0]=Me+ze+1>>1,V[J+0+96]=Ar(Se,pe,le),V[J+0+64]=Ar(pe,le,Oe),V[J+0+32]=V[J+1+96]=Ar(le,Oe,Ie),V[J+1+32]=V[J+2+96]=Ar(Oe,Ie,Ue),V[J+2+32]=V[J+3+96]=Ar(Ie,Ue,Me),V[J+3+32]=Ar(Ue,Me,ze)}function si(V,J){var le=V[J+0-32],pe=V[J+1-32],Se=V[J+2-32],Oe=V[J+3-32],Ie=V[J+4-32],Ue=V[J+5-32],Me=V[J+6-32],ze=V[J+7-32];V[J+0+0]=le+pe+1>>1,V[J+1+0]=V[J+0+64]=pe+Se+1>>1,V[J+2+0]=V[J+1+64]=Se+Oe+1>>1,V[J+3+0]=V[J+2+64]=Oe+Ie+1>>1,V[J+0+32]=Ar(le,pe,Se),V[J+1+32]=V[J+0+96]=Ar(pe,Se,Oe),V[J+2+32]=V[J+1+96]=Ar(Se,Oe,Ie),V[J+3+32]=V[J+2+96]=Ar(Oe,Ie,Ue),V[J+3+64]=Ar(Ie,Ue,Me),V[J+3+96]=Ar(Ue,Me,ze)}function Gi(V,J){var le=V[J-1+0],pe=V[J-1+32],Se=V[J-1+64],Oe=V[J-1+96];V[J+0+0]=le+pe+1>>1,V[J+2+0]=V[J+0+32]=pe+Se+1>>1,V[J+2+32]=V[J+0+64]=Se+Oe+1>>1,V[J+1+0]=Ar(le,pe,Se),V[J+3+0]=V[J+1+32]=Ar(pe,Se,Oe),V[J+3+32]=V[J+1+64]=Ar(Se,Oe,Oe),V[J+3+64]=V[J+2+64]=V[J+0+96]=V[J+1+96]=V[J+2+96]=V[J+3+96]=Oe}function Ma(V,J){var le=V[J-1+0],pe=V[J-1+32],Se=V[J-1+64],Oe=V[J-1+96],Ie=V[J-1-32],Ue=V[J+0-32],Me=V[J+1-32],ze=V[J+2-32];V[J+0+0]=V[J+2+32]=le+Ie+1>>1,V[J+0+32]=V[J+2+64]=pe+le+1>>1,V[J+0+64]=V[J+2+96]=Se+pe+1>>1,V[J+0+96]=Oe+Se+1>>1,V[J+3+0]=Ar(Ue,Me,ze),V[J+2+0]=Ar(Ie,Ue,Me),V[J+1+0]=V[J+3+32]=Ar(le,Ie,Ue),V[J+1+32]=V[J+3+64]=Ar(pe,le,Ie),V[J+1+64]=V[J+3+96]=Ar(Se,pe,le),V[J+1+96]=Ar(Oe,Se,pe)}function Ra(V,J){var le;for(le=0;8>le;++le)i(V,J+32*le,V,J-32,8)}function ki(V,J){var le;for(le=0;8>le;++le)a(V,J,V[J-1],8),J+=32}function ii(V,J,le){var pe;for(pe=0;8>pe;++pe)a(J,le+32*pe,V,8)}function _i(V,J){var le,pe=8;for(le=0;8>le;++le)pe+=V[J+le-32]+V[J-1+32*le];ii(pe>>4,V,J)}function re(V,J){var le,pe=4;for(le=0;8>le;++le)pe+=V[J+le-32];ii(pe>>3,V,J)}function D(V,J){var le,pe=4;for(le=0;8>le;++le)pe+=V[J-1+32*le];ii(pe>>3,V,J)}function Ae(V,J){ii(128,V,J)}function de(V,J,le){var pe=V[J-le],Se=V[J+0],Oe=3*(Se-pe)+jo[1020+V[J-2*le]-V[J+le]],Ie=tu[112+(Oe+4>>3)];V[J-le]=Ji[255+pe+tu[112+(Oe+3>>3)]],V[J+0]=Ji[255+Se-Ie]}function We(V,J,le,pe){var Se=V[J+0],Oe=V[J+le];return $a[255+V[J-2*le]-V[J-le]]>pe||$a[255+Oe-Se]>pe}function Ge(V,J,le,pe){return 4*$a[255+V[J-le]-V[J+0]]+$a[255+V[J-2*le]-V[J+le]]<=pe}function _t(V,J,le,pe,Se){var Oe=V[J-3*le],Ie=V[J-2*le],Ue=V[J-le],Me=V[J+0],ze=V[J+le],nt=V[J+2*le],ft=V[J+3*le];return 4*$a[255+Ue-Me]+$a[255+Ie-ze]>pe?0:$a[255+V[J-4*le]-Oe]<=Se&&$a[255+Oe-Ie]<=Se&&$a[255+Ie-Ue]<=Se&&$a[255+ft-nt]<=Se&&$a[255+nt-ze]<=Se&&$a[255+ze-Me]<=Se}function Nt(V,J,le,pe){var Se=2*pe+1;for(pe=0;16>pe;++pe)Ge(V,J+pe,le,Se)&&de(V,J+pe,le)}function tt(V,J,le,pe){var Se=2*pe+1;for(pe=0;16>pe;++pe)Ge(V,J+pe*le,1,Se)&&de(V,J+pe*le,1)}function rr(V,J,le,pe){var Se;for(Se=3;0<Se;--Se)Nt(V,J+=4*le,le,pe)}function zt(V,J,le,pe){var Se;for(Se=3;0<Se;--Se)tt(V,J+=4,le,pe)}function xt(V,J,le,pe,Se,Oe,Ie,Ue){for(Oe=2*Oe+1;0<Se--;){if(_t(V,J,le,Oe,Ie))if(We(V,J,le,Ue))de(V,J,le);else{var Me=V,ze=J,nt=le,ft=Me[ze-2*nt],Ke=Me[ze-nt],ot=Me[ze+0],At=Me[ze+nt],Ot=Me[ze+2*nt],mt=27*(kt=jo[1020+3*(ot-Ke)+jo[1020+ft-At]])+63>>7,Ct=18*kt+63>>7,kt=9*kt+63>>7;Me[ze-3*nt]=Ji[255+Me[ze-3*nt]+kt],Me[ze-2*nt]=Ji[255+ft+Ct],Me[ze-nt]=Ji[255+Ke+mt],Me[ze+0]=Ji[255+ot-mt],Me[ze+nt]=Ji[255+At-Ct],Me[ze+2*nt]=Ji[255+Ot-kt]}J+=pe}}function Lt(V,J,le,pe,Se,Oe,Ie,Ue){for(Oe=2*Oe+1;0<Se--;){if(_t(V,J,le,Oe,Ie))if(We(V,J,le,Ue))de(V,J,le);else{var Me=V,ze=J,nt=le,ft=Me[ze-nt],Ke=Me[ze+0],ot=Me[ze+nt],At=tu[112+(4+(Ot=3*(Ke-ft))>>3)],Ot=tu[112+(Ot+3>>3)],mt=At+1>>1;Me[ze-2*nt]=Ji[255+Me[ze-2*nt]+mt],Me[ze-nt]=Ji[255+ft+Ot],Me[ze+0]=Ji[255+Ke-At],Me[ze+nt]=Ji[255+ot-mt]}J+=pe}}function ne(V,J,le,pe,Se,Oe){xt(V,J,le,1,16,pe,Se,Oe)}function xe(V,J,le,pe,Se,Oe){xt(V,J,1,le,16,pe,Se,Oe)}function Qe(V,J,le,pe,Se,Oe){var Ie;for(Ie=3;0<Ie;--Ie)Lt(V,J+=4*le,le,1,16,pe,Se,Oe)}function Xe(V,J,le,pe,Se,Oe){var Ie;for(Ie=3;0<Ie;--Ie)Lt(V,J+=4,1,le,16,pe,Se,Oe)}function rt(V,J,le,pe,Se,Oe,Ie,Ue){xt(V,J,Se,1,8,Oe,Ie,Ue),xt(le,pe,Se,1,8,Oe,Ie,Ue)}function wt(V,J,le,pe,Se,Oe,Ie,Ue){xt(V,J,1,Se,8,Oe,Ie,Ue),xt(le,pe,1,Se,8,Oe,Ie,Ue)}function St(V,J,le,pe,Se,Oe,Ie,Ue){Lt(V,J+4*Se,Se,1,8,Oe,Ie,Ue),Lt(le,pe+4*Se,Se,1,8,Oe,Ie,Ue)}function bt(V,J,le,pe,Se,Oe,Ie,Ue){Lt(V,J+4,1,Se,8,Oe,Ie,Ue),Lt(le,pe+4,1,Se,8,Oe,Ie,Ue)}function Mt(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new at,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Cr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function lr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Rr(){this.ua=0,this.Wa=new we,this.vb=new we,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new R}function Ht(){this.xb=this.a=0,this.l=new hn,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Rr,this.ab=0,this.gc=c(4,lr),this.Oc=0}function ir(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new hn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function nr(V,J,le,pe,Se,Oe,Ie){for(V=V==null?0:V[J+0],J=0;J<Ie;++J)Se[Oe+J]=V+le[pe+J]&255,V=Se[Oe+J]}function vn(V,J,le,pe,Se,Oe,Ie){var Ue;if(V==null)nr(null,null,le,pe,Se,Oe,Ie);else for(Ue=0;Ue<Ie;++Ue)Se[Oe+Ue]=V[J+Ue]+le[pe+Ue]&255}function cn(V,J,le,pe,Se,Oe,Ie){if(V==null)nr(null,null,le,pe,Se,Oe,Ie);else{var Ue,Me=V[J+0],ze=Me,nt=Me;for(Ue=0;Ue<Ie;++Ue)ze=nt+(Me=V[J+Ue])-ze,nt=le[pe+Ue]+(-256&ze?0>ze?0:255:ze)&255,ze=Me,Se[Oe+Ue]=nt}}function wn(V,J,le,pe){var Se=J.width,Oe=J.o;if(t(V!=null&&J!=null),0>le||0>=pe||le+pe>Oe)return null;if(!V.Cc){if(V.ga==null){var Ie;if(V.ga=new ir,(Ie=V.ga==null)||(Ie=J.width*J.o,t(V.Gb.length==0),V.Gb=o(Ie),V.Uc=0,V.Gb==null?Ie=0:(V.mb=V.Gb,V.nb=V.Uc,V.rc=null,Ie=1),Ie=!Ie),!Ie){Ie=V.ga;var Ue=V.Fa,Me=V.P,ze=V.qc,nt=V.mb,ft=V.nb,Ke=Me+1,ot=ze-1,At=Ie.l;if(t(Ue!=null&&nt!=null&&J!=null),Ui[0]=null,Ui[1]=nr,Ui[2]=vn,Ui[3]=cn,Ie.ca=nt,Ie.tb=ft,Ie.c=J.width,Ie.i=J.height,t(0<Ie.c&&0<Ie.i),1>=ze)J=0;else if(Ie.$a=3&Ue[Me+0],Ie.Z=Ue[Me+0]>>2&3,Ie.Lc=Ue[Me+0]>>4&3,Me=Ue[Me+0]>>6&3,0>Ie.$a||1<Ie.$a||4<=Ie.Z||1<Ie.Lc||Me)J=0;else if(At.put=gr,At.ac=an,At.bc=In,At.ma=Ie,At.width=J.width,At.height=J.height,At.Da=J.Da,At.v=J.v,At.va=J.va,At.j=J.j,At.o=J.o,Ie.$a)e:{t(Ie.$a==1),J=ht();t:for(;;){if(J==null){J=0;break e}if(t(Ie!=null),Ie.mc=J,J.c=Ie.c,J.i=Ie.i,J.l=Ie.l,J.l.ma=Ie,J.l.width=Ie.c,J.l.height=Ie.i,J.a=0,X(J.m,Ue,Ke,ot),!ct(Ie.c,Ie.i,1,J,null)||(J.ab==1&&J.gc[0].hc==3&&Ve(J.s)?(Ie.ic=1,Ue=J.c*J.i,J.Ta=null,J.Ua=0,J.V=o(Ue),J.Ba=0,J.V==null?(J.a=1,J=0):J=1):(Ie.ic=0,J=gt(J,Ie.c)),!J))break t;J=1;break e}Ie.mc=null,J=0}else J=ot>=Ie.c*Ie.i;Ie=!J}if(Ie)return null;V.ga.Lc!=1?V.Ga=0:pe=Oe-le}t(V.ga!=null),t(le+pe<=Oe);e:{if(J=(Ue=V.ga).c,Oe=Ue.l.o,Ue.$a==0){if(Ke=V.rc,ot=V.Vc,At=V.Fa,Me=V.P+1+le*J,ze=V.mb,nt=V.nb+le*J,t(Me<=V.P+V.qc),Ue.Z!=0)for(t(Ui[Ue.Z]!=null),Ie=0;Ie<pe;++Ie)Ui[Ue.Z](Ke,ot,At,Me,ze,nt,J),Ke=ze,ot=nt,nt+=J,Me+=J;else for(Ie=0;Ie<pe;++Ie)i(ze,nt,At,Me,J),Ke=ze,ot=nt,nt+=J,Me+=J;V.rc=Ke,V.Vc=ot}else{if(t(Ue.mc!=null),J=le+pe,t((Ie=Ue.mc)!=null),t(J<=Ie.i),Ie.C>=J)J=1;else if(Ue.ic||Ho(),Ue.ic){Ue=Ie.V,Ke=Ie.Ba,ot=Ie.c;var Ot=Ie.i,mt=(At=1,Me=Ie.$/ot,ze=Ie.$%ot,nt=Ie.m,ft=Ie.s,Ie.$),Ct=ot*Ot,kt=ot*J,Tt=ft.wc,Rt=mt<kt?ce(ft,ze,Me):null;t(mt<=Ct),t(J<=Ot),t(Ve(ft));t:for(;;){for(;!nt.h&&mt<kt;){if(ze&Tt||(Rt=ce(ft,ze,Me)),t(Rt!=null),Y(nt),256>(Ot=Gr(Rt.G[0],Rt.H[0],nt)))Ue[Ke+mt]=Ot,++mt,++ze>=ot&&(ze=0,++Me<=J&&!(Me%16)&&De(Ie,Me));else{if(!(280>Ot)){At=0;break t}Ot=gn(Ot-256,nt);var Or,xr=Gr(Rt.G[4],Rt.H[4],nt);if(Y(nt),!(mt>=(xr=Yn(ot,xr=gn(xr,nt)))&&Ct-mt>=Ot)){At=0;break t}for(Or=0;Or<Ot;++Or)Ue[Ke+mt+Or]=Ue[Ke+mt+Or-xr];for(mt+=Ot,ze+=Ot;ze>=ot;)ze-=ot,++Me<=J&&!(Me%16)&&De(Ie,Me);mt<kt&&ze&Tt&&(Rt=ce(ft,ze,Me))}t(nt.h==M(nt))}De(Ie,Me>J?J:Me);break t}!At||nt.h&&mt<Ct?(At=0,Ie.a=nt.h?5:3):Ie.$=mt,J=At}else J=qe(Ie,Ie.V,Ie.Ba,Ie.c,Ie.i,J,ut);if(!J){pe=0;break e}}le+pe>=Oe&&(V.Cc=1),pe=1}if(!pe)return null;if(V.Cc&&((pe=V.ga)!=null&&(pe.mc=null),V.ga=null,0<V.Ga))return alert("todo:WebPDequantizeLevels"),null}return V.nb+le*Se}function Qa(V,J,le,pe,Se,Oe){for(;0<Se--;){var Ie,Ue=V,Me=J+(le?1:0),ze=V,nt=J+(le?0:3);for(Ie=0;Ie<pe;++Ie){var ft=ze[nt+4*Ie];ft!=255&&(ft*=32897,Ue[Me+4*Ie+0]=Ue[Me+4*Ie+0]*ft>>23,Ue[Me+4*Ie+1]=Ue[Me+4*Ie+1]*ft>>23,Ue[Me+4*Ie+2]=Ue[Me+4*Ie+2]*ft>>23)}J+=Oe}}function eo(V,J,le,pe,Se){for(;0<pe--;){var Oe;for(Oe=0;Oe<le;++Oe){var Ie=V[J+2*Oe+0],Ue=15&(ze=V[J+2*Oe+1]),Me=4369*Ue,ze=(240&ze|ze>>4)*Me>>16;V[J+2*Oe+0]=(240&Ie|Ie>>4)*Me>>16&240|(15&Ie|Ie<<4)*Me>>16>>4&15,V[J+2*Oe+1]=240&ze|Ue}J+=Se}}function go(V,J,le,pe,Se,Oe,Ie,Ue){var Me,ze,nt=255;for(ze=0;ze<Se;++ze){for(Me=0;Me<pe;++Me){var ft=V[J+Me];Oe[Ie+4*Me]=ft,nt&=ft}J+=le,Ie+=Ue}return nt!=255}function yo(V,J,le,pe,Se){var Oe;for(Oe=0;Oe<Se;++Oe)le[pe+Oe]=V[J+Oe]>>8}function Ho(){pc=Qa,Kh=eo,hd=go,Gh=yo}function Fi(V,J,le){N[V]=function(pe,Se,Oe,Ie,Ue,Me,ze,nt,ft,Ke,ot,At,Ot,mt,Ct,kt,Tt){var Rt,Or=Tt-1>>1,xr=Ue[Me+0]|ze[nt+0]<<16,on=ft[Ke+0]|ot[At+0]<<16;t(pe!=null);var jr=3*xr+on+131074>>2;for(J(pe[Se+0],255&jr,jr>>16,Ot,mt),Oe!=null&&(jr=3*on+xr+131074>>2,J(Oe[Ie+0],255&jr,jr>>16,Ct,kt)),Rt=1;Rt<=Or;++Rt){var _n=Ue[Me+Rt]|ze[nt+Rt]<<16,ks=ft[Ke+Rt]|ot[At+Rt]<<16,un=xr+_n+on+ks+524296,br=un+2*(_n+on)>>3;jr=br+xr>>1,xr=(un=un+2*(xr+ks)>>3)+_n>>1,J(pe[Se+2*Rt-1],255&jr,jr>>16,Ot,mt+(2*Rt-1)*le),J(pe[Se+2*Rt-0],255&xr,xr>>16,Ot,mt+(2*Rt-0)*le),Oe!=null&&(jr=un+on>>1,xr=br+ks>>1,J(Oe[Ie+2*Rt-1],255&jr,jr>>16,Ct,kt+(2*Rt-1)*le),J(Oe[Ie+2*Rt+0],255&xr,xr>>16,Ct,kt+(2*Rt+0)*le)),xr=_n,on=ks}1&Tt||(jr=3*xr+on+131074>>2,J(pe[Se+Tt-1],255&jr,jr>>16,Ot,mt+(Tt-1)*le),Oe!=null&&(jr=3*on+xr+131074>>2,J(Oe[Ie+Tt-1],255&jr,jr>>16,Ct,kt+(Tt-1)*le)))}}function ld(){Aa[xA]=Vy,Aa[Il]=Pl,Aa[tm]=zy,Aa[fd]=iu,Aa[pd]=xc,Aa[es]=bd,Aa[bA]=rf,Aa[ru]=Pl,Aa[mc]=iu,Aa[md]=xc,Aa[gd]=bd}function Cl(V){return V&-16384?0>V?0:255:V>>Tl}function Bl(V,J){return Cl((19077*V>>8)+(26149*J>>8)-14234)}function bi(V,J,le){return Cl((19077*V>>8)-(6419*J>>8)-(13320*le>>8)+8708)}function Vo(V,J){return Cl((19077*V>>8)+(33050*J>>8)-17685)}function xo(V,J,le,pe,Se){pe[Se+0]=Bl(V,le),pe[Se+1]=bi(V,J,le),pe[Se+2]=Vo(V,J)}function Wc(V,J,le,pe,Se){pe[Se+0]=Vo(V,J),pe[Se+1]=bi(V,J,le),pe[Se+2]=Bl(V,le)}function cd(V,J,le,pe,Se){var Oe=bi(V,J,le);J=Oe<<3&224|Vo(V,J)>>3,pe[Se+0]=248&Bl(V,le)|Oe>>5,pe[Se+1]=J}function Wi(V,J,le,pe,Se){var Oe=240&Vo(V,J)|15;pe[Se+0]=240&Bl(V,le)|bi(V,J,le)>>4,pe[Se+1]=Oe}function hA(V,J,le,pe,Se){pe[Se+0]=255,xo(V,J,le,pe,Se+1)}function qc(V,J,le,pe,Se){Wc(V,J,le,pe,Se),pe[Se+3]=255}function fA(V,J,le,pe,Se){xo(V,J,le,pe,Se),pe[Se+3]=255}function ai(V,J){return 0>V?0:V>J?J:V}function oa(V,J,le){N[V]=function(pe,Se,Oe,Ie,Ue,Me,ze,nt,ft){for(var Ke=nt+(-2&ft)*le;nt!=Ke;)J(pe[Se+0],Oe[Ie+0],Ue[Me+0],ze,nt),J(pe[Se+1],Oe[Ie+0],Ue[Me+0],ze,nt+le),Se+=2,++Ie,++Me,nt+=2*le;1&ft&&J(pe[Se+0],Oe[Ie+0],Ue[Me+0],ze,nt)}}function zo(V,J,le){return le==0?V==0?J==0?6:5:J==0?4:0:le}function ud(V,J,le,pe,Se){switch(V>>>30){case 3:Ms(J,le,pe,Se,0);break;case 2:oi(J,le,pe,Se);break;case 1:to(J,le,pe,Se)}}function Ko(V,J){var le,pe,Se=J.M,Oe=J.Nb,Ie=V.oc,Ue=V.pc+40,Me=V.oc,ze=V.pc+584,nt=V.oc,ft=V.pc+600;for(le=0;16>le;++le)Ie[Ue+32*le-1]=129;for(le=0;8>le;++le)Me[ze+32*le-1]=129,nt[ft+32*le-1]=129;for(0<Se?Ie[Ue-1-32]=Me[ze-1-32]=nt[ft-1-32]=129:(a(Ie,Ue-32-1,127,21),a(Me,ze-32-1,127,9),a(nt,ft-32-1,127,9)),pe=0;pe<V.za;++pe){var Ke=J.ya[J.aa+pe];if(0<pe){for(le=-1;16>le;++le)i(Ie,Ue+32*le-4,Ie,Ue+32*le+12,4);for(le=-1;8>le;++le)i(Me,ze+32*le-4,Me,ze+32*le+4,4),i(nt,ft+32*le-4,nt,ft+32*le+4,4)}var ot=V.Gd,At=V.Hd+pe,Ot=Ke.ad,mt=Ke.Hc;if(0<Se&&(i(Ie,Ue-32,ot[At].y,0,16),i(Me,ze-32,ot[At].f,0,8),i(nt,ft-32,ot[At].ea,0,8)),Ke.Za){var Ct=Ie,kt=Ue-32+16;for(0<Se&&(pe>=V.za-1?a(Ct,kt,ot[At].y[15],4):i(Ct,kt,ot[At+1].y,0,4)),le=0;4>le;le++)Ct[kt+128+le]=Ct[kt+256+le]=Ct[kt+384+le]=Ct[kt+0+le];for(le=0;16>le;++le,mt<<=2)Ct=Ie,kt=Ue+nf[le],Ha[Ke.Ob[le]](Ct,kt),ud(mt,Ot,16*+le,Ct,kt)}else if(Ct=zo(pe,Se,Ke.Ob[0]),Zi[Ct](Ie,Ue),mt!=0)for(le=0;16>le;++le,mt<<=2)ud(mt,Ot,16*+le,Ie,Ue+nf[le]);for(le=Ke.Gc,Ct=zo(pe,Se,Ke.Dd),da[Ct](Me,ze),da[Ct](nt,ft),mt=Ot,Ct=Me,kt=ze,255&(Ke=0|le)&&(170&Ke?wo(mt,256,Ct,kt):Zc(mt,256,Ct,kt)),Ke=nt,mt=ft,255&(le>>=8)&&(170&le?wo(Ot,320,Ke,mt):Zc(Ot,320,Ke,mt)),Se<V.Ub-1&&(i(ot[At].y,0,Ie,Ue+480,16),i(ot[At].f,0,Me,ze+224,8),i(ot[At].ea,0,nt,ft+224,8)),le=8*Oe*V.B,ot=V.sa,At=V.ta+16*pe+16*Oe*V.R,Ot=V.qa,Ke=V.ra+8*pe+le,mt=V.Ha,Ct=V.Ia+8*pe+le,le=0;16>le;++le)i(ot,At+le*V.R,Ie,Ue+32*le,16);for(le=0;8>le;++le)i(Ot,Ke+le*V.B,Me,ze+32*le,8),i(mt,Ct+le*V.B,nt,ft+32*le,8)}}function dc(V,J,le,pe,Se,Oe,Ie,Ue,Me){var ze=[0],nt=[0],ft=0,Ke=Me!=null?Me.kd:0,ot=Me??new Cr;if(V==null||12>le)return 7;ot.data=V,ot.w=J,ot.ha=le,J=[J],le=[le],ot.gb=[ot.gb];e:{var At=J,Ot=le,mt=ot.gb;if(t(V!=null),t(Ot!=null),t(mt!=null),mt[0]=0,12<=Ot[0]&&!s(V,At[0],"RIFF")){if(s(V,At[0]+8,"WEBP")){mt=3;break e}var Ct=Z(V,At[0]+4);if(12>Ct||4294967286<Ct){mt=3;break e}if(Ke&&Ct>Ot[0]-8){mt=7;break e}mt[0]=Ct,At[0]+=12,Ot[0]-=12}mt=0}if(mt!=0)return mt;for(Ct=0<ot.gb[0],le=le[0];;){e:{var kt=V;Ot=J,mt=le;var Tt=ze,Rt=nt,Or=At=[0];if((jr=ft=[ft])[0]=0,8>mt[0])mt=7;else{if(!s(kt,Ot[0],"VP8X")){if(Z(kt,Ot[0]+4)!=10){mt=3;break e}if(18>mt[0]){mt=7;break e}var xr=Z(kt,Ot[0]+8),on=1+ke(kt,Ot[0]+12);if(2147483648<=on*(kt=1+ke(kt,Ot[0]+15))){mt=3;break e}Or!=null&&(Or[0]=xr),Tt!=null&&(Tt[0]=on),Rt!=null&&(Rt[0]=kt),Ot[0]+=18,mt[0]-=18,jr[0]=1}mt=0}}if(ft=ft[0],At=At[0],mt!=0)return mt;if(Ot=!!(2&At),!Ct&&ft)return 3;if(Oe!=null&&(Oe[0]=!!(16&At)),Ie!=null&&(Ie[0]=Ot),Ue!=null&&(Ue[0]=0),Ie=ze[0],At=nt[0],ft&&Ot&&Me==null){mt=0;break}if(4>le){mt=7;break}if(Ct&&ft||!Ct&&!ft&&!s(V,J[0],"ALPH")){le=[le],ot.na=[ot.na],ot.P=[ot.P],ot.Sa=[ot.Sa];e:{xr=V,mt=J,Ct=le;var jr=ot.gb;Tt=ot.na,Rt=ot.P,Or=ot.Sa,on=22,t(xr!=null),t(Ct!=null),kt=mt[0];var _n=Ct[0];for(t(Tt!=null),t(Or!=null),Tt[0]=null,Rt[0]=null,Or[0]=0;;){if(mt[0]=kt,Ct[0]=_n,8>_n){mt=7;break e}var ks=Z(xr,kt+4);if(4294967286<ks){mt=3;break e}var un=8+ks+1&-2;if(on+=un,0<jr&&on>jr){mt=3;break e}if(!s(xr,kt,"VP8 ")||!s(xr,kt,"VP8L")){mt=0;break e}if(_n[0]<un){mt=7;break e}s(xr,kt,"ALPH")||(Tt[0]=xr,Rt[0]=kt+8,Or[0]=ks),kt+=un,_n-=un}}if(le=le[0],ot.na=ot.na[0],ot.P=ot.P[0],ot.Sa=ot.Sa[0],mt!=0)break}le=[le],ot.Ja=[ot.Ja],ot.xa=[ot.xa];e:if(jr=V,mt=J,Ct=le,Tt=ot.gb[0],Rt=ot.Ja,Or=ot.xa,xr=mt[0],kt=!s(jr,xr,"VP8 "),on=!s(jr,xr,"VP8L"),t(jr!=null),t(Ct!=null),t(Rt!=null),t(Or!=null),8>Ct[0])mt=7;else{if(kt||on){if(jr=Z(jr,xr+4),12<=Tt&&jr>Tt-12){mt=3;break e}if(Ke&&jr>Ct[0]-8){mt=7;break e}Rt[0]=jr,mt[0]+=8,Ct[0]-=8,Or[0]=on}else Or[0]=5<=Ct[0]&&jr[xr+0]==47&&!(jr[xr+4]>>5),Rt[0]=Ct[0];mt=0}if(le=le[0],ot.Ja=ot.Ja[0],ot.xa=ot.xa[0],J=J[0],mt!=0)break;if(4294967286<ot.Ja)return 3;if(Ue==null||Ot||(Ue[0]=ot.xa?2:1),Ie=[Ie],At=[At],ot.xa){if(5>le){mt=7;break}Ue=Ie,Ke=At,Ot=Oe,V==null||5>le?V=0:5<=le&&V[J+0]==47&&!(V[J+4]>>5)?(Ct=[0],jr=[0],Tt=[0],X(Rt=new K,V,J,le),ln(Rt,Ct,jr,Tt)?(Ue!=null&&(Ue[0]=Ct[0]),Ke!=null&&(Ke[0]=jr[0]),Ot!=null&&(Ot[0]=Tt[0]),V=1):V=0):V=0}else{if(10>le){mt=7;break}Ue=At,V==null||10>le||!bn(V,J+3,le-3)?V=0:(Ke=V[J+0]|V[J+1]<<8|V[J+2]<<16,Ot=16383&(V[J+7]<<8|V[J+6]),V=16383&(V[J+9]<<8|V[J+8]),1&Ke||3<(Ke>>1&7)||!(Ke>>4&1)||Ke>>5>=ot.Ja||!Ot||!V?V=0:(Ie&&(Ie[0]=Ot),Ue&&(Ue[0]=V),V=1))}if(!V||(Ie=Ie[0],At=At[0],ft&&(ze[0]!=Ie||nt[0]!=At)))return 3;Me!=null&&(Me[0]=ot,Me.offset=J-Me.w,t(4294967286>J-Me.w),t(Me.offset==Me.ha-le));break}return mt==0||mt==7&&ft&&Me==null?(Oe!=null&&(Oe[0]|=ot.na!=null&&0<ot.na.length),pe!=null&&(pe[0]=Ie),Se!=null&&(Se[0]=At),0):mt}function qi(V,J,le){var pe=J.width,Se=J.height,Oe=0,Ie=0,Ue=pe,Me=Se;if(J.Da=V!=null&&0<V.Da,J.Da&&(Ue=V.cd,Me=V.bd,Oe=V.v,Ie=V.j,11>le||(Oe&=-2,Ie&=-2),0>Oe||0>Ie||0>=Ue||0>=Me||Oe+Ue>pe||Ie+Me>Se))return 0;if(J.v=Oe,J.j=Ie,J.va=Oe+Ue,J.o=Ie+Me,J.U=Ue,J.T=Me,J.da=V!=null&&0<V.da,J.da){if(!Fe(Ue,Me,le=[V.ib],Oe=[V.hb]))return 0;J.ib=le[0],J.hb=Oe[0]}return J.ob=V!=null&&V.ob,J.Kb=V==null||!V.Sd,J.da&&(J.ob=J.ib<3*pe/4&&J.hb<3*Se/4,J.Kb=0),1}function Yi(V){if(V==null)return 2;if(11>V.S){var J=V.f.RGBA;J.fb+=(V.height-1)*J.A,J.A=-J.A}else J=V.f.kb,V=V.height,J.O+=(V-1)*J.fa,J.fa=-J.fa,J.N+=(V-1>>1)*J.Ab,J.Ab=-J.Ab,J.W+=(V-1>>1)*J.Db,J.Db=-J.Db,J.F!=null&&(J.J+=(V-1)*J.lb,J.lb=-J.lb);return 0}function kl(V,J,le,pe){if(pe==null||0>=V||0>=J)return 2;if(le!=null){if(le.Da){var Se=le.cd,Oe=le.bd,Ie=-2&le.v,Ue=-2&le.j;if(0>Ie||0>Ue||0>=Se||0>=Oe||Ie+Se>V||Ue+Oe>J)return 2;V=Se,J=Oe}if(le.da){if(!Fe(V,J,Se=[le.ib],Oe=[le.hb]))return 2;V=Se[0],J=Oe[0]}}pe.width=V,pe.height=J;e:{var Me=pe.width,ze=pe.height;if(V=pe.S,0>=Me||0>=ze||!(V>=xA&&13>V))V=2;else{if(0>=pe.Rd&&pe.sd==null){Ie=Oe=Se=J=0;var nt=(Ue=Me*vd[V])*ze;if(11>V||(Oe=(ze+1)/2*(J=(Me+1)/2),V==12&&(Ie=(Se=Me)*ze)),(ze=o(nt+2*Oe+Ie))==null){V=1;break e}pe.sd=ze,11>V?((Me=pe.f.RGBA).eb=ze,Me.fb=0,Me.A=Ue,Me.size=nt):((Me=pe.f.kb).y=ze,Me.O=0,Me.fa=Ue,Me.Fd=nt,Me.f=ze,Me.N=0+nt,Me.Ab=J,Me.Cd=Oe,Me.ea=ze,Me.W=0+nt+Oe,Me.Db=J,Me.Ed=Oe,V==12&&(Me.F=ze,Me.J=0+nt+2*Oe),Me.Tc=Ie,Me.lb=Se)}if(J=1,Se=pe.S,Oe=pe.width,Ie=pe.height,Se>=xA&&13>Se)if(11>Se)V=pe.f.RGBA,J&=(Ue=Math.abs(V.A))*(Ie-1)+Oe<=V.size,J&=Ue>=Oe*vd[Se],J&=V.eb!=null;else{V=pe.f.kb,Ue=(Oe+1)/2,nt=(Ie+1)/2,Me=Math.abs(V.fa),ze=Math.abs(V.Ab);var ft=Math.abs(V.Db),Ke=Math.abs(V.lb),ot=Ke*(Ie-1)+Oe;J&=Me*(Ie-1)+Oe<=V.Fd,J&=ze*(nt-1)+Ue<=V.Cd,J=(J&=ft*(nt-1)+Ue<=V.Ed)&Me>=Oe&ze>=Ue&ft>=Ue,J&=V.y!=null,J&=V.f!=null,J&=V.ea!=null,Se==12&&(J&=Ke>=Oe,J&=ot<=V.Tc,J&=V.F!=null)}else J=0;V=J?0:2}}return V!=0||le!=null&&le.fd&&(V=Yi(pe)),V}var Xi=64,_l=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],dd=24,El=32,Bs=8,pA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ie("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(V){return V},N.Predictor2=function(V,J,le){return J[le+0]},N.Predictor3=function(V,J,le){return J[le+1]},N.Predictor4=function(V,J,le){return J[le-1]},N.Predictor5=function(V,J,le){return Be(Be(V,J[le+1]),J[le+0])},N.Predictor6=function(V,J,le){return Be(V,J[le-1])},N.Predictor7=function(V,J,le){return Be(V,J[le+0])},N.Predictor8=function(V,J,le){return Be(J[le-1],J[le+0])},N.Predictor9=function(V,J,le){return Be(J[le+0],J[le+1])},N.Predictor10=function(V,J,le){return Be(Be(V,J[le-1]),Be(J[le+0],J[le+1]))},N.Predictor11=function(V,J,le){var pe=J[le+0];return 0>=$e(pe>>24&255,V>>24&255,(J=J[le-1])>>24&255)+$e(pe>>16&255,V>>16&255,J>>16&255)+$e(pe>>8&255,V>>8&255,J>>8&255)+$e(255&pe,255&V,255&J)?pe:V},N.Predictor12=function(V,J,le){var pe=J[le+0];return(Le((V>>24&255)+(pe>>24&255)-((J=J[le-1])>>24&255))<<24|Le((V>>16&255)+(pe>>16&255)-(J>>16&255))<<16|Le((V>>8&255)+(pe>>8&255)-(J>>8&255))<<8|Le((255&V)+(255&pe)-(255&J)))>>>0},N.Predictor13=function(V,J,le){var pe=J[le-1];return(ve((V=Be(V,J[le+0]))>>24&255,pe>>24&255)<<24|ve(V>>16&255,pe>>16&255)<<16|ve(V>>8&255,pe>>8&255)<<8|ve(255&V,255&pe))>>>0};var la=N.PredictorAdd0;N.PredictorAdd1=je,ie("Predictor2","PredictorAdd2"),ie("Predictor3","PredictorAdd3"),ie("Predictor4","PredictorAdd4"),ie("Predictor5","PredictorAdd5"),ie("Predictor6","PredictorAdd6"),ie("Predictor7","PredictorAdd7"),ie("Predictor8","PredictorAdd8"),ie("Predictor9","PredictorAdd9"),ie("Predictor10","PredictorAdd10"),ie("Predictor11","PredictorAdd11"),ie("Predictor12","PredictorAdd12"),ie("Predictor13","PredictorAdd13");var ca=N.PredictorAdd2;He("ColorIndexInverseTransform","MapARGB","32b",function(V){return V>>8&255},function(V){return V}),He("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(V){return V},function(V){return V>>8&255});var Yc,Ol=N.ColorIndexInverseTransform,Xc=N.MapARGB,Ac=N.VP8LColorIndexInverseTransformAlpha,Go=N.MapAlpha,Wo=N.VP8LPredictorsAdd=[];Wo.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var bo,Jc,ua,vo,as,os,Ds,Ms,oi,wo,to,Zc,Hh,Vh,mA,Zp,em,hc,gA,eu,yA,zh,Ad,fc,pc,Kh,hd,Gh,Wh=o(511),qh=o(2041),Yh=o(225),Xh=o(767),Jh=0,jo=qh,tu=Yh,Ji=Xh,$a=Wh,xA=0,Il=1,tm=2,fd=3,pd=4,es=5,bA=6,ru=7,mc=8,md=9,gd=10,yd=[2,3,7],vA=[3,3,11],gc=[280,256,256,256,40],rm=[0,1,1,1,0],Ry=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qy=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],nm=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],wA=8,nu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],xd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],yc=null,Zh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ef=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],im=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],$y=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Hy=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],tf=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zi=[],Ha=[],da=[],No=1,su=2,Ui=[],Aa=[];Fi("UpsampleRgbLinePair",xo,3),Fi("UpsampleBgrLinePair",Wc,3),Fi("UpsampleRgbaLinePair",fA,4),Fi("UpsampleBgraLinePair",qc,4),Fi("UpsampleArgbLinePair",hA,4),Fi("UpsampleRgba4444LinePair",Wi,2),Fi("UpsampleRgb565LinePair",cd,2);var Vy=N.UpsampleRgbLinePair,zy=N.UpsampleBgrLinePair,Pl=N.UpsampleRgbaLinePair,iu=N.UpsampleBgraLinePair,xc=N.UpsampleArgbLinePair,bd=N.UpsampleRgba4444LinePair,rf=N.UpsampleRgb565LinePair,qo=16,ro=1<<qo-1,qn=-227,Xn=482,Tl=6,Ei=0,ha=o(256),bc=o(256),au=o(256),fa=o(256),jA=o(Xn-qn),am=o(Xn-qn);oa("YuvToRgbRow",xo,3),oa("YuvToBgrRow",Wc,3),oa("YuvToRgbaRow",fA,4),oa("YuvToBgraRow",qc,4),oa("YuvToArgbRow",hA,4),oa("YuvToRgba4444Row",Wi,2),oa("YuvToRgb565Row",cd,2);var nf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],vc=[0,2,8],om=[8,7,6,4,4,2,2,2,1,1,1,1],Yo=1;this.WebPDecodeRGBA=function(V,J,le,pe,Se){var Oe=Il,Ie=new Mt,Ue=new Wt;Ie.ba=Ue,Ue.S=Oe,Ue.width=[Ue.width],Ue.height=[Ue.height];var Me=Ue.width,ze=Ue.height,nt=new Gt;if(nt==null||V==null)var ft=2;else t(nt!=null),ft=dc(V,J,le,nt.width,nt.height,nt.Pd,nt.Qd,nt.format,null);if(ft!=0?Me=0:(Me!=null&&(Me[0]=nt.width[0]),ze!=null&&(ze[0]=nt.height[0]),Me=1),Me){Ue.width=Ue.width[0],Ue.height=Ue.height[0],pe!=null&&(pe[0]=Ue.width),Se!=null&&(Se[0]=Ue.height);e:{if(pe=new hn,(Se=new Cr).data=V,Se.w=J,Se.ha=le,Se.kd=1,J=[0],t(Se!=null),((V=dc(Se.data,Se.w,Se.ha,null,null,null,J,null,Se))==0||V==7)&&J[0]&&(V=4),(J=V)==0){if(t(Ie!=null),pe.data=Se.data,pe.w=Se.w+Se.offset,pe.ha=Se.ha-Se.offset,pe.put=gr,pe.ac=an,pe.bc=In,pe.ma=Ie,Se.xa){if((V=ht())==null){Ie=1;break e}if((function(Ke,ot){var At=[0],Ot=[0],mt=[0];t:for(;;){if(Ke==null)return 0;if(ot==null)return Ke.a=2,0;if(Ke.l=ot,Ke.a=0,X(Ke.m,ot.data,ot.w,ot.ha),!ln(Ke.m,At,Ot,mt)){Ke.a=3;break t}if(Ke.xb=su,ot.width=At[0],ot.height=Ot[0],!ct(At[0],Ot[0],1,Ke,null))break t;return 1}return t(Ke.a!=0),0})(V,pe)){if(pe=(J=kl(pe.width,pe.height,Ie.Oa,Ie.ba))==0){t:{pe=V;r:for(;;){if(pe==null){pe=0;break t}if(t(pe.s.yc!=null),t(pe.s.Ya!=null),t(0<pe.s.Wb),t((le=pe.l)!=null),t((Se=le.ma)!=null),pe.xb!=0){if(pe.ca=Se.ba,pe.tb=Se.tb,t(pe.ca!=null),!qi(Se.Oa,le,fd)){pe.a=2;break r}if(!gt(pe,le.width)||le.da)break r;if((le.da||Et(pe.ca.S))&&Ho(),11>pe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),pe.ca.f.kb.F!=null&&Ho()),pe.Pb&&0<pe.s.ua&&pe.s.vb.X==null&&!te(pe.s.vb,pe.s.Wa.Xa)){pe.a=1;break r}pe.xb=0}if(!qe(pe,pe.V,pe.Ba,pe.c,pe.i,le.o,Re))break r;Se.Dc=pe.Ma,pe=1;break t}t(pe.a!=0),pe=0}pe=!pe}pe&&(J=V.a)}else J=V.a}else{if((V=new Hn)==null){Ie=1;break e}if(V.Fa=Se.na,V.P=Se.P,V.qc=Se.Sa,Qt(V,pe)){if((J=kl(pe.width,pe.height,Ie.Oa,Ie.ba))==0){if(V.Aa=0,le=Ie.Oa,t((Se=V)!=null),le!=null){if(0<(Me=0>(Me=le.Md)?0:100<Me?255:255*Me/100)){for(ze=nt=0;4>ze;++ze)12>(ft=Se.pb[ze]).lc&&(ft.ia=Me*om[0>ft.lc?0:ft.lc]>>3),nt|=ft.ia;nt&&(alert("todo:VP8InitRandom"),Se.ia=1)}Se.Ga=le.Id,100<Se.Ga?Se.Ga=100:0>Se.Ga&&(Se.Ga=0)}(function(Ke,ot){if(Ke==null)return 0;if(ot==null)return pr(Ke,2,"NULL VP8Io parameter in VP8Decode().");if(!Ke.cb&&!Qt(Ke,ot))return 0;if(t(Ke.cb),ot.ac==null||ot.ac(ot)){ot.ob&&(Ke.L=0);var At=vc[Ke.L];if(Ke.L==2?(Ke.yb=0,Ke.zb=0):(Ke.yb=ot.v-At>>4,Ke.zb=ot.j-At>>4,0>Ke.yb&&(Ke.yb=0),0>Ke.zb&&(Ke.zb=0)),Ke.Va=ot.o+15+At>>4,Ke.Hb=ot.va+15+At>>4,Ke.Hb>Ke.za&&(Ke.Hb=Ke.za),Ke.Va>Ke.Ub&&(Ke.Va=Ke.Ub),0<Ke.L){var Ot=Ke.ed;for(At=0;4>At;++At){var mt;if(Ke.Qa.Cb){var Ct=Ke.Qa.Lb[At];Ke.Qa.Fb||(Ct+=Ot.Tb)}else Ct=Ot.Tb;for(mt=0;1>=mt;++mt){var kt=Ke.gd[At][mt],Tt=Ct;if(Ot.Pc&&(Tt+=Ot.vd[0],mt&&(Tt+=Ot.od[0])),0<(Tt=0>Tt?0:63<Tt?63:Tt)){var Rt=Tt;0<Ot.wb&&(Rt=4<Ot.wb?Rt>>2:Rt>>1)>9-Ot.wb&&(Rt=9-Ot.wb),1>Rt&&(Rt=1),kt.dd=Rt,kt.tc=2*Tt+Rt,kt.ld=40<=Tt?2:15<=Tt?1:0}else kt.tc=0;kt.La=mt}}}At=0}else pr(Ke,6,"Frame setup failed"),At=Ke.a;if(At=At==0){if(At){Ke.$c=0,0<Ke.Aa||(Ke.Ic=Yo);t:{At=Ke.Ic,Ot=4*(Rt=Ke.za);var Or=32*Rt,xr=Rt+1,on=0<Ke.L?Rt*(0<Ke.Aa?2:1):0,jr=(Ke.Aa==2?2:1)*Rt;if((kt=Ot+832+(mt=3*(16*At+vc[Ke.L])/2*Or)+(Ct=Ke.Fa!=null&&0<Ke.Fa.length?Ke.Kc.c*Ke.Kc.i:0))!=kt)At=0;else{if(kt>Ke.Vb){if(Ke.Vb=0,Ke.Ec=o(kt),Ke.Fc=0,Ke.Ec==null){At=pr(Ke,1,"no memory during frame initialization.");break t}Ke.Vb=kt}kt=Ke.Ec,Tt=Ke.Fc,Ke.Ac=kt,Ke.Bc=Tt,Tt+=Ot,Ke.Gd=c(Or,kr),Ke.Hd=0,Ke.rb=c(xr+1,yn),Ke.sb=1,Ke.wa=on?c(on,Fr):null,Ke.Y=0,Ke.D.Nb=0,Ke.D.wa=Ke.wa,Ke.D.Y=Ke.Y,0<Ke.Aa&&(Ke.D.Y+=Rt),t(!0),Ke.oc=kt,Ke.pc=Tt,Tt+=832,Ke.ya=c(jr,xn),Ke.aa=0,Ke.D.ya=Ke.ya,Ke.D.aa=Ke.aa,Ke.Aa==2&&(Ke.D.aa+=Rt),Ke.R=16*Rt,Ke.B=8*Rt,Rt=(Or=vc[Ke.L])*Ke.R,Or=Or/2*Ke.B,Ke.sa=kt,Ke.ta=Tt+Rt,Ke.qa=Ke.sa,Ke.ra=Ke.ta+16*At*Ke.R+Or,Ke.Ha=Ke.qa,Ke.Ia=Ke.ra+8*At*Ke.B+Or,Ke.$c=0,Tt+=mt,Ke.mb=Ct?kt:null,Ke.nb=Ct?Tt:null,t(Tt+Ct<=Ke.Fc+Ke.Vb),Wr(Ke),a(Ke.Ac,Ke.Bc,0,Ot),At=1}}if(At){if(ot.ka=0,ot.y=Ke.sa,ot.O=Ke.ta,ot.f=Ke.qa,ot.N=Ke.ra,ot.ea=Ke.Ha,ot.Vd=Ke.Ia,ot.fa=Ke.R,ot.Rc=Ke.B,ot.F=null,ot.J=0,!Jh){for(At=-255;255>=At;++At)Wh[255+At]=0>At?-At:At;for(At=-1020;1020>=At;++At)qh[1020+At]=-128>At?-128:127<At?127:At;for(At=-112;112>=At;++At)Yh[112+At]=-16>At?-16:15<At?15:At;for(At=-255;510>=At;++At)Xh[255+At]=0>At?0:255<At?255:At;Jh=1}Ds=Ur,Ms=Us,wo=Ls,to=ds,Zc=Cn,oi=xi,Hh=ne,Vh=xe,mA=rt,Zp=wt,em=Qe,hc=Xe,gA=St,eu=bt,yA=Nt,zh=tt,Ad=rr,fc=zt,Ha[0]=Ks,Ha[1]=Wn,Ha[2]=Ln,Ha[3]=ys,Ha[4]=Gs,Ha[5]=Mn,Ha[6]=zn,Ha[7]=si,Ha[8]=Ma,Ha[9]=Gi,Zi[0]=pn,Zi[1]=Vn,Zi[2]=gs,Zi[3]=hr,Zi[4]=sn,Zi[5]=Mr,Zi[6]=Pr,da[0]=_i,da[1]=Bn,da[2]=Ra,da[3]=ki,da[4]=D,da[5]=re,da[6]=Ae,At=1}else At=0}At&&(At=(function(_n,ks){for(_n.M=0;_n.M<_n.Va;++_n.M){var un,br=_n.Jc[_n.M&_n.Xb],ar=_n.m,Rs=_n;for(un=0;un<Rs.za;++un){var qr=ar,Nn=Rs,ls=Nn.Ac,vi=Nn.Bc+4*un,Ws=Nn.zc,Ns=Nn.ya[Nn.aa+un];if(Nn.Qa.Bb?Ns.$b=be(qr,Nn.Pa.jb[0])?2+be(qr,Nn.Pa.jb[2]):be(qr,Nn.Pa.jb[1]):Ns.$b=0,Nn.kc&&(Ns.Ad=be(qr,Nn.Bd)),Ns.Za=!be(qr,145)+0,Ns.Za){var li=Ns.Ob,wi=0;for(Nn=0;4>Nn;++Nn){var xs,On=Ws[0+Nn];for(xs=0;4>xs;++xs){On=$y[ls[vi+xs]][On];for(var Rn=sm[be(qr,On[0])];0<Rn;)Rn=sm[2*Rn+be(qr,On[Rn])];On=-Rn,ls[vi+xs]=On}i(li,wi,ls,vi,4),wi+=4,Ws[0+Nn]=On}}else On=be(qr,156)?be(qr,128)?1:3:be(qr,163)?2:0,Ns.Ob[0]=On,a(ls,vi,On,4),a(Ws,0,On,4);Ns.Dd=be(qr,142)?be(qr,114)?be(qr,183)?1:3:2:0}if(Rs.m.Ka)return pr(_n,7,"Premature end-of-partition0 encountered.");for(;_n.ja<_n.za;++_n.ja){if(Rs=br,qr=(ar=_n).rb[ar.sb-1],ls=ar.rb[ar.sb+ar.ja],un=ar.ya[ar.aa+ar.ja],vi=ar.kc?un.Ad:0)qr.la=ls.la=0,un.Za||(qr.Na=ls.Na=0),un.Hc=0,un.Gc=0,un.ia=0;else{var bs,Qn;if(qr=ls,ls=Rs,vi=ar.Pa.Xc,Ws=ar.ya[ar.aa+ar.ja],Ns=ar.pb[Ws.$b],Nn=Ws.ad,li=0,wi=ar.rb[ar.sb-1],On=xs=0,a(Nn,li,0,384),Ws.Za)var _s=0,Es=vi[3];else{Rn=o(16);var ts=qr.Na+wi.Na;if(ts=yc(ls,vi[1],ts,Ns.Eb,0,Rn,0),qr.Na=wi.Na=(0<ts)+0,1<ts)Ds(Rn,0,Nn,li);else{var Li=Rn[0]+3>>3;for(Rn=0;256>Rn;Rn+=16)Nn[li+Rn]=Li}_s=1,Es=vi[0]}var Jn=15&qr.la,rs=15&wi.la;for(Rn=0;4>Rn;++Rn){var qs=1&rs;for(Li=Qn=0;4>Li;++Li)Jn=Jn>>1|(qs=(ts=yc(ls,Es,ts=qs+(1&Jn),Ns.Sc,_s,Nn,li))>_s)<<7,Qn=Qn<<2|(3<ts?3:1<ts?2:Nn[li+0]!=0),li+=16;Jn>>=4,rs=rs>>1|qs<<7,xs=(xs<<8|Qn)>>>0}for(Es=Jn,_s=rs>>4,bs=0;4>bs;bs+=2){for(Qn=0,Jn=qr.la>>4+bs,rs=wi.la>>4+bs,Rn=0;2>Rn;++Rn){for(qs=1&rs,Li=0;2>Li;++Li)ts=qs+(1&Jn),Jn=Jn>>1|(qs=0<(ts=yc(ls,vi[2],ts,Ns.Qc,0,Nn,li)))<<3,Qn=Qn<<2|(3<ts?3:1<ts?2:Nn[li+0]!=0),li+=16;Jn>>=2,rs=rs>>1|qs<<5}On|=Qn<<4*bs,Es|=Jn<<4<<bs,_s|=(240&rs)<<bs}qr.la=Es,wi.la=_s,Ws.Hc=xs,Ws.Gc=On,Ws.ia=43690&On?0:Ns.ia,vi=!(xs|On)}if(0<ar.L&&(ar.wa[ar.Y+ar.ja]=ar.gd[un.$b][un.Za],ar.wa[ar.Y+ar.ja].La|=!vi),Rs.Ka)return pr(_n,7,"Premature end-of-file encountered.")}if(Wr(_n),ar=ks,Rs=1,un=(br=_n).D,qr=0<br.L&&br.M>=br.zb&&br.M<=br.Va,br.Aa==0)t:{if(un.M=br.M,un.uc=qr,Ko(br,un),Rs=1,un=(Qn=br.D).Nb,qr=(On=vc[br.L])*br.R,ls=On/2*br.B,Rn=16*un*br.R,Li=8*un*br.B,vi=br.sa,Ws=br.ta-qr+Rn,Ns=br.qa,Nn=br.ra-ls+Li,li=br.Ha,wi=br.Ia-ls+Li,rs=(Jn=Qn.M)==0,xs=Jn>=br.Va-1,br.Aa==2&&Ko(br,Qn),Qn.uc)for(qs=(ts=br).D.M,t(ts.D.uc),Qn=ts.yb;Qn<ts.Hb;++Qn){_s=Qn,Es=qs;var Oi=(pa=(Hs=ts).D).Nb;bs=Hs.R;var pa=pa.wa[pa.Y+_s],Qs=Hs.sa,$s=Hs.ta+16*Oi*bs+16*_s,Di=pa.dd,ns=pa.tc;if(ns!=0)if(t(3<=ns),Hs.L==1)0<_s&&zh(Qs,$s,bs,ns+4),pa.La&&fc(Qs,$s,bs,ns),0<Es&&yA(Qs,$s,bs,ns+4),pa.La&&Ad(Qs,$s,bs,ns);else{var Mi=Hs.B,Va=Hs.qa,no=Hs.ra+8*Oi*Mi+8*_s,ji=Hs.Ha,Hs=Hs.Ia+8*Oi*Mi+8*_s;Oi=pa.ld,0<_s&&(Vh(Qs,$s,bs,ns+4,Di,Oi),Zp(Va,no,ji,Hs,Mi,ns+4,Di,Oi)),pa.La&&(hc(Qs,$s,bs,ns,Di,Oi),eu(Va,no,ji,Hs,Mi,ns,Di,Oi)),0<Es&&(Hh(Qs,$s,bs,ns+4,Di,Oi),mA(Va,no,ji,Hs,Mi,ns+4,Di,Oi)),pa.La&&(em(Qs,$s,bs,ns,Di,Oi),gA(Va,no,ji,Hs,Mi,ns,Di,Oi))}}if(br.ia&&alert("todo:DitherRow"),ar.put!=null){if(Qn=16*Jn,Jn=16*(Jn+1),rs?(ar.y=br.sa,ar.O=br.ta+Rn,ar.f=br.qa,ar.N=br.ra+Li,ar.ea=br.Ha,ar.W=br.Ia+Li):(Qn-=On,ar.y=vi,ar.O=Ws,ar.f=Ns,ar.N=Nn,ar.ea=li,ar.W=wi),xs||(Jn-=On),Jn>ar.o&&(Jn=ar.o),ar.F=null,ar.J=null,br.Fa!=null&&0<br.Fa.length&&Qn<Jn&&(ar.J=wn(br,ar,Qn,Jn-Qn),ar.F=br.mb,ar.F==null&&ar.F.length==0)){Rs=pr(br,3,"Could not decode alpha data.");break t}Qn<ar.j&&(On=ar.j-Qn,Qn=ar.j,t(!(1&On)),ar.O+=br.R*On,ar.N+=br.B*(On>>1),ar.W+=br.B*(On>>1),ar.F!=null&&(ar.J+=ar.width*On)),Qn<Jn&&(ar.O+=ar.v,ar.N+=ar.v>>1,ar.W+=ar.v>>1,ar.F!=null&&(ar.J+=ar.v),ar.ka=Qn-ar.j,ar.U=ar.va-ar.v,ar.T=Jn-Qn,Rs=ar.put(ar))}un+1!=br.Ic||xs||(i(br.sa,br.ta-qr,vi,Ws+16*br.R,qr),i(br.qa,br.ra-ls,Ns,Nn+8*br.B,ls),i(br.Ha,br.Ia-ls,li,wi+8*br.B,ls))}if(!Rs)return pr(_n,6,"Output aborted.")}return 1})(Ke,ot)),ot.bc!=null&&ot.bc(ot),At&=1}return At?(Ke.cb=0,At):0})(V,pe)||(J=V.a)}}else J=V.a}J==0&&Ie.Oa!=null&&Ie.Oa.fd&&(J=Yi(Ie.ba))}Ie=J}Oe=Ie!=0?null:11>Oe?Ue.f.RGBA.eb:Ue.f.kb.y}else Oe=null;return Oe};var vd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(N,O){for(var k="",I=0;I<4;I++)k+=String.fromCharCode(N[O++]);return k}function A(N,O){return N[O+0]|N[O+1]<<8}function f(N,O){return(N[O+0]|N[O+1]<<8|N[O+2]<<16)>>>0}function p(N,O){return(N[O+0]|N[O+1]<<8|N[O+2]<<16|N[O+3]<<24)>>>0}new u;var m=[0],g=[0],b=[],v=new u,y=r,w=(function(N,O){var k={},I=0,R=!1,Q=0,$=0;if(k.frames=[],!(function(U,K){for(var z=0;z<4;z++)if(U[K+z]!="RIFF".charCodeAt(z))return!0;return!1})(N,O)){for(p(N,O+=4),O+=8;O<N.length;){var L=d(N,O),F=p(N,O+=4);O+=4;var G=F+(1&F);switch(L){case"VP8 ":case"VP8L":k.frames[I]===void 0&&(k.frames[I]={}),(T=k.frames[I]).src_off=R?$:O-8,T.src_size=Q+F+8,I++,R&&(R=!1,Q=0,$=0);break;case"VP8X":(T=k.header={}).feature_flags=N[O];var X=O+4;T.canvas_width=1+f(N,X),X+=3,T.canvas_height=1+f(N,X),X+=3;break;case"ALPH":R=!0,Q=G+8,$=O-8;break;case"ANIM":(T=k.header).bgcolor=p(N,O),X=O+4,T.loop_count=A(N,X),X+=2;break;case"ANMF":var q,T;(T=k.frames[I]={}).offset_x=2*f(N,O),O+=3,T.offset_y=2*f(N,O),O+=3,T.width=1+f(N,O),O+=3,T.height=1+f(N,O),O+=3,T.duration=f(N,O),O+=3,q=N[O++],T.dispose=1&q,T.blend=q>>1&1}L!="ANMF"&&(O+=G)}return k}})(y,0);w.response=y,w.rgbaoutput=!0,w.dataurl=!1;var j=w.header?w.header:null,C=w.frames?w.frames:null;if(j){j.loop_counter=j.loop_count,m=[j.canvas_height],g=[j.canvas_width];for(var B=0;B<C.length&&C[B].blend!=0;B++);}var E=C[0],_=v.WebPDecodeRGBA(y,E.src_off,E.src_size,g,m);E.rgba=_,E.imgwidth=g[0],E.imgheight=m[0];for(var S=0;S<g[0]*m[0]*4;S++)b[S]=_[S];return this.width=g,this.height=m,this.data=b,this}(function(r){var t,s,i,a,o,c,l,u,d,A=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new u,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new c,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new c,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,s=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,c=this.internal.Point,l=this.internal.Rectangle,u=this.internal.Matrix,d=new A}]);var f=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=U;Object.defineProperty(this,"pdf",{get:function(){return K}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(Z){z=!!Z}});var M=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return M},set:function(Z){M=!!Z}});var H=0;Object.defineProperty(this,"posX",{get:function(){return H},set:function(Z){isNaN(Z)||(H=Z)}});var Y=0;Object.defineProperty(this,"posY",{get:function(){return Y},set:function(Z){isNaN(Z)||(Y=Z)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Z){var te;typeof Z=="number"?te=[Z,Z,Z,Z]:((te=new Array(4))[0]=Z[0],te[1]=Z.length>=2?Z[1]:te[0],te[2]=Z.length>=3?Z[2]:te[0],te[3]=Z.length>=4?Z[3]:te[1]),d.margin=te}});var ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ae},set:function(Z){ae=Z}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(Z){oe=Z}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(Z){be=Z}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Z){Z instanceof A&&(d=Z)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Z){d.path=Z}});var ge=[];Object.defineProperty(this,"ctxStack",{get:function(){return ge},set:function(Z){ge=Z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Z){var te;te=p(Z),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Z){var te=p(Z);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Z){["butt","round","square"].indexOf(Z)!==-1&&(this.ctx.lineCap=Z,this.pdf.setLineCap(Z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Z){isNaN(Z)||(this.ctx.lineWidth=Z,this.pdf.setLineWidth(Z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Z){["bevel","round","miter"].indexOf(Z)!==-1&&(this.ctx.lineJoin=Z,this.pdf.setLineJoin(Z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Z){isNaN(Z)||(this.ctx.miterLimit=Z,this.pdf.setMiterLimit(Z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Z){this.ctx.textBaseline=Z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Z){["right","end","center","left","start"].indexOf(Z)!==-1&&(this.ctx.textAlign=Z)}});var he=null,ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return ke},set:function(Z){he=null,ke=Z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Z){var te;if(this.ctx.font=Z,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Z))!==null){var fe=te[1];te[2];var we=te[3],Fe=te[4];te[5];var _e=te[6],Ce=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Fe)[2];Fe=Math.floor(Ce==="px"?parseFloat(Fe)*this.pdf.internal.scaleFactor:Ce==="em"?parseFloat(Fe)*this.pdf.getFontSize():parseFloat(Fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Fe);var ie=(function(Ye){var He,it,It=[],dt=Ye.trim();if(dt==="")return Tb;if(dt in lS)return[lS[dt]];for(;dt!=="";){switch(it=null,He=(dt=uS(dt)).charAt(0)){case'"':case"'":it=mK(dt.substring(1),He);break;default:it=gK(dt)}if(it===null||(It.push(it[0]),(dt=uS(it[1]))!==""&&dt.charAt(0)!==","))return Tb;dt=dt.replace(/^,/,"")}return It})(_e);if(this.fontFaces){var me=(function(Ye,He){if(he===null){var it=(function(It){var dt=[];return Object.keys(It).forEach(function(Pt){It[Pt].forEach(function(vt){var tr=null;switch(vt){case"bold":tr={family:Pt,weight:"bold"};break;case"italic":tr={family:Pt,style:"italic"};break;case"bolditalic":tr={family:Pt,weight:"bold",style:"italic"};break;case"":case"normal":tr={family:Pt}}tr!==null&&(tr.ref={name:Pt,style:vt},dt.push(tr))})}),dt})(Ye.getFontList());he=(function(It){for(var dt={},Pt=0;Pt<It.length;++Pt){var vt=Pb(It[Pt]),tr=vt.family,Jt=vt.stretch,Et=vt.style,ur=vt.weight;dt[tr]=dt[tr]||{},dt[tr][Jt]=dt[tr][Jt]||{},dt[tr][Jt][Et]=dt[tr][Jt][Et]||{},dt[tr][Jt][Et][ur]=vt}return dt})(it.concat(He))}return he})(this.pdf,this.fontFaces),Be=ie.map(function(Ye){return{family:Ye,stretch:"normal",weight:we,style:fe}}),Le=(function(Ye,He,it){for(var It=(it=it||{}).defaultFontFamily||"times",dt=Object.assign({},pK,it.genericFontFamilies||{}),Pt=null,vt=null,tr=0;tr<He.length;++tr)if(dt[(Pt=Pb(He[tr])).family]&&(Pt.family=dt[Pt.family]),Ye.hasOwnProperty(Pt.family)){vt=Ye[Pt.family];break}if(!(vt=vt||Ye[It]))throw new Error("Could not find a font-family for the rule '"+cS(Pt)+"' and default family '"+It+"'.");if(vt=(function(Jt,Et){if(Et[Jt])return Et[Jt];var ur=xw[Jt],vr=ur<=xw.normal?-1:1,Wt=oS(Et,r6,ur,vr);if(!Wt)throw new Error("Could not find a matching font-stretch value for "+Jt);return Wt})(Pt.stretch,vt),vt=(function(Jt,Et){if(Et[Jt])return Et[Jt];for(var ur=t6[Jt],vr=0;vr<ur.length;++vr)if(Et[ur[vr]])return Et[ur[vr]];throw new Error("Could not find a matching font-style for "+Jt)})(Pt.style,vt),!(vt=(function(Jt,Et){if(Et[Jt])return Et[Jt];if(Jt===400&&Et[500])return Et[500];if(Jt===500&&Et[400])return Et[400];var ur=fK[Jt],vr=oS(Et,n6,ur,Jt<400?-1:1);if(!vr)throw new Error("Could not find a matching font-weight for value "+Jt);return vr})(Pt.weight,vt)))throw new Error("Failed to resolve a font for the rule '"+cS(Pt)+"'.");return vt})(me,Be);this.pdf.setFont(Le.ref.name,Le.ref.style)}else{var ve="";(we==="bold"||parseInt(we,10)>=700||fe==="bold")&&(ve="bold"),fe==="italic"&&(ve+="italic"),ve.length===0&&(ve="normal");for(var $e="",je={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Pe=0;Pe<ie.length;Pe++){if(this.pdf.internal.getFont(ie[Pe],ve,{noFallback:!0,disableWarning:!0})!==void 0){$e=ie[Pe];break}if(ve==="bolditalic"&&this.pdf.internal.getFont(ie[Pe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)$e=ie[Pe],ve="bold";else if(this.pdf.internal.getFont(ie[Pe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){$e=ie[Pe],ve="normal";break}}if($e===""){for(var Te=0;Te<ie.length;Te++)if(je[ie[Te]]){$e=je[ie[Te]];break}}$e=$e===""?"Times":$e,this.pdf.setFont($e,ve)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Z){this.ctx.globalCompositeOperation=Z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Z){this.ctx.globalAlpha=Z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Z){this.ctx.lineDashOffset=Z,T.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Z){this.ctx.lineDash=Z,T.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Z){this.ctx.ignoreClearRect=!!Z}})};f.prototype.setLineDash=function(U){this.lineDash=U},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){C.call(this,"fill",!1)},f.prototype.stroke=function(){C.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(U,K){if(isNaN(U)||isNaN(K))throw hs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new c(U,K));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new c(U,K)},f.prototype.closePath=function(){var U=new c(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&ss(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){U=new c(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(U.x,U.y)},f.prototype.lineTo=function(U,K){if(isNaN(U)||isNaN(K))throw hs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new c(U,K));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new c(z.x,z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},f.prototype.quadraticCurveTo=function(U,K,z,M){if(isNaN(z)||isNaN(M)||isNaN(U)||isNaN(K))throw hs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var H=this.ctx.transform.applyToPoint(new c(z,M)),Y=this.ctx.transform.applyToPoint(new c(U,K));this.path.push({type:"qct",x1:Y.x,y1:Y.y,x:H.x,y:H.y}),this.ctx.lastPoint=new c(H.x,H.y)},f.prototype.bezierCurveTo=function(U,K,z,M,H,Y){if(isNaN(H)||isNaN(Y)||isNaN(U)||isNaN(K)||isNaN(z)||isNaN(M))throw hs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ae=this.ctx.transform.applyToPoint(new c(H,Y)),oe=this.ctx.transform.applyToPoint(new c(U,K)),be=this.ctx.transform.applyToPoint(new c(z,M));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:be.x,y2:be.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new c(ae.x,ae.y)},f.prototype.arc=function(U,K,z,M,H,Y){if(isNaN(U)||isNaN(K)||isNaN(z)||isNaN(M)||isNaN(H))throw hs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Y=!!Y,!this.ctx.transform.isIdentity){var ae=this.ctx.transform.applyToPoint(new c(U,K));U=ae.x,K=ae.y;var oe=this.ctx.transform.applyToPoint(new c(0,z)),be=this.ctx.transform.applyToPoint(new c(0,0));z=Math.sqrt(Math.pow(oe.x-be.x,2)+Math.pow(oe.y-be.y,2))}Math.abs(H-M)>=2*Math.PI&&(M=0,H=2*Math.PI),this.path.push({type:"arc",x:U,y:K,radius:z,startAngle:M,endAngle:H,counterclockwise:Y})},f.prototype.arcTo=function(U,K,z,M,H){throw new Error("arcTo not implemented.")},f.prototype.rect=function(U,K,z,M){if(isNaN(U)||isNaN(K)||isNaN(z)||isNaN(M))throw hs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,K),this.lineTo(U+z,K),this.lineTo(U+z,K+M),this.lineTo(U,K+M),this.lineTo(U,K),this.lineTo(U+z,K),this.lineTo(U,K)},f.prototype.fillRect=function(U,K,z,M){if(isNaN(U)||isNaN(K)||isNaN(z)||isNaN(M))throw hs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var H={};this.lineCap!=="butt"&&(H.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(H.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,K,z,M),this.fill(),H.hasOwnProperty("lineCap")&&(this.lineCap=H.lineCap),H.hasOwnProperty("lineJoin")&&(this.lineJoin=H.lineJoin)}},f.prototype.strokeRect=function(U,K,z,M){if(isNaN(U)||isNaN(K)||isNaN(z)||isNaN(M))throw hs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(U,K,z,M),this.stroke())},f.prototype.clearRect=function(U,K,z,M){if(isNaN(U)||isNaN(K)||isNaN(z)||isNaN(M))throw hs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,K,z,M))},f.prototype.save=function(U){U=typeof U!="boolean"||U;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var M=new A(this.ctx);this.ctxStack.push(this.ctx),this.ctx=M}},f.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(K),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(U){var K,z,M,H;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))K=0,z=0,M=0,H=0;else{var Y=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(Y!==null)K=parseInt(Y[1]),z=parseInt(Y[2]),M=parseInt(Y[3]),H=1;else if((Y=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)K=parseInt(Y[1]),z=parseInt(Y[2]),M=parseInt(Y[3]),H=parseFloat(Y[4]);else{if(H=1,typeof U=="string"&&U.charAt(0)!=="#"){var ae=new WE(U);U=ae.ok?ae.toHex():"#000000"}U.length===4?(K=U.substring(1,2),K+=K,z=U.substring(2,3),z+=z,M=U.substring(3,4),M+=M):(K=U.substring(1,3),z=U.substring(3,5),M=U.substring(5,7)),K=parseInt(K,16),z=parseInt(z,16),M=parseInt(M,16)}}return{r:K,g:z,b:M,a:H,style:U}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(U,K,z,M){if(isNaN(K)||isNaN(z)||typeof U!="string")throw hs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(M=isNaN(M)?void 0:M,!m.call(this)){var H=G(this.ctx.transform.rotation),Y=this.ctx.transform.scaleX;I.call(this,{text:U,x:K,y:z,scale:Y,angle:H,align:this.textAlign,maxWidth:M})}},f.prototype.strokeText=function(U,K,z,M){if(isNaN(K)||isNaN(z)||typeof U!="string")throw hs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){M=isNaN(M)?void 0:M;var H=G(this.ctx.transform.rotation),Y=this.ctx.transform.scaleX;I.call(this,{text:U,x:K,y:z,scale:Y,renderingMode:"stroke",angle:H,align:this.textAlign,maxWidth:M})}},f.prototype.measureText=function(U){if(typeof U!="string")throw hs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,z=this.pdf.internal.scaleFactor,M=K.internal.getFontSize(),H=K.getStringUnitWidth(U)*M/K.internal.scaleFactor;return new function(Y){var ae=(Y=Y||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this}({width:H*=Math.round(96*z/72*1e4)/1e4})},f.prototype.scale=function(U,K){if(isNaN(U)||isNaN(K))throw hs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new u(U,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.rotate=function(U){if(isNaN(U))throw hs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new u(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.translate=function(U,K){if(isNaN(U)||isNaN(K))throw hs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new u(1,0,0,1,U,K);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.transform=function(U,K,z,M,H,Y){if(isNaN(U)||isNaN(K)||isNaN(z)||isNaN(M)||isNaN(H)||isNaN(Y))throw hs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ae=new u(U,K,z,M,H,Y);this.ctx.transform=this.ctx.transform.multiply(ae)},f.prototype.setTransform=function(U,K,z,M,H,Y){U=isNaN(U)?1:U,K=isNaN(K)?0:K,z=isNaN(z)?0:z,M=isNaN(M)?1:M,H=isNaN(H)?0:H,Y=isNaN(Y)?0:Y,this.ctx.transform=new u(U,K,z,M,H,Y)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(U,K,z,M,H,Y,ae,oe,be){var ge=this.pdf.getImageProperties(U),he=1,ke=1,Z=1,te=1;M!==void 0&&oe!==void 0&&(Z=oe/M,te=be/H,he=ge.width/M*oe/M,ke=ge.height/H*be/H),Y===void 0&&(Y=K,ae=z,K=0,z=0),M!==void 0&&oe===void 0&&(oe=M,be=H),M===void 0&&oe===void 0&&(oe=ge.width,be=ge.height);for(var fe,we=this.ctx.transform.decompose(),Fe=G(we.rotate.shx),_e=new u,Ce=(_e=(_e=(_e=_e.multiply(we.translate)).multiply(we.skew)).multiply(we.scale)).applyToRectangle(new l(Y-K*Z,ae-z*te,M*he,H*ke)),ie=v.call(this,Ce),me=[],Be=0;Be<ie.length;Be+=1)me.indexOf(ie[Be])===-1&&me.push(ie[Be]);if(j(me),this.autoPaging)for(var Le=me[0],ve=me[me.length-1],$e=Le;$e<ve+1;$e++){this.pdf.setPage($e);var je=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pe=$e===1?this.posY+this.margin[0]:this.margin[0],Te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ye=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],He=$e===1?0:Te+($e-2)*Ye;if(this.ctx.clip_path.length!==0){var it=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(fe,this.posX+this.margin[3],-He+Pe+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=it}var It=JSON.parse(JSON.stringify(Ce));It=w([It],this.posX+this.margin[3],-He+Pe+this.ctx.prevPageLastElemOffset)[0];var dt=($e>Le||$e<ve)&&b.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],je,Ye,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",It.x,It.y,It.w,It.h,null,null,Fe),dt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(U,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,Fe)};var v=function(U,K,z){var M=[];K=K||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var H=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":M.push(Math.floor((U.y+H)/z)+1);break;case"arc":M.push(Math.floor((U.y+H-U.radius)/z)+1),M.push(Math.floor((U.y+H+U.radius)/z)+1);break;case"qct":var Y=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);M.push(Math.floor((Y.y+H)/z)+1),M.push(Math.floor((Y.y+Y.h+H)/z)+1);break;case"bct":var ae=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);M.push(Math.floor((ae.y+H)/z)+1),M.push(Math.floor((ae.y+ae.h+H)/z)+1);break;case"rect":M.push(Math.floor((U.y+H)/z)+1),M.push(Math.floor((U.y+U.h+H)/z)+1)}for(var oe=0;oe<M.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<M[oe];)y.call(this);return M},y=function(){var U=this.fillStyle,K=this.strokeStyle,z=this.font,M=this.lineCap,H=this.lineWidth,Y=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=K,this.font=z,this.lineCap=M,this.lineWidth=H,this.lineJoin=Y},w=function(U,K,z){for(var M=0;M<U.length;M++)switch(U[M].type){case"bct":U[M].x2+=K,U[M].y2+=z;case"qct":U[M].x1+=K,U[M].y1+=z;default:U[M].x+=K,U[M].y+=z}return U},j=function(U){return U.sort(function(K,z){return K-z})},C=function(U,K){for(var z,M,H=this.fillStyle,Y=this.strokeStyle,ae=this.lineCap,oe=this.lineWidth,be=Math.abs(oe*this.ctx.transform.scaleX),ge=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),Z=[],te=0;te<ke.length;te++)if(ke[te].x!==void 0)for(var fe=v.call(this,ke[te]),we=0;we<fe.length;we+=1)Z.indexOf(fe[we])===-1&&Z.push(fe[we]);for(var Fe=0;Fe<Z.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<Z[Fe];)y.call(this);if(j(Z),this.autoPaging)for(var _e=Z[0],Ce=Z[Z.length-1],ie=_e;ie<Ce+1;ie++){this.pdf.setPage(ie),this.fillStyle=H,this.strokeStyle=Y,this.lineCap=ae,this.lineWidth=be,this.lineJoin=ge;var me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=ie===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$e=ie===1?0:Le+(ie-2)*ve;if(this.ctx.clip_path.length!==0){var je=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(z,this.posX+this.margin[3],-$e+Be+this.ctx.prevPageLastElemOffset),B.call(this,U,!0),this.path=je}if(M=JSON.parse(JSON.stringify(he)),this.path=w(M,this.posX+this.margin[3],-$e+Be+this.ctx.prevPageLastElemOffset),K===!1||ie===0){var Pe=(ie>_e||ie<Ce)&&b.call(this);Pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],me,ve,null).clip().discardPath()),B.call(this,U,K),Pe&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=be,B.call(this,U,K),this.lineWidth=oe;this.path=he},B=function(U,K){if((U!=="stroke"||K||!g.call(this))&&(U==="stroke"||K||!m.call(this))){for(var z,M,H=[],Y=this.path,ae=0;ae<Y.length;ae++){var oe=Y[ae];switch(oe.type){case"begin":H.push({begin:!0});break;case"close":H.push({close:!0});break;case"mt":H.push({start:oe,deltas:[],abs:[]});break;case"lt":var be=H.length;if(Y[ae-1]&&!isNaN(Y[ae-1].x)&&(z=[oe.x-Y[ae-1].x,oe.y-Y[ae-1].y],be>0)){for(;be>=0;be--)if(H[be-1].close!==!0&&H[be-1].begin!==!0){H[be-1].deltas.push(z),H[be-1].abs.push(oe);break}}break;case"bct":z=[oe.x1-Y[ae-1].x,oe.y1-Y[ae-1].y,oe.x2-Y[ae-1].x,oe.y2-Y[ae-1].y,oe.x-Y[ae-1].x,oe.y-Y[ae-1].y],H[H.length-1].deltas.push(z);break;case"qct":var ge=Y[ae-1].x+2/3*(oe.x1-Y[ae-1].x),he=Y[ae-1].y+2/3*(oe.y1-Y[ae-1].y),ke=oe.x+2/3*(oe.x1-oe.x),Z=oe.y+2/3*(oe.y1-oe.y),te=oe.x,fe=oe.y;z=[ge-Y[ae-1].x,he-Y[ae-1].y,ke-Y[ae-1].x,Z-Y[ae-1].y,te-Y[ae-1].x,fe-Y[ae-1].y],H[H.length-1].deltas.push(z);break;case"arc":H.push({deltas:[],abs:[],arc:!0}),Array.isArray(H[H.length-1].abs)&&H[H.length-1].abs.push(oe)}}M=K?null:U==="stroke"?"stroke":"fill";for(var we=!1,Fe=0;Fe<H.length;Fe++)if(H[Fe].arc)for(var _e=H[Fe].abs,Ce=0;Ce<_e.length;Ce++){var ie=_e[Ce];ie.type==="arc"?S.call(this,ie.x,ie.y,ie.radius,ie.startAngle,ie.endAngle,ie.counterclockwise,void 0,K,!we):R.call(this,ie.x,ie.y),we=!0}else if(H[Fe].close===!0)this.pdf.internal.out("h"),we=!1;else if(H[Fe].begin!==!0){var me=H[Fe].start.x,Be=H[Fe].start.y;Q.call(this,H[Fe].deltas,me,Be),we=!0}M&&N.call(this,M),K&&O.call(this)}},E=function(U){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-z;case"top":return U+K-z;case"hanging":return U+K-2*z;case"middle":return U+K/2-z;default:return U}},_=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(K,z){this.colorStops.push([K,z])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(U,K,z,M,H,Y,ae,oe,be){for(var ge=L.call(this,z,M,H,Y),he=0;he<ge.length;he++){var ke=ge[he];he===0&&(be?k.call(this,ke.x1+U,ke.y1+K):R.call(this,ke.x1+U,ke.y1+K)),$.call(this,U,K,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}oe?O.call(this):N.call(this,ae)},N=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(U,K){this.pdf.internal.out(s(U)+" "+i(K)+" m")},I=function(U){var K;switch(U.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var z=this.pdf.getTextDimensions(U.text),M=E.call(this,U.y),H=_.call(this,M)-z.h,Y=this.ctx.transform.applyToPoint(new c(U.x,M)),ae=this.ctx.transform.decompose(),oe=new u;oe=(oe=(oe=oe.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale);for(var be,ge,he,ke=this.ctx.transform.applyToRectangle(new l(U.x,M,z.w,z.h)),Z=oe.applyToRectangle(new l(U.x,H,z.w,z.h)),te=v.call(this,Z),fe=[],we=0;we<te.length;we+=1)fe.indexOf(te[we])===-1&&fe.push(te[we]);if(j(fe),this.autoPaging)for(var Fe=fe[0],_e=fe[fe.length-1],Ce=Fe;Ce<_e+1;Ce++){this.pdf.setPage(Ce);var ie=Ce===1?this.posY+this.margin[0]:this.margin[0],me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[2],Le=Be-this.margin[0],ve=this.pdf.internal.pageSize.width-this.margin[1],$e=ve-this.margin[3],je=Ce===1?0:me+(Ce-2)*Le;if(this.ctx.clip_path.length!==0){var Pe=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(be,this.posX+this.margin[3],-1*je+ie),B.call(this,"fill",!0),this.path=Pe}var Te=w([JSON.parse(JSON.stringify(Z))],this.posX+this.margin[3],-je+ie+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(ge=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ge*U.scale),he=this.lineWidth,this.lineWidth=he*U.scale);var Ye=this.autoPaging!=="text";if(Ye||Te.y+Te.h<=Be){if(Ye||Te.y>=ie&&Te.x<=ve){var He=Ye?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||ve-Te.x)[0],it=w([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-je+ie+this.ctx.prevPageLastElemOffset)[0],It=Ye&&(Ce>Fe||Ce<_e)&&b.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,Le,null).clip().discardPath()),this.pdf.text(He,it.x,it.y,{angle:U.angle,align:K,renderingMode:U.renderingMode}),It&&this.pdf.restoreGraphicsState()}}else Te.y<Be&&(this.ctx.prevPageLastElemOffset+=Be-Te.y);U.scale>=.01&&(this.pdf.setFontSize(ge),this.lineWidth=he)}else U.scale>=.01&&(ge=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ge*U.scale),he=this.lineWidth,this.lineWidth=he*U.scale),this.pdf.text(U.text,Y.x+this.posX,Y.y+this.posY,{angle:U.angle,align:K,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(ge),this.lineWidth=he)},R=function(U,K,z,M){z=z||0,M=M||0,this.pdf.internal.out(s(U+z)+" "+i(K+M)+" l")},Q=function(U,K,z){return this.pdf.lines(U,K,z,null,null)},$=function(U,K,z,M,H,Y,ae,oe){this.pdf.internal.out([t(a(z+U)),t(o(M+K)),t(a(H+U)),t(o(Y+K)),t(a(ae+U)),t(o(oe+K)),"c"].join(" "))},L=function(U,K,z,M){for(var H=2*Math.PI,Y=Math.PI/2;K>z;)K-=H;var ae=Math.abs(z-K);ae<H&&M&&(ae=H-ae);for(var oe=[],be=M?-1:1,ge=K;ae>1e-5;){var he=ge+be*Math.min(ae,Y);oe.push(F.call(this,U,ge,he)),ae-=Math.abs(he-ge),ge=he}return oe},F=function(U,K,z){var M=(z-K)/2,H=U*Math.cos(M),Y=U*Math.sin(M),ae=H,oe=-Y,be=ae*ae+oe*oe,ge=be+ae*H+oe*Y,he=4/3*(Math.sqrt(2*be*ge)-ge)/(ae*Y-oe*H),ke=ae-he*oe,Z=oe+he*ae,te=ke,fe=-Z,we=M+K,Fe=Math.cos(we),_e=Math.sin(we);return{x1:U*Math.cos(K),y1:U*Math.sin(K),x2:ke*Fe-Z*_e,y2:ke*_e+Z*Fe,x3:te*Fe-fe*_e,y3:te*_e+fe*Fe,x4:U*Math.cos(z),y4:U*Math.sin(z)}},G=function(U){return 180*U/Math.PI},X=function(U,K,z,M,H,Y){var ae=U+.5*(z-U),oe=K+.5*(M-K),be=H+.5*(z-H),ge=Y+.5*(M-Y),he=Math.min(U,H,ae,be),ke=Math.max(U,H,ae,be),Z=Math.min(K,Y,oe,ge),te=Math.max(K,Y,oe,ge);return new l(he,Z,ke-he,te-Z)},q=function(U,K,z,M,H,Y,ae,oe){var be,ge,he,ke,Z,te,fe,we,Fe,_e,Ce,ie,me,Be,Le=z-U,ve=M-K,$e=H-z,je=Y-M,Pe=ae-H,Te=oe-Y;for(ge=0;ge<41;ge++)Fe=(fe=(he=U+(be=ge/40)*Le)+be*((Z=z+be*$e)-he))+be*(Z+be*(H+be*Pe-Z)-fe),_e=(we=(ke=K+be*ve)+be*((te=M+be*je)-ke))+be*(te+be*(Y+be*Te-te)-we),ge==0?(Ce=Fe,ie=_e,me=Fe,Be=_e):(Ce=Math.min(Ce,Fe),ie=Math.min(ie,_e),me=Math.max(me,Fe),Be=Math.max(Be,_e));return new l(Math.round(Ce),Math.round(ie),Math.round(me-Ce),Math.round(Be-ie))},T=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,K,z=(U=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:K}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(Tr.API),(function(r){var t=function(c){var l,u,d,A,f,p,m,g,b,v;for(u=[],d=0,A=(c+=l="\0\0\0\0".slice(c.length%4||4)).length;A>d;d+=4)(f=(c.charCodeAt(d)<<24)+(c.charCodeAt(d+1)<<16)+(c.charCodeAt(d+2)<<8)+c.charCodeAt(d+3))!==0?(p=(f=((f=((f=((f=(f-(v=f%85))/85)-(b=f%85))/85)-(g=f%85))/85)-(m=f%85))/85)%85,u.push(p+33,m+33,g+33,b+33,v+33)):u.push(122);return(function(y,w){for(var j=w;j>0;j--)y.pop()})(u,l.length),String.fromCharCode.apply(String,u)+"~>"},s=function(c){var l,u,d,A,f,p=String,m="length",g=255,b="charCodeAt",v="slice",y="replace";for(c[v](-2),c=c[v](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),d=[],A=0,f=(c+=l="uuuuu"[v](c[m]%5||5))[m];f>A;A+=5)u=52200625*(c[b](A)-33)+614125*(c[b](A+1)-33)+7225*(c[b](A+2)-33)+85*(c[b](A+3)-33)+(c[b](A+4)-33),d.push(g&u>>24,g&u>>16,g&u>>8,g&u);return(function(w,j){for(var C=j;C>0;C--)w.pop()})(d,l[m]),p.fromCharCode.apply(p,d)},i=function(c){return c.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(c){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),l.test(c)===!1)return"";for(var u="",d=0;d<c.length;d+=2)u+=String.fromCharCode("0x"+(c[d]+c[d+1]));return u},o=function(c){for(var l=new Uint8Array(c.length),u=c.length;u--;)l[u]=c.charCodeAt(u);return(l=Aw(l)).reduce(function(d,A){return d+String.fromCharCode(A)},"")};r.processDataByFilters=function(c,l){var u=0,d=c||"",A=[];for(typeof(l=l||[])=="string"&&(l=[l]),u=0;u<l.length;u+=1)switch(l[u]){case"ASCII85Decode":case"/ASCII85Decode":d=s(d),A.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),A.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),A.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=i(d),A.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=o(d),A.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[u]+'" is not implemented')}return{data:d,reverseChain:A.reverse().join(" ")}}})(Tr.API),(function(r){r.loadFile=function(t,s,i){return(function(a,o,c){o=o!==!1,c=typeof c=="function"?c:function(){};var l=void 0;try{l=(function(u,d,A){var f=new XMLHttpRequest,p=0,m=function(g){var b=g.length,v=[],y=String.fromCharCode;for(p=0;p<b;p+=1)v.push(y(255&g.charCodeAt(p)));return v.join("")};if(f.open("GET",u,!d),f.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(f.onload=function(){f.status===200?A(m(this.responseText)):A(void 0)}),f.send(null),d&&f.status===200)return m(f.responseText)})(a,o,c)}catch{}return l})(t,s,i)},r.loadImageFile=r.loadFile})(Tr.API),(function(r){function t(){return(tn.html2canvas?Promise.resolve(tn.html2canvas):pb(()=>Promise.resolve().then(()=>oJ),void 0)).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function s(){return(tn.DOMPurify?Promise.resolve(tn.DOMPurify):pb(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var i=function(l){var u=ss(l);return u==="undefined"?"undefined":u==="string"||l instanceof String?"string":u==="number"||l instanceof Number?"number":u==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":u==="object"?"object":"unknown"},a=function(l,u){var d=document.createElement(l);for(var A in u.className&&(d.className=u.className),u.innerHTML&&u.dompurify&&(d.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)d.style[A]=u.style[A];return d},o=function l(u,d){for(var A=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),f=u.firstChild;f;f=f.nextSibling)d!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||A.appendChild(l(f,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(A.width=u.width,A.height=u.height,A.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(A.value=u.value),A.addEventListener("load",function(){A.scrollTop=u.scrollTop,A.scrollLeft=u.scrollLeft},!0)),A},c=function l(u){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),A=l.convert(Promise.resolve(),d);return(A=A.setProgress(1,l,1,[l])).set(u)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(l,u){return l.__proto__=u||c.prototype,l},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(l,u){return this.then(function(){switch(u=u||(function(d){switch(i(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),u){case"string":return this.then(s).then(function(d){return this.set({src:a("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},c.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(u){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,u(this.prop.container,d)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(u){var d=this.opt.jsPDF,A=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=A,A)for(var m=0;m<A.length;++m){var g=A[m],b=g.src.find(function(v){return v.format==="truetype"});b&&d.addFont(b.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,d.context2d.save(!0),u(this.prop.container,p)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(l,u,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,u):this.outputPdf(l,u)},c.prototype.outputPdf=function(l,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,u)})},c.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},c.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(l){if(i(l)!=="object")return this;var u=Object.keys(l||{}).map(function(d){if(d in c.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(u)})},c.prototype.get=function(l,u){return this.then(function(){var d=l in c.template.prop?this.prop[l]:this.opt[l];return u?u(d):d})},c.prototype.setMargin=function(l){return this.then(function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},c.prototype.setPageSize=function(l){function u(d,A){return Math.floor(d*A/72*96)}return this.then(function(){(l=l||Tr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:u(l.inner.width,l.k),height:u(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},c.prototype.setProgress=function(l,u,d,A){return l!=null&&(this.progress.val=l),u!=null&&(this.progress.state=u),d!=null&&(this.progress.n=d),A!=null&&(this.progress.stack=A),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(l,u,d,A){return this.setProgress(l?this.progress.val+l:null,u||null,d?this.progress.n+d:null,A?this.progress.stack.concat(A):null)},c.prototype.then=function(l,u){var d=this;return this.thenCore(l,u,function(A,f){return d.updateProgress(null,null,1,[A]),Promise.prototype.then.call(this,function(p){return d.updateProgress(null,A),p}).then(A,f).then(function(p){return d.updateProgress(1),p})})},c.prototype.thenCore=function(l,u,d){d=d||Promise.prototype.then;var A=this;l&&(l=l.bind(A)),u&&(u=u.bind(A));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?A:c.convert(Object.assign({},A),Promise.prototype),p=d.call(f,l,u);return c.convert(p,A.__proto__)},c.prototype.thenExternal=function(l,u){return Promise.prototype.then.call(this,l,u)},c.prototype.thenList=function(l){var u=this;return l.forEach(function(d){u=u.thenCore(d)}),u},c.prototype.catch=function(l){l&&(l=l.bind(this));var u=Promise.prototype.catch.call(this,l);return c.convert(u,this)},c.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},c.prototype.error=function(l){return this.then(function(){throw new Error(l)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Tr.getPageSize=function(l,u,d){if(ss(l)==="object"){var A=l;l=A.orientation,u=A.unit||u,d=A.format||d}u=u||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var f,p=(""+d).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+u}var g,b=0,v=0;if(m.hasOwnProperty(p))b=m[p][1]/f,v=m[p][0]/f;else try{b=d[1],v=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",v>b&&(g=v,v=b,b=g);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",b>v&&(g=v,v=b,b=g)}return{width:v,height:b,unit:u,k:f,orientation:l}},r.html=function(l,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(Pb):null;var d=new c(u);return u.worker?d:d.from(l).doCallback()}})(Tr.API),Tr.API.addJS=function(r){return AS=r,this.internal.events.subscribe("postPutResources",function(){Zm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Zm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),dS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+AS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Zm!==void 0&&dS!==void 0&&this.internal.out("/Names <</JavaScript "+Zm+" 0 R>>")}),this},(function(r){var t;r.events.push(["postPutResources",function(){var s=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=s.outline.render().split(/\r\n/),o=0;o<a.length;o++){var c=a[o],l=i.exec(c);if(l!=null){var u=l[1];s.internal.newObjectDeferredBegin(u,!1)}s.internal.write(c)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,A=[];for(o=0;o<d;o++){var f=s.internal.newObject();A.push(f);var p=s.internal.getPageInfo(o+1);s.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var m=s.internal.newObject();for(s.internal.write("<< /Names [ "),o=0;o<A.length;o++)s.internal.write("(page_"+(o+1)+")"+A[o]+" 0 R");s.internal.write(" ] >>","endobj"),t=s.internal.newObject(),s.internal.write("<< /Dests "+m+" 0 R"),s.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var s=this;s.outline.root.children.length>0&&(s.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&s.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var s=this;s.outline={createNamedDestinations:!1,root:{children:[]}},s.outline.add=function(i,a,o){var c={title:a,options:o,children:[]};return i==null&&(i=this.root),i.children.push(c),c},s.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=s,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},s.outline.genIds_r=function(i){i.id=s.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},s.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},s.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<i.children.length;o++){var c=i.children[o];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(i)),o>0&&this.line("/Prev "+this.makeRef(i.children[o-1])),o<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[o+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var l=this.count=this.count_r({count:0},c);if(l>0&&this.line("/Count "+l),c.options&&c.options.pageNumber){var u=s.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<i.children.length;d++)this.renderItems(i.children[d])},s.outline.line=function(i){this.ctx.val+=i+`\r
`},s.outline.makeRef=function(i){return i.id+" 0 R"},s.outline.makeString=function(i){return"("+s.internal.pdfEscape(i)+")"},s.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},s.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},s.outline.count_r=function(i,a){for(var o=0;o<a.children.length;o++)i.count++,this.count_r(i,a.children[o]);return i.count}}])})(Tr.API),(function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(s,i,a,o,c,l){var u,d=this.decode.DCT_DECODE,A=null;if(typeof s=="string"||this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s)){switch(s=c||s,s=this.__addimage__.isArrayBuffer(s)?new Uint8Array(s):s,u=(function(f){for(var p,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,b={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){p=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),b={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:p,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return b})(s=this.__addimage__.isArrayBufferView(s)?this.__addimage__.arrayBufferToBinaryString(s):s),u.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}A={data:s,width:u.width,height:u.height,colorSpace:l,bitsPerComponent:8,filter:d,index:i,alias:a}}return A}})(Tr.API),Tr.API.processPNG=function(r,t,s,i){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var a,o=eK(r,{checkCrc:!0}),c=o.width,l=o.height,u=o.channels,d=o.palette,A=o.depth;a=d&&u===1?(function(_){for(var S=_.width,N=_.height,O=_.data,k=_.palette,I=_.depth,R=!1,Q=[],$=[],L=void 0,F=!1,G=0,X=0;X<k.length;X++){var q=m4(k[X],4),T=q[0],U=q[1],K=q[2],z=q[3];Q.push(T,U,K),z!=null&&(z===0?(G++,$.length<1&&$.push(X)):z<255&&(F=!0))}if(F||G>1){R=!0,$=void 0;var M=S*N;L=new Uint8Array(M);for(var H=new DataView(O.buffer),Y=0;Y<M;Y++){var ae=Fb(H,Y,I),oe=m4(k[ae],4)[3];L[Y]=oe}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:O,alphaBytes:L,needSMask:R,palette:Q,mask:$}})(o):u===2||u===4?(function(_){for(var S=_.data,N=_.width,O=_.height,k=_.channels,I=_.depth,R=k===2?"DeviceGray":"DeviceRGB",Q=k-1,$=N*O,L=Q,F=$*L,G=1*$,X=Math.ceil(F*I/8),q=Math.ceil(G*I/8),T=new Uint8Array(X),U=new Uint8Array(q),K=new DataView(S.buffer),z=new DataView(T.buffer),M=new DataView(U.buffer),H=!1,Y=0;Y<$;Y++){for(var ae=Y*k,oe=0;oe<L;oe++)vS(z,Fb(K,ae+oe,I),Y*L+oe,I);var be=Fb(K,ae+L,I);be<(1<<I)-1&&(H=!0),vS(M,be,1*Y,I)}return{colorSpace:R,colorsPerPixel:Q,colorBytes:T,alphaBytes:U,needSMask:H}})(o):(function(_){var S=_.data,N=_.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:N,colorsPerPixel:N==="DeviceGray"?1:3,colorBytes:S instanceof Uint8Array?S:new Uint8Array(S.buffer),needSMask:!1}})(o);var f,p,m,g=a,b=g.colorSpace,v=g.colorsPerPixel,y=g.colorBytes,w=g.alphaBytes,j=g.needSMask,C=g.palette,B=g.mask,E=null;return i!==Tr.API.image_compression.NONE&&typeof Aw=="function"?(E=(function(_){var S;switch(_){case Tr.API.image_compression.FAST:S=11;break;case Tr.API.image_compression.MEDIUM:S=13;break;case Tr.API.image_compression.SLOW:S=14;break;default:S=12}return S})(i),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(E," "),r=mS(y,c*v,v,i),j&&(m=mS(w,c,1,i))):(f=void 0,p="",r=y,j&&(m=w)),p+="/Colors ".concat(v," /BitsPerComponent ").concat(A," /Columns ").concat(c),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:s,data:r,index:t,filter:f,decodeParameters:p,transparency:B,palette:C,sMask:m,predictor:E,width:c,height:l,bitsPerComponent:A,colorSpace:b}}},(function(r){r.processGIF89A=function(t,s,i,a){var o=new vK(t),c=o.width,l=o.height,u=[];o.decodeAndBlitFrameRGBA(0,u);var d={data:u,width:c,height:l},A=new Ub(100).encode(d,100);return r.processJPEG.call(this,A,s,i,a)},r.processGIF87A=r.processGIF89A})(Tr.API),sl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:i,blue:s,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},sl.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[r]()}catch(s){hs.log("bit decode error:"+s)}},sl.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),s=t%4;for(r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<t;a++)for(var o=this.datav.getUint8(this.pos++,!0),c=i*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var u=this.palette[o>>7-l&1];this.data[c+4*l]=u.blue,this.data[c+4*l+1]=u.green,this.data[c+4*l+2]=u.red,this.data[c+4*l+3]=255}s!==0&&(this.pos+=4-s)}},sl.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,a=0;a<r;a++){var o=this.datav.getUint8(this.pos++,!0),c=i*this.width*4+2*a*4,l=o>>4,u=15&o,d=this.palette[l];if(this.data[c]=d.blue,this.data[c+1]=d.green,this.data[c+2]=d.red,this.data[c+3]=255,2*a+1>=this.width)break;d=this.palette[u],this.data[c+4]=d.blue,this.data[c+4+1]=d.green,this.data[c+4+2]=d.red,this.data[c+4+3]=255}t!==0&&(this.pos+=4-t)}},sl.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+4*i;if(a<this.palette.length){var c=this.palette[a];this.data[o]=c.red,this.data[o+1]=c.green,this.data[o+2]=c.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}r!==0&&(this.pos+=4-r)}},sl.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&t)/t*255|0,l=(o>>5&t)/t*255|0,u=(o>>10&t)/t*255|0,d=o>>15?255:0,A=i*this.width*4+4*a;this.data[A]=u,this.data[A+1]=l,this.data[A+2]=c,this.data[A+3]=d}this.pos+=r}},sl.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),s=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(c&t)/t*255|0,u=(c>>5&s)/s*255|0,d=(c>>11)/t*255|0,A=a*this.width*4+4*o;this.data[A]=d,this.data[A+1]=u,this.data[A+2]=l,this.data[A+3]=255}this.pos+=r}},sl.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*s;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=i,this.data[c+3]=255}this.pos+=this.width%4}},sl.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*s;this.data[l]=o,this.data[l+1]=a,this.data[l+2]=i,this.data[l+3]=c}},sl.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(t,s,i,a){var o=new sl(t,!1),c=o.width,l=o.height,u={data:o.getData(),width:c,height:l},d=new Ub(100).encode(u,100);return r.processJPEG.call(this,d,s,i,a)}})(Tr.API),jS.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(t,s,i,a){var o=new jS(t),c=o.width,l=o.height,u={data:o.getData(),width:c,height:l},d=new Ub(100).encode(u,100);return r.processJPEG.call(this,d,s,i,a)}})(Tr.API),Tr.API.processRGBA=function(r,t,s){for(var i=r.data,a=i.length,o=new Uint8Array(a/4*3),c=new Uint8Array(a/4),l=0,u=0,d=0;d<a;d+=4){var A=i[d],f=i[d+1],p=i[d+2],m=i[d+3];o[l++]=A,o[l++]=f,o[l++]=p,c[u++]=m}var g=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:g,index:t,alias:s,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Tr.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},HA=Tr.API,eg=HA.getCharWidthsArray=function(r,t){var s,i,a=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),c=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,u=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,A=d.fof?d.fof:1,f=t.doKerning!==!1,p=0,m=r.length,g=0,b=l[0]||u,v=[];for(s=0;s<m;s++)i=r.charCodeAt(s),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+c*(1e3/o)||0)/1e3):(p=f&&ss(d[i])==="object"&&!isNaN(parseInt(d[i][g],10))?d[i][g]/A:0,v.push((l[i]||b)/u+p)),g=i;return v},hS=HA.getStringUnitWidth=function(r,t){var s=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return HA.processArabic&&(r=HA.processArabic(r)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(r,s,a)/s:eg.apply(this,arguments).reduce(function(o,c){return o+c},0)},fS=function(r,t,s,i){for(var a=[],o=0,c=r.length,l=0;o!==c&&l+t[o]<s;)l+=t[o],o++;a.push(r.slice(0,o));var u=o;for(l=0;o!==c;)l+t[o]>i&&(a.push(r.slice(u,o)),l=0,u=o),l+=t[o],o++;return u!==o&&a.push(r.slice(u,o)),a},pS=function(r,t,s){s||(s={});var i,a,o,c,l,u,d,A=[],f=[A],p=s.textIndent||0,m=0,g=0,b=r.split(" "),v=eg.apply(this,[" ",s])[0];if(u=s.lineIndent===-1?b[0].length+2:s.lineIndent||0){var y=Array(u).join(" "),w=[];b.map(function(C){(C=C.split(/\s*\n/)).length>1?w=w.concat(C.map(function(B,E){return(E&&B.length?`
`:"")+B})):w.push(C[0])}),b=w,u=hS.apply(this,[y,s])}for(o=0,c=b.length;o<c;o++){var j=0;if(i=b[o],u&&i[0]==`
`&&(i=i.substr(1),j=1),p+m+(g=(a=eg.apply(this,[i,s])).reduce(function(C,B){return C+B},0))>t||j){if(g>t){for(l=fS.apply(this,[i,a,t-(p+m),t]),A.push(l.shift()),A=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(i.length-(A[0]?A[0].length:0)).reduce(function(C,B){return C+B},0)}else A=[i];f.push(A),p=g+u,m=v}else A.push(i),p+=m+g,m=v}return d=u?function(C,B){return(B?y:"")+C.join(" ")}:function(C){return C.join(" ")},f.map(d)},HA.splitTextToSize=function(r,t,s){var i,a=(s=s||{}).fontSize||this.internal.getFontSize(),o=(function(A){if(A.widths&&A.kerning)return{widths:A.widths,kerning:A.kerning};var f=this.internal.getFont(A.fontName,A.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,s);i=Array.isArray(r)?r:String(r).split(/\r?\n/);var c=1*this.internal.scaleFactor*t/a;o.textIndent=s.textIndent?1*s.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=s.lineIndent;var l,u,d=[];for(l=0,u=i.length;l<u;l++)d=d.concat(pS.apply(this,[i[l],c,o]));return d},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="0123456789abcdef",s="klmnopqrstuvwxyz",i={},a={},o=0;o<16;o++)i[s[o]]=t[o],a[t[o]]=s[o];var c=function(p){return"0x"+parseInt(p,10).toString(16)},l=r.__fontmetrics__.compress=function(p){var m,g,b,v,y=["{"];for(var w in p){if(m=p[w],isNaN(parseInt(w,10))?g="'"+w+"'":(w=parseInt(w,10),g=(g=c(w).slice(2)).slice(0,-1)+a[g.slice(-1)]),typeof m=="number")m<0?(b=c(m).slice(3),v="-"):(b=c(m).slice(2),v=""),b=v+b.slice(0,-1)+a[b.slice(-1)];else{if(ss(m)!=="object")throw new Error("Don't know what to do with value type "+ss(m)+".");b=l(m)}y.push(g+b)}return y.push("}"),y.join("")},u=r.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,b,v,y={},w=1,j=y,C=[],B="",E="",_=p.length-1,S=1;S<_;S+=1)(v=p[S])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(v):v=="{"?(C.push([j,b]),j={},b=void 0):v=="}"?((g=C.pop())[0][g[1]]=j,b=void 0,j=g[0]):v=="-"?w=-1:b===void 0?i.hasOwnProperty(v)?(B+=i[v],b=parseInt(B,16)*w,w=1,B=""):B+=v:i.hasOwnProperty(v)?(E+=i[v],j[b]=parseInt(E,16)*w,w=1,b=void 0,E=""):E+=v;return y},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},A={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},f={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(p){var m=p.font,g=f.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var b=A.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])})(Tr.API),(function(r){var t=function(s){for(var i=s.length,a=new Uint8Array(i),o=0;o<i;o++)a[o]=s.charCodeAt(o);return a};r.API.events.push(["addFont",function(s){var i=void 0,a=s.font,o=s.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(i=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(c,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Kg(l)),c.metadata=r.API.TTFFont.open(l),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(a,i)}}])})(Tr),Tr.API.addSvgAsImage=function(r,t,s,i,a,o,c,l){if(isNaN(t)||isNaN(s))throw hs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw hs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=a;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(tn.canvg?Promise.resolve(tn.canvg):pb(()=>import("./index.es-CZxETfEB.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(d,r,A)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(A)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),t,s,i,a,c,l)})},Tr.API.putTotalPages=function(r){var t,s=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),s=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),s=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(t,s);return this},Tr.API.viewerPreferences=function(r,t){var s;r=r||{},t=t||!1;var i,a,o,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(c),u=[],d=0,A=0,f=0;function p(g,b){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===b&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),s=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)s[l[f]].value=s[l[f]].defaultValue,s[l[f]].explicitSet=!1}if(ss(r)==="object"){for(a in r)if(o=r[a],p(l,a)&&o!==void 0){if(s[a].type==="boolean"&&typeof o=="boolean")s[a].value=o;else if(s[a].type==="name"&&p(s[a].valueSet,o))s[a].value=o;else if(s[a].type==="integer"&&Number.isInteger(o))s[a].value=o;else if(s[a].type==="array"){for(d=0;d<o.length;d+=1)if(i=!0,o[d].length===1&&typeof o[d][0]=="number")u.push(String(o[d]-1));else if(o[d].length>1){for(A=0;A<o[d].length;A+=1)typeof o[d][A]!="number"&&(i=!1);i===!0&&u.push([o[d][0]-1,o[d][1]-1].join(" "))}s[a].value="["+u.join(" ")+"]"}else s[a].value=s[a].defaultValue;s[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,b=[];for(g in s)s[g].explicitSet===!0&&(s[g].type==="name"?b.push("/"+g+" /"+s[g].value):b.push("/"+g+" "+s[g].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=s,this},(function(r){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(i)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+c.length+l.length+a.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+o+c+l+u),this.internal.write("endstream"),this.internal.write("endobj")},s=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(i,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",s),this.internal.events.subscribe("postPutResources",t)),this}})(Tr.API),(function(r){var t=r.API,s=t.pdfEscape16=function(o,c){for(var l,u=c.metadata.Unicode.widths,d=["","0","00","000","0000"],A=[""],f=0,p=o.length;f<p;++f){if(l=c.metadata.characterToGlyph(o.charCodeAt(f)),c.metadata.glyIdsUsed.push(l),c.metadata.toUnicode[l]=o.charCodeAt(f),u.indexOf(l)==-1&&(u.push(l),u.push([parseInt(c.metadata.widthOfGlyph(l),10)])),l=="0")return A.join("");l=l.toString(16),A.push(d[4-l.length],l)}return A.join("")},i=function(o){var c,l,u,d,A,f,p;for(A=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],f=0,p=(l=Object.keys(o).sort(function(m,g){return m-g})).length;f<p;f++)c=l[f],u.length>=100&&(A+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),o[c]!==void 0&&o[c]!==null&&typeof o[c].toString=="function"&&(d=("0000"+o[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),u.push("<"+c+"><"+d+">"));return u.length&&(A+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),A+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(c){var l=c.font,u=c.out,d=c.newObject,A=c.putStream;if(l.metadata instanceof r.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<p.length;g++)m+=String.fromCharCode(p[g]);var b=d();A({data:m,addLength1:!0,objectId:b}),u("endobj");var v=d();A({data:i(l.metadata.toUnicode),addLength1:!0,objectId:v}),u("endobj");var y=d();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+XA(l.fontName)),u("/FontFile2 "+b+" 0 R"),u("/FontBBox "+r.API.PDFObject.convert(l.metadata.bbox)),u("/Flags "+l.metadata.flags),u("/StemV "+l.metadata.stemV),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u(">>"),u("endobj");var w=d();u("<<"),u("/Type /Font"),u("/BaseFont /"+XA(l.fontName)),u("/FontDescriptor "+y+" 0 R"),u("/W "+r.API.PDFObject.convert(f)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+l.encoding+")"),u(">>"),u(">>"),u("endobj"),l.objectNumber=d(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+v+" 0 R"),u("/BaseFont /"+XA(l.fontName)),u("/Encoding /"+l.encoding),u("/DescendantFonts ["+w+" 0 R]"),u(">>"),u("endobj"),l.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(c){var l=c.font,u=c.out,d=c.newObject,A=c.putStream;if(l.metadata instanceof r.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,p="",m=0;m<f.length;m++)p+=String.fromCharCode(f[m]);var g=d();A({data:p,addLength1:!0,objectId:g}),u("endobj");var b=d();A({data:i(l.metadata.toUnicode),addLength1:!0,objectId:b}),u("endobj");var v=d();u("<<"),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u("/StemV "+l.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+g+" 0 R"),u("/Flags 96"),u("/FontBBox "+r.API.PDFObject.convert(l.metadata.bbox)),u("/FontName /"+XA(l.fontName)),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u(">>"),u("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+XA(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),u("endobj"),l.isAlreadyPutted=!0}})(o)}]);var a=function(o){var c,l=o.text||"",u=o.x,d=o.y,A=o.options||{},f=o.mutex||{},p=f.pdfEscape,m=f.activeFontKey,g=f.fonts,b=m,v="",y=0,w="",j=g[b].encoding;if(g[b].encoding!=="Identity-H")return{text:l,x:u,y:d,options:A,mutex:f};for(w=l,b=m,Array.isArray(l)&&(w=l[0]),y=0;y<w.length;y+=1)g[b].metadata.hasOwnProperty("cmap")&&(c=g[b].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),c||w[y].charCodeAt(0)<256&&g[b].metadata.hasOwnProperty("Unicode")?v+=w[y]:v+="";var C="";return parseInt(b.slice(1))<14||j==="WinAnsiEncoding"?C=p(v,b).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(C=s(v,g[b])),f.isHex=!0,{text:C,x:u,y:d,options:A,mutex:f}};t.events.push(["postProcessText",function(o){var c=o.text||"",l=[],u={text:c,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(c)){var d=0;for(d=0;d<c.length;d+=1)Array.isArray(c[d])&&c[d].length===3?l.push([a(Object.assign({},u,{text:c[d][0]})).text,c[d][1],c[d][2]]):l.push(a(Object.assign({},u,{text:c[d]})).text);o.text=l}else o.text=a(Object.assign({},u,{text:c})).text}])})(Tr),(function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(s){return t.call(this),this.internal.vFS[s]!==void 0},r.addFileToVFS=function(s,i){return t.call(this),this.internal.vFS[s]=i,this},r.getFileFromVFS=function(s){return t.call(this),this.internal.vFS[s]!==void 0?this.internal.vFS[s]:null}})(Tr.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(i){var a,o,c,l,u,d,A,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,j=0;this.__bidiEngine__={};var C=function(k){var I=k.charCodeAt(),R=I>>8,Q=b[R];return Q!==void 0?f[256*Q+(255&I)]:R===252||R===253?"AL":y.test(R)?"L":R===8?"R":"N"},B=function(k){for(var I,R=0;R<k.length;R++){if((I=C(k.charAt(R)))==="L")return!1;if(I==="R")return!0}return!1},E=function(k,I,R,Q){var $,L,F,G,X=I[Q];switch(X){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"N":case"AN":break;case"EN":w&&(X="AN");break;case"AL":w=!0,X="R";break;case"WS":case"BN":X="N";break;case"CS":Q<1||Q+1>=I.length||($=R[Q-1])!=="EN"&&$!=="AN"||(L=I[Q+1])!=="EN"&&L!=="AN"?X="N":w&&(L="AN"),X=L===$?L:"N";break;case"ES":X=($=Q>0?R[Q-1]:"B")==="EN"&&Q+1<I.length&&I[Q+1]==="EN"?"EN":"N";break;case"ET":if(Q>0&&R[Q-1]==="EN"){X="EN";break}if(w){X="N";break}for(F=Q+1,G=I.length;F<G&&I[F]==="ET";)F++;X=F<G&&I[F]==="EN"?"EN":"N";break;case"NSM":if(c&&!l){for(G=I.length,F=Q+1;F<G&&I[F]==="NSM";)F++;if(F<G){var q=k[Q],T=q>=1425&&q<=2303||q===64286;if($=I[F],T&&($==="R"||$==="AL")){X="R";break}}}X=Q<1||($=I[Q-1])==="B"?"N":R[Q-1];break;case"B":w=!1,a=!0,X=j;break;case"S":o=!0,X="N"}return X},_=function(k,I,R){var Q=k.split("");return R&&S(Q,R,{hiLevel:j}),Q.reverse(),I&&I.reverse(),Q.join("")},S=function(k,I,R){var Q,$,L,F,G,X=-1,q=k.length,T=0,U=[],K=j?m:p,z=[];for(w=!1,a=!1,o=!1,$=0;$<q;$++)z[$]=C(k[$]);for(L=0;L<q;L++){if(G=T,U[L]=E(k,z,U,L),Q=240&(T=K[G][g[U[L]]]),T&=15,I[L]=F=K[T][5],Q>0)if(Q===16){for($=X;$<L;$++)I[$]=1;X=-1}else X=-1;if(K[T][6])X===-1&&(X=L);else if(X>-1){for($=X;$<L;$++)I[$]=F;X=-1}z[L]==="B"&&(I[L]=0),R.hiLevel|=F}o&&(function(M,H,Y){for(var ae=0;ae<Y;ae++)if(M[ae]==="S"){H[ae]=j;for(var oe=ae-1;oe>=0&&M[oe]==="WS";oe--)H[oe]=j}})(z,I,q)},N=function(k,I,R,Q,$){if(!($.hiLevel<k)){if(k===1&&j===1&&!a)return I.reverse(),void(R&&R.reverse());for(var L,F,G,X,q=I.length,T=0;T<q;){if(Q[T]>=k){for(G=T+1;G<q&&Q[G]>=k;)G++;for(X=T,F=G-1;X<F;X++,F--)L=I[X],I[X]=I[F],I[F]=L,R&&(L=R[X],R[X]=R[F],R[F]=L);T=G}T++}}},O=function(k,I,R){var Q=k.split(""),$={hiLevel:j};return R||(R=[]),S(Q,R,$),(function(L,F,G){if(G.hiLevel!==0&&A)for(var X,q=0;q<L.length;q++)F[q]===1&&(X=v.indexOf(L[q]))>=0&&(L[q]=v[X+1])})(Q,R,$),N(2,Q,I,R,$),N(1,Q,I,R,$),Q.join("")};return this.__bidiEngine__.doBidiReorder=function(k,I,R){if((function($,L){if(L)for(var F=0;F<$.length;F++)L[F]=F;l===void 0&&(l=B($)),d===void 0&&(d=B($))})(k,I),c||!u||d)if(c&&u&&l^d)j=l?1:0,k=_(k,I,R);else if(!c&&u&&d)j=l?1:0,k=O(k,I,R),k=_(k,I);else if(!c||l||u||d){if(c&&!u&&l^d)k=_(k,I),l?(j=0,k=O(k,I,R)):(j=1,k=O(k,I,R),k=_(k,I));else if(c&&l&&!u&&d)j=1,k=O(k,I,R),k=_(k,I);else if(!c&&!u&&l^d){var Q=A;l?(j=1,k=O(k,I,R),j=0,A=!1,k=O(k,I,R),A=Q):(j=0,k=O(k,I,R),k=_(k,I),j=1,A=!1,k=O(k,I,R),A=Q,k=_(k,I))}}else j=0,k=O(k,I,R);else j=l?1:0,k=O(k,I,R);return k},this.__bidiEngine__.setOptions=function(k){k&&(c=k.isInputVisual,u=k.isOutputVisual,l=k.isInputRtl,d=k.isOutputRtl,A=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],s=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(i){var a=i.text;i.x,i.y;var o=i.options||{};i.mutex,o.lang;var c=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,s.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(c=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?c.push([s.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):c.push([s.doBidiReorder(a[l])]);i.text=c}else i.text=s.doBidiReorder(a);s.setOptions({isInputVisual:!0})}])})(Tr),Tr.API.TTFFont=(function(){function r(t){var s;if(this.rawData=t,s=this.contents=new Xu(t),this.contents.pos=4,s.readString(4)==="ttcf")throw new Error("TTCF not supported.");s.pos=0,this.parse(),this.subset=new UK(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new wK(this.contents),this.head=new NK(this),this.name=new _K(this),this.cmap=new i6(this),this.toUnicode={},this.hhea=new SK(this),this.maxp=new EK(this),this.hmtx=new OK(this),this.post=new BK(this),this.os2=new CK(this),this.loca=new FK(this),this.glyf=new IK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,s,i,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,l,u,d;for(d=[],c=0,l=(u=this.bbox).length;c<l;c++)t=u[c],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),32768&(s=a>>16)&&(s=-(1+(65535^s))),this.italicAngle=+(s+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var s;return((s=this.cmap.unicode)!=null?s.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var s;return s=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*s},r.prototype.widthOfString=function(t,s,i){var a,o,c,l;for(c=0,o=0,l=(t=""+t).length;0<=l?o<l:o>l;o=0<=l?++o:--o)a=t.charCodeAt(o),c+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/s)||0;return c*(s/1e3)},r.prototype.lineHeight=function(t,s){var i;return s==null&&(s=!1),i=s?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},r})();var Nl,Xu=(function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var s,i;for(i=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)i[s]=String.fromCharCode(this.readByte());return i.join("")},r.prototype.writeString=function(t){var s,i,a;for(a=[],s=0,i=t.length;0<=i?s<i:s>i;s=0<=i?++s:--s)a.push(this.writeByte(t.charCodeAt(s)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,s,i,a,o,c,l,u;return t=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),l=this.readByte(),u=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^s)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^o)+65536*(255^c)+256*(255^l)+(255^u)+1):72057594037927940*t+281474976710656*s+1099511627776*i+4294967296*a+16777216*o+65536*c+256*l+u},r.prototype.writeLongLong=function(t){var s,i;return s=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var s,i;for(s=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)s.push(this.readByte());return s},r.prototype.write=function(t){var s,i,a,o;for(o=[],i=0,a=t.length;i<a;i++)s=t[i],o.push(this.writeByte(s));return o},r})(),wK=(function(){var r;function t(s){var i,a,o;for(this.scalarType=s.readInt(),this.tableCount=s.readShort(),this.searchRange=s.readShort(),this.entrySelector=s.readShort(),this.rangeShift=s.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)i={tag:s.readString(4),checksum:s.readInt(),offset:s.readInt(),length:s.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(s){var i,a,o,c,l,u,d,A,f,p,m,g,b;for(b in m=Object.keys(s).length,u=Math.log(2),f=16*Math.floor(Math.log(m)/u),c=Math.floor(f/u),A=16*m-f,(a=new Xu).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(c),a.writeShort(A),o=16*m,d=a.pos+o,l=null,g=[],s)for(p=s[b],a.writeString(b),a.writeInt(r(p)),a.writeInt(d),a.writeInt(p.length),g=g.concat(p),b==="head"&&(l=d),d+=p.length;d%4;)g.push(0),d++;return a.write(g),i=2981146554-r(a.data),a.pos=l+8,a.writeUInt32(i),a.data},r=function(s){var i,a,o,c;for(s=a6.call(s);s.length%4;)s.push(0);for(o=new Xu(s),a=0,i=0,c=s.length;i<c;i=i+=4)a+=o.readUInt32();return 4294967295&a},t})(),jK={}.hasOwnProperty,lc=function(r,t){for(var s in t)jK.call(t,s)&&(r[s]=t[s]);function i(){this.constructor=r}return i.prototype=t.prototype,r.prototype=new i,r.__super__=t.prototype,r};Nl=(function(){function r(t){var s;this.file=t,s=this.file.directory.tables[this.tag],this.exists=!!s,s&&(this.offset=s.offset,this.length=s.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var NK=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,Nl),r.prototype.tag="head",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},r.prototype.encode=function(t){var s;return(s=new Xu).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(t),s.writeShort(this.glyphDataFormat),s.data},r})(),NS=(function(){function r(t,s){var i,a,o,c,l,u,d,A,f,p,m,g,b,v,y,w,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=s+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=t.readByte();break;case 4:for(m=t.readUInt16(),p=m/2,t.pos+=6,o=(function(){var C,B;for(B=[],u=C=0;0<=p?C<p:C>p;u=0<=p?++C:--C)B.push(t.readUInt16());return B})(),t.pos+=2,b=(function(){var C,B;for(B=[],u=C=0;0<=p?C<p:C>p;u=0<=p?++C:--C)B.push(t.readUInt16());return B})(),d=(function(){var C,B;for(B=[],u=C=0;0<=p?C<p:C>p;u=0<=p?++C:--C)B.push(t.readUInt16());return B})(),A=(function(){var C,B;for(B=[],u=C=0;0<=p?C<p:C>p;u=0<=p?++C:--C)B.push(t.readUInt16());return B})(),a=(this.length-t.pos+this.offset)/2,l=(function(){var C,B;for(B=[],u=C=0;0<=a?C<a:C>a;u=0<=a?++C:--C)B.push(t.readUInt16());return B})(),u=y=0,j=o.length;y<j;u=++y)for(v=o[u],i=w=g=b[u];g<=v?w<=v:w>=v;i=g<=v?++w:--w)A[u]===0?c=i+d[u]:(c=l[A[u]/2+(i-g)-(p-u)]||0)!==0&&(c+=d[u]),this.codeMap[i]=65535&c}t.pos=f}return r.encode=function(t,s){var i,a,o,c,l,u,d,A,f,p,m,g,b,v,y,w,j,C,B,E,_,S,N,O,k,I,R,Q,$,L,F,G,X,q,T,U,K,z,M,H,Y,ae,oe,be,ge,he;switch(Q=new Xu,c=Object.keys(t).sort(function(ke,Z){return ke-Z}),s){case"macroman":for(b=0,v=(function(){var ke=[];for(g=0;g<256;++g)ke.push(0);return ke})(),w={0:0},o={},$=0,X=c.length;$<X;$++)w[oe=t[a=c[$]]]==null&&(w[oe]=++b),o[a]={old:t[a],new:w[t[a]]},v[a]=w[t[a]];return Q.writeUInt16(1),Q.writeUInt16(0),Q.writeUInt32(12),Q.writeUInt16(0),Q.writeUInt16(262),Q.writeUInt16(0),Q.write(v),{charMap:o,subtable:Q.data,maxGlyphID:b+1};case"unicode":for(I=[],f=[],j=0,w={},i={},y=d=null,L=0,q=c.length;L<q;L++)w[B=t[a=c[L]]]==null&&(w[B]=++j),i[a]={old:B,new:w[B]},l=w[B]-a,y!=null&&l===d||(y&&f.push(y),I.push(a),d=l),y=a;for(y&&f.push(y),f.push(65535),I.push(65535),O=2*(N=I.length),S=2*Math.pow(Math.log(N)/Math.LN2,2),p=Math.log(S/2)/Math.LN2,_=2*N-S,u=[],E=[],m=[],g=F=0,T=I.length;F<T;g=++F){if(k=I[g],A=f[g],k===65535){u.push(0),E.push(0);break}if(k-(R=i[k].new)>=32768)for(u.push(0),E.push(2*(m.length+N-g)),a=G=k;k<=A?G<=A:G>=A;a=k<=A?++G:--G)m.push(i[a].new);else u.push(R-k),E.push(0)}for(Q.writeUInt16(3),Q.writeUInt16(1),Q.writeUInt32(12),Q.writeUInt16(4),Q.writeUInt16(16+8*N+2*m.length),Q.writeUInt16(0),Q.writeUInt16(O),Q.writeUInt16(S),Q.writeUInt16(p),Q.writeUInt16(_),Y=0,U=f.length;Y<U;Y++)a=f[Y],Q.writeUInt16(a);for(Q.writeUInt16(0),ae=0,K=I.length;ae<K;ae++)a=I[ae],Q.writeUInt16(a);for(be=0,z=u.length;be<z;be++)l=u[be],Q.writeUInt16(l);for(ge=0,M=E.length;ge<M;ge++)C=E[ge],Q.writeUInt16(C);for(he=0,H=m.length;he<H;he++)b=m[he],Q.writeUInt16(b);return{charMap:i,subtable:Q.data,maxGlyphID:j+1}}},r})(),i6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,Nl),r.prototype.tag="cmap",r.prototype.parse=function(t){var s,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)s=new NS(t,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},r.encode=function(t,s){var i,a;return s==null&&(s="macroman"),i=NS.encode(t,s),(a=new Xu).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},r})(),SK=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,Nl),r.prototype.tag="hhea",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},r})(),CK=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,Nl),r.prototype.tag="OS/2",r.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var s,i;for(i=[],s=0;s<10;++s)i.push(t.readByte());return i})(),this.charRange=(function(){var s,i;for(i=[],s=0;s<4;++s)i.push(t.readInt());return i})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var s,i;for(i=[],s=0;s<2;s=++s)i.push(t.readInt());return i})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},r})(),BK=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,Nl),r.prototype.tag="post",r.prototype.parse=function(t){var s,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)s=t.readByte(),a.push(this.names.push(t.readString(s)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=(function(){var c,l,u;for(u=[],o=c=0,l=this.file.maxp.numGlyphs;0<=l?c<l:c>l;o=0<=l?++c:--c)u.push(t.readUInt32());return u}).call(this)}},r})(),kK=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},_K=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,Nl),r.prototype.tag="name",r.prototype.parse=function(t){var s,i,a,o,c,l,u,d,A,f,p;for(t.pos=this.offset,t.readShort(),s=t.readShort(),l=t.readShort(),i=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},o=A=0,f=i.length;A<f;o=++A)a=i[o],t.pos=a.offset,d=t.readString(a.length),c=new kK(d,a),u[p=a.nameID]==null&&(u[p]=[]),u[a.nameID].push(c);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},r})(),EK=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,Nl),r.prototype.tag="maxp",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},r})(),OK=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,Nl),r.prototype.tag="hmtx",r.prototype.parse=function(t){var s,i,a,o,c,l,u;for(t.pos=this.offset,this.metrics=[],s=0,l=this.file.hhea.numberOfMetrics;0<=l?s<l:s>l;s=0<=l?++s:--s)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,A;for(A=[],s=d=0;0<=a?d<a:d>a;s=0<=a?++d:--d)A.push(t.readInt16());return A})(),this.widths=(function(){var d,A,f,p;for(p=[],d=0,A=(f=this.metrics).length;d<A;d++)o=f[d],p.push(o.advance);return p}).call(this),i=this.widths[this.widths.length-1],u=[],s=c=0;0<=a?c<a:c>a;s=0<=a?++c:--c)u.push(this.widths.push(i));return u},r.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},r})(),a6=[].slice,IK=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,Nl),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(t){var s,i,a,o,c,l,u,d,A,f;return t in this.cache?this.cache[t]:(o=this.file.loca,s=this.file.contents,i=o.indexOf(t),(a=o.lengthOf(t))===0?this.cache[t]=null:(s.pos=this.offset+i,c=(l=new Xu(s.read(a))).readShort(),d=l.readShort(),f=l.readShort(),u=l.readShort(),A=l.readShort(),this.cache[t]=c===-1?new TK(l,d,f,u,A):new PK(l,c,d,f,u,A),this.cache[t]))},r.prototype.encode=function(t,s,i){var a,o,c,l,u;for(c=[],o=[],l=0,u=s.length;l<u;l++)a=t[s[l]],o.push(c.length),a&&(c=c.concat(a.encode(i)));return o.push(c.length),{table:c,offsets:o}},r})(),PK=(function(){function r(t,s,i,a,o,c){this.raw=t,this.numberOfContours=s,this.xMin=i,this.yMin=a,this.xMax=o,this.yMax=c,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),TK=(function(){function r(t,s,i,a,o){var c,l;for(this.raw=t,this.xMin=s,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;l=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&l;)c.pos+=1&l?4:2,128&l?c.pos+=8:64&l?c.pos+=4:8&l&&(c.pos+=2)}return r.prototype.encode=function(){var t,s,i;for(s=new Xu(a6.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)s.pos=this.glyphOffsets[t];return s.data},r})(),FK=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,Nl),r.prototype.tag="loca",r.prototype.parse=function(t){var s,i;return t.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(t.readUInt32());return o}).call(this)},r.prototype.indexOf=function(t){return this.offsets[t]},r.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},r.prototype.encode=function(t,s){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,c=0;c<i.length;++c)if(i[c]=a,o<s.length&&s[o]==c){++o,i[c]=a;var l=this.offsets[c],u=this.offsets[c+1]-l;u>0&&(a+=u)}for(var d=new Array(4*i.length),A=0;A<i.length;++A)d[4*A+3]=255&i[A],d[4*A+2]=(65280&i[A])>>8,d[4*A+1]=(16711680&i[A])>>16,d[4*A]=(4278190080&i[A])>>24;return d},r})(),UK=(function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,s,i,a,o;for(s in a=this.font.cmap.tables[0].codeMap,t={},o=this.subset)i=o[s],t[s]=a[i];return t},r.prototype.glyphsFor=function(t){var s,i,a,o,c,l,u;for(a={},c=0,l=t.length;c<l;c++)a[o=t[c]]=this.font.glyf.glyphFor(o);for(o in s=[],a)(i=a[o])!=null&&i.compound&&s.push.apply(s,i.glyphIDs);if(s.length>0)for(o in u=this.glyphsFor(s))i=u[o],a[o]=i;return a},r.prototype.encode=function(t,s){var i,a,o,c,l,u,d,A,f,p,m,g,b,v,y;for(a in i=i6.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(t),m={0:0},y=i.charMap)m[(u=y[a]).old]=u.new;for(g in p=i.maxGlyphID,c)g in m||(m[g]=p++);return A=(function(w){var j,C;for(j in C={},w)C[w[j]]=j;return C})(m),f=Object.keys(A).sort(function(w,j){return w-j}),b=(function(){var w,j,C;for(C=[],w=0,j=f.length;w<j;w++)l=f[w],C.push(A[l]);return C})(),o=this.font.glyf.encode(c,b,m),d=this.font.loca.encode(o.offsets,b),v={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(s)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},r})();Tr.API.PDFObject=(function(){var r;function t(){}return r=function(s,i){return(Array(i+1).join("0")+s).slice(-i)},t.convert=function(s){var i,a,o,c;if(Array.isArray(s))return"["+(function(){var l,u,d;for(d=[],l=0,u=s.length;l<u;l++)i=s[l],d.push(t.convert(i));return d})().join(" ")+"]";if(typeof s=="string")return"/"+s;if(s?.isString)return"("+s+")";if(s instanceof Date)return"(D:"+r(s.getUTCFullYear(),4)+r(s.getUTCMonth(),2)+r(s.getUTCDate(),2)+r(s.getUTCHours(),2)+r(s.getUTCMinutes(),2)+r(s.getUTCSeconds(),2)+"Z)";if({}.toString.call(s)==="[object Object]"){for(a in o=["<<"],s)c=s[a],o.push("/"+a+" "+t.convert(c));return o.push(">>"),o.join(`
`)}return""+s},t})();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bw=function(r,t){return bw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=i[a])},bw(r,t)};function Sl(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");bw(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}var vw=function(){return vw=Object.assign||function(t){for(var s,i=1,a=arguments.length;i<a;i++){s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},vw.apply(this,arguments)};function Ia(r,t,s,i){function a(o){return o instanceof s?o:new s(function(c){c(o)})}return new(s||(s=Promise))(function(o,c){function l(A){try{d(i.next(A))}catch(f){c(f)}}function u(A){try{d(i.throw(A))}catch(f){c(f)}}function d(A){A.done?o(A.value):a(A.value).then(l,u)}d((i=i.apply(r,[])).next())})}function wa(r,t){var s={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,a,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(A){return u([d,A])}}function u(d){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,a=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){s.label=d[1];break}if(d[0]===6&&s.label<o[1]){s.label=o[1],o=d;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(d);break}o[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(r,s)}catch(A){d=[6,A],a=0}finally{i=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function tg(r,t,s){if(arguments.length===2)for(var i=0,a=t.length,o;i<a;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return r.concat(o||t)}var Qc=(function(){function r(t,s,i,a){this.left=t,this.top=s,this.width=i,this.height=a}return r.prototype.add=function(t,s,i,a){return new r(this.left+t,this.top+s,this.width+i,this.height+a)},r.fromClientRect=function(t,s){return new r(s.left+t.windowBounds.left,s.top+t.windowBounds.top,s.width,s.height)},r.fromDOMRectList=function(t,s){var i=Array.from(s).find(function(a){return a.width!==0});return i?new r(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r})(),Cy=function(r,t){return Qc.fromClientRect(r,t.getBoundingClientRect())},LK=function(r){var t=r.body,s=r.documentElement;if(!t||!s)throw new Error("Unable to get document size");var i=Math.max(Math.max(t.scrollWidth,s.scrollWidth),Math.max(t.offsetWidth,s.offsetWidth),Math.max(t.clientWidth,s.clientWidth)),a=Math.max(Math.max(t.scrollHeight,s.scrollHeight),Math.max(t.offsetHeight,s.offsetHeight),Math.max(t.clientHeight,s.clientHeight));return new Qc(0,0,i,a)},By=function(r){for(var t=[],s=0,i=r.length;s<i;){var a=r.charCodeAt(s++);if(a>=55296&&a<=56319&&s<i){var o=r.charCodeAt(s++);(o&64512)===56320?t.push(((a&1023)<<10)+(o&1023)+65536):(t.push(a),s--)}else t.push(a)}return t},hi=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var s=r.length;if(!s)return"";for(var i=[],a=-1,o="";++a<s;){var c=r[a];c<=65535?i.push(c):(c-=65536,i.push((c>>10)+55296,c%1024+56320)),(a+1===s||i.length>16384)&&(o+=String.fromCharCode.apply(String,i),i.length=0)}return o},SS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",DK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rg=0;rg<SS.length;rg++)DK[SS.charCodeAt(rg)]=rg;var CS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ng=0;ng<CS.length;ng++)Mf[CS.charCodeAt(ng)]=ng;var MK=function(r){var t=r.length*.75,s=r.length,i,a=0,o,c,l,u;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),A=Array.isArray(d)?d:new Uint8Array(d);for(i=0;i<s;i+=4)o=Mf[r.charCodeAt(i)],c=Mf[r.charCodeAt(i+1)],l=Mf[r.charCodeAt(i+2)],u=Mf[r.charCodeAt(i+3)],A[a++]=o<<2|c>>4,A[a++]=(c&15)<<4|l>>2,A[a++]=(l&3)<<6|u&63;return d},RK=function(r){for(var t=r.length,s=[],i=0;i<t;i+=2)s.push(r[i+1]<<8|r[i]);return s},QK=function(r){for(var t=r.length,s=[],i=0;i<t;i+=4)s.push(r[i+3]<<24|r[i+2]<<16|r[i+1]<<8|r[i]);return s},Kd=5,f2=11,Lb=2,$K=f2-Kd,o6=65536>>Kd,HK=1<<Kd,Db=HK-1,VK=1024>>Kd,zK=o6+VK,KK=zK,GK=32,WK=KK+GK,qK=65536>>f2,YK=1<<$K,XK=YK-1,BS=function(r,t,s){return r.slice?r.slice(t,s):new Uint16Array(Array.prototype.slice.call(r,t,s))},JK=function(r,t,s){return r.slice?r.slice(t,s):new Uint32Array(Array.prototype.slice.call(r,t,s))},ZK=function(r,t){var s=MK(r),i=Array.isArray(s)?QK(s):new Uint32Array(s),a=Array.isArray(s)?RK(s):new Uint16Array(s),o=24,c=BS(a,o/2,i[4]/2),l=i[5]===2?BS(a,(o+i[4])/2):JK(i,Math.ceil((o+i[4])/4));return new eG(i[0],i[1],i[2],i[3],c,l)},eG=(function(){function r(t,s,i,a,o,c){this.initialValue=t,this.errorValue=s,this.highStart=i,this.highValueIndex=a,this.index=o,this.data=c}return r.prototype.get=function(t){var s;if(t>=0){if(t<55296||t>56319&&t<=65535)return s=this.index[t>>Kd],s=(s<<Lb)+(t&Db),this.data[s];if(t<=65535)return s=this.index[o6+(t-55296>>Kd)],s=(s<<Lb)+(t&Db),this.data[s];if(t<this.highStart)return s=WK-qK+(t>>f2),s=this.index[s],s+=t>>Kd&XK,s=this.index[s],s=(s<<Lb)+(t&Db),this.data[s];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),kS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sg=0;sg<kS.length;sg++)tG[kS.charCodeAt(sg)]=sg;var rG="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",_S=50,nG=1,l6=2,c6=3,sG=4,iG=5,ES=7,u6=8,OS=9,Tu=10,ww=11,IS=12,jw=13,aG=14,Rf=15,Nw=16,ig=17,Sf=18,oG=19,PS=20,Sw=21,Cf=22,Mb=23,VA=24,co=25,Qf=26,$f=27,zA=28,lG=29,Ld=30,cG=31,ag=32,og=33,Cw=34,Bw=35,kw=36,Sp=37,_w=38,Xg=39,Jg=40,Rb=41,d6=42,uG=43,dG=[9001,65288],A6="!",Tn="",lg="",Ew=ZK(rG),Bc=[Ld,kw],Ow=[nG,l6,c6,iG],h6=[Tu,u6],TS=[$f,Qf],AG=Ow.concat(h6),FS=[_w,Xg,Jg,Cw,Bw],hG=[Rf,jw],fG=function(r,t){t===void 0&&(t="strict");var s=[],i=[],a=[];return r.forEach(function(o,c){var l=Ew.get(o);if(l>_S?(a.push(!0),l-=_S):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(o)!==-1)return i.push(c),s.push(Nw);if(l===sG||l===ww){if(c===0)return i.push(c),s.push(Ld);var u=s[c-1];return AG.indexOf(u)===-1?(i.push(i[c-1]),s.push(u)):(i.push(c),s.push(Ld))}if(i.push(c),l===cG)return s.push(t==="strict"?Sw:Sp);if(l===d6||l===lG)return s.push(Ld);if(l===uG)return o>=131072&&o<=196605||o>=196608&&o<=262141?s.push(Sp):s.push(Ld);s.push(l)}),[i,s,a]},Qb=function(r,t,s,i){var a=i[s];if(Array.isArray(r)?r.indexOf(a)!==-1:r===a)for(var o=s;o<=i.length;){o++;var c=i[o];if(c===t)return!0;if(c!==Tu)break}if(a===Tu)for(var o=s;o>0;){o--;var l=i[o];if(Array.isArray(r)?r.indexOf(l)!==-1:r===l)for(var u=s;u<=i.length;){u++;var c=i[u];if(c===t)return!0;if(c!==Tu)break}if(l!==Tu)break}return!1},US=function(r,t){for(var s=r;s>=0;){var i=t[s];if(i===Tu)s--;else return i}return 0},pG=function(r,t,s,i,a){if(s[i]===0)return Tn;var o=i-1;if(Array.isArray(a)&&a[o]===!0)return Tn;var c=o-1,l=o+1,u=t[o],d=c>=0?t[c]:0,A=t[l];if(u===l6&&A===c6)return Tn;if(Ow.indexOf(u)!==-1)return A6;if(Ow.indexOf(A)!==-1||h6.indexOf(A)!==-1)return Tn;if(US(o,t)===u6)return lg;if(Ew.get(r[o])===ww||(u===ag||u===og)&&Ew.get(r[l])===ww||u===ES||A===ES||u===OS||[Tu,jw,Rf].indexOf(u)===-1&&A===OS||[ig,Sf,oG,VA,zA].indexOf(A)!==-1||US(o,t)===Cf||Qb(Mb,Cf,o,t)||Qb([ig,Sf],Sw,o,t)||Qb(IS,IS,o,t))return Tn;if(u===Tu)return lg;if(u===Mb||A===Mb)return Tn;if(A===Nw||u===Nw)return lg;if([jw,Rf,Sw].indexOf(A)!==-1||u===aG||d===kw&&hG.indexOf(u)!==-1||u===zA&&A===kw||A===PS||Bc.indexOf(A)!==-1&&u===co||Bc.indexOf(u)!==-1&&A===co||u===$f&&[Sp,ag,og].indexOf(A)!==-1||[Sp,ag,og].indexOf(u)!==-1&&A===Qf||Bc.indexOf(u)!==-1&&TS.indexOf(A)!==-1||TS.indexOf(u)!==-1&&Bc.indexOf(A)!==-1||[$f,Qf].indexOf(u)!==-1&&(A===co||[Cf,Rf].indexOf(A)!==-1&&t[l+1]===co)||[Cf,Rf].indexOf(u)!==-1&&A===co||u===co&&[co,zA,VA].indexOf(A)!==-1)return Tn;if([co,zA,VA,ig,Sf].indexOf(A)!==-1)for(var f=o;f>=0;){var p=t[f];if(p===co)return Tn;if([zA,VA].indexOf(p)!==-1)f--;else break}if([$f,Qf].indexOf(A)!==-1)for(var f=[ig,Sf].indexOf(u)!==-1?c:o;f>=0;){var p=t[f];if(p===co)return Tn;if([zA,VA].indexOf(p)!==-1)f--;else break}if(_w===u&&[_w,Xg,Cw,Bw].indexOf(A)!==-1||[Xg,Cw].indexOf(u)!==-1&&[Xg,Jg].indexOf(A)!==-1||[Jg,Bw].indexOf(u)!==-1&&A===Jg||FS.indexOf(u)!==-1&&[PS,Qf].indexOf(A)!==-1||FS.indexOf(A)!==-1&&u===$f||Bc.indexOf(u)!==-1&&Bc.indexOf(A)!==-1||u===VA&&Bc.indexOf(A)!==-1||Bc.concat(co).indexOf(u)!==-1&&A===Cf&&dG.indexOf(r[l])===-1||Bc.concat(co).indexOf(A)!==-1&&u===Sf)return Tn;if(u===Rb&&A===Rb){for(var m=s[o],g=1;m>0&&(m--,t[m]===Rb);)g++;if(g%2!==0)return Tn}return u===ag&&A===og?Tn:lg},mG=function(r,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var s=fG(r,t.lineBreak),i=s[0],a=s[1],o=s[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(l){return[co,Ld,d6].indexOf(l)!==-1?Sp:l}));var c=t.wordBreak==="keep-all"?o.map(function(l,u){return l&&r[u]>=19968&&r[u]<=40959}):void 0;return[i,a,c]},gG=(function(){function r(t,s,i,a){this.codePoints=t,this.required=s===A6,this.start=i,this.end=a}return r.prototype.slice=function(){return hi.apply(void 0,this.codePoints.slice(this.start,this.end))},r})(),yG=function(r,t){var s=By(r),i=mG(s,t),a=i[0],o=i[1],c=i[2],l=s.length,u=0,d=0;return{next:function(){if(d>=l)return{done:!0,value:null};for(var A=Tn;d<l&&(A=pG(s,o,a,++d,c))===Tn;);if(A!==Tn||d===l){var f=new gG(s,A,u,d);return u=d,{value:f,done:!1}}return{done:!0,value:null}}}},xG=1,bG=2,Gp=4,LS=8,M0=10,DS=47,ep=92,vG=9,wG=32,cg=34,Bf=61,jG=35,NG=36,SG=37,ug=39,dg=40,kf=41,CG=95,qa=45,BG=33,kG=60,_G=62,EG=64,OG=91,IG=93,PG=61,TG=123,Ag=63,FG=125,MS=124,UG=126,LG=128,RS=65533,$b=42,Md=43,DG=44,MG=58,RG=59,Cp=46,QG=0,$G=8,HG=11,VG=14,zG=31,KG=127,Rl=-1,f6=48,p6=97,m6=101,GG=102,WG=117,qG=122,g6=65,y6=69,x6=70,YG=85,XG=90,ja=function(r){return r>=f6&&r<=57},JG=function(r){return r>=55296&&r<=57343},KA=function(r){return ja(r)||r>=g6&&r<=x6||r>=p6&&r<=GG},ZG=function(r){return r>=p6&&r<=qG},eW=function(r){return r>=g6&&r<=XG},tW=function(r){return ZG(r)||eW(r)},rW=function(r){return r>=LG},hg=function(r){return r===M0||r===vG||r===wG},R0=function(r){return tW(r)||rW(r)||r===CG},QS=function(r){return R0(r)||ja(r)||r===qa},nW=function(r){return r>=QG&&r<=$G||r===HG||r>=VG&&r<=zG||r===KG},Su=function(r,t){return r!==ep?!1:t!==M0},fg=function(r,t,s){return r===qa?R0(t)||Su(t,s):R0(r)?!0:!!(r===ep&&Su(r,t))},Hb=function(r,t,s){return r===Md||r===qa?ja(t)?!0:t===Cp&&ja(s):ja(r===Cp?t:r)},sW=function(r){var t=0,s=1;(r[t]===Md||r[t]===qa)&&(r[t]===qa&&(s=-1),t++);for(var i=[];ja(r[t]);)i.push(r[t++]);var a=i.length?parseInt(hi.apply(void 0,i),10):0;r[t]===Cp&&t++;for(var o=[];ja(r[t]);)o.push(r[t++]);var c=o.length,l=c?parseInt(hi.apply(void 0,o),10):0;(r[t]===y6||r[t]===m6)&&t++;var u=1;(r[t]===Md||r[t]===qa)&&(r[t]===qa&&(u=-1),t++);for(var d=[];ja(r[t]);)d.push(r[t++]);var A=d.length?parseInt(hi.apply(void 0,d),10):0;return s*(a+l*Math.pow(10,-c))*Math.pow(10,u*A)},iW={type:2},aW={type:3},oW={type:4},lW={type:13},cW={type:8},uW={type:21},dW={type:9},AW={type:10},hW={type:11},fW={type:12},pW={type:14},pg={type:23},mW={type:1},gW={type:25},yW={type:24},xW={type:26},bW={type:27},vW={type:28},wW={type:29},jW={type:31},Iw={type:32},b6=(function(){function r(){this._value=[]}return r.prototype.write=function(t){this._value=this._value.concat(By(t))},r.prototype.read=function(){for(var t=[],s=this.consumeToken();s!==Iw;)t.push(s),s=this.consumeToken();return t},r.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case cg:return this.consumeStringToken(cg);case jG:var s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(QS(s)||Su(i,a)){var o=fg(s,i,a)?bG:xG,c=this.consumeName();return{type:5,value:c,flags:o}}break;case NG:if(this.peekCodePoint(0)===Bf)return this.consumeCodePoint(),lW;break;case ug:return this.consumeStringToken(ug);case dg:return iW;case kf:return aW;case $b:if(this.peekCodePoint(0)===Bf)return this.consumeCodePoint(),pW;break;case Md:if(Hb(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case DG:return oW;case qa:var l=t,u=this.peekCodePoint(0),d=this.peekCodePoint(1);if(Hb(l,u,d))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(fg(l,u,d))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(u===qa&&d===_G)return this.consumeCodePoint(),this.consumeCodePoint(),yW;break;case Cp:if(Hb(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case DS:if(this.peekCodePoint(0)===$b)for(this.consumeCodePoint();;){var A=this.consumeCodePoint();if(A===$b&&(A=this.consumeCodePoint(),A===DS))return this.consumeToken();if(A===Rl)return this.consumeToken()}break;case MG:return xW;case RG:return bW;case kG:if(this.peekCodePoint(0)===BG&&this.peekCodePoint(1)===qa&&this.peekCodePoint(2)===qa)return this.consumeCodePoint(),this.consumeCodePoint(),gW;break;case EG:var f=this.peekCodePoint(0),p=this.peekCodePoint(1),m=this.peekCodePoint(2);if(fg(f,p,m)){var c=this.consumeName();return{type:7,value:c}}break;case OG:return vW;case ep:if(Su(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case IG:return wW;case PG:if(this.peekCodePoint(0)===Bf)return this.consumeCodePoint(),cW;break;case TG:return hW;case FG:return fW;case WG:case YG:var g=this.peekCodePoint(0),b=this.peekCodePoint(1);return g===Md&&(KA(b)||b===Ag)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case MS:if(this.peekCodePoint(0)===Bf)return this.consumeCodePoint(),dW;if(this.peekCodePoint(0)===MS)return this.consumeCodePoint(),uW;break;case UG:if(this.peekCodePoint(0)===Bf)return this.consumeCodePoint(),AW;break;case Rl:return Iw}return hg(t)?(this.consumeWhiteSpace(),jW):ja(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):R0(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:hi(t)}},r.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},r.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},r.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},r.prototype.consumeUnicodeRangeToken=function(){for(var t=[],s=this.consumeCodePoint();KA(s)&&t.length<6;)t.push(s),s=this.consumeCodePoint();for(var i=!1;s===Ag&&t.length<6;)t.push(s),s=this.consumeCodePoint(),i=!0;if(i){var a=parseInt(hi.apply(void 0,t.map(function(u){return u===Ag?f6:u})),16),o=parseInt(hi.apply(void 0,t.map(function(u){return u===Ag?x6:u})),16);return{type:30,start:a,end:o}}var c=parseInt(hi.apply(void 0,t),16);if(this.peekCodePoint(0)===qa&&KA(this.peekCodePoint(1))){this.consumeCodePoint(),s=this.consumeCodePoint();for(var l=[];KA(s)&&l.length<6;)l.push(s),s=this.consumeCodePoint();var o=parseInt(hi.apply(void 0,l),16);return{type:30,start:c,end:o}}else return{type:30,start:c,end:c}},r.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===dg?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===dg?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},r.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rl)return{type:22,value:""};var s=this.peekCodePoint(0);if(s===ug||s===cg){var i=this.consumeStringToken(this.consumeCodePoint());return i.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rl||this.peekCodePoint(0)===kf)?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),pg)}for(;;){var a=this.consumeCodePoint();if(a===Rl||a===kf)return{type:22,value:hi.apply(void 0,t)};if(hg(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Rl||this.peekCodePoint(0)===kf?(this.consumeCodePoint(),{type:22,value:hi.apply(void 0,t)}):(this.consumeBadUrlRemnants(),pg);if(a===cg||a===ug||a===dg||nW(a))return this.consumeBadUrlRemnants(),pg;if(a===ep)if(Su(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),pg;else t.push(a)}},r.prototype.consumeWhiteSpace=function(){for(;hg(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===kf||t===Rl)return;Su(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(t){for(var s=5e4,i="";t>0;){var a=Math.min(s,t);i+=hi.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),i},r.prototype.consumeStringToken=function(t){var s="",i=0;do{var a=this._value[i];if(a===Rl||a===void 0||a===t)return s+=this.consumeStringSlice(i),{type:0,value:s};if(a===M0)return this._value.splice(0,i),mW;if(a===ep){var o=this._value[i+1];o!==Rl&&o!==void 0&&(o===M0?(s+=this.consumeStringSlice(i),i=-1,this._value.shift()):Su(a,o)&&(s+=this.consumeStringSlice(i),s+=hi(this.consumeEscapedCodePoint()),i=-1))}i++}while(!0)},r.prototype.consumeNumber=function(){var t=[],s=Gp,i=this.peekCodePoint(0);for((i===Md||i===qa)&&t.push(this.consumeCodePoint());ja(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(i===Cp&&ja(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),s=LS;ja(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0),a=this.peekCodePoint(1);var o=this.peekCodePoint(2);if((i===y6||i===m6)&&((a===Md||a===qa)&&ja(o)||ja(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),s=LS;ja(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[sW(t),s]},r.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),s=t[0],i=t[1],a=this.peekCodePoint(0),o=this.peekCodePoint(1),c=this.peekCodePoint(2);if(fg(a,o,c)){var l=this.consumeName();return{type:15,number:s,flags:i,unit:l}}return a===SG?(this.consumeCodePoint(),{type:16,number:s,flags:i}):{type:17,number:s,flags:i}},r.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(KA(t)){for(var s=hi(t);KA(this.peekCodePoint(0))&&s.length<6;)s+=hi(this.consumeCodePoint());hg(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(s,16);return i===0||JG(i)||i>1114111?RS:i}return t===Rl?RS:t},r.prototype.consumeName=function(){for(var t="";;){var s=this.consumeCodePoint();if(QS(s))t+=hi(s);else if(Su(s,this.peekCodePoint(0)))t+=hi(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(s),t}},r})(),v6=(function(){function r(t){this._tokens=t}return r.create=function(t){var s=new b6;return s.write(t),new r(s.read())},r.parseValue=function(t){return r.create(t).parseComponentValue()},r.parseValues=function(t){return r.create(t).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var s=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return s;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var t=[];;){var s=this.consumeComponentValue();if(s.type===32)return t;t.push(s),t.push()}},r.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},r.prototype.consumeSimpleBlock=function(t){for(var s={type:t,values:[]},i=this.consumeToken();;){if(i.type===32||SW(i,t))return s;this.reconsumeToken(i),s.values.push(this.consumeComponentValue()),i=this.consumeToken()}},r.prototype.consumeFunction=function(t){for(var s={name:t.value,values:[],type:18};;){var i=this.consumeToken();if(i.type===32||i.type===3)return s;this.reconsumeToken(i),s.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?Iw:t},r.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},r})(),Wp=function(r){return r.type===15},Mh=function(r){return r.type===17},us=function(r){return r.type===20},NW=function(r){return r.type===0},Pw=function(r,t){return us(r)&&r.value===t},w6=function(r){return r.type!==31},Bh=function(r){return r.type!==31&&r.type!==4},cc=function(r){var t=[],s=[];return r.forEach(function(i){if(i.type===4){if(s.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(s),s=[];return}i.type!==31&&s.push(i)}),s.length&&t.push(s),t},SW=function(r,t){return t===11&&r.type===12||t===28&&r.type===29?!0:t===2&&r.type===3},Ju=function(r){return r.type===17||r.type===15},Ci=function(r){return r.type===16||Ju(r)},j6=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},ia={type:17,number:0,flags:Gp},p2={type:16,number:50,flags:Gp},Fu={type:16,number:100,flags:Gp},Hf=function(r,t,s){var i=r[0],a=r[1];return[js(i,t),js(typeof a<"u"?a:i,s)]},js=function(r,t){if(r.type===16)return r.number/100*t;if(Wp(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},N6="deg",S6="grad",C6="rad",B6="turn",ky={name:"angle",parse:function(r,t){if(t.type===15)switch(t.unit){case N6:return Math.PI*t.number/180;case S6:return Math.PI/200*t.number;case C6:return t.number;case B6:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},k6=function(r){return r.type===15&&(r.unit===N6||r.unit===S6||r.unit===C6||r.unit===B6)},_6=function(r){var t=r.filter(us).map(function(s){return s.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ia,ia];case"to top":case"bottom":return Lo(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ia,Fu];case"to right":case"left":return Lo(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Fu,Fu];case"to bottom":case"top":return Lo(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Fu,ia];case"to left":case"right":return Lo(270)}return 0},Lo=function(r){return Math.PI*r/180},Vu={name:"color",parse:function(r,t){if(t.type===18){var s=CW[t.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return s(r,t.values)}if(t.type===5){if(t.value.length===3){var i=t.value.substring(0,1),a=t.value.substring(1,2),o=t.value.substring(2,3);return Uu(parseInt(i+i,16),parseInt(a+a,16),parseInt(o+o,16),1)}if(t.value.length===4){var i=t.value.substring(0,1),a=t.value.substring(1,2),o=t.value.substring(2,3),c=t.value.substring(3,4);return Uu(parseInt(i+i,16),parseInt(a+a,16),parseInt(o+o,16),parseInt(c+c,16)/255)}if(t.value.length===6){var i=t.value.substring(0,2),a=t.value.substring(2,4),o=t.value.substring(4,6);return Uu(parseInt(i,16),parseInt(a,16),parseInt(o,16),1)}if(t.value.length===8){var i=t.value.substring(0,2),a=t.value.substring(2,4),o=t.value.substring(4,6),c=t.value.substring(6,8);return Uu(parseInt(i,16),parseInt(a,16),parseInt(o,16),parseInt(c,16)/255)}}if(t.type===20){var l=Fc[t.value.toUpperCase()];if(typeof l<"u")return l}return Fc.TRANSPARENT}},zu=function(r){return(255&r)===0},$i=function(r){var t=255&r,s=255&r>>8,i=255&r>>16,a=255&r>>24;return t<255?"rgba("+a+","+i+","+s+","+t/255+")":"rgb("+a+","+i+","+s+")"},Uu=function(r,t,s,i){return(r<<24|t<<16|s<<8|Math.round(i*255)<<0)>>>0},$S=function(r,t){if(r.type===17)return r.number;if(r.type===16){var s=t===3?1:255;return t===3?r.number/100*s:Math.round(r.number/100*s)}return 0},HS=function(r,t){var s=t.filter(Bh);if(s.length===3){var i=s.map($S),a=i[0],o=i[1],c=i[2];return Uu(a,o,c,1)}if(s.length===4){var l=s.map($S),a=l[0],o=l[1],c=l[2],u=l[3];return Uu(a,o,c,u)}return 0};function Vb(r,t,s){return s<0&&(s+=1),s>=1&&(s-=1),s<1/6?(t-r)*s*6+r:s<1/2?t:s<2/3?(t-r)*6*(2/3-s)+r:r}var VS=function(r,t){var s=t.filter(Bh),i=s[0],a=s[1],o=s[2],c=s[3],l=(i.type===17?Lo(i.number):ky.parse(r,i))/(Math.PI*2),u=Ci(a)?a.number/100:0,d=Ci(o)?o.number/100:0,A=typeof c<"u"&&Ci(c)?js(c,1):1;if(u===0)return Uu(d*255,d*255,d*255,1);var f=d<=.5?d*(u+1):d+u-d*u,p=d*2-f,m=Vb(p,f,l+1/3),g=Vb(p,f,l),b=Vb(p,f,l-1/3);return Uu(m*255,g*255,b*255,A)},CW={hsl:VS,hsla:VS,rgb:HS,rgba:HS},tp=function(r,t){return Vu.parse(r,v6.create(t).parseComponentValue())},Fc={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},BW={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,t){return t.map(function(s){if(us(s))switch(s.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},kW={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_y=function(r,t){var s=Vu.parse(r,t[0]),i=t[1];return i&&Ci(i)?{color:s,stop:i}:{color:s,stop:null}},zS=function(r,t){var s=r[0],i=r[r.length-1];s.stop===null&&(s.stop=ia),i.stop===null&&(i.stop=Fu);for(var a=[],o=0,c=0;c<r.length;c++){var l=r[c].stop;if(l!==null){var u=js(l,t);u>o?a.push(u):a.push(o),o=u}else a.push(null)}for(var d=null,c=0;c<a.length;c++){var A=a[c];if(A===null)d===null&&(d=c);else if(d!==null){for(var f=c-d,p=a[d-1],m=(A-p)/(f+1),g=1;g<=f;g++)a[d+g-1]=m*g;d=null}}return r.map(function(b,v){var y=b.color;return{color:y,stop:Math.max(Math.min(1,a[v]/t),0)}})},_W=function(r,t,s){var i=t/2,a=s/2,o=js(r[0],t)-i,c=a-js(r[1],s);return(Math.atan2(c,o)+Math.PI*2)%(Math.PI*2)},EW=function(r,t,s){var i=typeof r=="number"?r:_W(r,t,s),a=Math.abs(t*Math.sin(i))+Math.abs(s*Math.cos(i)),o=t/2,c=s/2,l=a/2,u=Math.sin(i-Math.PI/2)*l,d=Math.cos(i-Math.PI/2)*l;return[a,o-d,o+d,c-u,c+u]},al=function(r,t){return Math.sqrt(r*r+t*t)},KS=function(r,t,s,i,a){var o=[[0,0],[0,t],[r,0],[r,t]];return o.reduce(function(c,l){var u=l[0],d=l[1],A=al(s-u,i-d);return(a?A<c.optimumDistance:A>c.optimumDistance)?{optimumCorner:l,optimumDistance:A}:c},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},OW=function(r,t,s,i,a){var o=0,c=0;switch(r.size){case 0:r.shape===0?o=c=Math.min(Math.abs(t),Math.abs(t-i),Math.abs(s),Math.abs(s-a)):r.shape===1&&(o=Math.min(Math.abs(t),Math.abs(t-i)),c=Math.min(Math.abs(s),Math.abs(s-a)));break;case 2:if(r.shape===0)o=c=Math.min(al(t,s),al(t,s-a),al(t-i,s),al(t-i,s-a));else if(r.shape===1){var l=Math.min(Math.abs(s),Math.abs(s-a))/Math.min(Math.abs(t),Math.abs(t-i)),u=KS(i,a,t,s,!0),d=u[0],A=u[1];o=al(d-t,(A-s)/l),c=l*o}break;case 1:r.shape===0?o=c=Math.max(Math.abs(t),Math.abs(t-i),Math.abs(s),Math.abs(s-a)):r.shape===1&&(o=Math.max(Math.abs(t),Math.abs(t-i)),c=Math.max(Math.abs(s),Math.abs(s-a)));break;case 3:if(r.shape===0)o=c=Math.max(al(t,s),al(t,s-a),al(t-i,s),al(t-i,s-a));else if(r.shape===1){var l=Math.max(Math.abs(s),Math.abs(s-a))/Math.max(Math.abs(t),Math.abs(t-i)),f=KS(i,a,t,s,!1),d=f[0],A=f[1];o=al(d-t,(A-s)/l),c=l*o}break}return Array.isArray(r.size)&&(o=js(r.size[0],i),c=r.size.length===2?js(r.size[1],a):o),[o,c]},IW=function(r,t){var s=Lo(180),i=[];return cc(t).forEach(function(a,o){if(o===0){var c=a[0];if(c.type===20&&c.value==="to"){s=_6(a);return}else if(k6(c)){s=ky.parse(r,c);return}}var l=_y(r,a);i.push(l)}),{angle:s,stops:i,type:1}},mg=function(r,t){var s=Lo(180),i=[];return cc(t).forEach(function(a,o){if(o===0){var c=a[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){s=_6(a);return}else if(k6(c)){s=(ky.parse(r,c)+Lo(270))%Lo(360);return}}var l=_y(r,a);i.push(l)}),{angle:s,stops:i,type:1}},PW=function(r,t){var s=Lo(180),i=[],a=1,o=0,c=3,l=[];return cc(t).forEach(function(u,d){var A=u[0];if(d===0){if(us(A)&&A.value==="linear"){a=1;return}else if(us(A)&&A.value==="radial"){a=2;return}}if(A.type===18){if(A.name==="from"){var f=Vu.parse(r,A.values[0]);i.push({stop:ia,color:f})}else if(A.name==="to"){var f=Vu.parse(r,A.values[0]);i.push({stop:Fu,color:f})}else if(A.name==="color-stop"){var p=A.values.filter(Bh);if(p.length===2){var f=Vu.parse(r,p[1]),m=p[0];Mh(m)&&i.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),a===1?{angle:(s+Lo(180))%Lo(360),stops:i,type:a}:{size:c,shape:o,stops:i,position:l,type:a}},E6="closest-side",O6="farthest-side",I6="closest-corner",P6="farthest-corner",T6="circle",F6="ellipse",U6="cover",L6="contain",TW=function(r,t){var s=0,i=3,a=[],o=[];return cc(t).forEach(function(c,l){var u=!0;if(l===0){var d=!1;u=c.reduce(function(f,p){if(d)if(us(p))switch(p.value){case"center":return o.push(p2),f;case"top":case"left":return o.push(ia),f;case"right":case"bottom":return o.push(Fu),f}else(Ci(p)||Ju(p))&&o.push(p);else if(us(p))switch(p.value){case T6:return s=0,!1;case F6:return s=1,!1;case"at":return d=!0,!1;case E6:return i=0,!1;case U6:case O6:return i=1,!1;case L6:case I6:return i=2,!1;case P6:return i=3,!1}else if(Ju(p)||Ci(p))return Array.isArray(i)||(i=[]),i.push(p),!1;return f},u)}if(u){var A=_y(r,c);a.push(A)}}),{size:i,shape:s,stops:a,position:o,type:2}},gg=function(r,t){var s=0,i=3,a=[],o=[];return cc(t).forEach(function(c,l){var u=!0;if(l===0?u=c.reduce(function(A,f){if(us(f))switch(f.value){case"center":return o.push(p2),!1;case"top":case"left":return o.push(ia),!1;case"right":case"bottom":return o.push(Fu),!1}else if(Ci(f)||Ju(f))return o.push(f),!1;return A},u):l===1&&(u=c.reduce(function(A,f){if(us(f))switch(f.value){case T6:return s=0,!1;case F6:return s=1,!1;case L6:case E6:return i=0,!1;case O6:return i=1,!1;case I6:return i=2,!1;case U6:case P6:return i=3,!1}else if(Ju(f)||Ci(f))return Array.isArray(i)||(i=[]),i.push(f),!1;return A},u)),u){var d=_y(r,c);a.push(d)}}),{size:i,shape:s,stops:a,position:o,type:2}},FW=function(r){return r.type===1},UW=function(r){return r.type===2},m2={name:"image",parse:function(r,t){if(t.type===22){var s={url:t.value,type:0};return r.cache.addImage(t.value),s}if(t.type===18){var i=D6[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return i(r,t.values)}throw new Error("Unsupported image type "+t.type)}};function LW(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!D6[r.name])}var D6={"linear-gradient":IW,"-moz-linear-gradient":mg,"-ms-linear-gradient":mg,"-o-linear-gradient":mg,"-webkit-linear-gradient":mg,"radial-gradient":TW,"-moz-radial-gradient":gg,"-ms-radial-gradient":gg,"-o-radial-gradient":gg,"-webkit-radial-gradient":gg,"-webkit-gradient":PW},DW={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,t){if(t.length===0)return[];var s=t[0];return s.type===20&&s.value==="none"?[]:t.filter(function(i){return Bh(i)&&LW(i)}).map(function(i){return m2.parse(r,i)})}},MW={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,t){return t.map(function(s){if(us(s))switch(s.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},RW={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,t){return cc(t).map(function(s){return s.filter(Ci)}).map(j6)}},QW={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,t){return cc(t).map(function(s){return s.filter(us).map(function(i){return i.value}).join(" ")}).map($W)}},$W=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},wh;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(wh||(wh={}));var HW={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,t){return cc(t).map(function(s){return s.filter(VW)})}},VW=function(r){return us(r)||Ci(r)},Ey=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},zW=Ey("top"),KW=Ey("right"),GW=Ey("bottom"),WW=Ey("left"),Oy=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(t,s){return j6(s.filter(Ci))}}},qW=Oy("top-left"),YW=Oy("top-right"),XW=Oy("bottom-right"),JW=Oy("bottom-left"),Iy=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,s){switch(s){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ZW=Iy("top"),eq=Iy("right"),tq=Iy("bottom"),rq=Iy("left"),Py=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,s){return Wp(s)?s.number:0}}},nq=Py("top"),sq=Py("right"),iq=Py("bottom"),aq=Py("left"),oq={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lq={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},cq={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,t){return t.filter(us).reduce(function(s,i){return s|uq(i.value)},0)}},uq=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},dq={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Aq={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},Q0;(function(r){r.NORMAL="normal",r.STRICT="strict"})(Q0||(Q0={}));var hq={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"strict":return Q0.STRICT;case"normal":default:return Q0.NORMAL}}},fq={name:"line-height",initialValue:"normal",prefix:!1,type:4},GS=function(r,t){return us(r)&&r.value==="normal"?1.2*t:r.type===17?t*r.number:Ci(r)?js(r,t):t},pq={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,t){return t.type===20&&t.value==="none"?null:m2.parse(r,t)}},mq={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},Tw={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ty=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},gq=Ty("top"),yq=Ty("right"),xq=Ty("bottom"),bq=Ty("left"),vq={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,t){return t.filter(us).map(function(s){switch(s.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},wq={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Fy=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},jq=Fy("top"),Nq=Fy("right"),Sq=Fy("bottom"),Cq=Fy("left"),Bq={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},kq={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},_q={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,t){return t.length===1&&Pw(t[0],"none")?[]:cc(t).map(function(s){for(var i={color:Fc.TRANSPARENT,offsetX:ia,offsetY:ia,blur:ia},a=0,o=0;o<s.length;o++){var c=s[o];Ju(c)?(a===0?i.offsetX=c:a===1?i.offsetY=c:i.blur=c,a++):i.color=Vu.parse(r,c)}return i})}},Eq={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Oq={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var s=Tq[t.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return s(t.values)}return null}},Iq=function(r){var t=r.filter(function(s){return s.type===17}).map(function(s){return s.number});return t.length===6?t:null},Pq=function(r){var t=r.filter(function(u){return u.type===17}).map(function(u){return u.number}),s=t[0],i=t[1];t[2],t[3];var a=t[4],o=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var c=t[12],l=t[13];return t[14],t[15],t.length===16?[s,i,a,o,c,l]:null},Tq={matrix:Iq,matrix3d:Pq},WS={type:16,number:50,flags:Gp},Fq=[WS,WS],Uq={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,t){var s=t.filter(Ci);return s.length!==2?Fq:[s[0],s[1]]}},Lq={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},rp;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(rp||(rp={}));var Dq={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"break-all":return rp.BREAK_ALL;case"keep-all":return rp.KEEP_ALL;case"normal":default:return rp.NORMAL}}},Mq={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,t){if(t.type===20)return{auto:!0,order:0};if(Mh(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},M6={name:"time",parse:function(r,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Rq={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,t){return Mh(t)?t.number:1}},Qq={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$q={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,t){return t.filter(us).map(function(s){switch(s.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(s){return s!==0})}},Hq={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,t){var s=[],i=[];return t.forEach(function(a){switch(a.type){case 20:case 0:s.push(a.value);break;case 17:s.push(a.number.toString());break;case 4:i.push(s.join(" ")),s.length=0;break}}),s.length&&i.push(s.join(" ")),i.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Vq={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},zq={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,t){if(Mh(t))return t.number;if(us(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},Kq={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,t){return t.filter(us).map(function(s){return s.value})}},Gq={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Pi=function(r,t){return(r&t)!==0},Wq={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,t){if(t.length===0)return[];var s=t[0];return s.type===20&&s.value==="none"?[]:t}},qq={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,t){if(t.length===0)return null;var s=t[0];if(s.type===20&&s.value==="none")return null;for(var i=[],a=t.filter(w6),o=0;o<a.length;o++){var c=a[o],l=a[o+1];if(c.type===20){var u=l&&Mh(l)?l.number:1;i.push({counter:c.value,increment:u})}}return i}},Yq={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,t){if(t.length===0)return[];for(var s=[],i=t.filter(w6),a=0;a<i.length;a++){var o=i[a],c=i[a+1];if(us(o)&&o.value!=="none"){var l=c&&Mh(c)?c.number:0;s.push({counter:o.value,reset:l})}}return s}},Xq={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,t){return t.filter(Wp).map(function(s){return M6.parse(r,s)})}},Jq={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,t){if(t.length===0)return null;var s=t[0];if(s.type===20&&s.value==="none")return null;var i=[],a=t.filter(NW);if(a.length%2!==0)return null;for(var o=0;o<a.length;o+=2){var c=a[o].value,l=a[o+1].value;i.push({open:c,close:l})}return i}},qS=function(r,t,s){if(!r)return"";var i=r[Math.min(t,r.length-1)];return i?s?i.open:i.close:""},Zq={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,t){return t.length===1&&Pw(t[0],"none")?[]:cc(t).map(function(s){for(var i={color:255,offsetX:ia,offsetY:ia,blur:ia,spread:ia,inset:!1},a=0,o=0;o<s.length;o++){var c=s[o];Pw(c,"inset")?i.inset=!0:Ju(c)?(a===0?i.offsetX=c:a===1?i.offsetY=c:a===2?i.blur=c:i.spread=c,a++):i.color=Vu.parse(r,c)}return i})}},eY={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,t){var s=[0,1,2],i=[];return t.filter(us).forEach(function(a){switch(a.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2);break}}),s.forEach(function(a){i.indexOf(a)===-1&&i.push(a)}),i}},tY={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},rY={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,t){return Wp(t)?t.number:0}},nY=(function(){function r(t,s){var i,a;this.animationDuration=yr(t,Xq,s.animationDuration),this.backgroundClip=yr(t,BW,s.backgroundClip),this.backgroundColor=yr(t,kW,s.backgroundColor),this.backgroundImage=yr(t,DW,s.backgroundImage),this.backgroundOrigin=yr(t,MW,s.backgroundOrigin),this.backgroundPosition=yr(t,RW,s.backgroundPosition),this.backgroundRepeat=yr(t,QW,s.backgroundRepeat),this.backgroundSize=yr(t,HW,s.backgroundSize),this.borderTopColor=yr(t,zW,s.borderTopColor),this.borderRightColor=yr(t,KW,s.borderRightColor),this.borderBottomColor=yr(t,GW,s.borderBottomColor),this.borderLeftColor=yr(t,WW,s.borderLeftColor),this.borderTopLeftRadius=yr(t,qW,s.borderTopLeftRadius),this.borderTopRightRadius=yr(t,YW,s.borderTopRightRadius),this.borderBottomRightRadius=yr(t,XW,s.borderBottomRightRadius),this.borderBottomLeftRadius=yr(t,JW,s.borderBottomLeftRadius),this.borderTopStyle=yr(t,ZW,s.borderTopStyle),this.borderRightStyle=yr(t,eq,s.borderRightStyle),this.borderBottomStyle=yr(t,tq,s.borderBottomStyle),this.borderLeftStyle=yr(t,rq,s.borderLeftStyle),this.borderTopWidth=yr(t,nq,s.borderTopWidth),this.borderRightWidth=yr(t,sq,s.borderRightWidth),this.borderBottomWidth=yr(t,iq,s.borderBottomWidth),this.borderLeftWidth=yr(t,aq,s.borderLeftWidth),this.boxShadow=yr(t,Zq,s.boxShadow),this.color=yr(t,oq,s.color),this.direction=yr(t,lq,s.direction),this.display=yr(t,cq,s.display),this.float=yr(t,dq,s.cssFloat),this.fontFamily=yr(t,Hq,s.fontFamily),this.fontSize=yr(t,Vq,s.fontSize),this.fontStyle=yr(t,Gq,s.fontStyle),this.fontVariant=yr(t,Kq,s.fontVariant),this.fontWeight=yr(t,zq,s.fontWeight),this.letterSpacing=yr(t,Aq,s.letterSpacing),this.lineBreak=yr(t,hq,s.lineBreak),this.lineHeight=yr(t,fq,s.lineHeight),this.listStyleImage=yr(t,pq,s.listStyleImage),this.listStylePosition=yr(t,mq,s.listStylePosition),this.listStyleType=yr(t,Tw,s.listStyleType),this.marginTop=yr(t,gq,s.marginTop),this.marginRight=yr(t,yq,s.marginRight),this.marginBottom=yr(t,xq,s.marginBottom),this.marginLeft=yr(t,bq,s.marginLeft),this.opacity=yr(t,Rq,s.opacity);var o=yr(t,vq,s.overflow);this.overflowX=o[0],this.overflowY=o[o.length>1?1:0],this.overflowWrap=yr(t,wq,s.overflowWrap),this.paddingTop=yr(t,jq,s.paddingTop),this.paddingRight=yr(t,Nq,s.paddingRight),this.paddingBottom=yr(t,Sq,s.paddingBottom),this.paddingLeft=yr(t,Cq,s.paddingLeft),this.paintOrder=yr(t,eY,s.paintOrder),this.position=yr(t,kq,s.position),this.textAlign=yr(t,Bq,s.textAlign),this.textDecorationColor=yr(t,Qq,(i=s.textDecorationColor)!==null&&i!==void 0?i:s.color),this.textDecorationLine=yr(t,$q,(a=s.textDecorationLine)!==null&&a!==void 0?a:s.textDecoration),this.textShadow=yr(t,_q,s.textShadow),this.textTransform=yr(t,Eq,s.textTransform),this.transform=yr(t,Oq,s.transform),this.transformOrigin=yr(t,Uq,s.transformOrigin),this.visibility=yr(t,Lq,s.visibility),this.webkitTextStrokeColor=yr(t,tY,s.webkitTextStrokeColor),this.webkitTextStrokeWidth=yr(t,rY,s.webkitTextStrokeWidth),this.wordBreak=yr(t,Dq,s.wordBreak),this.zIndex=yr(t,Mq,s.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return zu(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return Pi(this.display,4)||Pi(this.display,33554432)||Pi(this.display,268435456)||Pi(this.display,536870912)||Pi(this.display,67108864)||Pi(this.display,134217728)},r})(),sY=(function(){function r(t,s){this.content=yr(t,Wq,s.content),this.quotes=yr(t,Jq,s.quotes)}return r})(),YS=(function(){function r(t,s){this.counterIncrement=yr(t,qq,s.counterIncrement),this.counterReset=yr(t,Yq,s.counterReset)}return r})(),yr=function(r,t,s){var i=new b6,a=s!==null&&typeof s<"u"?s.toString():t.initialValue;i.write(a);var o=new v6(i.read());switch(t.type){case 2:var c=o.parseComponentValue();return t.parse(r,us(c)?c.value:t.initialValue);case 0:return t.parse(r,o.parseComponentValue());case 1:return t.parse(r,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(t.format){case"angle":return ky.parse(r,o.parseComponentValue());case"color":return Vu.parse(r,o.parseComponentValue());case"image":return m2.parse(r,o.parseComponentValue());case"length":var l=o.parseComponentValue();return Ju(l)?l:ia;case"length-percentage":var u=o.parseComponentValue();return Ci(u)?u:ia;case"time":return M6.parse(r,o.parseComponentValue())}break}},iY="data-html2canvas-debug",aY=function(r){var t=r.getAttribute(iY);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Fw=function(r,t){var s=aY(r);return s===1||t===s},uc=(function(){function r(t,s){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,Fw(s,3))debugger;this.styles=new nY(t,window.getComputedStyle(s,null)),Dw(s)&&(this.styles.animationDuration.some(function(i){return i>0})&&(s.style.animationDuration="0s"),this.styles.transform!==null&&(s.style.transform="none")),this.bounds=Cy(this.context,s),Fw(s,4)&&(this.flags|=16)}return r})(),oY="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",XS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yg=0;yg<XS.length;yg++)Vf[XS.charCodeAt(yg)]=yg;var lY=function(r){var t=r.length*.75,s=r.length,i,a=0,o,c,l,u;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),A=Array.isArray(d)?d:new Uint8Array(d);for(i=0;i<s;i+=4)o=Vf[r.charCodeAt(i)],c=Vf[r.charCodeAt(i+1)],l=Vf[r.charCodeAt(i+2)],u=Vf[r.charCodeAt(i+3)],A[a++]=o<<2|c>>4,A[a++]=(c&15)<<4|l>>2,A[a++]=(l&3)<<6|u&63;return d},cY=function(r){for(var t=r.length,s=[],i=0;i<t;i+=2)s.push(r[i+1]<<8|r[i]);return s},uY=function(r){for(var t=r.length,s=[],i=0;i<t;i+=4)s.push(r[i+3]<<24|r[i+2]<<16|r[i+1]<<8|r[i]);return s},Gd=5,g2=11,zb=2,dY=g2-Gd,R6=65536>>Gd,AY=1<<Gd,Kb=AY-1,hY=1024>>Gd,fY=R6+hY,pY=fY,mY=32,gY=pY+mY,yY=65536>>g2,xY=1<<dY,bY=xY-1,JS=function(r,t,s){return r.slice?r.slice(t,s):new Uint16Array(Array.prototype.slice.call(r,t,s))},vY=function(r,t,s){return r.slice?r.slice(t,s):new Uint32Array(Array.prototype.slice.call(r,t,s))},wY=function(r,t){var s=lY(r),i=Array.isArray(s)?uY(s):new Uint32Array(s),a=Array.isArray(s)?cY(s):new Uint16Array(s),o=24,c=JS(a,o/2,i[4]/2),l=i[5]===2?JS(a,(o+i[4])/2):vY(i,Math.ceil((o+i[4])/4));return new jY(i[0],i[1],i[2],i[3],c,l)},jY=(function(){function r(t,s,i,a,o,c){this.initialValue=t,this.errorValue=s,this.highStart=i,this.highValueIndex=a,this.index=o,this.data=c}return r.prototype.get=function(t){var s;if(t>=0){if(t<55296||t>56319&&t<=65535)return s=this.index[t>>Gd],s=(s<<zb)+(t&Kb),this.data[s];if(t<=65535)return s=this.index[R6+(t-55296>>Gd)],s=(s<<zb)+(t&Kb),this.data[s];if(t<this.highStart)return s=gY-yY+(t>>g2),s=this.index[s],s+=t>>Gd&bY,s=this.index[s],s=(s<<zb)+(t&Kb),this.data[s];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),ZS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",NY=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xg=0;xg<ZS.length;xg++)NY[ZS.charCodeAt(xg)]=xg;var SY=1,Gb=2,Wb=3,eC=4,tC=5,CY=7,rC=8,qb=9,Yb=10,nC=11,sC=12,iC=13,aC=14,Xb=15,BY=function(r){for(var t=[],s=0,i=r.length;s<i;){var a=r.charCodeAt(s++);if(a>=55296&&a<=56319&&s<i){var o=r.charCodeAt(s++);(o&64512)===56320?t.push(((a&1023)<<10)+(o&1023)+65536):(t.push(a),s--)}else t.push(a)}return t},kY=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var s=r.length;if(!s)return"";for(var i=[],a=-1,o="";++a<s;){var c=r[a];c<=65535?i.push(c):(c-=65536,i.push((c>>10)+55296,c%1024+56320)),(a+1===s||i.length>16384)&&(o+=String.fromCharCode.apply(String,i),i.length=0)}return o},_Y=wY(oY),Io="",Jb="",EY=function(r){return _Y.get(r)},OY=function(r,t,s){var i=s-2,a=t[i],o=t[s-1],c=t[s];if(o===Gb&&c===Wb)return Io;if(o===Gb||o===Wb||o===eC||c===Gb||c===Wb||c===eC)return Jb;if(o===rC&&[rC,qb,nC,sC].indexOf(c)!==-1||(o===nC||o===qb)&&(c===qb||c===Yb)||(o===sC||o===Yb)&&c===Yb||c===iC||c===tC||c===CY||o===SY)return Io;if(o===iC&&c===aC){for(;a===tC;)a=t[--i];if(a===aC)return Io}if(o===Xb&&c===Xb){for(var l=0;a===Xb;)l++,a=t[--i];if(l%2===0)return Io}return Jb},IY=function(r){var t=BY(r),s=t.length,i=0,a=0,o=t.map(EY);return{next:function(){if(i>=s)return{done:!0,value:null};for(var c=Io;i<s&&(c=OY(t,o,++i))===Io;);if(c!==Io||i===s){var l=kY.apply(null,t.slice(a,i));return a=i,{value:l,done:!1}}return{done:!0,value:null}}}},PY=function(r){for(var t=IY(r),s=[],i;!(i=t.next()).done;)i.value&&s.push(i.value.slice());return s},TY=function(r){var t=123;if(r.createRange){var s=r.createRange();if(s.getBoundingClientRect){var i=r.createElement("boundtest");i.style.height=t+"px",i.style.display="block",r.body.appendChild(i),s.selectNode(i);var a=s.getBoundingClientRect(),o=Math.round(a.height);if(r.body.removeChild(i),o===t)return!0}}return!1},FY=function(r){var t=r.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",r.body.appendChild(t);var s=r.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var i=t.firstChild,a=By(i.data).map(function(u){return hi(u)}),o=0,c={},l=a.every(function(u,d){s.setStart(i,o),s.setEnd(i,o+u.length);var A=s.getBoundingClientRect();o+=u.length;var f=A.x>c.x||A.y>c.y;return c=A,d===0?!0:f});return r.body.removeChild(t),l},UY=function(){return typeof new Image().crossOrigin<"u"},LY=function(){return typeof new XMLHttpRequest().responseType=="string"},DY=function(r){var t=new Image,s=r.createElement("canvas"),i=s.getContext("2d");if(!i)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),s.toDataURL()}catch{return!1}return!0},oC=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},MY=function(r){var t=r.createElement("canvas"),s=100;t.width=s,t.height=s;var i=t.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,s,s);var a=new Image,o=t.toDataURL();a.src=o;var c=Uw(s,s,0,0,a);return i.fillStyle="red",i.fillRect(0,0,s,s),lC(c).then(function(l){i.drawImage(l,0,0);var u=i.getImageData(0,0,s,s).data;i.fillStyle="red",i.fillRect(0,0,s,s);var d=r.createElement("div");return d.style.backgroundImage="url("+o+")",d.style.height=s+"px",oC(u)?lC(Uw(s,s,0,0,d)):Promise.reject(!1)}).then(function(l){return i.drawImage(l,0,0),oC(i.getImageData(0,0,s,s).data)}).catch(function(){return!1})},Uw=function(r,t,s,i,a){var o="http://www.w3.org/2000/svg",c=document.createElementNS(o,"svg"),l=document.createElementNS(o,"foreignObject");return c.setAttributeNS(null,"width",r.toString()),c.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",s.toString()),l.setAttributeNS(null,"y",i.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(l),l.appendChild(a),c},lC=function(r){return new Promise(function(t,s){var i=new Image;i.onload=function(){return t(i)},i.onerror=s,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},na={get SUPPORT_RANGE_BOUNDS(){var r=TY(document);return Object.defineProperty(na,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=na.SUPPORT_RANGE_BOUNDS&&FY(document);return Object.defineProperty(na,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=DY(document);return Object.defineProperty(na,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?MY(document):Promise.resolve(!1);return Object.defineProperty(na,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=UY();return Object.defineProperty(na,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=LY();return Object.defineProperty(na,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(na,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(na,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},np=(function(){function r(t,s){this.text=t,this.bounds=s}return r})(),RY=function(r,t,s,i){var a=HY(t,s),o=[],c=0;return a.forEach(function(l){if(s.textDecorationLine.length||l.trim().length>0)if(na.SUPPORT_RANGE_BOUNDS){var u=cC(i,c,l.length).getClientRects();if(u.length>1){var d=y2(l),A=0;d.forEach(function(p){o.push(new np(p,Qc.fromDOMRectList(r,cC(i,A+c,p.length).getClientRects()))),A+=p.length})}else o.push(new np(l,Qc.fromDOMRectList(r,u)))}else{var f=i.splitText(l.length);o.push(new np(l,QY(r,i))),i=f}else na.SUPPORT_RANGE_BOUNDS||(i=i.splitText(l.length));c+=l.length}),o},QY=function(r,t){var s=t.ownerDocument;if(s){var i=s.createElement("html2canvaswrapper");i.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(i,t);var o=Cy(r,i);return i.firstChild&&a.replaceChild(i.firstChild,i),o}}return Qc.EMPTY},cC=function(r,t,s){var i=r.ownerDocument;if(!i)throw new Error("Node has no owner document");var a=i.createRange();return a.setStart(r,t),a.setEnd(r,t+s),a},y2=function(r){if(na.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(r)).map(function(s){return s.segment})}return PY(r)},$Y=function(r,t){if(na.SUPPORT_NATIVE_TEXT_SEGMENTATION){var s=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(s.segment(r)).map(function(i){return i.segment})}return zY(r,t)},HY=function(r,t){return t.letterSpacing!==0?y2(r):$Y(r,t)},VY=[32,160,4961,65792,65793,4153,4241],zY=function(r,t){for(var s=yG(r,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),i=[],a,o=function(){if(a.value){var c=a.value.slice(),l=By(c),u="";l.forEach(function(d){VY.indexOf(d)===-1?u+=hi(d):(u.length&&i.push(u),i.push(hi(d)),u="")}),u.length&&i.push(u)}};!(a=s.next()).done;)o();return i},KY=(function(){function r(t,s,i){this.text=GY(s.data,i.textTransform),this.textBounds=RY(t,this.text,i,s)}return r})(),GY=function(r,t){switch(t){case 1:return r.toLowerCase();case 3:return r.replace(WY,qY);case 2:return r.toUpperCase();default:return r}},WY=/(^|\s|:|-|\(|\))([a-z])/g,qY=function(r,t,s){return r.length>0?t+s.toUpperCase():r},Q6=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this;return a.src=i.currentSrc||i.src,a.intrinsicWidth=i.naturalWidth,a.intrinsicHeight=i.naturalHeight,a.context.cache.addImage(a.src),a}return t})(uc),$6=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this;return a.canvas=i,a.intrinsicWidth=i.width,a.intrinsicHeight=i.height,a}return t})(uc),H6=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this,o=new XMLSerializer,c=Cy(s,i);return i.setAttribute("width",c.width+"px"),i.setAttribute("height",c.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(o.serializeToString(i)),a.intrinsicWidth=i.width.baseVal.value,a.intrinsicHeight=i.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t})(uc),V6=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this;return a.value=i.value,a}return t})(uc),Lw=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this;return a.start=i.start,a.reversed=typeof i.reversed=="boolean"&&i.reversed===!0,a}return t})(uc),YY=[{type:15,flags:0,unit:"px",number:3}],XY=[{type:16,flags:0,number:50}],JY=function(r){return r.width>r.height?new Qc(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new Qc(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},ZY=function(r){var t=r.type===eX?new Array(r.value.length+1).join(""):r.value;return t.length===0?r.placeholder||"":t},$0="checkbox",H0="radio",eX="password",uC=707406591,x2=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this;switch(a.type=i.type.toLowerCase(),a.checked=i.checked,a.value=ZY(i),(a.type===$0||a.type===H0)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=JY(a.bounds)),a.type){case $0:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=YY;break;case H0:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=XY;break}return a}return t})(uc),z6=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this,o=i.options[i.selectedIndex||0];return a.value=o&&o.text||"",a}return t})(uc),K6=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this;return a.value=i.value,a}return t})(uc),G6=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this;a.src=i.src,a.width=parseInt(i.width,10)||0,a.height=parseInt(i.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){a.tree=q6(s,i.contentWindow.document.documentElement);var o=i.contentWindow.document.documentElement?tp(s,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):Fc.TRANSPARENT,c=i.contentWindow.document.body?tp(s,getComputedStyle(i.contentWindow.document.body).backgroundColor):Fc.TRANSPARENT;a.backgroundColor=zu(o)?zu(c)?a.styles.backgroundColor:c:o}}catch{}return a}return t})(uc),tX=["OL","UL","MENU"],Zg=function(r,t,s,i){for(var a=t.firstChild,o=void 0;a;a=o)if(o=a.nextSibling,Y6(a)&&a.data.trim().length>0)s.textNodes.push(new KY(r,a,s.styles));else if(ah(a))if(eO(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return Zg(r,l,s,i)});else{var c=W6(r,a);c.styles.isVisible()&&(rX(a,c,i)?c.flags|=4:nX(c.styles)&&(c.flags|=2),tX.indexOf(a.tagName)!==-1&&(c.flags|=8),s.elements.push(c),a.slot,a.shadowRoot?Zg(r,a.shadowRoot,c,i):!V0(a)&&!X6(a)&&!z0(a)&&Zg(r,a,c,i))}},W6=function(r,t){return Mw(t)?new Q6(r,t):J6(t)?new $6(r,t):X6(t)?new H6(r,t):sX(t)?new V6(r,t):iX(t)?new Lw(r,t):aX(t)?new x2(r,t):z0(t)?new z6(r,t):V0(t)?new K6(r,t):Z6(t)?new G6(r,t):new uc(r,t)},q6=function(r,t){var s=W6(r,t);return s.flags|=4,Zg(r,t,s,s),s},rX=function(r,t,s){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||b2(r)&&s.styles.isTransparent()},nX=function(r){return r.isPositioned()||r.isFloating()},Y6=function(r){return r.nodeType===Node.TEXT_NODE},ah=function(r){return r.nodeType===Node.ELEMENT_NODE},Dw=function(r){return ah(r)&&typeof r.style<"u"&&!e0(r)},e0=function(r){return typeof r.className=="object"},sX=function(r){return r.tagName==="LI"},iX=function(r){return r.tagName==="OL"},aX=function(r){return r.tagName==="INPUT"},oX=function(r){return r.tagName==="HTML"},X6=function(r){return r.tagName==="svg"},b2=function(r){return r.tagName==="BODY"},J6=function(r){return r.tagName==="CANVAS"},dC=function(r){return r.tagName==="VIDEO"},Mw=function(r){return r.tagName==="IMG"},Z6=function(r){return r.tagName==="IFRAME"},AC=function(r){return r.tagName==="STYLE"},lX=function(r){return r.tagName==="SCRIPT"},V0=function(r){return r.tagName==="TEXTAREA"},z0=function(r){return r.tagName==="SELECT"},eO=function(r){return r.tagName==="SLOT"},hC=function(r){return r.tagName.indexOf("-")>0},cX=(function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(t){var s=this.counters[t];return s&&s.length?s[s.length-1]:1},r.prototype.getCounterValues=function(t){var s=this.counters[t];return s||[]},r.prototype.pop=function(t){var s=this;t.forEach(function(i){return s.counters[i].pop()})},r.prototype.parse=function(t){var s=this,i=t.counterIncrement,a=t.counterReset,o=!0;i!==null&&i.forEach(function(l){var u=s.counters[l.counter];u&&l.increment!==0&&(o=!1,u.length||u.push(1),u[Math.max(0,u.length-1)]+=l.increment)});var c=[];return o&&a.forEach(function(l){var u=s.counters[l.counter];c.push(l.counter),u||(u=s.counters[l.counter]=[]),u.push(l.reset)}),c},r})(),fC={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},pC={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},uX={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dX={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},GA=function(r,t,s,i,a,o){return r<t||r>s?Bp(r,a,o.length>0):i.integers.reduce(function(c,l,u){for(;r>=l;)r-=l,c+=i.values[u];return c},"")+o},tO=function(r,t,s,i){var a="";do s||r--,a=i(r)+a,r/=t;while(r*t>=t);return a},di=function(r,t,s,i,a){var o=s-t+1;return(r<0?"-":"")+(tO(Math.abs(r),o,i,function(c){return hi(Math.floor(c%o)+t)})+a)},Ed=function(r,t,s){s===void 0&&(s=". ");var i=t.length;return tO(Math.abs(r),i,!1,function(a){return t[Math.floor(a%i)]})+s},JA=1,wu=2,ju=4,zf=8,kc=function(r,t,s,i,a,o){if(r<-9999||r>9999)return Bp(r,4,a.length>0);var c=Math.abs(r),l=a;if(c===0)return t[0]+l;for(var u=0;c>0&&u<=4;u++){var d=c%10;d===0&&Pi(o,JA)&&l!==""?l=t[d]+l:d>1||d===1&&u===0||d===1&&u===1&&Pi(o,wu)||d===1&&u===1&&Pi(o,ju)&&r>100||d===1&&u>1&&Pi(o,zf)?l=t[d]+(u>0?s[u-1]:"")+l:d===1&&u>0&&(l=s[u-1]+l),c=Math.floor(c/10)}return(r<0?i:"")+l},mC="",gC="",yC="",Zb="",Bp=function(r,t,s){var i=s?". ":"",a=s?"":"",o=s?", ":"",c=s?" ":"";switch(t){case 0:return""+c;case 1:return""+c;case 2:return""+c;case 5:var l=di(r,48,57,!0,i);return l.length<4?"0"+l:l;case 4:return Ed(r,"",a);case 6:return GA(r,1,3999,fC,3,i).toLowerCase();case 7:return GA(r,1,3999,fC,3,i);case 8:return di(r,945,969,!1,i);case 9:return di(r,97,122,!1,i);case 10:return di(r,65,90,!1,i);case 11:return di(r,1632,1641,!0,i);case 12:case 49:return GA(r,1,9999,pC,3,i);case 35:return GA(r,1,9999,pC,3,i).toLowerCase();case 13:return di(r,2534,2543,!0,i);case 14:case 30:return di(r,6112,6121,!0,i);case 15:return Ed(r,"",a);case 16:return Ed(r,"",a);case 17:case 48:return kc(r,"",mC,"",a,wu|ju|zf);case 47:return kc(r,"",gC,"",a,JA|wu|ju|zf);case 42:return kc(r,"",mC,"",a,wu|ju|zf);case 41:return kc(r,"",gC,"",a,JA|wu|ju|zf);case 26:return kc(r,"","",yC,a,0);case 25:return kc(r,"","",yC,a,JA|wu|ju);case 31:return kc(r,"","",Zb,o,JA|wu|ju);case 33:return kc(r,"","",Zb,o,0);case 32:return kc(r,"","",Zb,o,JA|wu|ju);case 18:return di(r,2406,2415,!0,i);case 20:return GA(r,1,19999,dX,3,i);case 21:return di(r,2790,2799,!0,i);case 22:return di(r,2662,2671,!0,i);case 22:return GA(r,1,10999,uX,3,i);case 23:return Ed(r,"");case 24:return Ed(r,"");case 27:return di(r,3302,3311,!0,i);case 28:return Ed(r,"",a);case 29:return Ed(r,"",a);case 34:return di(r,3792,3801,!0,i);case 37:return di(r,6160,6169,!0,i);case 38:return di(r,4160,4169,!0,i);case 39:return di(r,2918,2927,!0,i);case 40:return di(r,1776,1785,!0,i);case 43:return di(r,3046,3055,!0,i);case 44:return di(r,3174,3183,!0,i);case 45:return di(r,3664,3673,!0,i);case 46:return di(r,3872,3881,!0,i);case 3:default:return di(r,48,57,!0,i)}},rO="data-html2canvas-ignore",xC=(function(){function r(t,s,i){if(this.context=t,this.options=i,this.scrolledElements=[],this.referenceElement=s,this.counters=new cX,this.quoteDepth=0,!s.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(s.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(t,s){var i=this,a=AX(t,s);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var o=t.defaultView.pageXOffset,c=t.defaultView.pageYOffset,l=a.contentWindow,u=l.document,d=pX(a).then(function(){return Ia(i,void 0,void 0,function(){var A,f;return wa(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(xX),l&&(l.scrollTo(s.left,s.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==s.top||l.scrollX!==s.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-s.left,l.scrollY-s.top,0,0))),A=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:u.fonts&&u.fonts.ready?[4,u.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,fX(u)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof A=="function"?[2,Promise.resolve().then(function(){return A(u,f)}).then(function(){return a})]:[2,a]}})})});return u.open(),u.write(gX(document.doctype)+"<html></html>"),yX(this.referenceElement.ownerDocument,o,c),u.replaceChild(u.adoptNode(this.documentElement),u.documentElement),u.close(),d},r.prototype.createElementClone=function(t){if(Fw(t,2))debugger;if(J6(t))return this.createCanvasClone(t);if(dC(t))return this.createVideoClone(t);if(AC(t))return this.createStyleClone(t);var s=t.cloneNode(!1);return Mw(s)&&(Mw(t)&&t.currentSrc&&t.currentSrc!==t.src&&(s.src=t.currentSrc,s.srcset=""),s.loading==="lazy"&&(s.loading="eager")),hC(s)?this.createCustomElementClone(s):s},r.prototype.createCustomElementClone=function(t){var s=document.createElement("html2canvascustomelement");return ev(t.style,s),s},r.prototype.createStyleClone=function(t){try{var s=t.sheet;if(s&&s.cssRules){var i=[].slice.call(s.cssRules,0).reduce(function(o,c){return c&&typeof c.cssText=="string"?o+c.cssText:o},""),a=t.cloneNode(!1);return a.textContent=i,a}}catch(o){if(this.context.logger.error("Unable to access cssRules property",o),o.name!=="SecurityError")throw o}return t.cloneNode(!1)},r.prototype.createCanvasClone=function(t){var s;if(this.options.inlineImages&&t.ownerDocument){var i=t.ownerDocument.createElement("img");try{return i.src=t.toDataURL(),i}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var o=t.getContext("2d"),c=a.getContext("2d");if(c)if(!this.options.allowTaint&&o)c.putImageData(o.getImageData(0,0,t.width,t.height),0,0);else{var l=(s=t.getContext("webgl2"))!==null&&s!==void 0?s:t.getContext("webgl");if(l){var u=l.getContextAttributes();u?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}c.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},r.prototype.createVideoClone=function(t){var s=t.ownerDocument.createElement("canvas");s.width=t.offsetWidth,s.height=t.offsetHeight;var i=s.getContext("2d");try{return i&&(i.drawImage(t,0,0,s.width,s.height),this.options.allowTaint||i.getImageData(0,0,s.width,s.height)),s}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},r.prototype.appendChildNode=function(t,s,i){(!ah(s)||!lX(s)&&!s.hasAttribute(rO)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(s)))&&(!this.options.copyStyles||!ah(s)||!AC(s))&&t.appendChild(this.cloneNode(s,i))},r.prototype.cloneChildNodes=function(t,s,i){for(var a=this,o=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;o;o=o.nextSibling)if(ah(o)&&eO(o)&&typeof o.assignedNodes=="function"){var c=o.assignedNodes();c.length&&c.forEach(function(l){return a.appendChildNode(s,l,i)})}else this.appendChildNode(s,o,i)},r.prototype.cloneNode=function(t,s){if(Y6(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var i=t.ownerDocument.defaultView;if(i&&ah(t)&&(Dw(t)||e0(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var o=i.getComputedStyle(t),c=i.getComputedStyle(t,":before"),l=i.getComputedStyle(t,":after");this.referenceElement===t&&Dw(a)&&(this.clonedReferenceElement=a),b2(a)&&wX(a);var u=this.counters.parse(new YS(this.context,o)),d=this.resolvePseudoContent(t,a,c,sp.BEFORE);hC(t)&&(s=!0),dC(t)||this.cloneChildNodes(t,a,s),d&&a.insertBefore(d,a.firstChild);var A=this.resolvePseudoContent(t,a,l,sp.AFTER);return A&&a.appendChild(A),this.counters.pop(u),(o&&(this.options.copyStyles||e0(t))&&!Z6(t)||s)&&ev(o,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(V0(t)||z0(t))&&(V0(a)||z0(a))&&(a.value=t.value),a}return t.cloneNode(!1)},r.prototype.resolvePseudoContent=function(t,s,i,a){var o=this;if(i){var c=i.content,l=s.ownerDocument;if(!(!l||!c||c==="none"||c==="-moz-alt-content"||i.display==="none")){this.counters.parse(new YS(this.context,i));var u=new sY(this.context,i),d=l.createElement("html2canvaspseudoelement");ev(i,d),u.content.forEach(function(f){if(f.type===0)d.appendChild(l.createTextNode(f.value));else if(f.type===22){var p=l.createElement("img");p.src=f.value,p.style.opacity="1",d.appendChild(p)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(us);m.length&&d.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(Bh),b=g[0],v=g[1];if(b&&us(b)){var y=o.counters.getCounterValue(b.value),w=v&&us(v)?Tw.parse(o.context,v.value):3;d.appendChild(l.createTextNode(Bp(y,w,!1)))}}else if(f.name==="counters"){var j=f.values.filter(Bh),b=j[0],C=j[1],v=j[2];if(b&&us(b)){var B=o.counters.getCounterValues(b.value),E=v&&us(v)?Tw.parse(o.context,v.value):3,_=C&&C.type===0?C.value:"",S=B.map(function(k){return Bp(k,E,!1)}).join(_);d.appendChild(l.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":d.appendChild(l.createTextNode(qS(u.quotes,o.quoteDepth++,!0)));break;case"close-quote":d.appendChild(l.createTextNode(qS(u.quotes,--o.quoteDepth,!1)));break;default:d.appendChild(l.createTextNode(f.value))}}),d.className=Rw+" "+Qw;var A=a===sp.BEFORE?" "+Rw:" "+Qw;return e0(s)?s.className.baseValue+=A:s.className+=A,d}}},r.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},r})(),sp;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(sp||(sp={}));var AX=function(r,t){var s=r.createElement("iframe");return s.className="html2canvas-container",s.style.visibility="hidden",s.style.position="fixed",s.style.left="-10000px",s.style.top="0px",s.style.border="0",s.width=t.width.toString(),s.height=t.height.toString(),s.scrolling="no",s.setAttribute(rO,"true"),r.body.appendChild(s),s},hX=function(r){return new Promise(function(t){if(r.complete){t();return}if(!r.src){t();return}r.onload=t,r.onerror=t})},fX=function(r){return Promise.all([].slice.call(r.images,0).map(hX))},pX=function(r){return new Promise(function(t,s){var i=r.contentWindow;if(!i)return s("No window assigned for iframe");var a=i.document;i.onload=r.onload=function(){i.onload=r.onload=null;var o=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(o),t(r))},50)}})},mX=["all","d","content"],ev=function(r,t){for(var s=r.length-1;s>=0;s--){var i=r.item(s);mX.indexOf(i)===-1&&t.style.setProperty(i,r.getPropertyValue(i))}return t},gX=function(r){var t="";return r&&(t+="<!DOCTYPE ",r.name&&(t+=r.name),r.internalSubset&&(t+=r.internalSubset),r.publicId&&(t+='"'+r.publicId+'"'),r.systemId&&(t+='"'+r.systemId+'"'),t+=">"),t},yX=function(r,t,s){r&&r.defaultView&&(t!==r.defaultView.pageXOffset||s!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(t,s)},xX=function(r){var t=r[0],s=r[1],i=r[2];t.scrollLeft=s,t.scrollTop=i},bX=":before",vX=":after",Rw="___html2canvas___pseudoelement_before",Qw="___html2canvas___pseudoelement_after",bC=`{
    content: "" !important;
    display: none !important;
}`,wX=function(r){jX(r,"."+Rw+bX+bC+`
         .`+Qw+vX+bC)},jX=function(r,t){var s=r.ownerDocument;if(s){var i=s.createElement("style");i.textContent=t,r.appendChild(i)}},nO=(function(){function r(){}return r.getOrigin=function(t){var s=r._link;return s?(s.href=t,s.href=s.href,s.protocol+s.hostname+s.port):"about:blank"},r.isSameOrigin=function(t){return r.getOrigin(t)===r._origin},r.setContext=function(t){r._link=t.document.createElement("a"),r._origin=r.getOrigin(t.location.href)},r._origin="about:blank",r})(),NX=(function(){function r(t,s){this.context=t,this._options=s,this._cache={}}return r.prototype.addImage=function(t){var s=Promise.resolve();return this.has(t)||(rv(t)||kX(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),s},r.prototype.match=function(t){return this._cache[t]},r.prototype.loadImage=function(t){return Ia(this,void 0,void 0,function(){var s,i,a,o,c=this;return wa(this,function(l){switch(l.label){case 0:return s=nO.isSameOrigin(t),i=!tv(t)&&this._options.useCORS===!0&&na.SUPPORT_CORS_IMAGES&&!s,a=!tv(t)&&!s&&!rv(t)&&typeof this._options.proxy=="string"&&na.SUPPORT_CORS_XHR&&!i,!s&&this._options.allowTaint===!1&&!tv(t)&&!rv(t)&&!a&&!i?[2]:(o=t,a?[4,this.proxy(o)]:[3,2]);case 1:o=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(u,d){var A=new Image;A.onload=function(){return u(A)},A.onerror=d,(_X(o)||i)&&(A.crossOrigin="anonymous"),A.src=o,A.complete===!0&&setTimeout(function(){return u(A)},500),c._options.imageTimeout>0&&setTimeout(function(){return d("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},r.prototype.has=function(t){return typeof this._cache[t]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(t){var s=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(o,c){var l=na.SUPPORT_RESPONSE_TYPE?"blob":"text",u=new XMLHttpRequest;u.onload=function(){if(u.status===200)if(l==="text")o(u.response);else{var f=new FileReader;f.addEventListener("load",function(){return o(f.result)},!1),f.addEventListener("error",function(p){return c(p)},!1),f.readAsDataURL(u.response)}else c("Failed to proxy resource "+a+" with status code "+u.status)},u.onerror=c;var d=i.indexOf("?")>-1?"&":"?";if(u.open("GET",""+i+d+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&u instanceof XMLHttpRequest&&(u.responseType=l),s._options.imageTimeout){var A=s._options.imageTimeout;u.timeout=A,u.ontimeout=function(){return c("Timed out ("+A+"ms) proxying "+a)}}u.send()})},r})(),SX=/^data:image\/svg\+xml/i,CX=/^data:image\/.*;base64,/i,BX=/^data:image\/.*/i,kX=function(r){return na.SUPPORT_SVG_DRAWING||!EX(r)},tv=function(r){return BX.test(r)},_X=function(r){return CX.test(r)},rv=function(r){return r.substr(0,4)==="blob"},EX=function(r){return r.substr(-3).toLowerCase()==="svg"||SX.test(r)},fr=(function(){function r(t,s){this.type=0,this.x=t,this.y=s}return r.prototype.add=function(t,s){return new r(this.x+t,this.y+s)},r})(),WA=function(r,t,s){return new fr(r.x+(t.x-r.x)*s,r.y+(t.y-r.y)*s)},bg=(function(){function r(t,s,i,a){this.type=1,this.start=t,this.startControl=s,this.endControl=i,this.end=a}return r.prototype.subdivide=function(t,s){var i=WA(this.start,this.startControl,t),a=WA(this.startControl,this.endControl,t),o=WA(this.endControl,this.end,t),c=WA(i,a,t),l=WA(a,o,t),u=WA(c,l,t);return s?new r(this.start,i,c,u):new r(u,l,o,this.end)},r.prototype.add=function(t,s){return new r(this.start.add(t,s),this.startControl.add(t,s),this.endControl.add(t,s),this.end.add(t,s))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r})(),Fo=function(r){return r.type===1},OX=(function(){function r(t){var s=t.styles,i=t.bounds,a=Hf(s.borderTopLeftRadius,i.width,i.height),o=a[0],c=a[1],l=Hf(s.borderTopRightRadius,i.width,i.height),u=l[0],d=l[1],A=Hf(s.borderBottomRightRadius,i.width,i.height),f=A[0],p=A[1],m=Hf(s.borderBottomLeftRadius,i.width,i.height),g=m[0],b=m[1],v=[];v.push((o+u)/i.width),v.push((g+f)/i.width),v.push((c+b)/i.height),v.push((d+p)/i.height);var y=Math.max.apply(Math,v);y>1&&(o/=y,c/=y,u/=y,d/=y,f/=y,p/=y,g/=y,b/=y);var w=i.width-u,j=i.height-p,C=i.width-f,B=i.height-b,E=s.borderTopWidth,_=s.borderRightWidth,S=s.borderBottomWidth,N=s.borderLeftWidth,O=js(s.paddingTop,t.bounds.width),k=js(s.paddingRight,t.bounds.width),I=js(s.paddingBottom,t.bounds.width),R=js(s.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=o>0||c>0?Is(i.left+N/3,i.top+E/3,o-N/3,c-E/3,Zn.TOP_LEFT):new fr(i.left+N/3,i.top+E/3),this.topRightBorderDoubleOuterBox=o>0||c>0?Is(i.left+w,i.top+E/3,u-_/3,d-E/3,Zn.TOP_RIGHT):new fr(i.left+i.width-_/3,i.top+E/3),this.bottomRightBorderDoubleOuterBox=f>0||p>0?Is(i.left+C,i.top+j,f-_/3,p-S/3,Zn.BOTTOM_RIGHT):new fr(i.left+i.width-_/3,i.top+i.height-S/3),this.bottomLeftBorderDoubleOuterBox=g>0||b>0?Is(i.left+N/3,i.top+B,g-N/3,b-S/3,Zn.BOTTOM_LEFT):new fr(i.left+N/3,i.top+i.height-S/3),this.topLeftBorderDoubleInnerBox=o>0||c>0?Is(i.left+N*2/3,i.top+E*2/3,o-N*2/3,c-E*2/3,Zn.TOP_LEFT):new fr(i.left+N*2/3,i.top+E*2/3),this.topRightBorderDoubleInnerBox=o>0||c>0?Is(i.left+w,i.top+E*2/3,u-_*2/3,d-E*2/3,Zn.TOP_RIGHT):new fr(i.left+i.width-_*2/3,i.top+E*2/3),this.bottomRightBorderDoubleInnerBox=f>0||p>0?Is(i.left+C,i.top+j,f-_*2/3,p-S*2/3,Zn.BOTTOM_RIGHT):new fr(i.left+i.width-_*2/3,i.top+i.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||b>0?Is(i.left+N*2/3,i.top+B,g-N*2/3,b-S*2/3,Zn.BOTTOM_LEFT):new fr(i.left+N*2/3,i.top+i.height-S*2/3),this.topLeftBorderStroke=o>0||c>0?Is(i.left+N/2,i.top+E/2,o-N/2,c-E/2,Zn.TOP_LEFT):new fr(i.left+N/2,i.top+E/2),this.topRightBorderStroke=o>0||c>0?Is(i.left+w,i.top+E/2,u-_/2,d-E/2,Zn.TOP_RIGHT):new fr(i.left+i.width-_/2,i.top+E/2),this.bottomRightBorderStroke=f>0||p>0?Is(i.left+C,i.top+j,f-_/2,p-S/2,Zn.BOTTOM_RIGHT):new fr(i.left+i.width-_/2,i.top+i.height-S/2),this.bottomLeftBorderStroke=g>0||b>0?Is(i.left+N/2,i.top+B,g-N/2,b-S/2,Zn.BOTTOM_LEFT):new fr(i.left+N/2,i.top+i.height-S/2),this.topLeftBorderBox=o>0||c>0?Is(i.left,i.top,o,c,Zn.TOP_LEFT):new fr(i.left,i.top),this.topRightBorderBox=u>0||d>0?Is(i.left+w,i.top,u,d,Zn.TOP_RIGHT):new fr(i.left+i.width,i.top),this.bottomRightBorderBox=f>0||p>0?Is(i.left+C,i.top+j,f,p,Zn.BOTTOM_RIGHT):new fr(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=g>0||b>0?Is(i.left,i.top+B,g,b,Zn.BOTTOM_LEFT):new fr(i.left,i.top+i.height),this.topLeftPaddingBox=o>0||c>0?Is(i.left+N,i.top+E,Math.max(0,o-N),Math.max(0,c-E),Zn.TOP_LEFT):new fr(i.left+N,i.top+E),this.topRightPaddingBox=u>0||d>0?Is(i.left+Math.min(w,i.width-_),i.top+E,w>i.width+_?0:Math.max(0,u-_),Math.max(0,d-E),Zn.TOP_RIGHT):new fr(i.left+i.width-_,i.top+E),this.bottomRightPaddingBox=f>0||p>0?Is(i.left+Math.min(C,i.width-N),i.top+Math.min(j,i.height-S),Math.max(0,f-_),Math.max(0,p-S),Zn.BOTTOM_RIGHT):new fr(i.left+i.width-_,i.top+i.height-S),this.bottomLeftPaddingBox=g>0||b>0?Is(i.left+N,i.top+Math.min(B,i.height-S),Math.max(0,g-N),Math.max(0,b-S),Zn.BOTTOM_LEFT):new fr(i.left+N,i.top+i.height-S),this.topLeftContentBox=o>0||c>0?Is(i.left+N+R,i.top+E+O,Math.max(0,o-(N+R)),Math.max(0,c-(E+O)),Zn.TOP_LEFT):new fr(i.left+N+R,i.top+E+O),this.topRightContentBox=u>0||d>0?Is(i.left+Math.min(w,i.width+N+R),i.top+E+O,w>i.width+N+R?0:u-N+R,d-(E+O),Zn.TOP_RIGHT):new fr(i.left+i.width-(_+k),i.top+E+O),this.bottomRightContentBox=f>0||p>0?Is(i.left+Math.min(C,i.width-(N+R)),i.top+Math.min(j,i.height+E+O),Math.max(0,f-(_+k)),p-(S+I),Zn.BOTTOM_RIGHT):new fr(i.left+i.width-(_+k),i.top+i.height-(S+I)),this.bottomLeftContentBox=g>0||b>0?Is(i.left+N+R,i.top+B,Math.max(0,g-(N+R)),b-(S+I),Zn.BOTTOM_LEFT):new fr(i.left+N+R,i.top+i.height-(S+I))}return r})(),Zn;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Zn||(Zn={}));var Is=function(r,t,s,i,a){var o=4*((Math.sqrt(2)-1)/3),c=s*o,l=i*o,u=r+s,d=t+i;switch(a){case Zn.TOP_LEFT:return new bg(new fr(r,d),new fr(r,d-l),new fr(u-c,t),new fr(u,t));case Zn.TOP_RIGHT:return new bg(new fr(r,t),new fr(r+c,t),new fr(u,d-l),new fr(u,d));case Zn.BOTTOM_RIGHT:return new bg(new fr(u,t),new fr(u,t+l),new fr(r+c,d),new fr(r,d));case Zn.BOTTOM_LEFT:default:return new bg(new fr(u,d),new fr(u-c,d),new fr(r,t+l),new fr(r,t))}},K0=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},IX=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},G0=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},PX=(function(){function r(t,s,i){this.offsetX=t,this.offsetY=s,this.matrix=i,this.type=0,this.target=6}return r})(),vg=(function(){function r(t,s){this.path=t,this.target=s,this.type=1}return r})(),TX=(function(){function r(t){this.opacity=t,this.type=2,this.target=6}return r})(),FX=function(r){return r.type===0},sO=function(r){return r.type===1},UX=function(r){return r.type===2},vC=function(r,t){return r.length===t.length?r.some(function(s,i){return s===t[i]}):!1},LX=function(r,t,s,i,a){return r.map(function(o,c){switch(c){case 0:return o.add(t,s);case 1:return o.add(t+i,s);case 2:return o.add(t+i,s+a);case 3:return o.add(t,s+a)}return o})},iO=(function(){function r(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r})(),aO=(function(){function r(t,s){if(this.container=t,this.parent=s,this.effects=[],this.curves=new OX(this.container),this.container.styles.opacity<1&&this.effects.push(new TX(this.container.styles.opacity)),this.container.styles.transform!==null){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,o=this.container.styles.transform;this.effects.push(new PX(i,a,o))}if(this.container.styles.overflowX!==0){var c=K0(this.curves),l=G0(this.curves);vC(c,l)?this.effects.push(new vg(c,6)):(this.effects.push(new vg(c,2)),this.effects.push(new vg(l,4)))}}return r.prototype.getEffects=function(t){for(var s=[2,3].indexOf(this.container.styles.position)===-1,i=this.parent,a=this.effects.slice(0);i;){var o=i.effects.filter(function(u){return!sO(u)});if(s||i.container.styles.position!==0||!i.parent){if(a.unshift.apply(a,o),s=[2,3].indexOf(i.container.styles.position)===-1,i.container.styles.overflowX!==0){var c=K0(i.curves),l=G0(i.curves);vC(c,l)||a.unshift(new vg(l,6))}}else a.unshift.apply(a,o);i=i.parent}return a.filter(function(u){return Pi(u.target,t)})},r})(),$w=function(r,t,s,i){r.container.elements.forEach(function(a){var o=Pi(a.flags,4),c=Pi(a.flags,2),l=new aO(a,r);Pi(a.styles.display,2048)&&i.push(l);var u=Pi(a.flags,8)?[]:i;if(o||c){var d=o||a.styles.isPositioned()?s:t,A=new iO(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var p=0;d.negativeZIndex.some(function(g,b){return f>g.element.container.styles.zIndex.order?(p=b,!1):p>0}),d.negativeZIndex.splice(p,0,A)}else if(f>0){var m=0;d.positiveZIndex.some(function(g,b){return f>=g.element.container.styles.zIndex.order?(m=b+1,!1):m>0}),d.positiveZIndex.splice(m,0,A)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(A)}else a.styles.isFloating()?d.nonPositionedFloats.push(A):d.nonPositionedInlineLevel.push(A);$w(l,A,o?A:s,u)}else a.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),$w(l,t,s,u);Pi(a.flags,8)&&oO(a,u)})},oO=function(r,t){for(var s=r instanceof Lw?r.start:1,i=r instanceof Lw?r.reversed:!1,a=0;a<t.length;a++){var o=t[a];o.container instanceof V6&&typeof o.container.value=="number"&&o.container.value!==0&&(s=o.container.value),o.listValue=Bp(s,o.container.styles.listStyleType,!0),s+=i?-1:1}},DX=function(r){var t=new aO(r,null),s=new iO(t),i=[];return $w(t,s,s,i),oO(t.container,i),s},wC=function(r,t){switch(t){case 0:return Do(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return Do(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return Do(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return Do(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},MX=function(r,t){switch(t){case 0:return Do(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return Do(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return Do(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return Do(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},RX=function(r,t){switch(t){case 0:return Do(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return Do(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return Do(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return Do(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},QX=function(r,t){switch(t){case 0:return wg(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return wg(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return wg(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return wg(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},wg=function(r,t){var s=[];return Fo(r)?s.push(r.subdivide(.5,!1)):s.push(r),Fo(t)?s.push(t.subdivide(.5,!0)):s.push(t),s},Do=function(r,t,s,i){var a=[];return Fo(r)?a.push(r.subdivide(.5,!1)):a.push(r),Fo(s)?a.push(s.subdivide(.5,!0)):a.push(s),Fo(i)?a.push(i.subdivide(.5,!0).reverse()):a.push(i),Fo(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},lO=function(r){var t=r.bounds,s=r.styles;return t.add(s.borderLeftWidth,s.borderTopWidth,-(s.borderRightWidth+s.borderLeftWidth),-(s.borderTopWidth+s.borderBottomWidth))},W0=function(r){var t=r.styles,s=r.bounds,i=js(t.paddingLeft,s.width),a=js(t.paddingRight,s.width),o=js(t.paddingTop,s.width),c=js(t.paddingBottom,s.width);return s.add(i+t.borderLeftWidth,o+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+i+a),-(t.borderTopWidth+t.borderBottomWidth+o+c))},$X=function(r,t){return r===0?t.bounds:r===2?W0(t):lO(t)},HX=function(r,t){return r===0?t.bounds:r===2?W0(t):lO(t)},nv=function(r,t,s){var i=$X(ZA(r.styles.backgroundOrigin,t),r),a=HX(ZA(r.styles.backgroundClip,t),r),o=VX(ZA(r.styles.backgroundSize,t),s,i),c=o[0],l=o[1],u=Hf(ZA(r.styles.backgroundPosition,t),i.width-c,i.height-l),d=zX(ZA(r.styles.backgroundRepeat,t),u,o,i,a),A=Math.round(i.left+u[0]),f=Math.round(i.top+u[1]);return[d,A,f,c,l]},qA=function(r){return us(r)&&r.value===wh.AUTO},jg=function(r){return typeof r=="number"},VX=function(r,t,s){var i=t[0],a=t[1],o=t[2],c=r[0],l=r[1];if(!c)return[0,0];if(Ci(c)&&l&&Ci(l))return[js(c,s.width),js(l,s.height)];var u=jg(o);if(us(c)&&(c.value===wh.CONTAIN||c.value===wh.COVER)){if(jg(o)){var d=s.width/s.height;return d<o!=(c.value===wh.COVER)?[s.width,s.width/o]:[s.height*o,s.height]}return[s.width,s.height]}var A=jg(i),f=jg(a),p=A||f;if(qA(c)&&(!l||qA(l))){if(A&&f)return[i,a];if(!u&&!p)return[s.width,s.height];if(p&&u){var m=A?i:a*o,g=f?a:i/o;return[m,g]}var b=A?i:s.width,v=f?a:s.height;return[b,v]}if(u){var y=0,w=0;return Ci(c)?y=js(c,s.width):Ci(l)&&(w=js(l,s.height)),qA(c)?y=w*o:(!l||qA(l))&&(w=y/o),[y,w]}var j=null,C=null;if(Ci(c)?j=js(c,s.width):l&&Ci(l)&&(C=js(l,s.height)),j!==null&&(!l||qA(l))&&(C=A&&f?j/i*a:s.height),C!==null&&qA(c)&&(j=A&&f?C/a*i:s.width),j!==null&&C!==null)return[j,C];throw new Error("Unable to calculate background-size for element")},ZA=function(r,t){var s=r[t];return typeof s>"u"?r[0]:s},zX=function(r,t,s,i,a){var o=t[0],c=t[1],l=s[0],u=s[1];switch(r){case 2:return[new fr(Math.round(i.left),Math.round(i.top+c)),new fr(Math.round(i.left+i.width),Math.round(i.top+c)),new fr(Math.round(i.left+i.width),Math.round(u+i.top+c)),new fr(Math.round(i.left),Math.round(u+i.top+c))];case 3:return[new fr(Math.round(i.left+o),Math.round(i.top)),new fr(Math.round(i.left+o+l),Math.round(i.top)),new fr(Math.round(i.left+o+l),Math.round(i.height+i.top)),new fr(Math.round(i.left+o),Math.round(i.height+i.top))];case 1:return[new fr(Math.round(i.left+o),Math.round(i.top+c)),new fr(Math.round(i.left+o+l),Math.round(i.top+c)),new fr(Math.round(i.left+o+l),Math.round(i.top+c+u)),new fr(Math.round(i.left+o),Math.round(i.top+c+u))];default:return[new fr(Math.round(a.left),Math.round(a.top)),new fr(Math.round(a.left+a.width),Math.round(a.top)),new fr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new fr(Math.round(a.left),Math.round(a.height+a.top))]}},KX="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",jC="Hidden Text",GX=(function(){function r(t){this._data={},this._document=t}return r.prototype.parseMetrics=function(t,s){var i=this._document.createElement("div"),a=this._document.createElement("img"),o=this._document.createElement("span"),c=this._document.body;i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=s,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",c.appendChild(i),a.src=KX,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",o.style.fontFamily=t,o.style.fontSize=s,o.style.margin="0",o.style.padding="0",o.appendChild(this._document.createTextNode(jC)),i.appendChild(o),i.appendChild(a);var l=a.offsetTop-o.offsetTop+2;i.removeChild(o),i.appendChild(this._document.createTextNode(jC)),i.style.lineHeight="normal",a.style.verticalAlign="super";var u=a.offsetTop-i.offsetTop+2;return c.removeChild(i),{baseline:l,middle:u}},r.prototype.getMetrics=function(t,s){var i=t+" "+s;return typeof this._data[i]>"u"&&(this._data[i]=this.parseMetrics(t,s)),this._data[i]},r})(),cO=(function(){function r(t,s){this.context=t,this.options=s}return r})(),WX=1e4,qX=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this;return a._activeEffects=[],a.canvas=i.canvas?i.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),i.canvas||(a.canvas.width=Math.floor(i.width*i.scale),a.canvas.height=Math.floor(i.height*i.scale),a.canvas.style.width=i.width+"px",a.canvas.style.height=i.height+"px"),a.fontMetrics=new GX(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-i.x,-i.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),a}return t.prototype.applyEffects=function(s){for(var i=this;this._activeEffects.length;)this.popEffect();s.forEach(function(a){return i.applyEffect(a)})},t.prototype.applyEffect=function(s){this.ctx.save(),UX(s)&&(this.ctx.globalAlpha=s.opacity),FX(s)&&(this.ctx.translate(s.offsetX,s.offsetY),this.ctx.transform(s.matrix[0],s.matrix[1],s.matrix[2],s.matrix[3],s.matrix[4],s.matrix[5]),this.ctx.translate(-s.offsetX,-s.offsetY)),sO(s)&&(this.path(s.path),this.ctx.clip()),this._activeEffects.push(s)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(s){return Ia(this,void 0,void 0,function(){var i;return wa(this,function(a){switch(a.label){case 0:return i=s.element.container.styles,i.isVisible()?[4,this.renderStackContent(s)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(s){return Ia(this,void 0,void 0,function(){return wa(this,function(i){switch(i.label){case 0:if(Pi(s.container.flags,16))debugger;return s.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(s)]:[3,3];case 1:return i.sent(),[4,this.renderNodeContent(s)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(s,i,a){var o=this;if(i===0)this.ctx.fillText(s.text,s.bounds.left,s.bounds.top+a);else{var c=y2(s.text);c.reduce(function(l,u){return o.ctx.fillText(u,l,s.bounds.top+a),l+o.ctx.measureText(u).width},s.bounds.left)}},t.prototype.createFontStyle=function(s){var i=s.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),a=eJ(s.fontFamily).join(", "),o=Wp(s.fontSize)?""+s.fontSize.number+s.fontSize.unit:s.fontSize.number+"px";return[[s.fontStyle,i,s.fontWeight,o,a].join(" "),a,o]},t.prototype.renderTextNode=function(s,i){return Ia(this,void 0,void 0,function(){var a,o,c,l,u,d,A,f,p=this;return wa(this,function(m){return a=this.createFontStyle(i),o=a[0],c=a[1],l=a[2],this.ctx.font=o,this.ctx.direction=i.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",u=this.fontMetrics.getMetrics(c,l),d=u.baseline,A=u.middle,f=i.paintOrder,s.textBounds.forEach(function(g){f.forEach(function(b){switch(b){case 0:p.ctx.fillStyle=$i(i.color),p.renderTextWithLetterSpacing(g,i.letterSpacing,d);var v=i.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){p.ctx.shadowColor=$i(y.color),p.ctx.shadowOffsetX=y.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=y.offsetY.number*p.options.scale,p.ctx.shadowBlur=y.blur.number,p.renderTextWithLetterSpacing(g,i.letterSpacing,d)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),i.textDecorationLine.length&&(p.ctx.fillStyle=$i(i.textDecorationColor||i.color),i.textDecorationLine.forEach(function(y){switch(y){case 1:p.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+d),g.bounds.width,1);break;case 2:p.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:p.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+A),g.bounds.width,1);break}}));break;case 1:i.webkitTextStrokeWidth&&g.text.trim().length&&(p.ctx.strokeStyle=$i(i.webkitTextStrokeColor),p.ctx.lineWidth=i.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+d)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(s,i,a){if(a&&s.intrinsicWidth>0&&s.intrinsicHeight>0){var o=W0(s),c=G0(i);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,s.intrinsicWidth,s.intrinsicHeight,o.left,o.top,o.width,o.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(s){return Ia(this,void 0,void 0,function(){var i,a,o,c,l,u,w,w,d,A,f,p,C,m,g,B,b,v,y,w,j,C,B;return wa(this,function(E){switch(E.label){case 0:this.applyEffects(s.getEffects(4)),i=s.container,a=s.curves,o=i.styles,c=0,l=i.textNodes,E.label=1;case 1:return c<l.length?(u=l[c],[4,this.renderTextNode(u,o)]):[3,4];case 2:E.sent(),E.label=3;case 3:return c++,[3,1];case 4:if(!(i instanceof Q6))return[3,8];E.label=5;case 5:return E.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return w=E.sent(),this.renderReplacedElement(i,a,w),[3,8];case 7:return E.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof $6&&this.renderReplacedElement(i,a,i.canvas),!(i instanceof H6))return[3,12];E.label=9;case 9:return E.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return w=E.sent(),this.renderReplacedElement(i,a,w),[3,12];case 11:return E.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof G6&&i.tree?(d=new t(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}),[4,d.render(i.tree)]):[3,14];case 13:A=E.sent(),i.width&&i.height&&this.ctx.drawImage(A,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),E.label=14;case 14:if(i instanceof x2&&(f=Math.min(i.bounds.width,i.bounds.height),i.type===$0?i.checked&&(this.ctx.save(),this.path([new fr(i.bounds.left+f*.39363,i.bounds.top+f*.79),new fr(i.bounds.left+f*.16,i.bounds.top+f*.5549),new fr(i.bounds.left+f*.27347,i.bounds.top+f*.44071),new fr(i.bounds.left+f*.39694,i.bounds.top+f*.5649),new fr(i.bounds.left+f*.72983,i.bounds.top+f*.23),new fr(i.bounds.left+f*.84,i.bounds.top+f*.34085),new fr(i.bounds.left+f*.39363,i.bounds.top+f*.79)]),this.ctx.fillStyle=$i(uC),this.ctx.fill(),this.ctx.restore()):i.type===H0&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+f/2,i.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=$i(uC),this.ctx.fill(),this.ctx.restore())),YX(i)&&i.value.length){switch(p=this.createFontStyle(o),C=p[0],m=p[1],g=this.fontMetrics.getMetrics(C,m).baseline,this.ctx.font=C,this.ctx.fillStyle=$i(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=JX(i.styles.textAlign),B=W0(i),b=0,i.styles.textAlign){case 1:b+=B.width/2;break;case 2:b+=B.width;break}v=B.add(b,0,0,-B.height/2+1),this.ctx.save(),this.path([new fr(B.left,B.top),new fr(B.left+B.width,B.top),new fr(B.left+B.width,B.top+B.height),new fr(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new np(i.value,v),o.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Pi(i.styles.display,2048))return[3,20];if(i.styles.listStyleImage===null)return[3,19];if(y=i.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,j=y.url,E.label=15;case 15:return E.trys.push([15,17,,18]),[4,this.context.cache.match(j)];case 16:return w=E.sent(),this.ctx.drawImage(w,i.bounds.left-(w.width+10),i.bounds.top),[3,18];case 17:return E.sent(),this.context.logger.error("Error loading list-style-image "+j),[3,18];case 18:return[3,20];case 19:s.listValue&&i.styles.listStyleType!==-1&&(C=this.createFontStyle(o)[0],this.ctx.font=C,this.ctx.fillStyle=$i(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new Qc(i.bounds.left,i.bounds.top+js(i.styles.paddingTop,i.bounds.width),i.bounds.width,GS(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new np(s.listValue,B),o.letterSpacing,GS(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),E.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(s){return Ia(this,void 0,void 0,function(){var i,a,y,o,c,y,l,u,y,d,A,y,f,p,y,m,g,y,b,v,y;return wa(this,function(w){switch(w.label){case 0:if(Pi(s.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(s.element)];case 1:w.sent(),i=0,a=s.negativeZIndex,w.label=2;case 2:return i<a.length?(y=a[i],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return i++,[3,2];case 5:return[4,this.renderNodeContent(s.element)];case 6:w.sent(),o=0,c=s.nonInlineLevel,w.label=7;case 7:return o<c.length?(y=c[o],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return o++,[3,7];case 10:l=0,u=s.nonPositionedFloats,w.label=11;case 11:return l<u.length?(y=u[l],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return l++,[3,11];case 14:d=0,A=s.nonPositionedInlineLevel,w.label=15;case 15:return d<A.length?(y=A[d],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return d++,[3,15];case 18:f=0,p=s.inlineLevel,w.label=19;case 19:return f<p.length?(y=p[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:m=0,g=s.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:b=0,v=s.positiveZIndex,w.label=27;case 27:return b<v.length?(y=v[b],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return b++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(s){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(s.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(s){this.ctx.beginPath(),this.formatPath(s),this.ctx.closePath()},t.prototype.formatPath=function(s){var i=this;s.forEach(function(a,o){var c=Fo(a)?a.start:a;o===0?i.ctx.moveTo(c.x,c.y):i.ctx.lineTo(c.x,c.y),Fo(a)&&i.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(s,i,a,o){this.path(s),this.ctx.fillStyle=i,this.ctx.translate(a,o),this.ctx.fill(),this.ctx.translate(-a,-o)},t.prototype.resizeImage=function(s,i,a){var o;if(s.width===i&&s.height===a)return s;var c=(o=this.canvas.ownerDocument)!==null&&o!==void 0?o:document,l=c.createElement("canvas");l.width=Math.max(1,i),l.height=Math.max(1,a);var u=l.getContext("2d");return u.drawImage(s,0,0,s.width,s.height,0,0,i,a),l},t.prototype.renderBackgroundImage=function(s){return Ia(this,void 0,void 0,function(){var i,a,o,c,l,u;return wa(this,function(d){switch(d.label){case 0:i=s.styles.backgroundImage.length-1,a=function(A){var f,p,m,O,L,F,R,Q,S,g,O,L,F,R,Q,b,v,y,w,j,C,B,E,_,S,N,O,k,I,R,Q,$,L,F,G,X,q,T,U,K,z,M;return wa(this,function(H){switch(H.label){case 0:if(A.type!==0)return[3,5];f=void 0,p=A.url,H.label=1;case 1:return H.trys.push([1,3,,4]),[4,o.context.cache.match(p)];case 2:return f=H.sent(),[3,4];case 3:return H.sent(),o.context.logger.error("Error loading background-image "+p),[3,4];case 4:return f&&(m=nv(s,i,[f.width,f.height,f.width/f.height]),O=m[0],L=m[1],F=m[2],R=m[3],Q=m[4],S=o.ctx.createPattern(o.resizeImage(f,R,Q),"repeat"),o.renderRepeat(O,S,L,F)),[3,6];case 5:FW(A)?(g=nv(s,i,[null,null,null]),O=g[0],L=g[1],F=g[2],R=g[3],Q=g[4],b=EW(A.angle,R,Q),v=b[0],y=b[1],w=b[2],j=b[3],C=b[4],B=document.createElement("canvas"),B.width=R,B.height=Q,E=B.getContext("2d"),_=E.createLinearGradient(y,j,w,C),zS(A.stops,v).forEach(function(Y){return _.addColorStop(Y.stop,$i(Y.color))}),E.fillStyle=_,E.fillRect(0,0,R,Q),R>0&&Q>0&&(S=o.ctx.createPattern(B,"repeat"),o.renderRepeat(O,S,L,F))):UW(A)&&(N=nv(s,i,[null,null,null]),O=N[0],k=N[1],I=N[2],R=N[3],Q=N[4],$=A.position.length===0?[p2]:A.position,L=js($[0],R),F=js($[$.length-1],Q),G=OW(A,L,F,R,Q),X=G[0],q=G[1],X>0&&q>0&&(T=o.ctx.createRadialGradient(k+L,I+F,0,k+L,I+F,X),zS(A.stops,X*2).forEach(function(Y){return T.addColorStop(Y.stop,$i(Y.color))}),o.path(O),o.ctx.fillStyle=T,X!==q?(U=s.bounds.left+.5*s.bounds.width,K=s.bounds.top+.5*s.bounds.height,z=q/X,M=1/z,o.ctx.save(),o.ctx.translate(U,K),o.ctx.transform(1,0,0,z,0,0),o.ctx.translate(-U,-K),o.ctx.fillRect(k,M*(I-K)+K,R,Q*M),o.ctx.restore()):o.ctx.fill())),H.label=6;case 6:return i--,[2]}})},o=this,c=0,l=s.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return c<l.length?(u=l[c],[5,a(u)]):[3,4];case 2:d.sent(),d.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(s,i,a){return Ia(this,void 0,void 0,function(){return wa(this,function(o){return this.path(wC(a,i)),this.ctx.fillStyle=$i(s),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(s,i,a,o){return Ia(this,void 0,void 0,function(){var c,l;return wa(this,function(u){switch(u.label){case 0:return i<3?[4,this.renderSolidBorder(s,a,o)]:[3,2];case 1:return u.sent(),[2];case 2:return c=MX(o,a),this.path(c),this.ctx.fillStyle=$i(s),this.ctx.fill(),l=RX(o,a),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(s){return Ia(this,void 0,void 0,function(){var i,a,o,c,l,u,d,A,f=this;return wa(this,function(p){switch(p.label){case 0:return this.applyEffects(s.getEffects(2)),i=s.container.styles,a=!zu(i.backgroundColor)||i.backgroundImage.length,o=[{style:i.borderTopStyle,color:i.borderTopColor,width:i.borderTopWidth},{style:i.borderRightStyle,color:i.borderRightColor,width:i.borderRightWidth},{style:i.borderBottomStyle,color:i.borderBottomColor,width:i.borderBottomWidth},{style:i.borderLeftStyle,color:i.borderLeftColor,width:i.borderLeftWidth}],c=XX(ZA(i.backgroundClip,0),s.curves),a||i.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),zu(i.backgroundColor)||(this.ctx.fillStyle=$i(i.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(s.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),i.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=K0(s.curves),b=m.inset?0:WX,v=LX(g,-b+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+b,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=$i(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?$i(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),p.label=2;case 2:l=0,u=0,d=o,p.label=3;case 3:return u<d.length?(A=d[u],A.style!==0&&!zu(A.color)&&A.width>0?A.style!==2?[3,5]:[4,this.renderDashedDottedBorder(A.color,A.width,l,s.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return A.style!==3?[3,7]:[4,this.renderDashedDottedBorder(A.color,A.width,l,s.curves,3)];case 6:return p.sent(),[3,11];case 7:return A.style!==4?[3,9]:[4,this.renderDoubleBorder(A.color,A.width,l,s.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(A.color,l,s.curves)];case 10:p.sent(),p.label=11;case 11:l++,p.label=12;case 12:return u++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(s,i,a,o,c){return Ia(this,void 0,void 0,function(){var l,u,d,A,f,p,m,g,b,v,y,w,j,C,B,E,B,E;return wa(this,function(_){return this.ctx.save(),l=QX(o,a),u=wC(o,a),c===2&&(this.path(u),this.ctx.clip()),Fo(u[0])?(d=u[0].start.x,A=u[0].start.y):(d=u[0].x,A=u[0].y),Fo(u[1])?(f=u[1].end.x,p=u[1].end.y):(f=u[1].x,p=u[1].y),a===0||a===2?m=Math.abs(d-f):m=Math.abs(A-p),this.ctx.beginPath(),c===3?this.formatPath(l):this.formatPath(u.slice(0,2)),g=i<3?i*3:i*2,b=i<3?i*2:i,c===3&&(g=i,b=i),v=!0,m<=g*2?v=!1:m<=g*2+b?(y=m/(2*g+b),g*=y,b*=y):(w=Math.floor((m+b)/(g+b)),j=(m-w*g)/(w-1),C=(m-(w+1)*g)/w,b=C<=0||Math.abs(b-j)<Math.abs(b-C)?j:C),v&&(c===3?this.ctx.setLineDash([0,g+b]):this.ctx.setLineDash([g,b])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=i):this.ctx.lineWidth=i*2+1.1,this.ctx.strokeStyle=$i(s),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&(Fo(u[0])&&(B=u[3],E=u[0],this.ctx.beginPath(),this.formatPath([new fr(B.end.x,B.end.y),new fr(E.start.x,E.start.y)]),this.ctx.stroke()),Fo(u[1])&&(B=u[1],E=u[2],this.ctx.beginPath(),this.formatPath([new fr(B.end.x,B.end.y),new fr(E.start.x,E.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(s){return Ia(this,void 0,void 0,function(){var i;return wa(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=$i(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=DX(s),[4,this.renderStack(i)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t})(cO),YX=function(r){return r instanceof K6||r instanceof z6?!0:r instanceof x2&&r.type!==H0&&r.type!==$0},XX=function(r,t){switch(r){case 0:return K0(t);case 2:return IX(t);case 1:default:return G0(t)}},JX=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ZX=["-apple-system","system-ui"],eJ=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(t){return ZX.indexOf(t)===-1}):r},tJ=(function(r){Sl(t,r);function t(s,i){var a=r.call(this,s,i)||this;return a.canvas=i.canvas?i.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=i,a.canvas.width=Math.floor(i.width*i.scale),a.canvas.height=Math.floor(i.height*i.scale),a.canvas.style.width=i.width+"px",a.canvas.style.height=i.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-i.x,-i.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),a}return t.prototype.render=function(s){return Ia(this,void 0,void 0,function(){var i,a;return wa(this,function(o){switch(o.label){case 0:return i=Uw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,s),[4,rJ(i)];case 1:return a=o.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=$i(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t})(cO),rJ=function(r){return new Promise(function(t,s){var i=new Image;i.onload=function(){t(i)},i.onerror=s,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},nJ=(function(){function r(t){var s=t.id,i=t.enabled;this.id=s,this.enabled=i,this.start=Date.now()}return r.prototype.debug=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,tg([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,tg([this.id,this.getTime()+"ms"],t))},r.prototype.warn=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,tg([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},r.prototype.error=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,tg([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},r.instances={},r})(),sJ=(function(){function r(t,s){var i;this.windowBounds=s,this.instanceName="#"+r.instanceCount++,this.logger=new nJ({id:this.instanceName,enabled:t.logging}),this.cache=(i=t.cache)!==null&&i!==void 0?i:new NX(this,t)}return r.instanceCount=1,r})(),uO=function(r,t){return t===void 0&&(t={}),iJ(r,t)};typeof window<"u"&&nO.setContext(window);var iJ=function(r,t){return Ia(void 0,void 0,void 0,function(){var s,i,a,o,c,l,u,d,A,f,p,m,g,b,v,y,w,j,C,B,_,E,_,S,N,O,k,I,R,Q,$,L,F,G,X,q,T,U,K,z;return wa(this,function(M){switch(M.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(s=r.ownerDocument,!s)throw new Error("Element is not attached to a Document");if(i=s.defaultView,!i)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=t.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(N=t.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:t.proxy,useCORS:(O=t.useCORS)!==null&&O!==void 0?O:!1},o=vw({logging:(k=t.logging)!==null&&k!==void 0?k:!0,cache:t.cache},a),c={windowWidth:(I=t.windowWidth)!==null&&I!==void 0?I:i.innerWidth,windowHeight:(R=t.windowHeight)!==null&&R!==void 0?R:i.innerHeight,scrollX:(Q=t.scrollX)!==null&&Q!==void 0?Q:i.pageXOffset,scrollY:($=t.scrollY)!==null&&$!==void 0?$:i.pageYOffset},l=new Qc(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),u=new sJ(o,l),d=(L=t.foreignObjectRendering)!==null&&L!==void 0?L:!1,A={allowTaint:(F=t.allowTaint)!==null&&F!==void 0?F:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:d,copyStyles:d},u.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new xC(u,r,A),p=f.clonedReferenceElement,p?[4,f.toIFrame(s,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=M.sent(),g=b2(p)||oX(p)?LK(p.ownerDocument):Cy(u,p),b=g.width,v=g.height,y=g.left,w=g.top,j=aJ(u,p,t.backgroundColor),C={canvas:t.canvas,backgroundColor:j,scale:(X=(G=t.scale)!==null&&G!==void 0?G:i.devicePixelRatio)!==null&&X!==void 0?X:1,x:((q=t.x)!==null&&q!==void 0?q:0)+y,y:((T=t.y)!==null&&T!==void 0?T:0)+w,width:(U=t.width)!==null&&U!==void 0?U:Math.ceil(b),height:(K=t.height)!==null&&K!==void 0?K:Math.ceil(v)},d?(u.logger.debug("Document cloned, using foreign object rendering"),_=new tJ(u,C),[4,_.render(p)]):[3,3];case 2:return B=M.sent(),[3,5];case 3:return u.logger.debug("Document cloned, element located at "+y+","+w+" with size "+b+"x"+v+" using computed rendering"),u.logger.debug("Starting DOM parsing"),E=q6(u,p),j===E.styles.backgroundColor&&(E.styles.backgroundColor=Fc.TRANSPARENT),u.logger.debug("Starting renderer for element at "+C.x+","+C.y+" with size "+C.width+"x"+C.height),_=new qX(u,C),[4,_.render(E)];case 4:B=M.sent(),M.label=5;case 5:return(!((z=t.removeContainer)!==null&&z!==void 0)||z)&&(xC.destroy(m)||u.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),u.logger.debug("Finished rendering"),[2,B]}})})},aJ=function(r,t,s){var i=t.ownerDocument,a=i.documentElement?tp(r,getComputedStyle(i.documentElement).backgroundColor):Fc.TRANSPARENT,o=i.body?tp(r,getComputedStyle(i.body).backgroundColor):Fc.TRANSPARENT,c=typeof s=="string"?tp(r,s):s===null?Fc.TRANSPARENT:4294967295;return t===i.documentElement?zu(a)?zu(o)?c:o:a:c};const oJ=Object.freeze(Object.defineProperty({__proto__:null,default:uO},Symbol.toStringTag,{value:"Module"})),lJ=()=>{const{id:r}=ty(),t=bl(),{user:s}=Fn(),[i,a]=ee.useState(null),[o,c]=ee.useState(!0),[l,u]=ee.useState(null),d=ee.useRef(),f=new URLSearchParams(t.search).get("type");ee.useEffect(()=>{!s||!r||!f||p()},[s,r,f]);const p=async()=>{try{c(!0);const v=f==="order"?`/api/orders/${r}`:`/api/bookings/${r}`,y=await fetch(`http://localhost:10000${v}`,{credentials:"include"});if(y.ok){const w=await y.json();a(w)}else u(`${f} not found`)}catch(v){console.error("Error fetching data:",v),u("Failed to load data")}finally{c(!1)}},m=()=>{window.print()},g=async()=>{if(!(!i||!d.current))try{const v=document.querySelector("[data-pdf-download]");v&&(v.textContent="Generating PDF...",v.disabled=!0);const y=await uO(d.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:d.current.scrollWidth,height:d.current.scrollHeight}),w=210,j=y.height*w/y.width,C=297,B=new Tr("p","mm","a4"),E=y.toDataURL("image/png");let _=j,S=0;for(B.addImage(E,"PNG",0,S,w,j),_-=C;_>=0;)S=_-j,B.addPage(),B.addImage(E,"PNG",0,S,w,j),_-=C;const O=new Date().toISOString().split("T")[0],I=`Receipt_${i._id.slice(-8).toUpperCase()}_${O}.pdf`;B.save(I)}catch(v){console.error("Error generating PDF:",v),alert("Error generating PDF. Please try again.")}finally{const v=document.querySelector("[data-pdf-download]");v&&(v.textContent="Download PDF",v.disabled=!1)}};if(!s)return n.jsx(_8,{to:"/login",replace:!0});if(!f||!["order","booking"].includes(f))return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Invalid Receipt Type"}),n.jsx("p",{className:"text-gray-600",children:"The receipt type must be 'order' or 'booking'"})]})});if(o)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(cs,{size:"xl"})});if(l)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Receipt Not Found"}),n.jsx("p",{className:"text-gray-600",children:l})]})});if(!i)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"No Data Available"}),n.jsx("p",{className:"text-gray-600",children:"Unable to load receipt data"})]})});const b=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b print:hidden",children:n.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(oc,{className:"w-5 h-5"}),n.jsx("span",{children:"Back"})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsxs("button",{onClick:m,className:"flex items-center space-x-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition-colors",children:[n.jsx(vR,{className:"w-4 h-4"}),n.jsx("span",{children:"Print"})]}),n.jsxs("button",{onClick:g,"data-pdf-download":!0,className:"flex items-center space-x-2 bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50",children:[n.jsx(Dc,{className:"w-4 h-4"}),n.jsx("span",{children:"Download PDF"})]})]})]})})}),n.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8 print:p-0",children:n.jsxs("div",{ref:d,className:"bg-white shadow-lg rounded-lg p-8 print:shadow-none print:rounded-none",style:{fontFamily:"Arial, sans-serif",lineHeight:"1.4"},children:[n.jsxs("div",{className:"text-center pb-6 mb-6",style:{borderBottom:"2px solid #1f2937"},children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",style:{fontSize:"24px",fontWeight:"bold",color:"#111827",marginBottom:"8px"},children:"AIO CART"}),n.jsx("h2",{className:"text-xl text-gray-700",style:{fontSize:"18px",color:"#374151",marginBottom:"8px"},children:"Payment Receipt"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2",style:{fontSize:"12px",color:"#6b7280"},children:["Receipt #",i._id.slice(-8).toUpperCase()]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Receipt Information"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Date:"}),n.jsx("span",{className:"font-medium",children:b(new Date)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-gray-600",children:[f==="order"?"Order":"Booking"," ID:"]}),n.jsx("span",{className:"font-medium",children:i.combinedId||i._id})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Status:"}),n.jsx("span",{className:"font-medium capitalize",children:i.status})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Payment:"}),n.jsx("span",{className:"font-medium",children:i.paymentDetails?.paymentStatus==="paid"?" Paid":"Pending"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Customer Information"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Name:"}),n.jsx("span",{className:"font-medium",children:i.customerId?.name||"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Email:"}),n.jsx("span",{className:"font-medium",children:i.customerId?.email||"N/A"})]})]}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-3 mt-4",children:"Store Information"}),n.jsx("div",{className:"space-y-2 text-sm",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Store:"}),n.jsx("span",{className:"font-medium",children:i.storeId?.name||"N/A"})]})})]})]}),f==="order"&&i.items&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Order Items"}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{style:{backgroundColor:"#f9fafb"},children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{padding:"12px",textAlign:"left",fontSize:"11px",fontWeight:"500",color:"#6b7280"},children:"Product"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",style:{padding:"12px",textAlign:"right",fontSize:"11px",fontWeight:"500",color:"#6b7280"},children:"Qty"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",style:{padding:"12px",textAlign:"right",fontSize:"11px",fontWeight:"500",color:"#6b7280"},children:"Price"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",style:{padding:"12px",textAlign:"right",fontSize:"11px",fontWeight:"500",color:"#6b7280"},children:"Total"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.items.map((v,y)=>n.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[n.jsx("td",{className:"px-4 py-3",style:{padding:"12px"},children:n.jsx("div",{className:"text-sm font-medium text-gray-900",style:{fontSize:"13px",fontWeight:"500",color:"#111827"},children:v.productId?.title||"Product"})}),n.jsx("td",{className:"px-4 py-3 text-right text-sm text-gray-900",style:{padding:"12px",textAlign:"right",fontSize:"13px",color:"#111827"},children:v.quantity}),n.jsxs("td",{className:"px-4 py-3 text-right text-sm text-gray-900",style:{padding:"12px",textAlign:"right",fontSize:"13px",color:"#111827"},children:["LKR ",v.price.toFixed(2)]}),n.jsxs("td",{className:"px-4 py-3 text-right text-sm font-medium text-gray-900",style:{padding:"12px",textAlign:"right",fontSize:"13px",fontWeight:"500",color:"#111827"},children:["LKR ",(v.price*v.quantity).toFixed(2)]})]},y))})]})})]}),f==="booking"&&i.serviceId&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Service Information"}),n.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:i.serviceId.title||"Service"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",i.bookingDetails?.date?b(i.bookingDetails.date):"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Time: ",i.bookingDetails?.startTime||i.startTime," - ",i.bookingDetails?.endTime||i.endTime]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"font-medium text-gray-900",children:["LKR ",i.totalAmount]})})]})})]}),f==="order"&&i.shippingAddress&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Shipping Address"}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm",children:[n.jsx("p",{children:i.shippingAddress.street}),n.jsxs("p",{children:[i.shippingAddress.city,", ",i.shippingAddress.state]}),n.jsx("p",{children:i.shippingAddress.zipCode})]})]}),n.jsxs("div",{className:"pt-6",style:{borderTop:"2px solid #e5e7eb",paddingTop:"24px"},children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-4",style:{fontSize:"16px",fontWeight:"600",color:"#111827",marginBottom:"16px"},children:"Payment Summary"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"8px"},children:[n.jsx("span",{className:"text-gray-600",style:{color:"#4b5563"},children:"Subtotal:"}),n.jsxs("span",{className:"font-medium",style:{fontWeight:"500"},children:["LKR ",i.storeAmount]})]}),n.jsxs("div",{className:"flex justify-between text-sm",style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"8px"},children:[n.jsx("span",{className:"text-gray-600",style:{color:"#4b5563"},children:"Platform Fee:"}),n.jsxs("span",{className:"font-medium",style:{fontWeight:"500"},children:["LKR ",i.platformFee]})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 pt-2",style:{display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"bold",color:"#111827",borderTop:"1px solid #d1d5db",paddingTop:"8px",marginTop:"8px"},children:[n.jsx("span",{children:"Total Amount:"}),n.jsxs("span",{children:["LKR ",i.totalAmount]})]})]})]}),n.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 text-center text-sm text-gray-500",children:[n.jsx("p",{children:"Thank you for your business!"}),n.jsx("p",{className:"mt-1",children:"This is an electronically generated receipt."}),n.jsxs("p",{className:"mt-1",children:["Generated on ",b(new Date)]})]})]})}),n.jsx("style",{jsx:!0,children:`
        @media print {
          @page {
            margin: 0.5in;
          }
          body {
            -webkit-print-color-adjust: exact;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:shadow-none {
            box-shadow: none !important;
          }
          .print\\:rounded-none {
            border-radius: 0 !important;
          }
          .print\\:p-0 {
            padding: 0 !important;
          }
        }
      `})]})},cJ=({selectedColor:r,onColorChange:t,className:s=""})=>{const i=[{name:"Classic Black",value:"#000000",preview:"bg-black"},{name:"Pure White",value:"#FFFFFF",preview:"bg-white border-2 border-gray-300"},{name:"Slate Gray",value:"#64748b",preview:"bg-slate-500"},{name:"Royal Blue",value:"#2563eb",preview:"bg-blue-600"},{name:"Emerald Green",value:"#059669",preview:"bg-emerald-600"},{name:"Crimson Red",value:"#dc2626",preview:"bg-red-600"},{name:"Amber Orange",value:"#d97706",preview:"bg-amber-600"},{name:"Violet Purple",value:"#7c3aed",preview:"bg-violet-600"},{name:"Rose Pink",value:"#e11d48",preview:"bg-rose-600"},{name:"Teal",value:"#0d9488",preview:"bg-teal-600"},{name:"Indigo",value:"#4f46e5",preview:"bg-indigo-600"},{name:"Lime Green",value:"#65a30d",preview:"bg-lime-600"}];return n.jsxs("div",{className:`space-y-4 ${s}`,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Vv,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Store Theme Color"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Choose from preset colors"}),n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:i.map(a=>n.jsxs("button",{type:"button",onClick:()=>t(a.value),className:`group relative p-3 rounded-lg border-2 transition-all hover:scale-105 ${r===a.value?"border-black ring-2 ring-black ring-opacity-50":"border-gray-200 hover:border-gray-300"}`,title:a.name,children:[n.jsx("div",{className:`w-full h-8 rounded ${a.preview} mb-2`}),n.jsx("p",{className:"text-xs text-gray-600 text-center truncate",children:a.name}),r===a.value&&n.jsx("div",{className:"absolute top-1 right-1 w-3 h-3 bg-black rounded-full flex items-center justify-center",children:n.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]},a.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or choose a custom color"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"relative",children:n.jsx("input",{type:"color",value:r,onChange:a=>t(a.target.value),className:"w-16 h-12 border border-gray-300 rounded-lg cursor-pointer"})}),n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",value:r,onChange:a=>t(a.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent font-mono",placeholder:"#000000",pattern:"^#[0-9A-Fa-f]{6}$"})})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Theme Preview"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-4 rounded-lg text-white",style:{backgroundColor:r},children:[n.jsx("h5",{className:"font-semibold",children:"Your Store Name"}),n.jsx("p",{className:"text-sm opacity-90",children:"This is how your store theme will look"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:r},children:"Primary Button"}),n.jsx("button",{className:"px-4 py-2 rounded-lg font-medium border-2",style:{borderColor:r,color:r,backgroundColor:"transparent"},children:"Secondary Button"})]})]})]})]})},uJ=()=>{const{user:r,loading:t}=Fn(),s=yi(),[i,a]=ee.useState(null),[o,c]=ee.useState([]),[l,u]=ee.useState(!0),[d,A]=ee.useState(!1),[f,p]=ee.useState("details"),[m,g]=ee.useState(""),[b,v]=ee.useState(""),[y,w]=ee.useState(""),[j,C]=ee.useState("all"),[B,E]=ee.useState(null),[_,S]=ee.useState({name:"",description:"",themeColor:"#000000",storeType:"product",contactInfo:{email:"",phone:"",address:"",whatsapp:""},serviceSettings:{workingHours:{start:"09:00",end:"17:00"},workingDays:["monday","tuesday","wednesday","thursday","friday"],excludedDates:[],timeZone:"Asia/Colombo",bookingBuffer:0,advanceBookingDays:30},shippingInfo:{freeShipping:!1,deliveryDaysMin:3,deliveryDaysMax:7,areas:[]},socialLinks:{facebook:"",instagram:"",youtube:"",tiktok:"",linkedin:"",pinterest:"",snapchat:"",website:""}}),[N,O]=ee.useState([]),[k,I]=ee.useState(null),[R,Q]=ee.useState(""),[$,L]=ee.useState(""),[F,G]=ee.useState([]),[X,q]=ee.useState([]),[T,U]=ee.useState(!1),K=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];ee.useEffect(()=>{t||(r?.role==="store_owner"&&r?.storeId?(z(),M()):s("/dashboard"))},[r,s,t]);const z=async()=>{try{const Ce=await fetch(`http://localhost:10000/api/stores/${r.storeId}`);if(Ce.ok){const Be=await Ce.json();a(Be.store),S({name:Be.store.name||"",description:Be.store.description||"",themeColor:Be.store.themeColor||"#000000",storeType:Be.store.storeType||"product",contactInfo:Be.store.contactInfo||{email:"",phone:"",address:"",whatsapp:""},serviceSettings:Be.store.serviceSettings||{workingHours:{start:"09:00",end:"17:00"},workingDays:["monday","tuesday","wednesday","thursday","friday"],excludedDates:[],timeZone:"Asia/Colombo",bookingBuffer:0,advanceBookingDays:30},shippingInfo:Be.store.shippingInfo||{freeShipping:!1,deliveryDaysMin:3,deliveryDaysMax:7,areas:[]},socialLinks:Be.store.socialLinks||[]}),U(Be.store.canReuploadDocs||!1)}const ie=await fetch("http://localhost:10000/api/subscriptions/my-subscription",{credentials:"include"});if(!ie.ok)throw new Error("Failed to fetch subscription");const me=await ie.json();E(me)}catch(Ce){console.error("Error fetching store:",Ce),g("Failed to load store data")}finally{u(!1)}},M=async()=>{try{const Ce=await fetch("http://localhost:10000/api/reviews/manage",{credentials:"include"});if(Ce.ok){const ie=await Ce.json();c(ie)}}catch(Ce){console.error("Error fetching reviews:",Ce)}},H=async Ce=>{Ce.preventDefault(),A(!0),g(""),w("");const ie={maxSizeMB:.5,maxWidthOrHeight:2e3,useWebWorker:!0};try{let me=await Promise.all(N.map(async $e=>{const je=await ws($e,ie),Pe=Al(hl,`stores/id_${Date.now()}_${$e.name}`);return await ul(Pe,je),dl(Pe)}));const Be=me.length>0?me:i.heroImages,Le={name:_.name,description:_.description,themeColor:_.themeColor,storeType:_.storeType,contactInfo:_.contactInfo,heroImages:Be,serviceSettings:_.serviceSettings,shippingInfo:_.shippingInfo,socialLinks:_.socialLinks},ve=await fetch(`http://localhost:10000/api/stores/${i._id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Le)});if(ve.ok){const $e=await ve.json();a($e),O([]),w("Store updated successfully!")}else{const $e=await ve.json();g($e.error||"Failed to update store")}}catch(me){g("Network error. Please try again."+me)}finally{A(!1)}},Y=async()=>{if(!k)return;const Ce={maxSizeMB:.2,maxWidthOrHeight:400,useWebWorker:!0};try{const ie=await ws(k,Ce),me=Al(hl,`users/${Date.now()}_${k.name}`);await ul(me,ie);const Le={profileImage:await dl(me)},ve=await fetch(`http://localhost:10000/api/stores/${i._id}/profile-image`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Le)});if(ve.ok){const $e=await ve.json();a($e),I(null),w("Profile image updated successfully!")}else{const $e=await ve.json();g($e.error||"Failed to update profile image")}}catch(ie){g("Network error. Please try again."+ie)}},ae=async Ce=>{const ie=Ce==="id"?F:X;if(ie.length!==0){A(!0);try{const me={maxSizeMB:1,maxWidthOrHeight:2e3,useWebWorker:!0},Be=await Promise.all(ie.map(async $e=>{const je=await ws($e,me),Pe=Al(hl,`verification/${Ce}_${Date.now()}_${$e.name}`);return await ul(Pe,je),dl(Pe)})),Le={[Ce==="id"?"idImages":"addressVerificationImages"]:Be},ve=await fetch(`http://localhost:10000/api/stores/${i._id}/verification-docs`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Le)});if(ve.ok){const $e=await ve.json();a($e),Ce==="id"?G([]):q([]),w(`${Ce==="id"?"ID":"Address"} verification documents uploaded successfully!`)}else{const $e=await ve.json();g($e.error||"Failed to upload verification documents")}}catch(me){console.error("Upload error:",me),g("Network error. Please try again: "+me.message)}finally{A(!1)}}},oe=Ce=>{const{name:ie,value:me,type:Be,checked:Le}=Ce.target;if(ie.startsWith("contactInfo.")){const ve=ie.split(".")[1];S($e=>({...$e,contactInfo:{...$e.contactInfo,[ve]:me}}))}else if(ie.startsWith("serviceSettings.")){const ve=ie.split(".");if(ve.length===3){const[,$e,je]=ve;S(Pe=>({...Pe,serviceSettings:{...Pe.serviceSettings,[$e]:{...Pe.serviceSettings[$e],[je]:me}}}))}else{const $e=ve[1];S(je=>({...je,serviceSettings:{...je.serviceSettings,[$e]:Be==="number"?parseInt(me)||0:me}}))}}else if(ie.startsWith("shippingInfo.")){const ve=ie.split(".")[1];S($e=>({...$e,shippingInfo:{...$e.shippingInfo,[ve]:Be==="checkbox"?Le:Be==="number"?parseInt(me)||0:me}}))}else if(ie.startsWith("socialLinks.")){const ve=ie.split(".")[1];S($e=>({...$e,socialLinks:{...$e.socialLinks,[ve]:me}}))}else S(ve=>({...ve,[ie]:me}))},be=Ce=>{S(ie=>({...ie,serviceSettings:{...ie.serviceSettings,workingDays:ie.serviceSettings.workingDays.includes(Ce)?ie.serviceSettings.workingDays.filter(me=>me!==Ce):[...ie.serviceSettings.workingDays,Ce]}}))},ge=()=>{R&&!_.serviceSettings.excludedDates.includes(R)&&(S(Ce=>({...Ce,serviceSettings:{...Ce.serviceSettings,excludedDates:[...Ce.serviceSettings.excludedDates,R]}})),Q(""))},he=Ce=>{S(ie=>({...ie,serviceSettings:{...ie.serviceSettings,excludedDates:ie.serviceSettings.excludedDates.filter(me=>me!==Ce)}}))},ke=()=>{$.trim()&&!_.shippingInfo.areas.includes($.trim())&&(S(Ce=>({...Ce,shippingInfo:{...Ce.shippingInfo,areas:[...Ce.shippingInfo.areas,$.trim()]}})),L(""))},Z=Ce=>{S(ie=>({...ie,shippingInfo:{...ie.shippingInfo,areas:ie.shippingInfo.areas.filter(me=>me!==Ce)}}))},te=async(Ce,ie)=>{try{B&&B.package==="standard"?(await fetch(`http://localhost:10000/api/reviews/${Ce}/visibility`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({isVisible:ie})})).ok&&(M(),w(`Review ${ie?"shown":"hidden"} successfully!`)):v("To manage reviews and enhance your brand credibility, simply upgrade your package. It's quick, easy, and unlocks powerful features to grow your business.")}catch{g("Failed to update review visibility")}},fe=async(Ce,ie)=>{try{(await fetch(`http://localhost:10000/api/reviews/${Ce}/respond`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:ie})})).ok&&(M(),w("Response added successfully!"))}catch{g("Failed to respond to review")}},we=o.filter(Ce=>{switch(j){case"visible":return Ce.isVisible;case"hidden":return!Ce.isVisible;case"unanswered":return!Ce.response;default:return!0}}),Fe=Ce=>Ce.length<=2?Ce:Ce.charAt(0)+"*".repeat(Ce.length-2)+Ce.charAt(Ce.length-1),_e=(Ce,ie)=>Ce?{status:"verified",icon:Xr,color:"text-green-600",bg:"bg-green-50"}:ie?{status:"pending",icon:Ki,color:"text-yellow-600",bg:"bg-yellow-50"}:{status:"not_uploaded",icon:mo,color:"text-red-600",bg:"bg-red-50"};return t||l?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(cs,{size:"xl"})}):i?n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Store Management"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your store settings, verification, and reviews"})]}),n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:[{id:"details",name:"Store Details",icon:ei},{id:"shipping",name:"Shipping & Delivery",icon:Hu},{id:"social",name:"Social Media",icon:tA},{id:"verification",name:"Verification",icon:Wu},{id:"reviews",name:"Reviews",icon:p0}].map(Ce=>{const ie=Ce.icon;return n.jsxs("button",{onClick:()=>p(Ce.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${f===Ce.id?"border-black text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(ie,{className:"w-5 h-5"}),n.jsxs("span",{children:[Ce.name,Ce.id==="reviews"&&o.length>0&&n.jsx("span",{className:"ml-1 bg-black text-white text-xs px-2 py-1 rounded-full",children:o.length})]})]},Ce.id)})})})}),m&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:m}),b&&n.jsx("div",{className:"bg-amber-100 border border-amber-400 text-amber-700 px-4 py-3 rounded mb-6",children:b}),y&&n.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:y}),f==="details"&&n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8",children:n.jsxs("form",{onSubmit:H,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Store Profile Image"}),n.jsxs("div",{className:"flex items-center space-x-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:i.profileImage?n.jsx("img",{src:i.profileImage.startsWith("http")?i.profileImage:`http://localhost:10000${i.profileImage}`,alt:"Store profile",className:"w-full h-full object-cover"}):n.jsx(ei,{className:"w-8 h-8 text-gray-400"})}),n.jsxs("label",{className:"absolute bottom-0 right-0 bg-black text-white p-2 rounded-full hover:bg-gray-800 transition-colors cursor-pointer",children:[n.jsx(D1,{className:"w-4 h-4"}),n.jsx("input",{type:"file",accept:"image/*",onChange:Ce=>I(Ce.target.files[0]),className:"hidden"})]})]}),k&&n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("img",{src:URL.createObjectURL(k),alt:"New profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsx("button",{type:"button",onClick:Y,className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:"Upload"}),n.jsx("button",{type:"button",onClick:()=>I(null),className:"text-red-500 hover:text-red-700",children:"Cancel"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Name"}),n.jsx("input",{type:"text",name:"name",value:_.name,onChange:oe,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme Color"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"color",name:"themeColor",value:_.themeColor,onChange:oe,className:"w-16 h-12 border border-gray-300 rounded-lg cursor-pointer"}),n.jsx("input",{type:"text",value:_.themeColor,onChange:Ce=>S(ie=>({...ie,themeColor:Ce.target.value})),className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"#000000"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Description"}),n.jsx("textarea",{name:"description",value:_.description,onChange:oe,rows:4,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),i.type==="service"&&n.jsxs("div",{className:"border-t pt-8",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[n.jsx(is,{className:"w-5 h-5 mr-2"}),"Service & Booking Settings"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Working Hours"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Start Time"}),n.jsx("input",{type:"time",name:"serviceSettings.workingHours.start",value:_.serviceSettings.workingHours.start,onChange:oe,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"End Time"}),n.jsx("input",{type:"time",name:"serviceSettings.workingHours.end",value:_.serviceSettings.workingHours.end,onChange:oe,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Working Days"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:K.map(Ce=>n.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:_.serviceSettings.workingDays.includes(Ce.value),onChange:()=>be(Ce.value),className:"w-4 h-4 text-black focus:ring-black border-gray-300 rounded"}),n.jsx("span",{className:"text-sm text-gray-700",children:Ce.label})]},Ce.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Excluded Dates (Holidays/Closures)"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"date",value:R,onChange:Ce=>Q(Ce.target.value),min:new Date().toISOString().split("T")[0],className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"}),n.jsx("button",{type:"button",onClick:ge,className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors flex items-center",children:n.jsx(Ua,{className:"w-4 h-4"})})]}),_.serviceSettings.excludedDates.length>0&&n.jsx("div",{className:"space-y-2",children:_.serviceSettings.excludedDates.map((Ce,ie)=>n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg",children:[n.jsx("span",{className:"text-sm text-gray-700",children:new Date(Ce).toLocaleDateString()}),n.jsx("button",{type:"button",onClick:()=>he(Ce),className:"text-red-500 hover:text-red-700",children:n.jsx(Ts,{className:"w-4 h-4"})})]},ie))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Booking Buffer (minutes)"}),n.jsx("input",{type:"number",name:"serviceSettings.bookingBuffer",value:_.serviceSettings.bookingBuffer,onChange:oe,min:"0",max:"60",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"0"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Buffer time between bookings"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Advance Booking Days"}),n.jsx("input",{type:"number",name:"serviceSettings.advanceBookingDays",value:_.serviceSettings.advanceBookingDays,onChange:oe,min:"1",max:"365",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"30"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How far in advance customers can book"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Zone"}),n.jsxs("select",{name:"serviceSettings.timeZone",value:_.serviceSettings.timeZone,onChange:oe,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"Asia/Colombo",children:"Asia/Colombo (Sri Lanka)"}),n.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata (India)"}),n.jsx("option",{value:"UTC",children:"UTC"}),n.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),n.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"})]})]})]})]})]}),n.jsx(cJ,{selectedColor:_.themeColor,onColorChange:Ce=>S({..._,themeColor:Ce})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hero Images (up to 5)"}),n.jsx(Tc,{images:N,onImagesChange:O,maxImages:5,multiple:!0}),i.heroImages&&i.heroImages.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Current Images:"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:i.heroImages.map((Ce,ie)=>n.jsx("img",{src:Ce.startsWith("http")?Ce:`http://localhost:10000${Ce}`,alt:`Hero ${ie+1}`,className:"w-full h-24 object-cover rounded-lg"},ie))})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsx("input",{type:"email",name:"contactInfo.email",value:_.contactInfo.email,onChange:oe,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),n.jsx("input",{type:"tel",name:"contactInfo.phone",value:_.contactInfo.phone,onChange:oe,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp"}),n.jsx("input",{type:"tel",name:"contactInfo.whatsapp",value:_.contactInfo.whatsapp,onChange:oe,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"+94 77 123 4567"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),n.jsx("textarea",{name:"contactInfo.address",value:_.contactInfo.address,onChange:oe,rows:3,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{type:"submit",disabled:d,className:"bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[d&&n.jsx(cs,{size:"sm"}),n.jsx("span",{children:d?"Saving...":"Save Changes"})]})})]})}),f==="shipping"&&n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8",children:n.jsxs("form",{onSubmit:H,className:"space-y-8",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[n.jsx(Hu,{className:"w-5 h-5 mr-2"}),"Shipping & Delivery Settings"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure your delivery options and areas"})]})}),i.type==="product"?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Free Shipping"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Offer free shipping to your customers"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",name:"shippingInfo.freeShipping",checked:_.shippingInfo.freeShipping,onChange:oe,className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-black/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-black"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Delivery Timeframe"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Minimum Days"}),n.jsx("input",{type:"number",name:"shippingInfo.deliveryDaysMin",value:_.shippingInfo.deliveryDaysMin,onChange:oe,min:"1",max:"30",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Maximum Days"}),n.jsx("input",{type:"number",name:"shippingInfo.deliveryDaysMax",value:_.shippingInfo.deliveryDaysMax,onChange:oe,min:"1",max:"30",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Estimated delivery time for your products"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Delivery Areas"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",value:$,onChange:Ce=>L(Ce.target.value),placeholder:"Enter area name (e.g., Colombo, Kandy)",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"}),n.jsx("button",{type:"button",onClick:ke,className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors flex items-center",children:n.jsx(Ua,{className:"w-4 h-4"})})]}),_.shippingInfo.areas.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Current Delivery Areas:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:_.shippingInfo.areas.map((Ce,ie)=>n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(wl,{className:"w-4 h-4 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:Ce})]}),n.jsx("button",{type:"button",onClick:()=>Z(Ce),className:"text-red-500 hover:text-red-700",children:n.jsx(Ts,{className:"w-4 h-4"})})]},ie))})]}),_.shippingInfo.areas.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(ps,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),n.jsx("p",{children:"No delivery areas added yet"}),n.jsx("p",{className:"text-sm",children:"Add areas where you can deliver products"})]})]})]})]}):n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx(Hu,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Service Store"}),n.jsx("p",{children:"Shipping settings are only available for product stores."}),n.jsx("p",{className:"text-sm mt-1",children:"Service bookings are handled through the booking system."})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{type:"submit",disabled:d||i.type!=="product",className:"bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[d&&n.jsx(cs,{size:"sm"}),n.jsx("span",{children:d?"Saving...":"Save Changes"})]})})]})}),f==="social"&&n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8",children:n.jsxs("form",{onSubmit:H,className:"space-y-8",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[n.jsx(tA,{className:"w-5 h-5 mr-2"}),"Social Media Links"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add your social media profiles to increase customer engagement"})]})}),n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[n.jsx(R1,{className:"w-4 h-4 mr-2 text-blue-600"}),"Facebook"]}),n.jsx("input",{type:"url",name:"socialLinks.facebook",value:_.socialLinks.facebook||"",onChange:oe,placeholder:"https://facebook.com/yourpage",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[n.jsx(Q1,{className:"w-4 h-4 mr-2 text-pink-600"}),"Instagram"]}),n.jsx("input",{type:"url",name:"socialLinks.instagram",value:_.socialLinks.instagram||"",onChange:oe,placeholder:"https://instagram.com/youraccount",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[n.jsx(LR,{className:"w-4 h-4 mr-2 text-red-600"}),"YouTube"]}),n.jsx("input",{type:"url",name:"socialLinks.youtube",value:_.socialLinks.youtube||"",onChange:oe,placeholder:"https://youtube.com/yourchannel",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[n.jsx(mR,{className:"w-4 h-4 mr-2 text-black"}),"TikTok"]}),n.jsx("input",{type:"url",name:"socialLinks.tiktok",value:_.socialLinks.tiktok||"",onChange:oe,placeholder:"https://tiktok.com/@youraccount",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[n.jsx(lR,{className:"w-4 h-4 mr-2 text-blue-700"}),"LinkedIn"]}),n.jsx("input",{type:"url",name:"socialLinks.linkedin",value:_.socialLinks.linkedin||"",onChange:oe,placeholder:"https://linkedin.com/company/yourcompany",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[n.jsx(Ch,{className:"w-4 h-4 mr-2 text-red-500"}),"Pinterest"]}),n.jsx("input",{type:"url",name:"socialLinks.pinterest",value:_.socialLinks.pinterest||"",onChange:oe,placeholder:"https://pinterest.com/youraccount",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[n.jsx(Ku,{className:"w-4 h-4 mr-2 text-yellow-500"}),"Snapchat"]}),n.jsx("input",{type:"url",name:"socialLinks.snapchat",value:_.socialLinks.snapchat||"",onChange:oe,placeholder:"https://snapchat.com/add/yourusername",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[n.jsx(eA,{className:"w-4 h-4 mr-2 text-gray-600"}),"Website"]}),n.jsx("input",{type:"url",name:"socialLinks.website",value:_.socialLinks.website||"",onChange:oe,placeholder:"https://yourwebsite.com",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{type:"submit",disabled:d,className:"bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[d&&n.jsx(cs,{size:"sm"}),n.jsx("span",{children:d?"Saving...":"Save Changes"})]})})]})}),f==="verification"&&n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[n.jsx(Wu,{className:"w-5 h-5 mr-2"}),"Store Verification"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Upload verification documents to build customer trust"}),!1]}),i.isVerified&&n.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 px-4 py-2 rounded-full",children:[n.jsx(Xr,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-800",children:"Verified Store"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"border rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"ID Verification"}),(()=>{const Ce=_e(i.isVerified,i.idImages?.length>0),ie=Ce.icon;return n.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full ${Ce.bg}`,children:[n.jsx(ie,{className:`w-4 h-4 ${Ce.color}`}),n.jsxs("span",{className:`text-xs font-medium ${Ce.color}`,children:[Ce.status==="verified"&&"Verified",Ce.status==="pending"&&"Under Review",Ce.status==="not_uploaded"&&"Not Uploaded"]})]})})()]}),i.idImages&&i.idImages.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Current Documents:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.idImages.map((Ce,ie)=>n.jsx("img",{src:Ce.startsWith("http")?Ce:`http://localhost:10000${Ce}`,alt:`ID ${ie+1}`,className:"w-full h-24 object-cover rounded border"},ie))})]}),(T||!i.idImages||i.idImages.length===0)&&n.jsxs("div",{className:"space-y-3",children:[n.jsx(Tc,{images:F,onImagesChange:G,maxImages:3,multiple:!0,accept:"image/*",idPrefix:"id-verification"}),F.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{type:"button",onClick:()=>{console.log("Attempting to upload ID documents:",F),ae("id")},disabled:d,className:"w-full bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:[d&&n.jsx(cs,{size:"sm"}),n.jsx(gp,{className:"w-4 h-4"}),n.jsx("span",{children:d?"Uploading...":"Upload ID Documents"})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[F.length," file(s) selected for upload"]})]})]}),!T&&i.idImages&&i.idImages.length>0&&n.jsx("div",{className:`border rounded-lg p-3 ${i.isVerified?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:n.jsx("p",{className:`text-sm ${i.isVerified?"text-green-800":"text-yellow-800"}`,children:i.isVerified?" Your ID documents have been verified and approved.":"Your ID documents are under review. You can only reupload if admin requests changes."})})]}),n.jsxs("div",{className:"border rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Address Verification"}),(()=>{const Ce=_e(i.isVerified,i.addressVerificationImages?.length>0),ie=Ce.icon;return n.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full ${Ce.bg}`,children:[n.jsx(ie,{className:`w-4 h-4 ${Ce.color}`}),n.jsxs("span",{className:`text-xs font-medium ${Ce.color}`,children:[Ce.status==="verified"&&"Verified",Ce.status==="pending"&&"Under Review",Ce.status==="not_uploaded"&&"Not Uploaded"]})]})})()]}),i.addressVerificationImages&&i.addressVerificationImages.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Current Documents:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.addressVerificationImages.map((Ce,ie)=>n.jsx("img",{src:Ce.startsWith("http")?Ce:`http://localhost:10000${Ce}`,alt:`Address ${ie+1}`,className:"w-full h-24 object-cover rounded border"},ie))})]}),(T||!i.addressVerificationImages||i.addressVerificationImages.length===0)&&n.jsxs("div",{className:"space-y-3",children:[n.jsx(Tc,{images:X,onImagesChange:q,maxImages:3,multiple:!0,accept:"image/*",idPrefix:"address-verification"}),X.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{type:"button",onClick:()=>{console.log("Attempting to upload address documents:",X),ae("address")},disabled:d,className:"w-full bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:[d&&n.jsx(cs,{size:"sm"}),n.jsx(gp,{className:"w-4 h-4"}),n.jsx("span",{children:d?"Uploading...":"Upload Address Documents"})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[X.length," file(s) selected for upload"]})]})]}),!T&&i.addressVerificationImages&&i.addressVerificationImages.length>0&&n.jsx("div",{className:`border rounded-lg p-3 ${i.isVerified?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:n.jsx("p",{className:`text-sm ${i.isVerified?"text-green-800":"text-yellow-800"}`,children:i.isVerified?" Your address documents have been verified and approved.":"Your address documents are under review. You can only reupload if admin requests changes."})})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Document Guidelines"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium mb-2",children:"ID Documents (Required):"}),n.jsxs("ul",{className:"space-y-1",children:[n.jsx("li",{children:" National ID Card"}),n.jsx("li",{children:" Passport"}),n.jsx("li",{children:" Driving License"}),n.jsx("li",{children:" Clear, readable photos"})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium mb-2",children:"Address Proof (Required):"}),n.jsxs("ul",{className:"space-y-1",children:[n.jsx("li",{children:" Utility Bill (recent)"}),n.jsx("li",{children:" Bank Statement"}),n.jsx("li",{children:" Lease Agreement"}),n.jsx("li",{children:" Government Letter"})]})]})]})]})]})}),f==="reviews"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Review Statistics"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:o.length>0?(o.reduce((Ce,ie)=>Ce+ie.rating,0)/o.length).toFixed(1):"0.0"}),n.jsx("div",{className:"text-sm text-yellow-700",children:"Average Rating"})]}),n.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:o.length}),n.jsx("div",{className:"text-sm text-blue-700",children:"Total Reviews"})]}),n.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:o.filter(Ce=>Ce.isVisible).length}),n.jsx("div",{className:"text-sm text-green-700",children:"Visible Reviews"})]}),n.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:o.filter(Ce=>Ce.response).length}),n.jsx("div",{className:"text-sm text-purple-700",children:"Responded To"})]})]})]}),o.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(mn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Reviews Yet"}),n.jsx("p",{className:"text-gray-600",children:"Customer reviews will appear here once you receive them"})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>C("all"),className:`px-3 py-1 rounded-full text-sm ${j==="all"?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All Reviews (",o.length,")"]}),n.jsxs("button",{onClick:()=>C("visible"),className:`px-3 py-1 rounded-full text-sm ${j==="visible"?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Visible (",o.filter(Ce=>Ce.isVisible).length,")"]}),n.jsxs("button",{onClick:()=>C("hidden"),className:`px-3 py-1 rounded-full text-sm ${j==="hidden"?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Hidden (",o.filter(Ce=>!Ce.isVisible).length,")"]}),n.jsxs("button",{onClick:()=>C("unanswered"),className:`px-3 py-1 rounded-full text-sm ${j==="unanswered"?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Unanswered (",o.filter(Ce=>!Ce.response).length,")"]})]})}),we.map(Ce=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:Fe(Ce.customerId?.name||"Anonymous")}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"flex items-center",children:[...Array(5)].map((ie,me)=>n.jsx(mn,{className:`w-4 h-4 ${me<Ce.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},me))}),n.jsx("span",{className:"text-sm text-gray-500",children:new Date(Ce.createdAt).toLocaleDateString()}),Ce.orderId&&n.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Order"}),Ce.bookingId&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Booking"})]})]})}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("button",{onClick:()=>te(Ce._id,!Ce.isVisible),className:`p-2 rounded-lg transition-colors ${Ce.isVisible?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,title:Ce.isVisible?"Hide review":"Show review",children:Ce.isVisible?n.jsx(Gn,{className:"w-4 h-4"}):n.jsx(f0,{className:"w-4 h-4"})})})]}),n.jsx("p",{className:"text-gray-700 mb-4",children:Ce.comment}),Ce.response?n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(p0,{className:"w-4 h-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Your Response"}),n.jsx("span",{className:"text-sm text-gray-500",children:new Date(Ce.response.respondedAt).toLocaleDateString()})]}),n.jsx("p",{className:"text-gray-700",children:Ce.response.message})]}):n.jsx("div",{className:"border-t pt-4",children:n.jsxs("form",{onSubmit:ie=>{ie.preventDefault();const me=ie.target.message.value;me.trim()&&(fe(Ce._id,me),ie.target.reset())},className:"flex space-x-3",children:[n.jsx("input",{type:"text",name:"message",placeholder:"Respond to this review...",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"}),n.jsx("button",{type:"submit",className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:"Respond"})]})})]},Ce._id))]})]})]})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ei,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Store Found"}),n.jsx("p",{className:"text-gray-600",children:"Please create a store first"})]})})},dJ=()=>n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-9xl font-bold text-gray-300",children:"404"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Page Not Found"}),n.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Sorry, we couldn't find the page you're looking for. It might have been moved, deleted, or you entered the wrong URL."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsxs(Zt,{to:"/",className:"inline-flex items-center space-x-2 bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors",children:[n.jsx(Mk,{className:"w-5 h-5"}),n.jsx("span",{children:"Go Home"})]}),n.jsxs("button",{onClick:()=>window.history.back(),className:"inline-flex items-center space-x-2 bg-white border-2 border-black text-black px-6 py-3 rounded-lg hover:bg-black hover:text-white transition-colors",children:[n.jsx(oc,{className:"w-5 h-5"}),n.jsx("span",{children:"Go Back"})]})]})]})}),dO=({isOpen:r,onClose:t,title:s,children:i,size:a="md"})=>{const o={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return ee.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),r?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:`bg-white rounded-lg w-full ${o[a]} max-h-[90vh] overflow-y-auto`,children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s}),n.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 transition-colors",children:n.jsx(Ts,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"p-6",children:i})]})}):null},_f=({title:r,data:t,type:s="bar",trend:i=null})=>{const a=d=>d>0?n.jsx(ti,{className:"w-4 h-4 text-green-500"}):d<0?n.jsx(m0,{className:"w-4 h-4 text-red-500"}):n.jsx(dy,{className:"w-4 h-4 text-gray-400"}),o=d=>d>0?"text-green-600":d<0?"text-red-600":"text-gray-600",c=()=>{if(!t||t.length===0)return null;const d=Math.max(...t.map(A=>A.value));return n.jsx("div",{className:"space-y-3",children:t.map((A,f)=>n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-16 text-sm text-gray-600 truncate",children:A.label}),n.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-black h-2 rounded-full transition-all duration-300",style:{width:`${A.value/d*100}%`}})}),n.jsx("div",{className:"w-20 text-sm font-medium text-right",children:typeof A.value=="number"&&A.value>1e3?Br(A.value):A.value})]},f))})},l=()=>!t||t.length===0?null:n.jsx("div",{className:"grid grid-cols-7 gap-2 h-20 items-end",children:t.slice(0,7).map((d,A)=>{const f=Math.max(...t.map(m=>m.value)),p=d.value/f*100;return n.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[n.jsx("div",{className:"bg-black rounded-t-sm w-full transition-all duration-300",style:{height:`${p}%`},title:`${d.label}: ${d.value}`}),n.jsx("div",{className:"text-xs text-gray-500 truncate w-full text-center",children:d.label})]},A)})}),u=()=>!t||t.length===0?null:n.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map((d,A)=>n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:typeof d.value=="number"&&d.value>1e3?Br(d.value):d.value}),n.jsx("div",{className:"text-sm text-gray-600",children:d.label})]},A))});return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ho,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r})]}),i!==null&&n.jsxs("div",{className:`flex items-center space-x-1 ${o(i)}`,children:[a(i),n.jsxs("span",{className:"text-sm font-medium",children:[i>0?"+":"",i.toFixed(1),"%"]})]})]}),n.jsxs("div",{className:"space-y-4",children:[s==="bar"&&c(),s==="line"&&l(),s==="grid"&&u(),(!t||t.length===0)&&n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(ho,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No data available"})]})]})]})},Ng=({title:r,value:t,icon:s,trend:i=null,trendValue:a=null,color:o="blue",subtitle:c=null,onClick:l=null})=>{const u=m=>{const g={blue:"text-blue-600 bg-blue-50",green:"text-green-600 bg-green-50",yellow:"text-yellow-600 bg-yellow-50",red:"text-red-600 bg-red-50",purple:"text-purple-600 bg-purple-50",gray:"text-gray-600 bg-gray-50"};return g[m]||g.blue},d=m=>m>0?n.jsx(ti,{className:"w-3 h-3"}):m<0?n.jsx(m0,{className:"w-3 h-3"}):n.jsx(dy,{className:"w-3 h-3"}),A=m=>m>0?"text-green-600":m<0?"text-red-600":"text-gray-600",f=m=>typeof m=="number"?m>1e6?Br(m):m.toLocaleString():m,p=`bg-white rounded-lg shadow-sm border p-6 ${l?"cursor-pointer hover:shadow-md transition-shadow duration-200":""}`;return n.jsx("div",{className:p,onClick:l,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:r}),n.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:f(t)}),c&&n.jsx("p",{className:"text-sm text-gray-500",children:c}),(i!==null||a!==null)&&n.jsxs("div",{className:"flex items-center mt-2 space-x-2",children:[i!==null&&n.jsxs("div",{className:`flex items-center space-x-1 ${A(i)}`,children:[d(i),n.jsxs("span",{className:"text-xs font-medium",children:[i>0?"+":"",i.toFixed(1),"%"]})]}),a&&n.jsx("span",{className:"text-xs text-gray-500",children:a})]})]}),s&&n.jsx("div",{className:`p-3 rounded-full ${u(o)}`,children:n.jsx(s,{className:"w-6 h-6"})})]})})},AJ=()=>{const[r,t]=ee.useState(null),[s,i]=ee.useState(null),[a,o]=ee.useState(!0),[c,l]=ee.useState(new Date),[u,d]=ee.useState(!0);ee.useEffect(()=>{if(A(),u){const g=setInterval(()=>{A()},3e4);return()=>clearInterval(g)}},[u]);const A=async()=>{try{const[g,b]=await Promise.all([Dt.getSystemStats(),Dt.getSystemHealth()]);g.success&&t(g.data),b.success&&i(b.data),l(new Date)}catch(g){console.error("Failed to fetch system data:",g)}finally{o(!1)}},f=g=>{const b=Math.floor(g/86400),v=Math.floor(g%(1440*60)/3600),y=Math.floor(g%3600/60);return b>0?`${b}d ${v}h ${y}m`:v>0?`${v}h ${y}m`:`${y}m`},p=g=>{const b=["Bytes","KB","MB","GB"];if(g===0)return"0 Bytes";const v=Math.floor(Math.log(g)/Math.log(1024));return Math.round(g/Math.pow(1024,v)*100)/100+" "+b[v]},m=g=>{const b={healthy:{color:"text-green-600",bg:"bg-green-50",icon:Xr},warning:{color:"text-yellow-600",bg:"bg-yellow-50",icon:Sa},critical:{color:"text-red-600",bg:"bg-red-50",icon:Sa}};return b[g]||b.warning};return a?n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((g,b)=>n.jsx("div",{className:"h-32 bg-gray-300 rounded-lg"},b))})]})}):n.jsxs("div",{className:"p-6 space-y-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Monitoring"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Real-time system health and performance metrics"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",c.toLocaleTimeString()]}),n.jsxs("button",{onClick:()=>d(!u),className:`px-4 py-2 rounded-lg font-medium ${u?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:["Auto-refresh ",u?"ON":"OFF"]}),n.jsxs("button",{onClick:A,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[n.jsx(sc,{className:"w-4 h-4"}),n.jsx("span",{children:"Refresh"})]})]})]}),s&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"System Health"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[Ft.createElement(m(s.overallStatus).icon,{className:`w-5 h-5 ${m(s.overallStatus).color}`}),n.jsx("span",{className:`font-medium ${m(s.overallStatus).color}`,children:s.overallStatus.toUpperCase()})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx(Lk,{className:"w-8 h-8 text-blue-600"}),n.jsx("span",{className:"text-xs font-medium text-green-600",children:"HEALTHY"})]}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Database"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Response: ",s.database.responseTime,"ms"]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx(AR,{className:"w-8 h-8 text-purple-600"}),n.jsxs("span",{className:"text-xs font-medium text-blue-600",children:[Math.round(s.memory.heapUsed/s.memory.heapTotal*100),"%"]})]}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Memory"}),n.jsxs("p",{className:"text-sm text-gray-600",children:[p(s.memory.heapUsed)," / ",p(s.memory.heapTotal)]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx(is,{className:"w-8 h-8 text-green-600"}),n.jsx("span",{className:"text-xs font-medium text-green-600",children:"STABLE"})]}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Uptime"}),n.jsx("p",{className:"text-sm text-gray-600",children:f(s.uptime)})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx(NR,{className:"w-8 h-8 text-gray-600"}),n.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["v",s.version.replace("v","")]})]}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Runtime"}),n.jsx("p",{className:"text-sm text-gray-600",children:s.platform})]})]}),s.criticalIssues&&s.criticalIssues.length>0&&n.jsxs("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(Sa,{className:"w-5 h-5 text-red-600 mr-2"}),n.jsx("h3",{className:"font-semibold text-red-800",children:"Critical Issues"})]}),n.jsx("ul",{className:"list-disc list-inside space-y-1",children:s.criticalIssues.map((g,b)=>n.jsx("li",{className:"text-red-700 text-sm",children:g},b))})]})]}),r&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Users"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.totals.users.toLocaleString()}),n.jsxs("p",{className:"text-xs text-green-600",children:["+",r.active.users," active"]})]}),n.jsx(Ti,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Stores"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.totals.stores.toLocaleString()}),n.jsxs("p",{className:"text-xs text-green-600",children:["+",r.active.stores," active"]})]}),n.jsx(yl,{className:"w-8 h-8 text-green-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Br(r.totals.revenue)}),n.jsx("p",{className:"text-xs text-gray-500",children:"All time"})]}),n.jsx(fl,{className:"w-8 h-8 text-yellow-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Orders"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.totals.orders.toLocaleString()}),n.jsxs("p",{className:"text-xs text-blue-600",children:["+",r.totals.bookings," bookings"]})]}),n.jsx(cy,{className:"w-8 h-8 text-purple-500"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Last 24 Hours"}),n.jsx(ti,{className:"w-5 h-5 text-green-500"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"New Users"}),n.jsx("span",{className:"font-semibold",children:r.recent24h.users})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"New Stores"}),n.jsx("span",{className:"font-semibold",children:r.recent24h.stores})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Orders"}),n.jsx("span",{className:"font-semibold",children:r.recent24h.orders})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Bookings"}),n.jsx("span",{className:"font-semibold",children:r.recent24h.bookings})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Content"}),n.jsx(Ta,{className:"w-5 h-5 text-blue-500"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Products"}),n.jsx("span",{className:"font-semibold",children:r.totals.products.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Services"}),n.jsx("span",{className:"font-semibold",children:r.totals.services.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Posts"}),n.jsx("span",{className:"font-semibold",children:r.totals.posts.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Reviews"}),n.jsx("span",{className:"font-semibold",children:r.totals.reviews.toLocaleString()})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Communication"}),n.jsx(UR,{className:"w-5 h-5 text-purple-500"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Total Chats"}),n.jsx("span",{className:"font-semibold",children:r.totals.chats.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Notifications"}),n.jsx("span",{className:"font-semibold",children:r.totals.notifications.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Active Users"}),n.jsx("span",{className:"font-semibold text-green-600",children:r.active.users.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Active Stores"}),n.jsx("span",{className:"font-semibold text-green-600",children:r.active.stores.toLocaleString()})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"System Status"}),n.jsx(Xr,{className:"w-5 h-5 text-green-500"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Database Status"}),n.jsx("span",{className:"font-semibold text-green-600",children:"Healthy"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"API Response"}),n.jsxs("span",{className:"font-semibold text-blue-600",children:[s?.database.responseTime||0,"ms"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Memory Usage"}),n.jsxs("span",{className:"font-semibold text-yellow-600",children:[s?Math.round(s.memory.heapUsed/s.memory.heapTotal*100):0,"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Uptime"}),n.jsx("span",{className:"font-semibold text-green-600",children:s?f(s.uptime):"Unknown"})]})]})]})]})]})]})},Wl=r=>new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR",minimumFractionDigits:2}).format(r),AO=r=>new Date(r).toLocaleDateString("en-LK",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),hJ=r=>({sale:"text-green-600 bg-green-50",withdrawal:"text-red-600 bg-red-50",refund:"text-orange-600 bg-orange-50",adjustment:"text-blue-600 bg-blue-50"})[r]||"text-gray-600 bg-gray-50",fJ=r=>({completed:"text-green-600 bg-green-50",pending:"text-yellow-600 bg-yellow-50",approved:"text-blue-600 bg-blue-50",rejected:"text-red-600 bg-red-50",processing:"text-purple-600 bg-purple-50",active:"text-green-600 bg-green-50",inactive:"text-red-600 bg-red-50",cancelled:"text-gray-600 bg-gray-50"})[r]||"text-gray-600 bg-gray-50",pJ=({collection:r,title:t,columns:s=[],searchFields:i=["name"],filterField:a="isActive",onItemSelect:o,onItemEdit:c,onItemCreate:l,canCreate:u=!0,canEdit:d=!0,canDelete:A=!0,canExport:f=!0})=>{const[p,m]=ee.useState([]),[g,b]=ee.useState(!0),[v,y]=ee.useState(""),[w,j]=ee.useState(""),[C,B]=ee.useState(""),[E,_]=ee.useState("all"),[S,N]=ee.useState("createdAt"),[O,k]=ee.useState("desc"),[I,R]=ee.useState(1),[Q]=ee.useState(20),[$,L]=ee.useState(0),[F,G]=ee.useState([]),[X,q]=ee.useState(!1),[T,U]=ee.useState(!1);ee.useEffect(()=>{K()},[r,I,C,E,S,O]),ee.useEffect(()=>{q(F.length>0)},[F]);const K=async()=>{try{b(!0),y("");const we={page:I,limit:Q,search:C,status:E,sortBy:S,sortOrder:O},Fe=await Dt.getCollectionData(r,we);Fe.success?(m(Fe.data.items||[]),L(Fe.data.pagination?.total||0)):y("Failed to fetch data")}catch(we){console.error("Fetch error:",we),y(we.message||"Failed to fetch data")}finally{b(!1)}},z=we=>{S===we?k(O==="asc"?"desc":"asc"):(N(we),k("asc")),R(1)},M=we=>{B(we),R(1)},H=we=>{_(we),R(1)},Y=we=>{F.includes(we)?G(F.filter(Fe=>Fe!==we)):G([...F,we])},ae=()=>{F.length===p.length?G([]):G(p.map(we=>we._id))},oe=async we=>{if(F.length!==0)try{U(!0),y(""),(await Dt.bulkOperation(r,we,F)).success?(j(`Bulk ${we} completed successfully`),G([]),await K(),setTimeout(()=>j(""),3e3)):(y(`Bulk ${we} failed`),setTimeout(()=>y(""),5e3))}catch(Fe){console.error("Bulk action error:",Fe),y(Fe.message||`Bulk ${we} failed`),setTimeout(()=>y(""),5e3)}finally{U(!1)}},be=async we=>{if(window.confirm("Are you sure you want to delete this item?"))try{U(!0),(await Dt.deleteCollectionItem(r,we)).success?(j("Item deleted successfully"),await K(),setTimeout(()=>j(""),3e3)):(y("Failed to delete item"),setTimeout(()=>y(""),5e3))}catch(Fe){y(Fe.message||"Failed to delete item"),setTimeout(()=>y(""),5e3)}finally{U(!1)}},ge=async we=>{try{U(!0),(await Dt.toggleItemStatus(r,we)).success?(j("Status updated successfully"),await K(),setTimeout(()=>j(""),3e3)):(y("Failed to update status"),setTimeout(()=>y(""),5e3))}catch(Fe){y(Fe.message||"Failed to update status"),setTimeout(()=>y(""),5e3)}finally{U(!1)}},he=async()=>{try{U(!0);const we=await Dt.exportCollectionData(r,"csv");Dt.downloadCSV(we,r),j("Data exported successfully"),setTimeout(()=>j(""),3e3)}catch(we){y(we.message||"Export failed"),setTimeout(()=>y(""),5e3)}finally{U(!1)}},ke=(we,Fe)=>{const _e=we[Fe.key];switch(Fe.type){case"date":return AO(_e);case"currency":return Br(_e);case"boolean":return _e?n.jsx(Xr,{className:"w-4 h-4 text-green-500"}):n.jsx(mo,{className:"w-4 h-4 text-red-500"});case"status":return n.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Z(_e)}`,children:[te(_e),n.jsx("span",{className:"ml-1 capitalize",children:_e})]});case"image":return _e?n.jsx("img",{src:_e,alt:"Item",className:"w-8 h-8 rounded object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded"});case"object":return _e?.name||_e?.title||JSON.stringify(_e);case"array":return Array.isArray(_e)?`${_e.length} items`:"0 items";default:return _e||"N/A"}},Z=we=>({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",processing:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[we]||"bg-gray-100 text-gray-800",te=we=>({active:n.jsx(Xr,{className:"w-3 h-3"}),inactive:n.jsx(mo,{className:"w-3 h-3"}),pending:n.jsx(is,{className:"w-3 h-3"}),processing:n.jsx(Sa,{className:"w-3 h-3"}),completed:n.jsx(Xr,{className:"w-3 h-3"}),approved:n.jsx(Xr,{className:"w-3 h-3"}),rejected:n.jsx(mo,{className:"w-3 h-3"})})[we]||n.jsx(is,{className:"w-3 h-3"}),fe=Math.ceil($/Q);return g&&p.length===0?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(cs,{size:"lg"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t}),n.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage ",r.replace("all-","").replace("-"," ")," data"]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("button",{onClick:K,disabled:g,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[n.jsx(sc,{className:`w-4 h-4 ${g?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]}),f&&n.jsxs("button",{onClick:he,disabled:T,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50",children:[n.jsx(Dc,{className:"w-4 h-4"}),n.jsx("span",{children:"Export"})]}),u&&l&&n.jsxs("button",{onClick:l,className:"flex items-center space-x-2 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800",children:[n.jsx(Ua,{className:"w-4 h-4"}),n.jsx("span",{children:"Add New"})]})]})]}),v&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Sa,{className:"h-5 w-5 text-red-600 mr-2"}),n.jsx("span",{className:"text-red-800",children:v})]})}),w&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"h-5 w-5 text-green-600 mr-2"}),n.jsx("span",{className:"text-green-800",children:w})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:`Search ${r.replace("all-","").replace("-"," ")}...`,value:C,onChange:we=>M(we.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(lA,{className:"w-5 h-5 text-gray-400"}),n.jsxs("select",{value:E,onChange:we=>H(we.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),X&&n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[F.length," item",F.length>1?"s":""," selected"]}),n.jsx("button",{onClick:()=>G([]),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear selection"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>oe("toggle-status"),disabled:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm font-medium",children:"Toggle Status"}),A&&n.jsx("button",{onClick:()=>oe("delete"),disabled:T,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 text-sm font-medium",children:"Delete Selected"})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left",children:n.jsx("input",{type:"checkbox",checked:F.length===p.length&&p.length>0,onChange:ae,className:"rounded border-gray-300 text-black focus:ring-black"})}),s.map(we=>n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>we.sortable!==!1&&z(we.key),children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("span",{children:we.label}),we.sortable!==!1&&n.jsx(Mg,{className:"w-4 h-4"})]})},we.key)),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:s.length+2,className:"px-6 py-16 text-center text-gray-500",children:"No data found"})}):p.map(we=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsx("input",{type:"checkbox",checked:F.includes(we._id),onChange:()=>Y(we._id),className:"rounded border-gray-300 text-black focus:ring-black"})}),s.map(Fe=>n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ke(we,Fe)},Fe.key)),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>o&&o(we),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:n.jsx(Gn,{className:"w-4 h-4"})}),d&&c&&n.jsx("button",{onClick:()=>c(we),className:"text-green-600 hover:text-green-900",title:"Edit",children:n.jsx(rA,{className:"w-4 h-4"})}),a==="isActive"&&n.jsx("button",{onClick:()=>ge(we._id),className:"text-yellow-600 hover:text-yellow-900",title:"Toggle Status",children:n.jsx(Ch,{className:"w-4 h-4"})}),A&&n.jsx("button",{onClick:()=>be(we._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Rc,{className:"w-4 h-4"})})]})})]},we._id))})]})}),fe>1&&n.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:[n.jsxs("div",{className:"flex justify-between flex-1 sm:hidden",children:[n.jsx("button",{onClick:()=>R(Math.max(1,I-1)),disabled:I===1,className:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),n.jsx("button",{onClick:()=>R(Math.min(fe,I+1)),disabled:I===fe,className:"relative ml-3 inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),n.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[n.jsx("div",{children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",n.jsx("span",{className:"font-medium",children:(I-1)*Q+1})," "," to"," ",n.jsx("span",{className:"font-medium",children:Math.min(I*Q,$)})," "," of"," ",n.jsx("span",{className:"font-medium",children:$})," "," results"]})}),n.jsx("div",{children:n.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[n.jsx("button",{onClick:()=>R(Math.max(1,I-1)),disabled:I===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:n.jsx(oA,{className:"h-5 w-5","aria-hidden":"true"})}),Array.from({length:Math.min(5,fe)},(we,Fe)=>{const _e=Fe+Math.max(1,I-2);return _e<=fe?n.jsx("button",{onClick:()=>R(_e),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${_e===I?"z-10 bg-black text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:_e},_e):null}),n.jsx("button",{onClick:()=>R(Math.min(fe,I+1)),disabled:I===fe,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:n.jsx(Jl,{className:"h-5 w-5","aria-hidden":"true"})})]})})]})]})]})]})},mJ=()=>{const[r,t]=ee.useState(null),[s,i]=ee.useState(!0),[a,o]=ee.useState(""),[c,l]=ee.useState("30"),[u,d]=ee.useState(!1);ee.useEffect(()=>{A()},[c]);const A=async()=>{try{i(!0),o("");const y=await Dt.getAnalyticsDashboard(c);y.success?t(y.data):o("Failed to fetch analytics data")}catch(y){console.error("Analytics fetch error:",y),o(y.message||"Failed to fetch analytics data")}finally{i(!1)}},f=async()=>{d(!0),await A(),d(!1)},p=async()=>{try{const y=m();g(y,`analytics_${c}days`)}catch{o("Failed to export analytics data")}},m=()=>{if(!r)return"";let y=`Date,New Users,New Stores,Orders,Revenue
`;const w=new Map;return r.userGrowth.forEach(j=>{w.has(j._id)||w.set(j._id,{}),w.get(j._id).users=j.count}),r.storeGrowth.forEach(j=>{w.has(j._id)||w.set(j._id,{}),w.get(j._id).stores=j.count}),r.revenueTrends.forEach(j=>{w.has(j._id)||w.set(j._id,{}),w.get(j._id).revenue=j.revenue}),w.forEach((j,C)=>{y+=`${C},${j.users||0},${j.stores||0},${j.orders||0},${j.revenue||0}
`}),y},g=(y,w)=>{const j=new Blob([y],{type:"text/csv"}),C=window.URL.createObjectURL(j),B=document.createElement("a");B.href=C,B.download=`${w}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(B),B.click(),document.body.removeChild(B),window.URL.revokeObjectURL(C)},b=y=>{if(!y||y.length<2)return 0;const w=y[y.length-1]?.count||0,j=y[y.length-2]?.count||0;return j===0?0:((w-j)/j*100).toFixed(1)},v=(y,w)=>y.reduce((j,C)=>j+(C[w]||0),0);return s?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(cs,{size:"xl"})}):a?n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsx("p",{className:"text-red-800",children:a})})}):n.jsxs("div",{className:"p-6 space-y-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Advanced Analytics"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive business intelligence and insights"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ms,{className:"w-4 h-4 text-gray-500"}),n.jsxs("select",{value:c,onChange:y=>l(y.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black",children:[n.jsx("option",{value:"7",children:"Last 7 days"}),n.jsx("option",{value:"30",children:"Last 30 days"}),n.jsx("option",{value:"90",children:"Last 90 days"}),n.jsx("option",{value:"365",children:"Last year"})]})]}),n.jsxs("button",{onClick:p,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:[n.jsx(Dc,{className:"w-4 h-4"}),n.jsx("span",{children:"Export"})]}),n.jsxs("button",{onClick:f,disabled:u,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[n.jsx(sc,{className:`w-4 h-4 ${u?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]})]})]}),r&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"New Users"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:v(r.userGrowth,"count")}),n.jsxs("div",{className:"flex items-center mt-2",children:[b(r.userGrowth)>=0?n.jsx(ti,{className:"w-4 h-4 text-green-500 mr-1"}):n.jsx(m0,{className:"w-4 h-4 text-red-500 mr-1"}),n.jsxs("span",{className:`text-sm font-medium ${b(r.userGrowth)>=0?"text-green-600":"text-red-600"}`,children:[Math.abs(b(r.userGrowth)),"%"]}),n.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs previous period"})]})]}),n.jsx(Ti,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"New Stores"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:v(r.storeGrowth,"count")}),n.jsxs("div",{className:"flex items-center mt-2",children:[b(r.storeGrowth)>=0?n.jsx(ti,{className:"w-4 h-4 text-green-500 mr-1"}):n.jsx(m0,{className:"w-4 h-4 text-red-500 mr-1"}),n.jsxs("span",{className:`text-sm font-medium ${b(r.storeGrowth)>=0?"text-green-600":"text-red-600"}`,children:[Math.abs(b(r.storeGrowth)),"%"]}),n.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs previous period"})]})]}),n.jsx(yl,{className:"w-8 h-8 text-green-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),n.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:Br(v(r.revenueTrends,"revenue"))}),n.jsxs("div",{className:"flex items-center mt-2",children:[n.jsx(ti,{className:"w-4 h-4 text-green-500 mr-1"}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:"15.3%"}),n.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs previous period"})]})]}),n.jsx(fl,{className:"w-8 h-8 text-yellow-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Avg Order Value"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Br(r.orderTrends.length>0?v(r.orderTrends,"revenue")/v(r.orderTrends,"count"):0)}),n.jsxs("div",{className:"flex items-center mt-2",children:[n.jsx(mp,{className:"w-4 h-4 text-blue-500 mr-1"}),n.jsx("span",{className:"text-sm text-gray-500",children:"per transaction"})]})]}),n.jsx(mp,{className:"w-8 h-8 text-purple-500"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Growth Trend"}),n.jsx(Qk,{className:"w-5 h-5 text-blue-500"})]}),n.jsx("div",{className:"space-y-4",children:r.userGrowth.slice(-10).map((y,w)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:y._id})]}),n.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[y.count," users"]})]},y._id))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Revenue Trend"}),n.jsx(qM,{className:"w-5 h-5 text-green-500"})]}),n.jsx("div",{className:"space-y-4",children:r.revenueTrends.slice(-10).map((y,w)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:y._id})]}),n.jsx("span",{className:"text-sm font-semibold text-gray-900",children:Br(y.revenue)})]},y._id))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Categories"}),n.jsx(Hk,{className:"w-5 h-5 text-purple-500"})]}),n.jsx("div",{className:"space-y-4",children:r.topCategories.map((y,w)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:w+1}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:y._id}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Avg: ",Br(y.avgPrice)]})]})]}),n.jsxs("span",{className:"text-sm font-semibold text-purple-600",children:[y.count," items"]})]},y._id))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Performing Stores"}),n.jsx(ho,{className:"w-5 h-5 text-yellow-500"})]}),n.jsx("div",{className:"space-y-4",children:r.topStores.map((y,w)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-6 h-6 bg-yellow-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:w+1}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:y.store?.[0]?.name||"Unknown Store"}),n.jsxs("p",{className:"text-xs text-gray-500",children:[y.orders," orders"]})]})]}),n.jsx("span",{className:"text-sm font-semibold text-yellow-600",children:Br(y.revenue)})]},y._id))})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Order Status Distribution"}),n.jsx(cy,{className:"w-5 h-5 text-gray-500"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.orderTrends.reduce((y,w)=>{const j=w._id.status;return y[j]||(y[j]={count:0,revenue:0}),y[j].count+=w.count,y[j].revenue+=w.revenue,y},{})&&Object.entries(r.orderTrends.reduce((y,w)=>{const j=w._id.status;return y[j]||(y[j]={count:0,revenue:0}),y[j].count+=w.count,y[j].revenue+=w.revenue,y},{})).map(([y,w])=>n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 capitalize",children:y}),n.jsx(Ta,{className:"w-4 h-4 text-blue-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.count}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Br(w.revenue)," revenue"]})]},y))})]}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Performance Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Growth Rate"}),n.jsxs("p",{className:"text-2xl font-bold",children:[b(r.userGrowth),"%"]}),n.jsx("p",{className:"text-sm opacity-75",children:"User acquisition growth"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Market Expansion"}),n.jsx("p",{className:"text-2xl font-bold",children:v(r.storeGrowth,"count")}),n.jsx("p",{className:"text-sm opacity-75",children:"New stores onboarded"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Revenue Impact"}),n.jsx("p",{className:"text-2xl font-bold",children:Br(v(r.revenueTrends,"revenue"))}),n.jsx("p",{className:"text-sm opacity-75",children:"Total revenue generated"})]})]})]})]})]})};class gJ extends Ft.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,s){this.setState({error:t,errorInfo:s})}handleRetry=()=>{this.setState(t=>({hasError:!1,error:null,errorInfo:null,retryCount:t.retryCount+1}))};handleGoHome=()=>{window.location.href="/admin"};render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:n.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(Sa,{className:"w-8 h-8 text-red-600"})})}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oops! Something went wrong"}),n.jsx("p",{className:"text-gray-600",children:"The admin dashboard encountered an unexpected error. Our team has been notified and is working on a fix."})]}),!1,n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsxs("button",{onClick:this.handleRetry,disabled:this.state.retryCount>=3,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx(sc,{className:"w-4 h-4 mr-2"}),this.state.retryCount>=3?"Max Retries Reached":"Try Again"]}),n.jsxs("button",{onClick:this.handleGoHome,className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[n.jsx(Mk,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]})]}),n.jsxs("div",{className:"mt-6 text-center",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"If this problem persists, please contact the system administrator."}),this.state.retryCount>0&&n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Retry attempts: ",this.state.retryCount,"/3"]})]})]})}):this.props.children}}const yJ=r=>new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR"}).format(r),Ql=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",NC=r=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",processing:"bg-blue-100 text-blue-800 border-blue-200",completed:"bg-gray-100 text-gray-800 border-gray-200",active:"bg-green-100 text-green-800 border-green-200",inactive:"bg-red-100 text-red-800 border-red-200",verified:"bg-blue-100 text-blue-800 border-blue-200",unverified:"bg-gray-100 text-gray-800 border-gray-200"})[r]||"bg-gray-100 text-gray-800 border-gray-200",SC=r=>({pending:n.jsx(is,{className:"w-4 h-4"}),approved:n.jsx(Xr,{className:"w-4 h-4"}),rejected:n.jsx(mo,{className:"w-4 h-4"}),processing:n.jsx(Sa,{className:"w-4 h-4"}),completed:n.jsx(Xa,{className:"w-4 h-4"}),active:n.jsx(Xr,{className:"w-4 h-4"}),inactive:n.jsx(mo,{className:"w-4 h-4"}),verified:n.jsx(Wu,{className:"w-4 h-4"}),unverified:n.jsx(Sa,{className:"w-4 h-4"})})[r]||n.jsx(is,{className:"w-4 h-4"}),xJ=()=>{const{user:r}=Fn(),[t,s]=ee.useState("dashboard"),[i,a]=ee.useState(!0),[o,c]=ee.useState(null),[l,u]=ee.useState(""),[d,A]=ee.useState({totalUsers:0,totalStores:0,totalProducts:0,totalServices:0,totalOrders:0,totalBookings:0,totalRevenue:0,activeUsers:0,pendingStores:0,pendingWithdrawals:0}),[f,p]=ee.useState({users:[],stores:[],products:[],services:[],orders:[],bookings:[],withdrawals:[],categories:[],analytics:{}}),[m,g]=ee.useState(""),[b,v]=ee.useState("all"),[y,w]=ee.useState("createdAt"),[j,C]=ee.useState("desc"),[B,E]=ee.useState(1),[_]=ee.useState(10),[S,N]=ee.useState([]),[O,k]=ee.useState(!1),[I,R]=ee.useState(null),[Q,$]=ee.useState(!1),[L,F]=ee.useState("view"),[G,X]=ee.useState(!1),[q,T]=ee.useState([]);ee.useEffect(()=>{r?.email==="admin@aio.com"&&U()},[r,t]),ee.useEffect(()=>{const je=setInterval(()=>{r?.email==="admin@aio.com"&&t==="dashboard"&&K()},3e4);return()=>clearInterval(je)},[r,t]);const U=async()=>{try{a(!0),c(null);let je=[];switch(t){case"dashboard":je=[K(),Z()];break;case"users":je=[z()];break;case"stores":je=[M()];break;case"products":je=[H()];break;case"services":je=[Y()];break;case"orders":je=[ae()];break;case"bookings":je=[oe()];break;case"withdrawals":je=[be()];break;case"categories":je=[ge()];break;case"analytics":je=[he()];break;case"audit":je=[ke()];break;default:je=[K()]}await Promise.all(je)}catch(je){console.error("Error fetching admin data:",je),c("Failed to fetch admin data. Please try again.")}finally{a(!1)}},K=async()=>{try{const[je,Pe,Te,Ye,He,it,It]=await Promise.all([Dt.getAllUsers({limit:100}),Dt.getAllStores({limit:100}),Dt.getAllProducts({limit:100}),Dt.getAllServices({limit:100}),Dt.getAllOrders({limit:100}),Dt.getAllBookings({limit:100}),Dt.getAllWithdrawals({status:"",page:1,limit:1})]),dt=je.success?je.data.items||[]:[],Pt=Pe.success?Pe.data.items||[]:[],vt=Te.success?Te.data.items||[]:[],tr=Ye.success?Ye.data.items||[]:[],Jt=He.success?He.data.items||[]:[],Et=it.success?it.data.items||[]:[],ur=It.success?It.data:{withdrawals:[],pagination:{total:0}},vr=[...Jt||[],...Et||[]].filter(Wt=>Wt.status==="completed").reduce((Wt,Gt)=>Wt+(Gt.totalAmount||0),0);A({totalUsers:dt.length||0,totalStores:Pt.length||0,totalProducts:vt.length||0,totalServices:tr.length||0,totalOrders:Jt.length||0,totalBookings:Et.length||0,totalRevenue:vr,activeUsers:dt.filter(Wt=>Wt.isActive).length||0,pendingStores:Pt.filter(Wt=>!Wt.isVerified).length||0,pendingWithdrawals:ur.withdrawals.filter(Wt=>Wt.status==="pending").length||0})}catch(je){console.error("Error fetching stats:",je)}},z=async()=>{try{const je=await Dt.getAllUsers({limit:1e3});if(je.success){const Pe=je.data.items||[];p(Te=>({...Te,users:Pe}))}}catch(je){console.error("Error fetching users:",je)}},M=async()=>{try{const je=await Dt.getAllStores({limit:1e3});if(je.success){const Pe=je.data.items||[];p(Te=>({...Te,stores:Pe}))}}catch(je){console.error("Error fetching stores:",je)}},H=async()=>{try{const je=await Dt.getAllProducts({limit:1e3});if(je.success){const Pe=je.data.items||[];p(Te=>({...Te,products:Pe}))}}catch(je){console.error("Error fetching products:",je)}},Y=async()=>{try{const je=await Dt.getAllServices({limit:1e3});if(je.success){const Pe=je.data.items||[];p(Te=>({...Te,services:Pe}))}}catch(je){console.error("Error fetching services:",je)}},ae=async()=>{try{const je=await Dt.getAllOrders({limit:1e3});if(je.success){const Pe=je.data.items||[];p(Te=>({...Te,orders:Pe}))}}catch(je){console.error("Error fetching orders:",je)}},oe=async()=>{try{const je=await Dt.getAllBookings({limit:1e3});if(je.success){const Pe=je.data.items||[];p(Te=>({...Te,bookings:Pe}))}}catch(je){console.error("Error fetching bookings:",je)}},be=async()=>{try{const je=await Dt.getAllWithdrawals({status:b==="all"?"":b,search:m,sortBy:y,sortOrder:j,page:B,limit:_});je.success&&p(Pe=>({...Pe,withdrawals:je.data.withdrawals}))}catch(je){console.error("Error fetching withdrawals:",je)}},ge=async()=>{try{const je=await Dt.getAllCategories({limit:1e3});if(je.success){const Pe=je.data.items||[];p(Te=>({...Te,categories:Pe}))}}catch(je){console.error("Error fetching categories:",je)}},he=async()=>{try{const je=await Dt.getAnalyticsDashboard(30);if(je.success){const Pe=je.data;p(Te=>({...Te,analytics:Pe}))}}catch(je){console.error("Error fetching analytics:",je)}},ke=async()=>{},Z=async()=>{},te=async(je,Pe,Te=null,Ye=null)=>{try{X(!0);let He=`http://localhost:10000/api/${Pe}`,it="GET",It=null;switch(je){case"create":it="POST",It=JSON.stringify(Ye);break;case"update":He+=`/${Te}`,it="PUT",It=JSON.stringify(Ye);break;case"delete":He+=`/${Te}`,it="DELETE";break;case"toggle-status":He+=`/${Te}/toggle-status`,it="PATCH";break;case"verify":He+=`/${Te}/verify`,it="PATCH";break}const dt=await fetch(He,{method:it,credentials:"include",headers:{"Content-Type":"application/json"},body:It});if(dt.ok)Fe(je,Pe,Te,Ye),await U(),$(!1),R(null),u(`${je} operation completed successfully`),setTimeout(()=>u(""),3e3);else{const Pt=await dt.json();c(`Error: ${Pt.message||"Operation failed"}`),setTimeout(()=>c(""),5e3)}}catch(He){console.error("CRUD operation error:",He),c("Network error occurred"),setTimeout(()=>c(""),5e3)}finally{X(!1)}},fe=async(je,Pe,Te="")=>{try{X(!0),(await Dt.processWithdrawal(je,{action:Pe,adminNotes:Te})).success&&(await be(),$(!1),R(null),u(`Withdrawal ${Pe} successfully`),setTimeout(()=>u(""),3e3))}catch(Ye){console.error("Failed to process withdrawal:",Ye),c("Failed to process withdrawal. Please try again."),setTimeout(()=>c(""),5e3)}finally{X(!1)}},we=async(je,Pe)=>{try{X(!0);const Te=Pe.map(Ye=>te(je,t.slice(0,-1),Ye));await Promise.all(Te),N([]),k(!1),u(`Bulk ${je} completed successfully`),setTimeout(()=>u(""),3e3)}catch(Te){console.error("Bulk operation error:",Te),c("Bulk operation failed"),setTimeout(()=>c(""),5e3)}finally{X(!1)}},Fe=(je,Pe,Te,Ye)=>{const He={id:Date.now(),timestamp:new Date().toISOString(),user:r.email,action:je,type:Pe,itemId:Te,data:Ye?JSON.stringify(Ye):null};T(it=>[He,...it.slice(0,99)])},_e=async(je,Pe)=>{const Te=`${window.location.origin}/store/${je}`,Ye=`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(Te)}`;try{const it=await(await fetch(Ye)).blob(),It=window.URL.createObjectURL(it),dt=document.createElement("a");dt.href=It,dt.download=`${Pe.replace(/\s+/g,"-").toLowerCase()}-qr-code.png`,document.body.appendChild(dt),dt.click(),document.body.removeChild(dt),window.URL.revokeObjectURL(It),u("QR Code downloaded successfully"),setTimeout(()=>u(""),3e3)}catch(He){console.error("Error downloading QR code:",He),c("Failed to download QR code"),setTimeout(()=>c(""),5e3)}},Ce=je=>{try{const Pe=f[je]||[];if(Pe.length===0){c("No data to export"),setTimeout(()=>c(""),3e3);return}let Te="",Ye=[];switch(je){case"users":Ye=["Name","Email","Role","Status","Created Date"],Te=[Ye,...Pe.map(dt=>[dt.name||"",dt.email||"",dt.role||"",dt.isActive?"Active":"Inactive",Ql(dt.createdAt)])].map(dt=>dt.join(",")).join(`
`);break;case"stores":Ye=["Store Name","Type","Owner","Status","Verified","Created Date"],Te=[Ye,...Pe.map(dt=>[dt.name||"",dt.type||"",dt.ownerId?.name||"",dt.isActive?"Active":"Inactive",dt.isVerified?"Verified":"Unverified",Ql(dt.createdAt)])].map(dt=>dt.join(",")).join(`
`);break;case"withdrawals":Ye=["Store Name","Email","Amount","Status","Requested Date","Bank","Account"],Te=[Ye,...Pe.map(dt=>[dt.userId?.name||"Unknown",dt.userId?.email||"No email",dt.amount||0,dt.status||"Unknown",Ql(dt.createdAt),dt.withdrawalDetails?.bankAccountId?.bankName||"Unknown Bank",dt.withdrawalDetails?.bankAccountId?.accountNumber||"Unknown Account"])].map(dt=>dt.join(",")).join(`
`);break;default:Ye=["ID","Name","Status","Created Date"],Te=[Ye,...Pe.map(dt=>[dt._id||"",dt.name||dt.title||"",dt.isActive?"Active":"Inactive",Ql(dt.createdAt)])].map(dt=>dt.join(",")).join(`
`)}const He=new Blob([Te],{type:"text/csv"}),it=URL.createObjectURL(He),It=document.createElement("a");It.href=it,It.download=`${je}_export_${new Date().toISOString().split("T")[0]}.csv`,It.click(),URL.revokeObjectURL(it),u(`${je} data exported successfully`),setTimeout(()=>u(""),3e3)}catch(Pe){console.error("Export failed:",Pe),c("Failed to export data. Please try again."),setTimeout(()=>c(""),5e3)}},ie=ee.useMemo(()=>(f[t]||[]).filter(Pe=>{const Te=!m||Pe.name&&Pe.name.toLowerCase().includes(m.toLowerCase())||Pe.title&&Pe.title.toLowerCase().includes(m.toLowerCase())||Pe.email&&Pe.email.toLowerCase().includes(m.toLowerCase()),Ye=b==="all"||Pe.status===b||Pe.isActive===(b==="active")||Pe.isVerified===(b==="verified");return Te&&Ye}).sort((Pe,Te)=>{const Ye=Pe[y]||"",He=Te[y]||"",it=j==="asc"?1:-1;return Ye>He?it:-it}),[f,t,m,b,y,j]),me=ee.useMemo(()=>{const je=(B-1)*_;return ie.slice(je,je+_)},[ie,B,_]),Be=Math.ceil(ie.length/_),Le=(je,Pe=null)=>{F(je),R(Pe),$(!0)},ve=je=>({users:{collection:"all-users",title:"User Management",columns:[{key:"name",label:"Name",type:"text"},{key:"email",label:"Email",type:"text"},{key:"role",label:"Role",type:"text"},{key:"isActive",label:"Status",type:"boolean"},{key:"createdAt",label:"Created",type:"date"}],searchFields:["name","email"],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!1},stores:{collection:"all-stores",title:"Store Management",columns:[{key:"name",label:"Store Name",type:"text"},{key:"type",label:"Type",type:"text"},{key:"ownerId.name",label:"Owner",type:"object"},{key:"isVerified",label:"Verified",type:"boolean"},{key:"isActive",label:"Status",type:"boolean"},{key:"createdAt",label:"Created",type:"date"}],searchFields:["name","email"],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!1},products:{collection:"all-products",title:"Product Management",columns:[{key:"title",label:"Product Name",type:"text"},{key:"category",label:"Category",type:"text"},{key:"price",label:"Price",type:"currency"},{key:"storeId.name",label:"Store",type:"object"},{key:"isActive",label:"Status",type:"boolean"},{key:"createdAt",label:"Created",type:"date"}],searchFields:["title","description"],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!0},services:{collection:"all-services",title:"Service Management",columns:[{key:"title",label:"Service Name",type:"text"},{key:"category",label:"Category",type:"text"},{key:"price",label:"Price",type:"currency"},{key:"storeId.name",label:"Store",type:"object"},{key:"isActive",label:"Status",type:"boolean"},{key:"createdAt",label:"Created",type:"date"}],searchFields:["title","description"],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!0},orders:{collection:"all-orders",title:"Order Management",columns:[{key:"customerId.name",label:"Customer",type:"object"},{key:"storeId.name",label:"Store",type:"object"},{key:"totalAmount",label:"Amount",type:"currency"},{key:"status",label:"Status",type:"status"},{key:"createdAt",label:"Created",type:"date"}],searchFields:[],filterField:"status",canCreate:!1,canEdit:!0,canDelete:!1},bookings:{collection:"all-bookings",title:"Booking Management",columns:[{key:"customerId.name",label:"Customer",type:"object"},{key:"storeId.name",label:"Store",type:"object"},{key:"totalAmount",label:"Amount",type:"currency"},{key:"status",label:"Status",type:"status"},{key:"createdAt",label:"Created",type:"date"}],searchFields:[],filterField:"status",canCreate:!1,canEdit:!0,canDelete:!1},chats:{collection:"all-chats",title:"Chat Management",columns:[{key:"participants",label:"Participants",type:"array"},{key:"lastMessage",label:"Last Message",type:"text"},{key:"status",label:"Status",type:"status"},{key:"updatedAt",label:"Last Active",type:"date"}],searchFields:[],filterField:"status",canCreate:!1,canEdit:!1,canDelete:!0},posts:{collection:"all-posts",title:"Social Posts Management",columns:[{key:"userId.name",label:"Author",type:"object"},{key:"content",label:"Content",type:"text"},{key:"storeId.name",label:"Store",type:"object"},{key:"isActive",label:"Status",type:"boolean"},{key:"createdAt",label:"Created",type:"date"}],searchFields:["content"],filterField:"isActive",canCreate:!1,canEdit:!0,canDelete:!0},reviews:{collection:"all-reviews",title:"Review Management",columns:[{key:"customerId.name",label:"Reviewer",type:"object"},{key:"storeId.name",label:"Store",type:"object"},{key:"rating",label:"Rating",type:"text"},{key:"comment",label:"Comment",type:"text"},{key:"createdAt",label:"Created",type:"date"}],searchFields:["comment"],filterField:"isActive",canCreate:!1,canEdit:!0,canDelete:!0},categories:{collection:"all-categories",title:"Category Management",columns:[{key:"name",label:"Category Name",type:"text"},{key:"type",label:"Type",type:"text"},{key:"description",label:"Description",type:"text"},{key:"isActive",label:"Status",type:"boolean"},{key:"createdAt",label:"Created",type:"date"}],searchFields:["name","description"],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!0},notifications:{collection:"all-notifications",title:"Notification Management",columns:[{key:"userId.name",label:"User",type:"object"},{key:"title",label:"Title",type:"text"},{key:"type",label:"Type",type:"text"},{key:"isRead",label:"Read",type:"boolean"},{key:"createdAt",label:"Created",type:"date"}],searchFields:["title","body"],filterField:"isRead",canCreate:!0,canEdit:!0,canDelete:!0},"flash-deals":{collection:"all-flash-deals",title:"Flash Deals Management",columns:[{key:"saleName",label:"Deal Name",type:"text"},{key:"discountText",label:"Discount",type:"text"},{key:"startDate",label:"Start Date",type:"date"},{key:"endDate",label:"End Date",type:"date"},{key:"isActive",label:"Status",type:"boolean"}],searchFields:["saleName","saleSubtitle"],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!0},wallets:{collection:"all-wallets",title:"Wallet Management",columns:[{key:"userId.name",label:"User",type:"object"},{key:"balance",label:"Balance",type:"currency"},{key:"totalEarnings",label:"Total Earnings",type:"currency"},{key:"totalWithdrawals",label:"Total Withdrawals",type:"currency"},{key:"updatedAt",label:"Last Updated",type:"date"}],searchFields:[],filterField:"",canCreate:!1,canEdit:!0,canDelete:!1},packages:{collection:"all-packages",title:"Package Management",columns:[{key:"name",label:"Package Name",type:"text"},{key:"description",label:"Description",type:"text"},{key:"price",label:"Price",type:"currency"},{key:"features",label:"Features",type:"array"},{key:"isActive",label:"Status",type:"boolean"}],searchFields:["name","description"],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!0},addons:{collection:"all-addons",title:"Addon Management",columns:[{key:"name",label:"Addon Name",type:"text"},{key:"description",label:"Description",type:"text"},{key:"price",label:"Price",type:"currency"},{key:"isActive",label:"Status",type:"boolean"},{key:"createdAt",label:"Created",type:"date"}],searchFields:["name","description"],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!0},"email-subscriptions":{collection:"all-email-subscriptions",title:"Email Subscription Management",columns:[{key:"email",label:"Email",type:"text"},{key:"preferences",label:"Preferences",type:"object"},{key:"isActive",label:"Status",type:"boolean"},{key:"createdAt",label:"Subscribed",type:"date"}],searchFields:["email"],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!0},"contact-reveals":{collection:"all-contact-reveals",title:"Contact Reveal Management",columns:[{key:"customerId.name",label:"Customer",type:"object"},{key:"storeId.name",label:"Store",type:"object"},{key:"creditsUsed",label:"Credits Used",type:"text"},{key:"createdAt",label:"Revealed",type:"date"}],searchFields:[],filterField:"",canCreate:!1,canEdit:!1,canDelete:!1},subscriptions:{collection:"all-subscriptions",title:"Subscription Management",columns:[{key:"userId.name",label:"User",type:"object"},{key:"storeId.name",label:"Store",type:"object"},{key:"planType",label:"Plan",type:"text"},{key:"status",label:"Status",type:"status"},{key:"createdAt",label:"Started",type:"date"}],searchFields:[],filterField:"status",canCreate:!1,canEdit:!0,canDelete:!1},"search-history":{collection:"all-search-history",title:"Search History Management",columns:[{key:"userId.name",label:"User",type:"object"},{key:"query",label:"Search Query",type:"text"},{key:"results",label:"Results Count",type:"text"},{key:"createdAt",label:"Searched",type:"date"}],searchFields:["query"],filterField:"",canCreate:!1,canEdit:!1,canDelete:!0},"time-slots":{collection:"all-time-slots",title:"Time Slot Management",columns:[{key:"storeId.name",label:"Store",type:"object"},{key:"serviceId.title",label:"Service",type:"object"},{key:"startTime",label:"Start Time",type:"text"},{key:"endTime",label:"End Time",type:"text"},{key:"isActive",label:"Status",type:"boolean"}],searchFields:[],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!0},variants:{collection:"all-variants",title:"Product Variant Management",columns:[{key:"name",label:"Variant Name",type:"text"},{key:"productId.title",label:"Product",type:"object"},{key:"price",label:"Price",type:"currency"},{key:"stock",label:"Stock",type:"text"},{key:"isActive",label:"Status",type:"boolean"}],searchFields:["name"],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!0},"platform-settings":{collection:"all-platform-settings",title:"Platform Settings Management",columns:[{key:"key",label:"Setting Key",type:"text"},{key:"value",label:"Value",type:"text"},{key:"description",label:"Description",type:"text"},{key:"updatedAt",label:"Last Updated",type:"date"}],searchFields:["key"],filterField:"",canCreate:!0,canEdit:!0,canDelete:!0},"pending-transactions":{collection:"all-pending-transactions",title:"Pending Transaction Management",columns:[{key:"userId.name",label:"User",type:"object"},{key:"amount",label:"Amount",type:"currency"},{key:"type",label:"Type",type:"text"},{key:"status",label:"Status",type:"status"},{key:"createdAt",label:"Created",type:"date"}],searchFields:[],filterField:"status",canCreate:!1,canEdit:!0,canDelete:!0},"post-comments":{collection:"all-post-comments",title:"Post Comment Management",columns:[{key:"userId.name",label:"Author",type:"object"},{key:"postId",label:"Post",type:"text"},{key:"content",label:"Comment",type:"text"},{key:"createdAt",label:"Created",type:"date"}],searchFields:["content"],filterField:"",canCreate:!1,canEdit:!0,canDelete:!0},"post-likes":{collection:"all-post-likes",title:"Post Like Management",columns:[{key:"userId.name",label:"User",type:"object"},{key:"postId",label:"Post",type:"text"},{key:"createdAt",label:"Liked",type:"date"}],searchFields:[],filterField:"",canCreate:!1,canEdit:!1,canDelete:!0},"comment-likes":{collection:"all-comment-likes",title:"Comment Like Management",columns:[{key:"userId.name",label:"User",type:"object"},{key:"commentId",label:"Comment",type:"text"},{key:"createdAt",label:"Liked",type:"date"}],searchFields:[],filterField:"",canCreate:!1,canEdit:!1,canDelete:!0},"comment-reactions":{collection:"all-comment-reactions",title:"Comment Reaction Management",columns:[{key:"userId.name",label:"User",type:"object"},{key:"commentId",label:"Comment",type:"text"},{key:"reactionType",label:"Reaction",type:"text"},{key:"createdAt",label:"Created",type:"date"}],searchFields:[],filterField:"",canCreate:!1,canEdit:!1,canDelete:!0},"chat-analytics":{collection:"all-chat-analytics",title:"Chat Analytics Management",columns:[{key:"chatId",label:"Chat ID",type:"text"},{key:"storeId.name",label:"Store",type:"object"},{key:"messageCount",label:"Messages",type:"text"},{key:"updatedAt",label:"Last Updated",type:"date"}],searchFields:[],filterField:"",canCreate:!1,canEdit:!1,canDelete:!1},marketing:{collection:"all-marketing",title:"Marketing Campaign Management",columns:[{key:"heroImages",label:"Hero Images",type:"array"},{key:"advertisements",label:"Advertisements",type:"array"},{key:"isActive",label:"Status",type:"boolean"},{key:"createdAt",label:"Created",type:"date"}],searchFields:[],filterField:"isActive",canCreate:!0,canEdit:!0,canDelete:!0},audit:{collection:"activity-logs",title:"Admin Activity Logs",columns:[{key:"adminId",label:"Admin",type:"text"},{key:"action",label:"Action",type:"text"},{key:"target",label:"Target",type:"text"},{key:"timestamp",label:"Time",type:"date"},{key:"ip",label:"IP Address",type:"text"}],searchFields:["action","target"],filterField:"",canCreate:!1,canEdit:!1,canDelete:!1}})[je]||null;if(!r||r.email!=="admin@aio.com")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md",children:[n.jsx(Sa,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the admin panel."})]})});if(i&&t==="dashboard")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsx(cs,{size:"xl"})});const $e=[{id:"dashboard",name:"Dashboard",icon:ho,description:"Overview and quick stats"},{id:"system",name:"System Monitor",icon:$k,description:"Real-time system health"},{id:"analytics",name:"Advanced Analytics",icon:Qk,description:"Business intelligence"},{id:"users",name:"Users",icon:Ti,description:"User management"},{id:"stores",name:"Stores",icon:ei,description:"Store management"},{id:"products",name:"Products",icon:ps,description:"Product catalog"},{id:"services",name:"Services",icon:ms,description:"Service offerings"},{id:"orders",name:"Orders",icon:Hv,description:"Order management"},{id:"bookings",name:"Bookings",icon:ms,description:"Booking management"},{id:"withdrawals",name:"Withdrawals",icon:fl,description:"Withdrawal requests"},{id:"wallets",name:"Wallets",icon:Yu,description:"User wallets"},{id:"pending-transactions",name:"Pending Transactions",icon:is,description:"Pending payments"},{id:"chats",name:"Chats",icon:Ku,description:"Chat messages"},{id:"posts",name:"Social Posts",icon:Hv,description:"Social media posts"},{id:"post-comments",name:"Post Comments",icon:Ku,description:"Post comments"},{id:"post-likes",name:"Post Likes",icon:po,description:"Post reactions"},{id:"reviews",name:"Reviews",icon:mn,description:"Product/service reviews"},{id:"notifications",name:"Notifications",icon:uy,description:"System notifications"},{id:"categories",name:"Categories",icon:BR,description:"Product/service categories"},{id:"packages",name:"Packages",icon:ps,description:"Subscription packages"},{id:"addons",name:"Addons",icon:Ua,description:"Additional features"},{id:"variants",name:"Variants",icon:Rk,description:"Product variants"},{id:"time-slots",name:"Time Slots",icon:is,description:"Service time slots"},{id:"flash-deals",name:"Flash Deals",icon:Ta,description:"Promotional deals"},{id:"platform-settings",name:"Platform Settings",icon:Ch,description:"System settings"},{id:"email-subscriptions",name:"Email Subscriptions",icon:vl,description:"Newsletter subscriptions"},{id:"contact-reveals",name:"Contact Reveals",icon:Gn,description:"Contact information reveals"},{id:"subscriptions",name:"Subscriptions",icon:gl,description:"User subscriptions"},{id:"search-history",name:"Search History",icon:Ca,description:"User search patterns"},{id:"comment-likes",name:"Comment Likes",icon:kR,description:"Comment reactions"},{id:"comment-reactions",name:"Comment Reactions",icon:po,description:"Comment interactions"},{id:"chat-analytics",name:"Chat Analytics",icon:ho,description:"Chat performance metrics"},{id:"marketing",name:"Marketing",icon:mp,description:"Marketing campaigns and ads"},{id:"audit",name:"Activity Logs",icon:Wu,description:"Admin activity audit"}];return n.jsx(gJ,{children:n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive e-commerce platform management"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>U(),disabled:i,className:"flex items-center space-x-2 bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 disabled:opacity-50",children:[n.jsx(sc,{className:`w-4 h-4 ${i?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]})})]})}),o&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Sa,{className:"h-5 w-5 text-red-600 mr-2"}),n.jsx("span",{className:"text-red-800",children:o}),n.jsx("button",{onClick:()=>c(""),className:"ml-auto p-1 text-red-600 hover:text-red-800",children:n.jsx(Ts,{className:"w-4 h-4"})})]})}),l&&n.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"h-5 w-5 text-green-600 mr-2"}),n.jsx("span",{className:"text-green-800",children:l}),n.jsx("button",{onClick:()=>u(""),className:"ml-auto p-1 text-green-600 hover:text-green-800",children:n.jsx(Ts,{className:"w-4 h-4"})})]})}),n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px grid grid-cols-1 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-2 mb-4",children:$e.map(je=>{const Pe=je.icon;return n.jsxs("button",{onClick:()=>{s(je.id),E(1),N([])},className:`group flex flex-col items-center space-y-2 p-3 rounded-lg transition-all duration-200 ${t===je.id?"bg-black text-white shadow-md":"bg-white text-gray-600 hover:text-gray-900 hover:bg-gray-50 border border-gray-200"}`,children:[n.jsx(Pe,{className:`w-5 h-5 ${t===je.id?"text-white":"text-gray-500 group-hover:text-gray-700"}`}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-xs font-medium block",children:je.name}),je.description&&n.jsx("span",{className:`text-[10px] block mt-1 ${t===je.id?"text-gray-200":"text-gray-400"}`,children:je.description})]})]},je.id)})})})}),t==="dashboard"&&n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Users"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:d.totalUsers}),n.jsxs("p",{className:"text-xs text-green-600",children:["+",d.activeUsers," active"]})]}),n.jsx(Ti,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Stores"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:d.totalStores}),n.jsxs("p",{className:"text-xs text-yellow-600",children:["+",d.pendingStores," pending"]})]}),n.jsx(ei,{className:"w-8 h-8 text-green-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Br(d.totalRevenue)}),n.jsx("p",{className:"text-xs text-gray-500",children:"Orders + Bookings"})]}),n.jsx(fl,{className:"w-8 h-8 text-yellow-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Pending Withdrawals"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:d.pendingWithdrawals}),n.jsx("p",{className:"text-xs text-red-600",children:"Requires attention"})]}),n.jsx(is,{className:"w-8 h-8 text-red-500"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Products & Services"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Products"}),n.jsx("span",{className:"font-semibold",children:d.totalProducts})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Services"}),n.jsx("span",{className:"font-semibold",children:d.totalServices})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Orders & Bookings"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Orders"}),n.jsx("span",{className:"font-semibold",children:d.totalOrders})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Bookings"}),n.jsx("span",{className:"font-semibold",children:d.totalBookings})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>s("withdrawals"),className:"w-full text-left px-3 py-2 text-sm bg-yellow-50 text-yellow-800 rounded-lg hover:bg-yellow-100",children:["Review Withdrawals (",d.pendingWithdrawals,")"]}),n.jsxs("button",{onClick:()=>s("stores"),className:"w-full text-left px-3 py-2 text-sm bg-blue-50 text-blue-800 rounded-lg hover:bg-blue-100",children:["Verify Stores (",d.pendingStores,")"]})]})]})]})]}),t==="system"&&n.jsx(AJ,{}),t==="analytics"&&n.jsx(mJ,{}),ve(t)&&n.jsx(pJ,{collection:ve(t).collection,title:ve(t).title,columns:ve(t).columns,searchFields:ve(t).searchFields,filterField:ve(t).filterField,canCreate:ve(t).canCreate,canEdit:ve(t).canEdit,canDelete:ve(t).canDelete,onItemSelect:je=>Le("view",je),onItemEdit:ve(t).canEdit?je=>Le("edit",je):null,onItemCreate:ve(t).canCreate?()=>Le("create"):null}),t==="withdrawals"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:`Search ${t}...`,value:m,onChange:je=>{g(je.target.value),E(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(lA,{className:"w-5 h-5 text-gray-400"}),n.jsxs("select",{value:b,onChange:je=>{v(je.target.value),E(1)},className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),(t==="stores"||t==="users")&&n.jsx("option",{value:"verified",children:"Verified"}),t==="withdrawals"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),n.jsxs("button",{onClick:()=>Ce(t),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors flex items-center space-x-2",children:[n.jsx(Dc,{className:"w-4 h-4"}),n.jsx("span",{children:"Export"})]}),t!=="audit"&&t!=="analytics"&&n.jsxs("button",{onClick:()=>Le("create"),className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors flex items-center space-x-2",children:[n.jsx(Ua,{className:"w-4 h-4"}),n.jsx("span",{children:"Add New"})]})]})}),S.length>0&&n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[S.length," item",S.length>1?"s":""," selected"]}),n.jsx("button",{onClick:()=>N([]),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear selection"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>we("toggle-status",S),disabled:G,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm font-medium",children:"Toggle Status"}),n.jsx("button",{onClick:()=>we("delete",S),disabled:G,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 text-sm font-medium",children:"Delete Selected"})]})]})}),i?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(cs,{size:"lg"})}):n.jsxs(n.Fragment,{children:[t==="withdrawals"?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg font-semibold",children:"Withdrawal Requests"})}),me.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx(zl,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500 text-lg",children:"No withdrawal requests found"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left",children:n.jsx("input",{type:"checkbox",checked:S.length===me.length,onChange:je=>{je.target.checked?N(me.map(Pe=>Pe._id)):N([])},className:"rounded border-gray-300 text-black focus:ring-black"})}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black",children:"Store"}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black",children:"Amount"}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black",children:"Bank Details"}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black",children:"Requested"}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:me.map(je=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsx("input",{type:"checkbox",checked:S.includes(je._id),onChange:Pe=>{Pe.target.checked?N([...S,je._id]):N(S.filter(Te=>Te!==je._id))},className:"rounded border-gray-300 text-black focus:ring-black"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-black text-white rounded-full flex items-center justify-center font-semibold",children:je.userId?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-black",children:je.userId?.name||"Unknown"}),n.jsx("p",{className:"text-sm text-gray-600",children:je.userId?.email||"No email"})]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"text-lg font-semibold text-black",children:yJ(je.amount)})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-sm font-medium rounded-full border ${NC(je.status)}`,children:[SC(je.status),je.status.charAt(0).toUpperCase()+je.status.slice(1)]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-black text-sm",children:je.withdrawalDetails?.bankAccountId?.bankName||"Bank not specified"}),n.jsx("p",{className:"text-sm text-gray-600",children:je.withdrawalDetails?.bankAccountId?.accountNumber||"Account not specified"})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"text-sm text-gray-600",children:Ql(je.createdAt)})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>Le("view",je),className:"p-2 text-gray-600 hover:text-black rounded-lg hover:bg-gray-100",children:n.jsx(Gn,{className:"h-4 w-4"})}),je.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>fe(je._id,"approved"),className:"px-3 py-1 text-sm font-medium text-green-700 bg-green-100 rounded-lg hover:bg-green-200",children:"Approve"}),n.jsx("button",{onClick:()=>fe(je._id,"rejected"),className:"px-3 py-1 text-sm font-medium text-red-700 bg-red-100 rounded-lg hover:bg-red-200",children:"Reject"})]})]})})]},je._id))})]})})]}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[t," Management"]})}),me.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx(ps,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsxs("p",{className:"text-gray-500 text-lg",children:["No ",t," found"]}),n.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Try adjusting your filters"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left",children:n.jsx("input",{type:"checkbox",checked:S.length===me.length,onChange:je=>{je.target.checked?N(me.map(Pe=>Pe._id)):N([])},className:"rounded border-gray-300 text-black focus:ring-black"})}),t==="users"&&n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),t==="stores"&&n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Store"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Owner"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),(t==="products"||t==="services")&&n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Store"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]}),(t==="orders"||t==="bookings")&&n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Store"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:me.map(je=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:S.includes(je._id),onChange:Pe=>{Pe.target.checked?N([...S,je._id]):N(S.filter(Te=>Te!==je._id))},className:"rounded border-gray-300 text-black focus:ring-black"})}),t==="users"&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("img",{src:je.profileImage?.[0]||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=400&fit=crop&crop=face",alt:je.name,className:"w-10 h-10 rounded-full object-cover mr-3"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:je.name}),n.jsx("div",{className:"text-sm text-gray-500",children:je.email})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:je.role}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${je.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:je.isActive?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ql(je.createdAt)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>Le("view",je),className:"text-indigo-600 hover:text-indigo-900",children:n.jsx(Gn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>te("toggle-status","users",je._id),className:`${je.isActive?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:je.isActive?n.jsx(aa,{className:"w-4 h-4"}):n.jsx(ER,{className:"w-4 h-4"})})]})})]}),t==="stores"&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("img",{src:je.heroImages?.[0]||"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",alt:je.name,className:"w-10 h-10 rounded object-cover mr-3"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:je.name}),n.jsx("div",{className:"text-sm text-gray-500",children:je.email})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"text-sm text-gray-500 capitalize",children:je.type})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:je.ownerId?.name||"Unknown"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex flex-col space-y-1",children:[n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${je.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:je.isActive?"Active":"Inactive"}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${je.isVerified?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:je.isVerified?"Verified":"Unverified"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>Le("view",je),className:"text-indigo-600 hover:text-indigo-900",children:n.jsx(Gn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>_e(je._id,je.name),className:"text-blue-600 hover:text-blue-900",children:n.jsx(wR,{className:"w-4 h-4"})}),!je.isVerified&&n.jsx("button",{onClick:()=>te("verify","stores",je._id),className:"text-green-600 hover:text-green-900",children:n.jsx(Wu,{className:"w-4 h-4"})}),n.jsx("a",{href:`/store/${je._id}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-900",children:n.jsx($v,{className:"w-4 h-4"})})]})})]}),(t==="products"||t==="services")&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("img",{src:je.images?.[0]||"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",alt:je.title,className:"w-10 h-10 rounded object-cover mr-3"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:je.title}),n.jsx("div",{className:"text-sm text-gray-500",children:je.category})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:je.storeId?.name||"Unknown"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Br(je.price)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${je.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:je.isActive?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>Le("view",je),className:"text-indigo-600 hover:text-indigo-900",children:n.jsx(Gn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>te("toggle-status",t,je._id),className:`${je.isActive?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:je.isActive?n.jsx(mo,{className:"w-4 h-4"}):n.jsx(Xr,{className:"w-4 h-4"})})]})})]}),(t==="orders"||t==="bookings")&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:je.userId?.name||"Unknown"}),n.jsx("div",{className:"text-sm text-gray-500",children:je.userId?.email||"No email"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:je.storeId?.name||"Unknown"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:Br(je.totalAmount||je.amount)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${NC(je.status)}`,children:[SC(je.status),n.jsx("span",{className:"ml-1 capitalize",children:je.status})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ql(je.createdAt)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>Le("view",je),className:"text-indigo-600 hover:text-indigo-900",children:n.jsx(Gn,{className:"w-4 h-4"})}),je.status==="pending"&&n.jsx("button",{onClick:()=>te("update",t,je._id,{status:"confirmed"}),className:"text-green-600 hover:text-green-900",children:n.jsx(Xr,{className:"w-4 h-4"})})]})})]})]},je._id))})]})})]}),Be>1&&n.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border-t border-gray-200 sm:px-6 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"flex justify-between flex-1 sm:hidden",children:[n.jsx("button",{onClick:()=>E(Math.max(1,B-1)),disabled:B===1,className:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),n.jsx("button",{onClick:()=>E(Math.min(Be,B+1)),disabled:B===Be,className:"relative ml-3 inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),n.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[n.jsx("div",{children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",n.jsx("span",{className:"font-medium",children:(B-1)*_+1})," "," to"," ",n.jsx("span",{className:"font-medium",children:Math.min(B*_,ie.length)})," "," of"," ",n.jsx("span",{className:"font-medium",children:ie.length})," "," results"]})}),n.jsx("div",{children:n.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[n.jsx("button",{onClick:()=>E(Math.max(1,B-1)),disabled:B===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:n.jsx(oA,{className:"h-5 w-5","aria-hidden":"true"})}),Array.from({length:Math.min(5,Be)},(je,Pe)=>{const Te=Pe+1;return n.jsx("button",{onClick:()=>E(Te),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${Te===B?"z-10 bg-black text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:Te},Te)}),n.jsx("button",{onClick:()=>E(Math.min(Be,B+1)),disabled:B===Be,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:n.jsx(Jl,{className:"h-5 w-5","aria-hidden":"true"})})]})})]})]})]})]}),t==="analytics"&&n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(Ng,{title:"Total Revenue",value:d.totalRevenue,icon:fl,color:"green",trend:12.5,subtitle:"This month"}),n.jsx(Ng,{title:"Active Users",value:d.activeUsers,icon:Ti,color:"blue",trend:8.2,subtitle:`${d.totalUsers} total`}),n.jsx(Ng,{title:"Order Conversion",value:"24.8%",icon:ti,color:"purple",trend:3.1,subtitle:"Last 30 days"}),n.jsx(Ng,{title:"Avg. Order Value",value:d.totalRevenue/Math.max(d.totalOrders,1),icon:mp,color:"yellow",trend:-1.4,subtitle:"Per transaction"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx(_f,{title:"Revenue by Month",type:"line",trend:15.3,data:[{label:"Jan",value:d.totalRevenue*.15},{label:"Feb",value:d.totalRevenue*.12},{label:"Mar",value:d.totalRevenue*.18},{label:"Apr",value:d.totalRevenue*.16},{label:"May",value:d.totalRevenue*.2},{label:"Jun",value:d.totalRevenue*.19}]}),n.jsx(_f,{title:"Orders by Status",type:"bar",data:[{label:"Completed",value:Math.floor(d.totalOrders*.7)},{label:"Processing",value:Math.floor(d.totalOrders*.15)},{label:"Pending",value:Math.floor(d.totalOrders*.1)},{label:"Cancelled",value:Math.floor(d.totalOrders*.05)}]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx(_f,{title:"Store Performance",type:"bar",data:[{label:"Electronics",value:45},{label:"Fashion",value:32},{label:"Home & Garden",value:28},{label:"Sports",value:21},{label:"Books",value:15}]}),n.jsx(_f,{title:"User Activity",type:"grid",data:[{label:"Daily Active",value:Math.floor(d.activeUsers*.3)},{label:"Weekly Active",value:Math.floor(d.activeUsers*.7)},{label:"New Signups",value:Math.floor(d.totalUsers*.05)},{label:"Returning Users",value:Math.floor(d.activeUsers*.8)}]}),n.jsx(_f,{title:"Platform Health",type:"grid",data:[{label:"System Uptime",value:"99.9%"},{label:"Avg Response",value:"1.2s"},{label:"Error Rate",value:"0.1%"},{label:"Active Stores",value:d.totalStores}]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Geographic Distribution"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"Top Cities by Orders"}),n.jsx("div",{className:"space-y-3",children:[{city:"Colombo",orders:Math.floor(d.totalOrders*.35),percentage:35},{city:"Kandy",orders:Math.floor(d.totalOrders*.2),percentage:20},{city:"Galle",orders:Math.floor(d.totalOrders*.15),percentage:15},{city:"Jaffna",orders:Math.floor(d.totalOrders*.12),percentage:12},{city:"Negombo",orders:Math.floor(d.totalOrders*.18),percentage:18}].map((je,Pe)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-3 h-3 bg-black rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:je.city})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-black h-2 rounded-full",style:{width:`${je.percentage}%`}})}),n.jsx("span",{className:"text-sm text-gray-600 w-12 text-right",children:je.orders})]})]},Pe))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"Revenue by Region"}),n.jsx("div",{className:"space-y-4",children:[{region:"Western Province",revenue:d.totalRevenue*.45},{region:"Central Province",revenue:d.totalRevenue*.22},{region:"Southern Province",revenue:d.totalRevenue*.18},{region:"Northern Province",revenue:d.totalRevenue*.15}].map((je,Pe)=>n.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:je.region}),n.jsx("span",{className:"text-sm font-bold text-gray-900",children:Br(je.revenue)})]},Pe))})]})]})]})]}),t==="categories"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Categories Management"}),n.jsxs("button",{onClick:()=>Le("create"),className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 flex items-center space-x-2",children:[n.jsx(Ua,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Category"})]})]})}),me.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx(Ch,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500 text-lg",children:"No categories found"}),n.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Create your first category to get started"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left",children:n.jsx("input",{type:"checkbox",checked:S.length===me.length,onChange:je=>{je.target.checked?N(me.map(Pe=>Pe._id)):N([])},className:"rounded border-gray-300 text-black focus:ring-black"})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items Count"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:me.map(je=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:S.includes(je._id),onChange:Pe=>{Pe.target.checked?N([...S,je._id]):N(S.filter(Te=>Te!==je._id))},className:"rounded border-gray-300 text-black focus:ring-black"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium mr-3 ${je.type==="product"?"bg-blue-500":"bg-green-500"}`,children:je.name?.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:je.name}),n.jsx("div",{className:"text-sm text-gray-500",children:je.description||"No description"})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${je.type==="product"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:je.type?.charAt(0).toUpperCase()+je.type?.slice(1)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:je.itemsCount||0}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${je.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:je.isActive?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ql(je.createdAt)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>Le("view",je),className:"text-indigo-600 hover:text-indigo-900",children:n.jsx(Gn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Le("edit",je),className:"text-green-600 hover:text-green-900",children:n.jsx(rA,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>te("toggle-status","categories",je._id),className:`${je.isActive?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:je.isActive?n.jsx(mo,{className:"w-4 h-4"}):n.jsx(Xr,{className:"w-4 h-4"})})]})})]},je._id))})]})})]})}),t==="audit"&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg font-semibold",children:"System Audit Logs"})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item ID"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[q.map(je=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ql(je.timestamp)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:je.user}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${je.action==="create"?"bg-green-100 text-green-800":je.action==="update"?"bg-blue-100 text-blue-800":je.action==="delete"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:je.action})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:je.type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono",children:je.itemId})]},je.id)),q.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-16 text-center text-gray-500",children:"No audit logs available"})})]})]})})]}),n.jsx(dO,{isOpen:Q,onClose:()=>$(!1),title:`${L.charAt(0).toUpperCase()+L.slice(1)} ${t.slice(0,-1)}`,size:"lg",children:n.jsxs("div",{className:"space-y-4",children:[L==="view"&&I&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"ID"}),n.jsx("p",{className:"text-sm text-gray-900 font-mono",children:I._id})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Name"}),n.jsx("p",{className:"text-sm text-gray-900",children:I.name||I.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Status"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:I.status||(I.isActive?"Active":"Inactive")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Created"}),n.jsx("p",{className:"text-sm text-gray-900",children:Ql(I.createdAt)})]})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Raw Data"}),n.jsx("pre",{className:"bg-white p-4 rounded border text-xs overflow-auto max-h-64",children:JSON.stringify(I,null,2)})]})]}),(L==="create"||L==="edit")&&n.jsxs("div",{children:[n.jsxs("p",{className:"text-gray-600 mb-4",children:[L==="create"?"Create new":"Edit"," ",t.slice(0,-1)," form would be implemented here with specific fields for each type."]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:()=>$(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{onClick:()=>{$(!1)},className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800",children:"Save"})]})]})]})})]})})})},pl=({title:r,description:t,businessImpact:s,className:i=""})=>{const[a,o]=ee.useState(!1),[c,l]=ee.useState({top:0,left:0}),u=A=>{const f=A.target.getBoundingClientRect(),p=window.pageYOffset||document.documentElement.scrollTop;l({top:f.top+p-10,left:f.left+f.width+10}),o(!0)},d=()=>{o(!1)};return n.jsxs(n.Fragment,{children:[n.jsx("button",{className:`inline-flex items-center justify-center w-4 h-4 text-gray-400 hover:text-gray-600 transition-colors ${i}`,onMouseEnter:u,onMouseLeave:d,onClick:A=>A.preventDefault(),children:n.jsx(aR,{className:"w-4 h-4"})}),a&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 md:hidden",onClick:()=>o(!1)}),n.jsxs("div",{className:`
              fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-xs
              ${window.innerWidth<768?"top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2":""}
            `,style:window.innerWidth>=768?{top:`${c.top}px`,left:`${c.left}px`}:{},children:[n.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 md:hidden",onClick:()=>o(!1),children:n.jsx(Ts,{className:"w-4 h-4"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:r}),n.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:t}),s&&n.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[n.jsx("p",{className:"text-xs text-blue-600 font-medium",children:" Why it matters:"}),n.jsx("p",{className:"text-xs text-blue-700 mt-1",children:s})]})]}),n.jsx("div",{className:"hidden md:block absolute top-3 -left-1 w-2 h-2 bg-white border-l border-t border-gray-200 transform rotate-45"})]})]})]})},bJ=({data:r})=>{if(console.log(" Level1Analytics received data:",{hasData:!!r,analyticsLevel:r?.analyticsLevel,packageName:r?.packageName,totalRevenue:r?.totalRevenue,error:r?.error}),!r)return console.warn(" Level1Analytics: No data provided"),n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No analytics data available"})});const t={totalRevenue:r.totalRevenue||0,totalCount:r.totalCount||0,avgValue:r.avgValue||0,totalUniqueCustomers:r.totalUniqueCustomers||0,returningCustomers:r.returningCustomers||0,customerMixNewVsReturning:{new:r.customerMixNewVsReturning?.new||0,returning:r.customerMixNewVsReturning?.returning||0,percentage:r.customerMixNewVsReturning?.percentage||0},bestSellingItem:r.bestSellingItem||null,currency:r.currency||"LKR",error:r.error||null};return n.jsxs("div",{className:"space-y-6",children:[t.error&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(ho,{className:"w-5 h-5 text-yellow-400"})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",t.error]}),n.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Showing available data with fallback values where needed."})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[n.jsx(Sg,{title:"Total Revenue",value:sa(t.totalRevenue),icon:fl,subtitle:"Last 30 days",iconBg:"bg-green-500",tooltip:{title:"Total Revenue",description:"Your total earnings from completed orders/bookings in the selected period. This includes all successful transactions.",businessImpact:"Track your business growth and identify revenue trends to make informed decisions about pricing and promotions."}}),n.jsx(Sg,{title:"Total Orders",value:t.totalCount,icon:ps,subtitle:"This month",iconBg:"bg-blue-500",tooltip:{title:"Total Orders",description:"Number of completed transactions (orders for products, bookings for services) in your selected time period.",businessImpact:"Monitor transaction volume to understand customer demand and plan inventory or service capacity."}}),n.jsx(Sg,{title:"Customers",value:t.totalUniqueCustomers,icon:Ti,subtitle:"Active buyers",iconBg:"bg-purple-500",tooltip:{title:"Unique Customers",description:"Number of different customers who made purchases during this period. Each customer is counted only once.",businessImpact:"Growing customer base indicates successful marketing and customer satisfaction. Focus on retention to maximize value."}}),n.jsx(Sg,{title:"Avg. Order",value:sa(t.avgValue),icon:ti,subtitle:"Per transaction",iconBg:"bg-orange-500",tooltip:{title:"Average Order Value (AOV)",description:"Average amount spent per transaction, calculated as Total Revenue  Total Orders.",businessImpact:"Higher AOV means more revenue per customer. Use upselling, bundles, and premium options to increase this metric."}})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[n.jsx(Ti,{className:"w-5 h-5 mr-2"}),"Customer Mix",n.jsx(pl,{title:"Customer Mix",description:"The ratio between new customers (first-time buyers) and returning customers (repeat buyers) in your selected period.",businessImpact:"A healthy mix shows both customer acquisition and retention. Too many new customers may indicate retention issues, while too few suggests limited growth.",className:"ml-2"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"New Customers"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-semibold text-gray-900",children:t.customerMixNewVsReturning.new}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",100-t.customerMixNewVsReturning.percentage,"%)"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Repeat Buyers"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-semibold text-gray-900",children:t.customerMixNewVsReturning.returning}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.customerMixNewVsReturning.percentage,"%)"]})]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mt-4",children:n.jsx("div",{className:"bg-black h-3 rounded-full transition-all duration-300",style:{width:`${Math.max(0,Math.min(100,t.customerMixNewVsReturning.percentage))}%`}})})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[n.jsx(mn,{className:"w-5 h-5 mr-2"}),"Top Performer",n.jsx(pl,{title:"Top Performer",description:"Your best-selling product or most booked service based on total revenue generated in the selected period.",businessImpact:"Identify your most profitable offerings to optimize inventory, promote similar items, or create bundles around successful products.",className:"ml-2"})]}),t.bestSellingItem?n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"font-medium text-gray-900 truncate",children:t.bestSellingItem.name||"Unknown Product"}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:t.bestSellingItem.totalSold?"Sold":"Bookings"}),n.jsx("span",{className:"font-semibold",children:t.bestSellingItem.totalSold||t.bestSellingItem.totalBookings||0})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Revenue"}),n.jsx("span",{className:"font-semibold text-green-600",children:sa(t.bestSellingItem.revenue||0)})]})]}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(ps,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No sales data yet"})]})]}),n.jsx(vJ,{})]}),n.jsx(wJ,{})]})},Sg=({title:r,value:t,subtitle:s,icon:i,iconBg:a,tooltip:o})=>n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:r}),o&&n.jsx(pl,{title:o.title,description:o.description,businessImpact:o.businessImpact,className:"ml-2"})]}),n.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1",children:t}),n.jsx("p",{className:"text-xs text-gray-500",children:s})]}),n.jsx("div",{className:`w-10 h-10 ${a} rounded-lg flex items-center justify-center ml-4`,children:n.jsx(i,{className:"w-5 h-5 text-white"})})]})}),vJ=()=>n.jsxs("div",{className:"bg-gradient-to-br from-black to-gray-800 text-white rounded-lg p-6 relative overflow-hidden",children:[n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(ho,{className:"w-5 h-5 mr-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Want More Insights?"})]}),n.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Upgrade to see trends, exports, and historical data"}),n.jsxs("ul",{className:"space-y-2 mb-4",children:[n.jsxs("li",{className:"flex items-center text-sm text-gray-300",children:[n.jsx(aa,{className:"w-3 h-3 mr-2 opacity-60"}),"6-month historical trends"]}),n.jsxs("li",{className:"flex items-center text-sm text-gray-300",children:[n.jsx(aa,{className:"w-3 h-3 mr-2 opacity-60"}),"Advanced analytics & insights"]}),n.jsxs("li",{className:"flex items-center text-sm text-gray-300",children:[n.jsx(aa,{className:"w-3 h-3 mr-2 opacity-60"}),"PDF/Excel reports"]})]}),n.jsxs("button",{className:"w-full bg-white text-black font-medium py-2 px-4 rounded-lg text-sm hover:bg-gray-100 transition-colors flex items-center justify-center",children:["Upgrade to Standard",n.jsx(Mo,{className:"w-4 h-4 ml-2"})]})]}),n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-5 rounded-full transform translate-x-16 -translate-y-16"})]}),wJ=()=>n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 sm:p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{className:"mb-4 sm:mb-0",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:" Basic Analytics Plan"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"You're seeing a 30-day snapshot. Upgrade for deeper insights, trends, and competitive analysis."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx("button",{className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Learn More"}),n.jsxs("button",{className:"px-4 py-2 text-sm font-medium text-white bg-black rounded-lg hover:bg-gray-800 transition-colors flex items-center justify-center",children:["Upgrade Now",n.jsx(Mo,{className:"w-4 h-4 ml-1"})]})]})]})}),jJ=({analyticsLevel:r=1,storeId:t,className:s=""})=>{const{user:i}=Fn(),[a,o]=ee.useState(!1),[c,l]=ee.useState(null),u=r>=2,d=t||i?.storeId,A=async()=>{if(!(!u||!d)){o(!0);try{const f=await fetch(`http://localhost:10000/api/analytics/export/${d}`,{method:"GET",credentials:"include"});if(!f.ok){const b=await f.json().catch(()=>({}));throw new Error(b.error||`Export failed with status: ${f.status}`)}const p=await f.blob(),m=window.URL.createObjectURL(p),g=document.createElement("a");g.style.display="none",g.href=m,g.download=`analytics-comprehensive-${Date.now()}.xlsx`,document.body.appendChild(g),g.click(),window.URL.revokeObjectURL(m),document.body.removeChild(g),l(new Date)}catch(f){console.error("Export error:",f);let p="Failed to generate comprehensive Excel report. Please try again.";f.message.includes("403")?p="You need to upgrade your plan to export reports.":f.message.includes("401")?p="Please log in again to export reports.":f.message.includes("404")?p="Store not found. Please refresh and try again.":f.message.includes("500")&&(p="Server error. Please try again in a few minutes."),alert(p)}finally{o(!1)}}};return u?n.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-6 ${s}`,children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Dc,{className:"w-5 h-5 mr-2 text-gray-700"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Reports"}),r>=3&&n.jsx(zi,{className:"w-4 h-4 ml-2 text-purple-400"})]}),n.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Download comprehensive Excel analytics report with detailed insights across multiple worksheets including revenue trends, customer analytics, product performance, and operational metrics."}),n.jsx("div",{className:"mb-6",children:n.jsxs("button",{onClick:A,disabled:a,className:"w-full flex items-center justify-center py-4 px-6 bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center mr-4",children:a?n.jsx(uR,{className:"w-6 h-6 animate-spin text-white"}):n.jsx(Rg,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"text-lg font-semibold",children:a?"Generating...":"Download Comprehensive Excel Report"}),n.jsx("div",{className:"text-sm text-white/80",children:a?"Creating detailed analytics...":"6+ worksheets with complete business insights"})]})]}),n.jsx(Dc,{className:"w-5 h-5 text-white/80 ml-4"})]})}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[n.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-2 flex items-center",children:[n.jsx(Rg,{className:"w-4 h-4 mr-2"}),"What's Included in Your Excel Report"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs text-blue-700",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"w-3 h-3 mr-2 text-blue-500"}),"Executive Summary"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"w-3 h-3 mr-2 text-blue-500"}),"Revenue Trends Analysis"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"w-3 h-3 mr-2 text-blue-500"}),"Product/Service Performance"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"w-3 h-3 mr-2 text-blue-500"}),"Order Status Breakdown"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"w-3 h-3 mr-2 text-blue-500"}),"Customer Analytics"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"w-3 h-3 mr-2 text-blue-500"}),"Operational Metrics"]})]})]}),r>=3&&n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(zi,{className:"w-4 h-4 mr-2 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Premium Features"})]}),n.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[n.jsx("li",{children:" Advanced customer segmentation worksheet"}),n.jsx("li",{children:" Global market insights included"}),n.jsx("li",{children:" AI recommendations section"}),n.jsx("li",{children:" Extended 12+ month historical data"}),n.jsx("li",{children:" Premium analytics calculations"})]})]}),c&&n.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[n.jsx(Xr,{className:"w-4 h-4 mr-2 text-green-500"}),"Last generated: ",c.toLocaleString()]}),n.jsx(NJ,{analyticsLevel:r})]}):n.jsx("div",{className:`bg-gray-50 border border-gray-200 rounded-lg p-6 ${s}`,children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(aa,{className:"w-6 h-6 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Report Exports Locked"}),n.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Upgrade to Standard or Premium to download comprehensive Excel analytics reports with detailed insights across multiple sheets."}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex items-center justify-center py-4 px-6 bg-white border-2 border-dashed border-gray-300 rounded-lg opacity-50",children:[n.jsx(Rg,{className:"w-6 h-6 mr-3 text-gray-400"}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Comprehensive Excel Report"}),n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"6+ sheets with detailed analytics"})]})]})}),n.jsx("button",{className:"w-full bg-black text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors",children:"Upgrade to Access Reports"})]})})},NJ=({analyticsLevel:r})=>{const s={1:[],2:["Revenue and order trends analysis","Customer analytics worksheets","Operational metrics breakdown","Comprehensive Excel export with 6+ sheets"],3:["Everything in Standard","Advanced customer segmentation","Global market insights","Competitive benchmarks","AI recommendations","Extended historical data (12+ months)"]}[r]||[];return s.length===0?null:n.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[n.jsx(Rg,{className:"w-4 h-4 mr-2"}),"What's Included in Your Excel Report"]}),n.jsx("ul",{className:"space-y-2",children:s.map((i,a)=>n.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(Xr,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),i]},a))})]})},CC=({data:r,viewMode:t="overview"})=>{const[s,i]=ee.useState("6months");return r?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[n.jsx(Cg,{title:"Total Revenue",value:sa(r.totalRevenue||0),change:r.revenueChangePct||0,icon:fl,iconBg:"bg-green-500",tooltip:{title:"Total Revenue",description:"Your total earnings from completed orders/bookings. Shows period-over-period percentage change to track growth trends.",businessImpact:"Monitor revenue trends to understand business performance, seasonal patterns, and the impact of marketing campaigns or pricing changes."}}),n.jsx(Cg,{title:"Orders",value:r.totalCount||0,change:r.countChangePct||0,icon:ps,iconBg:"bg-blue-500",tooltip:{title:"Total Orders",description:"Number of completed transactions with percentage change from previous period. Includes both product orders and service bookings.",businessImpact:"Track order volume trends to optimize inventory planning, staffing levels, and identify peak business periods."}}),n.jsx(Cg,{title:"Avg Order Value",value:sa(r.avgValue||0),change:r.avgValueChangePct||0,icon:ti,iconBg:"bg-purple-500",tooltip:{title:"Average Order Value (AOV)",description:"Average amount spent per transaction with trend analysis. Calculated as Total Revenue  Total Orders.",businessImpact:"Increasing AOV through upselling, bundles, or premium offerings directly boosts revenue without acquiring more customers."}}),n.jsx(Cg,{title:"Retention Rate",value:`${Math.round(r.retentionRate||0)}%`,change:r.retentionRateChange||0,icon:Ti,iconBg:"bg-orange-500",tooltip:{title:"Customer Retention Rate",description:"Percentage of customers who made repeat purchases. Shows how well you're retaining customers over time.",businessImpact:"Higher retention rates indicate customer satisfaction and lead to increased lifetime value. Focus on improving this for sustainable growth."}})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 sm:mb-0 flex items-center",children:["Revenue Trends",n.jsx(pl,{title:"Revenue Trends",description:"Monthly revenue progression over time. Shows patterns, seasonal fluctuations, and overall business growth trajectory.",businessImpact:"Identify peak seasons, track growth trends, and plan business strategies based on revenue patterns.",className:"ml-2"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:s,onChange:a=>i(a.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"3months",children:"Last 3 months"}),n.jsx("option",{value:"6months",children:"Last 6 months"})]}),n.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(sc,{className:"w-4 h-4"})})]})]}),n.jsx(SJ,{data:r.revenueByMonth||[]})]}),n.jsx(CJ,{})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[n.jsx(ps,{className:"w-5 h-5 mr-2"}),"Operational Metrics",n.jsx(pl,{title:"Operational Metrics",description:"Key performance indicators for your business operations including order fulfillment, customer behavior, and efficiency metrics.",businessImpact:"Monitor these metrics to improve customer satisfaction, operational efficiency, and identify areas for process optimization.",className:"ml-2"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600",children:"Fulfillment Rate"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"font-semibold text-gray-900",children:[r.operationalMetrics?.fulfillmentRate||0,"%"]}),n.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-300",style:{width:`${r.operationalMetrics?.fulfillmentRate||0}%`}})})]})]}),n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600",children:"Repeat Purchase Rate"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"font-semibold text-gray-900",children:[Math.round(r.operationalMetrics?.repeatPurchaseRate||0),"%"]}),n.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:`${r.operationalMetrics?.repeatPurchaseRate||0}%`}})})]})]}),n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsx("span",{className:"text-gray-600",children:"Avg Order Value"}),n.jsx("span",{className:"font-semibold text-gray-900",children:sa(r.operationalMetrics?.avgOrderValue||0)})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[n.jsx(ms,{className:"w-5 h-5 mr-2"}),"Order Status",n.jsx(pl,{title:"Order Status Breakdown",description:"Distribution of orders across different status categories: completed, pending, cancelled, etc.",businessImpact:"Monitor order flow and identify bottlenecks. High pending orders may indicate process issues, while completed orders show successful transactions.",className:"ml-2"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(r.ordersByStatus||{}).map(([a,o])=>n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:o}),n.jsx("div",{className:"text-sm text-gray-600 capitalize",children:a.replace("_"," ")})]},a))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(jJ,{analyticsLevel:2,storeId:r.storeId}),n.jsx(BJ,{})]})]}):null},Cg=({title:r,value:t,change:s,icon:i,iconBg:a,tooltip:o})=>{const c=s>0,l=s===0;return n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:r}),o&&n.jsx(pl,{title:o.title,description:o.description,businessImpact:o.businessImpact,className:"ml-2"})]}),n.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:t}),n.jsxs("div",{className:"flex items-center",children:[!l&&n.jsx(n.Fragment,{children:c?n.jsx(Tk,{className:"w-4 h-4 text-green-500 mr-1"}):n.jsx(Pk,{className:"w-4 h-4 text-red-500 mr-1"})}),n.jsx("span",{className:`text-xs font-medium ${l?"text-gray-500":c?"text-green-600":"text-red-600"}`,children:l?"No change":`${Math.abs(s)}%`})]})]}),n.jsx("div",{className:`w-10 h-10 ${a} rounded-lg flex items-center justify-center ml-4`,children:n.jsx(i,{className:"w-5 h-5 text-white"})})]})})},SJ=({data:r})=>{if(!r||r.length===0)return n.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ti,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No trend data available yet"})]})});const t=Math.max(...r.map(s=>s.revenue));return n.jsx("div",{className:"h-64",children:n.jsx("div",{className:"flex items-end justify-between h-full space-x-2 px-2",children:r.map((s,i)=>n.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[n.jsx("div",{className:"bg-black rounded-t w-full min-h-[4px] transition-all duration-500 hover:bg-gray-800",style:{height:`${Math.max(s.revenue/t*200,4)}px`},title:`${s.month}/${s.year}: ${sa(s.revenue)}`}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2 transform -rotate-45 origin-top-left",children:[s.month,"/",String(s.year).slice(-2)]})]},i))})})},CJ=()=>n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6 relative overflow-hidden",children:[n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:n.jsx(L1,{className:"w-4 h-4 text-purple-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Insights"}),n.jsx("span",{className:"ml-2 text-xs bg-purple-600 text-white px-2 py-1 rounded-full",children:"Coming Soon"})]}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsx("div",{className:"h-3 bg-gray-200 rounded-full animate-pulse"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded-full w-4/5 animate-pulse"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded-full w-3/5 animate-pulse"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:" Our AI will analyze your data and provide personalized recommendations to grow your business."}),n.jsx("button",{className:"text-purple-600 font-medium text-sm hover:underline",children:"Learn about AI features "})]}),n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-200 opacity-20 rounded-full transform translate-x-16 -translate-y-16"})]}),BJ=()=>n.jsxs("div",{className:"bg-gradient-to-br from-black to-gray-800 text-white rounded-lg p-6 relative overflow-hidden",children:[n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(zi,{className:"w-5 h-5 mr-2 text-yellow-400"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Unlock Premium Analytics"})]}),n.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Get global market insights and competitive analysis"}),n.jsxs("ul",{className:"space-y-2 mb-4",children:[n.jsxs("li",{className:"flex items-center text-sm text-gray-300",children:[n.jsx(Ta,{className:"w-3 h-3 mr-2 text-yellow-400"}),"12+ months historical data"]}),n.jsxs("li",{className:"flex items-center text-sm text-gray-300",children:[n.jsx(Ta,{className:"w-3 h-3 mr-2 text-yellow-400"}),"Industry benchmarks"]}),n.jsxs("li",{className:"flex items-center text-sm text-gray-300",children:[n.jsx(Ta,{className:"w-3 h-3 mr-2 text-yellow-400"}),"AI-powered recommendations"]})]}),n.jsx("button",{onClick:handleUpgradeClick,className:"w-full bg-white text-black font-medium py-2 px-4 rounded-lg text-sm hover:bg-gray-100 transition-colors",children:"Upgrade to Premium"})]}),n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-yellow-400 opacity-10 rounded-full transform translate-x-16 -translate-y-16"})]}),BC=({data:r,globalInsights:t,viewMode:s="overview"})=>{const[i,a]=ee.useState("12months"),[o,c]=ee.useState("overview");return r?s==="global"&&t?n.jsx(OJ,{globalInsights:t,data:r}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(zi,{className:"w-6 h-6 mr-3 text-yellow-400"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Premium Analytics Active"}),n.jsx("p",{className:"text-sm text-white/90",children:"Full access to advanced insights and forecasting"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-xs text-white/80",children:"Level 3"}),n.jsx("div",{className:"font-semibold",children:"Premium"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[n.jsx(Bg,{title:"Total Revenue",value:sa(r.totalRevenue||0),change:r.revenueChangePct||0,forecast:r.revenueForecast?.growthRate?`${r.revenueForecast.growthRate>0?"+":""}${r.revenueForecast.growthRate.toFixed(1)}%`:"Calculating...",icon:fl,iconBg:"bg-green-500",data:r,tooltip:{title:"Total Revenue with AI Forecasting",description:"Your total earnings with machine learning-powered growth predictions and confidence levels based on historical patterns.",businessImpact:"AI forecasting helps predict future revenue to optimize budgeting, inventory planning, and strategic business decisions."}}),n.jsx(Bg,{title:"Orders",value:r.totalCount||0,change:r.countChangePct||0,forecast:r.revenueForecast?.trend==="growing"?`+${(r.countChangePct*.8).toFixed(1)}%`:r.revenueForecast?.trend==="declining"?`-${Math.abs(r.countChangePct*.8).toFixed(1)}%`:"Stable",icon:ps,iconBg:"bg-blue-500",data:r,tooltip:{title:"Orders with Trend Analysis",description:"Total completed transactions with advanced trend analysis and predictive forecasting for order volume planning.",businessImpact:"Forecast order volumes to optimize staffing, inventory levels, and capacity planning during peak periods."}}),n.jsx(Bg,{title:"Avg Order Value",value:sa(r.avgValue||0),change:r.avgValueChangePct||0,forecast:r.revenueForecast?.growthRate?`${r.revenueForecast.growthRate>0?"+":""}${(r.revenueForecast.growthRate*.6).toFixed(1)}%`:"Calculating...",icon:ti,iconBg:"bg-purple-500",data:r,tooltip:{title:"Average Order Value with Predictions",description:"Average transaction value with AI-powered forecasts to predict future AOV trends and optimize pricing strategies.",businessImpact:"Use AOV predictions to set pricing targets, plan product bundles, and forecast revenue from existing customer base."}}),n.jsx(Bg,{title:"Retention Rate",value:`${Math.round(r.retentionRate||0)}%`,change:r.retentionRateChange||0,forecast:r.retentionRateChange>=0?`+${Math.max(1,Math.abs(r.retentionRateChange*.5)).toFixed(1)}%`:`-${Math.max(.5,Math.abs(r.retentionRateChange*.3)).toFixed(1)}%`,icon:Ti,iconBg:"bg-orange-500",data:r,tooltip:{title:"Customer Retention with Trend Analysis",description:"Percentage of repeat customers with period-over-period change tracking and retention forecasting capabilities.",businessImpact:"Monitor retention trends to reduce churn, increase lifetime value, and focus marketing efforts on customer satisfaction."}})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 sm:mb-0 flex items-center",children:["Extended Revenue Analysis",n.jsx(pl,{title:"Extended Revenue Analysis",description:"Long-term revenue trends with up to 2+ years of historical data, seasonal pattern analysis, and advanced forecasting with ML predictions.",businessImpact:"Identify long-term trends, seasonal patterns, and plan strategic business decisions based on extended historical performance data.",className:"ml-2"})]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("select",{value:i,onChange:l=>a(l.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"12months",children:"Last 12 months"}),n.jsx("option",{value:"24months",children:"Last 2 years"}),n.jsx("option",{value:"alltime",children:"All time"})]})})]}),n.jsx(kJ,{data:r.revenueByMonthAllTime||[]}),n.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(L1,{className:"w-4 h-4 mr-2 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-purple-900",children:"AI Forecast"}),n.jsx("span",{className:"ml-2 text-xs bg-purple-600 text-white px-2 py-1 rounded-full",children:"Coming Soon"})]}),n.jsxs("p",{className:"text-xs text-purple-700",children:["Next month predicted revenue: ",n.jsx("strong",{children:r.revenueForecast?.nextMonth?sa(r.revenueForecast.nextMonth):sa(r.totalRevenue||0)}),"(",r.revenueForecast?.growthRate?`${r.revenueForecast.growthRate>0?"+":""}${r.revenueForecast.growthRate.toFixed(1)}%`:"Calculating...",")"]})]})]}),n.jsx(_J,{data:r})]}),t&&n.jsx(EJ,{globalInsights:t,data:r}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.jsx(IJ,{})})]}):null},Bg=({title:r,value:t,change:s,forecast:i,icon:a,iconBg:o,data:c,tooltip:l})=>{const u=s>0;return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx(zi,{className:"w-4 h-4 text-purple-400"})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:r}),l&&n.jsx(pl,{title:l.title,description:l.description,businessImpact:l.businessImpact,className:"ml-2"})]}),n.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:t}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center",children:[u?n.jsx(Tk,{className:"w-4 h-4 text-green-500 mr-1"}):n.jsx(Pk,{className:"w-4 h-4 text-red-500 mr-1"}),n.jsxs("span",{className:`text-xs font-medium ${u?"text-green-600":"text-red-600"}`,children:[Math.abs(s),"% vs last period"]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(ti,{className:"w-3 h-3 text-purple-500 mr-1"}),n.jsxs("span",{className:"text-xs text-purple-600 font-medium",children:["Forecast: ",i]}),c?.revenueForecast?.confidence&&n.jsx("span",{className:`ml-2 px-1.5 py-0.5 rounded text-xs font-medium ${c.revenueForecast.confidence==="high"?"bg-green-100 text-green-700":c.revenueForecast.confidence==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:c.revenueForecast.confidence})]})]})]}),n.jsx("div",{className:`w-10 h-10 ${o} rounded-lg flex items-center justify-center ml-4`,children:n.jsx(a,{className:"w-5 h-5 text-white"})})]})]})},kJ=({data:r})=>{if(!r||r.length===0)return n.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ho,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Extended historical data will appear here"})]})});const t=Math.max(...r.map(s=>s.revenue));return n.jsxs("div",{className:"h-64",children:[n.jsx("div",{className:"flex items-end justify-between h-full space-x-1 px-2",children:r.map((s,i)=>n.jsxs("div",{className:"flex-1 flex flex-col items-center group",children:[n.jsx("div",{className:"bg-gradient-to-t from-purple-600 to-purple-400 rounded-t w-full min-h-[4px] transition-all duration-500 hover:from-purple-700 hover:to-purple-500",style:{height:`${Math.max(s.revenue/t*200,4)}px`},title:`${s.month}/${s.year}: ${sa(s.revenue)}`}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2 transform -rotate-45 origin-top-left",children:[s.month,"/",String(s.year).slice(-2)]})]},i))}),n.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:" Advanced trend analysis with ML predictions coming soon"})]})},_J=({data:r})=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Ti,{className:"w-5 h-5 mr-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer Insights"}),n.jsx(zi,{className:"w-4 h-4 ml-2 text-purple-400"}),n.jsx(pl,{title:"Customer Lifetime Value & Insights",description:"Advanced customer analytics including predicted lifetime value, churn risk assessment, and high-value customer identification.",businessImpact:"Use these insights to focus retention efforts, identify your most valuable customers, and reduce churn through targeted strategies.",className:"ml-2"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600",children:"Avg Customer Lifetime Value"}),n.jsx("span",{className:"font-semibold text-gray-900",children:sa((r.avgValue||0)*3.2)})]}),n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600",children:"Churn Risk"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Low (12%)"}),n.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-green-500 rounded-full w-[12%]"})})]})]}),n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[n.jsx("span",{className:"text-gray-600",children:"High-Value Customers"}),n.jsx("span",{className:"font-semibold text-gray-900",children:Math.round((r.returningCustomers||0)*.3)})]}),n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsx("span",{className:"text-gray-600",children:"Predicted Monthly Churn"}),n.jsx("span",{className:"font-semibold text-gray-900",children:"2.1%"})]})]}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(mp,{className:"w-4 h-4 mr-2 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Retention Opportunity"})]}),n.jsx("p",{className:"text-xs text-blue-700",children:"Focus on customers with 1-2 orders to increase retention by 23%"})]})]}),EJ=({globalInsights:r,data:t})=>n.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black text-white rounded-lg p-6 relative overflow-hidden",children:[n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx(eA,{className:"w-6 h-6 mr-3 text-blue-400"}),n.jsx("h3",{className:"text-xl font-semibold",children:"Global Market Context"}),n.jsx("span",{className:"ml-3 text-xs bg-blue-500 px-2 py-1 rounded-full",children:"Premium"}),n.jsx(pl,{title:"Global Market Context",description:"Compare your performance against similar stores, platform averages, and market trends. Includes competitive positioning and performance tier ranking.",businessImpact:"Understand your market position to identify competitive advantages, pricing opportunities, and areas for improvement compared to similar businesses.",className:"ml-2"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:[r.yourPerformance?.performanceVsType||0,"%"]}),n.jsx("div",{className:"text-sm text-gray-300",children:"vs Type Average"}),n.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[r.yourPerformance?.performanceVsType>0?"Above":"Below"," average"]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-400 mb-1",children:(()=>{const s=r.yourPerformance?.performanceVsType||0;return s>=50?"Top 10%":s>=25?"Top 25%":s>=0?"Top 50%":"Bottom 50%"})()}),n.jsx("div",{className:"text-sm text-gray-300",children:"Performance Tier"}),n.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["among ",r.yourPerformance?.type||"your type"," stores"]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-400 mb-1",children:sa(r.platformOverview?.avgPlatformOrderValue||0)}),n.jsx("div",{className:"text-sm text-gray-300",children:"Platform Average AOV"}),n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"All sellers"})]})]}),n.jsxs("div",{className:"mt-6 p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx($u,{className:"w-4 h-4 mr-2 text-yellow-400"}),n.jsx("span",{className:"text-sm font-medium",children:"Market Opportunity"})]}),n.jsxs("p",{className:"text-xs text-gray-300",children:["Your AOV is ",r.yourPerformance?.performanceVsType||0,"% above type average. Consider exploring growth opportunities in your market segment."]})]})]}),n.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500 opacity-10 rounded-full transform translate-x-32 -translate-y-32"})]}),OJ=({globalInsights:r,data:t})=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center justify-center",children:[n.jsx(eA,{className:"w-6 h-6 mr-2"}),"Global Market Insights"]}),n.jsx("p",{className:"text-gray-600",children:"Platform-wide trends and competitive analysis"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[n.jsx(Hk,{className:"w-8 h-8 mx-auto mb-3 text-blue-500"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:sa(r.platformOverview?.totalRevenue||0)}),n.jsx("div",{className:"text-sm text-gray-600",children:"Platform Revenue"})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[n.jsx(cy,{className:"w-8 h-8 mx-auto mb-3 text-green-500"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:r.platformOverview?.totalOrders||0}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Platform Orders"})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[n.jsx(mn,{className:"w-8 h-8 mx-auto mb-3 text-purple-500"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:sa(r.platformOverview?.avgPlatformOrderValue||0)}),n.jsx("div",{className:"text-sm text-gray-600",children:"Avg Order Value"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Store Types Performance"}),n.jsx("div",{className:"space-y-3",children:r.competitiveInsights?.topPerformingTypes?.slice(0,5).map((s,i)=>n.jsxs("div",{className:"flex items-center justify-between py-2",children:[n.jsxs("span",{className:"text-gray-700 capitalize",children:[s._id," Stores"]}),n.jsx("span",{className:"font-semibold text-gray-900",children:sa(s.totalRevenue)})]},i))})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Growth Opportunities"}),n.jsx("div",{className:"space-y-3",children:r.competitiveInsights?.growthOpportunities?.slice(0,3).map((s,i)=>n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[n.jsxs("div",{className:"font-medium text-green-900 capitalize",children:[s._id," Stores"]}),n.jsxs("div",{className:"text-sm text-green-700",children:[s.storeCount," active sellers"]})]},i))})]})]})]}),IJ=()=>n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(L1,{className:"w-5 h-5 mr-2 text-purple-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Recommendations"}),n.jsx("span",{className:"ml-2 text-xs bg-purple-600 text-white px-2 py-1 rounded-full",children:"Beta Coming Soon"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"p-4 bg-white rounded-lg border border-purple-100",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx(ti,{className:"w-4 h-4 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900 mb-1",children:"Optimize Pricing"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Consider increasing prices by 8-12% based on market analysis"}),n.jsx("div",{className:"text-xs text-purple-600 mt-2",children:"High confidence  Revenue impact: +15%"})]})]})}),n.jsx("div",{className:"p-4 bg-white rounded-lg border border-purple-100",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx(Ti,{className:"w-4 h-4 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900 mb-1",children:"Focus on Retention"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Launch email campaign for 1-time buyers"}),n.jsx("div",{className:"text-xs text-purple-600 mt-2",children:"Medium confidence  Retention impact: +23%"})]})]})})]}),n.jsxs("div",{className:"mt-6 p-3 bg-purple-100 rounded-lg",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(Ta,{className:"w-4 h-4 mr-2 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-purple-900",children:"AI Learning"})]}),n.jsx("p",{className:"text-xs text-purple-700",children:"Recommendations improve over time as we analyze more of your data"})]})]}),v2=()=>{const{user:r}=Fn(),[t,s]=ee.useState(!0),i=ee.useCallback(async(A,f={})=>{if(!t||!r)return;const p={event:A,userId:r._id,storeId:r.storeId,timestamp:new Date().toISOString(),properties:{...f,userAgent:navigator.userAgent,referrer:document.referrer,currentUrl:window.location.href,currentPlan:r.package||"basic",viewport:{width:window.innerWidth,height:window.innerHeight}}};try{await fetch("http://localhost:10000/api/analytics/track-event",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(p)})}catch(m){console.warn("Analytics tracking failed:",m)}},[r,t]),a=ee.useCallback((A,f="overview")=>{i("analytics_view",{analyticsLevel:A,viewType:f,category:"engagement"})},[i]),o=ee.useCallback((A,f,p)=>{i("upgrade_click",{currentLevel:A,targetLevel:f,source:p,category:"conversion"})},[i]),c=ee.useCallback((A,f,p)=>{i("feature_attempt",{feature:A,currentLevel:f,requiredLevel:p,category:"engagement"})},[i]),l=ee.useCallback((A,f,p=!1)=>{i("export_attempt",{format:A,currentLevel:f,success:p,category:"engagement"})},[i]),u=ee.useCallback((A,f,p)=>{i("tab_switch",{fromTab:A,toTab:f,currentLevel:p,category:"navigation"})},[i]),d=ee.useCallback((A,f)=>{i("time_on_analytics",{duration:A,currentLevel:f,category:"engagement"})},[i]);return{trackEvent:i,trackAnalyticsView:a,trackUpgradeClick:o,trackFeatureAttempt:c,trackExportAttempt:l,trackTabSwitch:u,trackTimeOnPage:d,setTrackingEnabled:s}},sv=({currentLevel:r=1,targetLevel:t=2,feature:s,compact:i=!1})=>{const{trackUpgradeClick:a}=v2();if(i)return n.jsx(PJ,{currentLevel:r});const c={2:{title:"Upgrade to Standard",subtitle:"Unlock Advanced Analytics",price:"LKR 2,500/month",color:"from-blue-600 to-blue-700",features:["6-month historical trends","Advanced charts & insights","PDF/Excel export","Customer analytics","Operational metrics","AI insights preview"]},3:{title:"Upgrade to Premium",subtitle:"Get Global Market Insights",price:"LKR 4,999/month",color:"from-purple-600 to-purple-700",features:["12+ month history & forecasting","Global market insights","Competitive analysis","Customer lifetime value","Automated weekly reports","Full AI recommendations"]}}[t];return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(aa,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:s||`Level ${t} Analytics Required`}),n.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Unlock powerful insights and data-driven decisions with advanced analytics features."})]}),n.jsxs("div",{className:`bg-gradient-to-br ${c.color} text-white rounded-xl p-8 mb-8 relative overflow-hidden`,children:[n.jsx("div",{className:"relative z-10",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[n.jsxs("div",{className:"mb-6 lg:mb-0",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(zi,{className:"w-6 h-6 mr-2"}),n.jsx("h3",{className:"text-2xl font-bold",children:c.title})]}),n.jsx("p",{className:"text-white/90 mb-4",children:c.subtitle}),n.jsx("div",{className:"text-3xl font-bold",children:c.price})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("button",{onClick:()=>a(r,t,"upgrade_prompt_main"),className:"bg-white text-gray-900 font-semibold px-8 py-3 rounded-lg hover:bg-gray-100 transition-colors flex items-center",children:["Upgrade Now",n.jsx(Mo,{className:"w-5 h-5 ml-2"})]})})]})}),n.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full transform translate-x-32 -translate-y-32"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/5 rounded-full transform -translate-x-16 translate-y-16"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[n.jsx(TJ,{currentLevel:r}),n.jsx(FJ,{features:c.features,targetLevel:t})]}),n.jsx(UJ,{targetLevel:t})]})},PJ=({currentLevel:r})=>{const{trackUpgradeClick:t}=v2(),s=r+1,a={2:{name:"Standard",color:"bg-blue-600",price:"2,500"},3:{name:"Premium",color:"bg-purple-600",price:"4,999"}}[s];return a?n.jsxs("div",{className:`${a.color} text-white px-4 py-3 rounded-lg flex items-center justify-between`,children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ta,{className:"w-5 h-5 mr-2"}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-sm",children:["Upgrade to ",a.name]}),n.jsxs("div",{className:"text-xs text-white/80",children:["LKR ",a.price,"/month"]})]})]}),n.jsx("button",{onClick:()=>t(r,s,"compact_upgrade_prompt"),className:"bg-white/20 hover:bg-white/30 px-3 py-1 rounded text-xs font-medium transition-colors",children:"Upgrade"})]}):null},TJ=({currentLevel:r})=>{const t={1:["30-day sales snapshot","Basic revenue metrics","Customer count","Top 3 products/services","New vs returning customers"],2:["6-month historical data","Revenue trend analysis","Advanced customer insights","PDF/Excel exports","Operational metrics"]};return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[n.jsx(ho,{className:"w-5 h-5 mr-2 text-gray-400"}),"Your Current Plan (Level ",r,")"]}),n.jsx("ul",{className:"space-y-3",children:t[r]?.map((s,i)=>n.jsxs("li",{className:"flex items-center text-gray-600",children:[n.jsx(Xa,{className:"w-4 h-4 text-green-500 mr-3 flex-shrink-0"}),s]},i))})]})},FJ=({features:r,targetLevel:t})=>n.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[n.jsx(zi,{className:"w-5 h-5 mr-2 text-purple-600"}),"Level ",t," Features (Locked)"]}),n.jsx("ul",{className:"space-y-3",children:r.map((s,i)=>n.jsxs("li",{className:"flex items-center text-gray-500",children:[n.jsx(aa,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),s]},i))}),n.jsx("div",{className:"mt-6 pt-6 border-t border-gray-300",children:n.jsxs("button",{className:"w-full bg-black text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors flex items-center justify-center",children:[n.jsx(aa,{className:"w-4 h-4 mr-2"}),"Unlock These Features"]})})]}),UJ=({targetLevel:r})=>{const s={2:{title:" Advanced Trend Analysis",description:"See how your business performs over time with detailed charts and growth metrics.",visual:n.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 relative overflow-hidden",children:[n.jsx("div",{className:"flex items-end justify-between h-20 space-x-2",children:[30,45,25,60,40,75].map((i,a)=>n.jsx("div",{className:"bg-black rounded-t opacity-30",style:{height:`${i}%`,width:"16.666%"}},a))}),n.jsx("div",{className:"absolute inset-0 bg-white/50 flex items-center justify-center",children:n.jsx(aa,{className:"w-8 h-8 text-gray-400"})})]})},3:{title:" Global Market Insights",description:"Compare your performance with industry benchmarks and discover growth opportunities.",visual:n.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 relative overflow-hidden",children:[n.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:9}).map((i,a)=>n.jsx("div",{className:"bg-black h-4 rounded opacity-30"},a))}),n.jsx("div",{className:"absolute inset-0 bg-white/50 flex items-center justify-center",children:n.jsx(eA,{className:"w-8 h-8 text-gray-400"})})]})}}[r];return s?n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-6",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:s.title}),n.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),n.jsxs("button",{className:"text-black font-medium hover:underline flex items-center",children:["See what you'll get",n.jsx(Mo,{className:"w-4 h-4 ml-1"})]})]}),n.jsx("div",{className:"w-full lg:w-64",children:s.visual})]})}):null};class LJ extends Ft.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,s){this.setState({error:t,errorInfo:s}),window.gtag&&window.gtag("event","exception",{description:t.toString(),fatal:!1}),console.error("Analytics Error Boundary:",t,s)}handleRetry=()=>{this.setState(t=>({hasError:!1,error:null,errorInfo:null,retryCount:t.retryCount+1}))};render(){return this.state.hasError?n.jsx("div",{className:"min-h-[400px] bg-white border border-gray-200 rounded-lg p-8 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(Sa,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Analytics Temporarily Unavailable"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"We're experiencing issues loading your analytics data. This is usually temporary."}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:this.handleRetry,className:"w-full bg-black text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors flex items-center justify-center",disabled:this.state.retryCount>=3,children:[n.jsx(sc,{className:"w-4 h-4 mr-2"}),this.state.retryCount>=3?"Too Many Retries":"Try Again"]}),this.state.retryCount>=3&&n.jsx("p",{className:"text-sm text-gray-500",children:"Please refresh the page or contact support if the issue persists."})]}),!1]})}):this.props.children}}const Ef=({variant:r="card",className:t="",count:s=1})=>{const i=Array.from({length:s},(a,o)=>n.jsxs("div",{children:[r==="card"&&n.jsx(DJ,{className:t}),r==="chart"&&n.jsx(MJ,{className:t}),r==="text"&&n.jsx(RJ,{className:t}),r==="metric"&&n.jsx(QJ,{className:t}),r==="table"&&n.jsx($J,{className:t})]},o));return s===1?i[0]:n.jsx(n.Fragment,{children:i})},DJ=({className:r=""})=>n.jsx("div",{className:`bg-white border border-gray-200 rounded-lg p-6 animate-pulse ${r}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-3"}),n.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),n.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"})]})}),MJ=({className:r=""})=>n.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-6 animate-pulse ${r}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"h-5 bg-gray-200 rounded w-32"}),n.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]}),n.jsx("div",{className:"h-64 flex items-end justify-between space-x-2 px-2",children:Array.from({length:8},(t,s)=>n.jsx("div",{className:"bg-gray-200 rounded-t w-full",style:{height:`${Math.random()*150+50}px`}},s))}),n.jsx("div",{className:"flex justify-between mt-4 space-x-2",children:Array.from({length:8},(t,s)=>n.jsx("div",{className:"h-3 bg-gray-200 rounded w-8"},s))})]}),RJ=({className:r="",lines:t=3})=>n.jsx("div",{className:`animate-pulse ${r}`,children:Array.from({length:t},(s,i)=>n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2",style:{width:`${Math.random()*40+60}%`}},i))}),QJ=({className:r=""})=>n.jsx("div",{className:`bg-white border border-gray-200 rounded-lg p-4 sm:p-6 animate-pulse ${r}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 mb-2"}),n.jsx("div",{className:"h-6 bg-gray-200 rounded w-24 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),n.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-lg"})]})}),$J=({className:r="",rows:t=5})=>n.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-6 animate-pulse ${r}`,children:[n.jsx("div",{className:"h-5 bg-gray-200 rounded w-32 mb-6"}),n.jsx("div",{className:"space-y-4",children:Array.from({length:t},(s,i)=>n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]},i))})]}),HJ=()=>n.jsxs("div",{className:"min-h-screen bg-white",children:[n.jsx("div",{className:"border-b border-gray-200 bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg mr-4 animate-pulse"}),n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-7 bg-gray-200 rounded w-24 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]})]}),n.jsx("div",{className:"h-10 bg-gray-200 rounded-lg w-32 animate-pulse"})]}),n.jsx("div",{className:"flex space-x-8 mt-6",children:Array.from({length:3},(r,t)=>n.jsx("div",{className:"h-6 bg-gray-200 rounded w-20 animate-pulse"},t))})]})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:n.jsx(Ef,{variant:"metric",count:4})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx(Ef,{variant:"chart",className:"lg:col-span-2"}),n.jsx(Ef,{variant:"card"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(Ef,{variant:"table"}),n.jsx(Ef,{variant:"card"})]})]})})]}),VJ=()=>{const{user:r}=Fn(),[t,s]=ee.useState(null),[i,a]=ee.useState(null),[o,c]=ee.useState(!0),[l,u]=ee.useState(null),[d,A]=ee.useState("overview"),{trackAnalyticsView:f,trackTabSwitch:p,trackTimeOnPage:m,trackFeatureAttempt:g}=v2(),b=ee.useRef(Date.now()),v=ee.useRef("overview");ee.useEffect(()=>{r?.role==="store_owner"&&r?.storeId&&w()},[r]),ee.useEffect(()=>(t?.analyticsLevel&&f(t.analyticsLevel,d),()=>{if(b.current){const E=Date.now()-b.current;m(Math.round(E/1e3),t?.analyticsLevel||1)}}),[t?.analyticsLevel,d,f,m]);const y=(E,_)=>{_?(p(v.current,E,t?.analyticsLevel||1),v.current=E,A(E)):g(`${E}_tab`,t?.analyticsLevel||1,E==="trends"?2:3)},w=async()=>{console.log(" Fetching analytics for user:",{userId:r?._id,storeId:r?.storeId,role:r?.role,email:r?.email,timestamp:new Date().toISOString()});try{if(c(!0),u(null),!r?.storeId)throw console.error(" No storeId found for user"),new Error("No store ID found. Please contact support.");console.log(" Making analytics request...");const E=await fetch(`http://localhost:10000/api/analytics/${r.storeId}`,{credentials:"include",headers:{"Content-Type":"application/json"}});console.log(" Analytics response status:",{status:E.status,statusText:E.statusText,ok:E.ok});const _=await E.json();if(console.log(" Analytics data received:",{analyticsLevel:_.analyticsLevel,packageName:_.packageName,hasError:!!_.error,dataKeys:Object.keys(_),totalRevenue:_.totalRevenue,totalCount:_.totalCount}),E.ok)s(_),console.log(" Analytics data set successfully");else if(_.error)console.warn(" Server returned error with fallback data:",_.error),s(_),u(`${_.error}${_.errorDetails?" - "+_.errorDetails:""}`);else throw new Error(`Server error: ${E.status} ${E.statusText}`);if(_.analyticsLevel>=3){console.log(" Fetching global insights for premium user...");try{const S=await fetch("http://localhost:10000/api/analytics/global/insights",{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" Global insights response:",{status:S.status,ok:S.ok}),S.ok){const N=await S.json();a(N.globalInsights),console.log(" Global insights loaded successfully")}else console.warn(" Could not load global insights:",S.status)}catch(S){console.warn(" Global insights fetch error:",S)}}}catch(E){console.error(" Analytics fetch error:",{message:E.message,stack:E.stack,timestamp:new Date().toISOString()});let _="Unable to load analytics data";E.message.includes("No store ID")?_="Your account is not properly set up. Please contact support.":E.message.includes("Failed to fetch")||E.message.includes("NetworkError")?_="Network error. Please check your connection and try again.":E.message.includes("403")||E.message.includes("Access denied")?_="Access denied. You may not have permission to view this data.":E.message.includes("404")&&(_="Store not found. Please verify your store setup."),u(_),s({analyticsLevel:1,packageName:"basic",totalRevenue:0,totalCount:0,avgValue:0,topProducts:[],topServices:[],totalUniqueCustomers:0,returningCustomers:0,customerMixNewVsReturning:{new:0,returning:0,percentage:0},bestSellingItem:null,currency:"LKR",error:_})}finally{c(!1)}};if(!r||r.role!=="store_owner")return n.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-16 h-16 bg-black rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(ho,{className:"w-8 h-8 text-white"})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600",children:"Only store owners can access sales analytics"})]})});if(o)return n.jsx(HJ,{});if(l)return n.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(ho,{className:"w-8 h-8 text-white"})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error Loading Analytics"}),n.jsx("p",{className:"text-gray-600 mb-6",children:l}),n.jsx("button",{onClick:w,className:"bg-black text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:"Try Again"})]})});const j=t?.analyticsLevel||1,C=t?.packageName||"basic",B=[{id:"overview",name:"Overview",icon:ho,available:!0},{id:"trends",name:"Trends",icon:ti,available:j>=2,upgradePrompt:j<2?"Upgrade to Standard":null},{id:"global",name:"Global Insights",icon:eA,available:j>=3,upgradePrompt:j<3?"Upgrade to Premium":null}];return n.jsx(LJ,{children:n.jsxs("div",{className:"min-h-screen bg-white",children:[n.jsx("div",{className:"border-b border-gray-200 bg-white sticky top-0 z-40",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{className:"flex items-center mb-4 sm:mb-0",children:[n.jsx("div",{className:"w-10 h-10 bg-black rounded-lg flex items-center justify-center mr-4",children:n.jsx(ho,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Analytics"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[C.charAt(0).toUpperCase()+C.slice(1)," Plan  Level ",j]})]})]}),j<3&&n.jsx(sv,{currentLevel:j,compact:!0})]}),n.jsx("nav",{className:"flex space-x-4 sm:space-x-8 mt-6 -mb-px",children:B.map(E=>{const _=E.icon,S=d===E.id,N=E.available;return n.jsxs("button",{onClick:()=>y(E.id,N),disabled:!N,className:`
                    flex items-center space-x-2 py-3 px-1 border-b-2 font-medium text-sm transition-colors
                    ${S&&N?"border-black text-black":N?"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":"border-transparent text-gray-300 cursor-not-allowed"}
                  `,children:[n.jsx(_,{className:`w-4 h-4 ${N?"":"opacity-50"}`}),n.jsx("span",{children:E.name}),E.upgradePrompt&&n.jsx("span",{className:"text-xs bg-black text-white px-2 py-1 rounded-full ml-2",children:"Pro"})]},E.id)})})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[d==="overview"&&n.jsxs(n.Fragment,{children:[j===1&&n.jsx(bJ,{data:t}),j===2&&n.jsx(CC,{data:t}),j>=3&&n.jsx(BC,{data:t,globalInsights:i})]}),d==="trends"&&n.jsx(n.Fragment,{children:j>=2?n.jsx(CC,{data:t,viewMode:"trends"}):n.jsx(sv,{currentLevel:j,targetLevel:2,feature:"Historical Trends & Advanced Analytics"})}),d==="global"&&n.jsx(n.Fragment,{children:j>=3?n.jsx(BC,{data:t,globalInsights:i,viewMode:"global"}):n.jsx(sv,{currentLevel:j,targetLevel:3,feature:"Global Market Insights & Competitive Analysis"})})]})]})})},zJ=()=>{const{user:r}=Fn(),[t,s]=ee.useState(null),[i,a]=ee.useState(!0),[o,c]=ee.useState(!1),[l,u]=ee.useState("payment"),[d,A]=ee.useState(""),[f,p]=ee.useState(""),[m,g]=ee.useState(!1),[b,v]=ee.useState({});ee.useEffect(()=>{r?.email==="admin@aio.com"&&y()},[r]);const y=async()=>{try{a(!0);const _=await fetch("http://localhost:10000/api/platform-settings",{credentials:"include"});if(_.ok){const S=await _.json();s(S),v(S)}else A("Failed to fetch platform settings")}catch(_){console.error("Error fetching settings:",_),A("Network error occurred")}finally{a(!1)}},w=async()=>{c(!0),A(""),p("");try{const _=await fetch("http://localhost:10000/api/platform-settings",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(_.ok){const S=await _.json();s(S),v(S),p("Platform settings updated successfully!")}else{const S=await _.json();A(S.error||"Failed to update settings")}}catch(_){console.error("Error updating settings:",_),A("Network error occurred")}finally{c(!1)}},j=async()=>{try{const _=await fetch("http://localhost:10000/api/platform-settings/reset",{method:"POST",credentials:"include"});if(_.ok){const S=await _.json();s(S),v(S),p("Platform settings reset to defaults!"),g(!1)}else A("Failed to reset settings")}catch(_){console.error("Error resetting settings:",_),A("Network error occurred")}},C=(_,S)=>{const N=_.split("."),O={...b};let k=O;for(let I=0;I<N.length-1;I++)k[N[I]]||(k[N[I]]={}),k=k[N[I]];k[N[N.length-1]]=S,v(O)},B=(_,S)=>S.split(".").reduce((N,O)=>N?.[O],_);if(!r||r.email!=="admin@aio.com")return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md",children:[n.jsx(Sa,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600",children:"Only platform administrators can access these settings."})]})});if(i)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(cs,{size:"xl"})});const E=[{id:"payment",name:"Payment Settings",icon:gl},{id:"subscription",name:"Subscriptions",icon:ms},{id:"platform",name:"Platform Config",icon:d5},{id:"features",name:"Feature Flags",icon:Ta}];return n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-3",children:[n.jsx(Ch,{className:"w-8 h-8"}),n.jsx("span",{children:"Platform Settings"})]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Configure platform-wide settings and policies"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>g(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2",children:[n.jsx(Vk,{className:"w-4 h-4"}),n.jsx("span",{children:"Reset to Defaults"})]}),n.jsxs("button",{onClick:w,disabled:o,className:"bg-black text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[o?n.jsx(cs,{size:"sm"}):n.jsx(jR,{className:"w-4 h-4"}),n.jsx("span",{children:o?"Saving...":"Save Changes"})]})]})]})}),d&&n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 flex items-center space-x-2",children:[n.jsx(Sa,{className:"w-5 h-5"}),n.jsx("span",{children:d})]}),f&&n.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6 flex items-center space-x-2",children:[n.jsx(Xr,{className:"w-5 h-5"}),n.jsx("span",{children:f})]}),t&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(u5,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"font-medium text-blue-900",children:"Settings Information"})]}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsxs("p",{children:["Version: ",t.version," | Last updated: ",new Date(t.updatedAt).toLocaleString()]}),t.lastUpdatedBy&&n.jsxs("p",{children:["Updated by: ",t.lastUpdatedBy.name," (",t.lastUpdatedBy.email,")"]})]})]}),n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:E.map(_=>{const S=_.icon;return n.jsxs("button",{onClick:()=>u(_.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${l===_.id?"border-black text-black":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(S,{className:"w-5 h-5"}),n.jsx("span",{children:_.name})]},_.id)})})})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[l==="subscription"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(ms,{className:"w-6 h-6 text-gray-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Subscription Settings"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Monthly Price (",B(b,"subscriptionSettings.currency")||"LKR",")"]}),n.jsx("input",{type:"number",min:"0",value:B(b,"subscriptionSettings.monthlyPrice")||0,onChange:_=>C("subscriptionSettings.monthlyPrice",parseFloat(_.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subscription Duration (days)"}),n.jsx("input",{type:"number",min:"1",value:B(b,"subscriptionSettings.duration")||30,onChange:_=>C("subscriptionSettings.duration",parseInt(_.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),n.jsxs("select",{value:B(b,"subscriptionSettings.currency")||"LKR",onChange:_=>C("subscriptionSettings.currency",_.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"LKR",children:"Sri Lankan Rupee (LKR)"}),n.jsx("option",{value:"USD",children:"US Dollar (USD)"}),n.jsx("option",{value:"EUR",children:"Euro (EUR)"})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trial Period (days)"}),n.jsx("input",{type:"number",min:"0",value:B(b,"subscriptionSettings.trialPeriod")||0,onChange:_=>C("subscriptionSettings.trialPeriod",parseInt(_.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]})]})]}),l==="payment"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(gl,{className:"w-6 h-6 text-gray-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Payment Processing Settings"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[n.jsx(u5,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"font-medium text-blue-900",children:"PayHere Processing Fee"})]}),n.jsx("p",{className:"text-blue-800 mb-2",children:B(b,"paymentProcessing.description")||"PayHere processing fee - 4% of total transaction amount"}),n.jsxs("div",{className:"bg-white rounded px-3 py-2 text-blue-900 font-medium",children:["Fixed Rate: ",((B(b,"paymentProcessing.payhereProcessingFee")||.04)*100).toFixed(2),"%"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Processing Fee (%)"}),n.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:(B(b,"paymentSettings.processingFee")||0)*100,onChange:_=>C("paymentSettings.processingFee",parseFloat(_.target.value)/100),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Amount (LKR)"}),n.jsx("input",{type:"number",min:"0",value:B(b,"paymentSettings.minimumAmount")||0,onChange:_=>C("paymentSettings.minimumAmount",parseFloat(_.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Amount (LKR)"}),n.jsx("input",{type:"number",min:"0",value:B(b,"paymentSettings.maximumAmount")||0,onChange:_=>C("paymentSettings.maximumAmount",parseFloat(_.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Supported Payment Methods"}),n.jsx("div",{className:"space-y-4",children:(B(b,"paymentSettings.supportedMethods")||[]).map((_,S)=>n.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[n.jsx("div",{children:n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:_.enabled,onChange:N=>{const O=[...B(b,"paymentSettings.supportedMethods")||[]];O[S].enabled=N.target.checked,C("paymentSettings.supportedMethods",O)},className:"rounded border-gray-300 text-black focus:ring-black"}),n.jsx("span",{className:"font-medium",children:_.name})]})}),n.jsx("div",{children:n.jsx("input",{type:"text",value:_.description,onChange:N=>{const O=[...B(b,"paymentSettings.supportedMethods")||[]];O[S].description=N.target.value,C("paymentSettings.supportedMethods",O)},className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"Description"})}),n.jsx("div",{children:n.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:(_.processingFee||0)*100,onChange:N=>{const O=[...B(b,"paymentSettings.supportedMethods")||[]];O[S].processingFee=parseFloat(N.target.value)/100,C("paymentSettings.supportedMethods",O)},className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"Fee %"})}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Fee: ",((_.processingFee||0)*100).toFixed(2),"%"]})]})},_.id))})]})]}),l==="platform"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(d5,{className:"w-6 h-6 text-gray-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Platform Configuration"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Products per Store"}),n.jsx("input",{type:"number",min:"1",value:B(b,"platformConfig.maxProductsPerStore")||1e3,onChange:_=>C("platformConfig.maxProductsPerStore",parseInt(_.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Services per Store"}),n.jsx("input",{type:"number",min:"1",value:B(b,"platformConfig.maxServicesPerStore")||100,onChange:_=>C("platformConfig.maxServicesPerStore",parseInt(_.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Images per Product"}),n.jsx("input",{type:"number",min:"1",value:B(b,"platformConfig.maxImagesPerProduct")||10,onChange:_=>C("platformConfig.maxImagesPerProduct",parseInt(_.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Images per Service"}),n.jsx("input",{type:"number",min:"1",value:B(b,"platformConfig.maxImagesPerService")||5,onChange:_=>C("platformConfig.maxImagesPerService",parseInt(_.target.value)),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max File Size (MB)"}),n.jsx("input",{type:"number",min:"1",value:(B(b,"platformConfig.maxFileSize")||10485760)/1048576,onChange:_=>C("platformConfig.maxFileSize",parseFloat(_.target.value)*1048576),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[n.jsx(Wu,{className:"w-5 h-5 text-red-600"}),n.jsx("span",{className:"font-medium text-red-900",children:"Maintenance Mode"})]}),n.jsxs("label",{className:"flex items-center space-x-2 mb-3",children:[n.jsx("input",{type:"checkbox",checked:B(b,"platformConfig.maintenanceMode")||!1,onChange:_=>C("platformConfig.maintenanceMode",_.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),n.jsx("span",{className:"text-red-800",children:"Enable maintenance mode"})]}),n.jsx("textarea",{value:B(b,"platformConfig.maintenanceMessage")||"",onChange:_=>C("platformConfig.maintenanceMessage",_.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Maintenance message to display to users"})]})]}),l==="features"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(Ta,{className:"w-6 h-6 text-gray-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Feature Flags"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{key:"enableReviews",label:"Enable Reviews",icon:mn,description:"Allow customers to review products and services"},{key:"enableSubscriptions",label:"Enable Subscriptions",icon:ms,description:"Enable store owner subscriptions"},{key:"enableAnalytics",label:"Enable Analytics",icon:Lk,description:"Provide analytics and reporting features"},{key:"enableNotifications",label:"Enable Notifications",icon:uy,description:"Send email and push notifications"}].map(_=>{const S=_.icon;return n.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(S,{className:"w-6 h-6 text-gray-600 mt-1"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("input",{type:"checkbox",checked:B(b,`features.${_.key}`)||!1,onChange:N=>C(`features.${_.key}`,N.target.checked),className:"rounded border-gray-300 text-black focus:ring-black"}),n.jsx("span",{className:"font-medium text-gray-900",children:_.label})]}),n.jsx("p",{className:"text-sm text-gray-600",children:_.description})]})]})},_.key)})})]})]}),n.jsx(dO,{isOpen:m,onClose:()=>g(!1),title:"Reset Platform Settings",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 text-red-600",children:[n.jsx(Sa,{className:"w-8 h-8"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Are you sure?"}),n.jsx("p",{className:"text-sm text-gray-600",children:"This action will reset all platform settings to their default values and cannot be undone."})]})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"This will reset:"}),n.jsxs("ul",{className:"text-sm text-red-800 space-y-1",children:[n.jsx("li",{children:" Subscription pricing and settings"}),n.jsx("li",{children:" Payment processing configuration"}),n.jsx("li",{children:" Platform limits and configuration"}),n.jsx("li",{children:" Feature flags"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reset Settings"})]})]})})]})})};function KJ(){return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-4xl w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-extrabold text-white",children:"Help Center"}),n.jsx("p",{className:"mt-2 text-gray-400",children:"AIO Platform Support"})]}),n.jsxs("div",{className:"bg-zinc-900 p-8 rounded-lg shadow-md space-y-6 text-white",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"Getting Started"}),n.jsx("p",{className:"mt-2 font-medium text-gray-200",children:"Setting Up Your Store"}),n.jsx("p",{className:"text-sm text-gray-300",children:"Creating your store on AIO is simple. After signing up, you'll be guided through our setup wizard..."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold mt-6",children:"Selling on AIO"}),n.jsx("p",{className:"mt-2 font-medium text-gray-200",children:"Payment Processing"}),n.jsx("p",{className:"text-sm text-gray-300",children:"AIO supports major payment methods including credit cards, PayPal..."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold mt-6",children:"Customer Support"}),n.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300",children:[n.jsx("li",{children:"24/7 technical support"}),n.jsx("li",{children:"Knowledge base & tutorials"}),n.jsx("li",{children:"Community forums & webinars"})]})]})]})]})})}function GJ(){return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-4xl w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-extrabold text-white",children:"Contact Us"}),n.jsx("p",{className:"mt-2 text-gray-400",children:"AIO Platform Support"})]}),n.jsxs("div",{className:"bg-zinc-900 p-8 rounded-lg shadow-md space-y-6 text-white",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Email Support"}),n.jsx("ul",{className:"text-sm space-y-1 text-gray-300",children:n.jsxs("li",{children:[n.jsx("strong",{children:"General:"})," support@aio.com"]})})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mt-6",children:"Chat"}),n.jsx("p",{className:"text-sm text-gray-300",children:"Available 24/7 via Whatsapp."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mt-6",children:"Phone Support"}),n.jsx("p",{className:"text-sm text-gray-300",children:"Sri Lanka: +94 74 114 5704"}),n.jsx("p",{className:"text-sm text-gray-300",children:"Hours: MonFri 9AM8PM "})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mt-6",children:"Business Address"}),n.jsxs("address",{className:"text-sm not-italic text-gray-300",children:["No.50/A",n.jsx("br",{}),"3rd Mile Post",n.jsx("br",{}),"Batawala, Padukka",n.jsx("br",{}),"Western, Sri Lanka"]})]})]})]})})}const w2=ee.createContext({});function j2(r){const t=ee.useRef(null);return t.current===null&&(t.current=r()),t.current}const N2=typeof window<"u",hO=N2?ee.useLayoutEffect:ee.useEffect,Uy=ee.createContext(null);function S2(r,t){r.indexOf(t)===-1&&r.push(t)}function C2(r,t){const s=r.indexOf(t);s>-1&&r.splice(s,1)}const $c=(r,t,s)=>s>t?t:s<r?r:s;let B2=()=>{};const Hc={},fO=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function pO(r){return typeof r=="object"&&r!==null}const mO=r=>/^0[^.\s]+$/u.test(r);function k2(r){let t;return()=>(t===void 0&&(t=r()),t)}const Ro=r=>r,WJ=(r,t)=>s=>t(r(s)),qp=(...r)=>r.reduce(WJ),kp=(r,t,s)=>{const i=t-r;return i===0?1:(s-r)/i};class _2{constructor(){this.subscriptions=[]}add(t){return S2(this.subscriptions,t),()=>C2(this.subscriptions,t)}notify(t,s,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,s,i);else for(let o=0;o<a;o++){const c=this.subscriptions[o];c&&c(t,s,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ec=r=>r*1e3,tc=r=>r/1e3;function gO(r,t){return t?r*(1e3/t):0}const yO=(r,t,s)=>(((1-3*s+3*t)*r+(3*s-6*t))*r+3*t)*r,qJ=1e-7,YJ=12;function XJ(r,t,s,i,a){let o,c,l=0;do c=t+(s-t)/2,o=yO(c,i,a)-r,o>0?s=c:t=c;while(Math.abs(o)>qJ&&++l<YJ);return c}function Yp(r,t,s,i){if(r===t&&s===i)return Ro;const a=o=>XJ(o,0,1,r,s);return o=>o===0||o===1?o:yO(a(o),t,i)}const xO=r=>t=>t<=.5?r(2*t)/2:(2-r(2*(1-t)))/2,bO=r=>t=>1-r(1-t),vO=Yp(.33,1.53,.69,.99),E2=bO(vO),wO=xO(E2),jO=r=>(r*=2)<1?.5*E2(r):.5*(2-Math.pow(2,-10*(r-1))),O2=r=>1-Math.sin(Math.acos(r)),NO=bO(O2),SO=xO(O2),JJ=Yp(.42,0,1,1),ZJ=Yp(0,0,.58,1),CO=Yp(.42,0,.58,1),eZ=r=>Array.isArray(r)&&typeof r[0]!="number",BO=r=>Array.isArray(r)&&typeof r[0]=="number",tZ={linear:Ro,easeIn:JJ,easeInOut:CO,easeOut:ZJ,circIn:O2,circInOut:SO,circOut:NO,backIn:E2,backInOut:wO,backOut:vO,anticipate:jO},rZ=r=>typeof r=="string",kC=r=>{if(BO(r)){B2(r.length===4);const[t,s,i,a]=r;return Yp(t,s,i,a)}else if(rZ(r))return tZ[r];return r},kg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function nZ(r,t){let s=new Set,i=new Set,a=!1,o=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(A){c.has(A)&&(d.schedule(A),r()),A(l)}const d={schedule:(A,f=!1,p=!1)=>{const g=p&&a?s:i;return f&&c.add(A),g.has(A)||g.add(A),A},cancel:A=>{i.delete(A),c.delete(A)},process:A=>{if(l=A,a){o=!0;return}a=!0,[s,i]=[i,s],s.forEach(u),s.clear(),a=!1,o&&(o=!1,d.process(A))}};return d}const sZ=40;function kO(r,t){let s=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>s=!0,c=kg.reduce((j,C)=>(j[C]=nZ(o),j),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:A,update:f,preRender:p,render:m,postRender:g}=c,b=()=>{const j=Hc.useManualTiming?a.timestamp:performance.now();s=!1,Hc.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(j-a.timestamp,sZ),1)),a.timestamp=j,a.isProcessing=!0,l.process(a),u.process(a),d.process(a),A.process(a),f.process(a),p.process(a),m.process(a),g.process(a),a.isProcessing=!1,s&&t&&(i=!1,r(b))},v=()=>{s=!0,i=!0,a.isProcessing||r(b)};return{schedule:kg.reduce((j,C)=>{const B=c[C];return j[C]=(E,_=!1,S=!1)=>(s||v(),B.schedule(E,_,S)),j},{}),cancel:j=>{for(let C=0;C<kg.length;C++)c[kg[C]].cancel(j)},state:a,steps:c}}const{schedule:Ps,cancel:Zu,state:ra,steps:iv}=kO(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ro,!0);let t0;function iZ(){t0=void 0}const Ja={now:()=>(t0===void 0&&Ja.set(ra.isProcessing||Hc.useManualTiming?ra.timestamp:performance.now()),t0),set:r=>{t0=r,queueMicrotask(iZ)}},_O=r=>t=>typeof t=="string"&&t.startsWith(r),I2=_O("--"),aZ=_O("var(--"),P2=r=>aZ(r)?oZ.test(r.split("/*")[0].trim()):!1,oZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rh={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},_p={...Rh,transform:r=>$c(0,1,r)},_g={...Rh,default:1},ip=r=>Math.round(r*1e5)/1e5,T2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lZ(r){return r==null}const cZ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,F2=(r,t)=>s=>!!(typeof s=="string"&&cZ.test(s)&&s.startsWith(r)||t&&!lZ(s)&&Object.prototype.hasOwnProperty.call(s,t)),EO=(r,t,s)=>i=>{if(typeof i!="string")return i;const[a,o,c,l]=i.match(T2);return{[r]:parseFloat(a),[t]:parseFloat(o),[s]:parseFloat(c),alpha:l!==void 0?parseFloat(l):1}},uZ=r=>$c(0,255,r),av={...Rh,transform:r=>Math.round(uZ(r))},Rd={test:F2("rgb","red"),parse:EO("red","green","blue"),transform:({red:r,green:t,blue:s,alpha:i=1})=>"rgba("+av.transform(r)+", "+av.transform(t)+", "+av.transform(s)+", "+ip(_p.transform(i))+")"};function dZ(r){let t="",s="",i="",a="";return r.length>5?(t=r.substring(1,3),s=r.substring(3,5),i=r.substring(5,7),a=r.substring(7,9)):(t=r.substring(1,2),s=r.substring(2,3),i=r.substring(3,4),a=r.substring(4,5),t+=t,s+=s,i+=i,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const Hw={test:F2("#"),parse:dZ,transform:Rd.transform},Xp=r=>({test:t=>typeof t=="string"&&t.endsWith(r)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${r}`}),Nu=Xp("deg"),rc=Xp("%"),Jr=Xp("px"),AZ=Xp("vh"),hZ=Xp("vw"),_C={...rc,parse:r=>rc.parse(r)/100,transform:r=>rc.transform(r*100)},oh={test:F2("hsl","hue"),parse:EO("hue","saturation","lightness"),transform:({hue:r,saturation:t,lightness:s,alpha:i=1})=>"hsla("+Math.round(r)+", "+rc.transform(ip(t))+", "+rc.transform(ip(s))+", "+ip(_p.transform(i))+")"},Si={test:r=>Rd.test(r)||Hw.test(r)||oh.test(r),parse:r=>Rd.test(r)?Rd.parse(r):oh.test(r)?oh.parse(r):Hw.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Rd.transform(r):oh.transform(r),getAnimatableNone:r=>{const t=Si.parse(r);return t.alpha=0,Si.transform(t)}},fZ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pZ(r){return isNaN(r)&&typeof r=="string"&&(r.match(T2)?.length||0)+(r.match(fZ)?.length||0)>0}const OO="number",IO="color",mZ="var",gZ="var(",EC="${}",yZ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ep(r){const t=r.toString(),s=[],i={color:[],number:[],var:[]},a=[];let o=0;const l=t.replace(yZ,u=>(Si.test(u)?(i.color.push(o),a.push(IO),s.push(Si.parse(u))):u.startsWith(gZ)?(i.var.push(o),a.push(mZ),s.push(u)):(i.number.push(o),a.push(OO),s.push(parseFloat(u))),++o,EC)).split(EC);return{values:s,split:l,indexes:i,types:a}}function PO(r){return Ep(r).values}function TO(r){const{split:t,types:s}=Ep(r),i=t.length;return a=>{let o="";for(let c=0;c<i;c++)if(o+=t[c],a[c]!==void 0){const l=s[c];l===OO?o+=ip(a[c]):l===IO?o+=Si.transform(a[c]):o+=a[c]}return o}}const xZ=r=>typeof r=="number"?0:Si.test(r)?Si.getAnimatableNone(r):r;function bZ(r){const t=PO(r);return TO(r)(t.map(xZ))}const ed={test:pZ,parse:PO,createTransformer:TO,getAnimatableNone:bZ};function ov(r,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?r+(t-r)*6*s:s<1/2?t:s<2/3?r+(t-r)*(2/3-s)*6:r}function vZ({hue:r,saturation:t,lightness:s,alpha:i}){r/=360,t/=100,s/=100;let a=0,o=0,c=0;if(!t)a=o=c=s;else{const l=s<.5?s*(1+t):s+t-s*t,u=2*s-l;a=ov(u,l,r+1/3),o=ov(u,l,r),c=ov(u,l,r-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:i}}function q0(r,t){return s=>s>0?t:r}const zs=(r,t,s)=>r+(t-r)*s,lv=(r,t,s)=>{const i=r*r,a=s*(t*t-i)+i;return a<0?0:Math.sqrt(a)},wZ=[Hw,Rd,oh],jZ=r=>wZ.find(t=>t.test(r));function OC(r){const t=jZ(r);if(!t)return!1;let s=t.parse(r);return t===oh&&(s=vZ(s)),s}const IC=(r,t)=>{const s=OC(r),i=OC(t);if(!s||!i)return q0(r,t);const a={...s};return o=>(a.red=lv(s.red,i.red,o),a.green=lv(s.green,i.green,o),a.blue=lv(s.blue,i.blue,o),a.alpha=zs(s.alpha,i.alpha,o),Rd.transform(a))},Vw=new Set(["none","hidden"]);function NZ(r,t){return Vw.has(r)?s=>s<=0?r:t:s=>s>=1?t:r}function SZ(r,t){return s=>zs(r,t,s)}function U2(r){return typeof r=="number"?SZ:typeof r=="string"?P2(r)?q0:Si.test(r)?IC:kZ:Array.isArray(r)?FO:typeof r=="object"?Si.test(r)?IC:CZ:q0}function FO(r,t){const s=[...r],i=s.length,a=r.map((o,c)=>U2(o)(o,t[c]));return o=>{for(let c=0;c<i;c++)s[c]=a[c](o);return s}}function CZ(r,t){const s={...r,...t},i={};for(const a in s)r[a]!==void 0&&t[a]!==void 0&&(i[a]=U2(r[a])(r[a],t[a]));return a=>{for(const o in i)s[o]=i[o](a);return s}}function BZ(r,t){const s=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],c=r.indexes[o][i[o]],l=r.values[c]??0;s[a]=l,i[o]++}return s}const kZ=(r,t)=>{const s=ed.createTransformer(t),i=Ep(r),a=Ep(t);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?Vw.has(r)&&!a.values.length||Vw.has(t)&&!i.values.length?NZ(r,t):qp(FO(BZ(i,a),a.values),s):q0(r,t)};function UO(r,t,s){return typeof r=="number"&&typeof t=="number"&&typeof s=="number"?zs(r,t,s):U2(r)(r,t)}const _Z=r=>{const t=({timestamp:s})=>r(s);return{start:(s=!0)=>Ps.update(t,s),stop:()=>Zu(t),now:()=>ra.isProcessing?ra.timestamp:Ja.now()}},LO=(r,t,s=10)=>{let i="";const a=Math.max(Math.round(t/s),2);for(let o=0;o<a;o++)i+=Math.round(r(o/(a-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Y0=2e4;function L2(r){let t=0;const s=50;let i=r.next(t);for(;!i.done&&t<Y0;)t+=s,i=r.next(t);return t>=Y0?1/0:t}function EZ(r,t=100,s){const i=s({...r,keyframes:[0,t]}),a=Math.min(L2(i),Y0);return{type:"keyframes",ease:o=>i.next(a*o).value/t,duration:tc(a)}}const OZ=5;function DO(r,t,s){const i=Math.max(t-OZ,0);return gO(s-r(i),t-i)}const Zs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cv=.001;function IZ({duration:r=Zs.duration,bounce:t=Zs.bounce,velocity:s=Zs.velocity,mass:i=Zs.mass}){let a,o,c=1-t;c=$c(Zs.minDamping,Zs.maxDamping,c),r=$c(Zs.minDuration,Zs.maxDuration,tc(r)),c<1?(a=d=>{const A=d*c,f=A*r,p=A-s,m=zw(d,c),g=Math.exp(-f);return cv-p/m*g},o=d=>{const f=d*c*r,p=f*s+s,m=Math.pow(c,2)*Math.pow(d,2)*r,g=Math.exp(-f),b=zw(Math.pow(d,2),c);return(-a(d)+cv>0?-1:1)*((p-m)*g)/b}):(a=d=>{const A=Math.exp(-d*r),f=(d-s)*r+1;return-cv+A*f},o=d=>{const A=Math.exp(-d*r),f=(s-d)*(r*r);return A*f});const l=5/r,u=TZ(a,o,l);if(r=ec(r),isNaN(u))return{stiffness:Zs.stiffness,damping:Zs.damping,duration:r};{const d=Math.pow(u,2)*i;return{stiffness:d,damping:c*2*Math.sqrt(i*d),duration:r}}}const PZ=12;function TZ(r,t,s){let i=s;for(let a=1;a<PZ;a++)i=i-r(i)/t(i);return i}function zw(r,t){return r*Math.sqrt(1-t*t)}const FZ=["duration","bounce"],UZ=["stiffness","damping","mass"];function PC(r,t){return t.some(s=>r[s]!==void 0)}function LZ(r){let t={velocity:Zs.velocity,stiffness:Zs.stiffness,damping:Zs.damping,mass:Zs.mass,isResolvedFromDuration:!1,...r};if(!PC(r,UZ)&&PC(r,FZ))if(r.visualDuration){const s=r.visualDuration,i=2*Math.PI/(s*1.2),a=i*i,o=2*$c(.05,1,1-(r.bounce||0))*Math.sqrt(a);t={...t,mass:Zs.mass,stiffness:a,damping:o}}else{const s=IZ(r);t={...t,...s,mass:Zs.mass},t.isResolvedFromDuration=!0}return t}function X0(r=Zs.visualDuration,t=Zs.bounce){const s=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:t}:r;let{restSpeed:i,restDelta:a}=s;const o=s.keyframes[0],c=s.keyframes[s.keyframes.length-1],l={done:!1,value:o},{stiffness:u,damping:d,mass:A,duration:f,velocity:p,isResolvedFromDuration:m}=LZ({...s,velocity:-tc(s.velocity||0)}),g=p||0,b=d/(2*Math.sqrt(u*A)),v=c-o,y=tc(Math.sqrt(u/A)),w=Math.abs(v)<5;i||(i=w?Zs.restSpeed.granular:Zs.restSpeed.default),a||(a=w?Zs.restDelta.granular:Zs.restDelta.default);let j;if(b<1){const B=zw(y,b);j=E=>{const _=Math.exp(-b*y*E);return c-_*((g+b*y*v)/B*Math.sin(B*E)+v*Math.cos(B*E))}}else if(b===1)j=B=>c-Math.exp(-y*B)*(v+(g+y*v)*B);else{const B=y*Math.sqrt(b*b-1);j=E=>{const _=Math.exp(-b*y*E),S=Math.min(B*E,300);return c-_*((g+b*y*v)*Math.sinh(S)+B*v*Math.cosh(S))/B}}const C={calculatedDuration:m&&f||null,next:B=>{const E=j(B);if(m)l.done=B>=f;else{let _=B===0?g:0;b<1&&(_=B===0?ec(g):DO(j,B,E));const S=Math.abs(_)<=i,N=Math.abs(c-E)<=a;l.done=S&&N}return l.value=l.done?c:E,l},toString:()=>{const B=Math.min(L2(C),Y0),E=LO(_=>C.next(B*_).value,B,30);return B+"ms "+E},toTransition:()=>{}};return C}X0.applyToOptions=r=>{const t=EZ(r,100,X0);return r.ease=t.ease,r.duration=ec(t.duration),r.type="keyframes",r};function Kw({keyframes:r,velocity:t=0,power:s=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:c,min:l,max:u,restDelta:d=.5,restSpeed:A}){const f=r[0],p={done:!1,value:f},m=S=>l!==void 0&&S<l||u!==void 0&&S>u,g=S=>l===void 0?u:u===void 0||Math.abs(l-S)<Math.abs(u-S)?l:u;let b=s*t;const v=f+b,y=c===void 0?v:c(v);y!==v&&(b=y-f);const w=S=>-b*Math.exp(-S/i),j=S=>y+w(S),C=S=>{const N=w(S),O=j(S);p.done=Math.abs(N)<=d,p.value=p.done?y:O};let B,E;const _=S=>{m(p.value)&&(B=S,E=X0({keyframes:[p.value,g(p.value)],velocity:DO(j,S,p.value),damping:a,stiffness:o,restDelta:d,restSpeed:A}))};return _(0),{calculatedDuration:null,next:S=>{let N=!1;return!E&&B===void 0&&(N=!0,C(S),_(S)),B!==void 0&&S>=B?E.next(S-B):(!N&&C(S),p)}}}function DZ(r,t,s){const i=[],a=s||Hc.mix||UO,o=r.length-1;for(let c=0;c<o;c++){let l=a(r[c],r[c+1]);if(t){const u=Array.isArray(t)?t[c]||Ro:t;l=qp(u,l)}i.push(l)}return i}function MZ(r,t,{clamp:s=!0,ease:i,mixer:a}={}){const o=r.length;if(B2(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const c=r[0]===r[1];r[0]>r[o-1]&&(r=[...r].reverse(),t=[...t].reverse());const l=DZ(t,i,a),u=l.length,d=A=>{if(c&&A<r[0])return t[0];let f=0;if(u>1)for(;f<r.length-2&&!(A<r[f+1]);f++);const p=kp(r[f],r[f+1],A);return l[f](p)};return s?A=>d($c(r[0],r[o-1],A)):d}function RZ(r,t){const s=r[r.length-1];for(let i=1;i<=t;i++){const a=kp(0,t,i);r.push(zs(s,1,a))}}function QZ(r){const t=[0];return RZ(t,r.length-1),t}function $Z(r,t){return r.map(s=>s*t)}function HZ(r,t){return r.map(()=>t||CO).splice(0,r.length-1)}function ap({duration:r=300,keyframes:t,times:s,ease:i="easeInOut"}){const a=eZ(i)?i.map(kC):kC(i),o={done:!1,value:t[0]},c=$Z(s&&s.length===t.length?s:QZ(t),r),l=MZ(c,t,{ease:Array.isArray(a)?a:HZ(t,a)});return{calculatedDuration:r,next:u=>(o.value=l(u),o.done=u>=r,o)}}const VZ=r=>r!==null;function D2(r,{repeat:t,repeatType:s="loop"},i,a=1){const o=r.filter(VZ),l=a<0||t&&s!=="loop"&&t%2===1?0:o.length-1;return!l||i===void 0?o[l]:i}const zZ={decay:Kw,inertia:Kw,tween:ap,keyframes:ap,spring:X0};function MO(r){typeof r.type=="string"&&(r.type=zZ[r.type])}class M2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const KZ=r=>r/100;class R2 extends M2{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==Ja.now()&&this.tick(Ja.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;MO(t);const{type:s=ap,repeat:i=0,repeatDelay:a=0,repeatType:o,velocity:c=0}=t;let{keyframes:l}=t;const u=s||ap;u!==ap&&typeof l[0]!="number"&&(this.mixKeyframes=qp(KZ,UO(l[0],l[1])),l=[0,100]);const d=u({...t,keyframes:l});o==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-c})),d.calculatedDuration===null&&(d.calculatedDuration=L2(d));const{calculatedDuration:A}=d;this.calculatedDuration=A,this.resolvedDuration=A+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=d}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:i,totalDuration:a,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return i.next(0);const{delay:d=0,keyframes:A,repeat:f,repeatType:p,repeatDelay:m,type:g,onUpdate:b,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const y=this.currentTime-d*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?y<0:y>a;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let j=this.currentTime,C=i;if(f){const S=Math.min(this.currentTime,a)/l;let N=Math.floor(S),O=S%1;!O&&S>=1&&(O=1),O===1&&N--,N=Math.min(N,f+1),!!(N%2)&&(p==="reverse"?(O=1-O,m&&(O-=m/l)):p==="mirror"&&(C=c)),j=$c(0,1,O)*l}const B=w?{done:!1,value:A[0]}:C.next(j);o&&(B.value=o(B.value));let{done:E}=B;!w&&u!==null&&(E=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return _&&g!==Kw&&(B.value=D2(A,this.options,v,this.speed)),b&&b(B.value),_&&this.finish(),B}then(t,s){return this.finished.then(t,s)}get duration(){return tc(this.calculatedDuration)}get time(){return tc(this.currentTime)}set time(t){t=ec(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ja.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=tc(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=_Z,startTime:s}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=s??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ja.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function GZ(r){for(let t=1;t<r.length;t++)r[t]??(r[t]=r[t-1])}const Qd=r=>r*180/Math.PI,Gw=r=>{const t=Qd(Math.atan2(r[1],r[0]));return Ww(t)},WZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Gw,rotateZ:Gw,skewX:r=>Qd(Math.atan(r[1])),skewY:r=>Qd(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Ww=r=>(r=r%360,r<0&&(r+=360),r),TC=Gw,FC=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),UC=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),qZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:FC,scaleY:UC,scale:r=>(FC(r)+UC(r))/2,rotateX:r=>Ww(Qd(Math.atan2(r[6],r[5]))),rotateY:r=>Ww(Qd(Math.atan2(-r[2],r[0]))),rotateZ:TC,rotate:TC,skewX:r=>Qd(Math.atan(r[4])),skewY:r=>Qd(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function qw(r){return r.includes("scale")?1:0}function Yw(r,t){if(!r||r==="none")return qw(t);const s=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(s)i=qZ,a=s;else{const l=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=WZ,a=l}if(!a)return qw(t);const o=i[t],c=a[1].split(",").map(XZ);return typeof o=="function"?o(c):c[o]}const YZ=(r,t)=>{const{transform:s="none"}=getComputedStyle(r);return Yw(s,t)};function XZ(r){return parseFloat(r.trim())}const Qh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$h=new Set(Qh),LC=r=>r===Rh||r===Jr,JZ=new Set(["x","y","z"]),ZZ=Qh.filter(r=>!JZ.has(r));function eee(r){const t=[];return ZZ.forEach(s=>{const i=r.getValue(s);i!==void 0&&(t.push([s,i.get()]),i.set(s.startsWith("scale")?1:0))}),t}const Wd={width:({x:r},{paddingLeft:t="0",paddingRight:s="0"})=>r.max-r.min-parseFloat(t)-parseFloat(s),height:({y:r},{paddingTop:t="0",paddingBottom:s="0"})=>r.max-r.min-parseFloat(t)-parseFloat(s),top:(r,{top:t})=>parseFloat(t),left:(r,{left:t})=>parseFloat(t),bottom:({y:r},{top:t})=>parseFloat(t)+(r.max-r.min),right:({x:r},{left:t})=>parseFloat(t)+(r.max-r.min),x:(r,{transform:t})=>Yw(t,"x"),y:(r,{transform:t})=>Yw(t,"y")};Wd.translateX=Wd.x;Wd.translateY=Wd.y;const qd=new Set;let Xw=!1,Jw=!1,Zw=!1;function RO(){if(Jw){const r=Array.from(qd).filter(i=>i.needsMeasurement),t=new Set(r.map(i=>i.element)),s=new Map;t.forEach(i=>{const a=eee(i);a.length&&(s.set(i,a),i.render())}),r.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const a=s.get(i);a&&a.forEach(([o,c])=>{i.getValue(o)?.set(c)})}),r.forEach(i=>i.measureEndState()),r.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Jw=!1,Xw=!1,qd.forEach(r=>r.complete(Zw)),qd.clear()}function QO(){qd.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Jw=!0)})}function tee(){Zw=!0,QO(),RO(),Zw=!1}class Q2{constructor(t,s,i,a,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=i,this.motionValue=a,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(qd.add(this),Xw||(Xw=!0,Ps.read(QO),Ps.resolveKeyframes(RO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:i,motionValue:a}=this;if(t[0]===null){const o=a?.get(),c=t[t.length-1];if(o!==void 0)t[0]=o;else if(i&&s){const l=i.readValue(s,c);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=c),a&&o===void 0&&a.set(t[0])}GZ(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),qd.delete(this)}cancel(){this.state==="scheduled"&&(qd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const ree=r=>r.startsWith("--");function nee(r,t,s){ree(t)?r.style.setProperty(t,s):r.style[t]=s}const see=k2(()=>window.ScrollTimeline!==void 0),iee={};function aee(r,t){const s=k2(r);return()=>iee[t]??s()}const $O=aee(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Kf=([r,t,s,i])=>`cubic-bezier(${r}, ${t}, ${s}, ${i})`,DC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kf([0,.65,.55,1]),circOut:Kf([.55,0,1,.45]),backIn:Kf([.31,.01,.66,-.59]),backOut:Kf([.33,1.53,.69,.99])};function HO(r,t){if(r)return typeof r=="function"?$O()?LO(r,t):"ease-out":BO(r)?Kf(r):Array.isArray(r)?r.map(s=>HO(s,t)||DC.easeOut):DC[r]}function oee(r,t,s,{delay:i=0,duration:a=300,repeat:o=0,repeatType:c="loop",ease:l="easeOut",times:u}={},d=void 0){const A={[t]:s};u&&(A.offset=u);const f=HO(l,a);Array.isArray(f)&&(A.easing=f);const p={delay:i,duration:a,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return d&&(p.pseudoElement=d),r.animate(A,p)}function VO(r){return typeof r=="function"&&"applyToOptions"in r}function lee({type:r,...t}){return VO(r)&&$O()?r.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class cee extends M2{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:i,keyframes:a,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=t,B2(typeof t.type!="string");const d=lee(t);this.animation=oee(s,i,a,d,o),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const A=D2(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(A):nee(s,i,A),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return tc(Number(t))}get time(){return tc(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ec(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&see()?(this.animation.timeline=t,Ro):s(this)}}const zO={anticipate:jO,backInOut:wO,circInOut:SO};function uee(r){return r in zO}function dee(r){typeof r.ease=="string"&&uee(r.ease)&&(r.ease=zO[r.ease])}const MC=10;class Aee extends cee{constructor(t){dee(t),MO(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:i,onComplete:a,element:o,...c}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const l=new R2({...c,autoplay:!1}),u=ec(this.finishedTime??this.time);s.setWithVelocity(l.sample(u-MC).value,l.sample(u).value,MC),l.stop()}}const RC=(r,t)=>t==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(ed.test(r)||r==="0")&&!r.startsWith("url("));function hee(r){const t=r[0];if(r.length===1)return!0;for(let s=0;s<r.length;s++)if(r[s]!==t)return!0}function fee(r,t,s,i){const a=r[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const o=r[r.length-1],c=RC(a,t),l=RC(o,t);return!c||!l?!1:hee(r)||(s==="spring"||VO(s))&&i}function e1(r){r.duration=0,r.type}const pee=new Set(["opacity","clipPath","filter","transform"]),mee=k2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function gee(r){const{motionValue:t,name:s,repeatDelay:i,repeatType:a,damping:o,type:c}=r;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return mee()&&s&&pee.has(s)&&(s!=="transform"||!d)&&!u&&!i&&a!=="mirror"&&o!==0&&c!=="inertia"}const yee=40;class xee extends M2{constructor({autoplay:t=!0,delay:s=0,type:i="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:c="loop",keyframes:l,name:u,motionValue:d,element:A,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ja.now();const p={autoplay:t,delay:s,type:i,repeat:a,repeatDelay:o,repeatType:c,name:u,motionValue:d,element:A,...f},m=A?.KeyframeResolver||Q2;this.keyframeResolver=new m(l,(g,b,v)=>this.onKeyframesResolved(g,b,p,!v),u,d,A),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,s,i,a){this.keyframeResolver=void 0;const{name:o,type:c,velocity:l,delay:u,isHandoff:d,onUpdate:A}=i;this.resolvedAt=Ja.now(),fee(t,o,c,l)||((Hc.instantAnimations||!u)&&A?.(D2(t,i,s)),t[0]=t[t.length-1],e1(i),i.repeat=0);const p={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>yee?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...i,keyframes:t},m=!d&&gee(p)?new Aee({...p,element:p.motionValue.owner.current}):new R2(p);m.finished.then(()=>this.notifyFinished()).catch(Ro),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),tee()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const bee=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vee(r){const t=bee.exec(r);if(!t)return[,];const[,s,i,a]=t;return[`--${s??i}`,a]}function KO(r,t,s=1){const[i,a]=vee(r);if(!i)return;const o=window.getComputedStyle(t).getPropertyValue(i);if(o){const c=o.trim();return fO(c)?parseFloat(c):c}return P2(a)?KO(a,t,s+1):a}function $2(r,t){return r?.[t]??r?.default??r}const GO=new Set(["width","height","top","left","right","bottom",...Qh]),wee={test:r=>r==="auto",parse:r=>r},WO=r=>t=>t.test(r),qO=[Rh,Jr,rc,Nu,hZ,AZ,wee],QC=r=>qO.find(WO(r));function jee(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||mO(r):!0}const Nee=new Set(["brightness","contrast","saturate","opacity"]);function See(r){const[t,s]=r.slice(0,-1).split("(");if(t==="drop-shadow")return r;const[i]=s.match(T2)||[];if(!i)return r;const a=s.replace(i,"");let o=Nee.has(t)?1:0;return i!==s&&(o*=100),t+"("+o+a+")"}const Cee=/\b([a-z-]*)\(.*?\)/gu,t1={...ed,getAnimatableNone:r=>{const t=r.match(Cee);return t?t.map(See).join(" "):r}},$C={...Rh,transform:Math.round},Bee={rotate:Nu,rotateX:Nu,rotateY:Nu,rotateZ:Nu,scale:_g,scaleX:_g,scaleY:_g,scaleZ:_g,skew:Nu,skewX:Nu,skewY:Nu,distance:Jr,translateX:Jr,translateY:Jr,translateZ:Jr,x:Jr,y:Jr,z:Jr,perspective:Jr,transformPerspective:Jr,opacity:_p,originX:_C,originY:_C,originZ:Jr},H2={borderWidth:Jr,borderTopWidth:Jr,borderRightWidth:Jr,borderBottomWidth:Jr,borderLeftWidth:Jr,borderRadius:Jr,radius:Jr,borderTopLeftRadius:Jr,borderTopRightRadius:Jr,borderBottomRightRadius:Jr,borderBottomLeftRadius:Jr,width:Jr,maxWidth:Jr,height:Jr,maxHeight:Jr,top:Jr,right:Jr,bottom:Jr,left:Jr,padding:Jr,paddingTop:Jr,paddingRight:Jr,paddingBottom:Jr,paddingLeft:Jr,margin:Jr,marginTop:Jr,marginRight:Jr,marginBottom:Jr,marginLeft:Jr,backgroundPositionX:Jr,backgroundPositionY:Jr,...Bee,zIndex:$C,fillOpacity:_p,strokeOpacity:_p,numOctaves:$C},kee={...H2,color:Si,backgroundColor:Si,outlineColor:Si,fill:Si,stroke:Si,borderColor:Si,borderTopColor:Si,borderRightColor:Si,borderBottomColor:Si,borderLeftColor:Si,filter:t1,WebkitFilter:t1},YO=r=>kee[r];function XO(r,t){let s=YO(r);return s!==t1&&(s=ed),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const _ee=new Set(["auto","none","0"]);function Eee(r,t,s){let i=0,a;for(;i<r.length&&!a;){const o=r[i];typeof o=="string"&&!_ee.has(o)&&Ep(o).values.length&&(a=r[i]),i++}if(a&&s)for(const o of t)r[o]=XO(s,a)}class Oee extends Q2{constructor(t,s,i,a,o){super(t,s,i,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:i}=this;if(!s||!s.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),P2(d))){const A=KO(d,s.current);A!==void 0&&(t[u]=A),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!GO.has(i)||t.length!==2)return;const[a,o]=t,c=QC(a),l=QC(o);if(c!==l)if(LC(c)&&LC(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else Wd[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,i=[];for(let a=0;a<t.length;a++)(t[a]===null||jee(t[a]))&&i.push(a);i.length&&Eee(t,i,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Wd[i](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&t.getValue(i,a).jump(a,!1)}measureEndState(){const{element:t,name:s,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const a=t.getValue(s);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,c=i[o];i[o]=Wd[s](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Iee(r,t,s){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let i=document;const a=s?.[r]??i.querySelectorAll(r);return a?Array.from(a):[]}return Array.from(r)}const JO=(r,t)=>t&&typeof r=="number"?t.transform(r):r;function ZO(r){return pO(r)&&"offsetHeight"in r}const HC=30,Pee=r=>!isNaN(parseFloat(r));class Tee{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const a=Ja.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=Ja.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Pee(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new _2);const i=this.events[t].add(s);return t==="change"?()=>{i(),Ps.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,i){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ja.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>HC)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,HC);return gO(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kh(r,t){return new Tee(r,t)}const{schedule:V2}=kO(queueMicrotask,!1),ol={x:!1,y:!1};function eI(){return ol.x||ol.y}function Fee(r){return r==="x"||r==="y"?ol[r]?null:(ol[r]=!0,()=>{ol[r]=!1}):ol.x||ol.y?null:(ol.x=ol.y=!0,()=>{ol.x=ol.y=!1})}function tI(r,t){const s=Iee(r),i=new AbortController,a={passive:!0,...t,signal:i.signal};return[s,a,()=>i.abort()]}function VC(r){return!(r.pointerType==="touch"||eI())}function Uee(r,t,s={}){const[i,a,o]=tI(r,s),c=l=>{if(!VC(l))return;const{target:u}=l,d=t(u,l);if(typeof d!="function"||!u)return;const A=f=>{VC(f)&&(d(f),u.removeEventListener("pointerleave",A))};u.addEventListener("pointerleave",A,a)};return i.forEach(l=>{l.addEventListener("pointerenter",c,a)}),o}const rI=(r,t)=>t?r===t?!0:rI(r,t.parentElement):!1,z2=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,Lee=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Dee(r){return Lee.has(r.tagName)||r.tabIndex!==-1}const r0=new WeakSet;function zC(r){return t=>{t.key==="Enter"&&r(t)}}function uv(r,t){r.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Mee=(r,t)=>{const s=r.currentTarget;if(!s)return;const i=zC(()=>{if(r0.has(s))return;uv(s,"down");const a=zC(()=>{uv(s,"up")}),o=()=>uv(s,"cancel");s.addEventListener("keyup",a,t),s.addEventListener("blur",o,t)});s.addEventListener("keydown",i,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",i),t)};function KC(r){return z2(r)&&!eI()}function Ree(r,t,s={}){const[i,a,o]=tI(r,s),c=l=>{const u=l.currentTarget;if(!KC(l))return;r0.add(u);const d=t(u,l),A=(m,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),r0.has(u)&&r0.delete(u),KC(m)&&typeof d=="function"&&d(m,{success:g})},f=m=>{A(m,u===window||u===document||s.useGlobalTarget||rI(u,m.target))},p=m=>{A(m,!1)};window.addEventListener("pointerup",f,a),window.addEventListener("pointercancel",p,a)};return i.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",c,a),ZO(l)&&(l.addEventListener("focus",d=>Mee(d,a)),!Dee(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function nI(r){return pO(r)&&"ownerSVGElement"in r}function Qee(r){return nI(r)&&r.tagName==="svg"}const Na=r=>!!(r&&r.getVelocity),$ee=[...qO,Si,ed],Hee=r=>$ee.find(WO(r)),K2=ee.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class Vee extends ee.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const i=s.offsetParent,a=ZO(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft,o.right=a-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function zee({children:r,isPresent:t,anchorX:s,root:i}){const a=ee.useId(),o=ee.useRef(null),c=ee.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=ee.useContext(K2);return ee.useInsertionEffect(()=>{const{width:u,height:d,top:A,left:f,right:p}=c.current;if(t||!o.current||!u||!d)return;const m=s==="left"?`left: ${f}`:`right: ${p}`;o.current.dataset.motionPopId=a;const g=document.createElement("style");l&&(g.nonce=l);const b=i??document.head;return b.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${m}px !important;
            top: ${A}px !important;
          }
        `),()=>{b.contains(g)&&b.removeChild(g)}},[t]),n.jsx(Vee,{isPresent:t,childRef:o,sizeRef:c,children:ee.cloneElement(r,{ref:o})})}const Kee=({children:r,initial:t,isPresent:s,onExitComplete:i,custom:a,presenceAffectsLayout:o,mode:c,anchorX:l,root:u})=>{const d=j2(Gee),A=ee.useId();let f=!0,p=ee.useMemo(()=>(f=!1,{id:A,initial:t,isPresent:s,custom:a,onExitComplete:m=>{d.set(m,!0);for(const g of d.values())if(!g)return;i&&i()},register:m=>(d.set(m,!1),()=>d.delete(m))}),[s,d,i]);return o&&f&&(p={...p}),ee.useMemo(()=>{d.forEach((m,g)=>d.set(g,!1))},[s]),ee.useEffect(()=>{!s&&!d.size&&i&&i()},[s]),c==="popLayout"&&(r=n.jsx(zee,{isPresent:s,anchorX:l,root:u,children:r})),n.jsx(Uy.Provider,{value:p,children:r})};function Gee(){return new Map}function sI(r=!0){const t=ee.useContext(Uy);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:i,register:a}=t,o=ee.useId();ee.useEffect(()=>{if(r)return a(o)},[r]);const c=ee.useCallback(()=>r&&i&&i(o),[o,i,r]);return!s&&i?[!1,c]:[!0]}const Eg=r=>r.key||"";function GC(r){const t=[];return ee.Children.forEach(r,s=>{ee.isValidElement(s)&&t.push(s)}),t}const Wee=({children:r,custom:t,initial:s=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:o="sync",propagate:c=!1,anchorX:l="left",root:u})=>{const[d,A]=sI(c),f=ee.useMemo(()=>GC(r),[r]),p=c&&!d?[]:f.map(Eg),m=ee.useRef(!0),g=ee.useRef(f),b=j2(()=>new Map),[v,y]=ee.useState(f),[w,j]=ee.useState(f);hO(()=>{m.current=!1,g.current=f;for(let E=0;E<w.length;E++){const _=Eg(w[E]);p.includes(_)?b.delete(_):b.get(_)!==!0&&b.set(_,!1)}},[w,p.length,p.join("-")]);const C=[];if(f!==v){let E=[...f];for(let _=0;_<w.length;_++){const S=w[_],N=Eg(S);p.includes(N)||(E.splice(_,0,S),C.push(S))}return o==="wait"&&C.length&&(E=C),j(GC(E)),y(f),null}const{forceRender:B}=ee.useContext(w2);return n.jsx(n.Fragment,{children:w.map(E=>{const _=Eg(E),S=c&&!d?!1:f===w||p.includes(_),N=()=>{if(b.has(_))b.set(_,!0);else return;let O=!0;b.forEach(k=>{k||(O=!1)}),O&&(B?.(),j(g.current),c&&A?.(),i&&i())};return n.jsx(Kee,{isPresent:S,initial:!m.current||s?void 0:!1,custom:t,presenceAffectsLayout:a,mode:o,root:u,onExitComplete:S?void 0:N,anchorX:l,children:E},_)})})},iI=ee.createContext({strict:!1}),WC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_h={};for(const r in WC)_h[r]={isEnabled:t=>WC[r].some(s=>!!t[s])};function qee(r){for(const t in r)_h[t]={..._h[t],...r[t]}}const Yee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function J0(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||Yee.has(r)}let aI=r=>!J0(r);function Xee(r){typeof r=="function"&&(aI=t=>t.startsWith("on")?!J0(t):r(t))}try{Xee(require("@emotion/is-prop-valid").default)}catch{}function Jee(r,t,s){const i={};for(const a in r)a==="values"&&typeof r.values=="object"||(aI(a)||s===!0&&J0(a)||!t&&!J0(a)||r.draggable&&a.startsWith("onDrag"))&&(i[a]=r[a]);return i}const Ly=ee.createContext({});function Dy(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function Op(r){return typeof r=="string"||Array.isArray(r)}const G2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],W2=["initial",...G2];function My(r){return Dy(r.animate)||W2.some(t=>Op(r[t]))}function oI(r){return!!(My(r)||r.variants)}function Zee(r,t){if(My(r)){const{initial:s,animate:i}=r;return{initial:s===!1||Op(s)?s:void 0,animate:Op(i)?i:void 0}}return r.inherit!==!1?t:{}}function ete(r){const{initial:t,animate:s}=Zee(r,ee.useContext(Ly));return ee.useMemo(()=>({initial:t,animate:s}),[qC(t),qC(s)])}function qC(r){return Array.isArray(r)?r.join(" "):r}const Ip={};function tte(r){for(const t in r)Ip[t]=r[t],I2(t)&&(Ip[t].isCSSVariable=!0)}function lI(r,{layout:t,layoutId:s}){return $h.has(r)||r.startsWith("origin")||(t||s!==void 0)&&(!!Ip[r]||r==="opacity")}const rte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nte=Qh.length;function ste(r,t,s){let i="",a=!0;for(let o=0;o<nte;o++){const c=Qh[o],l=r[c];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(c.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||s){const d=JO(l,H2[c]);if(!u){a=!1;const A=rte[c]||c;i+=`${A}(${d}) `}s&&(t[c]=d)}}return i=i.trim(),s?i=s(t,a?"":i):a&&(i="none"),i}function q2(r,t,s){const{style:i,vars:a,transformOrigin:o}=r;let c=!1,l=!1;for(const u in t){const d=t[u];if($h.has(u)){c=!0;continue}else if(I2(u)){a[u]=d;continue}else{const A=JO(d,H2[u]);u.startsWith("origin")?(l=!0,o[u]=A):i[u]=A}}if(t.transform||(c||s?i.transform=ste(t,r.transform,s):i.transform&&(i.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:A=0}=o;i.transformOrigin=`${u} ${d} ${A}`}}const Y2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cI(r,t,s){for(const i in t)!Na(t[i])&&!lI(i,s)&&(r[i]=t[i])}function ite({transformTemplate:r},t){return ee.useMemo(()=>{const s=Y2();return q2(s,t,r),Object.assign({},s.vars,s.style)},[t])}function ate(r,t){const s=r.style||{},i={};return cI(i,s,r),Object.assign(i,ite(r,t)),i}function ote(r,t){const s={},i=ate(r,t);return r.drag&&r.dragListener!==!1&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(s.tabIndex=0),s.style=i,s}const lte={offset:"stroke-dashoffset",array:"stroke-dasharray"},cte={offset:"strokeDashoffset",array:"strokeDasharray"};function ute(r,t,s=1,i=0,a=!0){r.pathLength=1;const o=a?lte:cte;r[o.offset]=Jr.transform(-i);const c=Jr.transform(t),l=Jr.transform(s);r[o.array]=`${c} ${l}`}function uI(r,{attrX:t,attrY:s,attrScale:i,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...l},u,d,A){if(q2(r,l,d),u){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:f,style:p}=r;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=A?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),s!==void 0&&(f.y=s),i!==void 0&&(f.scale=i),a!==void 0&&ute(f,a,o,c,!1)}const dI=()=>({...Y2(),attrs:{}}),AI=r=>typeof r=="string"&&r.toLowerCase()==="svg";function dte(r,t,s,i){const a=ee.useMemo(()=>{const o=dI();return uI(o,t,AI(i),r.transformTemplate,r.style),{...o.attrs,style:{...o.style}}},[t]);if(r.style){const o={};cI(o,r.style,r),a.style={...o,...a.style}}return a}const Ate=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function X2(r){return typeof r!="string"||r.includes("-")?!1:!!(Ate.indexOf(r)>-1||/[A-Z]/u.test(r))}function hte(r,t,s,{latestValues:i},a,o=!1){const l=(X2(r)?dte:ote)(t,i,a,r),u=Jee(t,typeof r=="string",o),d=r!==ee.Fragment?{...u,...l,ref:s}:{},{children:A}=t,f=ee.useMemo(()=>Na(A)?A.get():A,[A]);return ee.createElement(r,{...d,children:f})}function YC(r){const t=[{},{}];return r?.values.forEach((s,i)=>{t[0][i]=s.get(),t[1][i]=s.getVelocity()}),t}function J2(r,t,s,i){if(typeof t=="function"){const[a,o]=YC(i);t=t(s!==void 0?s:r.custom,a,o)}if(typeof t=="string"&&(t=r.variants&&r.variants[t]),typeof t=="function"){const[a,o]=YC(i);t=t(s!==void 0?s:r.custom,a,o)}return t}function n0(r){return Na(r)?r.get():r}function fte({scrapeMotionValuesFromProps:r,createRenderState:t},s,i,a){return{latestValues:pte(s,i,a,r),renderState:t()}}function pte(r,t,s,i){const a={},o=i(r,{});for(const p in o)a[p]=n0(o[p]);let{initial:c,animate:l}=r;const u=My(r),d=oI(r);t&&d&&!u&&r.inherit!==!1&&(c===void 0&&(c=t.initial),l===void 0&&(l=t.animate));let A=s?s.initial===!1:!1;A=A||c===!1;const f=A?l:c;if(f&&typeof f!="boolean"&&!Dy(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const g=J2(r,p[m]);if(g){const{transitionEnd:b,transition:v,...y}=g;for(const w in y){let j=y[w];if(Array.isArray(j)){const C=A?j.length-1:0;j=j[C]}j!==null&&(a[w]=j)}for(const w in b)a[w]=b[w]}}}return a}const hI=r=>(t,s)=>{const i=ee.useContext(Ly),a=ee.useContext(Uy),o=()=>fte(r,t,i,a);return s?o():j2(o)};function Z2(r,t,s){const{style:i}=r,a={};for(const o in i)(Na(i[o])||t.style&&Na(t.style[o])||lI(o,r)||s?.getValue(o)?.liveStyle!==void 0)&&(a[o]=i[o]);return a}const mte=hI({scrapeMotionValuesFromProps:Z2,createRenderState:Y2});function fI(r,t,s){const i=Z2(r,t,s);for(const a in r)if(Na(r[a])||Na(t[a])){const o=Qh.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[o]=r[a]}return i}const gte=hI({scrapeMotionValuesFromProps:fI,createRenderState:dI}),yte=Symbol.for("motionComponentSymbol");function lh(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function xte(r,t,s){return ee.useCallback(i=>{i&&r.onMount&&r.onMount(i),t&&(i?t.mount(i):t.unmount()),s&&(typeof s=="function"?s(i):lh(s)&&(s.current=i))},[t])}const ej=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bte="framerAppearId",pI="data-"+ej(bte),mI=ee.createContext({});function vte(r,t,s,i,a){const{visualElement:o}=ee.useContext(Ly),c=ee.useContext(iI),l=ee.useContext(Uy),u=ee.useContext(K2).reducedMotion,d=ee.useRef(null);i=i||c.renderer,!d.current&&i&&(d.current=i(r,{visualState:t,parent:o,props:s,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const A=d.current,f=ee.useContext(mI);A&&!A.projection&&a&&(A.type==="html"||A.type==="svg")&&wte(d.current,s,a,f);const p=ee.useRef(!1);ee.useInsertionEffect(()=>{A&&p.current&&A.update(s,l)});const m=s[pI],g=ee.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return hO(()=>{A&&(p.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),A.scheduleRenderMicrotask(),g.current&&A.animationState&&A.animationState.animateChanges())}),ee.useEffect(()=>{A&&(!g.current&&A.animationState&&A.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),g.current=!1),A.enteringChildren=void 0)}),A}function wte(r,t,s,i){const{layoutId:a,layout:o,drag:c,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:A}=t;r.projection=new s(r.latestValues,t["data-framer-portal-id"]?void 0:gI(r.parent)),r.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!c||l&&lh(l),visualElement:r,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:A,layoutScroll:u,layoutRoot:d})}function gI(r){if(r)return r.options.allowProjection!==!1?r.projection:gI(r.parent)}function dv(r,{forwardMotionProps:t=!1}={},s,i){s&&qee(s);const a=X2(r)?gte:mte;function o(l,u){let d;const A={...ee.useContext(K2),...l,layoutId:jte(l)},{isStatic:f}=A,p=ete(l),m=a(l,f);if(!f&&N2){Nte();const g=Ste(A);d=g.MeasureLayout,p.visualElement=vte(r,m,A,i,g.ProjectionNode)}return n.jsxs(Ly.Provider,{value:p,children:[d&&p.visualElement?n.jsx(d,{visualElement:p.visualElement,...A}):null,hte(r,l,xte(m,p.visualElement,u),m,f,t)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const c=ee.forwardRef(o);return c[yte]=r,c}function jte({layoutId:r}){const t=ee.useContext(w2).id;return t&&r!==void 0?t+"-"+r:r}function Nte(r,t){ee.useContext(iI).strict}function Ste(r){const{drag:t,layout:s}=_h;if(!t&&!s)return{};const i={...t,...s};return{MeasureLayout:t?.isEnabled(r)||s?.isEnabled(r)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Cte(r,t){if(typeof Proxy>"u")return dv;const s=new Map,i=(o,c)=>dv(o,c,r,t),a=(o,c)=>i(o,c);return new Proxy(a,{get:(o,c)=>c==="create"?i:(s.has(c)||s.set(c,dv(c,void 0,r,t)),s.get(c))})}function yI({top:r,left:t,right:s,bottom:i}){return{x:{min:t,max:s},y:{min:r,max:i}}}function Bte({x:r,y:t}){return{top:t.min,right:r.max,bottom:t.max,left:r.min}}function kte(r,t){if(!t)return r;const s=t({x:r.left,y:r.top}),i=t({x:r.right,y:r.bottom});return{top:s.y,left:s.x,bottom:i.y,right:i.x}}function Av(r){return r===void 0||r===1}function r1({scale:r,scaleX:t,scaleY:s}){return!Av(r)||!Av(t)||!Av(s)}function Fd(r){return r1(r)||xI(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function xI(r){return XC(r.x)||XC(r.y)}function XC(r){return r&&r!=="0%"}function Z0(r,t,s){const i=r-s,a=t*i;return s+a}function JC(r,t,s,i,a){return a!==void 0&&(r=Z0(r,a,i)),Z0(r,s,i)+t}function n1(r,t=0,s=1,i,a){r.min=JC(r.min,t,s,i,a),r.max=JC(r.max,t,s,i,a)}function bI(r,{x:t,y:s}){n1(r.x,t.translate,t.scale,t.originPoint),n1(r.y,s.translate,s.scale,s.originPoint)}const ZC=.999999999999,eB=1.0000000000001;function _te(r,t,s,i=!1){const a=s.length;if(!a)return;t.x=t.y=1;let o,c;for(let l=0;l<a;l++){o=s[l],c=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&uh(r,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,bI(r,c)),i&&Fd(o.latestValues)&&uh(r,o.latestValues))}t.x<eB&&t.x>ZC&&(t.x=1),t.y<eB&&t.y>ZC&&(t.y=1)}function ch(r,t){r.min=r.min+t,r.max=r.max+t}function tB(r,t,s,i,a=.5){const o=zs(r.min,r.max,a);n1(r,t,s,o,i)}function uh(r,t){tB(r.x,t.x,t.scaleX,t.scale,t.originX),tB(r.y,t.y,t.scaleY,t.scale,t.originY)}function vI(r,t){return yI(kte(r.getBoundingClientRect(),t))}function Ete(r,t,s){const i=vI(r,s),{scroll:a}=t;return a&&(ch(i.x,a.offset.x),ch(i.y,a.offset.y)),i}const rB=()=>({translate:0,scale:1,origin:0,originPoint:0}),dh=()=>({x:rB(),y:rB()}),nB=()=>({min:0,max:0}),Ai=()=>({x:nB(),y:nB()}),s1={current:null},wI={current:!1};function Ote(){if(wI.current=!0,!!N2)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),t=()=>s1.current=r.matches;r.addEventListener("change",t),t()}else s1.current=!1}const Ite=new WeakMap;function Pte(r,t,s){for(const i in t){const a=t[i],o=s[i];if(Na(a))r.addValue(i,a);else if(Na(o))r.addValue(i,kh(a,{owner:r}));else if(o!==a)if(r.hasValue(i)){const c=r.getValue(i);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=r.getStaticValue(i);r.addValue(i,kh(c!==void 0?c:a,{owner:r}))}}for(const i in s)t[i]===void 0&&r.removeValue(i);return t}const sB=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Tte{scrapeMotionValuesFromProps(t,s,i){return{}}constructor({parent:t,props:s,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:o,visualState:c},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Q2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Ja.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ps.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=c;this.latestValues=u,this.baseTarget={...u},this.initialValues=s.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=s,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=My(s),this.isVariantNode=oI(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:A,...f}=this.scrapeMotionValuesFromProps(s,{},this);for(const p in f){const m=f[p];u[p]!==void 0&&Na(m)&&m.set(u[p])}}mount(t){this.current=t,Ite.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),wI.current||Ote(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:s1.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Zu(this.notifyUpdate),Zu(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=$h.has(t);i&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&Ps.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{a(),o&&o(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in _h){const s=_h[t];if(!s)continue;const{isEnabled:i,Feature:a}=s;if(!this.features[t]&&a&&i(this.props)&&(this.features[t]=new a(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ai()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let i=0;i<sB.length;i++){const a=sB[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,c=t[o];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=Pte(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const i=this.values.get(t);s!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&s!==void 0&&(i=kh(s===null?void 0:s,{owner:this}),this.addValue(t,i)),i}readValue(t,s){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(fO(i)||mO(i))?i=parseFloat(i):!Hee(i)&&ed.test(s)&&(i=XO(t,s)),this.setBaseTarget(t,Na(i)?i.get():i)),Na(i)?i.get():i}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const o=J2(this.props,s,this.presenceContext?.custom);o&&(i=o[t])}if(s&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Na(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new _2),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){V2.render(this.render)}}class jI extends Tte{constructor(){super(...arguments),this.KeyframeResolver=Oee}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:i}){delete s[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Na(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function NI(r,{style:t,vars:s},i,a){const o=r.style;let c;for(c in t)o[c]=t[c];a?.applyProjectionStyles(o,i);for(c in s)o.setProperty(c,s[c])}function Fte(r){return window.getComputedStyle(r)}class Ute extends jI{constructor(){super(...arguments),this.type="html",this.renderInstance=NI}readValueFromInstance(t,s){if($h.has(s))return this.projection?.isProjecting?qw(s):YZ(t,s);{const i=Fte(t),a=(I2(s)?i.getPropertyValue(s):i[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return vI(t,s)}build(t,s,i){q2(t,s,i.transformTemplate)}scrapeMotionValuesFromProps(t,s,i){return Z2(t,s,i)}}const SI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Lte(r,t,s,i){NI(r,t,void 0,i);for(const a in t.attrs)r.setAttribute(SI.has(a)?a:ej(a),t.attrs[a])}class Dte extends jI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ai}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if($h.has(s)){const i=YO(s);return i&&i.default||0}return s=SI.has(s)?s:ej(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,i){return fI(t,s,i)}build(t,s,i){uI(t,s,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,s,i,a){Lte(t,s,i,a)}mount(t){this.isSVGTag=AI(t.tagName),super.mount(t)}}const Mte=(r,t)=>X2(r)?new Dte(t):new Ute(t,{allowProjection:r!==ee.Fragment});function jh(r,t,s){const i=r.getProps();return J2(i,t,s!==void 0?s:i.custom,r)}const i1=r=>Array.isArray(r);function Rte(r,t,s){r.hasValue(t)?r.getValue(t).set(s):r.addValue(t,kh(s))}function Qte(r){return i1(r)?r[r.length-1]||0:r}function $te(r,t){const s=jh(r,t);let{transitionEnd:i={},transition:a={},...o}=s||{};o={...o,...i};for(const c in o){const l=Qte(o[c]);Rte(r,c,l)}}function Hte(r){return!!(Na(r)&&r.add)}function a1(r,t){const s=r.getValue("willChange");if(Hte(s))return s.add(t);if(!s&&Hc.WillChange){const i=new Hc.WillChange("auto");r.addValue("willChange",i),i.add(t)}}function CI(r){return r.props[pI]}const Vte=r=>r!==null;function zte(r,{repeat:t,repeatType:s="loop"},i){const a=r.filter(Vte),o=t&&s!=="loop"&&t%2===1?0:a.length-1;return a[o]}const Kte={type:"spring",stiffness:500,damping:25,restSpeed:10},Gte=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),Wte={type:"keyframes",duration:.8},qte={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Yte=(r,{keyframes:t})=>t.length>2?Wte:$h.has(r)?r.startsWith("scale")?Gte(t[1]):Kte:qte;function Xte({when:r,delay:t,delayChildren:s,staggerChildren:i,staggerDirection:a,repeat:o,repeatType:c,repeatDelay:l,from:u,elapsed:d,...A}){return!!Object.keys(A).length}const tj=(r,t,s,i={},a,o)=>c=>{const l=$2(i,r)||{},u=l.delay||i.delay||0;let{elapsed:d=0}=i;d=d-ec(u);const A={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:p=>{t.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{c(),l.onComplete&&l.onComplete()},name:r,motionValue:t,element:o?void 0:a};Xte(l)||Object.assign(A,Yte(r,A)),A.duration&&(A.duration=ec(A.duration)),A.repeatDelay&&(A.repeatDelay=ec(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let f=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(e1(A),A.delay===0&&(f=!0)),(Hc.instantAnimations||Hc.skipAnimations)&&(f=!0,e1(A),A.delay=0),A.allowFlatten=!l.type&&!l.ease,f&&!o&&t.get()!==void 0){const p=zte(A.keyframes,l);if(p!==void 0){Ps.update(()=>{A.onUpdate(p),A.onComplete()});return}}return l.isSync?new R2(A):new xee(A)};function Jte({protectedKeys:r,needsAnimating:t},s){const i=r.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,i}function BI(r,t,{delay:s=0,transitionOverride:i,type:a}={}){let{transition:o=r.getDefaultTransition(),transitionEnd:c,...l}=t;i&&(o=i);const u=[],d=a&&r.animationState&&r.animationState.getState()[a];for(const A in l){const f=r.getValue(A,r.latestValues[A]??null),p=l[A];if(p===void 0||d&&Jte(d,A))continue;const m={delay:s,...$2(o||{},A)},g=f.get();if(g!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===g&&!m.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const y=CI(r);if(y){const w=window.MotionHandoffAnimation(y,A,Ps);w!==null&&(m.startTime=w,b=!0)}}a1(r,A),f.start(tj(A,f,p,r.shouldReduceMotion&&GO.has(A)?{type:!1}:m,r,b));const v=f.animation;v&&u.push(v)}return c&&Promise.all(u).then(()=>{Ps.update(()=>{c&&$te(r,c)})}),u}function kI(r,t,s,i=0,a=1){const o=Array.from(r).sort((d,A)=>d.sortNodePosition(A)).indexOf(t),c=r.size,l=(c-1)*i;return typeof s=="function"?s(o,c):a===1?o*i:l-o*i}function o1(r,t,s={}){const i=jh(r,t,s.type==="exit"?r.presenceContext?.custom:void 0);let{transition:a=r.getDefaultTransition()||{}}=i||{};s.transitionOverride&&(a=s.transitionOverride);const o=i?()=>Promise.all(BI(r,i,s)):()=>Promise.resolve(),c=r.variantChildren&&r.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:A,staggerDirection:f}=a;return Zte(r,t,u,d,A,f,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,d]=l==="beforeChildren"?[o,c]:[c,o];return u().then(()=>d())}else return Promise.all([o(),c(s.delay)])}function Zte(r,t,s=0,i=0,a=0,o=1,c){const l=[];for(const u of r.variantChildren)u.notify("AnimationStart",t),l.push(o1(u,t,{...c,delay:s+(typeof i=="function"?0:i)+kI(r.variantChildren,u,i,a,o)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function ere(r,t,s={}){r.notify("AnimationStart",t);let i;if(Array.isArray(t)){const a=t.map(o=>o1(r,o,s));i=Promise.all(a)}else if(typeof t=="string")i=o1(r,t,s);else{const a=typeof t=="function"?jh(r,t,s.custom):t;i=Promise.all(BI(r,a,s))}return i.then(()=>{r.notify("AnimationComplete",t)})}function _I(r,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==r.length)return!1;for(let i=0;i<s;i++)if(t[i]!==r[i])return!1;return!0}const tre=W2.length;function EI(r){if(!r)return;if(!r.isControllingVariants){const s=r.parent?EI(r.parent)||{}:{};return r.props.initial!==void 0&&(s.initial=r.props.initial),s}const t={};for(let s=0;s<tre;s++){const i=W2[s],a=r.props[i];(Op(a)||a===!1)&&(t[i]=a)}return t}const rre=[...G2].reverse(),nre=G2.length;function sre(r){return t=>Promise.all(t.map(({animation:s,options:i})=>ere(r,s,i)))}function ire(r){let t=sre(r),s=iB(),i=!0;const a=u=>(d,A)=>{const f=jh(r,A,u==="exit"?r.presenceContext?.custom:void 0);if(f){const{transition:p,transitionEnd:m,...g}=f;d={...d,...g,...m}}return d};function o(u){t=u(r)}function c(u){const{props:d}=r,A=EI(r.parent)||{},f=[],p=new Set;let m={},g=1/0;for(let v=0;v<nre;v++){const y=rre[v],w=s[y],j=d[y]!==void 0?d[y]:A[y],C=Op(j),B=y===u?w.isActive:null;B===!1&&(g=v);let E=j===A[y]&&j!==d[y]&&C;if(E&&i&&r.manuallyAnimateOnMount&&(E=!1),w.protectedKeys={...m},!w.isActive&&B===null||!j&&!w.prevProp||Dy(j)||typeof j=="boolean")continue;const _=are(w.prevProp,j);let S=_||y===u&&w.isActive&&!E&&C||v>g&&C,N=!1;const O=Array.isArray(j)?j:[j];let k=O.reduce(a(y),{});B===!1&&(k={});const{prevResolvedValues:I={}}=w,R={...I,...k},Q=F=>{S=!0,p.has(F)&&(N=!0,p.delete(F)),w.needsAnimating[F]=!0;const G=r.getValue(F);G&&(G.liveStyle=!1)};for(const F in R){const G=k[F],X=I[F];if(m.hasOwnProperty(F))continue;let q=!1;i1(G)&&i1(X)?q=!_I(G,X):q=G!==X,q?G!=null?Q(F):p.add(F):G!==void 0&&p.has(F)?Q(F):w.protectedKeys[F]=!0}w.prevProp=j,w.prevResolvedValues=k,w.isActive&&(m={...m,...k}),i&&r.blockInitialAnimation&&(S=!1);const $=E&&_;S&&(!$||N)&&f.push(...O.map(F=>{const G={type:y};if(typeof F=="string"&&i&&!$&&r.manuallyAnimateOnMount&&r.parent){const{parent:X}=r,q=jh(X,F);if(X.enteringChildren&&q){const{delayChildren:T}=q.transition||{};G.delay=kI(X.enteringChildren,r,T)}}return{animation:F,options:G}}))}if(p.size){const v={};if(typeof d.initial!="boolean"){const y=jh(r,Array.isArray(d.initial)?d.initial[0]:d.initial);y&&y.transition&&(v.transition=y.transition)}p.forEach(y=>{const w=r.getBaseTarget(y),j=r.getValue(y);j&&(j.liveStyle=!0),v[y]=w??null}),f.push({animation:v})}let b=!!f.length;return i&&(d.initial===!1||d.initial===d.animate)&&!r.manuallyAnimateOnMount&&(b=!1),i=!1,b?t(f):Promise.resolve()}function l(u,d){if(s[u].isActive===d)return Promise.resolve();r.variantChildren?.forEach(f=>f.animationState?.setActive(u,d)),s[u].isActive=d;const A=c(u);for(const f in s)s[f].protectedKeys={};return A}return{animateChanges:c,setActive:l,setAnimateFunction:o,getState:()=>s,reset:()=>{s=iB(),i=!0}}}function are(r,t){return typeof t=="string"?t!==r:Array.isArray(t)?!_I(t,r):!1}function Od(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iB(){return{animate:Od(!0),whileInView:Od(),whileHover:Od(),whileTap:Od(),whileDrag:Od(),whileFocus:Od(),exit:Od()}}class od{constructor(t){this.isMounted=!1,this.node=t}update(){}}class ore extends od{constructor(t){super(t),t.animationState||(t.animationState=ire(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Dy(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let lre=0;class cre extends od{constructor(){super(...arguments),this.id=lre++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const a=this.node.animationState.setActive("exit",!t);s&&!t&&a.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const ure={animation:{Feature:ore},exit:{Feature:cre}};function Pp(r,t,s,i={passive:!0}){return r.addEventListener(t,s,i),()=>r.removeEventListener(t,s)}function Jp(r){return{point:{x:r.pageX,y:r.pageY}}}const dre=r=>t=>z2(t)&&r(t,Jp(t));function op(r,t,s,i){return Pp(r,t,dre(s),i)}const OI=1e-4,Are=1-OI,hre=1+OI,II=.01,fre=0-II,pre=0+II;function Fa(r){return r.max-r.min}function mre(r,t,s){return Math.abs(r-t)<=s}function aB(r,t,s,i=.5){r.origin=i,r.originPoint=zs(t.min,t.max,r.origin),r.scale=Fa(s)/Fa(t),r.translate=zs(s.min,s.max,r.origin)-r.originPoint,(r.scale>=Are&&r.scale<=hre||isNaN(r.scale))&&(r.scale=1),(r.translate>=fre&&r.translate<=pre||isNaN(r.translate))&&(r.translate=0)}function lp(r,t,s,i){aB(r.x,t.x,s.x,i?i.originX:void 0),aB(r.y,t.y,s.y,i?i.originY:void 0)}function oB(r,t,s){r.min=s.min+t.min,r.max=r.min+Fa(t)}function gre(r,t,s){oB(r.x,t.x,s.x),oB(r.y,t.y,s.y)}function lB(r,t,s){r.min=t.min-s.min,r.max=r.min+Fa(t)}function cp(r,t,s){lB(r.x,t.x,s.x),lB(r.y,t.y,s.y)}function Oo(r){return[r("x"),r("y")]}const PI=({current:r})=>r?r.ownerDocument.defaultView:null,cB=(r,t)=>Math.abs(r-t);function yre(r,t){const s=cB(r.x,t.x),i=cB(r.y,t.y);return Math.sqrt(s**2+i**2)}class TI{constructor(t,s,{transformPagePoint:i,contextWindow:a=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=fv(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=yre(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!g)return;const{point:b}=p,{timestamp:v}=ra;this.history.push({...b,timestamp:v});const{onStart:y,onMove:w}=this.handlers;m||(y&&y(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=hv(m,this.transformPagePoint),Ps.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:g,onSessionEnd:b,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=fv(p.type==="pointercancel"?this.lastMoveEventInfo:hv(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,y),b&&b(p,y)},!z2(t))return;this.dragSnapToOrigin=o,this.handlers=s,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=a||window;const l=Jp(t),u=hv(l,this.transformPagePoint),{point:d}=u,{timestamp:A}=ra;this.history=[{...d,timestamp:A}];const{onSessionStart:f}=s;f&&f(t,fv(u,this.history)),this.removeListeners=qp(op(this.contextWindow,"pointermove",this.handlePointerMove),op(this.contextWindow,"pointerup",this.handlePointerUp),op(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Zu(this.updatePoint)}}function hv(r,t){return t?{point:t(r.point)}:r}function uB(r,t){return{x:r.x-t.x,y:r.y-t.y}}function fv({point:r},t){return{point:r,delta:uB(r,FI(t)),offset:uB(r,xre(t)),velocity:bre(t,.1)}}function xre(r){return r[0]}function FI(r){return r[r.length-1]}function bre(r,t){if(r.length<2)return{x:0,y:0};let s=r.length-1,i=null;const a=FI(r);for(;s>=0&&(i=r[s],!(a.timestamp-i.timestamp>ec(t)));)s--;if(!i)return{x:0,y:0};const o=tc(a.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const c={x:(a.x-i.x)/o,y:(a.y-i.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function vre(r,{min:t,max:s},i){return t!==void 0&&r<t?r=i?zs(t,r,i.min):Math.max(r,t):s!==void 0&&r>s&&(r=i?zs(s,r,i.max):Math.min(r,s)),r}function dB(r,t,s){return{min:t!==void 0?r.min+t:void 0,max:s!==void 0?r.max+s-(r.max-r.min):void 0}}function wre(r,{top:t,left:s,bottom:i,right:a}){return{x:dB(r.x,s,a),y:dB(r.y,t,i)}}function AB(r,t){let s=t.min-r.min,i=t.max-r.max;return t.max-t.min<r.max-r.min&&([s,i]=[i,s]),{min:s,max:i}}function jre(r,t){return{x:AB(r.x,t.x),y:AB(r.y,t.y)}}function Nre(r,t){let s=.5;const i=Fa(r),a=Fa(t);return a>i?s=kp(t.min,t.max-i,r.min):i>a&&(s=kp(r.min,r.max-a,t.min)),$c(0,1,s)}function Sre(r,t){const s={};return t.min!==void 0&&(s.min=t.min-r.min),t.max!==void 0&&(s.max=t.max-r.min),s}const l1=.35;function Cre(r=l1){return r===!1?r=0:r===!0&&(r=l1),{x:hB(r,"left","right"),y:hB(r,"top","bottom")}}function hB(r,t,s){return{min:fB(r,t),max:fB(r,s)}}function fB(r,t){return typeof r=="number"?r:r[t]||0}const Bre=new WeakMap;class kre{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ai(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:i}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const o=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Jp(f).point)},c=(f,p)=>{const{drag:m,dragPropagation:g,onDragStart:b}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Fee(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Oo(y=>{let w=this.getAxisMotionValue(y).get()||0;if(rc.test(w)){const{projection:j}=this.visualElement;if(j&&j.layout){const C=j.layout.layoutBox[y];C&&(w=Fa(C)*(parseFloat(w)/100))}}this.originPoint[y]=w}),b&&Ps.postRender(()=>b(f,p)),a1(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:b,onDrag:v}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:y}=p;if(g&&this.currentDirection===null){this.currentDirection=_re(y),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",p.point,y),this.updateAxis("y",p.point,y),this.visualElement.render(),v&&v(f,p)},u=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Oo(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:A}=this.getProps();this.panSession=new TI(t,{onSessionStart:o,onStart:c,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:i,contextWindow:PI(this.visualElement)})}stop(t,s){const i=t||this.latestPointerEvent,a=s||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!a||!i)return;const{velocity:c}=a;this.startAnimation(c);const{onDragEnd:l}=this.getProps();l&&Ps.postRender(()=>l(i,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,i){const{drag:a}=this.getProps();if(!i||!Og(t,a,this.currentDirection))return;const o=this.getAxisMotionValue(t);let c=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(c=vre(c,this.constraints[t],this.elastic[t])),o.set(c)}resolveConstraints(){const{dragConstraints:t,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&lh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=wre(i.layoutBox,t):this.constraints=!1,this.elastic=Cre(s),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Oo(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Sre(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!lh(t))return!1;const i=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=Ete(i,a.root,this.visualElement.getTransformPagePoint());let c=jre(a.layout.layoutBox,o);if(s){const l=s(Bte(c));this.hasMutatedConstraints=!!l,l&&(c=yI(l))}return c}startAnimation(t){const{drag:s,dragMomentum:i,dragElastic:a,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=Oo(A=>{if(!Og(A,s,this.currentDirection))return;let f=u&&u[A]||{};c&&(f={min:0,max:0});const p=a?200:1e6,m=a?40:1e7,g={type:"inertia",velocity:i?t[A]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(A,g)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const i=this.getAxisMotionValue(t);return a1(this.visualElement,t),i.start(tj(t,i,0,s,this.visualElement,!1))}stopAnimation(){Oo(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Oo(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),a=i[s];return a||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Oo(s=>{const{drag:i}=this.getProps();if(!Og(s,i,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(s);if(a&&a.layout){const{min:c,max:l}=a.layout.layoutBox[s];o.set(t[s]-zs(c,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:i}=this.visualElement;if(!lh(s)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Oo(c=>{const l=this.getAxisMotionValue(c);if(l&&this.constraints!==!1){const u=l.get();a[c]=Nre({min:u,max:u},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Oo(c=>{if(!Og(c,t,null))return;const l=this.getAxisMotionValue(c),{min:u,max:d}=this.constraints[c];l.set(zs(u,d,a[c]))})}addListeners(){if(!this.visualElement.current)return;Bre.set(this.visualElement,this);const t=this.visualElement.current,s=op(t,"pointerdown",u=>{const{drag:d,dragListener:A=!0}=this.getProps();d&&A&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();lh(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Ps.read(i);const c=Pp(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Oo(A=>{const f=this.getAxisMotionValue(A);f&&(this.originPoint[A]+=u[A].translate,f.set(f.get()+u[A].translate))}),this.visualElement.render())}));return()=>{c(),s(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:c=l1,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:i,dragPropagation:a,dragConstraints:o,dragElastic:c,dragMomentum:l}}}function Og(r,t,s){return(t===!0||t===r)&&(s===null||s===r)}function _re(r,t=10){let s=null;return Math.abs(r.y)>t?s="y":Math.abs(r.x)>t&&(s="x"),s}class Ere extends od{constructor(t){super(t),this.removeGroupControls=Ro,this.removeListeners=Ro,this.controls=new kre(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ro}unmount(){this.removeGroupControls(),this.removeListeners()}}const pB=r=>(t,s)=>{r&&Ps.postRender(()=>r(t,s))};class Ore extends od{constructor(){super(...arguments),this.removePointerDownListener=Ro}onPointerDown(t){this.session=new TI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:PI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:pB(t),onStart:pB(s),onMove:i,onEnd:(o,c)=>{delete this.session,a&&Ps.postRender(()=>a(o,c))}}}mount(){this.removePointerDownListener=op(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const s0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mB(r,t){return t.max===t.min?0:r/(t.max-t.min)*100}const Of={correct:(r,t)=>{if(!t.target)return r;if(typeof r=="string")if(Jr.test(r))r=parseFloat(r);else return r;const s=mB(r,t.target.x),i=mB(r,t.target.y);return`${s}% ${i}%`}},Ire={correct:(r,{treeScale:t,projectionDelta:s})=>{const i=r,a=ed.parse(r);if(a.length>5)return i;const o=ed.createTransformer(r),c=typeof a[0]!="number"?1:0,l=s.x.scale*t.x,u=s.y.scale*t.y;a[0+c]/=l,a[1+c]/=u;const d=zs(l,u,.5);return typeof a[2+c]=="number"&&(a[2+c]/=d),typeof a[3+c]=="number"&&(a[3+c]/=d),o(a)}};let pv=!1;class Pre extends ee.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:i,layoutId:a}=this.props,{projection:o}=t;tte(Tre),o&&(s.group&&s.group.add(o),i&&i.register&&a&&i.register(o),pv&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),s0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:i,drag:a,isPresent:o}=this.props,{projection:c}=i;return c&&(c.isPresent=o,pv=!0,a||t.layoutDependency!==s||s===void 0||t.isPresent!==o?c.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?c.promote():c.relegate()||Ps.postRender(()=>{const l=c.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),V2.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:i}=this.props,{projection:a}=t;pv=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function UI(r){const[t,s]=sI(),i=ee.useContext(w2);return n.jsx(Pre,{...r,layoutGroup:i,switchLayoutGroup:ee.useContext(mI),isPresent:t,safeToRemove:s})}const Tre={borderRadius:{...Of,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Of,borderTopRightRadius:Of,borderBottomLeftRadius:Of,borderBottomRightRadius:Of,boxShadow:Ire};function Fre(r,t,s){const i=Na(r)?r:kh(r);return i.start(tj("",i,t,s)),i.animation}const Ure=(r,t)=>r.depth-t.depth;class Lre{constructor(){this.children=[],this.isDirty=!1}add(t){S2(this.children,t),this.isDirty=!0}remove(t){C2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Ure),this.isDirty=!1,this.children.forEach(t)}}function Dre(r,t){const s=Ja.now(),i=({timestamp:a})=>{const o=a-s;o>=t&&(Zu(i),r(o-t))};return Ps.setup(i,!0),()=>Zu(i)}const LI=["TopLeft","TopRight","BottomLeft","BottomRight"],Mre=LI.length,gB=r=>typeof r=="string"?parseFloat(r):r,yB=r=>typeof r=="number"||Jr.test(r);function Rre(r,t,s,i,a,o){a?(r.opacity=zs(0,s.opacity??1,Qre(i)),r.opacityExit=zs(t.opacity??1,0,$re(i))):o&&(r.opacity=zs(t.opacity??1,s.opacity??1,i));for(let c=0;c<Mre;c++){const l=`border${LI[c]}Radius`;let u=xB(t,l),d=xB(s,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||yB(u)===yB(d)?(r[l]=Math.max(zs(gB(u),gB(d),i),0),(rc.test(d)||rc.test(u))&&(r[l]+="%")):r[l]=d}(t.rotate||s.rotate)&&(r.rotate=zs(t.rotate||0,s.rotate||0,i))}function xB(r,t){return r[t]!==void 0?r[t]:r.borderRadius}const Qre=DI(0,.5,NO),$re=DI(.5,.95,Ro);function DI(r,t,s){return i=>i<r?0:i>t?1:s(kp(r,t,i))}function bB(r,t){r.min=t.min,r.max=t.max}function Eo(r,t){bB(r.x,t.x),bB(r.y,t.y)}function vB(r,t){r.translate=t.translate,r.scale=t.scale,r.originPoint=t.originPoint,r.origin=t.origin}function wB(r,t,s,i,a){return r-=t,r=Z0(r,1/s,i),a!==void 0&&(r=Z0(r,1/a,i)),r}function Hre(r,t=0,s=1,i=.5,a,o=r,c=r){if(rc.test(t)&&(t=parseFloat(t),t=zs(c.min,c.max,t/100)-c.min),typeof t!="number")return;let l=zs(o.min,o.max,i);r===o&&(l-=t),r.min=wB(r.min,t,s,l,a),r.max=wB(r.max,t,s,l,a)}function jB(r,t,[s,i,a],o,c){Hre(r,t[s],t[i],t[a],t.scale,o,c)}const Vre=["x","scaleX","originX"],zre=["y","scaleY","originY"];function NB(r,t,s,i){jB(r.x,t,Vre,s?s.x:void 0,i?i.x:void 0),jB(r.y,t,zre,s?s.y:void 0,i?i.y:void 0)}function SB(r){return r.translate===0&&r.scale===1}function MI(r){return SB(r.x)&&SB(r.y)}function CB(r,t){return r.min===t.min&&r.max===t.max}function Kre(r,t){return CB(r.x,t.x)&&CB(r.y,t.y)}function BB(r,t){return Math.round(r.min)===Math.round(t.min)&&Math.round(r.max)===Math.round(t.max)}function RI(r,t){return BB(r.x,t.x)&&BB(r.y,t.y)}function kB(r){return Fa(r.x)/Fa(r.y)}function _B(r,t){return r.translate===t.translate&&r.scale===t.scale&&r.originPoint===t.originPoint}class Gre{constructor(){this.members=[]}add(t){S2(this.members,t),t.scheduleRender()}remove(t){if(C2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(a=>t===a);if(s===0)return!1;let i;for(let a=s;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(t,s){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,s&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:i}=t;s.onExitComplete&&s.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Wre(r,t,s){let i="";const a=r.x.translate/t.x,o=r.y.translate/t.y,c=s?.z||0;if((a||o||c)&&(i=`translate3d(${a}px, ${o}px, ${c}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:d,rotate:A,rotateX:f,rotateY:p,skewX:m,skewY:g}=s;d&&(i=`perspective(${d}px) ${i}`),A&&(i+=`rotate(${A}deg) `),f&&(i+=`rotateX(${f}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),g&&(i+=`skewY(${g}deg) `)}const l=r.x.scale*t.x,u=r.y.scale*t.y;return(l!==1||u!==1)&&(i+=`scale(${l}, ${u})`),i||"none"}const mv=["","X","Y","Z"],qre=1e3;let Yre=0;function gv(r,t,s,i){const{latestValues:a}=t;a[r]&&(s[r]=a[r],t.setStaticValue(r,0),i&&(i[r]=0))}function QI(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:t}=r.options;if(!t)return;const s=CI(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:o}=r.options;window.MotionCancelOptimisedAnimation(s,"transform",Ps,!(a||o))}const{parent:i}=r;i&&!i.hasCheckedOptimisedAppear&&QI(i)}function $I({attachResizeListener:r,defaultParent:t,measureScroll:s,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(c={},l=t?.()){this.id=Yre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Zre),this.nodes.forEach(nne),this.nodes.forEach(sne),this.nodes.forEach(ene)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Lre)}addEventListener(c,l){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new _2),this.eventHandlers.get(c).add(l)}notifyListeners(c,...l){const u=this.eventHandlers.get(c);u&&u.notify(...l)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=nI(c)&&!Qee(c),this.instance=c;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),r){let A,f=0;const p=()=>this.root.updateBlockedByResize=!1;Ps.read(()=>{f=window.innerWidth}),r(c,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,A&&A(),A=Dre(p,250),s0.hasAnimatedSinceResize&&(s0.hasAnimatedSinceResize=!1,this.nodes.forEach(IB)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||cne,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=d.getProps(),y=!this.targetLayout||!RI(this.targetLayout,m),w=!f&&p;if(this.options.layoutRoot||this.resumeFrom||w||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...$2(g,"layout"),onPlay:b,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(A,w)}else f||IB(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Zu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ine),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&QI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const f=this.path[A];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(EB);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(OB);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rne),this.nodes.forEach(Xre),this.nodes.forEach(Jre)):this.nodes.forEach(OB),this.clearAllSnapshots();const l=Ja.now();ra.delta=$c(0,1e3/60,l-ra.timestamp),ra.timestamp=l,ra.isProcessing=!0,iv.update.process(ra),iv.preRender.process(ra),iv.render.process(ra),ra.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,V2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tne),this.sharedNodes.forEach(ane)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ps.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ps.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fa(this.snapshot.measuredBox.x)&&!Fa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ai(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(l=!1),l&&this.instance){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!MI(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,A=d!==this.prevTransformTemplateValue;c&&this.instance&&(l||Fd(this.latestValues)||A)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return c&&(u=this.removeTransform(u)),une(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Ai();const l=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(dne))){const{scroll:d}=this.root;d&&(ch(l.x,d.offset.x),ch(l.y,d.offset.y))}return l}removeElementScroll(c){const l=Ai();if(Eo(l,c),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:A,options:f}=d;d!==this.root&&A&&f.layoutScroll&&(A.wasRoot&&Eo(l,c),ch(l.x,A.offset.x),ch(l.y,A.offset.y))}return l}applyTransform(c,l=!1){const u=Ai();Eo(u,c);for(let d=0;d<this.path.length;d++){const A=this.path[d];!l&&A.options.layoutScroll&&A.scroll&&A!==A.root&&uh(u,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),Fd(A.latestValues)&&uh(u,A.latestValues)}return Fd(this.latestValues)&&uh(u,this.latestValues),u}removeTransform(c){const l=Ai();Eo(l,c);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Fd(d.latestValues))continue;r1(d.latestValues)&&d.updateSnapshot();const A=Ai(),f=d.measurePageBox();Eo(A,f),NB(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,A)}return Fd(this.latestValues)&&NB(l,this.latestValues),l}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ra.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(c||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:f}=this.options;if(!(!this.layout||!(A||f))){if(this.resolvedRelativeTargetAt=ra.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ai(),this.relativeTargetOrigin=Ai(),cp(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Eo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ai(),this.targetWithTransforms=Ai()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Eo(this.target,this.layout.layoutBox),bI(this.target,this.targetDelta)):Eo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ai(),this.relativeTargetOrigin=Ai(),cp(this.relativeTargetOrigin,this.target,p.target),Eo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||r1(this.parent.latestValues)||xI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),l=!!this.resumingFrom||this!==c;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ra.timestamp&&(u=!1),u)return;const{layout:d,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||A))return;Eo(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;_te(this.layoutCorrected,this.treeScale,this.path,l),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Ai());const{target:m}=c;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vB(this.prevProjectionDelta.x,this.projectionDelta.x),vB(this.prevProjectionDelta.y,this.projectionDelta.y)),lp(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!_B(this.projectionDelta.x,this.prevProjectionDelta.x)||!_B(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=dh(),this.projectionDelta=dh(),this.projectionDeltaWithTransform=dh()}setAnimationOrigin(c,l=!1){const u=this.snapshot,d=u?u.latestValues:{},A={...this.latestValues},f=dh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=Ai(),m=u?u.source:void 0,g=this.layout?this.layout.source:void 0,b=m!==g,v=this.getStack(),y=!v||v.members.length<=1,w=!!(b&&!y&&this.options.crossfade===!0&&!this.path.some(lne));this.animationProgress=0;let j;this.mixTargetDelta=C=>{const B=C/1e3;PB(f.x,c.x,B),PB(f.y,c.y,B),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cp(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),one(this.relativeTarget,this.relativeTargetOrigin,p,B),j&&Kre(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Ai()),Eo(j,this.relativeTarget)),b&&(this.animationValues=A,Rre(A,d,this.latestValues,B,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Zu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ps.update(()=>{s0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=kh(0)),this.currentAnimation=Fre(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),c.onUpdate&&c.onUpdate(l)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:A}=c;if(!(!l||!u||!d)){if(this!==c&&this.layout&&d&&HI(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Ai();const f=Fa(this.layout.layoutBox.x);u.x.min=c.target.x.min,u.x.max=u.x.min+f;const p=Fa(this.layout.layoutBox.y);u.y.min=c.target.y.min,u.y.max=u.y.min+p}Eo(l,u),uh(l,A),lp(this.projectionDeltaWithTransform,this.layoutCorrected,l,A)}}registerSharedNode(c,l){this.sharedNodes.has(c)||this.sharedNodes.set(c,new Gre),this.sharedNodes.get(c).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),c&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let l=!1;const{latestValues:u}=c;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&gv("z",c,d,this.animationValues);for(let A=0;A<mv.length;A++)gv(`rotate${mv[A]}`,c,d,this.animationValues),gv(`skew${mv[A]}`,c,d,this.animationValues);c.render();for(const A in d)c.setStaticValue(A,d[A]),this.animationValues&&(this.animationValues[A]=d[A]);c.scheduleRender()}applyProjectionStyles(c,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=n0(l?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=n0(l?.pointerEvents)||""),this.hasProjected&&!Fd(this.latestValues)&&(c.transform=u?u({},""):"none",this.hasProjected=!1);return}c.visibility="";const A=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=Wre(this.projectionDeltaWithTransform,this.treeScale,A);u&&(f=u(A,f)),c.transform=f;const{x:p,y:m}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,d.animationValues?c.opacity=d===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:c.opacity=d===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const g in Ip){if(A[g]===void 0)continue;const{correct:b,applyTo:v,isCSSVariable:y}=Ip[g],w=f==="none"?A[g]:b(A[g],d);if(v){const j=v.length;for(let C=0;C<j;C++)c[v[C]]=w}else y?this.options.visualElement.renderState.vars[g]=w:c[g]=w}this.options.layoutId&&(c.pointerEvents=d===this?n0(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(EB),this.root.sharedNodes.clear()}}}function Xre(r){r.updateLayout()}function Jre(r){const t=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&t&&r.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=r.layout,{animationType:a}=r.options,o=t.source!==r.layout.source;a==="size"?Oo(A=>{const f=o?t.measuredBox[A]:t.layoutBox[A],p=Fa(f);f.min=s[A].min,f.max=f.min+p}):HI(a,t.layoutBox,s)&&Oo(A=>{const f=o?t.measuredBox[A]:t.layoutBox[A],p=Fa(s[A]);f.max=f.min+p,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[A].max=r.relativeTarget[A].min+p)});const c=dh();lp(c,s,t.layoutBox);const l=dh();o?lp(l,r.applyTransform(i,!0),t.measuredBox):lp(l,s,t.layoutBox);const u=!MI(c);let d=!1;if(!r.resumeFrom){const A=r.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:f,layout:p}=A;if(f&&p){const m=Ai();cp(m,t.layoutBox,f.layoutBox);const g=Ai();cp(g,s,p.layoutBox),RI(m,g)||(d=!0),A.options.layoutRoot&&(r.relativeTarget=g,r.relativeTargetOrigin=m,r.relativeParent=A)}}}r.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:l,layoutDelta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(r.isLead()){const{onExitComplete:s}=r.options;s&&s()}r.options.transition=void 0}function Zre(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function ene(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function tne(r){r.clearSnapshot()}function EB(r){r.clearMeasurements()}function OB(r){r.isLayoutDirty=!1}function rne(r){const{visualElement:t}=r.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),r.resetTransform()}function IB(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function nne(r){r.resolveTargetDelta()}function sne(r){r.calcProjection()}function ine(r){r.resetSkewAndRotation()}function ane(r){r.removeLeadSnapshot()}function PB(r,t,s){r.translate=zs(t.translate,0,s),r.scale=zs(t.scale,1,s),r.origin=t.origin,r.originPoint=t.originPoint}function TB(r,t,s,i){r.min=zs(t.min,s.min,i),r.max=zs(t.max,s.max,i)}function one(r,t,s,i){TB(r.x,t.x,s.x,i),TB(r.y,t.y,s.y,i)}function lne(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const cne={duration:.45,ease:[.4,0,.1,1]},FB=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),UB=FB("applewebkit/")&&!FB("chrome/")?Math.round:Ro;function LB(r){r.min=UB(r.min),r.max=UB(r.max)}function une(r){LB(r.x),LB(r.y)}function HI(r,t,s){return r==="position"||r==="preserve-aspect"&&!mre(kB(t),kB(s),.2)}function dne(r){return r!==r.root&&r.scroll?.wasRoot}const Ane=$I({attachResizeListener:(r,t)=>Pp(r,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yv={current:void 0},VI=$I({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!yv.current){const r=new Ane({});r.mount(window),r.setOptions({layoutScroll:!0}),yv.current=r}return yv.current},resetTransform:(r,t)=>{r.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),hne={pan:{Feature:Ore},drag:{Feature:Ere,ProjectionNode:VI,MeasureLayout:UI}};function DB(r,t,s){const{props:i}=r;r.animationState&&i.whileHover&&r.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,o=i[a];o&&Ps.postRender(()=>o(t,Jp(t)))}class fne extends od{mount(){const{current:t}=this.node;t&&(this.unmount=Uee(t,(s,i)=>(DB(this.node,i,"Start"),a=>DB(this.node,a,"End"))))}unmount(){}}class pne extends od{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qp(Pp(this.node.current,"focus",()=>this.onFocus()),Pp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function MB(r,t,s){const{props:i}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&i.whileTap&&r.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),o=i[a];o&&Ps.postRender(()=>o(t,Jp(t)))}class mne extends od{mount(){const{current:t}=this.node;t&&(this.unmount=Ree(t,(s,i)=>(MB(this.node,i,"Start"),(a,{success:o})=>MB(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const c1=new WeakMap,xv=new WeakMap,gne=r=>{const t=c1.get(r.target);t&&t(r)},yne=r=>{r.forEach(gne)};function xne({root:r,...t}){const s=r||document;xv.has(s)||xv.set(s,{});const i=xv.get(s),a=JSON.stringify(t);return i[a]||(i[a]=new IntersectionObserver(yne,{root:r,...t})),i[a]}function bne(r,t,s){const i=xne(t);return c1.set(r,s),i.observe(r),()=>{c1.delete(r),i.unobserve(r)}}const vne={some:0,all:1};class wne extends od{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:i,amount:a="some",once:o}=t,c={root:s?s.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:vne[a]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:A,onViewportLeave:f}=this.node.getProps(),p=d?A:f;p&&p(u)};return bne(this.node.current,c,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(jne(t,s))&&this.startObserver()}unmount(){}}function jne({viewport:r={}},{viewport:t={}}={}){return s=>r[s]!==t[s]}const Nne={inView:{Feature:wne},tap:{Feature:mne},focus:{Feature:pne},hover:{Feature:fne}},Sne={layout:{ProjectionNode:VI,MeasureLayout:UI}},Cne={...ure,...Nne,...hne,...Sne},Bne=Cte(Cne,Mte),Id={purple3:"#7B2CBF",purple4:"#9D4EDD",purple5:"#C77DFF",purple6:"#E0AAFF"},kne={order_update:Id.purple3,booking_update:Id.purple3,review_update:Id.purple5,promotion:Id.purple5,warning:Id.purple4,announcement:Id.purple6,withdrawal_update:Id.purple6};function _ne(){const r=yi(),{notifications:t,loading:s,isLoaded:i,markAsRead:a,softDelete:o,markAllRead:c,setPage:l,total:u=0}=qk(),d=()=>{l&&l(f=>f+1)},A=f=>{f.isRead||a(f._id),f.link&&r(f.link)};return n.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 p-4 sm:p-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("header",{className:"flex items-center justify-between mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Notifications"}),n.jsx("button",{onClick:c,disabled:t.every(f=>f.isRead),className:`px-4 py-2 rounded-lg font-medium transition duration-300 ${t.every(f=>f.isRead)?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 text-white shadow"}`,children:"Mark all as read"})]}),!s&&i&&t.length===0&&n.jsx("p",{className:"text-center mt-10 text-gray-500",children:"No notifications to show."}),s&&n.jsx("p",{className:"text-center mt-10 text-gray-500",children:"Loading notifications..."}),n.jsx("ul",{className:"space-y-4",children:n.jsx(Wee,{children:t.filter(f=>!f.isDeleted).map(f=>{const p=Gk[f.type];return n.jsxs(Bne.li,{onClick:()=>A(f),initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,height:0,padding:0,margin:0},transition:{duration:.3},className:`cursor-pointer bg-white rounded-2xl p-5 flex items-start gap-4 shadow transition duration-300 hover:shadow-lg border ${f.isRead?"border-gray-200":"border-purple-300"}`,"aria-label":`Notification: ${f.title}`,children:[n.jsx("div",{className:"flex-shrink-0 mt-1",style:{color:kne[f.type]},children:typeof p=="function"&&n.jsx(p,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:`font-semibold text-lg truncate mb-1 ${f.isRead?"text-gray-700":"text-purple-700"}`,children:f.title}),n.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:f.body}),n.jsx("time",{className:"block text-xs text-gray-500 mt-2",dateTime:f.createdAt,children:new Date(f.createdAt).toLocaleString()})]}),n.jsx("button",{onClick:m=>{m.stopPropagation(),o(f._id)},title:"Delete notification",className:"text-gray-400 hover:text-red-500 transition","aria-label":"Delete notification",children:n.jsx(mo,{className:"w-6 h-6"})})]},f._id)})})}),t.length<u&&n.jsx("div",{className:"flex justify-center mt-10",children:n.jsx("button",{onClick:d,disabled:s,className:`px-6 py-3 rounded-xl font-semibold transition duration-300 shadow-md ${s?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:s?"Loading...":"Load More"})})]})})}function Ene(){return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-4xl w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-extrabold text-white",children:"Privacy & Return Policies"}),n.jsx("p",{className:"mt-2 text-gray-400",children:"Last Updated: January 2025"})]}),n.jsxs("div",{className:"bg-zinc-900 p-8 rounded-lg shadow-md space-y-6 text-white text-sm",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Privacy Policy"}),n.jsx("p",{className:"mt-2 text-gray-300",children:"We collect personal data such as your name, email, payment info to operate the platform and provide services. We use cookies to improve your experience and track platform usage. We never sell your personal information and only share it with trusted third-party providers under strict confidentiality. You have rights to access, correct, delete, or export your data and opt out of marketing communications."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mt-6",children:"Return Policy"}),n.jsx("p",{className:"mt-2 text-gray-300",children:"Our platform enables sellers to define their own return policies for products and services. Generally:"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 text-gray-300",children:[n.jsx("li",{children:"Returns must be requested within 14 days of delivery."}),n.jsx("li",{children:"Products must be unused and in original packaging."}),n.jsx("li",{children:"Services like bookings may be non-refundable once delivered."}),n.jsx("li",{children:"Refunds or exchanges are processed after seller approval and item inspection."})]}),n.jsx("p",{className:"mt-2 text-gray-300",children:"For specific return instructions and eligibility, please check the sellers return policy on their store page."})]})]})]})})}function One(){return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-4xl w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-extrabold text-white",children:"Terms of Service"}),n.jsx("p",{className:"mt-2 text-gray-400",children:"Last Updated: July 2025"})]}),n.jsxs("div",{className:"bg-zinc-900 p-8 rounded-lg shadow-md space-y-6 text-white text-sm",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Acceptance of Terms"}),n.jsx("p",{className:"text-gray-300",children:"By using AIO, you agree to our Terms and Privacy Policy."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mt-6",children:"User Accounts"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-300",children:[n.jsx("li",{children:"You must be 18+ years old"}),n.jsx("li",{children:"You're responsible for your account activity"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mt-6",children:"Seller Obligations"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-300",children:[n.jsx("li",{children:"Provide accurate listings & fulfill orders"}),n.jsx("li",{children:"Comply with laws and respect IP rights"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mt-6",children:"Dispute Resolution"}),n.jsx("p",{className:"text-gray-300",children:"Disputes may be resolved via AIO mediation or binding arbitration."})]})]})]})})}const bv=r=>new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR"}).format(r),If=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",RB=r=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",processing:"bg-blue-100 text-blue-800 border-blue-200",completed:"bg-gray-100 text-gray-800 border-gray-200"})[r]||"bg-gray-100 text-gray-800 border-gray-200",QB=r=>({pending:n.jsx(is,{className:"w-4 h-4"}),approved:n.jsx(Xr,{className:"w-4 h-4"}),rejected:n.jsx(mo,{className:"w-4 h-4"}),processing:n.jsx(Ki,{className:"w-4 h-4"}),completed:n.jsx(Xa,{className:"w-4 h-4"})})[r]||n.jsx(is,{className:"w-4 h-4"}),Ine=()=>{const[r,t]=ee.useState([]),[s,i]=ee.useState(!0),[a,o]=ee.useState(null),[c,l]=ee.useState(!1),[u,d]=ee.useState(!1),[A,f]=ee.useState(""),[p,m]=ee.useState([]),[g,b]=ee.useState(!1),[v,y]=ee.useState(null),[w,j]=ee.useState({status:"",search:"",sortBy:"createdAt",sortOrder:"desc",page:1,limit:10}),[C,B]=ee.useState(null);ee.useEffect(()=>{E()},[w]);const E=async()=>{try{i(!0),y(null);const F=await Dt.getAllWithdrawals(w);F.success&&(t(F.data.withdrawals),B(F.data.pagination))}catch(F){console.error("Failed to fetch withdrawals:",F),y("Failed to fetch withdrawals. Please try again.")}finally{i(!1)}},_=async(F,G)=>{try{d(!0),y(null);const X=r.find(T=>T._id===F);if(!X||!S(X.status,G)){y("Invalid status transition");return}(await Dt.processWithdrawal(F,{action:G,adminNotes:A})).success&&(l(!1),o(null),f(""),await E())}catch(X){console.error("Failed to process withdrawal:",X),y("Failed to process withdrawal. Please try again.")}finally{d(!1)}},S=(F,G)=>({pending:["processing","approved","rejected"],processing:["approved","rejected"],approved:["completed"],rejected:[],completed:[]})[F]?.includes(G)||!1,N=F=>({pending:[{action:"processing",label:"Process",color:"blue"},{action:"approved",label:"Approve",color:"green"},{action:"rejected",label:"Reject",color:"red"}],processing:[{action:"approved",label:"Approve",color:"green"},{action:"rejected",label:"Reject",color:"red"}],approved:[{action:"completed",label:"Complete",color:"gray"}],rejected:[],completed:[]})[F]||[],O=async F=>{try{d(!0),y(null);const G=p.filter(q=>{const T=r.find(U=>U._id===q);return T&&S(T.status,F)});if(G.length===0){y("No valid items for this transition");return}(await Dt.bulkProcess(G,F)).success&&(m([]),b(!1),await E())}catch(G){console.error("Failed to process bulk action:",G),y("Failed to process bulk action. Please try again.")}finally{d(!1)}},k=F=>{m(F?r.map(G=>G._id):[])},I=(F,G)=>{m(G?[...p,F]:p.filter(X=>X!==F))},R=F=>{o(F),f(F.withdrawalDetails?.adminNotes||""),l(!0)},Q=F=>{const G=w.sortBy===F&&w.sortOrder==="asc"?"desc":"asc";j({...w,sortBy:F,sortOrder:G,page:1})},$=()=>{try{const F=[["Store Name","Email","Amount","Status","Requested Date","Bank","Account"],...r.map(T=>[T.userId?.name||"Unknown",T.userId?.email||"No email",T.amount||0,T.status||"Unknown",If(T.createdAt),T.withdrawalDetails?.bankAccountId?.bankName||"Unknown Bank",T.withdrawalDetails?.bankAccountId?.accountNumber||"Unknown Account"])].map(T=>T.join(",")).join(`
`),G=new Blob([F],{type:"text/csv"}),X=URL.createObjectURL(G),q=document.createElement("a");q.href=X,q.download="withdrawals_export.csv",q.click(),URL.revokeObjectURL(X)}catch(F){console.error("Export failed:",F),y("Failed to export data. Please try again.")}},L=ee.useMemo(()=>({pending:r.filter(F=>F.status==="pending").length,approved:r.filter(F=>F.status==="approved").length,rejected:r.filter(F=>F.status==="rejected").length,processing:r.filter(F=>F.status==="processing").length,completed:r.filter(F=>F.status==="completed").length,totalAmount:r.reduce((F,G)=>F+(G.amount||0),0)}),[r]);return s?n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-8",children:n.jsxs("div",{className:"animate-pulse space-y-6",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-64"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[1,2,3,4,5].map(F=>n.jsx("div",{className:"h-24 bg-gray-200 rounded-lg"},F))}),n.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(F=>n.jsx("div",{className:"h-16 bg-gray-200 rounded"},F))})]})})})}):n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[v&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ki,{className:"w-5 h-5 text-red-600"}),n.jsx("span",{className:"text-red-800 font-medium",children:v}),n.jsx("button",{onClick:()=>y(null),className:"ml-auto p-1 text-red-600 hover:text-red-800",children:n.jsx(Ts,{className:"w-4 h-4"})})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-8",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-black mb-2",children:"Withdrawal Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage and process store withdrawal requests"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search stores...",value:w.search,onChange:F=>j({...w,search:F.target.value,page:1}),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent w-full sm:w-64"})]}),n.jsxs("select",{value:w.status,onChange:F=>j({...w,status:F.target.value,page:1}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"rejected",children:"Rejected"})]}),n.jsxs("button",{onClick:$,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2",children:[n.jsx(Dc,{className:"w-4 h-4"}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mt-8",children:[n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-yellow-600 font-medium",children:"Pending"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:L.pending})]}),n.jsx(is,{className:"h-8 w-8 text-yellow-600"})]})}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Processing"}),n.jsx("p",{className:"text-2xl font-bold text-blue-800",children:L.processing})]}),n.jsx(Ki,{className:"h-8 w-8 text-blue-600"})]})}),n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Approved"}),n.jsx("p",{className:"text-2xl font-bold text-green-800",children:L.approved})]}),n.jsx(Xr,{className:"h-8 w-8 text-green-600"})]})}),n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Completed"}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:L.completed})]}),n.jsx(Xa,{className:"h-8 w-8 text-gray-600"})]})}),n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Rejected"}),n.jsx("p",{className:"text-2xl font-bold text-red-800",children:L.rejected})]}),n.jsx(mo,{className:"h-8 w-8 text-red-600"})]})}),n.jsx("div",{className:"bg-black text-white rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-300 font-medium",children:"Total Amount"}),n.jsx("p",{className:"text-2xl font-bold",children:bv(L.totalAmount)})]}),n.jsx(fl,{className:"h-8 w-8 text-gray-300"})]})})]})]}),p.length>0&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[p.length," item",p.length>1?"s":""," selected"]}),n.jsx("button",{onClick:()=>m([]),className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear selection"})]}),n.jsxs("div",{className:"flex gap-2",children:[p.some(F=>{const G=r.find(X=>X._id===F);return G&&S(G.status,"processing")})&&n.jsx("button",{onClick:()=>O("processing"),disabled:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm font-medium",children:"Process Selected"}),p.some(F=>{const G=r.find(X=>X._id===F);return G&&S(G.status,"approved")})&&n.jsx("button",{onClick:()=>O("approved"),disabled:u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 text-sm font-medium",children:"Approve Selected"}),n.jsx("button",{onClick:()=>O("rejected"),disabled:u,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 text-sm font-medium",children:"Reject Selected"})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsx("h2",{className:"text-xl font-semibold text-black",children:"Withdrawal Requests"})}),r.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx(zl,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500 text-lg",children:"No withdrawal requests found"}),n.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Try adjusting your filters"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left",children:n.jsx("input",{type:"checkbox",checked:p.length===r.length,onChange:F=>k(F.target.checked),className:"rounded border-gray-300 text-black focus:ring-black"})}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black cursor-pointer hover:bg-gray-100",onClick:()=>Q("storeName"),children:n.jsxs("div",{className:"flex items-center gap-2",children:["Store",n.jsx(Mg,{className:"w-4 h-4"})]})}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black cursor-pointer hover:bg-gray-100",onClick:()=>Q("amount"),children:n.jsxs("div",{className:"flex items-center gap-2",children:["Amount",n.jsx(Mg,{className:"w-4 h-4"})]})}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black",children:"Bank Details"}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black cursor-pointer hover:bg-gray-100",onClick:()=>Q("createdAt"),children:n.jsxs("div",{className:"flex items-center gap-2",children:["Requested",n.jsx(Mg,{className:"w-4 h-4"})]})}),n.jsx("th",{className:"px-6 py-4 text-left font-semibold text-black",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(F=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsx("input",{type:"checkbox",checked:p.includes(F._id),onChange:G=>I(F._id,G.target.checked),className:"rounded border-gray-300 text-black focus:ring-black"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-black text-white rounded-full flex items-center justify-center font-semibold",children:F.userId?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-black",children:F.userId?.name||"Unknown Store"}),n.jsx("p",{className:"text-sm text-gray-600",children:F.userId?.email||"No email"})]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"text-lg font-semibold text-black",children:bv(F.amount)})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-sm font-medium rounded-full border ${RB(F.status)}`,children:[QB(F.status),F.status.charAt(0).toUpperCase()+F.status.slice(1)]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-black text-sm",children:F.withdrawalDetails?.bankAccountId?.bankName||"Bank not specified"}),n.jsx("p",{className:"text-sm text-gray-600",children:F.withdrawalDetails?.bankAccountId?.accountNumber||"Account not specified"}),n.jsx("p",{className:"text-xs text-gray-500",children:F.withdrawalDetails?.bankAccountId?.accountHolder||"Holder not specified"})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[n.jsx(ms,{className:"w-4 h-4"}),If(F.withdrawalDetails?.requestedAt||F.createdAt)]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>R(F),className:"p-2 text-gray-600 hover:text-black transition-colors rounded-lg hover:bg-gray-100",title:"View Details",children:n.jsx(Gn,{className:"h-4 w-4"})}),N(F.status).map(G=>{const X={blue:"text-blue-700 bg-blue-100 hover:bg-blue-200",green:"text-green-700 bg-green-100 hover:bg-green-200",red:"text-red-700 bg-red-100 hover:bg-red-200",gray:"text-gray-700 bg-gray-100 hover:bg-gray-200"};return n.jsx("button",{onClick:()=>_(F._id,G.action),disabled:u,className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors disabled:opacity-50 ${X[G.color]}`,children:G.label},G.action)}),N(F.status).length===0&&n.jsx("span",{className:"px-3 py-1 text-sm font-medium text-gray-500 bg-gray-50 rounded-lg",children:"Final Status"})]})})]},F._id))})]})}),C&&C.pages>1&&n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[n.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(C.current-1)*C.limit+1," to"," ",Math.min(C.current*C.limit,C.total)," of"," ",C.total," results"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>j({...w,page:w.page-1}),disabled:w.page<=1,className:"p-2 text-gray-600 hover:text-black disabled:opacity-50 disabled:cursor-not-allowed rounded-lg hover:bg-gray-100",children:n.jsx(oA,{className:"w-4 h-4"})}),n.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,C.pages)},(F,G)=>{const X=G+1;return n.jsx("button",{onClick:()=>j({...w,page:X}),className:`px-3 py-1 text-sm rounded-lg ${X===w.page?"bg-black text-white":"text-gray-600 hover:text-black hover:bg-gray-100"}`,children:X},X)})}),n.jsx("button",{onClick:()=>j({...w,page:w.page+1}),disabled:w.page>=C.pages,className:"p-2 text-gray-600 hover:text-black disabled:opacity-50 disabled:cursor-not-allowed rounded-lg hover:bg-gray-100",children:n.jsx(Jl,{className:"w-4 h-4"})})]})]})]}),c&&a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold text-black",children:"Withdrawal Request Details"}),n.jsx("button",{onClick:()=>l(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:n.jsx(Ts,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Store Information"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-black text-white rounded-full flex items-center justify-center font-semibold text-lg",children:a.userId?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-black",children:a.userId?.name||"Unknown Store"}),n.jsx("p",{className:"text-sm text-gray-600",children:a.userId?.email||"No email"})]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Withdrawal Amount"}),n.jsx("p",{className:"text-3xl font-bold text-black",children:bv(a.amount)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Current Status"}),n.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-full border ${RB(a.status)}`,children:[QB(a.status),a.status.charAt(0).toUpperCase()+a.status.slice(1)]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Bank Details"}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zl,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"font-medium text-black",children:a.withdrawalDetails?.bankAccountId?.bankName||"Bank not specified"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Account: ",a.withdrawalDetails?.bankAccountId?.accountNumber||"Not specified"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Holder: ",a.withdrawalDetails?.bankAccountId?.accountHolder||"Not specified"]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Request Timeline"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(ms,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:"Requested:"}),n.jsx("span",{className:"font-medium text-black",children:If(a.withdrawalDetails?.requestedAt||a.createdAt)})]}),a.withdrawalDetails?.processedAt&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(is,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:"Processed:"}),n.jsx("span",{className:"font-medium text-black",children:If(a.withdrawalDetails.processedAt)})]}),a.withdrawalDetails?.completedAt&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Xa,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:"Completed:"}),n.jsx("span",{className:"font-medium text-black",children:If(a.withdrawalDetails.completedAt)})]})]})]})]})]}),a.withdrawalDetails?.adminNotes&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Previous Admin Notes"}),n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-gray-700",children:a.withdrawalDetails.adminNotes})})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Hv,{className:"w-4 h-4 inline mr-1"}),"Admin Notes ",a.status==="pending"?"(Optional)":"(Update)"]}),n.jsx("textarea",{value:A,onChange:F=>f(F.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent resize-none",placeholder:"Add notes for the store owner or internal reference..."})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[n.jsx("button",{onClick:()=>l(!1),disabled:u,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 font-medium",children:"Cancel"}),N(a.status).map(F=>{const G={blue:"text-white bg-blue-600 hover:bg-blue-700",green:"text-white bg-green-600 hover:bg-green-700",red:"text-white bg-red-600 hover:bg-red-700",gray:"text-white bg-black hover:bg-gray-800"};return n.jsx("button",{onClick:()=>_(a._id,F.action),disabled:u,className:`px-6 py-2 rounded-lg disabled:opacity-50 font-medium ${G[F.color]}`,children:u?"Processing...":F.label},F.action)}),N(a.status).length===0&&A!==(a.withdrawalDetails?.adminNotes||"")&&n.jsx("button",{onClick:()=>_(a._id,a.status),disabled:u,className:"px-6 py-2 text-white bg-black rounded-lg hover:bg-gray-800 disabled:opacity-50 font-medium",children:u?"Updating...":"Update Notes"})]})]})})]})})},Pne=(r="http://localhost:10000")=>{const t=ee.useRef(null);return ee.useEffect(()=>(t.current=ph(r,{withCredentials:!0}),()=>{t.current&&t.current.disconnect()}),[r]),t.current},$B=({summary:r,loading:t})=>{if(t)return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6 mb-8",children:[1,2,3,4,5,6].map(i=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-3"}),n.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]},i))});if(!r)return null;const s=[{title:"Available Balance",value:Wl(r.availableBalance),icon:Yu,color:"text-green-600",bgColor:"bg-green-50",subtitle:r.canWithdraw?"Ready to withdraw":"Below minimum threshold"},{title:"Total Earnings",value:Wl(r.totalEarnings),icon:fl,color:"text-blue-600",bgColor:"bg-blue-50",subtitle:r.monthlyGrowth!==void 0?`${r.monthlyGrowth>=0?"+":""}${r.monthlyGrowth.toFixed(1)}% this month`:"All time total"},{title:"Pending Withdrawals",value:Wl(r.pendingWithdrawals),icon:is,color:"text-yellow-600",bgColor:"bg-yellow-50",subtitle:r.pendingWithdrawals>0?"Processing":"No pending requests"},{title:"Monthly Withdrawals",value:`${r.monthlyWithdrawals}/${r.monthlyLimit}`,icon:Ki,color:r.monthlyWithdrawals>=r.monthlyLimit?"text-red-600":"text-gray-600",bgColor:r.monthlyWithdrawals>=r.monthlyLimit?"bg-red-50":"bg-gray-50",subtitle:r.monthlyWithdrawals>=r.monthlyLimit?"Monthly limit reached":`${r.monthlyLimit-r.monthlyWithdrawals} withdrawals left`},{title:"Credits Balance",value:`${r.credits?.balance||0} Credits`,icon:cy,color:"text-purple-600",bgColor:"bg-purple-50",subtitle:`Total purchased: ${r.credits?.totalPurchased||0}`},{title:"Transaction Count",value:r.statistics?.totalTransactions||0,icon:ti,color:"text-indigo-600",bgColor:"bg-indigo-50",subtitle:`Avg: ${Wl(r.statistics?.averageTransactionAmount||0)}`}];return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6 mb-8",children:s.map((i,a)=>{const o=i.icon;return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600",children:i.title}),n.jsx("div",{className:`p-2 rounded-lg ${i.bgColor}`,children:n.jsx(o,{className:`h-5 w-5 ${i.color}`})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-2xl font-bold text-black",children:i.value}),i.subtitle&&n.jsx("p",{className:"text-xs text-gray-500",children:i.subtitle})]})]},a)})})},Tne=({transactions:r,loading:t,onFilterChange:s,pagination:i})=>{const[a,o]=ee.useState(!1),[c,l]=ee.useState({type:"",status:"",startDate:"",endDate:""}),u=(A,f)=>{const p={...c,[A]:f};l(p),s(p)},d=()=>{const A={type:"",status:"",startDate:"",endDate:""};l(A),s(A)};return t?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsx("div",{className:"p-6 border-b",children:n.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 animate-pulse"})}),n.jsx("div",{className:"p-6",children:[1,2,3,4,5].map(A=>n.jsxs("div",{className:"flex items-center justify-between py-4 border-b animate-pulse",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-64 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]},A))})]}):n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"p-6 border-b",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-semibold text-black",children:"Transaction History"}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsxs("button",{onClick:()=>o(!a),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(lA,{className:"h-4 w-4 mr-2"}),"Filters"]}),n.jsxs("button",{className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-black rounded-lg hover:bg-gray-800 transition-colors",children:[n.jsx(Dc,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),a&&n.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),n.jsxs("select",{value:c.type,onChange:A=>u("type",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"sale",children:"Sales"}),n.jsx("option",{value:"withdrawal",children:"Withdrawals"}),n.jsx("option",{value:"refund",children:"Refunds"}),n.jsx("option",{value:"adjustment",children:"Adjustments"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{value:c.status,onChange:A=>u("status",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),n.jsx("input",{type:"date",value:c.startDate,onChange:A=>u("startDate",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),n.jsx("input",{type:"date",value:c.endDate,onChange:A=>u("endDate",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent"})]})]}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset Filters"})})]})]}),n.jsxs("div",{className:"p-6",children:[r.length===0?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-gray-500",children:"No transactions found"})}):n.jsx("div",{className:"space-y-4",children:r.map(A=>n.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-100 last:border-b-0",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${hJ(A.type)}`,children:A.type.charAt(0).toUpperCase()+A.type.slice(1)}),n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${fJ(A.status)}`,children:A.status.charAt(0).toUpperCase()+A.status.slice(1)})]}),n.jsx("p",{className:"font-medium text-black",children:A.description}),n.jsxs("p",{className:"text-sm text-gray-500",children:[AO(A.createdAt),"  ID: ",A.transactionId]}),A.withdrawalDetails?.adminNotes&&n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[n.jsx("span",{className:"font-medium",children:"Admin Note:"})," ",A.withdrawalDetails.adminNotes]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`text-lg font-semibold ${A.type==="sale"?"text-green-600":"text-red-600"}`,children:[A.type==="sale"?"+":"-",Wl(A.amount)]}),A.metadata?.netAmount&&n.jsxs("p",{className:"text-sm text-gray-500",children:["Net: ",Wl(A.metadata.netAmount)]})]})]},A._id))}),i&&i.pages>1&&n.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",(i.page-1)*i.limit+1," to ",Math.min(i.page*i.limit,i.total)," of ",i.total," results"]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{disabled:i.page===1,className:"p-2 text-gray-400 hover:text-black disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(oA,{className:"h-5 w-5"})}),[...Array(i.pages)].map((A,f)=>n.jsx("button",{className:`px-3 py-1 text-sm rounded-lg ${i.page===f+1?"bg-black text-white":"text-gray-700 hover:bg-gray-100"}`,children:f+1},f+1)),n.jsx("button",{disabled:i.page===i.pages,className:"p-2 text-gray-400 hover:text-black disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Jl,{className:"h-5 w-5"})})]})]})]})]})},Fne=({summary:r,onWithdrawalSuccess:t})=>{const[s,i]=ee.useState(""),[a,o]=ee.useState(null),[c,l]=ee.useState(!1),[u,d]=ee.useState(""),[A,f]=ee.useState("");ee.useEffect(()=>{p()},[]);const p=async()=>{try{const b=await Pa.getBankDetails();o(b.data)}catch(b){console.error("Failed to fetch bank details:",b)}},m=async b=>{if(b.preventDefault(),d(""),f(""),!a){d("Please add bank details before requesting withdrawal");return}if(!s||isNaN(s)||parseFloat(s)<100){d("Please enter a valid amount (minimum Rs. 100)");return}if(parseFloat(s)>r?.availableBalance){d("Insufficient balance");return}if(r?.monthlyWithdrawals>=r?.monthlyLimit){d("Monthly withdrawal limit exceeded");return}l(!0);try{await Pa.requestWithdrawal({amount:parseFloat(s),bankAccountId:a._id}),f("Withdrawal request submitted successfully"),i(""),t()}catch(v){d(v.message)}finally{l(!1)}},g=r&&r.monthlyWithdrawals<r.monthlyLimit;return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx(gl,{className:"h-6 w-6 text-black mr-3"}),n.jsx("h2",{className:"text-xl font-semibold text-black",children:"Request Withdrawal"})]}),!g&&n.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ki,{className:"h-5 w-5 text-red-600 mr-2"}),n.jsx("p",{className:"text-red-700 font-medium",children:"Monthly withdrawal limit reached"})]}),n.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["You can make ",r?.monthlyLimit," withdrawals per month. Limit resets on the 1st of each month."]})]}),!a&&n.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ki,{className:"h-5 w-5 text-yellow-600 mr-2"}),n.jsx("p",{className:"text-yellow-700 font-medium",children:"Bank details required"})]}),n.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:"Please add your bank details in the Bank Details section below before requesting a withdrawal."})]}),u&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ki,{className:"h-5 w-5 text-red-600 mr-2"}),n.jsx("p",{className:"text-red-700",children:u})]})}),A&&n.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"h-5 w-5 text-green-600 mr-2"}),n.jsx("p",{className:"text-green-700",children:A})]})}),n.jsxs("form",{onSubmit:m,children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Withdrawal Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"Rs."}),n.jsx("input",{type:"number",id:"amount",value:s,onChange:b=>i(b.target.value),disabled:!g||!a,min:"100",max:r?.availableBalance||0,step:"0.01",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter amount"})]}),n.jsxs("div",{className:"mt-2 flex justify-between text-sm text-gray-600",children:[n.jsx("span",{children:"Minimum: Rs. 100"}),n.jsxs("span",{children:["Available: ",Wl(r?.availableBalance||0)]})]})]}),a&&n.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Withdrawal to:"}),n.jsxs("p",{className:"text-sm text-gray-700",children:[a.bankName," - ",a.getMaskedAccountNumber?.()||a.accountNumber]}),n.jsx("p",{className:"text-sm text-gray-700",children:a.accountHolderName})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("p",{children:"Processing time: 1-3 business days"}),n.jsxs("p",{children:["Monthly limit: ",r?.monthlyWithdrawals||0,"/",r?.monthlyLimit||2]})]}),n.jsx("button",{type:"submit",disabled:c||!g||!a||!s,className:"px-6 py-3 bg-black text-white font-medium rounded-lg hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:c?"Processing...":"Request Withdrawal"})]})]})]})},Une=()=>{const[r,t]=ee.useState({accountHolderName:"",bankName:"",accountNumber:"",routingNumber:"",branchName:"",branchCode:"",accountType:"savings"}),[s,i]=ee.useState(!1),[a,o]=ee.useState(""),[c,l]=ee.useState(""),[u,d]=ee.useState(null),[A,f]=ee.useState(null),[p,m]=ee.useState(null),[g,b]=ee.useState(!1),[v,y]=ee.useState(""),[w,j]=ee.useState(!1);ee.useEffect(()=>{C()},[]);const C=async()=>{try{const N=await Pa.getBankDetails();N.data?(d(N.data),f(N.lockInfo),m(N.pendingChangeRequest),t({accountHolderName:N.data.accountHolderName||"",bankName:N.data.bankName||"",accountNumber:N.data.accountNumber||"",routingNumber:N.data.routingNumber||"",branchName:N.data.branchName||"",branchCode:N.data.branchCode||"",accountType:N.data.accountType||"savings"})):(f(N.lockInfo),m(N.pendingChangeRequest))}catch(N){console.error("Failed to fetch bank details:",N)}},B=N=>{t({...r,[N.target.name]:N.target.value})},E=async N=>{N.preventDefault(),o(""),l(""),i(!0);try{const O=await Pa.updateBankDetails(r);l(O.message||"Bank details updated successfully"),await C()}catch(O){O.message.includes("locked")||O.response?.data?.requiresChangeRequest?(o("Bank details are locked. Please submit a change request to modify them."),b(!0)):o(O.message)}finally{i(!1)}},_=async N=>{if(N.preventDefault(),v.trim().length<10){o("Please provide a detailed reason (minimum 10 characters)");return}o(""),l(""),j(!0);try{const O=await Pa.submitBankChangeRequest({requestedDetails:r,reason:v.trim()});l(O.message),b(!1),y(""),await C()}catch(O){o(O.message)}finally{j(!1)}},S=async N=>{try{o("");const O=await Pa.cancelBankChangeRequest(N);l(O.message),await C()}catch(O){o(O.message)}};return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Fk,{className:"h-6 w-6 text-black mr-3"}),n.jsx("h2",{className:"text-xl font-semibold text-black",children:"Bank Details"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[u?.isVerified&&n.jsx("span",{className:"px-3 py-1 text-sm font-medium text-green-700 bg-green-100 rounded-full",children:"Verified"}),A?.isLocked&&n.jsxs("span",{className:"px-3 py-1 text-sm font-medium text-red-700 bg-red-100 rounded-full flex items-center",children:[n.jsx(aa,{className:"w-3 h-3 mr-1"}),"Locked"]})]})]}),a&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ki,{className:"h-5 w-5 text-red-600 mr-2"}),n.jsx("p",{className:"text-red-700",children:a})]})}),c&&n.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Xr,{className:"h-5 w-5 text-green-600 mr-2"}),n.jsx("p",{className:"text-green-700",children:c})]})}),A?.isLocked&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(aa,{className:"h-5 w-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-yellow-700",children:[n.jsx("p",{className:"font-medium mb-1",children:"Bank Details Locked for Security"}),n.jsxs("p",{className:"text-sm",children:["Your bank details have been locked ",A.lockReason==="auto_lock_after_first_save"?"automatically after first save":A.lockReason,".",A.lockedAt&&` Locked on ${new Date(A.lockedAt).toLocaleDateString()}.`]}),n.jsx("p",{className:"text-sm mt-1",children:"To modify your bank details, please submit a change request below."})]})]})}),p&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx(is,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-blue-700",children:[n.jsx("p",{className:"font-medium mb-1",children:"Change Request Pending"}),n.jsxs("p",{className:"text-sm",children:["Your change request submitted on ",new Date(p.requestedAt).toLocaleDateString()," is pending admin review."]}),n.jsxs("p",{className:"text-xs mt-1 text-blue-600",children:["Request Age: ",p.requestAge," days"]})]})]}),n.jsx("button",{type:"button",onClick:()=>S(p._id),className:"text-blue-600 hover:text-blue-800 p-1",title:"Cancel Request",children:n.jsx(Ts,{className:"h-4 w-4"})})]})}),n.jsxs("form",{onSubmit:g?_:E,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"accountHolderName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Holder Name *"}),n.jsx("input",{type:"text",id:"accountHolderName",name:"accountHolderName",value:r.accountHolderName,onChange:B,required:!0,disabled:A?.isLocked&&!g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter full name as per bank records"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"bankName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name *"}),n.jsx("input",{type:"text",id:"bankName",name:"bankName",value:r.bankName,onChange:B,required:!0,disabled:A?.isLocked&&!g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"e.g., Commercial Bank of Ceylon"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"accountNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number *"}),n.jsx("input",{type:"text",id:"accountNumber",name:"accountNumber",value:r.accountNumber,onChange:B,required:!0,disabled:A?.isLocked&&!g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter account number"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"routingNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Routing Number *"}),n.jsx("input",{type:"text",id:"routingNumber",name:"routingNumber",value:r.routingNumber,onChange:B,required:!0,disabled:A?.isLocked&&!g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter routing number"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"branchName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch Name *"}),n.jsx("input",{type:"text",id:"branchName",name:"branchName",value:r.branchName,onChange:B,required:!0,disabled:A?.isLocked&&!g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"e.g., Colombo Main Branch"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"branchCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch Code"}),n.jsx("input",{type:"text",id:"branchCode",name:"branchCode",value:r.branchCode,onChange:B,disabled:A?.isLocked&&!g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter branch code (if applicable)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"accountType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type *"}),n.jsxs("select",{id:"accountType",name:"accountType",value:r.accountType,onChange:B,required:!0,disabled:A?.isLocked&&!g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[n.jsx("option",{value:"savings",children:"Savings Account"}),n.jsx("option",{value:"checking",children:"Checking Account"}),n.jsx("option",{value:"business",children:"Business Account"})]})]}),A?.isLocked&&g&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"changeRequestReason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Change Request *"}),n.jsx("textarea",{id:"changeRequestReason",value:v,onChange:N=>y(N.target.value),required:!0,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Please provide a detailed reason why you need to change your bank details (minimum 10 characters)"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[v.length,"/500 characters (minimum 10 required)"]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Ki,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-blue-700 text-sm",children:[n.jsx("p",{className:"font-medium mb-1",children:"Important Notes:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Bank details will be verified before processing withdrawals"}),n.jsx("li",{children:"Ensure all information matches your bank records exactly"}),n.jsx("li",{children:"Changes to bank details may require re-verification"}),n.jsx("li",{children:"Only local Sri Lankan bank accounts are supported"})]})]})]})}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[A?.isLocked&&!g&&!p&&n.jsxs("button",{type:"button",onClick:()=>b(!0),className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[n.jsx(rA,{className:"w-4 h-4 mr-2"}),"Request Change"]}),g&&n.jsx("button",{type:"button",onClick:()=>{b(!1),y(""),o("")},className:"px-6 py-3 bg-gray-500 text-white font-medium rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),(!A?.isLocked&&!g||g)&&!p&&n.jsx("button",{type:"submit",disabled:s||w||g&&v.trim().length<10,className:"px-6 py-3 bg-black text-white font-medium rounded-lg hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:s||w?"Saving...":g?"Submit Change Request":u?"Update Bank Details":"Save Bank Details"})]})]})]})},Lne=({socket:r})=>{const[t,s]=ee.useState([]),[i,a]=ee.useState(!1);ee.useEffect(()=>{if(!r)return;const A=f=>{const p={id:Date.now(),type:f.type,message:o(f),timestamp:new Date,read:!1};s(m=>[p,...m.slice(0,9)]),f.type==="withdrawal_processed"&&a(!0)};return r.on("wallet-update",A),()=>{r.off("wallet-update",A)}},[r]);const o=A=>{switch(A.type){case"withdrawal_requested":return`Withdrawal request of ${Wl(A.transaction.amount)} has been submitted`;case"withdrawal_processed":return`Withdrawal request ${A.action}ed${A.adminNotes?` - ${A.adminNotes}`:""}`;case"sale_completed":return`New sale of ${Wl(A.amount)} added to your wallet`;case"refund_processed":return`Refund of ${Wl(A.amount)} has been processed`;default:return"Wallet updated"}},c=A=>{switch(A){case"withdrawal_processed":return n.jsx(Xr,{className:"h-5 w-5 text-green-600"});case"withdrawal_requested":return n.jsx(is,{className:"h-5 w-5 text-yellow-600"});case"sale_completed":return n.jsx(Xr,{className:"h-5 w-5 text-green-600"});default:return n.jsx(Ki,{className:"h-5 w-5 text-blue-600"})}},l=A=>{s(f=>f.map(p=>p.id===A?{...p,read:!0}:p))},u=()=>{s([])},d=t.filter(A=>!A.read).length;return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>a(!i),className:"relative p-2 text-gray-600 hover:text-black transition-colors",children:[n.jsx(uy,{className:"h-6 w-6"}),d>0&&n.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:d>9?"9+":d})]}),i&&n.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border z-50",children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-black",children:"Notifications"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[t.length>0&&n.jsx("button",{onClick:u,className:"text-sm text-gray-600 hover:text-black",children:"Clear all"}),n.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-black",children:n.jsx(Ts,{className:"h-5 w-5"})})]})]})}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"No notifications yet"}):n.jsx("div",{className:"divide-y",children:t.map(A=>n.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer ${A.read?"":"bg-blue-50"}`,onClick:()=>l(A.id),children:n.jsxs("div",{className:"flex items-start space-x-3",children:[c(A.type),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-black font-medium",children:A.message}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A.timestamp.toLocaleTimeString()})]}),!A.read&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})},A.id))})})]})]})},Dne=({className:r=""})=>{const{creditPackages:t,purchaseCredits:s,summary:i,loading:a}=l2(),[o,c]=ee.useState(!1),[l,u]=ee.useState(null),[d,A]=ee.useState(null),f=async m=>{c(!0),u(null),A(null);try{const g=await s(m),b=t.find(v=>v.id===m);A(`Successfully purchased ${b?.credits} credits!`),setTimeout(()=>A(null),3e3)}catch(g){u(g.message)}finally{c(!1)}},p=m=>m>0?`${m}% OFF`:null;return a?n.jsx("div",{className:`bg-white rounded-lg shadow-sm border p-6 ${r}`,children:n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Yf,{className:"w-8 h-8 animate-spin text-gray-400"})})}):n.jsxs("div",{className:`bg-white rounded-lg shadow-sm border p-6 ${r}`,children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-gray-200 rounded-lg",children:n.jsx(yl,{className:"w-5 h-5 text-black"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Purchase Credits"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Buy credits with your wallet balance to reveal store contacts"})]})]})}),n.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Yu,{className:"w-5 h-5 text-black"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Available Wallet Balance"}),n.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["LKR ",i?.availableBalance?.toFixed(2)||"0.00"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Current Credits"}),n.jsxs("div",{className:"text-lg font-semibold text-black",children:[i?.credits?.balance||0," Credits"]})]})]})}),d&&n.jsx("div",{className:"bg-gray-100 border border-gray-300 rounded-lg p-4 mb-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-black",children:[n.jsx(Xr,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:d})]})}),l&&n.jsx("div",{className:"bg-gray-100 border border-gray-300 rounded-lg p-4 mb-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-black",children:[n.jsx(Ki,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:l})]})}),n.jsx("div",{className:"space-y-4",children:t.map(m=>n.jsx("div",{className:`border rounded-xl p-4 transition-all duration-200 ${m.canAffordWithWallet?"border-gray-300 bg-gray-50 hover:shadow-md":"border-gray-200 bg-gray-50 opacity-75"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:`p-3 rounded-lg ${m.canAffordWithWallet,"bg-gray-200"}`,children:n.jsx(ps,{className:`w-6 h-6 ${m.canAffordWithWallet?"text-black":"text-gray-400"}`})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:[m.credits.toLocaleString()," Credits"]}),p(m.discount)&&n.jsx("span",{className:"bg-gray-200 text-black text-xs px-2 py-1 rounded-full font-medium",children:p(m.discount)})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["LKR ",m.price.toLocaleString(),m.discount>0&&n.jsxs("span",{className:"text-gray-400 line-through ml-2",children:["LKR ",Math.round(m.price/(1-m.discount/100)).toLocaleString()]})]}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["LKR ",(m.price/m.credits).toFixed(2)," per credit"]})]})]}),n.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[n.jsx("button",{onClick:()=>f(m.id),disabled:!m.canAffordWithWallet||o,className:`px-6 py-2 rounded-lg font-medium text-sm transition-all duration-200 min-w-[120px] ${m.canAffordWithWallet&&!o?"bg-black text-white hover:bg-gray-800 hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:o?n.jsx("div",{className:"flex items-center justify-center",children:n.jsx(Yf,{className:"w-4 h-4 animate-spin"})}):m.canAffordWithWallet?"Purchase":"Insufficient Balance"}),m.canAffordWithWallet&&n.jsxs("div",{className:"text-xs text-black font-medium",children:[" ",Math.round(m.walletCoverage),"% covered by wallet"]})]})]})},m.id))}),n.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("div",{className:"font-medium mb-1",children:" How credits work:"}),n.jsxs("ul",{className:"text-xs space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"1 credit = 1 store contact reveal"}),n.jsx("li",{children:"Valid for 24 hours per store (prevents duplicate reveals)"}),n.jsx("li",{children:"Credits are purchased using your wallet balance from earnings"}),n.jsx("li",{children:"Unused credits never expire"})]})]})})]})},Mne=()=>{const{user:r}=Fn(),{summary:t,transactions:s,loading:i,error:a,fetchSummary:o,fetchTransactions:c,getMyReveals:l}=l2(),u=Pne(),[d,A]=ee.useState("overview"),[f,p]=ee.useState([]),[m,g]=ee.useState(!1);ee.useEffect(()=>{if(u&&r?._id){const j=r._id;return u.emit("join-wallet-room",j),u.on("wallet-update",C=>{console.log("Wallet update received:",C),o(),C.type!=="withdrawal_requested"&&c()}),()=>{u.emit("leave-wallet-room",j),u.off("wallet-update")}}},[u,o,c]);const b=j=>{c(j)},v=()=>{o(),c()};if(a)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8 text-center",children:[n.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading wallet data: ",a]}),n.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Retry"})]})});const y=async()=>{if(r?.role==="customer"){g(!0);try{const j=await l();p(j.reveals||[])}catch(j){console.error("Failed to load reveal history:",j)}finally{g(!1)}}};ee.useEffect(()=>{d==="reveals"&&y()},[d]);const w=[{id:"overview",label:"Overview",icon:ti},{id:"purchase",label:"Buy Credits",icon:yl},{id:"transactions",label:"Transactions",icon:c5},{id:"reveals",label:"Contact Reveals",icon:Gn},{id:"withdraw",label:"Withdraw",icon:gl},{id:"bank-details",label:"Bank Details",icon:Yu}];return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between py-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs(Zt,{to:"/dashboard",className:"flex items-center text-gray-600 hover:text-black transition-colors",children:[n.jsx(oc,{className:"w-4 h-4 mr-1"}),"Back to Dashboard"]}),n.jsxs("div",{className:"border-l pl-4",children:[n.jsxs("h1",{className:"text-3xl font-bold text-black flex items-center",children:[n.jsx(Yu,{className:"w-8 h-8 mr-3 text-green-600"}),"Wallet & Credits"]}),n.jsx("p",{className:"text-gray-600",children:"Manage your earnings, withdrawals, and credits"})]})]}),n.jsx(Lne,{socket:u})]}),n.jsx("div",{className:"flex space-x-8",children:w.map(j=>{const C=j.icon,B=d===j.id;return j.id==="reveals"&&r?.role!=="customer"?null:n.jsxs("button",{onClick:()=>A(j.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${B?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(C,{className:"w-4 h-4"}),n.jsx("span",{children:j.label})]},j.id)})})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d==="overview"&&n.jsxs("div",{className:"space-y-8",children:[n.jsx($B,{summary:t,loading:i}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>A("purchase"),className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(gl,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-gray-900",children:"Buy Credits"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Purchase with wallet balance"})]})]}),n.jsxs("button",{onClick:()=>A("transactions"),className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(c5,{className:"w-5 h-5 text-gray-600"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-gray-900",children:"View Transactions"}),n.jsx("div",{className:"text-sm text-gray-500",children:"See all wallet activity"})]})]}),r?.role==="customer"&&n.jsxs("button",{onClick:()=>A("reveals"),className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(Gn,{className:"w-5 h-5 text-purple-600"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-gray-900",children:"Contact Reveals"}),n.jsx("div",{className:"text-sm text-gray-500",children:"View reveal history"})]})]})]})]})]}),d==="withdraw"&&n.jsxs("div",{className:"space-y-8",children:[n.jsx($B,{summary:t,loading:i}),n.jsx(Fne,{summary:t,onWithdrawalSuccess:v})]}),d==="purchase"&&n.jsx("div",{className:"max-w-4xl",children:n.jsx(Dne,{})}),d==="transactions"&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"px-6 py-4 border-b",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),n.jsx("p",{className:"text-sm text-gray-600",children:"All wallet and credit transactions"})]}),n.jsx("div",{className:"p-6",children:n.jsx(Tne,{transactions:s,loading:i,onFilterChange:b})})]}),d==="reveals"&&r?.role==="customer"&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"px-6 py-4 border-b",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact Reveals"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Stores whose contacts you've revealed"})]}),n.jsx("div",{className:"p-6",children:m?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(cs,{})}):f.length>0?n.jsx("div",{className:"space-y-4",children:f.map(j=>n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:j.storeId?.profileImage?n.jsx("img",{src:j.storeId.profileImage,alt:j.storeId.name,className:"w-12 h-12 rounded-lg object-cover"}):n.jsx(Gn,{className:"w-6 h-6 text-gray-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:j.storeId?.name||"Unknown Store"}),n.jsxs("div",{className:"text-sm text-gray-500",children:[new Date(j.revealedAt).toLocaleDateString()," ",j.storeId?.type||"Store"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm font-medium text-purple-600",children:[j.unitCredits," credit used"]}),n.jsx("div",{className:"text-xs text-gray-500",children:j.status})]})]},j._id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Gn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reveals yet"}),n.jsx("p",{className:"text-gray-600",children:"Contact reveals will appear here after you reveal store contacts"})]})})]}),d==="bank-details"&&n.jsx(Une,{})]})]})},HB=(r,t)=>{const s={};return r.products?.count>t.items&&(s.violatedProducts=r.products.count-t.items),r.services?.count>t.items&&(s.violatedServices=r.services.count-t.items),r.products?.images>t.itemImages&&(s.violatedProductImages=r.products.images-t.itemImages),r.services?.images>t.itemImages&&(s.violatedServiceImages=r.services.images-t.itemImages),r.headerImages?.count>t.headerImages&&(s.violatedHeaderImages=r.headerImages.count-t.headerImages),r.variants?.used&&!t.itemVariants&&(s.violatedVariants=!0),s},Rne=({violations:r})=>n.jsx("div",{className:"flex justify-center px-4",children:n.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full border border-red-300 mt-4 shadow-lg",children:[n.jsx("h2",{className:"text-red-700 font-semibold text-2xl mb-4 flex items-center gap-2",children:"Plan Limit Violations"}),n.jsxs("ul",{className:"list-disc list-inside text-sm text-red-700 space-y-1",children:[r?.violatedProducts!=null&&n.jsxs("li",{children:[r.violatedProducts," extra products above limit"]}),r?.violatedServices!=null&&n.jsxs("li",{children:[r.violatedServices," extra services above limit"]}),r?.violatedProductImages!=null&&n.jsxs("li",{children:[r.violatedProductImages," extra product images above limit"]}),r?.violatedServiceImages!=null&&n.jsxs("li",{children:[r.violatedServiceImages," extra service images above limit"]}),r?.violatedHeaderImages!=null&&n.jsxs("li",{children:[r.violatedHeaderImages," extra header images above limit"]}),r?.violatedVariants&&n.jsx("li",{children:"Variant usage is not allowed on the selected plan"})]})]})}),Qne=()=>{const[r,t]=ee.useState(null),[s,i]=ee.useState(null),[a,o]=ee.useState(!0),[c,l]=ee.useState(""),[u,d]=ee.useState("overview"),[A,f]=ee.useState(!1),[p,m]=ee.useState(null),[g,b]=ee.useState(null),[v,y]=ee.useState(null),w=$=>{const L={items:$.items,itemImages:$.itemImages,headerImages:$.headerImages,itemVariants:$.itemVariants},F={products:s.usageInfo.productsInfo,services:s.usageInfo.servicesInfo,headerImages:s.usageInfo.headerImagesInfo,variants:s.usageInfo.variantsInfo};return HB(F,L)},j=async()=>{try{const $=await fetch("http://localhost:10000/api/subscriptions/my-subscription",{credentials:"include"});if($.ok){const L=await $.json();t(L.subscription),l(L.package.name||"")}else t(null)}catch($){console.error("Error fetching subscription:",$),t(null)}finally{}},C=async()=>{try{const $=await fetch("http://localhost:10000/api/packages/",{credentials:"include"});if(!$.ok)throw new Error("Failed to fetch packages");const L=await $.json();m(L)}catch($){console.error("Error:",$)}finally{}},B=async()=>{try{const $=await fetch("http://localhost:10000/api/packages/user-package",{credentials:"include"});if(!$.ok)throw new Error("Failed to fetch packages");const L=await $.json();b(L)}catch($){console.error("Error:",$)}finally{}};ee.useEffect(()=>{(async()=>{try{const[L,F,G,X]=await Promise.all([j(),B(),C(),S()])}catch(L){console.error("Error loading subscription data:",L)}finally{o(!1)}})()},[]);const E=$=>{if(!p||!Array.isArray(p)){console.warn(" Packages not yet loaded.");return}const L=p.find(G=>G.name===$);if(!L){console.warn(" Selected package not found.");return}if(!g){y(null),l($);return}if(L.amount<g.amount){const G=w(L);if(Object.keys(G).length>0){y(G);return}y(null)}else y(null);l($)};ee.useEffect(()=>{!p||!Array.isArray(p)||c&&E(c)},[c,p]);const _=()=>{const $={items:0,itemImages:0,headerImages:0,itemVariants:!1},L={products:s.usageInfo.productsInfo,services:s.usageInfo.servicesInfo,headerImages:s.usageInfo.headerImagesInfo,variants:s.usageInfo.variantsInfo},F=HB(L,$);if(Object.keys(F).length>0){y(F);return}y(null)},S=async()=>{try{const $=await fetch("http://localhost:10000/api/users/usage-summary",{credentials:"include"});if(!$.ok)throw new Error("Failed to fetch usage summary");const L=await $.json();i(L)}catch{console.error("Error loading usage data:",e)}finally{}},N=()=>new Promise(($,L)=>{if(window.payhere){$();return}const F=document.createElement("script");F.src="https://www.payhere.lk/lib/payhere.js",F.onload=$,F.onerror=L,document.head.appendChild(F)}),O=$=>new Promise((L,F)=>{if(!window.payhere)return alert("Payment gateway not loaded. Please refresh and try again."),F(new Error("PayHere SDK not loaded"));window.payhere.onCompleted=function(G){console.log(" Payment completed. Order ID:",G),setTimeout(()=>{j(),B()},2e3),L(G)},window.payhere.onDismissed=function(){alert("Payment was cancelled."),F(new Error("Payment cancelled"))},window.payhere.onError=function(G){console.error(" PayHere error:",G),alert("Payment failed. Please try again."),F(new Error("Payment error: "+G))},console.log(" Starting PayHere payment with:",$),window.payhere.startPayment($)}),k=async()=>{if(!c){alert("Please select a package first.");return}try{const $=await fetch("http://localhost:10000/api/subscriptions/create-subscription",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageName:c})});if($.ok){const{paymentParams:L}=await $.json();await N(),await O(L),alert("Payment initiated. Please wait for confirmation."),d("overview")}else{const L=await $.json();alert("Subscription setup failed: "+(L?.error||"Unknown error"))}}catch($){console.error("Subscription error:",$),alert("Error starting subscription. Please try again.")}},I=async()=>{if(!c||c===r?.package){alert("Please select a different package.");return}if(r?.status==="pending_upgrade")if(confirm("You have an upgrade in progress. Do you want to cancel it and start a new upgrade?"))try{await fetch("http://localhost:10000/api/subscriptions/rollback-upgrade",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({upgradeAttemptId:r.upgradeAttemptId})}),await j()}catch{alert("Failed to cancel previous upgrade. Please try again.");return}else return;try{const $=await fetch("http://localhost:10000/api/subscriptions/upgrade",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageName:c})}),L=await $.json();if($.status===409){alert(L.message);return}if($.status===403&&L.nextAvailableDowngradeDate){const G=new Date(L.nextAvailableDowngradeDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});alert(` You can downgrade only after: ${G}`);return}if(!$.ok)throw new Error(L.message||"Failed to upgrade package");const F=L.upgradeAttemptId;if(L.paymentRequired&&L.paymentParams)try{await N(),window.payhere.onCompleted=function(G){console.log(" Safe upgrade payment completed:",G),setTimeout(()=>{j(),B(),alert(" Upgrade completed successfully! Your new subscription is now active.")},2e3)},window.payhere.onDismissed=function(){console.log(" Payment dismissed, offering rollback..."),confirm("Payment was cancelled. Do you want to cancel the upgrade and keep your current subscription?")&&R(F)},window.payhere.onError=function(G){console.error(" Payment error:",G),alert("Payment failed. Your current subscription remains active."),R(F)},await O(L.paymentParams),alert("Safe upgrade initiated! Your current subscription remains active until payment is confirmed. If you cancel the payment, your original subscription will be restored.")}catch(G){console.error(" Payment setup failed:",G),alert("Payment setup failed. Your original subscription is safe."),R(F);return}d("overview")}catch($){console.error(" Safe Upgrade Error:",$),alert($.message||"Something went wrong during the upgrade. Your original subscription is safe.")}},R=async $=>{try{const L=await fetch("http://localhost:10000/api/subscriptions/rollback-upgrade",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({upgradeAttemptId:$})});L.ok?(await j(),alert(" Upgrade cancelled. Your original subscription has been restored.")):console.error("Rollback failed:",await L.text())}catch(L){console.error("Rollback error:",L)}},Q=async()=>{try{const $=await fetch("http://localhost:10000/api/subscriptions/cancel",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:r?._id})});if($.ok)await j(),alert("Subscription cancelled successfully."),f(!1);else{const L=await $.json();alert("Failed to cancel subscription: "+(L?.error||"Unknown error"))}}catch($){console.error("Cancel error:",$),alert("Error cancelling subscription. Please try again.")}};return a?n.jsx("div",{className:"min-h-screen bg-white flex justify-center items-center",children:n.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-black rounded-full animate-spin"})}):n.jsxs("div",{className:"min-h-screen bg-white",children:[n.jsx("div",{className:"bg-black text-white py-12",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 text-center",children:[n.jsx("h1",{className:"text-4xl md:text-5xl font-light mb-4",children:"Subscription Management"}),n.jsx("p",{className:"text-xl font-light text-gray-300",children:"Manage your subscription with elegant simplicity"})]})}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("div",{className:"max-w-6xl mx-auto px-4",children:n.jsx("nav",{className:"flex space-x-8",children:["overview","packages","billing"].map($=>n.jsx("button",{onClick:()=>d($),className:`py-4 px-2 border-b-2 font-medium text-sm capitalize transition-colors ${u===$?"border-black text-black":"border-transparent text-gray-500 hover:text-gray-700"}`,children:$},$))})})}),n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[u==="overview"&&n.jsx("div",{className:"space-y-8",children:r?n.jsx(n.Fragment,{children:n.jsxs("div",{className:"bg-gray-50 rounded-2xl p-8",children:[n.jsx("h2",{className:"text-2xl font-light text-black mb-6",children:"Current Subscription"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-black mb-2",children:[r.package?.toUpperCase()," Plan"]}),n.jsxs("p",{className:"text-2xl font-light text-black mb-4",children:["LKR ",r.amount?.toLocaleString(),"/month"]}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Status:"})," ",n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${r.status==="active"?"bg-green-100 text-green-800":r.status==="pending_upgrade"?"bg-yellow-100 text-yellow-800":r.status==="pending"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:r.status==="pending_upgrade"?"Upgrade in Progress":r.status})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Started:"})," ",new Date(r.startDate).toLocaleDateString()]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Next Billing:"})," ",new Date(r.endDate).toLocaleDateString()]})]})]}),n.jsx("div",{className:"flex flex-col space-y-3",children:r.status==="pending_upgrade"?n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600 mr-3"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Upgrade in Progress"}),n.jsx("p",{className:"text-xs text-yellow-600",children:"Waiting for payment confirmation..."})]})]}),n.jsx("button",{onClick:()=>R(r.upgradeAttemptId),className:"mt-3 text-xs bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded transition-colors",children:"Cancel Upgrade"})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>d("packages"),className:"bg-black text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors",children:"Upgrade / Change Plan"}),n.jsx("button",{onClick:()=>{f(!0),_()},className:"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel Subscription"})]})})]})]})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h2",{className:"text-3xl font-light text-black mb-4",children:"No Active Subscription"}),n.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Choose a plan to get started with your subscription"}),n.jsx("button",{onClick:()=>d("packages"),className:"bg-black text-white px-8 py-4 rounded-lg font-medium text-lg hover:bg-gray-800 transition-colors",children:"View Plans"})]})}),u==="packages"&&n.jsxs("div",{children:[n.jsx(pE,{selectedPackage:c,setSelectedPackage:l,isUpgrade:!!r}),n.jsxs("div",{className:"text-center mt-8",children:[n.jsx("button",{onClick:r?I:k,disabled:!c||r?.status==="pending_upgrade",className:"bg-black text-white px-12 py-4 rounded-lg font-medium text-lg hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:r?.status==="pending_upgrade"?"Upgrade in Progress...":r?"Update Subscription":"Start Subscription"}),r?.status==="pending_upgrade"&&n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please complete your current upgrade or wait for timeout before starting a new one."})]})]}),u==="billing"&&n.jsxs("div",{className:"space-y-8",children:[n.jsx("h2",{className:"text-3xl font-light text-black",children:"Billing History"}),r?.paymentHistory?.length>0?n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.paymentHistory.map(($,L)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date($.date).toLocaleDateString()}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["LKR ",$.amount?.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:$.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$.method||"PayHere"})]},L))})]})}):n.jsx("div",{className:"text-center py-12 text-gray-500",children:n.jsx("p",{children:"No billing history available."})})]})]}),A&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[n.jsx("h3",{className:"text-2xl font-light text-black mb-4",children:"Cancel Subscription"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to cancel your subscription? This action cannot be undone."}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("button",{onClick:()=>{Q(),_()},className:"flex-1 bg-red-600 text-white px-4 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Yes, Cancel"}),n.jsx("button",{onClick:()=>{f(!1)},className:"flex-1 border border-gray-300 text-gray-700 px-4 py-3 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Keep Subscription"})]})]})}),v&&n.jsx("div",{className:"flex justify-center px-4",children:n.jsx("div",{className:"w-full max-w-md",children:n.jsx(Rne,{violations:v})})})]})},$ne=()=>{const r={name:"Priya Wickramasinghe"},[t,s]=ee.useState({storeName:"Elegance Boutique",ownerName:"Priya Wickramasinghe",preferredName:"Priya",phone:"+94 77 123 4567",email:"hello@eleganceboutique.lk",storeUrl:"eleganceboutique.aiocart.lk",address:"123 Galle Road, Colombo 03",description:"Premium fashion boutique offering elegant clothing and accessories for the modern Sri Lankan woman.",category:"Fashion & Apparel",businessHours:"Mon-Sat: 9:00 AM - 8:00 PM",establishedYear:"2019",website:"https://eleganceboutique.lk",instagram:"@eleganceboutique_lk",facebook:"https://facebook.com/eleganceboutique",whatsapp:"+94 77 123 4567"}),[i,a]=ee.useState("elegant-classic"),[o,c]=ee.useState("elegant-classic"),[l,u]=ee.useState(null),[d,A]=ee.useState("top-left"),[f,p]=ee.useState("medium"),[m,g]=ee.useState("bottom-right"),[b,v]=ee.useState("elegant-serif"),[y,w]=ee.useState("normal"),[j,C]=ee.useState("medium"),[B,E]=ee.useState("matte"),[_,S]=ee.useState("#1a1a1a"),[N,O]=ee.useState("#d4af37"),[k,I]=ee.useState("rounded"),[R,Q]=ee.useState("none"),[$,L]=ee.useState("subtle"),[F,G]=ee.useState("normal"),[X,q]=ee.useState({storeName:"center",ownerName:"center"}),[T,U]=ee.useState(!1),[K,z]=ee.useState("3d"),[M,H]=ee.useState("2d"),[Y,ae]=ee.useState("desk"),[oe,be]=ee.useState([]),[ge,he]=ee.useState(-1),[ke,Z]=ee.useState("information"),[te,fe]=ee.useState(!1),[we,Fe]=ee.useState(""),[_e,Ce]=ee.useState(!1),[ie,me]=ee.useState([]),[Be,Le]=ee.useState([]),[ve,$e]=ee.useState(null),[je,Pe]=ee.useState("gradient"),[Te,Ye]=ee.useState("#ffffff"),[He,it]=ee.useState({storeName:"#1a1a1a",ownerName:"#6b7280",category:"#9ca3af",contactText:"#374151"}),It=ee.useRef(null),dt={business:{name:"Business Professional",icon:XM,templates:["elegant-classic","executive-elite","royal-elegance"]},creative:{name:"Creative & Modern",icon:yR,templates:["modern-minimal","gradient-pro","vibrant-elegance"]},luxury:{name:"Luxury Premium",icon:zi,templates:["luxury-gold","tech-innovation","jewel-tones"]},colorful:{name:"Colorful Elegant",icon:Vv,templates:["sunset-elegance","ocean-breeze","aurora-premium"]},neon:{name:"Neon & Electric",icon:Ta,templates:["electric-blue","neon-pink","cyber-green","plasma-purple","laser-red","toxic-lime","hypernova-orange"]}},Pt={"elegant-classic":{name:"Elegant Classic",price:0,gradient:"from-gray-50 to-white",icon:mn,description:"Timeless elegance with clean lines",category:"business",preview:"/api/placeholder/200/120"},"luxury-gold":{name:"Luxury Gold",price:1500,gradient:"from-yellow-50 via-yellow-100 to-yellow-200",icon:zi,description:"Premium gold accents and luxury feel",category:"luxury",preview:"/api/placeholder/200/120"},"modern-minimal":{name:"Modern Minimal",price:900,gradient:"from-blue-50 to-indigo-50",icon:Ta,description:"Clean, contemporary design",category:"creative",preview:"/api/placeholder/200/120"},"gradient-pro":{name:"Gradient Pro",price:1200,gradient:"from-purple-50 via-pink-50 to-purple-100",icon:qu,description:"Dynamic gradients and modern appeal",category:"creative",preview:"/api/placeholder/200/120"},"tech-innovation":{name:"Tech Innovation",price:1800,gradient:"from-green-50 via-emerald-50 to-green-100",icon:$u,description:"Cutting-edge tech-inspired design",category:"luxury",preview:"/api/placeholder/200/120"},"executive-elite":{name:"Executive Elite",price:2400,gradient:"from-slate-50 via-gray-100 to-slate-100",icon:rR,description:"Ultimate premium executive styling",category:"business",preview:"/api/placeholder/200/120"},"sunset-elegance":{name:"Sunset Elegance",price:1600,gradient:"from-orange-100 via-pink-100 to-red-100",icon:A5,description:"Warm sunset hues with sophisticated styling",category:"colorful",preview:"/api/placeholder/200/120",colors:{primary:"#ff6b35",secondary:"#f7931e",accent:"#ff8a80",text:"#2d1b14"}},"ocean-breeze":{name:"Ocean Breeze",price:1400,gradient:"from-cyan-100 via-teal-100 to-blue-200",icon:FR,description:"Refreshing ocean tones with elegant touches",category:"colorful",preview:"/api/placeholder/200/120",colors:{primary:"#0891b2",secondary:"#14b8a6",accent:"#67e8f9",text:"#0f172a"}},"aurora-premium":{name:"Aurora Premium",price:2e3,gradient:"from-violet-200 via-purple-100 to-fuchsia-200",icon:mn,description:"Mystical aurora colors with luxury appeal",category:"colorful",preview:"/api/placeholder/200/120",colors:{primary:"#8b5cf6",secondary:"#a855f7",accent:"#c084fc",text:"#1e1b4b"}},"royal-elegance":{name:"Royal Elegance",price:1800,gradient:"from-indigo-200 via-purple-200 to-blue-300",icon:zi,description:"Regal blues and purples with sophisticated charm",category:"business",preview:"/api/placeholder/200/120",colors:{primary:"#4338ca",secondary:"#6366f1",accent:"#8b5cf6",text:"#1e1b4b"}},"vibrant-elegance":{name:"Vibrant Elegance",price:1300,gradient:"from-rose-200 via-pink-200 to-purple-300",icon:po,description:"Vibrant pinks with elegant sophistication",category:"creative",preview:"/api/placeholder/200/120",colors:{primary:"#e11d48",secondary:"#ec4899",accent:"#f472b6",text:"#4c1d95"}},"jewel-tones":{name:"Jewel Tones",price:2200,gradient:"from-emerald-200 via-teal-200 to-cyan-300",icon:sR,description:"Rich emerald and sapphire luxury tones",category:"luxury",preview:"/api/placeholder/200/120",colors:{primary:"#059669",secondary:"#0d9488",accent:"#10b981",text:"#064e3b"}},"electric-blue":{name:"Electric Blue",price:1800,gradient:"from-blue-400 via-blue-500 to-cyan-400",icon:Ta,description:"High-voltage electric blue energy",category:"neon",preview:"/api/placeholder/200/120",colors:{primary:"#3b82f6",secondary:"#06b6d4",accent:"#0ea5e9",text:"#1e3a8a"}},"neon-pink":{name:"Neon Pink",price:1900,gradient:"from-pink-400 via-fuchsia-500 to-purple-500",icon:po,description:"Blazing hot pink neon vibes",category:"neon",preview:"/api/placeholder/200/120",colors:{primary:"#ec4899",secondary:"#d946ef",accent:"#f472b6",text:"#831843"}},"cyber-green":{name:"Cyber Green",price:2100,gradient:"from-green-400 via-emerald-500 to-teal-400",icon:tR,description:"Matrix-inspired cyber green glow",category:"neon",preview:"/api/placeholder/200/120",colors:{primary:"#22c55e",secondary:"#10b981",accent:"#4ade80",text:"#14532d"}},"plasma-purple":{name:"Plasma Purple",price:2e3,gradient:"from-violet-500 via-purple-600 to-indigo-600",icon:mn,description:"Intense plasma purple energy field",category:"neon",preview:"/api/placeholder/200/120",colors:{primary:"#8b5cf6",secondary:"#7c3aed",accent:"#a855f7",text:"#312e81"}},"laser-red":{name:"Laser Red",price:2500,gradient:"from-red-500 via-orange-500 to-yellow-400",icon:nR,description:"Blazing laser red with fire intensity",category:"neon",preview:"/api/placeholder/200/120",colors:{primary:"#ef4444",secondary:"#f97316",accent:"#fbbf24",text:"#7f1d1d"}},"toxic-lime":{name:"Toxic Lime",price:2300,gradient:"from-lime-400 via-green-500 to-emerald-400",icon:Ta,description:"Radioactive lime green intensity",category:"neon",preview:"/api/placeholder/200/120",colors:{primary:"#84cc16",secondary:"#22c55e",accent:"#65a30d",text:"#365314"}},"hypernova-orange":{name:"Hypernova Orange",price:2400,gradient:"from-orange-400 via-red-500 to-pink-500",icon:A5,description:"Explosive hypernova orange blast",category:"neon",preview:"/api/placeholder/200/120",colors:{primary:"#fb923c",secondary:"#ef4444",accent:"#f97316",text:"#9a3412"}}},vt={"corporate-blue":{primary:"#1e40af",accent:"#3b82f6",name:"Corporate Blue"},"luxury-gold":{primary:"#1a1a1a",accent:"#d4af37",name:"Luxury Gold"},"modern-mono":{primary:"#374151",accent:"#6b7280",name:"Modern Monochrome"},"vibrant-sunset":{primary:"#dc2626",accent:"#f59e0b",name:"Vibrant Sunset"},"forest-green":{primary:"#065f46",accent:"#10b981",name:"Forest Green"},"royal-purple":{primary:"#581c87",accent:"#a855f7",name:"Royal Purple"}},tr={none:{name:"None",pattern:""},dots:{name:"Dots",pattern:"radial-gradient(circle, #00000008 1px, transparent 1px)"},lines:{name:"Lines",pattern:"linear-gradient(45deg, #00000005 25%, transparent 25%)"},grid:{name:"Grid",pattern:"linear-gradient(#00000008 1px, transparent 1px), linear-gradient(90deg, #00000008 1px, transparent 1px)"},geometric:{name:"Geometric",pattern:"repeating-linear-gradient(45deg, #00000003, #00000003 10px, transparent 10px, transparent 20px)"}},Jt=[{quantity:25,price:12990,popular:!1},{quantity:50,price:9990,popular:!0},{quantity:100,price:7990,popular:!1},{quantity:250,price:5990,popular:!1}],Et=()=>{const ye={storeInfo:{...t},currentTemplate:i,logoFile:l,logoPosition:d,logoSize:f,typography:b,fontWeight:y,fontSize:j,primaryColor:_,accentColor:N,backgroundPattern:R,cardShadow:$,elementSpacing:F,textPositioning:{...X},backgroundType:je,backgroundColor:Te,textColors:{...He}},De=oe.slice(0,ge+1);De.push(ye),be(De),he(De.length-1)},ur=()=>{const ye=[];((qe,Ze)=>{const ht=parseInt(qe.replace("#",""),16),ct=parseInt(Ze.replace("#",""),16);return Math.abs(ht-ct)>8421504})(_,"#ffffff")||ye.push("Primary color may not have enough contrast with white background"),j==="small"&&t.storeName.length>20&&ye.push("Store name may be too long for small font size"),l||ye.push("Consider adding a logo for better brand recognition"),Le(ye)},vr=()=>({"luxury-gold":[vt["luxury-gold"],vt["royal-purple"]],"modern-minimal":[vt["corporate-blue"],vt["modern-mono"]],"tech-innovation":[vt["forest-green"],vt["corporate-blue"]],"elegant-classic":[vt["modern-mono"],vt["luxury-gold"]],"gradient-pro":[vt["vibrant-sunset"],vt["royal-purple"]],"executive-elite":[vt["modern-mono"],vt["corporate-blue"]]})[i]||[vt["modern-mono"]];ee.useEffect(()=>{ur()},[_,N,j,t.storeName,l]);const Wt=(ye,De="success")=>{const qe=Date.now();me(Ze=>[...Ze,{id:qe,message:ye,type:De}]),setTimeout(()=>{me(Ze=>Ze.filter(ht=>ht.id!==qe))},3e3)},Gt=(ye,De)=>{s(qe=>({...qe,[ye]:De})),Et()},at=ye=>{const De=ye.target.files[0];if(De){if(De.size>2*1024*1024){Wt("File size should be less than 2MB","error");return}const qe=new FileReader;qe.onload=Ze=>{u(Ze.target.result),Wt("Logo uploaded successfully!"),Et()},qe.readAsDataURL(De)}},rn=ye=>{S(ye.primary),O(ye.accent),Wt(`Applied ${ye.name} theme`),Et()},dr=(ye,De)=>{navigator.clipboard.writeText(ye),Fe(De),Wt("Copied to clipboard!"),setTimeout(()=>Fe(""),2e3)},et=()=>Object.entries(t).filter(([ye,De])=>De&&De.trim()!==""),an=ye=>`data:image/svg+xml,${encodeURIComponent(`
      <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
        <rect width="100" height="100" fill="white"/>
        <rect x="10" y="10" width="80" height="80" fill="none" stroke="black" stroke-width="2"/>
        <text x="50" y="55" font-family="Arial" font-size="8" text-anchor="middle">QR</text>
      </svg>
    `)}`,gr=()=>{switch(f){case"small":return"w-6 h-6";case"medium":return"w-8 h-8";case"large":return"w-12 h-12";default:return"w-8 h-8"}},In=()=>{switch(j){case"small":return"text-lg";case"medium":return"text-xl";case"large":return"text-2xl";default:return"text-xl"}},ln=()=>{switch(y){case"light":return"font-light";case"normal":return"font-normal";case"bold":return"font-bold";default:return"font-normal"}},gn=()=>{switch(F){case"tight":return"space-y-1";case"normal":return"space-y-2";case"relaxed":return"space-y-4";default:return"space-y-2"}},Yn=()=>{switch($){case"none":return"shadow-none";case"subtle":return"shadow-lg";case"medium":return"shadow-xl";case"strong":return"shadow-2xl";default:return"shadow-lg"}},Gr=(ye=!1,De=null)=>{const qe=Pt[De||i],Ze=()=>{switch(je){case"solid":return Te;case"gradient":return`linear-gradient(135deg, ${_}80, ${N}80)`;case"gradient_low":return`linear-gradient(135deg, ${_}40, ${N}40)`;case"gradient_high":return`linear-gradient(135deg, ${_}CC, ${N}CC)`;case"template":default:return null}},ht=()=>je==="template"&&qe?`bg-gradient-to-br ${qe.gradient}`:"",ct=()=>{const ut={borderColor:_+"20"};if(je!=="template"){const Ut=Ze();Ut&&(ut.background=Ut)}return R!=="none"&&tr[R]&&(ut.backgroundImage=tr[R].pattern,ut.backgroundSize=R==="grid"||R==="dots"?"20px 20px":"40px 40px"),ut},gt=n.jsxs("div",{className:`
        relative w-80 h-48 border border-gray-200 
        ${k==="rounded"?"rounded-xl":"rounded-none"} 
        ${Yn()} 
        overflow-hidden transition-all duration-500 cursor-pointer 
        hover:shadow-xl transform hover:scale-105 
        ${ht()}
      `.replace(/\s+/g," ").trim(),style:ct(),onClick:()=>U(!T),children:[!ye&&n.jsxs("div",{className:`p-6 h-full flex flex-col justify-between ${gn()}`,children:[l&&n.jsx("div",{className:`absolute ${d==="top-left"?"top-4 left-4":d==="center"?"top-4 left-1/2 transform -translate-x-1/2":"top-4 right-4"}`,children:n.jsx("img",{src:l,alt:"Logo",className:`${gr()} object-cover rounded`})}),n.jsxs("div",{className:`${F==="tight"?"mt-8":F==="relaxed"?"mt-12":"mt-10"} ${X.storeName==="center"?"text-center":X.storeName==="left"?"text-left":"text-right"}`,children:[n.jsx("h2",{className:`${In()} ${ln()} ${b==="elegant-serif"?"font-serif":b==="modern-sans"?"font-sans":b==="classic-times"?"font-serif":"font-script"}`,style:{color:He.storeName},children:t.storeName}),n.jsx("p",{className:`text-sm mt-1 ${X.ownerName==="center"?"text-center":X.ownerName==="left"?"text-left":"text-right"}`,style:{color:He.ownerName},children:t.preferredName||t.ownerName}),n.jsx("p",{className:"text-xs mt-1",style:{color:He.category},children:t.category})]}),n.jsx("div",{className:`absolute ${m==="bottom-left"?"bottom-4 left-4":"bottom-4 right-4"}`,children:n.jsx("img",{src:an(t.storeUrl),alt:"QR Code",className:"w-12 h-12 border border-gray-300 rounded"})})]}),ye&&n.jsxs("div",{className:"p-4 h-full flex flex-col justify-between text-xs",children:[n.jsxs("div",{className:"space-y-2",children:[et().map(([ut,Ut])=>{if(["storeName","ownerName","preferredName","category"].includes(ut))return null;const $t=Yt=>{switch(Yt){case"phone":return n.jsx(Gu,{size:12});case"email":return n.jsx(vl,{size:12});case"address":return n.jsx(wl,{size:12});case"website":return n.jsx(eA,{size:12});case"instagram":return n.jsx(Q1,{size:12});case"facebook":return n.jsx(R1,{size:12});case"whatsapp":return n.jsx(Ku,{size:12});case"businessHours":return n.jsx(is,{size:12});case"establishedYear":return n.jsx(ms,{size:12});default:return n.jsx(eA,{size:12})}};return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{style:{color:N},children:$t(ut)}),n.jsx("span",{className:"truncate",style:{color:He.contactText},children:Ut})]},ut)}),t.description&&n.jsx("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs",style:{color:He.contactText},children:t.description})]}),n.jsxs("div",{className:"flex justify-between items-end",children:[n.jsx("div",{className:"text-xs text-gray-400",children:"aiocart.lk"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Powered by NFC"})]})]})]});return M==="3d"?n.jsx("div",{className:"transform-gpu perspective-1000",children:n.jsx("div",{className:"transform rotate-x-12 rotate-y-12",children:gt})}):M==="mockup"?n.jsxs("div",{className:"relative",children:[Y==="desk"&&n.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-8 rounded-2xl",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-200/20 to-amber-300/20 rounded-2xl"}),n.jsx("div",{className:"relative",children:gt}),n.jsx("div",{className:"absolute bottom-2 right-2 text-xs text-amber-600",children:"On Desk"})]}),Y==="hand"&&n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-2xl",children:[n.jsx("div",{className:"relative transform rotate-3",children:gt}),n.jsx("div",{className:"absolute bottom-2 right-2 text-xs text-blue-600",children:"In Hand"})]}),Y==="holder"&&n.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-6 rounded-2xl",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"bg-gray-300 h-2 w-full mb-2 rounded"}),gt]}),n.jsx("div",{className:"absolute bottom-2 right-2 text-xs text-gray-600",children:"Card Holder"})]})]}):gt},Sn=()=>n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Order Your NFC Cards"}),n.jsx("button",{onClick:()=>fe(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:Jt.map(ye=>n.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all relative ${ye.popular?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[ye.popular&&n.jsx("div",{className:"absolute -top-2 left-4 bg-blue-500 text-white px-2 py-1 rounded text-xs font-semibold",children:"Most Popular"}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[ye.quantity," Cards"]}),n.jsxs("div",{className:"text-xl font-semibold text-green-600 mt-1",children:["LKR ",ye.price.toLocaleString()]}),n.jsxs("div",{className:"text-sm text-gray-500",children:["LKR ",Math.round(ye.price/ye.quantity)," per card"]})]})]},ye.quantity))}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Your Design Summary:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:["Template: ",Pt[i].name]}),n.jsxs("div",{children:["Finish: ",B.charAt(0).toUpperCase()+B.slice(1)]}),n.jsxs("div",{children:["Typography:"," ",b.replace("-"," ").replace(/\b\w/g,ye=>ye.toUpperCase())]}),n.jsxs("div",{children:["Corner:"," ",k.charAt(0).toUpperCase()+k.slice(1)]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>fe(!1),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Continue Designing"}),n.jsx("button",{onClick:()=>{Ce(!0),setTimeout(()=>{Ce(!1),fe(!1),Wt("Order placed successfully! We'll contact you soon.","success")},2e3)},className:"flex-1 px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors flex items-center justify-center gap-2",disabled:_e,children:_e?n.jsxs(n.Fragment,{children:[n.jsx(sc,{size:16,className:"animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(yl,{size:16}),"Place Order"]})})]})]})}),ce=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Name *"}),n.jsx("input",{type:"text",value:t.storeName,onChange:ye=>Gt("storeName",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Enter store name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Name *"}),n.jsx("input",{type:"text",value:t.ownerName,onChange:ye=>Gt("ownerName",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Enter owner name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Name"}),n.jsx("input",{type:"text",value:t.preferredName,onChange:ye=>Gt("preferredName",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Display name (optional)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Category"}),n.jsxs("select",{value:t.category,onChange:ye=>Gt("category",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"Fashion & Apparel",children:"Fashion & Apparel"}),n.jsx("option",{value:"Electronics",children:"Electronics"}),n.jsx("option",{value:"Food & Beverage",children:"Food & Beverage"}),n.jsx("option",{value:"Health & Beauty",children:"Health & Beauty"}),n.jsx("option",{value:"Home & Garden",children:"Home & Garden"}),n.jsx("option",{value:"Services",children:"Services"}),n.jsx("option",{value:"Other",children:"Other"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),n.jsx("input",{type:"tel",value:t.phone,onChange:ye=>Gt("phone",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"+94 77 123 4567"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),n.jsx("input",{type:"email",value:t.email,onChange:ye=>Gt("email",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"hello@yourstore.lk"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store URL"}),n.jsxs("div",{className:"flex",children:[n.jsx("input",{type:"text",value:t.storeUrl,onChange:ye=>Gt("storeUrl",ye.target.value),className:"flex-1 p-3 border border-gray-200 rounded-l-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"yourstore.aiocart.lk"}),n.jsx("button",{onClick:()=>dr(`https://${t.storeUrl}`,"storeUrl"),className:"px-3 border border-l-0 border-gray-200 rounded-r-lg hover:bg-gray-50 transition-colors",children:we==="storeUrl"?n.jsx(Xa,{size:16,className:"text-green-500"}):n.jsx(M1,{size:16})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Established Year"}),n.jsx("input",{type:"number",value:t.establishedYear,onChange:ye=>Gt("establishedYear",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"2019",min:"1900",max:"2024"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Address"}),n.jsx("textarea",{value:t.address,onChange:ye=>Gt("address",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",rows:"2",placeholder:"123 Galle Road, Colombo 03"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Hours"}),n.jsx("input",{type:"text",value:t.businessHours,onChange:ye=>Gt("businessHours",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Mon-Sat: 9:00 AM - 8:00 PM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{value:t.description,onChange:ye=>Gt("description",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",rows:"3",placeholder:"Brief description of your business..."})]})]}),Ne=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website URL"}),n.jsx("input",{type:"url",value:t.website,onChange:ye=>Gt("website",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"https://yourwebsite.lk"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instagram Handle"}),n.jsxs("div",{className:"flex",children:[n.jsx("span",{className:"inline-flex items-center px-3 text-gray-500 bg-gray-50 border border-r-0 border-gray-200 rounded-l-lg",children:"@"}),n.jsx("input",{type:"text",value:t.instagram.replace("@",""),onChange:ye=>Gt("instagram","@"+ye.target.value.replace("@","")),className:"flex-1 p-3 border border-gray-200 rounded-r-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"yourbusiness_lk"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facebook Page"}),n.jsx("input",{type:"url",value:t.facebook,onChange:ye=>Gt("facebook",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"https://facebook.com/yourbusiness"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp Number"}),n.jsx("input",{type:"tel",value:t.whatsapp,onChange:ye=>Gt("whatsapp",ye.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"+94 77 123 4567"})]})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"NFC Features"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Instant contact saving to phone"}),n.jsx("li",{children:" One-tap social media follows"}),n.jsx("li",{children:" Direct website visits"}),n.jsx("li",{children:" WhatsApp message initiation"}),n.jsx("li",{children:" Analytics tracking for all interactions"}),n.jsx("li",{children:" Universal smartphone compatibility"})]})]})]}),Re=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Choose Template by Category"}),Object.entries(dt).map(([ye,De])=>{const qe=De.icon;return n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(qe,{size:20,className:"text-gray-600"}),n.jsx("h4",{className:"font-medium text-gray-800",children:De.name})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:De.templates.map(Ze=>{const ht=Pt[Ze],ct=ht.icon;return n.jsxs("div",{className:`relative p-4 border-2 rounded-lg cursor-pointer transition-all hover:shadow-md ${i===Ze?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{a(Ze),Et()},onMouseEnter:()=>$e(Ze),onMouseLeave:()=>$e(null),children:[ve===Ze&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 rounded-lg flex items-center justify-center z-10",children:n.jsxs("div",{className:"text-white text-center",children:[n.jsx(Gn,{size:24,className:"mx-auto mb-2"}),n.jsx("div",{className:"text-sm",children:"Preview"})]})}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(ct,{size:20,className:"text-gray-600"}),ht.price>0?n.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["LKR ",ht.price.toLocaleString()]}):n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"Free"})]}),n.jsx("h4",{className:"font-semibold text-gray-800",children:ht.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ht.description}),n.jsx("div",{className:"mt-3 transform scale-50 origin-left",children:Gr(!1,Ze)})]},Ze)})})]},ye)})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Color Themes"}),n.jsxs("button",{onClick:()=>{const ye=vr();ye.length>0&&rn(ye[0])},className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800",children:[n.jsx(h5,{size:16}),"Smart Suggestion"]})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(vt).map(([ye,De])=>n.jsxs("div",{className:"p-3 border rounded-lg cursor-pointer hover:border-gray-300 transition-all",onClick:()=>rn(De),children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:De.primary}}),n.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:De.accent}})]}),n.jsx("div",{className:"text-sm font-medium",children:De.name})]},ye))}),n.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium mb-3",children:"Custom Colors"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:_,onChange:ye=>{S(ye.target.value),Et()},className:"w-12 h-12 rounded border border-gray-300"}),n.jsx("input",{type:"text",value:_,onChange:ye=>{S(ye.target.value),Et()},className:"flex-1 p-2 border border-gray-200 rounded focus:ring-2 focus:ring-black focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accent Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N,onChange:ye=>{O(ye.target.value),Et()},className:"w-12 h-12 rounded border border-gray-300"}),n.jsx("input",{type:"text",value:N,onChange:ye=>{O(ye.target.value),Et()},className:"flex-1 p-2 border border-gray-200 rounded focus:ring-2 focus:ring-black focus:border-transparent"})]})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Logo Upload"}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{onClick:()=>It.current?.click(),className:"w-24 h-24 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:border-gray-400 transition-colors",children:l?n.jsx("img",{src:l,alt:"Logo",className:"w-20 h-20 object-cover rounded"}):n.jsx(gp,{size:32,className:"text-gray-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("button",{onClick:()=>It.current?.click(),className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors mb-2",children:"Upload Logo"}),n.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"PNG, JPG up to 2MB"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo Size"}),n.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(ye=>n.jsx("button",{onClick:()=>{p(ye),Et()},className:`px-3 py-1 text-sm rounded ${f===ye?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,children:ye.charAt(0).toUpperCase()+ye.slice(1)},ye))})]})]}),n.jsx("input",{ref:It,type:"file",accept:"image/*",onChange:at,className:"hidden"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Typography"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Style"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"elegant-serif",name:"Elegant Serif",preview:"Elegance"},{key:"modern-sans",name:"Modern Sans",preview:"Modern"},{key:"classic-times",name:"Classic Times",preview:"Classic"},{key:"luxury-script",name:"Luxury Script",preview:"Luxury"}].map(ye=>n.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer text-center transition-all ${b===ye.key?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{v(ye.key),Et()},children:[n.jsx("div",{className:`text-lg ${ye.key==="elegant-serif"?"font-serif":ye.key==="modern-sans"?"font-sans":ye.key==="classic-times"?"font-serif":"font-script"}`,children:ye.preview}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ye.name})]},ye.key))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Weight"}),n.jsx("div",{className:"flex gap-2",children:["light","normal","bold"].map(ye=>n.jsx("button",{onClick:()=>{w(ye),Et()},className:`px-3 py-1 text-sm rounded ${y===ye?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,children:ye.charAt(0).toUpperCase()+ye.slice(1)},ye))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),n.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(ye=>n.jsx("button",{onClick:()=>{C(ye),Et()},className:`px-3 py-1 text-sm rounded ${j===ye?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,children:ye.charAt(0).toUpperCase()+ye.slice(1)},ye))})]})]})]})]}),n.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium mb-3",children:"Background Control"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Type"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{key:"gradient",name:"Gradient"},{key:"solid",name:"Solid Color"},{key:"template",name:"Template Default"}].map(ye=>n.jsx("button",{onClick:()=>{Pe(ye.key),Et()},className:`px-3 py-2 text-sm rounded transition-all ${je===ye.key?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ye.name},ye.key))})]}),je==="solid"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:Te,onChange:ye=>{Ye(ye.target.value),Et()},className:"w-12 h-12 rounded border border-gray-300"}),n.jsx("input",{type:"text",value:Te,onChange:ye=>{Ye(ye.target.value),Et()},className:"flex-1 p-2 border border-gray-200 rounded focus:ring-2 focus:ring-black focus:border-transparent"})]})]})]}),n.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium mb-3",children:"Text Colors"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Name Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:He.storeName,onChange:ye=>{it(De=>({...De,storeName:ye.target.value})),Et()},className:"w-10 h-10 rounded border border-gray-300"}),n.jsx("input",{type:"text",value:He.storeName,onChange:ye=>{it(De=>({...De,storeName:ye.target.value})),Et()},className:"flex-1 p-2 border border-gray-200 rounded focus:ring-2 focus:ring-black focus:border-transparent text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Name Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:He.ownerName,onChange:ye=>{it(De=>({...De,ownerName:ye.target.value})),Et()},className:"w-10 h-10 rounded border border-gray-300"}),n.jsx("input",{type:"text",value:He.ownerName,onChange:ye=>{it(De=>({...De,ownerName:ye.target.value})),Et()},className:"flex-1 p-2 border border-gray-200 rounded focus:ring-2 focus:ring-black focus:border-transparent text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:He.category,onChange:ye=>{it(De=>({...De,category:ye.target.value})),Et()},className:"w-10 h-10 rounded border border-gray-300"}),n.jsx("input",{type:"text",value:He.category,onChange:ye=>{it(De=>({...De,category:ye.target.value})),Et()},className:"flex-1 p-2 border border-gray-200 rounded focus:ring-2 focus:ring-black focus:border-transparent text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Text Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:He.contactText,onChange:ye=>{it(De=>({...De,contactText:ye.target.value})),Et()},className:"w-10 h-10 rounded border border-gray-300"}),n.jsx("input",{type:"text",value:He.contactText,onChange:ye=>{it(De=>({...De,contactText:ye.target.value})),Et()},className:"flex-1 p-2 border border-gray-200 rounded focus:ring-2 focus:ring-black focus:border-transparent text-sm"})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Presets"}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:[{name:"Dark",colors:{storeName:"#1a1a1a",ownerName:"#374151",category:"#6b7280",contactText:"#374151"}},{name:"Light",colors:{storeName:"#ffffff",ownerName:"#e5e7eb",category:"#d1d5db",contactText:"#f3f4f6"}},{name:"Blue",colors:{storeName:"#1e40af",ownerName:"#3b82f6",category:"#60a5fa",contactText:"#1e40af"}},{name:"Gold",colors:{storeName:"#d4af37",ownerName:"#b8860b",category:"#daa520",contactText:"#b8860b"}}].map(ye=>n.jsx("button",{onClick:()=>{it(ye.colors),Et()},className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors",children:ye.name},ye.name))})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Background Pattern"}),n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-3",children:Object.entries(tr).map(([ye,De])=>n.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer text-center transition-all ${R===ye?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{Q(ye),Et()},children:[n.jsx("div",{className:"w-8 h-8 mx-auto mb-2 border border-gray-300 rounded",style:{backgroundImage:De.pattern,backgroundSize:ye==="grid"||ye==="dots"?"8px 8px":"16px 16px"}}),n.jsx("div",{className:"text-xs",children:De.name})]},ye))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Card Effects"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shadow Style"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"none",name:"No Shadow"},{key:"subtle",name:"Subtle"},{key:"medium",name:"Medium"},{key:"strong",name:"Strong"}].map(ye=>n.jsx("button",{onClick:()=>{L(ye.key),Et()},className:`px-3 py-2 text-sm rounded transition-all ${$===ye.key?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ye.name},ye.key))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Corner Style"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"rounded",name:"Rounded"},{key:"sharp",name:"Sharp"}].map(ye=>n.jsx("button",{onClick:()=>{I(ye.key),Et()},className:`px-3 py-2 text-sm rounded transition-all ${k===ye.key?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ye.name},ye.key))})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Card Finish"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"matte",name:"Matte",price:0,description:"Smooth, non-reflective finish"},{key:"glossy",name:"Glossy",price:600,description:"Shiny, reflective surface"},{key:"metallic",name:"Metallic",price:1500,description:"Premium metallic coating"},{key:"textured",name:"Textured",price:900,description:"Tactile textured surface"}].map(ye=>n.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-all ${B===ye.key?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{E(ye.key),Et()},children:[n.jsx("div",{className:"font-medium",children:ye.name}),n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:ye.description}),ye.price>0?n.jsxs("div",{className:"text-xs text-green-600",children:["+LKR ",ye.price.toLocaleString()]}):n.jsx("div",{className:"text-xs text-blue-600",children:"Included"})]},ye.key))})]})]}),Ve=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Element Positioning"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo Position"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"top-left",name:"Top Left",icon:""},{key:"center",name:"Center",icon:""},{key:"top-right",name:"Top Right",icon:""}].map(ye=>n.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer text-center transition-all ${d===ye.key?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{A(ye.key),Et()},children:[n.jsx("div",{className:"text-2xl mb-1",children:ye.icon}),n.jsx("div",{className:"text-sm",children:ye.name})]},ye.key))})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"QR Code Position"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"bottom-left",name:"Bottom Left",icon:""},{key:"bottom-right",name:"Bottom Right",icon:""}].map(ye=>n.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer text-center transition-all ${m===ye.key?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{g(ye.key),Et()},children:[n.jsx("div",{className:"text-2xl mb-1",children:ye.icon}),n.jsx("div",{className:"text-sm",children:ye.name})]},ye.key))})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Text Alignment"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name Position"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"left",name:"Left",icon:""},{key:"center",name:"Center",icon:""},{key:"right",name:"Right",icon:""}].map(ye=>n.jsxs("button",{onClick:()=>{q(De=>({...De,storeName:ye.key})),Et()},className:`p-3 border rounded-lg transition-all flex items-center justify-center gap-2 ${X.storeName===ye.key?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[n.jsx("span",{className:"text-lg",children:ye.icon}),n.jsx("span",{className:"text-sm",children:ye.name})]},ye.key))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Name Position"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"left",name:"Left",icon:""},{key:"center",name:"Center",icon:""},{key:"right",name:"Right",icon:""}].map(ye=>n.jsxs("button",{onClick:()=>{q(De=>({...De,ownerName:ye.key})),Et()},className:`p-3 border rounded-lg transition-all flex items-center justify-center gap-2 ${X.ownerName===ye.key?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[n.jsx("span",{className:"text-lg",children:ye.icon}),n.jsx("span",{className:"text-sm",children:ye.name})]},ye.key))})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Element Spacing"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"tight",name:"Tight",description:"Compact layout"},{key:"normal",name:"Normal",description:"Balanced spacing"},{key:"relaxed",name:"Relaxed",description:"Spacious layout"}].map(ye=>n.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer text-center transition-all ${F===ye.key?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{G(ye.key),Et()},children:[n.jsx("div",{className:"font-medium",children:ye.name}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ye.description})]},ye.key))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Preview Options"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"View Mode"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"2d",name:"2D View",icon:$k},{key:"3d",name:"3D View",icon:Rk},{key:"mockup",name:"Mockup",icon:D1}].map(ye=>{const De=ye.icon;return n.jsxs("button",{onClick:()=>H(ye.key),className:`p-3 border rounded-lg transition-all flex items-center justify-center gap-2 ${M===ye.key?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[n.jsx(De,{size:16}),n.jsx("span",{className:"text-sm",children:ye.name})]},ye.key)})})]}),M==="mockup"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mockup Context"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"desk",name:"On Desk"},{key:"hand",name:"In Hand"},{key:"holder",name:"Card Holder"}].map(ye=>n.jsx("button",{onClick:()=>ae(ye.key),className:`p-3 border rounded-lg transition-all ${Y===ye.key?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:ye.name},ye.key))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Flip Animation"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"3d",name:"3D Flip"},{key:"fade",name:"Fade Effect"}].map(ye=>n.jsx("button",{onClick:()=>z(ye.key),className:`p-3 border rounded-lg transition-all ${K===ye.key?"border-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:ye.name},ye.key))})]})]})]})]});return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Advanced NFC Card Designer"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Create premium NFC-enabled business cards with advanced customization"})]}),n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-semibold text-gray-900",children:r.name}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-yellow-600",children:[n.jsx(zi,{size:14}),"Premium Member"]})]})})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("div",{className:"flex",children:[{key:"information",label:"Information",icon:ic},{key:"design",label:"Design",icon:Vv},{key:"layout",label:"Layout",icon:xR},{key:"social",label:"Social",icon:tA}].map(ye=>{const De=ye.icon;return n.jsxs("button",{onClick:()=>Z(ye.key),className:`flex-1 flex items-center justify-center gap-2 px-4 py-4 font-medium transition-colors ${ke===ye.key?"text-black border-b-2 border-black bg-gray-50":"text-gray-500 hover:text-gray-700"}`,children:[n.jsx(De,{size:16}),ye.label]},ye.key)})})}),n.jsxs("div",{className:"p-6",children:[ke==="information"&&ce(),ke==="design"&&Re(),ke==="layout"&&Ve(),ke==="social"&&Ne()]})]})}),n.jsx("div",{className:"lg:col-span-1",children:n.jsx("div",{className:"sticky top-8",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Live Preview"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>U(!T),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Flip Card",children:n.jsx(sc,{size:16})}),n.jsx("div",{className:"text-xs text-gray-500",children:M.toUpperCase()})]})]}),n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("div",{className:K==="fade"?"transition-opacity duration-500":"transition-transform duration-700 transform-style-preserve-3d",children:Gr(T)})}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[T?"Back Side":"Front Side","  Click to flip"]}),n.jsxs("div",{className:"flex justify-center gap-2",children:[n.jsx("button",{onClick:()=>U(!1),className:`px-3 py-1 text-xs rounded transition-colors ${T?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-black text-white"}`,children:"Front"}),n.jsx("button",{onClick:()=>U(!0),className:`px-3 py-1 text-xs rounded transition-colors ${T?"bg-black text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Back"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>fe(!0),className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:[n.jsx(yl,{size:16}),"Order Cards"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("button",{onClick:()=>Wt("PNG download feature coming soon!"),className:"flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[n.jsx(Dc,{size:14}),"Download"]}),n.jsxs("button",{onClick:()=>dr(window.location.href,"design"),className:"flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[n.jsx(tA,{size:14}),"Share"]})]})]}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(h5,{size:16,className:"text-blue-600"}),n.jsx("h4",{className:"font-medium text-blue-900",children:"Smart Suggestions"})]}),n.jsx("div",{className:"space-y-2",children:vr().map((ye,De)=>n.jsx("button",{onClick:()=>rn(ye),className:"w-full text-left p-2 bg-white rounded border hover:border-blue-300 transition-colors",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:ye.primary}}),n.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:ye.accent}})]}),n.jsx("span",{className:"text-sm text-gray-700",children:ye.name})]})},De))})]}),n.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Pricing Summary"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Template:"}),n.jsx("span",{className:"font-medium",children:Pt[i].price===0?"Free":`LKR ${Pt[i].price.toLocaleString()}`})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Finish:"}),n.jsx("span",{className:"font-medium",children:B==="matte"?"Included":`+LKR ${B==="glossy"?"600":B==="metallic"?"1,500":"900"}`})]}),R!=="none"&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Pattern:"}),n.jsx("span",{className:"font-medium",children:"+LKR 200"})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-2 mt-2 flex justify-between font-semibold text-base",children:[n.jsx("span",{children:"Per Card:"}),n.jsxs("span",{className:"text-green-600",children:["LKR"," ",(Pt[i].price+(B==="glossy"?600:B==="metallic"?1500:B==="textured"?900:0)+(R!=="none"?200:0)).toLocaleString()]})]})]})]}),n.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg border border-purple-100",children:[n.jsxs("h4",{className:"font-semibold text-purple-900 mb-3 flex items-center gap-2",children:[n.jsx(Ta,{size:16}),"Premium NFC Technology"]}),n.jsxs("ul",{className:"text-sm text-purple-800 space-y-1",children:[n.jsx("li",{children:" Instant contact sharing"}),n.jsx("li",{children:" Real-time analytics tracking"}),n.jsx("li",{children:" Eco-friendly paperless solution"}),n.jsx("li",{children:" Universal smartphone compatibility"}),n.jsx("li",{children:" Professional impression guaranteed"})]})]})]})})})]})}),te&&Sn(),n.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-40",children:ie.map(ye=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg flex items-center gap-2 animate-slide-up ${ye.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[ye.type==="success"?n.jsx(Xa,{size:16}):n.jsx(Sa,{size:16}),ye.message]},ye.id))}),n.jsx("style",{jsx:!0,children:`
        @keyframes slide-up {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }

        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }

        .transform-style-preserve-3d {
          transform-style: preserve-3d;
        }

        .perspective-1000 {
          perspective: 1000px;
        }

        .rotate-x-12 {
          transform: rotateX(12deg);
        }

        .rotate-y-12 {
          transform: rotateY(12deg);
        }
      `})]})},VB=50,jn=(...r)=>{console.log("[Chat Hook]",...r)},zI=r=>{const{socket:t,isConnected:s,globalUnreadCount:i,updateUnreadCount:a}=Xk(),[o,c]=ee.useState([]),[l,u]=ee.useState(null),[d,A]=ee.useState([]),[f,p]=ee.useState(0),[m,g]=ee.useState(!1),[b,v]=ee.useState(null),[y,w]=ee.useState(new Map),j=ee.useRef(new Map),C=ee.useRef(new Set),B=ee.useRef(new Set),E=ee.useRef(new Set),_="http://localhost:10000",S=ee.useCallback(async()=>{if(!t?.connected||!r?.id){jn(" Cannot join rooms: socket disconnected or no user");return}try{jn(" Joining all chat rooms for user:",r.id),o.forEach(G=>{B.current.has(G._id)||(jn(` Joining room for conversation: ${G._id}`),t.emit("join-chat",{chatId:G._id}),B.current.add(G._id))})}catch(G){jn(" Error joining chat rooms:",G)}},[o,r?.id,t]);ee.useEffect(()=>{if(!t||!r?.id)return;jn(" Setting up socket event listeners for useChat");const G=T=>{if(jn(" NEW MESSAGE RECEIVED:",{messageId:T._id,chatId:T.chat._id,senderId:T.sender._id,senderName:T.sender.name,currentUserId:r.id,content:T.content?.slice(0,50),timestamp:new Date().toISOString()}),C.current.has(T._id)){jn(" Duplicate message ignored:",T._id);return}C.current.add(T._id);const U=T.sender._id!==r.id;jn(" Message analysis:",{isFromOtherUser:U,willUpdateUnread:U}),c(K=>K.map(M=>{if(M._id===T.chat._id){const H=M.unreadCount||0,Y=U?H+1:H;return jn(` Conversation ${M._id} unread: ${H}  ${Y}`),{...M,lastMessage:{content:T.content||" File attachment",senderId:T.sender._id,messageType:T.messageType,timestamp:T.createdAt},unreadCount:Y}}return M})),u(K=>(K&&T.chat._id===K._id&&(jn(" Adding message to active chat"),A(z=>z.some(H=>H._id===T._id)?z:[...z,T])),K))},X=T=>{jn(" Successfully joined chat room:",T.chatId),B.current.add(T.chatId)},q=T=>{T.userId!==r.id&&w(U=>{const K=new Map(U),z=`${T.chatId}_${T.userId}`;if(j.current.has(z)&&(clearTimeout(j.current.get(z)),j.current.delete(z)),T.isTyping){K.set(T.userId,{userName:T.userName||"Someone",chatId:T.chatId});const M=setTimeout(()=>{w(H=>{const Y=new Map(H);return Y.delete(T.userId),Y}),j.current.delete(z)},3e3);j.current.set(z,M)}else K.delete(T.userId);return K})};return t.on("new-message",G),t.on("chat-joined",X),t.on("user-typing",q),t.connected&&S(),()=>{t.off("new-message",G),t.off("chat-joined",X),t.off("user-typing",q)}},[t,r?.id,S]),ee.useEffect(()=>{o.length>0&&s&&(jn(" Conversations updated, joining rooms..."),S())},[o,s,S]),ee.useEffect(()=>{if(!r?.id)return;(async()=>{try{g(!0),v(null),jn(" Fetching initial chat data...");const[X,q]=await Promise.all([fetch(`${_}/api/chat/conversations?limit=50`,{credentials:"include"}),fetch(`${_}/api/chat/unread-count`,{credentials:"include"})]);if(X.ok){const T=await X.json();jn(" Loaded conversations:",T.conversations?.length||0),c(T.conversations||[])}if(q.ok){const T=await q.json();jn(" Initial unread count:",T.unreadCount),p(T.unreadCount||0)}}catch(X){jn(" Failed to fetch initial data:",X),v({type:"api",message:X.message,timestamp:Date.now()})}finally{g(!1)}})()},[r?.id,_]);const N=ee.useCallback(async(G,X,q="text",T=null,U=null)=>{if(!X?.trim()&&!T&&!U)return!1;if(!t?.connected)return jn(" Cannot send message: socket not connected"),!1;try{jn(" Sending message:",{chatId:G,content:X?.slice(0,50),messageType:q});const K={chatId:G,content:X?.trim(),messageType:q,file:T,receipt:U,tempId:`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};return t.emit("send-message",K),!0}catch(K){return jn(" Send message error:",K),!1}},[t]),O=ee.useCallback(async(G,X=1,q=VB)=>{try{g(!0),jn(" Loading messages for chat:",G,"page:",X);const T=`${_}/api/chat/${G}?page=${X}&limit=${q}`,U=await fetch(T,{credentials:"include"}),K=await U.json();if(!U.ok)throw new Error(K.error||"Failed to load messages");return u(K.chat),X===1?(A(K.chat.messages||[]),C.current.clear()):A(z=>{const M=K.chat.messages||[],H=new Set(z.map(ae=>ae._id));return[...M.filter(ae=>!H.has(ae._id)),...z]}),t?.connected&&!B.current.has(G)&&(jn(" Joining specific chat room:",G),t.emit("join-chat",{chatId:G}),B.current.add(G)),K.chat.messages?.forEach(z=>{z._id&&C.current.add(z._id)}),{chat:K.chat,pagination:K.pagination}}catch(T){throw jn(" Load messages error:",T),v({type:"api",message:T.message,timestamp:Date.now()}),T}finally{g(!1)}},[_,t]),k=ee.useCallback(async G=>{try{if(jn(` Marking chat ${G} as read`),E.current.has(G)){jn(` Mark as read already in progress for chat: ${G}`);return}if(E.current.add(G),!(await fetch(`${_}/api/chat/${G}/read`,{method:"PUT",credentials:"include"})).ok)throw new Error("Failed to mark messages as read");t?.connected&&(t.emit("mark-messages-read",{chatId:G}),t.emit("messages-marked-read",{chatId:G,userId:r.id})),c(q=>{const U=q.find(K=>K._id===G)?.unreadCount||0;return jn(`Found conversation with unread count: ${U}`),U>0&&p(K=>{const z=Math.max(0,K-U);return jn(` Global unread count updated: ${K}  ${z}`),z}),q.map(K=>K._id===G?{...K,unreadCount:0}:K)})}catch(X){jn(" Failed to mark as read:",X),v({type:"api",message:X.message||"Failed to mark messages as read",timestamp:Date.now()})}finally{E.current.delete(G)}},[_,t,r?.id]),I=ee.useCallback(G=>{t?.connected&&t.emit("typing-start",{chatId:G})},[t]),R=ee.useCallback(G=>{t?.connected&&t.emit("typing-stop",{chatId:G})},[t]),Q=ee.useCallback(G=>G?Array.from(y.values()).filter(X=>X.chatId===G):[],[y]),$=ee.useCallback(()=>{jn("=== CHAT STATE DEBUG ==="),jn("User ID:",r?.id),jn("Socket connected:",t?.connected),jn("Socket ID:",t?.id),jn("Joined rooms:",Array.from(B.current)),jn("Conversations:",o.length),jn("Total unread:",f),jn("Global unread:",i),jn("Active chat:",l?._id),t?.connected&&(t.emit("ping",{timestamp:Date.now()}),jn(" Sent ping test"))},[r?.id,o.length,f,i,l?._id,t]),L=ee.useCallback(()=>{jn(" Note: Using global socket, cannot force reconnect from useChat")},[]),F=ee.useCallback(async(G,X)=>{try{jn(" Loading older messages for chat:",G,"before:",X);const q=`${_}/api/chat/${G}?before=${X}&limit=${VB}`,T=await fetch(q,{credentials:"include"}),U=await T.json();if(!T.ok)throw new Error(U.error||"Failed to load older messages");const K=U.chat.messages||[];return K.length>0&&(A(z=>{const M=new Set(z.map(Y=>Y._id));return[...K.filter(Y=>!M.has(Y._id)),...z]}),K.forEach(z=>{z._id&&C.current.add(z._id)})),{messages:K,hasMore:U.pagination?.hasMore||!1}}catch(q){throw jn(" Load older messages error:",q),q}},[_]);return{conversations:o,activeChat:l,messages:d,unreadCount:f,isConnected:s,isLoading:m,error:b,typingUsers:y,sendMessage:N,loadMessages:O,loadOlderMessages:F,markAsRead:k,startTyping:I,stopTyping:R,getTypingUsers:Q,debugChatState:$,forceReconnect:L,connectionHealth:{isConnected:s,joinedRooms:Array.from(B.current)},socket:t}},Hne={_id:"1",name:"John Doe",email:"john@example.com",role:"customer",profileImage:null},KI=({chat:r,user:t,onSendMessage:s,onTyping:i,messages:a,typingUsers:o})=>{const[c,l]=ee.useState(""),[u,d]=ee.useState(!1),A=ee.useRef(null),f=ee.useRef(null),p=()=>{A.current?.scrollIntoView({behavior:"smooth"})};ee.useEffect(()=>{p()},[a]);const m=async y=>{if(y.preventDefault(),!(!c.trim()||!r))try{await s(r._id,c.trim()),l(""),d(!1)}catch(w){console.error("Failed to send message:",w)}},g=y=>{l(y),!u&&y.trim()&&(d(!0),i?.(r._id,!0)),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{d(!1),i?.(r._id,!1)},1e3)},b=y=>new Date(y).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),v=o?.filter(y=>y.chatId===r?._id)||[];return r?n.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[n.jsxs("div",{className:"border-b border-gray-200 p-4 bg-gradient-to-r from-gray-900 to-black text-white",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:r.otherParticipant?.profileImage||"/api/placeholder/40/40",alt:r.otherParticipant?.name,className:"w-10 h-10 rounded-full object-cover"}),r.otherParticipant?.isOnline&&n.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:r.otherParticipant?.name}),n.jsx("p",{className:"text-sm text-gray-300",children:r.otherParticipant?.isOnline?"Online":"Offline"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(Gu,{className:"w-5 h-5"})}),n.jsx("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:n.jsx(pR,{className:"w-5 h-5"})})]})]}),r.taggedProduct&&n.jsx("div",{className:"mt-3 p-2 bg-white/10 rounded-lg",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sd,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm",children:["Product: ",r.taggedProduct.productName]})]})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(y=>{const w=y.sender._id===t._id;return n.jsx("div",{className:`flex ${w?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${w?"bg-gradient-to-r from-gray-900 to-black text-white":"bg-gradient-to-r from-white to-gray-50 border border-gray-200"}`,children:[y.messageType==="image"&&y.file&&n.jsx("img",{src:y.file.url,alt:"Uploaded",className:"max-w-full h-auto rounded mb-2"}),y.messageType==="receipt"&&y.receipt&&n.jsxs("div",{className:"p-3 border rounded-lg mb-2 bg-green-50",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(ZM,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"font-medium text-green-800",children:"Order Receipt"})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsxs("p",{children:["Order: ",y.receipt.orderId]}),n.jsxs("p",{children:["Amount: $",y.receipt.amount]}),n.jsxs("p",{children:["Status: ",y.receipt.status]})]})]}),n.jsx("p",{className:"text-sm",children:y.content}),n.jsx("p",{className:`text-xs mt-1 ${w?"text-gray-300":"text-gray-500"}`,children:b(y.createdAt)})]})},y._id)}),v.length>0&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-gray-100 px-4 py-2 rounded-lg",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),n.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[v[0].userName," is typing..."]})]})})}),n.jsx("div",{ref:A})]}),n.jsx("div",{className:"border-t border-gray-200 p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(bR,{className:"w-5 h-5"})}),n.jsx("input",{type:"text",value:c,onChange:y=>g(y.target.value),onKeyPress:y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),m(y))},placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"}),n.jsx("button",{onClick:m,disabled:!c.trim(),className:"p-2 bg-gradient-to-r from-gray-900 to-black text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:n.jsx(zk,{className:"w-5 h-5"})})]})})]}):n.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx(p0,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Chat Selected"}),n.jsx("p",{className:"text-gray-500",children:"Choose a conversation to start messaging"})]})})},GI=({chats:r,selectedChat:t,onSelectChat:s,userRole:i,onSearch:a})=>{const[o,c]=ee.useState(""),l=r.filter(A=>A.otherParticipant?.name?.toLowerCase().includes(o.toLowerCase())||A.lastMessage?.content?.toLowerCase().includes(o.toLowerCase())),u=A=>{if(!A)return"No messages yet";switch(A.messageType){case"image":return" Photo";case"receipt":return" Receipt";case"system":return" System message";default:return A.content?.length>50?A.content.substring(0,50)+"...":A.content}},d=A=>{const f=new Date,p=new Date(A);return(f-p)/(1e3*60*60)<24?p.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):p.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return n.jsxs("div",{className:"w-80 border-r border-gray-200 bg-white flex flex-col",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:i==="customer"?"Your Chats":"Customer Messages"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search conversations...",value:o,onChange:A=>c(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.map(A=>n.jsx("div",{onClick:()=>s(A),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${t?._id===A._id?"bg-blue-50 border-blue-200":""}`,children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:A.otherParticipant?.profileImage||"/api/placeholder/48/48",alt:A.otherParticipant?.name,className:"w-12 h-12 rounded-full object-cover"}),A.otherParticipant?.isOnline&&n.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-900 truncate",children:A.otherParticipant?.name}),n.jsx("span",{className:"text-xs text-gray-500",children:d(A.lastMessage?.timestamp||A.updatedAt)})]}),n.jsxs("div",{className:"flex items-center justify-between mt-1",children:[n.jsx("p",{className:"text-sm text-gray-600 truncate",children:u(A.lastMessage)}),A.unreadCount>0&&n.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-0.5 min-w-[20px] text-center",children:A.unreadCount})]}),i==="store_owner"&&A.taggedProduct&&n.jsxs("div",{className:"flex items-center mt-1 text-xs text-blue-600",children:[n.jsx(sd,{className:"w-3 h-3 mr-1"}),n.jsx("span",{className:"truncate",children:A.taggedProduct.productName})]})]})]})},A._id)),l.length===0&&n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(p0,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),n.jsx("p",{children:"No conversations found"})]})]})]})},Vne=({onInsertText:r})=>{const t=[{text:"Thanks for your inquiry!",icon:""},{text:"Let me check that for you",icon:""},{text:"Product is available",icon:""},{text:"Here's the pricing information",icon:""},{text:"Would you like to place an order?",icon:""},{text:"I'll get back to you shortly",icon:""}];return n.jsxs("div",{className:"w-64 border-l border-gray-200 bg-gray-50 p-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsx("div",{className:"space-y-2",children:t.map((s,i)=>n.jsx("button",{onClick:()=>r(s.text),className:"w-full text-left p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-lg",children:s.icon}),n.jsx("span",{className:"text-sm text-gray-700",children:s.text})]})},i))}),n.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-gray-200",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Customer Info"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ic,{className:"w-4 h-4"}),n.jsx("span",{children:"Previous orders: 5"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sd,{className:"w-4 h-4"}),n.jsx("span",{children:"Total spent: $299"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(is,{className:"w-4 h-4"}),n.jsx("span",{children:"Customer since: Jan 2024"})]})]})]})]})},zne=({customer:r,chat:t})=>r?n.jsxs("div",{className:"p-4 bg-gradient-to-r from-white to-gray-50 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("img",{src:r.profileImage||"/api/placeholder/60/60",alt:r.name,className:"w-15 h-15 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:r.name}),n.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(vl,{className:"w-4 h-4"}),n.jsx("span",{children:r.email})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(eR,{className:`w-2 h-2 rounded-full ${r.isOnline?"bg-green-500":"bg-gray-400"}`}),n.jsx("span",{children:r.isOnline?"Online":"Offline"})]})]})]}),t?.analytics?.customerSatisfaction&&n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(mn,{className:"w-4 h-4 text-yellow-400 fill-current"}),n.jsx("span",{className:"text-sm font-medium",children:t.analytics.customerSatisfaction})]}),n.jsx("span",{className:"text-xs text-gray-500",children:"Rating"})]})]}),t?.taggedProduct&&n.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sd,{className:"w-4 h-4 text-blue-600"}),n.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["Inquiring about: ",t.taggedProduct.productName]})]}),t.taggedProduct.productId&&n.jsx("button",{className:"mt-2 text-xs text-blue-600 hover:text-blue-800",children:"View Product Details "})]})]}):null,Kne=({user:r})=>{const{conversations:t,activeChat:s,messages:i,loadMessages:a,sendMessage:o,markAsRead:c,joinChatRoom:l,startTyping:u,typingUsers:d,isLoading:A}=zI(r),[f,p]=ee.useState(null),m=async g=>{try{p(g),await a(g._id),await c(g._id),l(g._id)}catch(b){console.error("Failed to load chat:",b)}};return A?n.jsx("div",{className:"h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading chats..."})]})}):n.jsxs("div",{className:"h-screen flex bg-gray-100",children:[n.jsx(GI,{chats:t,selectedChat:f,onSelectChat:m,userRole:"customer"}),n.jsx(KI,{chat:s,user:r,onSendMessage:o,onTyping:u,messages:i,typingUsers:d})]})},Gne=({user:r,storeId:t})=>{const{conversations:s,activeChat:i,messages:a,loadMessages:o,sendMessage:c,markAsRead:l,joinChatRoom:u,startTyping:d,typingUsers:A,isLoading:f}=zI(r),[p,m]=ee.useState(null),g=async v=>{try{m(v),await o(v._id),await l(v._id),u(v._id)}catch(y){console.error("Failed to load chat:",y)}},b=v=>{i&&c(i._id,v)};return f?n.jsx("div",{className:"h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading customer chats..."})]})}):n.jsxs("div",{className:"h-screen flex bg-gray-100",children:[n.jsx(GI,{chats:s,selectedChat:p,onSelectChat:g,userRole:"store_owner"}),n.jsxs("div",{className:"flex-1 flex flex-col",children:[i&&n.jsx(zne,{customer:i.otherParticipant,chat:i}),n.jsxs("div",{className:"flex-1 flex",children:[n.jsx(KI,{chat:i,user:r,onSendMessage:c,onTyping:d,messages:a,typingUsers:A}),n.jsx(Vne,{onInsertText:b})]})]})]})},Wne=()=>{const[r,t]=ee.useState("customer"),s={...Hne,role:r};return n.jsxs("div",{className:"h-screen",children:[n.jsxs("div",{className:"bg-gray-800 text-white p-2 flex items-center justify-between",children:[n.jsxs("h1",{className:"font-bold",children:["Chat Dashboard - ",r==="customer"?"Customer View":"Store Owner View"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>t("customer"),className:`px-3 py-1 rounded text-sm ${r==="customer"?"bg-blue-600":"bg-gray-600"}`,children:"Customer View"}),n.jsx("button",{onClick:()=>t("store_owner"),className:`px-3 py-1 rounded text-sm ${r==="store_owner"?"bg-blue-600":"bg-gray-600"}`,children:"Store Owner View"})]})]}),r==="customer"?n.jsx(Kne,{user:s}):n.jsx(Gne,{user:s,storeId:"store123"})]})},qne=()=>{const[r,t]=ee.useState({title:"",description:"",hashtags:"",taggedProducts:[],mediaType:null,files:[]}),[s,i]=ee.useState(!1),[a,o]=ee.useState(""),[c,l]=ee.useState([]),[u,d]=ee.useState(!1),[A,f]=ee.useState(0),p=ee.useRef(null),m=[{id:1,name:"Premium Black Hoodie",price:"$59.99",image:"/api/placeholder/60/60"},{id:2,name:"Classic White Sneakers",price:"$89.99",image:"/api/placeholder/60/60"},{id:3,name:"Minimalist Watch",price:"$199.99",image:"/api/placeholder/60/60"},{id:4,name:"Designer Sunglasses",price:"$149.99",image:"/api/placeholder/60/60"}],g=E=>{const _=Array.from(E.target.files);if(!_.length)return;const S=_[0],N=S.type.startsWith("video/"),O=S.type.startsWith("image/");if(N){if(S.size>100*1024*1024){alert("Video file too large. Please keep under 100MB.");return}t(k=>({...k,mediaType:"video",files:[S]}))}else if(O){const k=[...r.files,..._].slice(0,5);t(I=>({...I,mediaType:"images",files:k}))}},b=E=>{t(_=>({..._,files:_.files.filter((S,N)=>N!==E),mediaType:_.files.length===1?null:_.mediaType}))},v=async(E,_)=>{const S=E.map(async(N,O)=>{try{const k=Date.now(),I=`posts/${_}/${k}_${N.name}`,R=Al(hl,I),Q=await ul(R,N),$=await dl(Q.ref),L=Math.round((O+1)/E.length*70)+20;return f(L),$}catch(k){throw console.error(`Failed to upload file ${N.name}:`,k),new Error(`Failed to upload ${N.name}`)}});return Promise.all(S)},y=async E=>{const _=await fetch("/api/posts",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!_.ok){const S=await _.json();throw new Error(S.error||"Failed to create post")}return _.json()},w=async E=>{if(o(E),E.length>2)try{const _=await fetch(`/api/posts/products/search?q=${encodeURIComponent(E)}`,{credentials:"include"});if(_.ok){const S=await _.json();l(S.products||[])}else{const S=m.filter(N=>N.name.toLowerCase().includes(E.toLowerCase()));l(S)}}catch(_){console.error("Product search failed:",_);const S=m.filter(N=>N.name.toLowerCase().includes(E.toLowerCase()));l(S)}else l([])},j=E=>{r.taggedProducts.find(_=>_.id===E.id)||t(_=>({..._,taggedProducts:[..._.taggedProducts,E]})),i(!1),o(""),l([])},C=E=>{t(_=>({..._,taggedProducts:_.taggedProducts.filter(S=>S.id!==E)}))},B=async()=>{if(!r.title.trim()&&!r.files.length){alert("Please add a title or media to your post");return}d(!0),f(10);try{let E=[];if(r.files.length>0){const N=localStorage.getItem("userId")||"user123";f(20),E=await v(r.files,N),f(85)}const _={title:r.title.trim(),description:r.description.trim(),hashtags:r.hashtags,taggedProducts:r.taggedProducts.map(N=>N.id),mediaUrls:E},S=await y(_);f(100),setTimeout(()=>{alert("Post created successfully!"),t({title:"",description:"",hashtags:"",taggedProducts:[],mediaType:null,files:[]}),d(!1),f(0)},500)}catch(E){console.error("Upload failed:",E),d(!1),f(0),alert(`Failed to create post: ${E.message}`)}};return n.jsxs("div",{className:"max-w-lg mx-auto bg-white border border-gray-200 rounded-xl shadow-sm",children:[n.jsxs("div",{className:"p-4 border-b border-gray-100",children:[n.jsx("h2",{className:"text-xl font-semibold text-black",children:"Create Post"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Share your thoughts, products, or experiences"})]}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),n.jsx("input",{type:"text",placeholder:"Give your post a catchy title...",value:r.title,onChange:E=>t(_=>({..._,title:E.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent text-gray-900 placeholder-gray-500",maxLength:100}),n.jsxs("div",{className:"text-xs text-gray-400 text-right mt-1",children:[r.title.length,"/100"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{placeholder:"Tell your story, share details, add context...",value:r.description,onChange:E=>t(_=>({..._,description:E.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-black focus:border-transparent text-gray-900 placeholder-gray-500",rows:4,maxLength:1e3}),n.jsxs("div",{className:"text-xs text-gray-400 text-right mt-1",children:[r.description.length,"/1000"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags"}),n.jsx("input",{type:"text",placeholder:"#fashion #lifestyle #trending #sale #newdrop",value:r.hashtags,onChange:E=>t(_=>({..._,hashtags:E.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent text-gray-900 placeholder-gray-500"})]}),n.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:r.files.length===0?n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-3",children:n.jsx(gp,{className:"h-8 w-8 text-gray-400"})}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Upload images or video to make your post stand out"}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsxs("label",{className:"bg-black text-white px-4 py-2 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors text-sm flex items-center gap-2",children:[n.jsx(oR,{className:"h-4 w-4"}),"Images (Max 5)",n.jsx("input",{ref:p,type:"file",multiple:!0,accept:"image/*",onChange:g,className:"hidden"})]}),n.jsxs("label",{className:"border border-black text-black px-4 py-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors text-sm flex items-center gap-2",children:[n.jsx(IR,{className:"h-4 w-4"}),"Video (30s)",n.jsx("input",{type:"file",accept:"video/*",onChange:g,className:"hidden"})]})]}),n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Choose either multiple images OR one video per post"})]}):n.jsx("div",{children:r.mediaType==="video"?n.jsxs("div",{className:"relative",children:[n.jsx("video",{src:URL.createObjectURL(r.files[0]),className:"w-full h-48 object-cover rounded-lg",controls:!0}),n.jsx("button",{onClick:()=>b(0),className:"absolute top-2 right-2 bg-black text-white rounded-full p-1 hover:bg-gray-800",children:n.jsx(Ts,{className:"h-4 w-4"})}),n.jsxs("div",{className:"absolute bottom-2 left-2 bg-black text-white px-2 py-1 rounded text-xs flex items-center gap-1",children:[n.jsx(is,{className:"h-3 w-3"}),"Video"]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.files.map((E,_)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:URL.createObjectURL(E),alt:`Upload ${_+1}`,className:"w-full h-32 object-cover rounded-lg"}),n.jsx("button",{onClick:()=>b(_),className:"absolute top-1 right-1 bg-black text-white rounded-full p-1 hover:bg-gray-800",children:n.jsx(Ts,{className:"h-3 w-3"})})]},_)),r.files.length<5&&n.jsxs("label",{className:"h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:border-gray-400 transition-colors",children:[n.jsx(Ua,{className:"h-6 w-6 text-gray-400"}),n.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:g,className:"hidden"})]})]})})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tag Products"}),n.jsx("button",{onClick:()=>i(!s),className:"text-black hover:bg-gray-100 p-1 rounded transition-colors",children:n.jsx(Mc,{className:"h-4 w-4"})})]}),r.taggedProducts.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.taggedProducts.map(E=>n.jsxs("div",{className:"bg-gray-100 border border-gray-200 rounded-lg p-2 flex items-center gap-2 text-sm",children:[n.jsx("img",{src:E.image,alt:E.name,className:"w-6 h-6 rounded"}),n.jsx("span",{className:"text-gray-700",children:E.name}),n.jsx("button",{onClick:()=>C(E.id),className:"text-gray-500 hover:text-red-500 ml-1",children:n.jsx(Ts,{className:"h-3 w-3"})})]},E.id))}),s&&n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ca,{className:"absolute left-3 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products to tag...",value:a,onChange:E=>w(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent text-gray-900"})]}),c.length>0&&n.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg mt-1 shadow-lg z-10 max-h-48 overflow-y-auto",children:c.map(E=>n.jsxs("button",{onClick:()=>j(E),className:"w-full p-3 flex items-center gap-3 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-0",children:[n.jsx("img",{src:E.image,alt:E.name,className:"w-10 h-10 rounded-lg object-cover"}),n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900 text-sm",children:E.name}),n.jsx("p",{className:"text-xs text-gray-600",children:E.price})]})]},E.id))})]})]})]}),n.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:u?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Uploading post..."}),n.jsxs("span",{className:"text-black font-medium",children:[A,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-black h-2 rounded-full transition-all duration-300",style:{width:`${A}%`}})})]}):n.jsx("button",{onClick:B,disabled:!r.title.trim()&&!r.files.length,className:"w-full bg-black text-white py-3 rounded-lg hover:bg-gray-800 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed font-medium",children:"Share Post"})})]})},Yne=({isOpen:r,onClose:t,postId:s,commentCount:i,onCommentAdded:a})=>{const[o,c]=ee.useState([]),[l,u]=ee.useState(!1),[d,A]=ee.useState(null),[f,p]=ee.useState(1),[m,g]=ee.useState(!0),[b,v]=ee.useState(""),[y,w]=ee.useState(null),[j,C]=ee.useState({}),[B,E]=ee.useState(!1),[_,S]=ee.useState(null),[N,O]=ee.useState(!1),k=ee.useRef(null),I=ee.useRef(null),R="http://localhost:10000";ee.useEffect(()=>{s!==_&&s&&(console.log("Post changed from",_,"to",s),c([]),p(1),g(!0),A(null),v(""),w(null),C({}),O(!1),S(s),r&&$(1,s))},[s,_,r]),ee.useEffect(()=>{r&&s&&s===_&&!N&&!l&&$(1,s)},[r,s,_,N,l]);const Q=()=>(localStorage.getItem("token"),{"Content-Type":"application/json"}),$=async(T=1,U=s)=>{if(U)try{u(!0),A(null),console.log("Loading comments for post:",U,"page:",T);const K=await fetch(`${R}/api/posts/${U}/comments?page=${T}&limit=20`,{credentials:"include",headers:Q()});if(console.log("Comments response status:",K.status),!K.ok){const H=await K.text();throw console.error("Comments API error:",K.status,H),new Error(`Failed to load comments (${K.status})`)}const z=await K.json();console.log("Comments data:",z);const M=(z.comments||[]).map(H=>({...H,replyCount:H.replyCount||0,replies:[],repliesLoaded:!1}));(U===_||U===s)&&(T===1?(c(M),O(!0)):c(H=>[...H,...M]),g(z.pagination?.hasMore||!1),p(T)),u(!1)}catch(K){console.error("Failed to load comments:",K),(U===_||U===s)&&A(K.message),u(!1)}},L=async T=>{try{console.log("=== LOADING REPLIES DEBUG ==="),console.log("Comment ID:",T),console.log("Current Post ID:",_),c(M=>M.map(H=>H._id===T?{...H,repliesLoading:!0,repliesError:!1}:H));const U=await fetch(`${R}/api/posts/comments/${T}/replies?page=1&limit=10`,{headers:Q()});if(console.log(`Response status: ${U.status}`),!U.ok){const M=await U.text();throw console.log(` Failed to load replies. Status: ${U.status}, Error: ${M}`),new Error(`Failed to load replies (${U.status}): ${M}`)}const K=await U.json();console.log("Raw API Response:",K);const z=K.replies||[];console.log("Processed replies:",z),console.log("Number of replies found:",z.length),c(M=>M.map(H=>H._id===T?{...H,replies:z,repliesLoaded:!0,repliesLoading:!1,repliesError:!1,replyCount:z.length>0?z.length:H.replyCount}:H)),C(M=>({...M,[T]:!0})),console.log("=== REPLIES LOADED SUCCESSFULLY ===")}catch(U){console.error("=== FAILED TO LOAD REPLIES ==="),console.error("Error details:",U),c(K=>K.map(z=>z._id===T?{...z,repliesError:!0,repliesLoaded:!0,repliesLoading:!1,errorMessage:U.message}:z)),C(K=>({...K,[T]:!0}))}},F=async()=>{if(!(!b.trim()||B||!_))try{E(!0),console.log("Submitting comment:",{postId:_,text:b,parentComment:y});const T=await fetch(`${R}/api/posts/${_}/comment`,{method:"POST",headers:Q(),body:JSON.stringify({text:b.trim(),parentComment:y})});if(console.log("Comment submit response status:",T.status),!T.ok){const K=await T.text();throw console.error("Comment submit error:",T.status,K),new Error("Failed to add comment")}const U=await T.json();if(console.log("Comment submit success:",U),y){c(z=>z.map(M=>M._id===y?{...M,replyCount:(M.replyCount||0)+1,replies:M.repliesLoaded?[U.comment,...M.replies||[]]:[],repliesLoaded:M.repliesLoaded||!1}:M));const K=o.find(z=>z._id===y);K&&K.repliesLoaded&&C(z=>({...z,[y]:!0}))}else c(K=>[U.comment,...K]);v(""),w(null),E(!1),a&&a(),!y&&I.current&&I.current.scrollIntoView({behavior:"smooth"})}catch(T){console.error("Failed to submit comment:",T),E(!1)}},G=async(T,U=!1,K=null)=>{try{const z=await fetch(`${R}/api/posts/comments/${T}/like`,{method:"POST",headers:Q()});if(!z.ok)throw new Error("Failed to like comment");const M=await z.json();c(U&&K?H=>H.map(Y=>Y._id===K?{...Y,replies:Y.replies?.map(ae=>ae._id===T?{...ae,isLiked:M.liked,likes:M.liked?(ae.likes||0)+1:Math.max(0,(ae.likes||0)-1)}:ae)}:Y):H=>H.map(Y=>Y._id===T?{...Y,isLiked:M.liked,likes:M.liked?(Y.likes||0)+1:Math.max(0,(Y.likes||0)-1)}:Y))}catch(z){console.error("Failed to like comment:",z)}},X=T=>{const K=Math.floor((new Date-new Date(T))/1e3);return K<60?`${K}s`:K<3600?`${Math.floor(K/60)}m`:K<86400?`${Math.floor(K/3600)}h`:K<604800?`${Math.floor(K/86400)}d`:`${Math.floor(K/604800)}w`},q=({comment:T,isReply:U=!1,parentId:K=null})=>n.jsxs("div",{className:`flex gap-3 ${U?"ml-8 mt-3":"mb-4"}`,children:[n.jsx("img",{src:T.userId?.profilePicture||"",alt:T.userId?.username,className:"w-8 h-8 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-xl rounded-2xl px-4 py-3 border border-gray-800/50",children:[n.jsx("div",{className:"font-semibold text-sm text-white",children:T.userId?.username}),n.jsx("div",{className:"text-sm text-gray-200 mt-1 break-words",children:T.text})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 px-2",children:[n.jsx("span",{className:"text-xs text-gray-400",children:X(T.createdAt)}),n.jsxs("button",{onClick:()=>G(T._id,U,K),className:`flex items-center gap-1 text-xs font-medium transition-colors ${T.isLiked?"text-red-400":"text-gray-400 hover:text-white"}`,children:[n.jsx(po,{className:`w-3 h-3 ${T.isLiked?"fill-current":""}`}),(T.likes||0)>0&&T.likes]}),!U&&n.jsx("button",{onClick:()=>{w(T._id),k.current?.focus()},className:"text-xs font-medium text-gray-400 hover:text-white transition-colors",children:"Reply"})]}),!U&&(T.replyCount||0)>0&&n.jsx("div",{className:"mt-3 pl-2",children:j[T._id]?n.jsx("div",{children:T.repliesError?n.jsxs("div",{className:"text-center py-2",children:[n.jsxs("p",{className:"text-red-400 text-xs mb-2",children:["Failed to load replies",T.errorMessage&&n.jsxs("span",{className:"block text-gray-500",children:["(",T.errorMessage,")"]})]}),n.jsx("button",{onClick:()=>{c(z=>z.map(M=>M._id===T._id?{...M,repliesError:!1,repliesLoaded:!1,repliesLoading:!1,errorMessage:null}:M)),C(z=>({...z,[T._id]:!1})),L(T._id)},className:"text-gray-300 hover:text-gray-100 text-xs font-semibold",children:"Retry"})]}):T.replies&&T.replies.length>0?n.jsxs("div",{children:[T.replies.map(z=>n.jsx(q,{comment:z,isReply:!0,parentId:T._id},z._id)),n.jsx("button",{onClick:()=>C(z=>({...z,[T._id]:!1})),className:"text-xs font-medium text-gray-400 hover:text-white transition-colors mt-2",children:"Hide replies"})]}):T.repliesLoaded?n.jsx("div",{className:"text-gray-500 text-xs py-2",children:"No replies found"}):n.jsx("div",{className:"flex justify-center py-2",children:n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-400"})})}):n.jsx("button",{onClick:()=>L(T._id),disabled:T.repliesLoading,className:"text-xs font-medium text-gray-400 hover:text-white transition-colors disabled:opacity-50",children:T.repliesLoading?"Loading...":`View ${T.replyCount} ${T.replyCount===1?"reply":"replies"}`})})]})]});return r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40",onClick:t}),n.jsxs("div",{className:"fixed top-0 right-0 h-full w-[30%] min-w-[400px] bg-black/95 backdrop-blur-xl border-l border-gray-800/50 z-50 flex flex-col shadow-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800/50",children:[n.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Comments (",i,")"]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:n.jsx(Ts,{className:"w-5 h-5 text-gray-300"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[l&&o.length===0?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):d?n.jsxs("div",{className:"text-center py-8",children:[n.jsxs("p",{className:"text-red-400 mb-4",children:["Failed to load comments: ",d]}),n.jsx("button",{onClick:()=>$(1),className:"text-gray-300 hover:text-gray-100 font-semibold",children:"Retry"})]}):o.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"No comments yet"}),n.jsx("p",{className:"text-gray-400",children:"Be the first to comment!"})]}):n.jsxs(n.Fragment,{children:[o.map(T=>n.jsx(q,{comment:T},T._id)),m&&n.jsx("div",{className:"text-center py-4",children:n.jsx("button",{onClick:()=>$(f+1),disabled:l,className:"text-gray-300 hover:text-gray-100 font-semibold disabled:opacity-50",children:l?"Loading...":"Load more comments"})})]}),n.jsx("div",{ref:I})]}),n.jsxs("div",{className:"border-t border-gray-800/50 p-4",children:[y&&n.jsxs("div",{className:"mb-3 p-3 bg-gray-900/50 rounded-xl flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm text-gray-300",children:["Replying to"," ",o.find(T=>T._id===y)?.userId?.username]}),n.jsx("button",{onClick:()=>w(null),className:"text-gray-400 hover:text-gray-200",children:n.jsx(Ts,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"flex gap-3 items-end",children:[n.jsx("img",{src:"",alt:"Your profile",className:"w-8 h-8 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("textarea",{ref:k,value:b,onChange:T=>v(T.target.value),placeholder:y?"Write a reply...":"Add a comment...",className:"w-full px-4 py-3 bg-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-2xl resize-none focus:ring-2 focus:ring-white/20 focus:border-transparent text-sm text-white placeholder-gray-400",rows:2,maxLength:2200,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),F())}}),n.jsxs("div",{className:"flex items-center justify-between mt-2 px-1",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:[b.length,"/2200"]}),n.jsxs("button",{onClick:F,disabled:!b.trim()||B,className:"flex items-center gap-2 bg-white text-black px-4 py-2 rounded-full hover:bg-gray-200 transition-colors disabled:bg-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed text-sm font-medium",children:[B?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}):n.jsx(zk,{className:"w-4 h-4"}),y?"Reply":"Post"]})]})]})]})]})]})]}):null},Xne=()=>{const[r,t]=ee.useState([]),[s,i]=ee.useState(!0),[a,o]=ee.useState(null),[c,l]=ee.useState(1),[u,d]=ee.useState(!0),[A,f]=ee.useState(!1),[p,m]=ee.useState(null),[g,b]=ee.useState({}),[v,y]=ee.useState({}),[w,j]=ee.useState({}),[C,B]=ee.useState({}),[E,_]=ee.useState({}),S=ee.useRef({}),N="http://localhost:10000";ee.useEffect(()=>{k()},[]);const O=()=>(localStorage.getItem("token"),{"Content-Type":"application/json"}),k=async()=>{try{i(!0),o(null);const Y=await fetch(`${N}/api/posts/feed?page=${c}&limit=10`,{credentials:"include",headers:O()});if(!Y.ok)throw new Error("Failed to fetch posts");const ae=await Y.json();t(c===1?ae.posts||[]:oe=>[...oe,...ae.posts||[]]),d(ae.pagination?.hasMore||!1),i(!1)}catch(Y){console.error("Failed to load posts:",Y),o(Y.message),i(!1)}},I=async Y=>{try{t(be=>be.map(ge=>ge._id===Y?{...ge,isLiked:!ge.isLiked,likes:ge.isLiked?ge.likes-1:ge.likes+1}:ge));const ae=await fetch(`${N}/api/posts/${Y}/like`,{method:"POST",headers:O()});if(!ae.ok)throw new Error("Failed to like post");const oe=await ae.json();t(be=>be.map(ge=>ge._id===Y?{...ge,isLiked:oe.liked}:ge))}catch(ae){console.error("Failed to like post:",ae),t(oe=>oe.map(be=>be._id===Y?{...be,isLiked:!be.isLiked,likes:be.isLiked?be.likes+1:be.likes-1}:be))}},R=async Y=>{try{t(ae=>ae.map(oe=>oe._id===Y._id?{...oe,shares:oe.shares+1}:oe)),navigator.share?await navigator.share({title:Y.title,text:Y.description,url:`${window.location.origin}/post/${Y._id}`}):await navigator.clipboard.writeText(`${window.location.origin}/post/${Y._id}`)}catch(ae){console.error("Failed to share post:",ae),t(oe=>oe.map(be=>be._id===Y._id?{...be,shares:be.shares-1}:be))}},Q=Y=>{const ae=S.current[Y];ae&&(ae.muted=!ae.muted)},$=Y=>{const ae=S.current[Y];ae&&(ae.paused?(ae.play(),B(oe=>({...oe,[Y]:!0}))):(ae.pause(),B(oe=>({...oe,[Y]:!1}))))},L=Y=>{m(Y),f(!0)},F=()=>{t(Y=>Y.map(ae=>ae._id===p?{...ae,comments:ae.comments+1}:ae))},G=(Y,ae)=>{const oe=r.find(be=>be._id===Y);!oe||oe.mediaUrls.length<=1||_(be=>{const ge=be[Y]||0,he=oe.mediaUrls.length-1;return ae==="next"&&ge<he?{...be,[Y]:ge+1}:ae==="prev"&&ge>0?{...be,[Y]:ge-1}:be})},X=Y=>Y>=1e6?`${(Y/1e6).toFixed(1)}M`:Y>=1e3?`${(Y/1e3).toFixed(1)}K`:Y.toString(),q=Y=>{const oe=Math.floor((new Date-new Date(Y))/1e3);return oe<60?`${oe}s`:oe<3600?`${Math.floor(oe/60)}m`:oe<86400?`${Math.floor(oe/3600)}h`:`${Math.floor(oe/86400)}d`},T=Y=>{window.open(`/product/${Y._id}`,"_blank")},U=Y=>{b(ae=>({...ae,[Y]:!1})),y(ae=>{const oe={...ae};return delete oe[Y],oe})},K=Y=>{b(ae=>({...ae,[Y]:!1})),y(ae=>({...ae,[Y]:!0}))},z=Y=>{b(ae=>({...ae,[Y]:!0}))},M=Y=>{y(oe=>{const be={...oe};return delete be[Y],be}),b(oe=>({...oe,[Y]:!0}));const ae=S.current[Y];ae&&ae.load()},H=async()=>{if(!(s||!u))try{const Y=c+1,ae=await fetch(`${N}/api/posts/feed?page=${Y}&limit=10`,{headers:O()});if(ae.ok){const oe=await ae.json();t(be=>[...be,...oe.posts||[]]),d(oe.pagination?.hasMore||!1),l(Y)}}catch(Y){console.error("Failed to load more posts:",Y)}};return s&&r.length===0?n.jsx("div",{className:"h-screen bg-black flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"relative mb-6",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-gray-400 mx-auto"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"text-white font-bold text-lg tracking-wider",children:"AIO"})})]}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Loading your feed..."})]})}):a?n.jsxs("div",{className:"h-screen bg-black flex flex-col items-center justify-center text-white",children:[n.jsx("div",{className:"text-6xl mb-6 text-gray-600",children:""}),n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-400 mb-8 text-center max-w-md",children:a}),n.jsx("button",{onClick:()=>{l(1),k()},className:"bg-white text-black px-8 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Try Again"})]}):r.length===0?n.jsxs("div",{className:"h-screen bg-black flex flex-col items-center justify-center text-white",children:[n.jsx("div",{className:"text-8xl mb-8 text-gray-600",children:""}),n.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"No posts yet"}),n.jsx("p",{className:"text-gray-400 mb-8 text-center max-w-md",children:"Be the first to share something amazing on AIO!"}),n.jsx("button",{onClick:()=>window.location.href="/create-post",className:"bg-white text-black px-8 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Create Post"})]}):n.jsxs("div",{className:"min-h-screen bg-black",children:[n.jsx("nav",{className:"sticky top-0 z-30 bg-black/90 backdrop-blur-xl border-b border-gray-800/50",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-3 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-white tracking-wider",children:"AIO"}),n.jsxs("div",{className:"hidden md:flex space-x-6",children:[n.jsx("button",{className:"text-sm font-medium text-white",children:"Following"}),n.jsx("button",{className:"text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"For You"})]})]}),n.jsx("div",{className:"flex items-center space-x-3",children:n.jsx("button",{className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:n.jsx(ic,{className:"w-5 h-5 text-white"})})})]})}),n.jsxs("div",{className:"max-w-lg mx-auto pb-20",children:[r.map(Y=>n.jsxs("div",{className:"bg-black border-b border-gray-800/30 mb-6",children:[n.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("img",{src:Y.user?.profilePicture||"",alt:Y.user?.username,className:"w-8 h-8 rounded-full object-cover ring-1 ring-gray-700"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h3",{className:"font-semibold text-white text-sm",children:Y.user?.username}),n.jsx("span",{className:"text-gray-500 text-xs",children:""}),n.jsx("span",{className:"text-gray-500 text-xs",children:q(Y.createdAt)})]}),Y.views&&n.jsxs("p",{className:"text-xs text-gray-400 flex items-center mt-0.5",children:[n.jsx(Gn,{className:"w-2.5 h-2.5 mr-1"}),X(Y.views)," views"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("button",{className:"p-2 hover:bg-white/5 rounded-full transition-colors",children:n.jsx(Kk,{className:"w-4 h-4 text-white"})}),n.jsx("button",{className:"p-2 hover:bg-white/5 rounded-full transition-colors",children:n.jsx(fR,{className:"w-4 h-4 text-white"})})]})]}),(Y.title||Y.description||Y.hashtags&&Y.hashtags.length>0)&&n.jsxs("div",{className:"px-4 pb-3",children:[Y.title&&n.jsx("h2",{className:"text-sm font-medium text-white mb-1",children:Y.title}),Y.description&&n.jsx("p",{className:"text-sm text-white mb-2",children:Y.description}),Y.hashtags&&Y.hashtags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1",children:Y.hashtags.map((ae,oe)=>n.jsxs("span",{className:"text-blue-400 text-sm",children:["#",ae]},oe))})]}),n.jsxs("div",{className:"relative bg-black",children:[(g[Y._id]||v[Y._id])&&n.jsx("div",{className:"absolute inset-0 bg-gray-900 flex items-center justify-center z-20",children:v[Y._id]?n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:""}),n.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Failed to load media"}),n.jsxs("button",{onClick:()=>M(Y._id),className:"flex items-center gap-2 bg-white text-black px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors mx-auto",children:[n.jsx(Vk,{className:"w-4 h-4"}),"Retry"]})]}):n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Loading..."})]})}),Y.mediaType==="video"?n.jsxs("div",{className:"relative w-full aspect-square",children:[n.jsx("video",{ref:ae=>{ae&&(S.current[Y._id]=ae)},src:Y.mediaUrls[0],className:"w-full h-full object-cover",loop:!0,muted:!0,playsInline:!0,onLoadStart:()=>z(Y._id),onLoadedData:()=>U(Y._id),onError:()=>K(Y._id),onCanPlay:()=>U(Y._id)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:n.jsx("button",{onClick:()=>$(Y._id),className:"bg-black/50 backdrop-blur-sm rounded-full p-4 hover:bg-black/70 transition-colors",children:C[Y._id]?n.jsx(zv,{className:"w-8 h-8 text-white"}):n.jsx(Kv,{className:"w-8 h-8 text-white ml-1"})})}),n.jsx("div",{className:"absolute top-4 right-4",children:n.jsx("button",{onClick:()=>Q(Y._id),className:"bg-black/50 backdrop-blur-sm rounded-full p-2 hover:bg-black/70 transition-colors",children:S.current[Y._id]?.muted!==!1?n.jsx(TR,{className:"w-5 h-5 text-white"}):n.jsx(PR,{className:"w-5 h-5 text-white"})})})]}):Y.mediaUrls?.length===1?n.jsx("div",{className:"relative w-full aspect-square",children:n.jsx("img",{src:Y.mediaUrls[0],alt:Y.title,className:"w-full h-full object-cover",onLoad:()=>U(Y._id),onError:()=>K(Y._id)})}):n.jsxs("div",{className:"relative w-full aspect-square",children:[n.jsx("div",{className:"w-full h-full overflow-hidden",children:n.jsx("div",{className:"flex h-full transition-transform duration-300",style:{transform:`translateX(-${(E[Y._id]||0)*100}%)`},children:Y.mediaUrls?.map((ae,oe)=>n.jsx("div",{className:"w-full h-full flex-shrink-0",children:n.jsx("img",{src:ae,alt:`${Y.title} - ${oe+1}`,className:"w-full h-full object-cover",onLoad:()=>U(Y._id),onError:()=>K(Y._id)})},oe))})}),Y.mediaUrls?.length>1&&n.jsxs(n.Fragment,{children:[(E[Y._id]||0)>0&&n.jsx("button",{onClick:()=>G(Y._id,"prev"),className:"absolute left-3 top-1/2 transform -translate-y-1/2 bg-black/60 backdrop-blur-sm rounded-full p-2 hover:bg-black/80 transition-colors z-10",children:n.jsx(oA,{className:"w-5 h-5 text-white"})}),(E[Y._id]||0)<Y.mediaUrls.length-1&&n.jsx("button",{onClick:()=>G(Y._id,"next"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 bg-black/60 backdrop-blur-sm rounded-full p-2 hover:bg-black/80 transition-colors z-10",children:n.jsx(Jl,{className:"w-5 h-5 text-white"})}),n.jsx("div",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2 flex space-x-1.5 z-10",children:Y.mediaUrls.map((ae,oe)=>n.jsx("button",{onClick:()=>_(be=>({...be,[Y._id]:oe})),className:`w-1.5 h-1.5 rounded-full transition-all ${oe===(E[Y._id]||0)?"bg-white":"bg-white/50"}`},oe))}),n.jsx("div",{className:"absolute top-3 right-3 bg-black/60 backdrop-blur-sm rounded-full px-2 py-1 z-10",children:n.jsxs("span",{className:"text-white text-xs font-medium",children:[(E[Y._id]||0)+1,"/",Y.mediaUrls.length]})})]})]})]}),n.jsxs("div",{className:"px-4 py-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>I(Y._id),className:"group",children:n.jsx(po,{className:`w-6 h-6 transition-all group-hover:scale-110 group-active:scale-95 ${Y.isLiked?"text-red-500 fill-red-500":"text-white group-hover:text-red-400"}`})}),n.jsx("button",{onClick:()=>L(Y._id),className:"group",children:n.jsx(Ku,{className:"w-6 h-6 text-white group-hover:scale-110 group-active:scale-95 transition-transform"})}),n.jsx("button",{onClick:()=>R(Y),className:"group",children:n.jsx(tA,{className:"w-6 h-6 text-white group-hover:scale-110 group-active:scale-95 transition-transform"})})]}),n.jsx("button",{className:"group",children:n.jsx(YM,{className:"w-6 h-6 text-white group-hover:scale-110 group-active:scale-95 transition-transform"})})]}),n.jsxs("div",{className:"space-y-1",children:[Y.likes&&Y.likes>0&&n.jsxs("p",{className:"text-white font-semibold text-sm",children:[X(Y.likes)," ",Y.likes===1?"like":"likes"]}),Y.comments&&Y.comments>0&&n.jsxs("button",{onClick:()=>L(Y._id),className:"text-gray-400 text-sm hover:text-white transition-colors block",children:["View all ",X(Y.comments)," comments"]})]}),Y.taggedProducts&&Y.taggedProducts.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("button",{onClick:()=>j(ae=>({...ae,[Y._id]:!ae[Y._id]})),className:"flex items-center space-x-2 bg-gray-900/30 backdrop-blur-sm rounded-lg px-3 py-2 hover:bg-gray-800/30 transition-colors border border-gray-700/30",children:[n.jsx(sd,{className:"w-4 h-4 text-white"}),n.jsxs("span",{className:"text-white text-sm font-medium",children:[Y.taggedProducts.length," Product",Y.taggedProducts.length>1?"s":""]})]}),w[Y._id]&&n.jsx("div",{className:"mt-3 space-y-2",children:Y.taggedProducts.map(ae=>n.jsx("button",{onClick:()=>T(ae),className:"w-full bg-gray-900/30 backdrop-blur-sm rounded-lg p-3 border border-gray-700/30 hover:bg-gray-800/30 transition-colors text-left",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("img",{src:ae.image,alt:ae.name,className:"w-10 h-10 rounded-lg object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-white font-medium text-sm",children:ae.name}),n.jsx("p",{className:"text-gray-300 font-semibold text-sm",children:ae.price})]})]})},ae._id))})]})]})]},Y._id)),u&&n.jsx("div",{className:"p-4 text-center",children:n.jsx("button",{onClick:H,disabled:s,className:"bg-gray-900/50 backdrop-blur-xl text-white px-6 py-3 rounded-xl hover:bg-gray-800/50 transition-colors border border-gray-700/50 disabled:opacity-50",children:s?"Loading...":"Load more posts"})})]}),n.jsx(Yne,{isOpen:A,onClose:()=>f(!1),postId:p,commentCount:r.find(Y=>Y._id===p)?.comments||0,onCommentAdded:F})]})},Jne=(r,t)=>{const[s,i]=ee.useState(r);return ee.useEffect(()=>{const a=setTimeout(()=>{i(r)},t);return()=>{clearTimeout(a)}},[r,t]),s},Zne=(r,t={})=>{const s=ee.useRef(null);return ee.useEffect(()=>{const i=new IntersectionObserver(r,{threshold:.1,rootMargin:"100px",...t}),a=s.current;return a&&i.observe(a),()=>{a&&i.unobserve(a)}},[r,t]),s},ese=()=>{const[r]=ry(),t=bl(),[s,i]=ee.useState([]),[a,o]=ee.useState(!0),[c,l]=ee.useState(!1),[u,d]=ee.useState(""),[A,f]=ee.useState([]),[p,m]=ee.useState(1),[g,b]=ee.useState(0),[v,y]=ee.useState(!0),w=20,[j,C]=ee.useState({search:"",category:"",subcategory:"",childCategory:"",priceRange:{min:"",max:""},stock:"",rating:"",shipping:"",condition:"",warrantyMonths:""}),[B,E]=ee.useState(!1),[_,S]=ee.useState(!1),N=ee.useRef(!1),[O,k]=ee.useState(null),[I,R]=ee.useState(!1),Q=Jne(j,_?300:0);(A.find(H=>H.name===j.category)?.subcategories||[]).find(H=>H.name===j.subcategory)?.childCategories,ee.useEffect(()=>{if(N.current)return;const H=r.get("search"),Y=r.get("category");console.log("=== INITIALIZING FROM URL ==="),console.log("Current URL:",t.pathname+t.search),console.log("Search from URL:",H),console.log("Category from URL:",Y),console.log("All URL params:",Object.fromEntries(r.entries()));const ae={search:H||"",category:Y||"",subcategory:"",childCategory:"",priceRange:{min:"",max:""},stock:"",rating:"",shipping:"",condition:"",warrantyMonths:""};console.log("Setting initial filters:",ae),C(ae),N.current=!0,F(ae,1,!1).then(()=>{S(!0)})},[]);const F=async(H={},Y=1,ae=!1)=>{try{ae?l(!0):(o(!0),i([])),d(""),console.log("Fetching products with filters:",H,"Page:",Y);const oe={search:H.search||"",category:H.category||"",subcategory:H.subcategory||"",childCategory:H.childCategory||"",minPrice:H.priceRange?.min||"",maxPrice:H.priceRange?.max||"",stock:H.stock||"",rating:H.rating||"",shipping:H.shipping||"",condition:H.condition||"",warrantyMonths:H.warrantyMonths||"",page:Y,limit:w},be=await fetch("http://localhost:10000/api/products/sale-listing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)});if(be.ok){const ge=await be.json();console.log("Products fetched:",ge.products.length,"items","Total:",ge.total),i(ae?he=>[...he,...ge.products]:ge.products),b(ge.total),y(ge.products.length===w&&ge.hasMore),m(Y)}else d("Failed to fetch products"),console.error("API Error:",be.status,be.statusText)}catch(oe){console.error("Error fetching products:",oe),d("Network error. Please try again.")}finally{o(!1),l(!1)}},G=ee.useCallback(()=>{if(!c&&v&&!a){const H=p+1;F(Q,H,!0)}},[c,v,a,p,Q]),X=Zne(ee.useCallback(H=>{const[Y]=H;Y.isIntersecting&&G()},[G]));ee.useEffect(()=>{_&&N.current&&(console.log("Filter changed after initialization:",Q),m(1),F(Q,1,!1))},[Q,_]);const q=async()=>{try{const H=await fetch("http://localhost:10000/api/categories");if(!H.ok)throw new Error("Failed to fetch categories");const Y=await H.json();f(Y)}catch(H){console.error("Error loading categories:",H)}};ee.useEffect(()=>{q(),T()},[]);const T=async()=>{try{const H=await fetch("http://localhost:10000/api/flash-deals/current");if(H.ok){const Y=await H.json();Y.success&&(k(Y.data),R(!0))}else R(!1)}catch(H){console.error("Error fetching flash deal:",H),R(!1)}};ee.useCallback((H,Y)=>{C(ae=>{const oe={...ae,[H]:Y};return H==="category"?(oe.subcategory="",oe.childCategory=""):H==="subcategory"&&(oe.childCategory=""),oe})},[]),ee.useCallback(H=>{C(Y=>({...Y,...H}))},[]);const U=ee.useCallback(()=>{C({search:"",category:"",subcategory:"",childCategory:"",priceRange:{min:"",max:""},stock:"",rating:"",shipping:"",condition:"",warrantyMonths:""})},[]),K=!!(j.search||j.category||j.subcategory||j.childCategory||j.priceRange.min||j.priceRange.max||j.stock||j.rating||j.shipping||j.condition||j.warrantyMonths);[j.search,j.category,j.subcategory,j.childCategory,j.priceRange.min,j.priceRange.max,j.stock,j.rating,j.shipping,j.condition,j.warrantyMonths].filter(Boolean).length;const M=(()=>{if(!O)return null;const{timeRemaining:H,saleStatus:Y}=O;return Y==="upcoming"?{saleStartsInHours:H.hours,saleStartsInMinutes:H.minutes,saleStartsInSeconds:H.seconds,saleEndsInHours:0,saleEndsInMinutes:0,saleEndsInSeconds:0,timerLabel:O.timerLabel}:{saleStartsInHours:0,saleStartsInMinutes:0,saleStartsInSeconds:0,saleEndsInHours:H.hours,saleEndsInMinutes:H.minutes,saleEndsInSeconds:H.seconds,timerLabel:"Sale Ends In:"}})();return s.length>0,s.length,n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I&&O&&M&&n.jsx("section",{className:"py-0 bg-white",children:n.jsx(e_,{...M,saleName:O.saleName,saleSubtitle:O.saleSubtitle,discountText:O.discountText,buttonText:O.buttonText,backgroundColor:O.backgroundColor,backgroundImage:O.backgroundImage,textColor:O.textColor,accentColor:O.accentColor,heroImage:O.heroImage,showHeroImage:O.showHeroImage,onPage:!0})}),s&&n.jsx(z1,{items:s,loading:a,error:u,type:"product"}),!a&&s.length>0&&n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:v?n.jsx("div",{ref:X,className:"flex flex-col items-center justify-center py-12 space-y-6",children:c?n.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-black rounded-full animate-spin"}),n.jsx("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent border-r-gray-400 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 font-medium",children:"Loading more products..."}),n.jsx("p",{className:"text-sm text-gray-400",children:"Finding the perfect items for you"})]})]}):n.jsxs("button",{onClick:G,className:"group relative overflow-hidden bg-gradient-to-r from-gray-900 to-black text-white px-8 py-4 rounded-full font-semibold text-lg shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ease-out",children:[n.jsxs("span",{className:"relative z-10 flex items-center space-x-2",children:[n.jsx("span",{children:"Load More Products"}),n.jsx(Qp,{className:"w-5 h-5 group-hover:animate-bounce"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black to-gray-800 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[n.jsx("div",{className:"w-16 h-16 bg-black rounded-full flex items-center justify-center shadow-lg",children:n.jsx(qu,{className:"w-8 h-8 text-white"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"You've seen it all! "}),n.jsx("p",{className:"text-gray-600 max-w-md",children:"That's every product we have matching your criteria. Try adjusting your filters to discover more amazing items."})]})]})}),!a&&s.length===0&&!u&&n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:n.jsxs("div",{className:"text-center space-y-6",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex items-center justify-center mx-auto shadow-lg",children:n.jsx(Ca,{className:"w-12 h-12 text-gray-500"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No products found"}),n.jsx("p",{className:"text-gray-600 max-w-md mx-auto mb-6",children:"We couldn't find any products matching your search criteria. Try adjusting your filters or search terms."}),K&&n.jsxs("button",{onClick:U,className:"inline-flex items-center space-x-2 bg-black text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors",children:[n.jsx(Ts,{className:"w-4 h-4"}),n.jsx("span",{children:"Clear All Filters"})]})]})]})})]})},tse=()=>{const r=yi(),{user:t}=Fn(),{wishlistItems:s,isLoading:i,removeFromWishlist:a,updateItemPriority:o,updateItemNotes:c,moveToCart:l,getItemsByFilter:u,getStats:d}=ay(),{addToOrder:A,addToBooking:f}=ac(),[p,m]=ee.useState("grid"),[g,b]=ee.useState("all"),[v,y]=ee.useState("all"),[w,j]=ee.useState("newest"),[C,B]=ee.useState(""),[E,_]=ee.useState(!1),[S,N]=ee.useState(null),[O,k]=ee.useState("");ee.useEffect(()=>{t&&t.role!=="customer"&&r("/")},[t,r]);const R=(()=>{let q=[...s];return g!=="all"&&(q=q.filter(T=>T.itemType===g)),v!=="all"&&(q=q.filter(T=>T.priority===v)),C&&(q=q.filter(T=>T.title?.toLowerCase().includes(C.toLowerCase())||T.description?.toLowerCase().includes(C.toLowerCase())||T.storeName?.toLowerCase().includes(C.toLowerCase()))),q.sort((T,U)=>{switch(w){case"newest":return new Date(U.addedAt)-new Date(T.addedAt);case"oldest":return new Date(T.addedAt)-new Date(U.addedAt);case"price-high":return U.price-T.price;case"price-low":return T.price-U.price;case"priority":const K={high:3,medium:2,low:1};return K[U.priority]-K[T.priority];case"name":return T.title?.localeCompare(U.title)||0;default:return 0}}),q})(),Q=d(),$=async q=>{try{q.itemType==="product"?await A({_id:q.itemId,title:q.title,price:q.price,images:[q.image],storeId:q.storeId},1):await f({_id:q.itemId,title:q.title,price:q.price,images:[q.image],storeId:q.storeId},{date:"",time:"",notes:""})}catch(T){console.error("Failed to add to cart:",T)}},L=q=>{N(q._id),k(q.notes||"")},F=async()=>{S&&(await c(S,O),N(null),k(""))},G=()=>{N(null),k("")},X=q=>{switch(q){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return t?i?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-black"})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[n.jsxs("div",{className:"mb-4 lg:mb-0",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx(po,{className:"w-8 h-8 text-red-500 fill-current"}),"My Wishlist"]}),n.jsxs("p",{className:"text-gray-600 mt-2",children:[Q.totalItems," item",Q.totalItems!==1?"s":""," saved",Q.totalValue>0&&n.jsxs("span",{className:"ml-2 text-gray-500",children:[" Total value: ",Br(Q.totalValue)]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ps,{className:"w-5 h-5 text-blue-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Products"}),n.jsx("p",{className:"font-bold text-gray-900",children:Q.productCount})]})]})}),n.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ms,{className:"w-5 h-5 text-green-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Services"}),n.jsx("p",{className:"font-bold text-gray-900",children:Q.serviceCount})]})]})}),n.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(mn,{className:"w-5 h-5 text-red-500 fill-current"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"High Priority"}),n.jsx("p",{className:"font-bold text-gray-900",children:Q.highPriorityCount})]})]})})]})]})}),s.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx(po,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your wishlist is empty"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"Start adding items you love to keep track of them"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsx(Zt,{to:"/products",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors",children:"Browse Products"}),n.jsx(Zt,{to:"/services",className:"bg-white border-2 border-black text-black px-6 py-3 rounded-lg hover:bg-black hover:text-white transition-colors",children:"Browse Services"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"Search wishlist items...",value:C,onChange:q=>B(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>_(!E),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(lA,{className:"w-4 h-4"}),"Filters"]}),n.jsxs("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[n.jsx("button",{onClick:()=>m("grid"),className:`p-2 ${p==="grid"?"bg-black text-white":"bg-white text-gray-600 hover:bg-gray-50"} transition-colors`,children:n.jsx(iR,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>m("list"),className:`p-2 ${p==="list"?"bg-black text-white":"bg-white text-gray-600 hover:bg-gray-50"} transition-colors`,children:n.jsx(cR,{className:"w-4 h-4"})})]})]})]}),E&&n.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Type"}),n.jsxs("select",{value:g,onChange:q=>b(q.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Items"}),n.jsx("option",{value:"product",children:"Products"}),n.jsx("option",{value:"service",children:"Services"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsxs("select",{value:v,onChange:q=>y(q.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Priorities"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"low",children:"Low"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),n.jsxs("select",{value:w,onChange:q=>j(q.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",children:[n.jsx("option",{value:"newest",children:"Newest First"}),n.jsx("option",{value:"oldest",children:"Oldest First"}),n.jsx("option",{value:"price-high",children:"Price: High to Low"}),n.jsx("option",{value:"price-low",children:"Price: Low to High"}),n.jsx("option",{value:"priority",children:"Priority"}),n.jsx("option",{value:"name",children:"Name"})]})]})]})})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("p",{className:"text-gray-600",children:["Showing ",R.length," of ",s.length," items"]})}),p==="grid"?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:R.map(q=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Zt,{to:`/${q.itemType}/${q.itemId}`,children:n.jsx("img",{src:q.image||(q.itemType==="product"?"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop":"https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400&h=300&fit=crop"),alt:q.title,className:"w-full h-48 object-cover rounded-t-lg"})}),n.jsx("div",{className:"absolute top-2 left-2",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${X(q.priority)}`,children:q.priority})}),n.jsx("button",{onClick:()=>a(q._id),className:"absolute top-2 right-2 p-2 bg-white/90 hover:bg-white rounded-full shadow-sm hover:shadow-md transition-all",children:n.jsx(Rc,{className:"w-4 h-4 text-red-500"})})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[n.jsx(Mc,{className:"w-3 h-3 text-gray-400"}),n.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:q.itemType})]}),n.jsx(Zt,{to:`/${q.itemType}/${q.itemId}`,children:n.jsx("h3",{className:"font-semibold text-gray-900 mb-1 line-clamp-2 hover:text-gray-700 transition-colors",children:q.title})}),n.jsx("p",{className:"text-lg font-bold text-gray-900 mb-2",children:Br(q.price)}),q.storeName&&n.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[n.jsx(ei,{className:"w-3 h-3 text-gray-400"}),n.jsx("span",{className:"text-xs text-gray-500",children:q.storeName})]}),n.jsx("div",{className:"flex items-center gap-2 mb-3",children:n.jsxs("select",{value:q.priority,onChange:T=>o(q._id,T.target.value),className:"text-xs border border-gray-200 rounded px-2 py-1 bg-white",children:[n.jsx("option",{value:"low",children:"Low"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"high",children:"High"})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>q.itemType==="service"?window.location.href=`/service/${q.itemId}`:$(q),className:"flex-1 bg-black text-white py-2 px-3 rounded text-sm font-medium hover:bg-gray-800 transition-colors flex items-center justify-center gap-1",children:q.itemType==="service"?n.jsxs(n.Fragment,{children:[n.jsx(Gn,{className:"w-3 h-3"}),"View Service"]}):n.jsxs(n.Fragment,{children:[n.jsx(yl,{className:"w-3 h-3"}),"Add to Cart"]})}),n.jsx(Zt,{to:`/${q.itemType}/${q.itemId}`,className:"p-2 border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:n.jsx($v,{className:"w-3 h-3"})})]})]})]},q._id))}):n.jsx("div",{className:"space-y-4",children:R.map(q=>n.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(Zt,{to:`/${q.itemType}/${q.itemId}`,children:n.jsx("img",{src:q.image||(q.itemType==="product"?"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop":"https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400&h=300&fit=crop"),alt:q.title,className:"w-24 h-24 object-cover rounded-lg"})}),n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${X(q.priority)}`,children:q.priority}),n.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:q.itemType})]}),n.jsx(Zt,{to:`/${q.itemType}/${q.itemId}`,children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1 hover:text-gray-700 transition-colors",children:q.title})}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[n.jsx("span",{className:"font-semibold text-gray-900 text-lg",children:Br(q.price)}),q.storeName&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(ei,{className:"w-3 h-3"}),q.storeName]}),n.jsxs("span",{children:["Added ",new Date(q.addedAt).toLocaleDateString()]})]}),S===q._id?n.jsxs("div",{className:"mt-3",children:[n.jsx("textarea",{value:O,onChange:T=>k(T.target.value),placeholder:"Add notes about this item...",className:"w-full p-2 border border-gray-300 rounded text-sm",rows:"2"}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx("button",{onClick:F,className:"bg-black text-white px-3 py-1 rounded text-xs hover:bg-gray-800 transition-colors",children:"Save"}),n.jsx("button",{onClick:G,className:"bg-gray-200 text-gray-700 px-3 py-1 rounded text-xs hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}):n.jsxs("div",{className:"mt-3",children:[q.notes?n.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:q.notes}):n.jsx("button",{onClick:()=>L(q),className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"+ Add notes"}),q.notes&&n.jsx("button",{onClick:()=>L(q),className:"text-xs text-gray-400 hover:text-gray-600 transition-colors ml-2",children:"Edit"})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("select",{value:q.priority,onChange:T=>o(q._id,T.target.value),className:"text-xs border border-gray-200 rounded px-2 py-1 bg-white",children:[n.jsx("option",{value:"low",children:"Low"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"high",children:"High"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>q.itemType==="service"?window.location.href=`/service/${q.itemId}`:$(q),className:"bg-black text-white py-2 px-4 rounded text-sm font-medium hover:bg-gray-800 transition-colors flex items-center gap-1",children:q.itemType==="service"?n.jsxs(n.Fragment,{children:[n.jsx(Gn,{className:"w-3 h-3"}),"View Service"]}):n.jsxs(n.Fragment,{children:[n.jsx(yl,{className:"w-3 h-3"}),"Add to Cart"]})}),n.jsx(Zt,{to:`/${q.itemType}/${q.itemId}`,className:"p-2 border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:n.jsx($v,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>a(q._id),className:"p-2 border border-red-200 text-red-500 rounded hover:bg-red-50 transition-colors",children:n.jsx(Rc,{className:"w-4 h-4"})})]})]})]})})]})},q._id))}),R.length===0&&C&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx(Ca,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No items found"}),n.jsx("p",{className:"text-gray-600",children:"Try adjusting your search terms or filters"})]})]})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(po,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Sign in to view your wishlist"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"Keep track of items you love by creating an account"}),n.jsx(Zt,{to:"/login",className:"bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors",children:"Sign In"})]})})},zB={same_province:{standard:{min:1,max:2},express:{min:1,max:1}},different_province:{standard:{min:3,max:5},express:{min:2,max:3}}},rse={Western:["Colombo","Gampaha","Kalutara"],Central:["Kandy","Matale","Nuwara Eliya"],Southern:["Galle","Matara","Hambantota"],Northern:["Jaffna","Kilinochchi","Mannar","Mullaitivu","Vavuniya"],Eastern:["Ampara","Batticaloa","Trincomalee"],"North Western":["Kurunegala","Puttalam"],"North Central":["Anuradhapura","Polonnaruwa"],Uva:["Badulla","Monaragala"],Sabaragamuwa:["Ratnapura","Kegalle"]},WI=({customerProvince:r="Western",storeProvince:t="Western",shippingMethod:s="standard",hasPreorderItems:i=!1,storeProcessingDays:a=0})=>{try{const o=r===t,l=zB[o?"same_province":"different_province"][s]||zB.different_province.standard;let u=a;i&&(u+=2);const d=l.min+u,A=l.max+u,f=Pf(new Date,d),p=Pf(new Date,A);return{minDays:d,maxDays:A,estimatedMinDate:f,estimatedMaxDate:p,deliveryRange:KB(f,p),shippingMethod:s,isSameProvince:o,hasPreorderItems:i,additionalProcessingDays:u}}catch(o){console.error("Error calculating delivery estimate:",o);const c=Pf(new Date,5);return{minDays:3,maxDays:5,estimatedMinDate:Pf(new Date,3),estimatedMaxDate:c,deliveryRange:KB(Pf(new Date,3),c),shippingMethod:"standard",isSameProvince:!1,hasPreorderItems:!1,additionalProcessingDays:0,error:"Using fallback estimate"}}},Pf=(r,t)=>{const s=new Date(r);let i=t;for(;i>0;)s.setDate(s.getDate()+1),s.getDay()!==0&&s.getDay()!==6&&i--;return s},KB=(r,t)=>{const s={weekday:"short",year:"numeric",month:"short",day:"numeric"},i=r.toLocaleDateString("en-US",s),a=t.toLocaleDateString("en-US",s);return r.toDateString()===t.toDateString()?`Expected by ${i}`:`Expected between ${i} - ${a}`},qI=r=>{if(!r)return"Delivery estimate unavailable";const{deliveryRange:t,shippingMethod:s,isSameProvince:i,hasPreorderItems:a}=r;let o=t;return a&&(o+=" (includes preorder processing time)"),s==="express"&&(o+=" - Express Delivery"),o},nse=(r=[])=>r.some(t=>t.productId?.isPreorder||t.isPreorder===!0),sse=(r="")=>{if(!r)return"Western";for(const[t,s]of Object.entries(rse))if(s.some(i=>i.toLowerCase().includes(r.toLowerCase())))return t;return"Western"},ise=({data:r,type:t="order"})=>{const[s,i]=ee.useState(!1);if(!r)return null;const a=t==="order",o=r.combinedId||r._id,c=o.slice(-8).toUpperCase(),l=()=>{navigator.clipboard.writeText(o).then(()=>{i(!0),setTimeout(()=>i(!1),2e3)}).catch(()=>{const p=document.createElement("textarea");p.value=o,document.body.appendChild(p),p.select(),document.execCommand("copy"),document.body.removeChild(p),i(!0),setTimeout(()=>i(!1),2e3)})};let u=null;if(a&&r.shippingAddress){const p=sse(r.shippingAddress.state),m=r.storeId?.province||"Western",g=nse(r.items);u=WI({customerProvince:p,storeProvince:m,shippingMethod:"standard",hasPreorderItems:g,storeProcessingDays:1})}const d=p=>new Date(p).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=p=>{switch(p){case"payhere":return"PayHere (Online Payment)";case"bank_transfer":return"Bank Transfer";case"cod":return"Cash on Delivery";default:return p||"Unknown"}},f=p=>{switch(p?.toLowerCase()){case"pending":return"text-yellow-600 bg-yellow-100";case"confirmed":return"text-blue-600 bg-blue-100";case"processing":return"text-purple-600 bg-purple-100";case"shipped":return"text-indigo-600 bg-indigo-100";case"delivered":return"text-green-600 bg-green-100";case"completed":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:n.jsx(Xr,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a?"Order Confirmed!":"Booking Confirmed!"}),n.jsxs("p",{className:"text-gray-600",children:["Your ",a?"order":"booking"," has been successfully processed"]})]})]}),n.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${f(r.status)}`,children:r.status?.charAt(0).toUpperCase()+r.status?.slice(1)})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600",children:[a?"Order":"Booking"," ID"]}),n.jsxs("p",{className:"text-lg font-mono font-semibold text-gray-900",children:["#",c]})]}),n.jsx("button",{onClick:l,className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Xa,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-green-600",children:"Copied!"})]}):n.jsxs(n.Fragment,{children:[n.jsx(M1,{className:"w-4 h-4"}),n.jsx("span",{children:"Copy ID"})]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:a?"Order Items":"Service Details"}),a?n.jsx("div",{className:"space-y-4",children:r.items?.map((p,m)=>n.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("img",{src:p.productId?.images?.[0]?.startsWith("http")?p.productId.images[0]:p.productId?.images?.[0]?`http://localhost:10000${p.productId.images[0]}`:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",alt:p.productId?.title||"Product",className:"w-16 h-16 object-cover rounded-lg"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:p.productId?.title||"Product"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",p.quantity]}),p.productId?.isPreorder&&n.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded mt-1",children:"Preorder"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:Br(p.price*p.quantity)}),n.jsxs("p",{className:"text-sm text-gray-600",children:[Br(p.price)," each"]})]})]},m))}):n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("img",{src:r.serviceId?.images?.[0]?.startsWith("http")?r.serviceId.images[0]:r.serviceId?.images?.[0]?`http://localhost:10000${r.serviceId.images[0]}`:"https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400&h=300&fit=crop",alt:r.serviceId?.title||"Service",className:"w-16 h-16 object-cover rounded-lg"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:r.serviceId?.title||"Service"}),n.jsxs("div",{className:"mt-2 space-y-1",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(ms,{className:"w-4 h-4 mr-2"}),r.bookingDetails?.date?d(r.bookingDetails.date):"Date TBD"]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(is,{className:"w-4 h-4 mr-2"}),r.bookingDetails?.startTime&&r.bookingDetails?.endTime?`${r.bookingDetails.startTime} - ${r.bookingDetails.endTime}`:"Time TBD"]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:"font-semibold text-gray-900",children:Br(r.totalAmount)})})]})})]}),a?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delivery Information"}),u&&n.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx(Hu,{className:"w-5 h-5 text-blue-600"}),n.jsx("h4",{className:"font-medium text-blue-900",children:"Estimated Delivery"})]}),n.jsx("p",{className:"text-blue-800 font-medium",children:qI(u)}),u.hasPreorderItems&&n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:" Extra processing time included for preorder items"})]}),r.shippingAddress&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-gray-900 font-medium",children:[n.jsx(wl,{className:"w-4 h-4"}),n.jsx("span",{children:"Shipping Address"})]}),n.jsxs("div",{className:"pl-6 text-gray-600",children:[n.jsx("p",{children:r.shippingAddress.street}),n.jsxs("p",{children:[r.shippingAddress.city,", ",r.shippingAddress.state," ",r.shippingAddress.zipCode]}),n.jsx("p",{children:r.shippingAddress.country})]})]})]}):n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2 text-gray-900 font-medium",children:[n.jsx(ms,{className:"w-4 h-4"}),n.jsx("span",{children:"Appointment Details"})]}),n.jsxs("div",{className:"pl-6 text-gray-600",children:[n.jsxs("p",{children:["Date: ",r.bookingDetails?.date?d(r.bookingDetails.date):"To be confirmed"]}),n.jsxs("p",{children:["Time: ",r.bookingDetails?.startTime&&r.bookingDetails?.endTime?`${r.bookingDetails.startTime} - ${r.bookingDetails.endTime}`:"To be confirmed"]})]})]})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Store Information"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ei,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"font-medium",children:r.storeId?.name||"Store Name"})]}),r.storeId?.contactInfo?.email&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(vl,{className:"w-4 h-4 text-gray-600"}),n.jsx("a",{href:`mailto:${r.storeId.contactInfo.email}`,className:"text-blue-600 hover:text-blue-800",children:r.storeId.contactInfo.email})]}),r.storeId?.contactInfo?.phone&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Gu,{className:"w-4 h-4 text-gray-600"}),n.jsx("a",{href:`tel:${r.storeId.contactInfo.phone}`,className:"text-blue-600 hover:text-blue-800",children:r.storeId.contactInfo.phone})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsx("span",{children:Br(r.storeAmount||r.totalAmount)})]}),r.platformFee&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Platform Fee:"}),n.jsx("span",{children:Br(r.platformFee)})]}),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Br(r.totalAmount)})]})}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(gl,{className:"w-4 h-4"}),n.jsx("span",{children:A(r.paymentDetails?.paymentMethod)})]}),n.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${r.paymentDetails?.paymentStatus==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:r.paymentDetails?.paymentStatus==="paid"?" Paid":"Payment Pending"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs(Zt,{to:`/receipt/${r._id}?type=${t}`,className:"flex items-center justify-center space-x-2 p-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:[n.jsx($1,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"View Receipt"})]}),n.jsxs(Zt,{to:a?"/orders":"/bookings",className:"flex items-center justify-center space-x-2 p-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(ps,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm",children:["Track ",a?"Order":"Booking"]})]}),r.storeId?.contactInfo?.phone&&n.jsxs("a",{href:`https://wa.me/${r.storeId.contactInfo.phone.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 p-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(Gu,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Contact Store"})]}),n.jsxs(Zt,{to:"/",className:"flex items-center justify-center space-x-2 p-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx(ps,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Continue Shopping"})]})]})]})]})},ase=({purchaseData:r,type:t="order",className:s=""})=>{const[i,a]=ee.useState(!1),[o,c]=ee.useState({});if(!r)return null;const l=m=>{const g=t==="order",b=g?r.items?.length===1?r.items[0].productId?.title||"product":`${r.items?.length||0} items`:r.serviceId?.title||"service",v=r.storeId?.name||"AIO Cart",y=Br(r.totalAmount),w={text:`Just ${g?"ordered":"booked"} ${b} from ${v} on AIO Cart! `,hashtags:["AIOCart","OnlineShopping","SriLanka",v.replace(/\s+/g,"")],url:window.location.origin};switch(m){case"facebook":return{...w,text:`${w.text} Total: ${y}. Check out AIO Cart for amazing deals! #AIOCart #Shopping`};case"instagram":return{...w,text:`${w.text}  Amazing shopping experience! #${w.hashtags.join(" #")}`};case"whatsapp":return{...w,text:` ${w.text}
 Total: ${y}
 Shop at: ${w.url}

Great deals await you on AIO Cart!`};case"copy":return{...w,text:` ${w.text}
Total: ${y}
Shop at: ${w.url}

#AIOCart #OnlineShopping #SriLanka`};default:return w}},u=()=>{const m=l("facebook"),g=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(m.url)}&quote=${encodeURIComponent(m.text)}`,b=600,v=400,y=(window.innerWidth-b)/2,w=(window.innerHeight-v)/2;window.open(g,"facebook-share",`width=${b},height=${v},left=${y},top=${w},toolbar=0,menubar=0,scrollbars=1`),c({...o,facebook:!0}),setTimeout(()=>c({...o,facebook:!1}),3e3)},d=()=>{const m=l("whatsapp"),g=`https://wa.me/?text=${encodeURIComponent(m.text)}`;window.open(g,"_blank"),c({...o,whatsapp:!0}),setTimeout(()=>c({...o,whatsapp:!1}),3e3)},A=()=>{const m=l("instagram");navigator.clipboard.writeText(m.text).then(()=>{c({...o,instagram:!0}),alert(`Caption copied to clipboard! 

To share on Instagram:
1. Open Instagram app
2. Create a new post or story
3. Paste the copied caption
4. Add your own photo or use our branded template!`),setTimeout(()=>c({...o,instagram:!1}),3e3)}).catch(()=>{alert("Unable to copy to clipboard. Please try again.")})},f=()=>{const m=l("copy");navigator.clipboard.writeText(m.text).then(()=>{a(!0),setTimeout(()=>a(!1),3e3)}).catch(()=>{const g=document.createElement("textarea");g.value=m.text,document.body.appendChild(g),g.select(),document.execCommand("copy"),document.body.removeChild(g),a(!0),setTimeout(()=>a(!1),3e3)})},p=async()=>{if(navigator.share)try{const m=l("native");await navigator.share({title:`My ${t} from AIO Cart`,text:m.text,url:m.url}),c({...o,native:!0}),setTimeout(()=>c({...o,native:!1}),3e3)}catch(m){m.name!=="AbortError"&&console.error("Error sharing:",m)}};return n.jsxs("div",{className:`space-y-4 ${s}`,children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Share Your Purchase! "}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Let your friends know about your great shopping experience"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs("button",{onClick:u,className:`flex flex-col items-center p-4 border-2 rounded-lg transition-all hover:scale-105 ${o.facebook?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"}`,children:[o.facebook?n.jsx(Xa,{className:"w-6 h-6 text-blue-500 mb-2"}):n.jsx(R1,{className:"w-6 h-6 text-blue-600 mb-2"}),n.jsx("span",{className:"text-sm font-medium",children:o.facebook?"Shared!":"Facebook"})]}),n.jsxs("button",{onClick:A,className:`flex flex-col items-center p-4 border-2 rounded-lg transition-all hover:scale-105 ${o.instagram?"border-pink-500 bg-pink-50 text-pink-700":"border-gray-200 hover:border-pink-300 hover:bg-pink-50"}`,children:[o.instagram?n.jsx(Xa,{className:"w-6 h-6 text-pink-500 mb-2"}):n.jsx(Q1,{className:"w-6 h-6 text-pink-600 mb-2"}),n.jsx("span",{className:"text-sm font-medium",children:o.instagram?"Copied!":"Instagram"})]}),n.jsxs("button",{onClick:d,className:`flex flex-col items-center p-4 border-2 rounded-lg transition-all hover:scale-105 ${o.whatsapp?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-green-300 hover:bg-green-50"}`,children:[o.whatsapp?n.jsx(Xa,{className:"w-6 h-6 text-green-500 mb-2"}):n.jsx(Ku,{className:"w-6 h-6 text-green-600 mb-2"}),n.jsx("span",{className:"text-sm font-medium",children:o.whatsapp?"Shared!":"WhatsApp"})]}),navigator.share?n.jsxs("button",{onClick:p,className:`flex flex-col items-center p-4 border-2 rounded-lg transition-all hover:scale-105 ${o.native?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300 hover:bg-purple-50"}`,children:[o.native?n.jsx(Xa,{className:"w-6 h-6 text-purple-500 mb-2"}):n.jsx(tA,{className:"w-6 h-6 text-purple-600 mb-2"}),n.jsx("span",{className:"text-sm font-medium",children:o.native?"Shared!":"Share"})]}):n.jsxs("button",{onClick:f,className:`flex flex-col items-center p-4 border-2 rounded-lg transition-all hover:scale-105 ${i?"border-gray-500 bg-gray-50 text-gray-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[i?n.jsx(Xa,{className:"w-6 h-6 text-gray-500 mb-2"}):n.jsx(M1,{className:"w-6 h-6 text-gray-600 mb-2"}),n.jsx("span",{className:"text-sm font-medium",children:i?"Copied!":"Copy"})]})]}),n.jsx("div",{className:"text-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",n.jsx("strong",{children:"Pro Tip:"})," Friends who shop through your shares get 5% off their first order!"]})})]})},ose=({purchaseData:r,type:t="order",className:s=""})=>{const{addToOrder:i,addToBookings:a}=ac(),{user:o}=Fn(),[c,l]=ee.useState([]),[u,d]=ee.useState(!0),[A,f]=ee.useState(null),[p,m]=ee.useState("related"),g=ee.useRef(null),b=ee.useRef(0),v=ee.useRef(null),y=ee.useCallback(async()=>{g.current&&g.current.abort(),g.current=new AbortController;const _=++b.current;try{d(!0),f(null);let S="",N=new URLSearchParams;if(p==="related")if(t==="order"&&r.items?.length>0){const O=[...new Set(r.items.map(k=>k.productId?.category).filter(Boolean))];S="/api/products/recommendations",N.append("categories",O.join(",")),N.append("exclude",r.items.map(k=>k.productId?._id).filter(Boolean).join(","))}else t==="booking"&&r.serviceId&&(S="/api/services/recommendations",N.append("category",r.serviceId.category),N.append("exclude",r.serviceId._id));else if(p==="store"){const O=r.storeId?._id;O&&(S=t==="order"?"/api/products":"/api/services",N.append("storeId",O),N.append("limit","8"),t==="order"&&r.items?.length>0?N.append("exclude",r.items.map(k=>k.productId?._id).filter(Boolean).join(",")):t==="booking"&&r.serviceId&&N.append("exclude",r.serviceId._id))}else p==="popular"&&(S=t==="order"?"/api/products":"/api/services",N.append("sort","popular"),N.append("limit","8"));if(S){const O=await fetch(`http://localhost:10000${S}?${N.toString()}`,{credentials:"include",signal:g.current.signal});if(_!==b.current)return;if(O.ok){const k=await O.json();_===b.current&&(Array.isArray(k)?l(k.slice(0,8)):k.products?l(k.products.slice(0,8)):k.services?l(k.services.slice(0,8)):k.data?l(k.data.slice(0,8)):l([]),f(null))}else if(_===b.current)throw new Error(`Failed to fetch recommendations (${O.status})`)}else _===b.current&&(l([]),f(null))}catch(S){S.name!=="AbortError"&&_===b.current&&(console.error("Error fetching recommendations:",S),f("Unable to load recommendations"),l([]))}finally{_===b.current&&d(!1)}},[p,r,t]),w=ee.useCallback(()=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{y()},150)},[y]);ee.useEffect(()=>(r&&w(),()=>{v.current&&clearTimeout(v.current)}),[r,p,w]),ee.useEffect(()=>()=>{g.current&&g.current.abort()},[]);const j=_=>{switch(_){case"related":return n.jsx(qu,{className:"w-4 h-4"});case"store":return n.jsx(Ti,{className:"w-4 h-4"});case"popular":return n.jsx(ti,{className:"w-4 h-4"});default:return null}},C=_=>{switch(_){case"related":return"Related Items";case"store":return"More from Store";case"popular":return"Popular Items";default:return _}};if(!r)return null;const B=t==="order",E=["related","store","popular"];return n.jsxs("div",{className:`space-y-6 ${s}`,children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"You Might Also Like "}),n.jsxs("p",{className:"text-gray-600",children:["Discover more amazing ",B?"products":"services"," just for you"]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:E.map(_=>n.jsxs("button",{onClick:()=>m(_),className:`flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${p===_?"bg-white text-black shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[j(_),n.jsx("span",{children:C(_)})]},_))})}),u?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx(cs,{size:"lg"})}):A?n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-600",children:A})}):c.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-600",children:"No recommendations available at the moment"})}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map(_=>B?n.jsx(Ay,{product:_},_._id):n.jsx(hy,{service:_},_._id))}),c.length>0&&n.jsx("div",{className:"text-center",children:n.jsxs(Zt,{to:B?"/products":"/services",className:"inline-flex items-center space-x-2 text-black hover:text-gray-700 font-medium transition-colors",children:[n.jsxs("span",{children:["Explore More ",B?"Products":"Services"]}),n.jsx(Mo,{className:"w-4 h-4"})]})})]})},lse=()=>{const[r]=ry(),t=yi(),{user:s,loading:i}=Fn(),[a,o]=ee.useState(null),[c,l]=ee.useState(!0),[u,d]=ee.useState(null),[A,f]=ee.useState(null),p=r.get("transactionId"),m=r.get("type"),g=r.get("paymentMethod");ee.useEffect(()=>{if(console.log(`ThankYou - useEffect triggered. transactionId: ${p}, type: ${m}, user:`,s,"authLoading:",i),!p||!m){console.error(`ThankYou - Missing required params. transactionId: ${p}, type: ${m}`),d("Invalid purchase information"),l(!1);return}if(i){console.log("ThankYou - Auth still loading, waiting...");return}if(!s){console.log("ThankYou - Auth finished loading but no user found"),d("Please log in to view purchase information"),l(!1);return}b()},[p,m,s,i]),ee.useEffect(()=>{if(a&&!c&&!u){if(typeof gtag<"u"){const C=m==="order"?a.items?.map(B=>({item_id:B.productId?._id,item_name:B.productId?.title,category:B.productId?.category,quantity:B.quantity,price:B.productId?.price})):[{item_id:a.serviceId?._id,item_name:a.serviceId?.title,category:a.serviceId?.category,quantity:1,price:a.totalAmount}];gtag("event","purchase",{transaction_id:a._id,value:a.totalAmount,currency:"LKR",items:C})}typeof clarity<"u"&&clarity("event","purchase",{type:m,amount:a.totalAmount,transaction_id:a._id})}},[a,c,u,m]);const b=async()=>{try{l(!0),d(null);const C=await fetch(`http://localhost:10000/api/thank-you/${m}/${p}`,{credentials:"include"});if(C.ok){const B=await C.json();if(o(B),m==="order"&&B.shippingAddress){const E=WI({customerProvince:B.shippingAddress.province||"Western",storeProvince:B.storeId?.province||"Western",shippingMethod:B.shippingMethod||"standard",hasPreorderItems:B.items?.some(_=>_.productId?.isPreorder),storeProcessingDays:B.storeId?.processingDays||0});f(E)}}else{const B=await C.text();throw new Error(`Failed to fetch purchase data: ${C.status}`)}}catch(C){console.error("ThankYou - Error fetching purchase data:",C),d(`Unable to load purchase information: ${C.message}`)}finally{console.log("ThankYou - Setting loading to false"),l(!1)}},v=()=>{t(m==="order"?"/products":"/services")},y=()=>{t(`/${m==="order"?"orders":"bookings"}`)};if(console.log(`ThankYou - Rendering with: loading=${c}, authLoading=${i}, error=${u}, purchaseData=${!!a}`),i||c)return console.log("ThankYou - Rendering loading spinner"),n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsx(cs,{size:"lg"})});if(u||!a)return console.log("ThankYou - Rendering error state"),n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[n.jsx(Ki,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oops! Something went wrong"}),n.jsx("p",{className:"text-gray-600 mb-6",children:u||"We couldn't find your purchase information."}),n.jsx("button",{onClick:()=>t("/"),className:"w-full bg-black text-white py-3 px-6 rounded-lg hover:bg-gray-800 transition-colors",children:"Return to Home"})]})});console.log("ThankYou - Rendering success state with purchaseData");const w=a.status==="pending"||a.paymentStatus==="pending",j=m==="order";return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:n.jsxs("button",{onClick:()=>t("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[n.jsx(oc,{className:"w-5 h-5"}),n.jsx("span",{children:"Back to Home"})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[n.jsx("div",{className:"text-center mb-8",children:w?n.jsxs("div",{className:"space-y-4",children:[n.jsx(_R,{className:"w-16 h-16 text-yellow-500 mx-auto animate-pulse"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Payment Processing... "}),n.jsx("p",{className:"text-gray-600 text-lg",children:g==="payhere"?"We're confirming your PayHere payment. This usually takes a few moments.":"Your payment is being processed. We'll update you once confirmed."})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(Xr,{className:"w-16 h-16 text-green-500 mx-auto"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Thank You! "}),n.jsxs("p",{className:"text-gray-600 text-lg",children:["Your ",j?"order":"booking"," has been confirmed successfully!"]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[j?"Order":"Booking"," Details"]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"ID:"})," #",a._id?.slice(-8).toUpperCase()]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Date:"})," ",new Date(a.createdAt).toLocaleDateString()]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total:"})," ",Br(a.totalAmount)]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Payment:"}),n.jsx("span",{className:`ml-1 px-2 py-1 rounded text-xs ${w?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:w?"Processing":"Confirmed"})]})]})]}),j&&A&&n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[n.jsx(ps,{className:"w-4 h-4 inline mr-1"}),"Delivery Information"]}),n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-medium text-green-700",children:qI(A)}),n.jsxs("p",{className:"text-gray-600 mt-1",children:["Shipping to: ",a.shippingAddress?.city,", ",a.shippingAddress?.province]})]})]}),!j&&a.scheduledDate&&n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[n.jsx(ms,{className:"w-4 h-4 inline mr-1"}),"Service Information"]}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("p",{className:"font-medium text-blue-700",children:["Scheduled: ",new Date(a.scheduledDate).toLocaleDateString()]}),n.jsxs("p",{className:"text-gray-600 mt-1",children:["Duration: ",a.serviceId?.duration||"As needed"]})]})]})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[n.jsxs("button",{onClick:y,className:"flex-1 bg-black text-white py-3 px-6 rounded-lg hover:bg-gray-800 transition-colors text-center",children:["View ",j?"Order":"Booking"," Details"]}),n.jsx("button",{onClick:v,className:"flex-1 border border-gray-300 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-50 transition-colors text-center",children:"Continue Shopping"})]}),n.jsx("div",{className:"mb-8",children:n.jsx(ise,{purchaseData:a,type:m,deliveryEstimate:A})}),n.jsx("div",{className:"mb-8",children:n.jsx(ase,{purchaseData:a,type:m})}),n.jsx("div",{className:"mb-8",children:n.jsx(ose,{purchaseData:a,type:m})}),n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Dk,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"What's Next?"}),n.jsx("div",{className:"grid md:grid-cols-2 gap-4 mt-4 text-left",children:j?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Order Updates"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Track your order status and get real-time updates via email and SMS."})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Delivery"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Your order will be delivered within the estimated timeframe. No need to be home!"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Service Confirmation"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"The service provider will contact you 24 hours before your appointment."})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Rate & Review"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"After service completion, please share your experience to help others."})]})]})})]})}),n.jsx("div",{className:"text-center mt-8 p-4 bg-gray-100 rounded-lg",children:n.jsxs("p",{className:"text-gray-600 text-sm",children:["Need help with your ",j?"order":"booking","?",n.jsx("a",{href:"/contact",className:"text-blue-600 hover:underline ml-1",children:"Contact Support"})]})})]})]})};function cse(){return n.jsx(VR,{children:n.jsx(YD,{children:n.jsx(MR,{children:n.jsx(DR,{children:n.jsx(XD,{children:n.jsx(JD,{children:n.jsx(HR,{children:n.jsx(D8,{children:n.jsxs(yN,{children:[n.jsx(dn,{path:"/feed",element:n.jsx(Xne,{})}),n.jsx(dn,{path:"*",element:n.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[n.jsx(WR,{}),n.jsxs("main",{className:"flex-1",children:[n.jsx(YR,{}),n.jsxs(yN,{children:[n.jsx(dn,{path:"/",element:n.jsx(n7,{})}),n.jsx(dn,{path:"/stores",element:n.jsx(i7,{})}),n.jsx(dn,{path:"/products",element:n.jsx(c7,{})}),n.jsx(dn,{path:"/services",element:n.jsx(h7,{})}),n.jsx(dn,{path:"/product/:id",element:n.jsx(n$,{})}),n.jsx(dn,{path:"/service/:id",element:n.jsx($9,{})}),n.jsx(dn,{path:"/store/:id",element:n.jsx(cH,{})}),n.jsx(dn,{path:"/cart",element:n.jsx(uH,{})}),n.jsx(dn,{path:"/wishlist",element:n.jsx(tse,{})}),n.jsx(dn,{path:"/booking-summary",element:n.jsx(dH,{})}),n.jsx(dn,{path:"/checkout",element:n.jsx(AH,{})}),n.jsx(dn,{path:"/thank-you",element:n.jsx(lse,{})}),n.jsx(dn,{path:"/login",element:n.jsx(hH,{})}),n.jsx(dn,{path:"/register",element:n.jsx(fH,{})}),n.jsx(dn,{path:"/profile",element:n.jsx(SH,{})}),n.jsx(dn,{path:"/dashboard",element:n.jsx(MH,{})}),n.jsx(dn,{path:"/create-store",element:n.jsx(RH,{})}),n.jsx(dn,{path:"/create-product",element:n.jsx(QH,{})}),n.jsx(dn,{path:"/create-service",element:n.jsx($H,{})}),n.jsx(dn,{path:"/manage-products",element:n.jsx(HH,{})}),n.jsx(dn,{path:"/manage-services",element:n.jsx(VH,{})}),n.jsx(dn,{path:"/orders",element:n.jsx(zH,{})}),n.jsx(dn,{path:"/bookings",element:n.jsx(KH,{})}),n.jsx(dn,{path:"/receipt/:id",element:n.jsx(lJ,{})}),n.jsx(dn,{path:"/store-management",element:n.jsx(uJ,{})}),n.jsx(dn,{path:"/sales-analytics",element:n.jsx(VJ,{})}),n.jsx(dn,{path:"/admin",element:n.jsx(xJ,{})}),n.jsx(dn,{path:"/platform-settings",element:n.jsx(zJ,{})}),n.jsx(dn,{path:"/help-center",element:n.jsx(KJ,{})}),n.jsx(dn,{path:"/contact-us",element:n.jsx(GJ,{})}),n.jsx(dn,{path:"/privacy-policy",element:n.jsx(Ene,{})}),n.jsx(dn,{path:"/terms-of-service",element:n.jsx(One,{})}),n.jsx(dn,{path:"/notifications",element:n.jsx(_ne,{})}),n.jsx(dn,{path:"/admin-withdrawals",element:n.jsx(Ine,{})}),n.jsx(dn,{path:"/wallet-dashboard",element:n.jsx(Mne,{})}),n.jsx(dn,{path:"/sub-management",element:n.jsx(Qne,{})}),n.jsx(dn,{path:"/sale",element:n.jsx(ese,{})}),n.jsx(dn,{path:"/test",element:n.jsx(Wne,{})}),n.jsx(dn,{path:"/new-post",element:n.jsx(qne,{})}),n.jsx(dn,{path:"/NfcCard",element:n.jsx($ne,{})}),n.jsx(dn,{path:"*",element:n.jsx(dJ,{})})]})]}),n.jsx(qR,{}),n.jsx(XR,{})]})})]})})})})})})})})})}LP.createRoot(document.getElementById("root")).render(n.jsx(ee.StrictMode,{children:n.jsx(cse,{})}));export{ss as _,use as c,Tp as g};
